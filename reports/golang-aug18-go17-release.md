# August 18, 2016 Report - 1.7 Release Report

Number of commits: 2618

## Compilation time

* github.com/boltdb/bolt/cmd/bolt: from 896.422603ms to 591.938888ms, -33.97%
* github.com/coreos/etcd: from 19.972392715s to 13.720111409s, -31.30%
* github.com/gogits/gogs: from 21.321361237s to 13.765160253s, -35.44%
* github.com/grafana/grafana/pkg/cmd/grafana-server: from 41.857540153s to 35.21983685s, -15.86%
* github.com/influxdata/influxdb/cmd/influxd: from 9.315015559s to 6.747189682s, -27.57%
* github.com/junegunn/fzf/src/fzf: from 1.502196146s to 1.028185928s, -31.55%
* github.com/mholt/caddy/caddy: from 10.547308591s to 6.205710907s, -41.16%
* github.com/monochromegane/the_platinum_searcher/cmd/pt: from 2.244452542s to 1.611611546s, -28.20%
* github.com/nsqio/nsq/apps/nsqd: from 3.549434917s to 2.212453609s, -37.67%
* github.com/prometheus/prometheus/cmd/prometheus: from 15.847923625s to 9.975685522s, -37.05%
* github.com/spf13/hugo: from 11.062636479s to 7.876749451s, -28.80%
* golang.org/x/tools/cmd/guru: from 3.824423257s to 2.780342645s, -27.30%

## Binary size:

* github.com/boltdb/bolt/cmd/bolt: from 3502960 to 2679372, -23.51%
* github.com/coreos/etcd: from 30182432 to 24570808, -18.59%
* github.com/gogits/gogs: from 29320424 to 24165738, -17.58%
* github.com/grafana/grafana/pkg/cmd/grafana-server: from 32969216 to 27705288, -15.97%
* github.com/influxdata/influxdb/cmd/influxd: from 20228464 to 16692722, -17.48%
* github.com/junegunn/fzf/src/fzf: from 4097752 to 3252216, -20.63%
* github.com/mholt/caddy/caddy: from 18374240 to 15152137, -17.54%
* github.com/monochromegane/the_platinum_searcher/cmd/pt: from 5542200 to 4598435, -17.03%
* github.com/nsqio/nsq/apps/nsqd: from 12011912 to 10012284, -16.65%
* github.com/prometheus/prometheus/cmd/prometheus: from 28141728 to 23119508, -17.85%
* github.com/spf13/hugo: from 19397912 to 15885876, -18.11%
* golang.org/x/tools/cmd/guru: from 9571344 to 7851170, -17.97%

## Bechmarks:

```
benchmark                            old ns/op     new ns/op     delta
BenchmarkMsgpMarshal-4               284           188           -33.80%
BenchmarkMsgpUnmarshal-4             502           405           -19.32%
BenchmarkEasyJsonMarshal-4           1926          1615          -16.15%
BenchmarkEasyJsonUnmarshal-4         2450          2107          -14.00%
BenchmarkFlatBuffersMarshal-4        835           363           -56.53%
BenchmarkFlatBuffersUnmarshal-4      361           291           -19.39%
BenchmarkGogoprotobufMarshal-4       210           162           -22.86%
BenchmarkGogoprotobufUnmarshal-4     309           254           -17.80%

benchmark                            old allocs     new allocs     delta
BenchmarkMsgpMarshal-4               1              1              +0.00%
BenchmarkMsgpUnmarshal-4             3              3              +0.00%
BenchmarkEasyJsonMarshal-4           5              5              +0.00%
BenchmarkEasyJsonUnmarshal-4         4              4              +0.00%
BenchmarkFlatBuffersMarshal-4        0              0              +0.00%
BenchmarkFlatBuffersUnmarshal-4      3              3              +0.00%
BenchmarkGogoprotobufMarshal-4       1              1              +0.00%
BenchmarkGogoprotobufUnmarshal-4     3              3              +0.00%

benchmark                            old bytes     new bytes     delta
BenchmarkMsgpMarshal-4               128           128           +0.00%
BenchmarkMsgpUnmarshal-4             112           112           +0.00%
BenchmarkEasyJsonMarshal-4           784           784           +0.00%
BenchmarkEasyJsonUnmarshal-4         160           160           +0.00%
BenchmarkFlatBuffersMarshal-4        0             0             +0.00%
BenchmarkFlatBuffersUnmarshal-4      112           112           +0.00%
BenchmarkGogoprotobufMarshal-4       64            64            +0.00%
BenchmarkGogoprotobufUnmarshal-4     96            96            +0.00%
```
## Highlights: 

* [Go 1.7 Release Notes](https://golang.org/doc/go1.7)


## GIT Log

```
commit 0d818588685976407c81c60d2fda289361cbc8ec
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 15 14:09:32 2016 -0700

    go1.7
    
    Change-Id: Id86f2615772ce087c2ac1a9039ffc27c33298773
    Reviewed-on: https://go-review.googlesource.com/27075
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 681a667ced1bed5fd3e269963298943c781516f4
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 15 12:57:13 2016 -0700

    [release-branch.go1.7] doc: document go1.7
    
    Change-Id: Ieae5831b35768a625bf735a38f3d938f23f0b77b
    Reviewed-on: https://go-review.googlesource.com/27057
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-on: https://go-review.googlesource.com/27070
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 806a84d3f1cd24f7f9b40fda4f5bd971eb7e81ff
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 15 12:01:23 2016 -0700

    [release-branch.go1.7] doc: update version tag in source install instructions
    
    Change-Id: Id83e0371b7232b01be83640ef1e47f9026cf2a23
    Reviewed-on: https://go-review.googlesource.com/27055
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-on: https://go-review.googlesource.com/27056
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 87d4bd19972ea9ffc599e8b679429c89284db86c
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 8 17:44:33 2016 -0700

    [release-branch.go1.6] doc/go1.7.html: remove DRAFT
    
    Fixes #15820.
    
    Change-Id: Ia5d5237754e77774a3a6049765eea163911f41c9
    Reviewed-on: https://go-review.googlesource.com/25592
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-on: https://go-review.googlesource.com/27054
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 1e933ed7c091bd8e077ffd123234af10a69e3978
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 8 11:41:16 2016 -0700

    go1.7rc6
    
    Change-Id: Ie76b5af0ecc4c64c523110b44483c06e7031237c
    Reviewed-on: https://go-review.googlesource.com/25582
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 78d024a5880a3a1b6e779a6585344b6c20a200ec
Merge: 09fc3cc 7a62274
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 8 11:28:55 2016 -0700

    all: merge master into release-branch.go1.7
    
    7a62274 net/http: make Transport use new connection if over HTTP/2 concurrency limit
    219ca60 doc: fix required OS X version inconsistency for binary downloads
    26015b9 runtime: make stack 16-byte aligned for external code in _rt0_amd64_linux_lib
    9fde86b runtime, syscall: fix kernel gettimeofday ABI change on iOS 10
    3a03e87 os: check for waitid returning ENOSYS
    1031675 net/http: update bundled http2 for flow control window adjustment fix
    da070be syscall: fix Gettimeofday on macOS Sierra
    f135c32 runtime: initialize hash algs before typemap
    
    Change-Id: Ie176f3db1e253d75ae8e56b16d3fd9900b37dde3

commit 7a622740655bb5fcbd160eb96887032314842e6e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Aug 8 17:14:01 2016 +0000

    net/http: make Transport use new connection if over HTTP/2 concurrency limit
    
    The Go HTTP/1 client will make as many new TCP connections as the user requests.
    
    The HTTP/2 client tried to have that behavior, but the policy of
    whether a connection is re-usable didn't take into account the extra 1
    stream counting against SETTINGS_MAX_CONCURRENT_STREAMS so in practice
    users were getting errors.
    
    For example, if the server's advertised max concurrent streams is 100
    and 200 concurrrent Go HTTP requests ask for a connection at once, all
    200 will think they can reuse that TCP connection, but then 100 will
    fail later when the number of concurrent streams exceeds 100.
    
    Instead, recognize the "no cached connections" error value in the
    shouldRetryRequest method, so those 100 will retry a new connection.
    
    This is the conservative fix for Go 1.7 so users don't get errors, and
    to match the HTTP/1 behavior. Issues #13957 and #13774 are the more
    involved bugs for Go 1.8.
    
    Updates #16582
    Updates #13957
    
    Change-Id: I1f15a7ce60c07a4baebca87675836d6fe03993e8
    Reviewed-on: https://go-review.googlesource.com/25580
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 219ca602ab3f9d7d857bc1640e2b9e01475cdc3d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Aug 6 10:12:03 2016 -0700

    doc: fix required OS X version inconsistency for binary downloads
    
    Updates #16625
    
    Change-Id: Icac6705828bd9b29379596ba64b34d922b9002c3
    Reviewed-on: https://go-review.googlesource.com/25548
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 26015b95634de49bc5b4ac998e8a2d1fcb8eca79
Author: Shenghou Ma <minux@golang.org>
Date:   Fri Aug 5 19:16:07 2016 -0400

    runtime: make stack 16-byte aligned for external code in _rt0_amd64_linux_lib
    
    Fixes #16618.
    
    Change-Id: Iffada12e8672bbdbcf2e787782c497e2c45701b1
    Reviewed-on: https://go-review.googlesource.com/25550
    Run-TryBot: Minux Ma <minux@golang.org>
    Reviewed-by: Arjan Van De Ven <arjan.van.de.ven@intel.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9fde86b0124b8c75000eb5d05887eff922a24566
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Aug 4 21:34:06 2016 -0400

    runtime, syscall: fix kernel gettimeofday ABI change on iOS 10
    
    Fixes #16570 on iOS.
    
    Thanks Daniel Burhans for reporting the bug and testing the fix.
    
    Change-Id: I43ae7b78c8f85a131ed3d93ea59da9f32a02cd8f
    Reviewed-on: https://go-review.googlesource.com/25481
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3a03e877cc03c1fd155055e60a3f1f9cb8bda8d0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Aug 4 19:53:52 2016 -0700

    os: check for waitid returning ENOSYS
    
    Reportedly waitid is not available for Ubuntu on Windows.
    
    Fixes #16610.
    
    Change-Id: Ia724f45a85c6d3467b847da06d8c65d280781dcd
    Reviewed-on: https://go-review.googlesource.com/25507
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 10316757cec3c2744ea61088e0fc905cfeb28fb2
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Aug 5 16:42:31 2016 +0000

    net/http: update bundled http2 for flow control window adjustment fix
    
    Updates bundled http2 to x/net/http2 git rev 075e191 for:
    
       http2: adjust flow control on open streams when processing SETTINGS
       https://golang.org/cl/25508
    
    Fixes #16612
    
    Change-Id: Ib0513201bff44ab747a574ae6894479325c105d2
    Reviewed-on: https://go-review.googlesource.com/25543
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit da070bed19fb23a8dd1b9f974c7fdf1f247fdba0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Aug 4 12:21:05 2016 -0700

    syscall: fix Gettimeofday on macOS Sierra
    
    Fixes #16606
    
    Change-Id: I57465061b90e901293cd8b6ef756d6aa84ebd4a3
    Reviewed-on: https://go-review.googlesource.com/25495
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f135c326402aaa757aa96aad283a91873d4ae124
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Aug 4 13:09:29 2016 -0400

    runtime: initialize hash algs before typemap
    
    When compiling with -buildmode=shared, a map[int32]*_type is created for
    each extra module mapping duplicate types back to a canonical object.
    This is done in the function typelinksinit, which is called before the
    init function that sets up the hash functions for the map
    implementation. The result is typemap becomes unusable after
    runtime initialization.
    
    The fix in this CL is to move algorithm init before typelinksinit in
    the runtime setup process. (For 1.8, we may want to turn typemap into
    a sorted slice of types and use binary search.)
    
    Manually tested on GOOS=linux with:
    
            GOHOSTARCH=386 GOARCH=386 ./make.bash && \
                    go install -buildmode=shared std && \
                    cd ../test && \
                    go run run.go -linkshared
    
    Fixes #16590
    
    Change-Id: Idc08c50cc70d20028276fbf564509d2cd5405210
    Reviewed-on: https://go-review.googlesource.com/25469
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 09fc3cc5df6b37b62a219bd4cacd8898a2328b76
Author: Chris Broadfoot <cbro@golang.org>
Date:   Tue Aug 2 15:59:05 2016 -0700

    go1.7rc5
    
    Change-Id: I5571a5fa679065060950c554f7b28e42268b3e74
    Reviewed-on: https://go-review.googlesource.com/25417
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 17a48e0a000894129a46d6143b8854460575867e
Merge: c628d83 50edddb
Author: Chris Broadfoot <cbro@golang.org>
Date:   Tue Aug 2 14:44:08 2016 -0700

    all: merge master into release-branch.go1.7
    
    Change-Id: I77d1665af543dc71f30b2afa48eac411de11afc7

commit 50edddb7383a0e4aef990a085777f958c5d8a2b8
Author: Chris Broadfoot <cbro@golang.org>
Date:   Tue Aug 2 14:30:06 2016 -0700

    VERSION: remove erroneously committed VERSION file
    
    Change-Id: I1134a4758b7e1a7da243c56f12ad9d2200c8ba41
    Reviewed-on: https://go-review.googlesource.com/25414
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ae68090d000c0a4a6cda0ef44a59809f914e2358
Merge: c628d83 2da5633
Author: Chris Broadfoot <cbro@golang.org>
Date:   Tue Aug 2 14:05:48 2016 -0700

    all: merge master into release-branch.go1.7
    
    Change-Id: I177856ea2bc9943cbde28ca9afa145b6ea5b0942

commit 2da5633eb9091608047881953f75b489a3134cdc
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Aug 1 21:54:40 2016 -0700

    runtime: fix nanotime for macOS Sierra, again.
    
    macOS Sierra beta4 changed the kernel interface for getting time.
    DX now optionally points to an address for additional info.
    Set it to zero to avoid corrupting memory.
    
    Fixes #16570
    
    Change-Id: I9f537e552682045325cdbb68b7d0b4ddafade14a
    Reviewed-on: https://go-review.googlesource.com/25400
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6317c213c953d0879fe88593b4372f03d25f369b
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Aug 1 20:04:25 2016 -0700

    cmd/doc: ensure functions with unexported return values are shown
    
    The commit in golang.org/cl/22354 groups constructors functions under
    the type that they construct to. However, this caused a minor regression
    where functions that had unexported return values were not being printed
    at all. Thus, we forgo the grouping logic if the type the constructor falls
    under is not going to be printed.
    
    Fixes #16568
    
    Change-Id: Idc14f5d03770282a519dc22187646bda676af612
    Reviewed-on: https://go-review.googlesource.com/25369
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c628d83ec5309cd679e16c734456fed1b9a85806
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 1 18:52:52 2016 -0700

    go1.7rc4
    
    Change-Id: Icf861dd28bfe29a2e4b90529e53644b43b6f7969
    Reviewed-on: https://go-review.googlesource.com/25368
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f5758739a8f011c1d146a7736ab8f0d2834e1783
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Aug 1 14:33:19 2016 -0700

    cmd/doc: handle embedded interfaces properly
    
    Changes made:
    * Disallow star expression on interfaces as this is not possible.
    * Show an embedded "error" in an interface as public similar to
    how godoc does it.
    * Properly handle selector expressions in both structs and interfaces.
    This is possible since a type may refer to something defined in
    another package (e.g. io.Reader).
    
    Before:
    <<<
    $ go doc runtime.Error
    type Error interface {
    
        // RuntimeError is a no-op function but
        // serves to distinguish types that are run time
        // errors from ordinary errors: a type is a
        // run time error if it has a RuntimeError method.
        RuntimeError()
        // Has unexported methods.
    }
    
    $ go doc compress/flate Reader
    doc: invalid program: unexpected type for embedded field
    doc: invalid program: unexpected type for embedded field
    type Reader interface {
        io.Reader
        io.ByteReader
    }
    >>>
    
    After:
    <<<
    $ go doc runtime.Error
    type Error interface {
        error
    
        // RuntimeError is a no-op function but
        // serves to distinguish types that are run time
        // errors from ordinary errors: a type is a
        // run time error if it has a RuntimeError method.
        RuntimeError()
    }
    
    $ go doc compress/flate Reader
    type Reader interface {
        io.Reader
        io.ByteReader
    }
    >>>
    
    Fixes #16567
    
    Change-Id: I272dede971eee9f43173966233eb8810e4a8c907
    Reviewed-on: https://go-review.googlesource.com/25365
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8ea89ba858823212114de952b8a1375ceb82587f
Merge: 8707f31 28ee179
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 1 18:26:06 2016 -0700

    all: merge master into release-branch.go1.7
    
    Change-Id: Ifb9647fa9817ed57aa4835a35a05020aba00a24e

commit 28ee17965703c4ef81cc97e5088539fe3e8e541f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Jul 28 13:42:11 2016 +0200

    net: prevent cancelation goroutine from adjusting fd timeout after connect
    
    This was previously fixed in https://golang.org/cl/21497 but not enough.
    
    Fixes #16523
    
    Change-Id: I678543a656304c82d654e25e12fb094cd6cc87e8
    Reviewed-on: https://go-review.googlesource.com/25330
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2629446df0cb906986f377d45cde307ffdae9675
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Aug 2 00:41:12 2016 +0000

    doc/go1.7.html: mention Server.Serve HTTP/2 behavior change
    
    Fixes #16550
    Updates #15908
    
    Change-Id: Ic951080dbc88f96e4c00cdb3ffe24a5c03079efd
    Reviewed-on: https://go-review.googlesource.com/25389
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit c558a539b5efaeda4b6f8e61f51c21f64d1b94f6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Aug 1 23:44:22 2016 +0000

    net/http: update bundled http2
    
    Updates bundled http2 to x/net/http2 rev 28d1bd4f for:
    
        http2: make Transport work around mod_h2 bug
        https://golang.org/cl/25362
    
        http2: don't ignore DATA padding in flow control
        https://golang.org/cl/25382
    
    Updates #16519
    Updates #16556
    Updates #16481
    
    Change-Id: I51f5696e977c91bdb2d80d2d56b8a78e3222da3f
    Reviewed-on: https://go-review.googlesource.com/25388
    Reviewed-by: Chris Broadfoot <cbro@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 111d590f86e2c9a55ec08d95fc4e9adea9232f0c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Jul 28 12:22:49 2016 -0400

    cmd/compile: fix possible spill of invalid pointer with DUFFZERO on AMD64
    
    SSA compiler on AMD64 may spill Duff-adjusted address as scalar. If
    the object is on stack and the stack moves, the spilled address become
    invalid.
    
    Making the spill pointer-typed does not work. The Duff-adjusted address
    points to the memory before the area to be zeroed and may be invalid.
    This may cause stack scanning code panic.
    
    Fix it by doing Duff-adjustment in genValue, so the intermediate value
    is not seen by the reg allocator, and will not be spilled.
    
    Add a test to cover both cases. As it depends on allocation, it may
    be not always triggered.
    
    Fixes #16515.
    
    Change-Id: Ia81d60204782de7405b7046165ad063384ede0db
    Reviewed-on: https://go-review.googlesource.com/25309
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit be915159073ed93fa511ceef7256bc8ee396d1c7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jul 27 08:51:47 2016 +0200

    doc/go1.7.html: add known issues section for FreeBSD crashes
    
    Updates #16396
    
    Change-Id: I7b4f85610e66f2c77c17cf8898cc41d81b2efc8c
    Reviewed-on: https://go-review.googlesource.com/25283
    Reviewed-by: Chris Broadfoot <cbro@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit ccca9c9cc0fa5b6ea6e5c8276a96eee8c27ebd87
Author: Rhys Hiltner <rhys@justin.tv>
Date:   Fri Jul 22 16:36:30 2016 -0700

    runtime: reduce GC assist extra credit
    
    Mutator goroutines that allocate memory during the concurrent mark
    phase are required to spend some time assisting the garbage
    collector. The magnitude of this mandatory assistance is proportional
    to the goroutine's allocation debt and subject to the assistance
    ratio as calculated by the pacer.
    
    When assisting the garbage collector, a mutator goroutine will go
    beyond paying off its allocation debt. It will build up extra credit
    to amortize the overhead of the assist.
    
    In fast-allocating applications with high assist ratios, building up
    this credit can take the affected goroutine's entire time slice.
    Reduce the penalty on each goroutine being selected to assist the GC
    in two ways, to spread the responsibility more evenly.
    
    First, do a consistent amount of extra scan work without regard for
    the pacer's assistance ratio. Second, reduce the magnitude of the
    extra scan work so it can be completed within a few hundred
    microseconds.
    
    Commentary on gcOverAssistWork is by Austin Clements, originally in
    https://golang.org/cl/24704
    
    Updates #14812
    Fixes #16432
    
    Change-Id: I436f899e778c20daa314f3e9f0e2a1bbd53b43e1
    Reviewed-on: https://go-review.googlesource.com/25155
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit c80e0d374ba3caf8ee32c6fe4a5474fa33928086
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jul 26 23:44:00 2016 +0200

    net/http: fix data race with concurrent use of Server.Serve
    
    Fixes #16505
    
    Change-Id: I0afabcc8b1be3a5dbee59946b0c44d4c00a28d71
    Reviewed-on: https://go-review.googlesource.com/25280
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 4a15508c663429652d32f5363c0964152b28dd74
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jul 26 23:58:44 2016 +0200

    crypto/x509: detect OS X version for FetchPEMRoots at run time
    
    https://golang.org/cl/25233 was detecting the OS X release at compile
    time, not run time. Detect it at run time instead.
    
    Fixes #16473 (again)
    
    Change-Id: I6bec4996e57aa50c52599c165aa6f1fae7423fa7
    Reviewed-on: https://go-review.googlesource.com/25281
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 66b47431cba75ce23630e17c1a3aa000e7b33d06
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jul 27 00:17:38 2016 +0200

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 6a513af for:
    
      http2: return flow control for closed streams
      https://golang.org/cl/25231
    
      http2: make Transport prefer HTTP response header recv before body write error
      https://golang.org/cl/24984
    
      http2: make Transport treat "Connection: close" the same as Request.Close
      https://golang.org/cl/24982
    
    Fixes golang/go#16481
    
    Change-Id: Iaddb166387ca2df1cfbbf09a166f8605578bec49
    Reviewed-on: https://go-review.googlesource.com/25282
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit b11fff3886705bd98aec4923f43216ed8e13cb1a
Author: Austin Clements <austin@google.com>
Date:   Mon Jul 25 13:41:07 2016 -0400

    runtime/pprof: document use of pprof package
    
    Currently the pprof package gives almost no guidance for how to use it
    and, despite the standard boilerplate used to create CPU and memory
    profiles, this boilerplate appears nowhere in the pprof documentation.
    
    Update the pprof package documentation to give the standard
    boilerplate in a form people can copy, paste, and tweak. This
    boilerplate is based on rsc's 2011 blog post on profiling Go programs
    at https://blog.golang.org/profiling-go-programs, which is where I
    always go when I need to copy-paste the boilerplate.
    
    Change-Id: I74021e494ea4dcc6b56d6fb5e59829ad4bb7b0be
    Reviewed-on: https://go-review.googlesource.com/25182
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit ff60da6962f71871fac3dd6a5406686ea92de8dc
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jul 26 16:55:40 2016 +0200

    crypto/x509: use Go 1.6 implementation for FetchPEMRoots for OS X 10.8
    
    Conservative fix for the OS X 10.8 crash. We can unify them back together
    during the Go 1.8 dev cycle.
    
    Fixes #16473
    
    Change-Id: If07228deb2be36093dd324b3b3bcb31c23a95035
    Reviewed-on: https://go-review.googlesource.com/25233
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 887606114902bd58c3838767ac2b66dadba27e5e
Author: Jack Lindamood <jlindamo@justin.tv>
Date:   Fri Jul 15 13:28:27 2016 -0700

    context: add test for WithDeadline in the past
    
    Adds a test case for calling context.WithDeadline() where the deadline
    exists in the past.  This change increases the code coverage of the
    context package.
    
    Change-Id: Ib486bf6157e779fafd9dab2b7364cdb5a06be36e
    Reviewed-on: https://go-review.googlesource.com/25007
    Reviewed-by: Sameer Ajmani <sameer@golang.org>
    Run-TryBot: Sameer Ajmani <sameer@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ea2376fcea0be75c856ebd199c0ad0f98192d406
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Jul 22 22:51:05 2016 +0000

    net/http: make Transport.RoundTrip return raw Conn.Read error on peek failure
    
    From at least Go 1.4 to Go 1.6, Transport.RoundTrip would return the
    error value from net.Conn.Read directly when the initial Read (1 byte
    Peek) failed while reading the HTTP response, if a request was
    outstanding. While never a documented or tested promise, Go 1.7 changed the
    behavior (starting at https://golang.org/cl/23160).
    
    This restores the old behavior and adds a test (but no documentation
    promises yet) while keeping the fix for spammy logging reported in #15446.
    
    This looks larger than it is: it just changes errServerClosedConn from
    a variable to a type, where the type preserves the underlying
    net.Conn.Read error, for unwrapping later in Transport.RoundTrip.
    
    Fixes #16465
    
    Change-Id: I6fa018991221e93c0cfe3e4129cb168fbd98bd27
    Reviewed-on: https://go-review.googlesource.com/25153
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 67f799c42cbe5fa667dbad0139a98728624cbf4b
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sat Jul 23 23:27:25 2016 -0400

    doc: add s390x information to asm.html
    
    Fixes #16362
    
    Change-Id: I676718a1149ed2f3ff80cb031e25de7043805399
    Reviewed-on: https://go-review.googlesource.com/25157
    Reviewed-by: Rob Pike <r@golang.org>

commit d0256118de0b397494a3f4ca6d2e1e889b8c114e
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Jul 25 15:49:35 2016 -0700

    compress/flate: document HuffmanOnly
    
    Fixes #16489
    
    Change-Id: I13e2ed6de59102f977566de637d8d09b4e541980
    Reviewed-on: https://go-review.googlesource.com/25200
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 10538a8f9e2e718a47633ac5a6e90415a2c3f5f1
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Jul 22 21:58:18 2016 +0000

    net/http: fix potential for-select spin with closed Context.Done channel
    
    Noticed when investigating a separate issue.
    
    No external bug report or repro yet.
    
    Change-Id: I8a1641a43163f22b09accd3beb25dd9e2a68a238
    Reviewed-on: https://go-review.googlesource.com/25152
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 8707f31c0abc6b607014e843b7cc188b3019daa9
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Jul 21 14:06:27 2016 -0700

    go1.7rc3
    
    Change-Id: Iaef13003979c68926c260c415d6074a50ae137b2
    Reviewed-on: https://go-review.googlesource.com/25142
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 16a2af03f17e5b2bcf468442e66ef7a99ae55c70
Merge: 0ebf6ce 243d51f
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Jul 21 12:38:13 2016 -0700

    all: merge master into release-branch.go1.7
    
    Change-Id: I2511c3f7583887b641c9b3694aae54789fbc5342

commit 243d51f05e5dc263e185f9b1f7f1fe96a2098644
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Jul 21 16:58:18 2016 +0000

    misc/trace: disable trace resolution warning
    
    It was removed in upstream Chrome https://codereview.chromium.org/2016863004
    
    Rather than update to the latest version, make the minimal change for Go 1.7 and
    change the "showToUser" boolean from true to false.
    
    Tested by hand that it goes away after this change.
    
    Updates #16247
    
    Change-Id: I051f49da878e554b1a34a88e9abc70ab50e18780
    Reviewed-on: https://go-review.googlesource.com/25117
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 846bc6c5ab396490717f8753cc3c271f9c1391e4
Author: David Chase <drchase@google.com>
Date:   Wed Jul 20 10:44:49 2016 -0400

    cmd/compile: change phi location to be optimistic at backedges
    
    This is:
    
    (1) a simple trick that cuts the number of phi-nodes
    (temporarily) inserted into the ssa representation by a factor
    of 10, and can cut the user time to compile tricky inputs like
    gogo/protobuf tests from 13 user minutes to 9.5, and memory
    allocation from 3.4GB to 2.4GB.
    
    (2) a fix to sparse lookup, that does not rely on
    an assumption proven false by at least one pathological
    input "etldlen".
    
    These two changes fix unrelated compiler performance bugs,
    both necessary to obtain good performance compiling etldlen.
    Without them it takes 20 minutes or longer, with them it
    completes in 2 minutes, without a gigantic memory footprint.
    
    Updates #16407
    
    Change-Id: Iaa8aaa8c706858b3d49de1c4865a7fd79e6f4ff7
    Reviewed-on: https://go-review.googlesource.com/23136
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 305a0ac123cf99d469f5519f8974f4911e690c48
Author: Keith Randall <khr@golang.org>
Date:   Mon Jul 18 23:06:04 2016 -0700

    cmd/compile: move phi args which are constants closer to the phi
    
    entry:
       x = MOVQconst [7]
       ...
    b1:
       goto b2
    b2:
       v = Phi(x, y, z)
    
    Transform that program to:
    
    entry:
       ...
    b1:
       x = MOVQconst [7]
       goto b2
    b2:
       v = Phi(x, y, z)
    
    This CL moves constant-generating instructions used by a phi to the
    appropriate immediate predecessor of the phi's block.
    
    We used to put all constants in the entry block.  Unfortunately, in
    large functions we have lots of constants at the start of the
    function, all of which are used by lots of phis throughout the
    function.  This leads to the constants being live through most of the
    function (especially if there is an outer loop).  That's an O(n^2)
    problem.
    
    Note that most of the non-phi uses of constants have already been
    folded into instructions (ADDQconst, MOVQstoreconst, etc.).
    
    This CL may be generally useful for other instances of compiler
    slowness, I'll have to check.  It may cause some programs to run
    slower, but probably not by much, as rematerializeable values like
    these constants are allocated late (not at their originally scheduled
    location) anyway.
    
    This CL is definitely a minimal change that can be considered for 1.7.
    We probably want to do a better job in the tighten pass generally, not
    just for phi args.  Leaving that for 1.8.
    
    Update #16407
    
    Change-Id: If112a8883b4ef172b2f37dea13e44bda9346c342
    Reviewed-on: https://go-review.googlesource.com/25046
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit ff227b8a56b66e72de744a39f5b68d6e6ce7f3fe
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jul 20 15:40:10 2016 -0700

    runtime: add explicit `INT $3` at end of Darwin amd64 sigtramp
    
    The omission of this instruction could confuse the traceback code if a
    SIGPROF occurred during a signal handler.  The traceback code would
    trace up to sigtramp, but would then get confused because it would see a
    PC address that did not appear to be in the function.
    
    Fixes #16453.
    
    Change-Id: I2b3d53e0b272fb01d9c2cb8add22bad879d3eebc
    Reviewed-on: https://go-review.googlesource.com/25104
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit f407ca9288c8556c466e316f390ee7e7e99647ae
Author: Austin Clements <austin@google.com>
Date:   Mon Jul 18 16:01:22 2016 -0400

    runtime: support smaller physical pages than PhysPageSize
    
    Most operations need an upper bound on the physical page size, which
    is what sys.PhysPageSize is for (this is checked at runtime init on
    Linux). However, a few operations need a *lower* bound on the physical
    page size. Introduce a "minPhysPageSize" constant to act as this lower
    bound and use it where it makes sense:
    
    1) In addrspace_free, we have to query each page in the given range.
       Currently we increment by the upper bound on the physical page
       size, which means we may skip over pages if the true size is
       smaller. Worse, we currently pass a result buffer that only has
       enough room for one page. If there are actually multiple pages in
       the range passed to mincore, the kernel will overflow this buffer.
       Fix these problems by incrementing by the lower-bound on the
       physical page size and by passing "1" for the length, which the
       kernel will round up to the true physical page size.
    
    2) In the write barrier, the bad pointer check tests for pointers to
       the first physical page, which are presumably small integers
       masquerading as pointers. However, if physical pages are smaller
       than we think, we may have legitimate pointers below
       sys.PhysPageSize. Hence, use minPhysPageSize for this test since
       pointers should never fall below that.
    
    In particular, this applies to ARM64 and MIPS. The runtime is
    configured to use 64kB pages on ARM64, but by default Linux uses 4kB
    pages. Similarly, the runtime assumes 16kB pages on MIPS, but both 4kB
    and 16kB kernel configurations are common. This also applies to ARM on
    systems where the runtime is recompiled to deal with a larger page
    size. It is also a step toward making the runtime use only a
    dynamically-queried page size.
    
    Change-Id: I1fdfd18f6e7cbca170cc100354b9faa22fde8a69
    Reviewed-on: https://go-review.googlesource.com/25020
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Austin Clements <austin@google.com>

commit d73ca5f4d8f6aef0c2e738cd1614d4dbf87735fb
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Wed Jul 20 13:52:03 2016 +0200

    runtime/race: fix memory leak
    
    The leak was reported internally on a sever canary that runs for days.
    After a day server consumes 5.6GB, after 6 days -- 12.2GB.
    The leak is exposed by the added benchmark.
    The leak is fixed upstream in :
    http://llvm.org/viewvc/llvm-project/compiler-rt/trunk/lib/tsan/rtl/tsan_rtl_thread.cc?view=diff&r1=276102&r2=276103&pathrev=276103
    
    Fixes #16441
    
    Change-Id: I9d4f0adef48ca6cf2cd781b9a6990ad4661ba49b
    Reviewed-on: https://go-review.googlesource.com/25091
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>

commit 50048a4e8ee11016227c283be2d073e14e1c006b
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jul 18 23:00:43 2016 -0700

    runtime: add as many extra M's as needed
    
    When a non-Go thread calls into Go, the runtime needs an M to run the Go
    code. The runtime keeps a list of extra M's available. When the last
    extra M is allocated, the needextram field is set to tell it to allocate
    a new extra M as soon as it is running in Go. This ensures that an extra
    M will always be available for the next thread.
    
    However, if many threads need an extra M at the same time, this
    serializes them all. One thread will get an extra M with the needextram
    field set. All the other threads will see that there is no M available
    and will go to sleep. The one thread that succeeded will create a new
    extra M. One lucky thread will get it. All the other threads will see
    that there is no M available and will go to sleep. The effect is
    thundering herd, as all the threads looking for an extra M go through
    the process one by one. This seems to have a particularly bad effect on
    the FreeBSD scheduler for some reason.
    
    With this change, we track the number of threads waiting for an M, and
    create all of them as soon as one thread gets through. This still means
    that all the threads will fight for the lock to pick up the next M. But
    at least each thread that gets the lock will succeed, instead of going
    to sleep only to fight again.
    
    This smooths out the performance greatly on FreeBSD, reducing the
    average wall time of `testprogcgo CgoCallbackGC` by 74%.  On GNU/Linux
    the average wall time goes down by 9%.
    
    Fixes #13926
    Fixes #16396
    
    Change-Id: I6dc42a4156085a7ed4e5334c60b39db8f8ef8fea
    Reviewed-on: https://go-review.googlesource.com/25047
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 883e128f4571a59842e1156b5ebe25d8420162d9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jul 19 20:27:55 2016 -0700

    net/smtp: document that the smtp package is frozen
    
    This copies the frozen wording from the log/syslog package.
    
    Fixes #16436
    
    Change-Id: If5d478023328925299399f228d8aaf7fb117c1b4
    Reviewed-on: https://go-review.googlesource.com/25080
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 1d2ca9e30c22bc9e8cd0b21dff58367443696c91
Author: Austin Clements <austin@google.com>
Date:   Mon Jul 18 11:34:11 2016 -0400

    doc/go1.7.html: start sentence on a new line
    
    Change-Id: Ia1c2ebcd2ccf7b98d89b378633bf4fc435d2364d
    Reviewed-on: https://go-review.googlesource.com/25019
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3ad586155bb8cd41fa0c0650a6b5feca871dfeed
Author: Austin Clements <austin@google.com>
Date:   Mon Jul 18 11:33:43 2016 -0400

    doc/go1.7.html: avoid term of art
    
    Rather than saying "stop-the-world", say "garbage collection pauses".
    
    Change-Id: Ifb2931781ab3094e04bea93f01f18f1acb889bdc
    Reviewed-on: https://go-review.googlesource.com/25018
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit d66cbec37afb7936b1ea0f7f2433cc070f667112
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jul 18 08:14:10 2016 -0700

    doc/go1.7.html: the 1.6.3 release supports Sierra
    
    Updates #16354
    Updates #16272
    
    Change-Id: I73e8df40621a0a17a1990f3b10ea996f4fa738aa
    Reviewed-on: https://go-review.googlesource.com/25014
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0ebf6ce087388cdd501a02ff92f2f8cafc3e1378
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Jul 18 08:19:17 2016 -0700

    [release-branch.go1.7] go1.7rc2
    
    Change-Id: I5473071f672f8352fbd3352e158d5be12823b58a
    Reviewed-on: https://go-review.googlesource.com/25017
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b3b0b7a1825c9249f2b323ffd23cbb128044fb6a
Author: Chris Broadfoot <cbro@golang.org>
Date:   Sun Jul 17 23:30:19 2016 -0700

    doc: document go1.6.3
    
    Change-Id: Ib33d7fb529aafcaf8ca7d43b2c9480f30d5c28cc
    Reviewed-on: https://go-review.googlesource.com/25011
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cad4e97af8f2e0b9f09b97f67fb3a89ced2e9021
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jul 18 06:05:24 2016 +0000

    [release-branch.go1.7] net/http, net/http/cgi: fix for CGI + HTTP_PROXY security issue
    
    Because,
    
    * The CGI spec defines that incoming request header "Foo: Bar" maps to
      environment variable HTTP_FOO == "Bar". (see RFC 3875 4.1.18)
    
    * The HTTP_PROXY environment variable is conventionally used to configure
      the HTTP proxy for HTTP clients (and is respected by default for
      Go's net/http.Client and Transport)
    
    That means Go programs running in a CGI environment (as a child
    process under a CGI host) are vulnerable to an incoming request
    containing "Proxy: attacker.com:1234", setting HTTP_PROXY, and
    changing where Go by default proxies all outbound HTTP requests.
    
    This is CVE-2016-5386, aka https://httpoxy.org/
    
    Fixes #16405
    
    Change-Id: I6f68ade85421b4807785799f6d98a8b077e871f0
    Reviewed-on: https://go-review.googlesource.com/25010
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>
    Reviewed-on: https://go-review.googlesource.com/25013

commit b97df54c31d6c4cc2a28a3c83725366d52329223
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jul 18 06:05:24 2016 +0000

    net/http, net/http/cgi: fix for CGI + HTTP_PROXY security issue
    
    Because,
    
    * The CGI spec defines that incoming request header "Foo: Bar" maps to
      environment variable HTTP_FOO == "Bar". (see RFC 3875 4.1.18)
    
    * The HTTP_PROXY environment variable is conventionally used to configure
      the HTTP proxy for HTTP clients (and is respected by default for
      Go's net/http.Client and Transport)
    
    That means Go programs running in a CGI environment (as a child
    process under a CGI host) are vulnerable to an incoming request
    containing "Proxy: attacker.com:1234", setting HTTP_PROXY, and
    changing where Go by default proxies all outbound HTTP requests.
    
    This is CVE-2016-5386, aka https://httpoxy.org/
    
    Fixes #16405
    
    Change-Id: I6f68ade85421b4807785799f6d98a8b077e871f0
    Reviewed-on: https://go-review.googlesource.com/25010
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 2837c395526476e31fb15dbb948ed77389cdc75b
Author: Austin Clements <austin@google.com>
Date:   Sun Jul 17 23:12:41 2016 -0400

    doc/go1.7.html: mention specific runtime improvements
    
    Most of the runtime improvements are hard to quantify or summarize,
    but it's worth mentioning some of the substantial improvements in STW
    time, and that the scavenger now actually works on ARM64, PPC64, and
    MIPS.
    
    Change-Id: I0e951038516378cc3f95b364716ef1c183f3445a
    Reviewed-on: https://go-review.googlesource.com/24966
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a6dbfc12c640c90e8dc552443d3ece04cbae4a9c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Jul 16 23:56:45 2016 +0000

    net: demote TestDialerDualStack to a flaky test
    
    Only run TestDialerDualStack on the builders, as to not annoy or
    otherwise distract users when it's not their fault.
    
    Even though the intention is to only run this on the builders, very
    few of the builders have IPv6 support. Oh well. We'll get some
    coverage.
    
    Updates #13324
    
    Change-Id: I13e7e3bca77ac990d290cabec88984cc3d24fb67
    Reviewed-on: https://go-review.googlesource.com/24985
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 510fb6397dfc93067dc90d42c58dfc5f8b995285
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Jul 16 02:42:52 2016 -0700

    fmt: properly handle early io.EOF Reads in readRune.readByte
    
    Change https://golang.org/cl/19895 caused a regression
    where the last character in a string would be dropped if it was
    accompanied by an io.EOF.
    
    This change fixes the logic so that the last byte is still returned
    without a problem.
    
    Fixes #16393
    
    Change-Id: I7a4d0abf761c2c15454136a79e065fe002d736ea
    Reviewed-on: https://go-review.googlesource.com/24981
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2b6eb276517ecba08985d59b6b1928e29743d3e0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jul 14 08:50:44 2016 -0700

    doc/go1.7.html: remove erroneous note about ppc64 and power8
    
    We decided that ppc64 should maintain power5 compatibility.
    ppc64le requires power8.
    
    Fixes #16372.
    
    Change-Id: If5b309a0563f55a3c1fe9c853d29a463f5b71101
    Reviewed-on: https://go-review.googlesource.com/24915
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4054769a31f66039f5fd74ca3164e9233f724da8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 14 07:25:05 2016 -0700

    runtime/internal/atomic: fix assembly arg sizes
    
    Change-Id: I80ccf40cd3930aff908ee64f6dcbe5f5255198d3
    Reviewed-on: https://go-review.googlesource.com/24914
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 29ed5da5f2804cab0f6f1c97309673ac5d22a99d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jul 13 13:22:47 2016 -0700

    runtime/pprof: don't print extraneous 0 after goexit
    
    This fixes erroneous handling of the more result parameter of
    runtime.Frames.Next.
    
    Fixes #16349.
    
    Change-Id: I4f1c0263dafbb883294b31dbb8922b9d3e650200
    Reviewed-on: https://go-review.googlesource.com/24911
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4d00937cecdea85b6f1eb894a6d28a53f5f2ff8a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jul 13 10:49:48 2016 -0600

    all: rename vendored golang.org/x/net packages to golang_org
    
    Regression from Go 1.6 to Go 1.7rc1: we had broken the ability for
    users to vendor "golang.org/x/net/http2" or "golang.org/x/net/route"
    because we were vendoring them ourselves and cmd/go and cmd/compile do
    not understand multiple vendor directories across multiple GOPATH
    workspaces (e.g. user's $GOPATH and default $GOROOT).
    
    As a short-term fix, since fixing cmd/go and cmd/compile is too
    invasive at this point in the cycle, just rename "golang.org" to
    "golang_org" for the standard library's vendored copy.
    
    Fixes #16333
    
    Change-Id: I9bfaed91e9f7d4ca6bab07befe80d71d437a21af
    Reviewed-on: https://go-review.googlesource.com/24902
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1cb3f7169ccff3ae2197784676404e8d0d3f5e32
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jul 13 09:38:41 2016 -0700

    doc/go1.7.html: earlier Go versions don't work on macOS Sierra
    
    Updates #16272.
    
    Change-Id: If5444b8de8678eeb9be10b62a929e2e101d1dd91
    Reviewed-on: https://go-review.googlesource.com/24900
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 76da6491e802410bf84e122b8694bf01a6cf57cd
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Mon Jul 4 23:57:05 2016 -0700

    doc/go1.7.html: document that http.Server now enforces request versions
    
    Document that the http.Server is now stricter about rejecting
    requests with invalid HTTP versions, and also that it rejects plaintext
    HTTP/2 requests, except for `PRI * HTTP/2.0` upgrade requests.
    The relevant CL is https://golang.org/cl/24505.
    
    Updates #15810.
    
    Change-Id: Ibbace23e001b5e2eee053bd341de50f9b6d3fde8
    Reviewed-on: https://go-review.googlesource.com/24731
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2fcb25e07b2549f607aa174ceab974f8732ea0f4
Author: Bryan C. Mills <bcmills@google.com>
Date:   Tue Jul 12 18:56:07 2016 -0400

    doc/effective_go: clarify advice on returning interfaces
    
    New Gophers sometimes misconstrue the advice in the "Generality" section
    as "export interfaces instead of implementations" and add needless
    interfaces to their code as a result.  Down the road, they end up
    needing to add methods and either break existing callers or have to
    resort to unpleasant hacks (e.g. using "magic method" type-switches).
    
    Weaken the first paragraph of this section to only advise leaving types
    unexported when they will never need additional methods.
    
    Change-Id: I32a1ae44012b5896faf167c02e192398a4dfc0b8
    Reviewed-on: https://go-review.googlesource.com/24892
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit a1110c39301b21471c27dad0e50cdbe499587fc8
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jul 12 11:19:16 2016 -0600

    cmd/go: don't fail on invalid GOOS/GOARCH pair when using gccgo
    
    Fixes #12272
    
    Change-Id: I0306ce0ef4a87df2158df3b7d4d8d93a1cb6dabc
    Reviewed-on: https://go-review.googlesource.com/24864
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit b30814bbd6840e1574a27c87c37515af22caa5d9
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jul 11 16:15:03 2016 -0700

    runtime: add ctxt parameter to cgocallback called from Go
    
    The cgocallback function picked up a ctxt parameter in CL 22508.
    That CL updated the assembler implementation, but there are a few
    mentions in Go code that were not updated. This CL fixes that.
    
    Fixes #16326
    
    Change-Id: I5f68e23565c6a0b11057aff476d13990bff54a66
    Reviewed-on: https://go-review.googlesource.com/24848
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 1f4e68d92b33a668f2afa2ab5f8114c1a4bee682
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jul 11 22:34:30 2016 -0700

    reflect: an unnamed type has no PkgPath
    
    The reflect package was returning a non-empty PkgPath for an unnamed
    type with methods, such as a type whose methods have a pointer
    receiver.
    
    Fixes #16328.
    
    Change-Id: I733e93981ebb5c5c108ef9b03bf5494930b93cf3
    Reviewed-on: https://go-review.googlesource.com/24862
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit a84b18ac865257c50d8812e39d244b57809fc8c8
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jul 12 03:43:05 2016 +0000

    Revert "regexp: add the Fanout benchmark
    
    This is a copy of the "FANOUT" benchmark recently added to RE2 with the
    following comment:
    
        // This has quite a high degree of fanout.
        // NFA execution will be particularly slow.
    
    Most of the benchmarks on the regexp package have very little fanout and
    are designed for comparing the regexp package's NFA with backtracking
    engines found in other regular expression libraries. This benchmark
    exercises the performance of the NFA on expressions with high fanout.Reviewed-on: https://go-review.googlesource.com/24846
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    "
    
    This reverts commit fc803874d3a509ddd99a897da1c6a62dc4ce631e.
    
    Reason for revert: Breaks the -race build because the benchmark takes too long to run.
    
    Change-Id: I6ed4b466f74a4108d8bcd5b019b9abe971eb483e
    Reviewed-on: https://go-review.googlesource.com/24861
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit fc803874d3a509ddd99a897da1c6a62dc4ce631e
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Jul 11 14:59:03 2016 -0600

    regexp: add the Fanout benchmark
    
    This is a copy of the "FANOUT" benchmark recently added to RE2 with the
    following comment:
    
        // This has quite a high degree of fanout.
        // NFA execution will be particularly slow.
    
    Most of the benchmarks on the regexp package have very little fanout and
    are designed for comparing the regexp package's NFA with backtracking
    engines found in other regular expression libraries. This benchmark
    exercises the performance of the NFA on expressions with high fanout.
    
    Change-Id: Ie9c8e3bbeffeb1fe9fb90474ddd19e53f2f57a52
    Reviewed-on: https://go-review.googlesource.com/24846
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 296b618dc8c8f59d7327b4d322f7ceef4032d94b
Author: Francesc Campoy <campoy@golang.org>
Date:   Mon Jul 11 12:31:52 2016 -0600

    gofmt: remove unneeded call to os.Exit
    
    PrintDefaults already calls os.Exit(2).
    
    Change-Id: I0d783a6476f42b6157853cdb34ba69618e3f3fcb
    Reviewed-on: https://go-review.googlesource.com/24844
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 38de5b71f274ff93581a302b2f3ec4b9937afa51
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Jul 10 21:47:56 2016 -0700

    doc/go1.7.html: no concurrent calls of math/rand methods
    
    A follow-on to https://golang.org/cl/24852 that mentions the
    documentation clarifications.
    
    Updates #16308.
    
    Change-Id: Ic2a6e1d4938d74352f93a6649021fb610efbfcd0
    Reviewed-on: https://go-review.googlesource.com/24857
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit fb3cf5c686b09bab8c1bef5f7589aaef0e6d9712
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sat Jul 9 19:38:04 2016 -0700

    math/rand: fix raciness in Rand.Read
    
    There are no synchronization points protecting the readVal and readPos
    variables. This leads to a race when Read is called concurrently.
    Fix this by adding methods to lockedSource, which is the case where
    a race matters.
    
    Fixes #16308.
    
    Change-Id: Ic028909955700906b2d71e5c37c02da21b0f4ad9
    Reviewed-on: https://go-review.googlesource.com/24852
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 54ffdf364f77c62ffeb205debe26347ca5961373
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Jul 9 17:24:45 2016 -0700

    net/http: fix vet warning of leaked context in error paths
    
    Updates #16230
    
    Change-Id: Ie38f85419c41c00108f8843960280428a39789b5
    Reviewed-on: https://go-review.googlesource.com/24850
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 54b499e3f1d3ef37765c209919d30f0abf55a2e1
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jul 8 11:42:19 2016 -0700

    syscall: add another output for TestGroupCleanupUserNamespace
    
    Fixes #16303.
    
    Change-Id: I2832477ce0117a66da53ca1f198ebb6121953d56
    Reviewed-on: https://go-review.googlesource.com/24833
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 12f2b4ff0ea694fc31e5b25d61d36cf058a88f35
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jul 8 07:56:52 2016 -0700

    runtime: fix case in KeepAlive comment
    
    Fixes #16299.
    
    Change-Id: I76f541c7f11edb625df566f2f1035147b8bcd9dd
    Reviewed-on: https://go-review.googlesource.com/24830
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 915398f14fff28f7ba8592f134e22079de044745
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jul 8 07:50:07 2016 -0700

    doc/go1.7.html: fix name of IsExist
    
    For better or for worse, it's IsExist, not IsExists.
    
    Change-Id: I4503f961486edd459c0c81cf3f32047dff7703a4
    Reviewed-on: https://go-review.googlesource.com/24819
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 53da5fd4d431881bb3583c9790db7735a6530a1b
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jul 7 16:41:29 2016 -0700

    [release-branch.go1.7] runtime: fix nanotime for macOS Sierra
    
    In the beta version of the macOS Sierra (10.12) release, the
    gettimeofday system call changed on x86. Previously it always returned
    the time in the AX/DX registers. Now, if AX is returned as 0, it means
    that the system call has stored the values into the memory pointed to by
    the first argument, just as the libc gettimeofday function does. The
    libc function handles both cases, and we need to do so as well.
    
    Fixes #16272.
    
    Change-Id: Ibe5ad50a2c5b125e92b5a4e787db4b5179f6b723
    Reviewed-on: https://go-review.googlesource.com/24812
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-on: https://go-review.googlesource.com/24755
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit fad2bbdc6a686a20174d2e73cf78f1659722bb39
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jul 7 16:41:29 2016 -0700

    runtime: fix nanotime for macOS Sierra
    
    In the beta version of the macOS Sierra (10.12) release, the
    gettimeofday system call changed on x86. Previously it always returned
    the time in the AX/DX registers. Now, if AX is returned as 0, it means
    that the system call has stored the values into the memory pointed to by
    the first argument, just as the libc gettimeofday function does. The
    libc function handles both cases, and we need to do so as well.
    
    Fixes #16272.
    
    Change-Id: Ibe5ad50a2c5b125e92b5a4e787db4b5179f6b723
    Reviewed-on: https://go-review.googlesource.com/24812
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a91416e7abf2236909f99aea85accfe98a9ba1fd
Author: Chris Broadfoot <cbro@google.com>
Date:   Thu Jul 7 19:32:35 2016 -0700

    [release-branch.go1.7] go1.7rc1
    
    Change-Id: Ifbf1c13ce740428add68d68133c7f10876bad404
    Reviewed-on: https://go-review.googlesource.com/24816
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 84bb9e62f06dbb62279241fa0bd7a6c8846271ac
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jul 7 17:43:08 2016 -0700

    runtime: handle selects with duplicate channels in shrinkstack
    
    The shrinkstack code locks all the channels a goroutine is waiting for,
    but didn't handle the case of the same channel appearing in the list
    multiple times. This led to a deadlock. The channels are sorted so it's
    easy to avoid locking the same channel twice.
    
    Fixes #16286.
    
    Change-Id: Ie514805d0532f61c942e85af5b7b8ac405e2ff65
    Reviewed-on: https://go-review.googlesource.com/24815
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit e5ff529679b3adbed06d509b0fc21a76b62e89e9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jul 6 00:16:05 2016 +0000

    lib/time: update to IANA release 2016f (July 2016)
    
    Fixes #16273
    
    Change-Id: I443e1f254fd683c4ff61beadae89c1c45ff5d972
    Reviewed-on: https://go-review.googlesource.com/24744
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d8722012afb789f1a2875a0d2ed50bfbae12bb9c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jul 6 21:29:40 2016 +0000

    net/http: deflake TestClientRedirectContext
    
    The test was checking for 1 of 2 possible error values. But based on
    goroutine scheduling and the randomness of select statement receive
    cases, it was possible for a 3rd type of error to be returned.
    
    This modifies the code (not the test) to make that third type of error
    actually the second type of error, which is a nicer error message.
    
    The test is no longer flaky. The flake was very reproducible with a
    5ms sleep before the select at the end of Transport.getConn.
    
    Thanks to Github user @jaredborner for debugging.
    
    Fixes #16049
    
    Change-Id: I0d2a036c9555a8d2618b07bab01f28558d2b0b2c
    Reviewed-on: https://go-review.googlesource.com/24748
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit df7c159f06ab6d6c7ac6c953e491f8900f40d282
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jul 6 17:14:10 2016 -0700

    path/filepath: fix typo in comment
    
    Change-Id: I0c76e8deae49c1149647de421503c5175028b948
    Reviewed-on: https://go-review.googlesource.com/24781
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 94477121bd1a758a70393773c6ae40c58c54f005
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jul 6 13:07:53 2016 -0700

    path/filepath: document Clean behavior for each function
    
    Document explicitly which functions Clean the result rather than
    documenting it in the package comment.
    
    Updates #10122.
    Fixes #16111.
    
    Change-Id: Ia589c7ee3936c9a6a758725ac7f143054d53e41e
    Reviewed-on: https://go-review.googlesource.com/24747
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bbe5da42600d5ab26cd58ffac3d6427994f08fb2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 28 14:19:27 2016 -0700

    cmd/compile, syscall: add //go:uintptrescapes comment, and use it
    
    This new comment can be used to declare that the uintptr arguments to a
    function may be converted from pointers, and that those pointers should
    be considered to escape. This is used for the Call methods in
    dll_windows.go that take uintptr arguments, because they call Syscall.
    
    We can't treat these functions as we do syscall.Syscall, because unlike
    Syscall they may cause the stack to grow. For Syscall we can assume that
    stack arguments can remain on the stack, but for these functions we need
    them to escape.
    
    Fixes #16035.
    
    Change-Id: Ia0e5b4068c04f8d303d95ab9ea394939f1f57454
    Reviewed-on: https://go-review.googlesource.com/24551
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 820e30f5b0289d5df22ab604f2d831470f748dca
Author: Sam Whited <sam@samwhited.com>
Date:   Tue Jul 5 20:06:00 2016 -0500

    encoding/xml: update docs to follow convention
    
    Fixes #8833
    
    Change-Id: I4523a1de112ed02371504e27882659bce8028a45
    Reviewed-on: https://go-review.googlesource.com/24745
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5a9d5c37479231336efef0e0fa5b75645aa1c569
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Jul 3 14:57:35 2016 -0700

    encoding/gob: document Encode, EncodeValue nil pointer panics
    
    Fixes #16258.
    
    Docs for Encode and EncodeValue do not mention that
    nil pointers are not permitted hence we panic,
    because Gobs encode values yet nil pointers have no value
    to encode. It moves a comment that was internal to EncodeValue
    to the top level to make it clearer to users what to expect
    when they pass in nil pointers.
    Supplements test TestTopLevelNilPointer.
    
    Change-Id: Ie54f609fde4b791605960e088456047eb9aa8738
    Reviewed-on: https://go-review.googlesource.com/24740
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 003a68bc7fcb917b5a4d92a5c2244bb1adf8f690
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jul 1 13:52:26 2016 -0700

    cmd/vet: remove copylock warning about result types and calls
    
    Don't issue a copylock warning about a result type; the function may
    return a composite literal with a zero value, which is OK.
    
    Don't issue a copylock warning about a function call on the RHS, or an
    indirection of a function call; the function may return a composite
    literal with a zero value, which is OK.
    
    Updates #16227.
    
    Change-Id: I94f0e066bbfbca5d4f8ba96106210083e36694a2
    Reviewed-on: https://go-review.googlesource.com/24711
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 878e002bb9021822cc44a9e20cf92689a2c478e7
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Jul 4 08:45:10 2016 +0900

    syscall: fix missing use of use function in Getfsstat
    
    Updates #13372.
    
    Change-Id: If383c14af14839a303425ba7b80b97e35ca9b698
    Reviewed-on: https://go-review.googlesource.com/24750
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit afccfb829f17f85a8d4aa74f1a11a27422437405
Author: Monty Taylor <mordred@inaugust.com>
Date:   Fri Jul 1 08:47:41 2016 -0500

    cmd/go: remove noVCSSuffix check for OpenStack
    
    The original intent of the code was to allow both with and without .git
    suffix for now to allow a transition period. The noVCSSuffix check was a
    copy pasta error.
    
    Fixes #15979.
    
    Change-Id: I3d39aba8d026b40fc445244d6d01d8bc1979d1e4
    Reviewed-on: https://go-review.googlesource.com/24645
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 519b469795287dc81ab3b994f8809f61a0c802da
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jul 1 15:44:12 2016 -0700

    cmd/compile: mark live heap-allocated pparamout vars as needzero
    
    If we don't mark them as needzero, we have a live pointer variable
    containing possible garbage, which will baffle the GC.
    
    Fixes #16249.
    
    Change-Id: I7c423ceaca199ddd46fc2c23e5965e7973f07584
    Reviewed-on: https://go-review.googlesource.com/24715
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 575a87166291e321745041944321002b3c0b72be
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Jul 1 10:51:59 2016 -0700

    cmd/compile: don't lose //go:nointerface pragma in export data
    
    Fixes #16243.
    
    Change-Id: I207d1e8aa48abe453a23c709ccf4f8e07368595b
    Reviewed-on: https://go-review.googlesource.com/24648
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 29f0984a3558ef6e3e58a621791473a71b510365
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Jun 30 06:36:31 2016 -0400

    cmd/compile: don't set line number to 0 when building SSA
    
    The frontend may emit node with line number missing. In this case,
    use the parent line number. Instead of changing every call site of
    pushLine, do it in pushLine itself.
    
    Fixes #16214.
    
    Change-Id: I80390550b56e4d690fc770b01ff725b892ffd6dc
    Reviewed-on: https://go-review.googlesource.com/24641
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b5aae1a2845f157a2565b856fb2d7773a0f7af25
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Jun 30 22:11:22 2016 +0000

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev b400c2e for https://golang.org/cl/24214,
    "http2: add additional blacklisted ciphersuites"
    
    Both TLS_RSA_WITH_AES_128_GCM_SHA256 & TLS_RSA_WITH_AES_256_GCM_SHA384
    are now blacklisted, per http://httpwg.org/specs/rfc7540.html#BadCipherSuites
    
    Change-Id: I8b9a7f4dc3c152d0675e196523ddd36111744984
    Reviewed-on: https://go-review.googlesource.com/24684
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 08086e624689e0fdf5b53030ecfb96ea709b6d86
Author: Alan Donovan <adonovan@google.com>
Date:   Thu Jun 30 14:32:03 2016 -0400

    cmd/vet: lostcancel: treat naked return as a use of named results
    
    + test.
    
    Fixes #16230
    
    Change-Id: Idac995437146a9df9e73f094d2a31abc25b1fa62
    Reviewed-on: https://go-review.googlesource.com/24681
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7ea62121a7de25559cb88389983086f45910aed6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Jun 30 19:24:06 2016 +0000

    all: be consistent about spelling of cancelation
    
    We had ~30 one way, and these four new occurrences the other way.
    
    Updates #11626
    
    Change-Id: Ic6403dc4905874916ae292ff739d33482ed8e5bf
    Reviewed-on: https://go-review.googlesource.com/24683
    Reviewed-by: Rob Pike <r@golang.org>

commit fc12bb263683e43c0b93eb00071f894f5cfcc772
Author: Alan Donovan <adonovan@google.com>
Date:   Thu Jun 30 14:55:01 2016 -0400

    context: cancel the context in ExampleWithTimeout, with explanation
    
    Fixes #16230
    
    Change-Id: Ibb10234a6c3ab8bd0cfd93c2ebe8cfa66f80f6b0
    Reviewed-on: https://go-review.googlesource.com/24682
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9c8809f82aa59e0725e93cffb03de863e61cbbae
Author: Austin Clements <austin@google.com>
Date:   Wed Jun 29 17:41:50 2016 -0400

    runtime/internal/sys: implement Ctz and Bswap in assembly for 386
    
    Ctz is a hot-spot in the Go 1.7 memory manager. In SSA it's
    implemented as an intrinsic that compiles to a few instructions, but
    on the old backend (all architectures other than amd64), it's
    implemented as a fairly complex Go function. As a result, switching to
    bitmap-based allocation was a significant hit to allocation-heavy
    workloads like BinaryTree17 on non-SSA platforms.
    
    For unknown reasons, this hit 386 particularly hard. We can regain a
    lot of the lost performance by implementing Ctz in assembly on the
    386. This isn't as good as an intrinsic, since it still generates a
    function call and prevents useful inlining, but it's much better than
    the pure Go implementation:
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              3.59s ± 1%     3.06s ± 1%  -14.74%  (p=0.000 n=19+20)
    Fannkuch11-12                3.72s ± 1%     3.64s ± 1%   -2.09%  (p=0.000 n=17+19)
    FmtFprintfEmpty-12          52.3ns ± 3%    52.3ns ± 3%     ~     (p=0.829 n=20+19)
    FmtFprintfString-12          156ns ± 1%     148ns ± 3%   -5.20%  (p=0.000 n=18+19)
    FmtFprintfInt-12             137ns ± 1%     136ns ± 1%   -0.56%  (p=0.000 n=19+13)
    FmtFprintfIntInt-12          227ns ± 2%     225ns ± 2%   -0.93%  (p=0.000 n=19+17)
    FmtFprintfPrefixedInt-12     210ns ± 1%     208ns ± 1%   -0.91%  (p=0.000 n=19+17)
    FmtFprintfFloat-12           375ns ± 1%     371ns ± 1%   -1.06%  (p=0.000 n=19+18)
    FmtManyArgs-12               995ns ± 2%     978ns ± 1%   -1.63%  (p=0.000 n=17+17)
    GobDecode-12                9.33ms ± 1%    9.19ms ± 0%   -1.59%  (p=0.000 n=20+17)
    GobEncode-12                7.73ms ± 1%    7.73ms ± 1%     ~     (p=0.771 n=19+20)
    Gzip-12                      375ms ± 1%     374ms ± 1%     ~     (p=0.141 n=20+18)
    Gunzip-12                   61.8ms ± 1%    61.8ms ± 1%     ~     (p=0.602 n=20+20)
    HTTPClientServer-12         87.7µs ± 2%    86.9µs ± 3%   -0.87%  (p=0.024 n=19+20)
    JSONEncode-12               20.2ms ± 1%    20.4ms ± 0%   +0.53%  (p=0.000 n=18+19)
    JSONDecode-12               65.3ms ± 0%    65.4ms ± 1%     ~     (p=0.385 n=16+19)
    Mandelbrot200-12            4.11ms ± 1%    4.12ms ± 0%   +0.29%  (p=0.020 n=19+19)
    GoParse-12                  3.75ms ± 1%    3.61ms ± 2%   -3.90%  (p=0.000 n=20+20)
    RegexpMatchEasy0_32-12       104ns ± 0%     103ns ± 0%   -0.96%  (p=0.000 n=13+16)
    RegexpMatchEasy0_1K-12       805ns ± 1%     803ns ± 1%     ~     (p=0.189 n=18+18)
    RegexpMatchEasy1_32-12       111ns ± 0%     111ns ± 3%     ~     (p=1.000 n=14+19)
    RegexpMatchEasy1_1K-12      1.00µs ± 1%    1.00µs ± 1%   +0.50%  (p=0.003 n=19+19)
    RegexpMatchMedium_32-12      133ns ± 2%     133ns ± 2%     ~     (p=0.218 n=20+20)
    RegexpMatchMedium_1K-12     41.2µs ± 1%    42.2µs ± 1%   +2.52%  (p=0.000 n=18+16)
    RegexpMatchHard_32-12       2.35µs ± 1%    2.38µs ± 1%   +1.53%  (p=0.000 n=18+18)
    RegexpMatchHard_1K-12       70.9µs ± 2%    72.0µs ± 1%   +1.42%  (p=0.000 n=19+17)
    Revcomp-12                   1.06s ± 0%     1.05s ± 0%   -1.36%  (p=0.000 n=20+18)
    Template-12                 86.2ms ± 1%    84.6ms ± 0%   -1.89%  (p=0.000 n=20+18)
    TimeParse-12                 425ns ± 2%     428ns ± 1%   +0.77%  (p=0.000 n=18+19)
    TimeFormat-12                517ns ± 1%     519ns ± 1%   +0.43%  (p=0.001 n=20+19)
    [Geo mean]                  74.3µs         73.5µs        -1.05%
    
    Prior to this commit, BinaryTree17-12 on 386 was 33% slower than at
    the go1.6 tag. With this commit, it's 13% slower.
    
    On arm and arm64, BinaryTree17-12 is only ~5% slower than it was at
    go1.6. It may be worth implementing Ctz for them as well.
    
    I consider this change low risk, since the functions it replaces are
    simple, very well specified, and well tested.
    
    For #16117.
    
    Change-Id: Ic39d851d5aca91330134596effd2dab9689ba066
    Reviewed-on: https://go-review.googlesource.com/24640
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 95483f262b619a53793baf86512aeabf44fc9d3a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 29 19:20:51 2016 -0700

    os/exec: start checking for context cancelation in Start
    
    Previously we started checking for context cancelation in Wait, but
    that meant that when using StdoutPipe context cancelation never took
    effect.
    
    Fixes #16222.
    
    Change-Id: I89cd26d3499a6080bf1a07718ce38d825561899e
    Reviewed-on: https://go-review.googlesource.com/24650
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6c136493012b8a1f96f3edc9fa56aed70d34291a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jun 30 08:22:27 2016 -0700

    syscall: accept more variants of id output when testing as root
    
    This should fix the report at #16224, and also fixes running the test as
    root on my Ubuntu Trusty system.
    
    Fixes #16224.
    
    Change-Id: I4e3b5527aa63366afb33a7e30efab088d34fb302
    Reviewed-on: https://go-review.googlesource.com/24670
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e0c8af090ea1ccc32d06ae75b653446d2a9d6f87
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jun 29 17:01:10 2016 -0700

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 8e573f40 for https://golang.org/cl/24600,
    "http2: merge multiple GOAWAY frames' contents into error message"
    
    Fixes #14627 (more)
    
    Change-Id: I5231607c2c9e0d854ad6199ded43c59e59f62f52
    Reviewed-on: https://go-review.googlesource.com/24612
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 51b08d511e8b42eace59588a7eea73c4d21d222d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jun 29 16:56:43 2016 -0700

    net/http: be consistent about spelling of HTTP/1.x
    
    There was only one use of "HTTP/1.n" compared to "HTTP/1.x":
    
    h2_bundle.go://   "Just as in HTTP/1.x, header field names are strings of ASCII
    httputil/dump.go:// DumpRequest returns the given request in its HTTP/1.x wire
    httputil/dump.go:// intact. HTTP/2 requests are dumped in HTTP/1.x form, not in their
    response.go:// Write writes r to w in the HTTP/1.x server response format,
    server.go:      // Request.Body. For HTTP/1.x requests, handlers should read any
    server.go:// The default HTTP/1.x and HTTP/2 ResponseWriter implementations
    server.go:// The default ResponseWriter for HTTP/1.x connections supports
    server.go:// http1ServerSupportsRequest reports whether Go's HTTP/1.x server
    server.go:      // about HTTP/1.x Handlers concurrently reading and writing, like
    server.go:      // HTTP/1.x from here on.
    transport.go:   return fmt.Errorf("net/http: HTTP/1.x transport connection broken: %v", err)
    
    Be consistent.
    
    Change-Id: I93c4c873e500f51af2b4762055e22f5487a625ac
    Reviewed-on: https://go-review.googlesource.com/24610
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit cc6f5f6ce1daca51f475764a3e4fa9420cafcefa
Author: Nick Harper <nharper@google.com>
Date:   Wed Jun 29 11:18:01 2016 -0700

    crypto/ecdsa: Update documentation for Sign
    
    Change-Id: I2b7a81cb809d109f10d5f0db957c614f466d6bfd
    Reviewed-on: https://go-review.googlesource.com/24582
    Reviewed-by: Adam Langley <agl@golang.org>

commit ad82f2cf4b7e8e5f5398b5546b7d834432347355
Author: Tom Bergan <tombergan@google.com>
Date:   Wed Jun 29 07:45:23 2016 -0700

    crypto/tls: Use the same buffer size in the client and server in the TLS throughput benchmark
    
    I believe it's necessary to use a buffer size smaller than 64KB because
    (at least some versions of) Window using a TCP receive window less than
    64KB. Currently the client and server use buffer sizes of 16KB and 32KB,
    respectively (the server uses io.Copy, which defaults to 32KB internally).
    Since the server has been using 32KB, it should be safe for the client to
    do so as well.
    
    Fixes #15899
    
    Change-Id: I36d44b29f2a5022c03fc086213d3c1adf153e983
    Reviewed-on: https://go-review.googlesource.com/24581
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bb337372fb6e171a6e8a7665ce91eda734f8cdd2
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Wed Jun 29 11:09:36 2016 +0200

    runtime: fix race atomic operations on external memory
    
    The assembly is broken: it does `MOVQ g(R12), R14` expecting that
    R12 contains tls address, but it does not do get_tls(R12) before.
    This magically works on linux: `MOVQ g(R12), R14` is compiled to
    `mov %fs:0xfffffffffffffff8,%r14` which does not use R12.
    But it crashes on windows.
    
    Add explicit `get_tls(R12)`.
    
    Fixes #16206
    
    Change-Id: Ic1f21a6fef2473bcf9147de6646929781c9c1e98
    Reviewed-on: https://go-review.googlesource.com/24590
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 25a609556aff7700c864f2dc69be01652fd801ab
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 28 17:23:01 2016 -0700

    runtime: correct printing of blocked field in scheduler trace
    
    When the blocked field was first introduced back in
    https://golang.org/cl/61250043 the scheduler trace code incorrectly used
    m->blocked instead of mp->blocked.  That has carried through the
    conversion to Go.  This CL fixes it.
    
    Change-Id: Id81907b625221895aa5c85b9853f7c185efd8f4b
    Reviewed-on: https://go-review.googlesource.com/24571
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c7ae41e5770b2258074eee68a6a3c4d0d71a251f
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 28 17:06:59 2016 -0700

    runtime: better error message for newosproc failure
    
    If creating a new thread fails with EAGAIN, point the user at ulimit.
    
    Fixes #15476.
    
    Change-Id: Ib36519614b5c72776ea7f218a0c62df1dd91a8ea
    Reviewed-on: https://go-review.googlesource.com/24570
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8641e6fe2131ac342647fa34398a727f96d15fb5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jun 28 16:25:45 2016 -0700

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev ef2e00e88 for https://golang.org/cl/24560,
    "http2: make Transport return server's GOAWAY error back to the user"
    
    Fixes #14627
    
    Change-Id: I2bb123a3041e168db7c9446beef4ee47638f17ee
    Reviewed-on: https://go-review.googlesource.com/24561
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 85a4f44745859ecdd71c034171d40263651f8594
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Mon Jun 27 17:13:15 2016 +0800

    cmd/vet: make checking example names in _test packages more robust
    
    Prior to this change package "foo" had to be installed in order to check
    example names in "foo_test" package.
    
    However by the time "foo_test" package is checked a parsed "foo" package
    has been already constructed. Use it to check example names.
    
    Also change TestDivergentPackagesExamples test to pass directory of the
    package to the vet tool as it is the most common way to invoke it. This
    requires changes to errchk to add support for grabbing source files from
    a directory.
    
    Fixes #16189
    
    Change-Id: Ief103d07b024822282b86c24250835cc591793e8
    Reviewed-on: https://go-review.googlesource.com/24488
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 733aefd06e5cf708637308a4ad7a048aa97db5cd
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jun 28 12:06:08 2016 -0700

    database/sql: deflake TestPendingConnsAfterErr and fix races, panics
    
    TestPendingConnsAfterErr only cared that things didn't deadlock, so 5
    seconds is a sufficient timer. We don't need 100 milliseconds.
    
    I was able to reproduce with a tiny (5 nanosecond) timeout value,
    instead of 100 milliseconds. In the process of testing with -race and
    a high -count= value, I noticed several data races and panics
    (sendings on a closed channel) which are also fixed in this change.
    
    Fixes #15684
    
    Change-Id: Ib4605fcc0f296e658cb948352ed642b801cb578c
    Reviewed-on: https://go-review.googlesource.com/24550
    Reviewed-by: Marko Tiikkaja <marko@joh.to>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 069289180816e2f8b40ad6f9e167dc5071cefcdf
Author: Andrew Gerrand <adg@golang.org>
Date:   Tue Jun 28 18:09:56 2016 +1000

    cmd/go: restore support for git submodules and update docs
    
    Fixes #16165
    
    Change-Id: Ic90e5873e0c8ee044f09543177192dcae1dcdbed
    Reviewed-on: https://go-review.googlesource.com/24531
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b0838ca292f0c62ac9d45a92b520160ed052cb26
Author: Justyn Temme <justyntemme@gmail.com>
Date:   Sun Jun 19 20:39:58 2016 +0000

    strconv: clarify doc for Atoi return type
    
    Change-Id: I47bd98509663d75b0d4dedbdb778e803d90053cf
    Reviewed-on: https://go-review.googlesource.com/24216
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b5f0aff49503e31002b33198e06708e263c445a7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jun 27 16:39:40 2016 -0700

    net/http: conditionally configure HTTP/2 in Server.Serve(Listener)
    
    Don't configure HTTP/2 in http.Server.Serve(net.Listener) if the
    Server's TLSConfig is set and doesn't include the "h2" NextProto
    value. This avoids mutating a *tls.Config already in use if
    previously passed to tls.NewListener.
    
    Also document this. (it's come up a few times now)
    
    Fixes #15908
    
    Change-Id: I283eed82fdb29a791f80d801aadd9f75db244de0
    Reviewed-on: https://go-review.googlesource.com/24508
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 996ed3be9a10ace6cd7a8a6a8080c0c8db7ab1fe
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Tue Jun 28 17:47:27 2016 +0200

    doc: update 1.7 release notes on Unicode upgrade
    
    Fixes #16201
    
    Change-Id: I38c17859db78c2868905da24217e0ad47739c320
    Reviewed-on: https://go-review.googlesource.com/24541
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3001334e7752af67036a6d9c30c919cbfea81a7c
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Jun 27 23:27:54 2016 -0700

    doc/go1.7.html: mention recent changes to Rand.Read
    
    Updates #16124
    
    Change-Id: Ib58f2bb37fd1559efc512a2e3cba976f09b939a0
    Reviewed-on: https://go-review.googlesource.com/24520
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit a2a4db7375204c22898559d3b96a748c6df96294
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Tue Jun 28 12:31:02 2016 +0200

    unicode: upgrade to version 9.0.0
    
    Changes beyond generated tables:
    - Now supports aliases to handle deprecated
      property classes.
    - Some Mongolian letters are now modifiers.
    
    Other changes:
    - strconv: newly generated table to be in sync
    - regexp/syntax: updated maxFold
    
    Fixes #16191
    
    Change-Id: I56bdf21ee2f775f2a82d0465b3772faf5c24cb61
    Reviewed-on: https://go-review.googlesource.com/24496
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ed9362f769626b1cdaf2eb1da63d5f25cadc979b
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Jun 27 21:37:19 2016 -0400

    reflect, runtime: optimize Name method
    
    Several minor changes that remove a good chunk of the overhead added
    to the reflect Name method over the 1.7 cycle, as seen from the
    non-SSA architectures.
    
    In particular, there are ~20 fewer instructions in reflect.name.name
    on 386, and the method now qualifies for inlining.
    
    The simple JSON decoding benchmark on darwin/386:
    
            name           old time/op    new time/op    delta
            CodeDecoder-8    49.2ms ± 0%    48.9ms ± 1%  -0.77%  (p=0.000 n=10+9)
    
            name           old speed      new speed      delta
            CodeDecoder-8  39.4MB/s ± 0%  39.7MB/s ± 1%  +0.77%  (p=0.000 n=10+9)
    
    On darwin/amd64 the effect is less pronounced:
    
            name           old time/op    new time/op    delta
            CodeDecoder-8    38.9ms ± 0%    38.7ms ± 1%  -0.38%  (p=0.005 n=10+10)
    
            name           old speed      new speed      delta
            CodeDecoder-8  49.9MB/s ± 0%  50.1MB/s ± 1%  +0.38%  (p=0.006 n=10+10)
    
    Counterintuitively, I get much more useful benchmark data out of my
    MacBook Pro than a linux workstation with more expensive Intel chips.
    While the laptop has fewer cores and an active GUI, the single-threaded
    performance is significantly better (nearly 1.5x decoding throughput)
    so the differences are more pronounced.
    
    For #16117.
    
    Change-Id: I4e0cc1cc2d271d47d5127b1ee1ca926faf34cabf
    Reviewed-on: https://go-review.googlesource.com/24510
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b75b0630fe6d8f66f937f78f15f540b5b6dab24f
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Thu Jun 16 14:57:45 2016 -0500

    runtime/internal/atomic: Use power5 compatible instructions for ppc64
    
    This modifies a recent performance improvement to the
    And8 and Or8 atomic functions which required both ppc64le
    and ppc64 to use power8 instructions. Since then it was
    decided that ppc64 (BE) should work for power5 and later.
    This change uses instructions compatible with power5 for
    ppc64 and uses power8 for ppc64le.
    
    Fixes #16004
    
    Change-Id: I623c75e8e6fd1fa063a53d250d86cdc9d0890dc7
    Reviewed-on: https://go-review.googlesource.com/24181
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 05ecf534566c0cd05b4afdaa9619522e4204328e
Author: Raul Silvera <rsilvera@google.com>
Date:   Mon Jun 27 19:06:17 2016 -0700

    net/http/pprof: remove comments pointing to gperftools
    
    The version of pprof in gperftools has been deprecated.
    No need to have a pointer to that version since go tool pprof
    is included with the Go distro.
    
    Change-Id: I6d769a68f64280f5db89ff6fbc67bfea9c8f1526
    Reviewed-on: https://go-review.googlesource.com/24509
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 73516c5f481250db4ccbfdddb8f68ef261897fcb
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Jun 27 11:07:08 2016 -0400

    encoding/gob: avoid allocating string for map key
    
    On linux/386 compared to tip:
    
            name                     old time/op  new time/op  delta
            DecodeInterfaceSlice-40  1.23ms ± 1%  1.17ms ± 1%  -4.93%  (p=0.000 n=9+10)
    
    Recovers about half the performance regression from Go 1.6 on 386.
    
    For #16117.
    
    Change-Id: Ie8676d92a4da3e27ff21b91a98b3e13d16730ba1
    Reviewed-on: https://go-review.googlesource.com/24468
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8d966bad6e4e9e28295bccbd739bf5280f729a7b
Author: Dmitri Popov <operator@cv.dp-net.com>
Date:   Sun Jun 19 20:58:40 2016 -0700

    math/rand: fix io.Reader implementation
    
    Do not throw away the rest of Int63 value used for
    generation random bytes. Save it in Rand struct and
    re-use during the next Read call.
    
    Fixes #16124
    
    Change-Id: Ic70bd80c3c3a6590e60ac615e8b3c2324589bea3
    Reviewed-on: https://go-review.googlesource.com/24251
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0ce100dc9646eb9015e31502e184e45605df1393
Author: Vladimir Mihailenco <vladimir.webdev@gmail.com>
Date:   Thu Jun 23 07:42:22 2016 +0000

    compress/flate: don't ignore dict in Reader.Reset
    
    Fixes #16162.
    
    Change-Id: I6f4ae906630079ef5fc29ee5f70e2e3d1c962170
    Reviewed-on: https://go-review.googlesource.com/24390
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit db5802104797cadcb4f44c5198a0fc39e13f9bc3
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 21 07:00:41 2016 -0700

    crypto/tls: don't copy Mutex or Once values
    
    This fixes some 40 warnings from go vet.
    
    Fixes #16134.
    
    Change-Id: Ib9fcba275fe692f027a2a07b581c8cf503b11087
    Reviewed-on: https://go-review.googlesource.com/24287
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit b43fe463ff93e5ab0849d9d31bf53f87b42a9b28
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Sat Jun 25 20:32:40 2016 +0800

    net/http/httptest: show usage of httptest.NewRequest in example
    
    Change ExampleResponseRecorder to use httptest.NewRequest instead of
    http.NewRequest. This makes the example shorter and shows how to use
    one more function from the httptest package.
    
    Change-Id: I3d35869bd0a4daf1c7551b649428bb2f2a45eba2
    Reviewed-on: https://go-review.googlesource.com/24480
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3e9d6e064d554edeed9c55325832844403ae5d3f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jun 27 10:28:08 2016 -0700

    net/http: reject faux HTTP/0.9 and HTTP/2+ requests
    
    Fixes #16197
    
    Change-Id: Icaabacbb22bc18c52b9e04b47385ac5325fcccd1
    Reviewed-on: https://go-review.googlesource.com/24505
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e0f986bf26b72749553e45cad34f14d7d4166acb
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jun 27 08:21:55 2016 -0700

    cmd/compile: avoid function literal name collision with "glob"
    
    The compiler was treating all global function literals as occurring in a
    function named "glob", which caused a symbol name collision when there
    was an actual function named "glob".  Fixed by adding a period.
    
    Fixes #16193.
    
    Change-Id: I67792901a8ca04635ba41d172bfaee99944f594d
    Reviewed-on: https://go-review.googlesource.com/24500
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit c0e5d445066a4c6417aa9e54fde4a3cb9d9c2c05
Author: Raul Silvera <rsilvera@google.com>
Date:   Mon Jun 27 09:43:14 2016 -0700

    runtime/pprof: update comments to point to new pprof
    
    In the comments for this file there is a reference to gperftools
    for more info on pprof. pprof now live on its own repo on github,
    and the version in gperftools is deprecated.
    
    Change-Id: I8a188f129534f73edd132ef4e5a2d566e69df7e9
    Reviewed-on: https://go-review.googlesource.com/24502
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6effdd28deec546798c00fd83c2a7b5b328ac5ab
Author: Keith Randall <khr@golang.org>
Date:   Sat Jun 18 19:40:57 2016 -0700

    cmd/compile: keep heap pointer for escaping output parameters live
    
    Make sure the pointer to the heap copy of an output parameter is kept
    live throughout the function.  The function could panic at any point,
    and then a defer could recover.  Thus, we need the pointer to the heap
    copy always available so the post-deferreturn code can copy the return
    value back to the stack.
    
    Before this CL, the pointer to the heap copy could be considered dead in
    certain situations, like code which is reverse dominated by a panic call.
    
    Fixes #16095.
    
    Change-Id: Ic3800423e563670e5b567b473bf4c84cddb49a4c
    Reviewed-on: https://go-review.googlesource.com/24213
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit e96b1ef99bdd18a6f777892008f614a4401d6655
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Mon Jun 27 13:37:01 2016 +0800

    cmd/vet: fix name check for examples in _test package
    
    This fixes the obvious bug and makes go vet look for identifiers in foo
    package when checking example names in foo_test package.
    
    Note that for this check to work the foo package have to be
    installed (using go install).
    
    This commit however doesn't fix TestDivergentPackagesExamples test that
    is not implemented correctly and passes only by chance.
    
    Updates #16189
    
    Change-Id: I5c2f675cd07e5b66cf0432b2b3e422ab45c3dedd
    Reviewed-on: https://go-review.googlesource.com/24487
    Reviewed-by: Dmitri Shuralyov <shurcool@gmail.com>
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 5f209aba6d903688fd5d801bad3fbb5572c85a02
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Jun 25 10:23:30 2016 -0400

    encoding/json: copy-on-write cacheTypeFields
    
    Swtich from a sync.RWMutex to atomic.Value for cacheTypeFields.
    
    On GOARCH=386, this recovers most of the remaining performance
    difference from the 1.6 release. Compared with tip on linux/386:
    
            name            old time/op    new time/op    delta
            CodeDecoder-40    92.8ms ± 1%    87.7ms ± 1%  -5.50%  (p=0.000 n=10+10)
    
            name            old speed      new speed      delta
            CodeDecoder-40  20.9MB/s ± 1%  22.1MB/s ± 1%  +5.83%  (p=0.000 n=10+10)
    
    With more time and care, I believe more of the JSON decoder's work
    could be shifted so it is done before decoding, and independent of
    the number of bytes processed. Maybe someone could explore that for
    Go 1.8.
    
    For #16117.
    
    Change-Id: I049655b2e5b76384a0d5f4b90e3ec7cc8d8c4340
    Reviewed-on: https://go-review.googlesource.com/24472
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 33fa855e6cfa906e12c624663b1010862bf4df6f
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Thu May 26 09:45:57 2016 +0800

    math/rand: fix comment about bits of seed used by the default Source
    
    Fixes #15788
    
    Change-Id: I5a1fd1e5992f1c16cf8d8437d742bf02e1653b9c
    Reviewed-on: https://go-review.googlesource.com/23461
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4fcb4eb27986e5fa7d26aeb85b04909e03d11ff9
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jun 24 16:59:39 2016 -0700

    cmd/pprof: don't use local symbolization for remote source
    
    If we are using a remote source (a URL), and the user did not specify
    the executable file to use, then don't try to use a local source.
    This was misbehaving because the local symbolizer will not fail
    if there is any memory map available, but the presence of a memory map
    does not ensure that the files and symbols are actually available.
    
    We still need a pprof testsuite.
    
    Fixes #16159.
    
    Change-Id: I0250082a4d5181c7babc7eeec6bc95b2f3bcaec9
    Reviewed-on: https://go-review.googlesource.com/24464
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 83e839f86fcc0762ea513f8d5dd9a50a8338e9c2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jun 24 13:19:46 2016 -0700

    cmd/pprof: ignore symbols with address 0 and size 0
    
    Handling a symbol with address 0 and size 0, such as an ELF STT_FILE
    symbols, was causing us to disassemble the entire program.  We started
    adding STT_FILE symbols to help fix issue #13247.
    
    Fixes #16154.
    
    Change-Id: I174b9614e66ddc3d65801f7c1af7650f291ac2af
    Reviewed-on: https://go-review.googlesource.com/24460
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 5e43dc943a9265ec65690242eb8076727c18a958
Author: Nathan VanBenschoten <nvanbenschoten@gmail.com>
Date:   Thu Jun 23 19:46:13 2016 -0400

    math/big: special-case a 0 mantissa during Rat parsing
    
    Previously, a 0 mantissa was special-cased during big.Float
    parsing, but not during big.Rat parsing. This meant that a value
    like 0e9999999999 would parse successfully in big.Float.SetString,
    but would hang in big.Rat.SetString. This discrepancy became an
    issue in https://golang.org/src/go/constant/value.go?#L250,
    where the big.Float would report an exponent of 0, so
    big.Rat.SetString would be used and would subsequently hang.
    
    A Go Playground example of this is https://play.golang.org/p/3fy28eUJuF
    
    The solution is to special-case a zero mantissa during big.Rat
    parsing as well, so that neither big.Rat nor big.Float will hang when
    parsing a value with 0 mantissa but a large exponent.
    
    This was discovered using go-fuzz on CockroachDB:
    https://github.com/cockroachdb/go-fuzz/blob/master/examples/parser/main.go
    
    Fixes #16176
    
    Change-Id: I775558a8682adbeba1cc9d20ba10f8ed26259c56
    Reviewed-on: https://go-review.googlesource.com/24430
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 797dc584577c66ee1e181a3f423133ee83647247
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Jun 24 15:28:58 2016 -0400

    cmd/compile, etc: use tflag to optimize Name()==""
    
    Improves JSON decoding benchmark:
    
            name                  old time/op    new time/op    delta
            CodeDecoder-8           41.3ms ± 6%    39.8ms ± 1%  -3.61%  (p=0.000 n=10+10)
    
            name                  old speed      new speed      delta
            CodeDecoder-8         47.0MB/s ± 6%  48.7MB/s ± 1%  +3.66%  (p=0.000 n=10+10)
    
    Change-Id: I524ee05c432fad5252e79b29222ec635c1dee4b4
    Reviewed-on: https://go-review.googlesource.com/24452
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2834526fd9de26079bebc726d3ce3ccaaf38a0aa
Author: Rob Pike <r@golang.org>
Date:   Thu Jun 23 15:28:36 2016 -0700

    time: update documentation for Duration.String regarding the zero value
    
    It was out of date; in 1.7 the format changes to 0s.
    
    Change-Id: I2013a1b0951afc5607828f313641b51c74433257
    Reviewed-on: https://go-review.googlesource.com/24421
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e4dc7f1ed2f90b2f72b21f5f8e00287e3c409876
Author: Sameer Ajmani <sameer@golang.org>
Date:   Fri Jun 24 10:48:06 2016 -0400

    context: update documentation on cancelation and go vet check.
    
    Also replace double spaces after periods with single spaces.
    
    Change-Id: Iedaea47595c5ce64e7e8aa3a368f36d49061c555
    Reviewed-on: https://go-review.googlesource.com/24431
    Reviewed-by: Alan Donovan <adonovan@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3c6ed76da2feb45f8fba9177e9d6e0f19671353b
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Jun 24 11:09:48 2016 -0400

    reflect: avoid lock for some NumMethod()==0 cases
    
    The encoding/json package uses NumMethod()==0 as a fast check for
    interface satisfaction. In the case when a type has no methods at
    all, we don't need to grab the RWMutex.
    
    Improves JSON decoding benchmark on linux/amd64:
    
            name           old time/op    new time/op    delta
            CodeDecoder-8    44.2ms ± 2%    40.6ms ± 1%  -8.11%  (p=0.000 n=10+10)
    
            name           old speed      new speed      delta
            CodeDecoder-8  43.9MB/s ± 2%  47.8MB/s ± 1%  +8.82%  (p=0.000 n=10+10)
    
    For #16117
    
    Change-Id: Id717e7fcd2f41b7d51d50c26ac167af45bae3747
    Reviewed-on: https://go-review.googlesource.com/24433
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f9d6b909b10e80d862932a935907e36c8cc24eeb
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Jun 23 20:51:39 2016 +0000

    A+C: automated updates
    
    Add Aaron Zinman (corporate CLA for Empirical Interfaces Inc.)
    Add Ayanamist Yang (individual CLA)
    Add Christian Couder (individual CLA)
    Add Eric Engestrom (individual CLA)
    Add Filippo Valsorda (individual CLA)
    Add Gyu-Ho Lee (individual CLA)
    Add H. İbrahim Güngör (individual CLA)
    Add Jacob Hoffman-Andrews (individual CLA)
    Add Jason Barnett (individual CLA)
    Add Joe Farrell (individual CLA)
    Add Julian Kornberger (individual CLA)
    Add Kris Rousey (corporate CLA for Google Inc.)
    Add Miguel Mendez (individual CLA)
    Add Nic Day (individual CLA)
    Add Paulo Casaretto (individual CLA)
    Add Philip Børgesen (individual CLA)
    Add Quan Tran (individual CLA)
    Add Sai Cheemalapati (corporate CLA for Google Inc.)
    Add Sasha Sobol (individual CLA)
    Add Seth Vargo (individual CLA)
    Add Simon Thulbourn (individual CLA)
    Add Wisdom Omuya (individual CLA)
    
    Updates #12042
    
    Change-Id: Ie8ab5e3500ee62000c0b176d4d71340446e72ab7
    Reviewed-on: https://go-review.googlesource.com/24420
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e75c899a10c9321d1b4935c34401f66b2abad83a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Jun 23 13:32:50 2016 -0400

    reflect: optimize (reflect.Type).Name
    
    Improves JSON decoding on linux/amd64.
    
    name                   old time/op    new time/op    delta
    CodeUnmarshal-40         89.3ms ± 2%    86.3ms ± 2%  -3.31%  (p=0.000 n=22+22)
    
    name                   old speed      new speed      delta
    CodeUnmarshal-40       21.7MB/s ± 2%  22.5MB/s ± 2%  +3.44%  (p=0.000 n=22+22)
    
    Updates #16117
    
    Change-Id: I52acf31d7729400cfe6693e46292d41e1addba3d
    Reviewed-on: https://go-review.googlesource.com/24410
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e369490fb7db5f2d42bb0e8ee19b48378dee0ebf
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Jun 23 10:59:38 2016 -0400

    cmd/compile, etc: bring back ptrToThis
    
    This was removed in CL 19695 but it slows down reflect.New, which ends
    up on the hot path of things like JSON decoding.
    
    There is no immediate cost in binary size, but it will make it harder to
    further shrink run time type information in Go 1.8.
    
    Before
    
            BenchmarkNew-40         30000000                36.3 ns/op
    
    After
    
            BenchmarkNew-40         50000000                29.5 ns/op
    
    Fixes #16161
    Updates #16117
    
    Change-Id: If7cb7f3e745d44678f3f5cf3a5338c59847529d2
    Reviewed-on: https://go-review.googlesource.com/24400
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit aa6345d3c91167f1e81bff9e8655e7aaac7762bd
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 21 15:17:56 2016 -0700

    testing: document that logs are dumped to standard output
    
    Since at least 1.0.3, the testing package has said that logs are dumped
    to standard error, but has in fact dumped the logs to standard output.
    We could change to dump to standard error, but after doing it this way
    for so long I think it's better to change the docs.
    
    Fixes #16138.
    
    Change-Id: If39c7ce91f51c7113f33ebabfb8f84fd4611b9e1
    Reviewed-on: https://go-review.googlesource.com/24311
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit bc3bcfd4e76195ead984e9d2ae1a1783d1272dc4
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 22 09:47:42 2016 -0700

    html/template: update security model link
    
    Fixes #16148.
    
    Change-Id: Ifab773e986b768602476824d005eea9200761236
    Reviewed-on: https://go-review.googlesource.com/24327
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit b31ec5c564f02cf48d177853fd7bff9892be7ce6
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 22 06:27:31 2016 -0700

    cmd/yacc: error rather than panic when TEMPSIZE is too small
    
    I tried simply increasing the size of the slice but then I got an error
    because NSTATES was too small. Leaving a real fix for after 1.7.
    
    Update #16144.
    
    Change-Id: I8676772cb79845dd4ca1619977d4d54a2ce6de59
    Reviewed-on: https://go-review.googlesource.com/24321
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 0dae2fd149537a0385b48bbd1564b3cfefa1c85b
Author: Keith Randall <khr@golang.org>
Date:   Wed Jun 1 14:18:00 2016 -0700

    cmd/objdump: fix disassembly suffixes
    
    MOVB $1, (AX) was being disassembled as MOVL $1, (AX).
    
    Use the memory size to override the standard size.
    Fix the tests.
    
    Fixes #15922
    
    Change-Id: If92fe74c33a21e5427c8c5cc97dd15e087edb860
    Reviewed-on: https://go-review.googlesource.com/23608
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 395f6ebaf9fd2954f5db3da4c7ad2817b0aa7252
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Jun 17 16:09:15 2016 -0400

    CONTRIBUTORS: add people who contributed to s390x port (IBM CLA)
    
    Add Bill O'Farrell (corporate CLA for IBM)
    Add Karan Dhiman (corporate CLA for IBM)
    Add Sam Ding (corporate CLA for IBM)
    Add Tristan Amini (corporate CLA for IBM)
    Add Yu Heng Zhang (corporate CLA for IBM)
    Add Yu Xuan Zhang (corporate CLA for IBM)
    
    Change-Id: I9ab15e33954afc2c208fc2e420a72c5a4d865f9b
    Reviewed-on: https://go-review.googlesource.com/24350
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4764d6fd6e64d9d40e7131a3bf4ea0eb1507ef1f
Author: Alan Donovan <adonovan@google.com>
Date:   Wed Jun 22 10:41:30 2016 -0400

    cmd/vet/internal/cfg: don't crash on malformed goto statement
    
    Change-Id: Ib285c02e240f02e9d5511bd448163ec1d4e75516
    Reviewed-on: https://go-review.googlesource.com/24323
    Reviewed-by: Rob Pike <r@golang.org>

commit f2c13d713d85650e4a850813d64681d6be5d2e29
Author: Alan Donovan <adonovan@google.com>
Date:   Wed Jun 22 10:40:30 2016 -0400

    cmd/vet: fix a crash in lostcancel check
    
    Fixes issue 16143
    
    Change-Id: Id9d257aee54d31fbf0d478cb07339729cd9712c0
    Reviewed-on: https://go-review.googlesource.com/24325
    Reviewed-by: Rob Pike <r@golang.org>

commit 1f446432ddfd64f1507e7c85cd603d3c5ae60094
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Jun 21 14:27:40 2016 -0700

    cmd/compile: fix error msg mentioning different packages with same name
    
    This is a regression from 1.6. The respective code in importimport
    (export.go) was not exactly replicated with the new importer. Also
    copied over the missing cyclic import check.
    
    Added test cases.
    
    Fixes #16133.
    
    Change-Id: I1e0a39ff1275ca62a8054874294d400ed83fb26a
    Reviewed-on: https://go-review.googlesource.com/24312
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>

commit 845992eeed01643bfb2e88aa559413908b3cb508
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Jun 21 15:33:04 2016 -0700

    test: add -s flag to commands understood by run.go
    
    If -s is specified, each file is considered a separate
    package even if multiple files have the same package names.
    
    For instance, the action and flag "errorcheckdir -s"
    will compile all files in the respective directory as
    individual packages.
    
    Change-Id: Ic5c2f9e915a669433f66c2d3fe0ac068227a502f
    Reviewed-on: https://go-review.googlesource.com/24313
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit eaf4ad6f7493c222a6b27609fcb24e950eb540ab
Author: Alan Donovan <adonovan@google.com>
Date:   Tue Jun 21 11:11:50 2016 -0400

    doc: describe vet -lostcancel in go1.7 release notes
    
    Change-Id: Ie1c95fd0869307551bfcf76bf45c13372723fbba
    Reviewed-on: https://go-review.googlesource.com/24288
    Reviewed-by: Rob Pike <r@golang.org>

commit b65cb7f198836faf6605051b95bd60a169fa5e8b
Author: Alan Donovan <adonovan@google.com>
Date:   Tue Jun 14 23:50:39 2016 -0400

    cmd/vet: -lostcancel: check for discarded result of context.WithCancel
    
    The cfg subpackage builds a control flow graph of ast.Nodes.
    The lostcancel module checks this graph to find paths, from a call to
    WithCancel to a return statement, on which the cancel variable is
    not used.  (A trivial case is simply assigning the cancel result to
    the blank identifier.)
    
    In a sample of 50,000 source files, the new check found 2068 blank
    assignments and 118 return-before-cancel errors.  I manually inspected
    20 of the latter and didn't find a single false positive among them.
    
    Change-Id: I84cd49445f9f8d04908b04881eb1496a96611205
    Reviewed-on: https://go-review.googlesource.com/24150
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit d28242724872c6ab82d53a71fc775095d1171ee7
Author: qeed <qeed.quan@gmail.com>
Date:   Mon Jun 20 21:11:53 2016 -0400

    cmd/cgo: error, not panic, if not enough arguments to function
    
    Fixes #16116.
    
    Change-Id: Ic3cb0b95382bb683368743bda49b4eb5fdcc35c0
    Reviewed-on: https://go-review.googlesource.com/24286
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 86b031018550ff1848ebe7c471c54c5a58fb1a3d
Author: Rob Pike <r@golang.org>
Date:   Mon Jun 20 15:39:03 2016 -0700

    text/template: clarify the default formatting used for values
    
    Fixes #16105.
    
    Change-Id: I94467f2adf861eb38f3119ad30d46a87456d5305
    Reviewed-on: https://go-review.googlesource.com/24281
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 252eda470a3684a1ead5956f7e703532f4213f11
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jun 20 14:00:58 2016 -0700

    cmd/pprof: don't use offset if we don't have a start address
    
    The test is in the runtime package because there are other tests of
    pprof there. At some point we should probably move them all into a pprof
    testsuite.
    
    Fixes #16128.
    
    Change-Id: Ieefa40c61cf3edde11fe0cf04da1debfd8b3d7c0
    Reviewed-on: https://go-review.googlesource.com/24274
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 09834d1c082a2437b12584bebaa7353377e66f1a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jun 20 15:53:11 2016 -0700

    runtime: panic with the right error on iface conversion
    
    A straight conversion from a type T to an interface type I, where T does
    not implement I, should always panic with an interface conversion error
    that shows the missing method.  This was not happening if the conversion
    was done once using the comma-ok form (the result would not be OK) and
    then again in a straight conversion.  Due to an error in the runtime
    package the second conversion was failing with a nil pointer
    dereference.
    
    Fixes #16130.
    
    Change-Id: I8b9fca0f1bb635a6181b8b76de8c2385bb7ac2d2
    Reviewed-on: https://go-review.googlesource.com/24284
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Michel Lespinasse <walken@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 659b9a19aa509df35f984276e177c68ff7f6f632
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jun 20 09:16:17 2016 -0700

    runtime: set PPROF_TMPDIR before running pprof
    
    Fixes #16121.
    
    Change-Id: I7b838fb6fb9f098e6c348d67379fdc81fb0d69a4
    Reviewed-on: https://go-review.googlesource.com/24270
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 109823ec93e690f2a401c316210ee86bde53d6bf
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Jun 20 13:30:04 2016 +1000

    cmd/go: for generate, use build context values for GOOS/GOARCH
    
    Fixes #16120
    
    Change-Id: Ia352558231e00baab5c698e93d7267564c07ec0c
    Reviewed-on: https://go-review.googlesource.com/24242
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e1a6e71e746d511570f269d43b9abf838505a8e5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jun 20 15:43:21 2016 -0700

    test: add missing copyright notice
    
    Change-Id: I2a5353203ca2958fa37fc7a5ea3f22ad4fc62b0e
    Reviewed-on: https://go-review.googlesource.com/24282
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 349f0fb89a11c9aa579bc0facab375d6ffb7ad43
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Jun 20 15:33:52 2016 +1000

    doc: update architectures on source install instructions
    
    Fixes #16099
    
    Change-Id: I334c1f04dfc98c4a07e33745819d890b5fcb1673
    Reviewed-on: https://go-review.googlesource.com/24243
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 20fd1bb8bdbd8ead3d707ad13b560a375a7b3967
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Jun 20 10:40:07 2016 +0900

    doc/go1.7.html: don't mention obsolete RFC
    
    Change-Id: Ia978c10a97e4c24fd7cf1fa4a7c3bd886d20bbf8
    Reviewed-on: https://go-review.googlesource.com/24241
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 153d31da1629facdc855ad0e4e91369ec2124ac7
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Jun 19 17:30:29 2016 -0700

    doc/go1.7.html: net/http RFC 2616 conformation + timeoutHandler on empty body
    
    - Mention RFC 2616 conformation in which the server now only sends one
    "Transfer-Encoding" header when "chunked" is explicitly set.
    - Mention that a timeout handler now sends a 200 status code on
    encountering an empty response body instead of sending back 0.
    
    Change-Id: Id45e2867390f7e679ab40d7a66db1f7b9d92ce17
    Reviewed-on: https://go-review.googlesource.com/24250
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 691c5c156878799ec15683f10e24d9a924ea7996
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri Jun 17 14:05:35 2016 +1000

    debug/pe: handle files with no string table
    
    pecoff.doc (https://goo.gl/ayvckk) in section 5.6 says:
    
    Immediately following the COFF symbol table is the COFF string table.
    The position of this table is found by taking the symbol table address
    in the COFF header, and adding the number of symbols multiplied by
    the size of a symbol.
    
    So it is unclear what to do when symbol table address is 0.
    Lets assume executable does not have any string table.
    
    Added new test with executable with no symbol table. The
    
    gcc -s testdata\hello.c -o testdata\gcc-386-mingw-no-symbols-exec.
    
    command was used to generate the executable.
    
    Fixes #16084
    
    Change-Id: Ie74137ac64b15daadd28e1f0315f3b62d1bf2059
    Reviewed-on: https://go-review.googlesource.com/24200
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f3d54789f764f0f6dba1d2f12ad01986d66ea31c
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Jun 16 18:12:48 2016 -0400

    cmd/compile: use power5 instructions for uint64 to float casts
    
    Use the same technique as mips64 for these casts (CL 22835).
    
    We could use the FCFIDU instruction for ppc64le however it seems
    better to keep it the same as ppc64 for now.
    
    Updates #15539, updates #16004.
    
    Change-Id: I550680e485327568bf3238c4615a6cc8de6438d7
    Reviewed-on: https://go-review.googlesource.com/24191
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9e8fa1e99c2003cee53a6630aea9d8a3627492ab
Author: Austin Clements <austin@google.com>
Date:   Fri Jun 17 11:07:56 2016 -0400

    runtime: eliminate poisonStack checks
    
    We haven't used poisonStack since we switched to 1-bit stack maps
    (4d0f3a1), but the checks are still there. However, nothing prevents
    us from genuinely allocating an object at this address on 32-bit and
    causing the runtime to crash claiming that it's found a bad pointer.
    
    Since we're not using poisonStack anyway, just pull it out.
    
    Fixes #15831.
    
    Change-Id: Ia6ef604675b8433f75045e369f5acd4644a5bb38
    Reviewed-on: https://go-review.googlesource.com/24211
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit fca9fc52c831ab6af56e30f8c48062a99ded2580
Author: Austin Clements <austin@google.com>
Date:   Thu Jun 16 15:41:33 2016 -0400

    runtime: fix stale comment in lfstack
    
    Change-Id: I6ef08f6078190dc9df0b2df4f26a76456602f5e8
    Reviewed-on: https://go-review.googlesource.com/24176
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 79f2f008a31f769ae3db684eb48d8baeda731c00
Author: Austin Clements <austin@google.com>
Date:   Thu Jun 16 14:38:33 2016 -0400

    cmd/dist: make zosarch.go deterministic
    
    Currently zosarch.go is written out in non-deterministic map order.
    Sort the keys and write it out in sorted order to make the generated
    file contents deterministic.
    
    Change-Id: Id490f0e8665a2c619c5a7a00a30f4fc64f333258
    Reviewed-on: https://go-review.googlesource.com/24174
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c3818e56d0f60493a63b2bb03a09f261d3e0ada2
Author: Hana Kim <hyangah@gmail.com>
Date:   Wed Jun 15 12:53:05 2016 -0400

    internal/trace: err if binary is not supplied for old trace
    
    Change-Id: Id25c90993c4cbb7449d7031301b6d214a67d7633
    Reviewed-on: https://go-review.googlesource.com/24134
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ea2ac3fe5fb2011b077809e60bc018e0c6caa66c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 15 10:36:48 2016 -0700

    runtime: remove useless loop from CgoCCodeSIGPROF test program
    
    I verified that the test fails if I undo the change that it tests for.
    
    Updates #14732.
    
    Change-Id: Ib30352580236adefae946450ddd6cd65a62b7cdf
    Reviewed-on: https://go-review.googlesource.com/24151
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit d78d0de4d15019f87b04b49ba640a455f7c42512
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Jun 15 12:33:47 2016 -0700

    go/ast: fix comments misinterpreted as documentation
    
    The comments describing blocks of Pos/End implementations for various
    nodes types are being misinterpreted as documentation for BadDecl,
    BadExpr, BadStmt, and ImportSpec's Pos methods.
    
    Change-Id: I935b0bc38dbc13e9305f3efeb437dd3a6575d9a1
    Reviewed-on: https://go-review.googlesource.com/24152
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 26d6dc6bf8a7e5487844a63aa26a4de3afdd688e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 14 14:38:22 2016 -0700

    runtime: if the test program hangs, try to get a stack trace
    
    This is an attempt to get more information for #14809, which seems to
    occur rarely.
    
    Updates #14809.
    
    Change-Id: Idbeb136ceb57993644e03266622eb699d2685d02
    Reviewed-on: https://go-review.googlesource.com/24110
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Austin Clements <austin@google.com>

commit 48cc3c4b587f9549f7426776d032da99b3ba471b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Jun 14 15:33:15 2016 -0400

    syscall: skip TestUnshare if kernel does not support net namespace
    
    Fixes #16056.
    
    Change-Id: Ic3343914742713851b8ae969b101521f25e85e7b
    Reviewed-on: https://go-review.googlesource.com/24132
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0ec62565f911575beaf7d047dfe1eae2ae02bf67
Author: Andrew Gerrand <adg@golang.org>
Date:   Wed Jun 15 10:52:42 2016 +1000

    net/http: pass through server side Transfer-Encoding headers
    
    Fixes #16063
    
    Change-Id: I2e8695beb657b0aef067e83f086828d8857787ed
    Reviewed-on: https://go-review.googlesource.com/24130
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c4692da9231c244a1275d42055e703b3f1dac25b
Author: Sameer Ajmani <sameer@golang.org>
Date:   Tue Jun 14 16:48:42 2016 -0400

    context: document how to release resources associated with Contexts.
    
    Some users don't realize that creating a Context with a CancelFunc
    attaches a subtree to the parent, and that that subtree is not released
    until the CancelFunc is called or the parent is canceled.  Make this
    clear early in the package docs, so that people learning about this
    package have the right conceptual model.
    
    Change-Id: I7c77a546c19c3751dd1f3a5bc827ad106dd1afbf
    Reviewed-on: https://go-review.googlesource.com/24090
    Reviewed-by: Alan Donovan <adonovan@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 68697a3e82e19fef04c6af4a02340a1aa6e3bcf2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 14 15:32:39 2016 -0700

    net: don't run TestLookupDotsWithLocalSource in short mode
    
    Do run it on the builders, though.
    
    Fixes #15881.
    
    Change-Id: Ie42204d553cb18547ffd6441afc261717bbd9205
    Reviewed-on: https://go-review.googlesource.com/24111
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9208ed322459809cf26f65485d0e6d248dadb830
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Jun 15 01:09:51 2016 +0900

    os: fix blockUntilWaitable on freebsd/{386,arm}
    
    The previous fix was wrong because it had two misunderstandings on
    freebsd32 calling convention like the following:
    - 32-bit id1 implies that it is the upper half of 64-bit id, indeed it
      depends on machine endianness.
    - 32-bit ARM calling convension doesn't conform to freebsd32_args,
      indeed it does.
    
    This change fixes the bugs and makes blockUntilWaitable work correctly
    on freebsd/{386,arm}.
    
    Fixes #16064.
    
    Change-Id: I820c6d01d59a43ac4f2ab381f757c03b14bca75e
    Reviewed-on: https://go-review.googlesource.com/24064
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit af0fc83985860776551d15be3a8fefde35514bcb
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Jun 14 10:20:11 2016 -0400

    cmd/compile, etc: handle many struct fields
    
    This adds 8 bytes of binary size to every type that has methods. It is
    the smallest change I could come up with for 1.7.
    
    Fixes #16037
    
    Change-Id: Ibe15c3165854a21768596967757864b880dbfeed
    Reviewed-on: https://go-review.googlesource.com/24070
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 53242e49b127ede6d7b258c7e90c39a5afa70c25
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 7 09:42:48 2016 -0700

    crypto/x509: don't ignore asn1.Marshal error
    
    I don't see how the call could fail, so, no test. Just a code cleanup in
    case it can fail in the future.
    
    Fixes #15987.
    
    Change-Id: If4af0d5e7d19cc8b13fb6a4f7661c37fb0015e83
    Reviewed-on: https://go-review.googlesource.com/23860
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 0deb49f9c09d15bf0e4c5ec843bd374f9a377e97
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jun 13 11:55:30 2016 -0700

    cmd/go: include .syso files even if CGO_ENABLED=0
    
    A .syso file may include information that should go into the object file
    that is not object code, and should be included even if not using cgo.
    The example in the issue is a Windows manifest file.
    
    Fixes #16050.
    
    Change-Id: I1f4f3f80bb007e84d153ca2d26e5919213ea4f8d
    Reviewed-on: https://go-review.googlesource.com/24032
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 9273e25eccbe82edff839b125b49bfb5578f24eb
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jun 10 10:41:36 2016 -0700

    cmd/go: remove obsolete comment referring to deleted parameter
    
    The dir parameter was removed in https://golang.org/cl/5732045.
    
    Fixes #15503.
    
    Change-Id: I02a6d8317233bea08633715a095ea2514822032b
    Reviewed-on: https://go-review.googlesource.com/24011
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitri Shuralyov <shurcool@gmail.com>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit cab87a60dec2c771c12ba08b82bb7645228192e6
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Jun 14 10:14:28 2016 +0900

    os: fix build on freebsd/arm
    
    Change-Id: I21fad94ff94e342ada18e0e41ca90296d030115f
    Reviewed-on: https://go-review.googlesource.com/24061
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5d876e3e2eb3a30a8c66888912cf41785fa65a96
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Jun 11 19:55:34 2016 +0900

    os: use wait6 to avoid wait/kill race on freebsd
    
    This change is a followup to https://go-review.googlesource.com/23967
    for FreeBSD.
    
    Updates #13987.
    Updates #16028.
    
    Change-Id: I0f0737372fce6df89d090fe9847305749b79eb4c
    Reviewed-on: https://go-review.googlesource.com/24021
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ccd9a55609fcc8814146a7c61898b47e3a7aea7d
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Jun 11 19:36:17 2016 +0900

    os: use waitid to avoid wait/kill race on darwin
    
    This change is a followup to https://go-review.googlesource.com/23967
    for Darwin.
    
    Updates #13987.
    Updates #16028.
    
    Change-Id: Ib1fb9f957fafd0f91da6fceea56620e29ad82b00
    Reviewed-on: https://go-review.googlesource.com/24020
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 84d8aff94cf48439047c7edc68ae2ea0aac6ddf5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jun 7 21:46:25 2016 -0700

    runtime: collect stack trace if SIGPROF arrives on non-Go thread
    
    Fixes #15994.
    
    Change-Id: I5aca91ab53985ac7dcb07ce094ec15eb8ec341f8
    Reviewed-on: https://go-review.googlesource.com/23891
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5701174c52a2d42621ec3c5c59dca3bde9a14bc6
Author: Keith Randall <khr@golang.org>
Date:   Sat Jun 11 17:12:28 2016 -0700

    cmd/link: put padding between functions, not at the end of a function
    
    Functions should be declared to end after the last real instruction, not
    after the last padding byte. We achieve this by adding the padding while
    assembling the text section in the linker instead of adding the padding
    to the function symbol in the compiler. This change makes dtrace happy.
    
    TODO: check that this works with external linking
    
    Fixes #15969
    
    Change-Id: I973e478d0cd34b61be1ddc55410552cbd645ad62
    Reviewed-on: https://go-review.googlesource.com/24040
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 595426c0d903a3686bdfe6d0e8ef268a60c19896
Author: David Chase <drchase@google.com>
Date:   Fri Jun 10 11:51:46 2016 -0400

    cmd/compile: fix OASWB rewriting in racewalk
    
    Special case for rewriting OAS inits omitted OASWB, added
    that and OAS2FUNC.  The special case cannot be default case,
    that causes racewalk to fail in horrible ways.
    
    Fixes #16008.
    
    Change-Id: Ie0d2f5735fe9d8255a109597b36d196d4f86703a
    Reviewed-on: https://go-review.googlesource.com/23954
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2ba3d5fc9661846cc3ef66ffc2b8bf2f91909d73
Author: Dmitri Shuralyov <shurcooL@gmail.com>
Date:   Fri Jun 10 01:38:43 2016 -0700

    cmd/go: remove invalid space in import comment docs
    
    Generate package comment in alldocs.go using line comments rather than
    general comments. This scales better, general comments cannot contain the
    "*/" character sequence. Line comments do not have any restrictions on
    the comment text that can be contained.
    
    Remove the dependency on sed, which is not cross-platform, not go-gettable
    external command.
    
    Remove trailing whitespace from usage string in test.go. It's unnecessary.
    
    Fixes #16030.
    
    Change-Id: I3c0bc9955e7c7603c3d1fb4878218b0719d02e04
    Reviewed-on: https://go-review.googlesource.com/23968
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c83e6f50d983d81166d21736ff9ab0ad2182f0fa
Author: Keith Randall <khr@golang.org>
Date:   Thu May 26 08:56:49 2016 -0700

    runtime: aeshash, xor seed in earlier
    
    Instead of doing:
    
    x = input
    one round of aes on x
    x ^= seed
    two rounds of aes on x
    
    Do:
    
    x = input
    x ^= seed
    three rounds of aes on x
    
    This change provides some additional seed-dependent scrambling
    which should help prevent collisions.
    
    Change-Id: I02c774d09c2eb6917cf861513816a1024a9b65d7
    Reviewed-on: https://go-review.googlesource.com/23577
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cea29c4a358004d84d8711a07628c2f856b381e8
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jun 9 22:24:40 2016 -0700

    os: on GNU/Linux use waitid to avoid wait/kill race
    
    On systems that support the POSIX.1-2008 waitid function, we can use it
    to block until a wait will succeed. This avoids a possible race
    condition: if a program calls p.Kill/p.Signal and p.Wait from two
    different goroutines, then it is possible for the wait to complete just
    before the signal is sent. In that case, it is possible that the system
    will start a new process using the same PID between the wait and the
    signal, causing the signal to be sent to the wrong process. The
    Process.isdone field attempts to avoid that race, but there is a small
    gap of time between when wait returns and isdone is set when the race
    can occur.
    
    This CL avoids that race by using waitid to wait until the process has
    exited without actually collecting the PID. Then it sets isdone, then
    waits for any active signals to complete, and only then collects the PID.
    
    No test because any plausible test would require starting enough
    processes to recycle all the process IDs.
    
    Update #13987.
    Update #16028.
    
    Change-Id: Id2939431991d3b355dfb22f08793585fc0568ce8
    Reviewed-on: https://go-review.googlesource.com/23967
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e980a3d8856ec3b4f11daa7e5ec417ad4f5c5256
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Jun 10 10:27:37 2016 -0700

    go/parser: document that parse functions need valid token.FileSet
    
    + panic with explicit error if no file set it provided
    
    (Not providing a file set is invalid use of the API; panic
    is the appropriate action rather than returning an error.)
    
    Fixes #16018.
    
    Change-Id: I207f5b2a2e318d65826bdd9522fce46d614c24ee
    Reviewed-on: https://go-review.googlesource.com/24010
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fee02d270bf850d5b390000d8545c3609718e9a5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jun 9 06:42:42 2016 -0700

    cmd/go: clarify go get documentation
    
    Make the documentation for `go get` match the documentation for `go
    install`, since `go get` essentially invokes `go install`.
    
    Update #15825.
    
    Change-Id: I374d80efd301814b6d98b86b7a4a68dd09704c92
    Reviewed-on: https://go-review.googlesource.com/23925
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 5f3eb432884ae1b3c61977d93a4bdf0263fcdce6
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Jun 9 12:01:43 2016 -0400

    syscall: add a padding field to EpollEvent on s390x
    
    Fixes #16021.
    
    Change-Id: I55df38bbccd2641abcb54704115002a9aa04325d
    Reviewed-on: https://go-review.googlesource.com/23962
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8042bfe347d5b2c4f6af372b09b23c8945fb196e
Author: Jess Frazelle <me@jessfraz.com>
Date:   Fri May 20 14:35:28 2016 -0700

    encoding/csv: update doc about comments whitespace
    
    This patch updates the doc about comments whitespace for the
    encoding/csv package to reflect that leading whitespace before
    the hash will treat the line as not a comment.
    
    Fixes #13775.
    
    Change-Id: Ia468c75b242a487b4b2b4cd3d342bfb8e07720ba
    Reviewed-on: https://go-review.googlesource.com/23302
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit cbc26869b7835e45359dad7dfb70e85c02c820cd
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jun 8 22:22:35 2016 -0400

    runtime: set $sp before $pc in gdb python script
    
    When setting $pc, gdb does a backtrace using the current value of $sp,
    and it may complain if $sp does not match that $pc (although the
    assignment went through successfully).
    
    This happens with ARM SSA backend: when setting $pc it prints
    > Cannot access memory at address 0x0
    
    As well as occasionally on MIPS64:
    > warning: GDB can't find the start of the function at 0xc82003fe07.
    > ...
    
    Setting $sp before setting $pc makes it happy.
    
    Change-Id: Idd96dbef3e9b698829da553c6d71d5b4c6d492db
    Reviewed-on: https://go-review.googlesource.com/23940
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit e3f1c66f313a59888620c415163b93c12153574e
Author: Keith Randall <khr@golang.org>
Date:   Thu Jun 9 11:07:36 2016 -0700

    cmd/compile: for tail calls in stubs, ensure args are alive
    
    The generated code for interface stubs sometimes just messes
    with a few of the args and then tail-calls to the target routine.
    The args that aren't explicitly modified appear to not be used.
    But they are used, by the thing we're tail calling.
    
    Fixes #16016
    
    Change-Id: Ib9b3a8311bb714a201daee002885fcb59e0463fa
    Reviewed-on: https://go-review.googlesource.com/23960
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 1bdf1c3024d75a3c4913d031d55257b311f0133f
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jun 9 11:19:26 2016 -0700

    cmd/cgo: fix use of unsafe argument in new deferred function
    
    The combination of https://golang.org/cl/23650 and
    https://golang.org/cl/23675 did not work--they were tested separately
    but not together.
    
    The problem was that 23650 introduced deferred argument checking, and
    the deferred function loses the type that 23675 started requiring. The
    fix is to go back to using an empty interface type in a deferred
    argument check.
    
    No new test required--fixes broken build.
    
    Change-Id: I5ea023c5aed71d70e57b11c4551242d3ef25986d
    Reviewed-on: https://go-review.googlesource.com/23961
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 837984f37291f4fc48f9c99b65b0ab3f050bf4b9
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 1 21:32:47 2016 -0700

    cmd/cgo: use function arg type for _cgoCheckPointerN function
    
    When cgo writes a _cgoCheckPointerN function to handle unsafe.Pointer,
    use the function's argument type rather than interface{}. This permits
    type errors to be detected at build time rather than run time.
    
    Fixes #13830.
    
    Change-Id: Ic7090905e16b977e2379670e0f83640dc192b565
    Reviewed-on: https://go-review.googlesource.com/23675
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 894803c11e4eab128869be759463510580a68602
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 8 21:15:26 2016 -0700

    time: document that RFC822/1123 don't parse all RFC formats
    
    Fixes #14505.
    
    Change-Id: I46196b26c9339609e6e3ef9159de38c5b50c2a1b
    Reviewed-on: https://go-review.googlesource.com/23922
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit e2a30b8ffba065ea45bb1e18d1bb584898e3bf11
Author: Kenny Grant <kennygrant@gmail.com>
Date:   Sat May 21 17:19:22 2016 +0100

    time: genzabbrs.go skips Feb when checking months
    
    getAbbrs looks like it is checking each month looking for a change
    in the time zone abbreviation, but starts in Dec of the previous year
    and skips the month of February because of the overflow rules for
    AddDate. Changing the day to 1 starts at Jan 1 and tries all months
    in the current year. This isn't very important or likely to change
    output as zones usually span several months. Discovered when
    looking into time.AddDate behavior when adding months.
    
    Change-Id: I685254c8d21c402ba82cc4176e9a86b64ce8f7f7
    Reviewed-on: https://go-review.googlesource.com/23322
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6662897b2a3260393fff9dcf64faf3abfc773181
Author: Jason Barnett <jason.w.barnett@gmail.com>
Date:   Tue May 24 15:50:02 2016 -0400

    crypto/subtle: expand abbreviation to eliminate confusion
    
    Change-Id: I68d66fccf9cc8f7137c92b94820ce7d6f478a185
    Reviewed-on: https://go-review.googlesource.com/23310
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a8c6c4837c17ab4ec3ba78e40b9a72dc70d9cf5a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 8 21:09:09 2016 -0700

    os: document that the runtime can write to standard error
    
    Fixes #15970.
    
    Change-Id: I3f7d8316069a69d0e3859aaa96bc1414487fead0
    Reviewed-on: https://go-review.googlesource.com/23921
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 763883632e4d7fea145b6f3a7ee501b5ad9096f2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 8 17:45:55 2016 -0700

    cmd/go: only run TestGoGetHTTPS404 where it works
    
    The test TestGoGetHTTPS404 downloads a package that does not build on
    every OS, so change it to only run where the package builds. It's not
    great for the test to depend on an external package, but this is an
    improvement on the current situation.
    
    Fixes #15644.
    
    Change-Id: I1679cee5ab1e61a5b26f4ad39dc8a397fbc0da69
    Reviewed-on: https://go-review.googlesource.com/23920
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit f3689d138256c36dbe0004459f79d570f5345f74
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Jun 6 16:00:33 2016 -0400

    cmd/compile: nilcheck interface value in go/defer interface call for SSA
    
    This matches the behavior of the legacy backend.
    
    Fixes #15975 (if this is the intended behavior)
    
    Change-Id: Id277959069b8b8bf9958fa8f2cbc762c752a1a19
    Reviewed-on: https://go-review.googlesource.com/23820
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0324a3f828d3a2f48751df2bbd54ad20499e598a
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Jun 8 16:11:44 2016 +0000

    runtime/cgo: restore the g pointer correctly in crosscall_s390x
    
    R13 needs to be set to g because C code may have clobbered R13.
    
    Fixes #16006.
    
    Change-Id: I66311fe28440e85e589a1695fa1c42416583b4c6
    Reviewed-on: https://go-review.googlesource.com/23910
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 09eedc32e13484d9171519e9f07f3210ba5a7afd
Author: Elias Naur <elias.naur@gmail.com>
Date:   Fri Jun 3 11:41:26 2016 +0200

    misc/android: make the exec wrapper exit code parsing more robust
    
    Before, the Android exec wrapper expected the trailing exit code
    output on its own line, like this:
    
    PASS
    exitcode=0
    
    However, some tests can sometimes squeeze in some output after
    the test harness outputs "PASS" and the newline. The
    TestWriteHeapDumpFinalizers test is particularly prone to this,
    since its finalizers println to standard out. When it happens, the
    output looks like this:
    
    PASS
    finalizedexitcode=0
    
    Two recent failures caused by this race:
    
    https://build.golang.org/log/185605e1b936142c22350eef22d20e982be53c29
    https://build.golang.org/log/e61cf6a050551d10360bd90be3c5f58c3eb07605
    
    Since the "exitcode=" string is always echoed after the test output,
    the fix is simple: instead of looking for the last newline in the
    output, look for the last exitcode string instead.
    
    Change-Id: Icd6e53855eeba60b982ad3108289d92549328b86
    Reviewed-on: https://go-review.googlesource.com/23750
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit d1b5d08f341cbc702e1d2a3cd86ab1ad93a90c41
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jun 6 21:44:24 2016 -0700

    misc/cgo/testsanitizers: don't run some TSAN tests on GCC < 7
    
    Before GCC 7 defined __SANITIZE_THREAD__ when using TSAN,
    runtime/cgo/libcgo.h could not determine reliably whether TSAN was in
    use when using GCC.
    
    Fixes #15983.
    
    Change-Id: I5581c9f88e1cde1974c280008b2230fe5e971f44
    Reviewed-on: https://go-review.googlesource.com/23833
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit f605c77bbcc7946531e0914f13a0a14aae5f2991
Author: Andrew Gerrand <adg@golang.org>
Date:   Wed Jun 8 12:57:00 2016 +1000

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 313cf39 for CLs 23812 and 23880:
    
            http2: GotFirstResponseByte hook should only fire once
            http2: fix data race on pipe
    
    Fixes #16000
    
    Change-Id: I9c3f1b2528bbd99968aa5a0529ae9c5295979d1d
    Reviewed-on: https://go-review.googlesource.com/23881
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit afad74ec30c208f7cab08b7b80081adc7591dcb3
Author: Keith Randall <khr@golang.org>
Date:   Tue Jun 7 15:43:48 2016 -0700

    cmd/compile: cgen_append can handle complex targets
    
    Post-liveness fix, the slices on both sides can now be
    indirects of & variables.  The cgen code handles those
    cases just fine.
    
    Fixes #15988
    
    Change-Id: I378ad1d5121587e6107a9879c167291a70bbb9e4
    Reviewed-on: https://go-review.googlesource.com/23863
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 41dd1696ab13755bf7a129e0c73523ffb9fcbe66
Author: Keith Randall <khr@golang.org>
Date:   Tue Jun 7 09:54:09 2016 -0700

    cmd/compile: fix heap dump test on android
    
    go_android_exec is looking for "exitcode=" to decide the result
    of running a test.  The heap dump test nondeterministically prints
    "finalized" right at the end of the test.  When the timing is just
    right, we print "finalizedexitcode=0" and confuse go_android_exec.
    
    This failure happens occasionally on the android builders.
    
    Change-Id: I4f73a4db05d8f40047ecd3ef3a881a4ae3741e26
    Reviewed-on: https://go-review.googlesource.com/23861
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 2f088884aeab7f34ca69c0b8ab21c9694c628e19
Author: Keith Randall <khr@golang.org>
Date:   Mon Jun 6 10:56:42 2016 -0700

    cmd/compile: use fake package for allocating autos
    
    Make sure auto names don't conflict with function names. Before this CL,
    we confused name a.len (the len field of the slice a) with a.len (the function
    len declared on a).
    
    Fixes #15961
    
    Change-Id: I14913de697b521fb35db9a1b10ba201f25d552bb
    Reviewed-on: https://go-review.googlesource.com/23789
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 27c5dcffef590ac9dbc31f3d513f1b7d058907f6
Author: Andrew Gerrand <adg@golang.org>
Date:   Tue Jun 7 08:33:00 2016 +1000

    cmd/dist: use "set" instead of "export" in diagnostic message
    
    On Windows, "export" doesn't mean anything, but Windows users are the
    most likely to see this message.
    
    Fixes #15977
    
    Change-Id: Ib09ca08a7580713cacb65d0cdc43730765c377a8
    Reviewed-on: https://go-review.googlesource.com/23840
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3ba31558d1bca8ae6d2f03209b4cae55381175b3
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Jun 6 10:23:49 2016 +1000

    net/http: send StatusOK on empty body with TimeoutHandler
    
    Fixes #15948
    
    Change-Id: Idd79859b3e98d61cd4e3ef9caa5d3b2524fd026a
    Reviewed-on: https://go-review.googlesource.com/23810
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a71af25401d68645ca23b2303ac6ae426739aa8b
Author: Andrew Gerrand <adg@golang.org>
Date:   Tue May 31 15:30:52 2016 +1000

    time: warn about correct use of a Timer's Stop/Reset methods
    
    Updates #14038
    Fixes #14383
    
    Change-Id: Icf6acb7c5d13ff1d3145084544c030a778482a38
    Reviewed-on: https://go-review.googlesource.com/23575
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f9b4556de01710a964ffd0513eb7574a2d1fd62c
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Jun 6 10:41:47 2016 +1000

    net/http: send one Transfer-Encoding header when "chunked" set manually
    
    Fixes #15960
    
    Change-Id: I7503f6ede33e6a1a93cee811d40f7b297edf47bc
    Reviewed-on: https://go-review.googlesource.com/23811
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a871464e5aca9b81a6dc54cde8c31629387cb785
Author: Keith Randall <khr@golang.org>
Date:   Sun Jun 5 09:24:09 2016 -0700

    runtime: fix typo
    
    Fixes #15962
    
    Change-Id: I1949e0787f6c2b1e19b9f9d3af2f712606a6d4cf
    Reviewed-on: https://go-review.googlesource.com/23786
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0326e28f17ca760f76105fbcba9c5f55bb6ef1ce
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Jun 4 07:33:28 2016 +0900

    Revert "cmd/go: re-enable TestCgoConsistentResults on solaris"
    
    This reverts commit b89bcc1daeed9980c5ba8a255b37877493952874.
    
    Change-Id: Ief2f317ffc175f7e6002d0c39694876f46788c69
    Reviewed-on: https://go-review.googlesource.com/23744
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit b89bcc1daeed9980c5ba8a255b37877493952874
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Jun 3 16:45:21 2016 +0900

    cmd/go: re-enable TestCgoConsistentResults on solaris
    
    Updates #13247.
    
    Change-Id: If5e4c9f4db05f58608b0eeed1a2312a04015b207
    Reviewed-on: https://go-review.googlesource.com/23741
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7b48020cfeb64d1f841a7523aa841dbe53b3b465
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 1 15:24:14 2016 -0700

    cmd/cgo: check pointers for deferred C calls at the right time
    
    We used to check time at the point of the defer statement. This change
    fixes cgo to check them when the deferred function is executed.
    
    Fixes #15921.
    
    Change-Id: I72a10e26373cad6ad092773e9ebec4add29b9561
    Reviewed-on: https://go-review.googlesource.com/23650
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 55559f159e4ba7645a864c89caba0e29498425f9
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jun 3 12:39:54 2016 -0700

    doc/go1.7.html: html tidy
    
    Change-Id: I0e07610bae641cd63769b520089f5d854d796648
    Reviewed-on: https://go-review.googlesource.com/23770
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit adf261b7d6ed17bdefadc29ff71ddaba667b1a99
Author: Stephen McQuay (smcquay) <stephen@mcquay.me>
Date:   Fri Jun 3 02:12:17 2016 -0700

    cmd/go: match go-import package prefixes by slash
    
    The existing implementation for path collision resolution would
    incorrectly determine that:
    
        example.org/aa
    
    collides with:
    
        example.org/a
    
    This change splits by slash rather than comparing on a byte-by-byte
    basis.
    
    Fixes: #15947
    
    Change-Id: I18b3aaafbc787c81253203cf1328bb3c4420a0c4
    Reviewed-on: https://go-review.googlesource.com/23732
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 4b64c53c034b3a99a8a5dc3e8081342e77048561
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Jun 3 11:27:33 2016 -0400

    reflect: clear tflag for StructOf type
    
    Fixes #15923
    
    Change-Id: I3e56564365086ceb0bfc15db61db6fb446ab7448
    Reviewed-on: https://go-review.googlesource.com/23760
    Reviewed-by: Sebastien Binet <seb.binet@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cf862478c89fd94c4fe8d9ce1cb481d71e5136bf
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jun 3 10:49:24 2016 -0700

    runtime/cgo: add TSAN locks around mmap call
    
    Change-Id: I806cc5523b7b5e3278d01074bc89900d78700e0c
    Reviewed-on: https://go-review.googlesource.com/23736
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit b4c7f6280ed00316e410261adbc804f6ddd209cc
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jun 3 10:09:08 2016 -0700

    doc/go1.7.html: add missing <code> and </a>
    
    Change-Id: I5f4bf89345dc139063dcf34da653e914386bcde6
    Reviewed-on: https://go-review.googlesource.com/23735
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6901b084824244122ea108eb7305295e44136be8
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jun 3 07:11:52 2016 -0700

    cmd/link: avoid name collision with DWARF .def suffix
    
    Adding a .def suffix for DWARF info collided with the DWARF info,
    without the suffix, for a method named def. Change the suffix to ..def
    instead.
    
    Fixes #15926.
    
    Change-Id: If1bf1bcb5dff1d7f7b79f78e3f7a3bbfcd2201bb
    Reviewed-on: https://go-review.googlesource.com/23733
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit c3bd93aa264383c0c7928516ca102a225c83ea23
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Jun 3 18:06:54 2016 +0900

    net: don't leak test helper goroutine in TestAcceptTimeout
    
    Fixes #15109.
    
    Change-Id: Ibfdedd6807322ebec84bacfeb492fb53fe066960
    Reviewed-on: https://go-review.googlesource.com/23742
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>

commit 9e112a3fe4c001530184c2edc918a854d0b6d7e4
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Thu May 26 10:54:25 2016 +0200

    bytes: use Run method for benchmarks
    
    Change-Id: I34ab1003099570f0ba511340e697a648de31d08a
    Reviewed-on: https://go-review.googlesource.com/23427
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 26849746c9c7ca290d6cbb7ca5f3cf71c971e980
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Thu Jun 2 11:07:55 2016 +1200

    cmd/internal/obj, runtime: fixes for defer in 386 shared libraries
    
    Any defer in a shared object crashed when GOARCH=386. This turns out to be two
    bugs:
    
     1) Calls to morestack were not processed to be PIC safe (must have been
        possible to trigger this another way too)
     2) jmpdefer needs to rewind the return address of the deferred function past
        the instructions that load the GOT pointer into BX, not just past the call
    
    Bug 2) requires re-introducing the a way for .s files to know when they are
    being compiled for dynamic linking but I've tried to do that in as minimal
    a way as possible.
    
    Fixes #15916
    
    Change-Id: Ia0d09b69ec272a176934176b8eaef5f3bfcacf04
    Reviewed-on: https://go-review.googlesource.com/23623
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5799973c3e25545ac0e7d20f32a1453531c69399
Author: Andrew Gerrand <adg@golang.org>
Date:   Fri Jun 3 11:33:37 2016 +1000

    cmd/go: fix staleness test for releases, also deflake it
    
    Fixes #15933
    
    Change-Id: I2cd6365e6d0ca1cafdc812fbfaaa55aa64b2b289
    Reviewed-on: https://go-review.googlesource.com/23731
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7825ca6a63502e3b8decb0b569513dd6b5954aa7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jun 2 12:33:34 2016 -0700

    doc/go1.7.html: net/mail.ParseAddress is stricter
    
    Fixes #15940.
    
    Change-Id: Ie6da6fef235c6a251caa96d45f606c05d118a0ac
    Reviewed-on: https://go-review.googlesource.com/23710
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Travis Beatty <travisby@gmail.com>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 92cd6e3af9f423ab4d8ac78f24e7fd81c31a8ce6
Author: David Glasser <glasser@meteor.com>
Date:   Tue May 31 12:28:57 2016 -0700

    encoding/json: fix docs on valid key names
    
    This has been inaccurate since https://golang.org/cl/6048047.
    
    Fixes #15317.
    
    Change-Id: If93d2161f51ccb91912cb94a35318cf33f4d526a
    Reviewed-on: https://go-review.googlesource.com/23691
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 49c680f948310cfc7ab3062ca9a96a4adb6ae8cd
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Jun 2 17:17:02 2016 +0900

    syscall: deflake TestUnshare
    
    Change-Id: I21a08c2ff5ebb74e158723cca323574432870ba8
    Reviewed-on: https://go-review.googlesource.com/23662
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0f5697a81deab54f1673a48bd0ce613ebf1ddae6
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Thu May 26 12:10:28 2016 +0200

    strconv: use Run for some benchmarks
    
    This serves as an example of table-driven benchmarks which are analoguous to the common pattern for table-driven tests.
    
    Change-Id: I47f94c121a7117dd1e4ba03b3f2f8bcb5da38063
    Reviewed-on: https://go-review.googlesource.com/23470
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 03abde49713b46366fa47a037040697c8fdad3bb
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jun 2 12:01:03 2016 -0700

    runtime: only permit SetCgoTraceback to be called once
    
    Accept a duplicate call, but nothing else.
    
    Change-Id: Iec24bf5ddc3b0f0c559ad2158339aca698601743
    Reviewed-on: https://go-review.googlesource.com/23692
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 88e0ec2979bb39bd8811ec50a69fcb5007a24623
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue May 31 16:04:00 2016 -0700

    runtime/cgo: avoid races on cgo_context_function
    
    Change-Id: Ie9e6fda675e560234e90b9022526fd689d770818
    Reviewed-on: https://go-review.googlesource.com/23610
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 853cd1f4a61396cccb91522ed59af52d61aa8371
Author: Alexander Morozov <lk4d4math@gmail.com>
Date:   Fri May 27 15:02:31 2016 -0700

    syscall: call setgroups for no groups on GNU/Linux
    
    Skip setgroups only for one particular case: GidMappings != nil and
    GidMappingsEnableSetgroup == false and list of supplementary groups is
    empty.
    This patch returns pre-1.5 behavior for simple exec and still allows to
    use GidMappings with non-empty Credential.
    
    Change-Id: Ia91c77e76ec5efab7a7f78134ffb529910108fc1
    Reviewed-on: https://go-review.googlesource.com/23524
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e90a49a0f5380c6f68502b1febfb73f696c2f610
Author: Steve Phillips <steve@tryingtobeawesome.com>
Date:   Thu Jun 2 02:40:37 2016 -0700

    doc/go1.7.html: typo fix; replace "," at end of sentence with "."
    
    Signed-off-by: Steven Phillips <steve@tryingtobeawesome.com>
    
    Change-Id: Ie7c3253a5e1cd43be8fa12bad340204cc6c5ca76
    Reviewed-on: https://go-review.googlesource.com/23677
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 04888c9770560e99de63fafdfc2ce39b47844bfd
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Thu Jun 2 14:34:37 2016 +0200

    doc/go1.7: fix typo in nsswitch.conf name
    
    Fixes #15939
    
    Change-Id: I120cbeac73a052fb3f328774e6d5e1534f11bf6b
    Reviewed-on: https://go-review.googlesource.com/23682
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 905ced0e6ae33dca7ae6aa984d50cb02287952b1
Author: Sebastien Binet <seb.binet@gmail.com>
Date:   Thu Jun 2 09:25:30 2016 +0200

    reflect: document StructOf embedded fields limitation
    
    This CL documents that StructOf currently does not generate wrapper
    methods for embedded fields.
    
    Updates #15924
    
    Change-Id: I932011b1491d68767709559f515f699c04ce70d4
    Reviewed-on: https://go-review.googlesource.com/23681
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 14968bc1e52842b098408516472ebd3fb97e4714
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Jun 2 15:42:14 2016 +0200

    cmd/dist: skip an unsupported test on darwin/arm
    
    Fixes the darwin/arm builder (I hope)
    
    Change-Id: I8a3502a1cdd468d4bf9a1c895754ada420b305ce
    Reviewed-on: https://go-review.googlesource.com/23684
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 6c4f8cd0d17c8147319effcffcb608fc42eaf307
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Jun 2 15:00:34 2016 +0200

    misc/cgo/test: fix issue9400 test on android/386
    
    The test for #9400 relies on an assembler function that manipulates
    the stack pointer. Meanwile, it uses a global variable for
    synchronization. However, position independent code on 386 use a
    function call to fetch the base address for global variables.
    That function call in turn overwrites the Go stack.
    
    Fix that by fetching the global variable address once before the
    stack register manipulation.
    
    Fixes the android/386 builder.
    
    Change-Id: Ib77bd80affaa12f09d582d09d8b84a73bd021b60
    Reviewed-on: https://go-review.googlesource.com/23683
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 42c51debe824bd9b1fd93b3d50ff7187530754d3
Author: Elias Naur <elias.naur@gmail.com>
Date:   Wed Jun 1 22:51:30 2016 +0200

    misc/cgo/test,cmd/dist: enable (more) Cgo tests on iOS
    
    For #15919
    
    Change-Id: I9fc38d9c8a9cc9406b551315e1599750fe212d0d
    Reviewed-on: https://go-review.googlesource.com/23635
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ba22172832a971f0884106a5a8ff26a98a65623c
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Thu Jun 2 07:43:21 2016 +0200

    runtime: fix typo in comment
    
    Change-Id: I82e35770b45ccd1433dfae0af423073c312c0859
    Reviewed-on: https://go-review.googlesource.com/23680
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 15db3654b8e9fda6d41f4389879c8cd370f71a7e
Author: Anmol Sethi <anmol@aubble.com>
Date:   Wed Jun 1 22:35:09 2016 -0400

    net/http: http.Request.Context doc fix
    
    The comment on http.Request.Context says that the context
    is canceled when the client's connection closes even though
    this has not been implemented. See #15927
    
    Change-Id: I50b68638303dafd70f77f8f778e6caff102d3350
    Reviewed-on: https://go-review.googlesource.com/23672
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 6a0fd18016794a681580c8ca971c7d2d26f287bf
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu Jun 2 14:31:16 2016 +1000

    doc: mention net/http/httptrace package in release notes
    
    Updates #15810
    
    Change-Id: I689e18409a88c9e8941aa2e98f472c331efd455e
    Reviewed-on: https://go-review.googlesource.com/23674
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 17f7461ed66bbc66fef02ef7ca6901d116b6ff3d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 1 21:09:58 2016 -0700

    doc/go1.7.html: fix spelling of cancelation
    
    We say "cancelation," not "cancellation."
    
    Fixes #15928.
    
    Change-Id: I66d545404665948a27281133cb9050eebf1debbb
    Reviewed-on: https://go-review.googlesource.com/23673
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d25c3eadea9bc5c8b6451c3502d6063dd618a3af
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri May 27 15:41:55 2016 +1200

    cmd/compile: do not generate tail calls when dynamic linking on ppc64le
    
    When a wrapper method calls the real implementation, it's not possible to use a
    tail call when dynamic linking on ppc64le. The bad scenario is when a local
    call is made to the wrapper: the wrapper will call the implementation, which
    might be in a different module and so set the TOC to the appropriate value for
    that module. But if it returns directly to the wrapper's caller, nothing will
    reset it to the correct value for that function.
    
    Change-Id: Icebf24c9a2a0a9a7c2bce6bd6f1358657284fb10
    Reviewed-on: https://go-review.googlesource.com/23468
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 068c745e1e44875c411de5d5aea3f96574fbee12
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Jun 2 08:53:11 2016 +0900

    vendor: update vendored route
    
    Updates golang.org/x/net/route to rev fac978c for:
    - route: fix typos in test
    
    Change-Id: I35de1d3f8e887c6bb5fe50e7299f2fc12e4426de
    Reviewed-on: https://go-review.googlesource.com/23660
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3c6b6684ce21c1092ba208a0f1744ad7c930248a
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu Jun 2 10:00:23 2016 +1000

    api: promote next.txt to go1.7.txt and update api tool
    
    Change-Id: Idb348be00f949da553aa6aab62836f59dfee298d
    Reviewed-on: https://go-review.googlesource.com/23671
    Reviewed-by: Chris Broadfoot <cbro@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>

commit 36358b16062fb419a4c78b3f03b24106cb057222
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu Jun 2 09:59:06 2016 +1000

    api: remove os.File.Size and http.Transport.Dialer
    
    This method and field were added and then later removed during the 1.7
    development cycle.
    
    Change-Id: I0482a6356b91d2be67880b44ef5d8a1daab49ec8
    Reviewed-on: https://go-review.googlesource.com/23670
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit d7ae8b3c11b027721f0878caac0620ccb7f81048
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu Jun 2 09:24:43 2016 +1000

    api: update next.txt
    
    Change-Id: I04da6a56382d3bd96e3c849a022618553039b2db
    Reviewed-on: https://go-review.googlesource.com/23651
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 2a8c81ffaadc69add6ff85b241691adb7f9f24ff
Author: Adam Langley <agl@golang.org>
Date:   Wed Jun 1 14:41:09 2016 -0700

    crypto/tls: buffer handshake messages.
    
    This change causes TLS handshake messages to be buffered and written in
    a single Write to the underlying net.Conn.
    
    There are two reasons to want to do this:
    
    Firstly, it's slightly preferable to do this in order to save sending
    several, small packets over the network where a single one will do.
    
    Secondly, since 37c28759ca46cf381a466e32168a793165d9c9e9 errors from
    Write have been returned from a handshake. This means that, if a peer
    closes the connection during a handshake, a “broken pipe” error may
    result from tls.Conn.Handshake(). This can mask any, more detailed,
    fatal alerts that the peer may have sent because a read will never
    happen.
    
    Buffering handshake messages means that the peer will not receive, and
    possibly reject, any of a flow while it's still being written.
    
    Fixes #15709
    
    Change-Id: I38dcff1abecc06e52b2de647ea98713ce0fb9a21
    Reviewed-on: https://go-review.googlesource.com/23609
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f6c0241999bffe0fe52e8b7f5bbcc8f9e02edbdf
Author: Tom Bergan <tombergan@google.com>
Date:   Fri May 27 16:53:13 2016 -0700

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 6bdd4be4 for CL 23526:
    
      http2: GotFirstResponseByte hook should only fire once
    
    Also updated the trace hooks test to verify that all trace hooks are called
    exactly once except ConnectStart/End, which may be called multiple times (due
    to happy-eyeballs).
    
    Fixes #15777
    
    Change-Id: Iea5c64eb322b58be27f9ff863b3a6f90e996fa9b
    Reviewed-on: https://go-review.googlesource.com/23527
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit d0c1888739ac0d5d0c9f82a4b86945c0351caef6
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu Jun 2 08:11:01 2016 +1000

    doc: revert copyright date to 2009
    
    Somehow this date was changed in error (by me) to 2012.
    It should have always been 2009.
    
    Change-Id: I87029079458d4c4eeeff2f2fc0574f10afa9af09
    Reviewed-on: https://go-review.googlesource.com/23622
    Reviewed-by: Rob Pike <r@golang.org>

commit 6de014b9e2a655e093c2e3b5617a90b97d66c152
Author: Elias Naur <elias.naur@gmail.com>
Date:   Wed Jun 1 20:58:02 2016 +0200

    misc/cgo/test,cmd/dist: enable (most) Cgo tests on Android
    
    Some tests cannot build for Android; use build tags and stubs to
    skip them.
    
    For #15919
    
    Change-Id: Ieedcb73d4cabe23c3775cfb1d44c1276982dccd9
    Reviewed-on: https://go-review.googlesource.com/23634
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit bbd1dcdf7da68a3759a2d86f851391c1ec974f77
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Jun 1 13:46:49 2016 -0700

    cmd/compile: correctly export underlying type of predecl. error type
    
    Fixes #15920.
    
    Change-Id: I78cd79b91a58d0f7218b80f9445417f4ee071a6e
    Reviewed-on: https://go-review.googlesource.com/23606
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5db44c17a2391bbdfbc3c04e83e66025ca5dea3d
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Wed Jun 1 19:16:56 2016 +0200

    math/big: avoid panic in float.Text with negative prec
    
    Fixes #15918
    
    Change-Id: I4b434aed262960a2e6c659d4c2296fbf662c3a52
    Reviewed-on: https://go-review.googlesource.com/23633
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 77026ef902d3fa21597400d230701979bc1f0efc
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun May 22 02:20:11 2016 -0700

    runtime: document heap scavenger memory summary
    
    Fixes #15212.
    
    Change-Id: I2628ec8333330721cddc5145af1ffda6f3e0c63f
    Reviewed-on: https://go-review.googlesource.com/23319
    Reviewed-by: Austin Clements <austin@google.com>

commit bc4fdfdbfe6b971fcceaf4d75514a882917df10d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jun 1 09:31:31 2016 -0700

    os/signal: deflake TestReset/TestIgnore
    
    Fixes #15661.
    
    Change-Id: Ic3a8296fc7107f491880900ef52563e52caca1a3
    Reviewed-on: https://go-review.googlesource.com/23615
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 52fe47247217f5126dacc5a8c8e80b85d2fb25c6
Author: Keith Randall <khr@golang.org>
Date:   Tue May 31 14:55:12 2016 -0700

    cmd/compile: for arm, zero unaligned memory 1 byte at a time
    
    If memory might be unaligned, zero it one byte at a time
    instead of 4 bytes at a time.
    
    Fixes #15902
    
    Change-Id: I4eff0840e042e2f137c1a4028f08793eb7dfd703
    Reviewed-on: https://go-review.googlesource.com/23587
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit e29e0ba19af26c30c95b59aeda482e60ae594113
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Jun 1 15:13:55 2016 +0200

    cmd/compile: fix TestAssembly on Plan 9
    
    Since CL 23620, TestAssembly is failing on Plan 9.
    
    In CL 23620, the process environment is passed to 'go tool compile'
    after setting GOARCH. On Plan 9, if GOARCH is already set in the
    process environment, it would take precedence. On Unix, it works
    as expected because the first GOARCH found takes precedence.
    
    This change uses the mergeEnvLists function from cmd/go/main.go
    to merge the two environment lists such that variables with the
    same name in "in" replace those in "out".
    
    Change-Id: Idee22058343932ee18666dda331c562c89c33507
    Reviewed-on: https://go-review.googlesource.com/23593
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bd2dc2d819b85beb8887466a165242e2d540e4b9
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Wed Jun 1 09:44:38 2016 -0300

    doc: rename Unshare to Unshareflags in go1.7 release notes
    
    Implementation changed in https://golang.org/cl/23612.
    
    Updates #15810
    
    Change-Id: I8fff9e3aa3e54162546bb9ec1cc2ebba2b6d9fed
    Reviewed-on: https://go-review.googlesource.com/23614
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ad074e205e4aa4c7762e223df65695d5157b0c4e
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Thu May 26 11:46:19 2016 +0200

    regexp: use Run for benchmark
    
    Change-Id: I4d19e3221d3789d4c460b421b2d1484253778068
    Reviewed-on: https://go-review.googlesource.com/23429
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>

commit 88ae6495d086ed5b0acb94d5adc49434ec47a675
Author: Alexander Morozov <lk4d4math@gmail.com>
Date:   Tue May 31 19:44:48 2016 -0700

    syscall: rename SysProcAttr.Unshare to Unshareflags
    
    For symmetry with Cloneflags and it looks slightly weird because there
    is syscall.Unshare method.
    
    Change-Id: I3d710177ca8f27c05b344407f212cbbe3435094b
    Reviewed-on: https://go-review.googlesource.com/23612
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 2885e07c259ffda336d6965fcca03b4df617d812
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Wed Jun 1 13:32:53 2016 +1200

    cmd/compile: pass process env to 'go tool compile' in compileToAsm
    
    In particular, this stops the test failing when GOROOT and GOROOT_FINAL are
    different.
    
    Change-Id: Ibf6cc0a173f1d965ee8aa31eee2698b223f1ceec
    Reviewed-on: https://go-review.googlesource.com/23620
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 04acd625d7a1044c8ca78464f6727276577ffb3d
Author: Kenny Grant <kennygrant@gmail.com>
Date:   Tue May 31 22:30:37 2016 +0100

    context: fix typo in comments
    
    Change-Id: I41310ec88c889fda79d80eaf4a742a1000284f60
    Reviewed-on: https://go-review.googlesource.com/23591
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fe62a9ee872d4f61a47cc4e8c7bc0fb67cc4ebb6
Author: Robert Griesemer <gri@golang.org>
Date:   Fri May 27 19:47:55 2016 -0700

    crypto/tls: remove unused variable in benchmark code
    
    This fixes `go test go/types`.
    
    https://golang.org/cl/23487/ introduced this code which contains
    two unused variables (declared and assigned to, but never read).
    cmd/compile doesn't report the error due open issue #8560 (the
    variables are assigned to in a closure), but go/types does. The
    build bot only runs go/types tests in -short mode (which doesn't
    typecheck the std lib), hence this doesn't show up on the dashboard
    either.
    
    We cannot call b.Fatal and friends in the goroutine. Communicating
    the error to the invoking function requires a channel or a mutex.
    Unless the channel/sycnhronized variable is tested in each iteration
    that follows, the iteration blocks if there's a failure. Testing in
    each iteration may affect benchmark times.
    
    One could use a time-out but that time depends on the underlying system.
    Panicking seems good enough in this unlikely case; better than hanging
    or affecting benchmark times.
    
    Change-Id: Idce1172da8058e580fa3b3e398825b0eb4316325
    Reviewed-on: https://go-review.googlesource.com/23528
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e106122200032cdf4f0a993cdd89c7531aaf8d75
Author: Keith Randall <khr@golang.org>
Date:   Tue May 31 13:48:29 2016 -0700

    cmd/compile: test non-constant shifts
    
    Test all the weird shifts, like int8 shifted right by uint16.
    Increases coverage for shift lowerings in AMD64.rules.
    
    Change-Id: I066fe6ad6bfc05253a8d6a2ee17ff244d3a7652e
    Reviewed-on: https://go-review.googlesource.com/23585
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 3d81d4adc9419e2fcba5888ab074d3f17eb5eb03
Author: Robert Griesemer <gri@golang.org>
Date:   Tue May 31 13:32:34 2016 -0700

    spec: document that duplicate types are invalid in type switches
    
    Both compilers and also go/types don't permit duplicate types in
    type switches; i.e., this spec change is documenting a status quo
    that has existed for some time.
    
    Furthermore, duplicate nils are not accepted by gccgo or go/types;
    and more recently started causing a compiler error in gc. Permitting
    them is inconsistent with the existing status quo.
    
    Rather than making it an implementation restriction (as we have for
    expression switches), this is a hard requirement since it was enforced
    from the beginning (except for duplicate nils); it is also a well
    specified requirement that does not pose a significant burden for
    an implementation.
    
    Fixes #15896.
    
    Change-Id: If12db5bafa87598b323ea84418cb05421e657dd8
    Reviewed-on: https://go-review.googlesource.com/23584
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3659645cb1f32d7b1eeefdb65f1339fe54f0f6eb
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue May 31 11:23:50 2016 -0700

    flag: recognize "0s" as the zero value for a flag.Duration
    
    Implemented by using a reflect-based approach to recognize the zero
    value of any non-interface type that implements flag.Value.  Interface
    types will fall back to the old code.
    
    Fixes #15904.
    
    Change-Id: I594c3bfb30e9ab1aca3e008ef7f70be20aa41a0b
    Reviewed-on: https://go-review.googlesource.com/23581
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 8003e791549f011edcc2a9d1eacbd5674826d38c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue May 31 15:01:05 2016 -0700

    test: add more switch error handling tests
    
    Some of these errors are reported in the wrong places.
    That’s issue #15911 and #15912.
    
    Change-Id: Ia09d7f89be4d15f05217a542a61b6ac08090dd87
    Reviewed-on: https://go-review.googlesource.com/23588
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1846c632ee37681eb92fb27f7071a58bdf6d7a3c
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue May 31 20:48:42 2016 +1200

    cmd/go: combine gccgo's ld and ldShared methods
    
    This fixes handling of cgo flags and makes sure packages that are only
    implicitly included in the shared library are passed to the link.
    
    Fixes #15885
    
    Change-Id: I1e8a72b5314261973ca903c78834700fb113dde9
    Reviewed-on: https://go-review.googlesource.com/23537
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 690de51ffac1473820212c88a11685b40f7bde3b
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue May 31 14:07:38 2016 -0700

    runtime: fix restoring PC in ARM version of cgocallback_gofunc
    
    Fixes #15856.
    
    Change-Id: Ia8def161642087e4bd92a87298c77a0f9f83dc86
    Reviewed-on: https://go-review.googlesource.com/23586
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 3d037cfaf8c70b8af87cb5d57553a7e3e9dc2117
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri May 27 10:05:52 2016 -0700

    runtime: pass signal context to cgo traceback function
    
    When doing a backtrace from a signal that occurs in C code compiled
    without using -fasynchronous-unwind-tables, we have to rely on frame
    pointers. In order to do that, the traceback function needs the signal
    context to reliably pick up the frame pointer.
    
    Change-Id: I7b45930fced01685c337d108e0f146057928f876
    Reviewed-on: https://go-review.googlesource.com/23494
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c52dff0727c58cb7a6e768d91d15e3eaafcb420a
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue May 31 12:42:34 2016 -0700

    doc/go1.7.html: make RFC an actual link
    
    Change-Id: I5e8dad0c2534b5c3654cf0a0b51a38186d627a3c
    Reviewed-on: https://go-review.googlesource.com/23582
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2256e38978a38a954df72ab50423c1883f1063d7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri May 27 14:33:23 2016 -0700

    runtime: update pprof binary header URL
    
    The code has moved from code.google.com to github.com.
    
    Change-Id: I0cc9eb69b3fedc9e916417bc7695759632f2391f
    Reviewed-on: https://go-review.googlesource.com/23523
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 2c1791b13b27dfc69adf2d19ecf9a180d089cd22
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue May 31 19:24:30 2016 +1200

    cmd/link: suppress PIE whenever externally linking with a sanitizer
    
    golang.org/issue/15443 complained that a race-enabled PIE binary crashed at
    startup, but other ways of linking in tsan (or other sanitizers) such as
    
     #cgo CFLAGS: -fsanitize=thread
     #cgo LDFLAGS: -fsanitize=thread
    
    have the same problem. Pass -no-pie to the host linker (if supported) if any
    -fsanitizer=foo cgo LDFLAG is seen when linking.
    
    Fixes #15887
    
    Change-Id: Id799770f8d045f6f40fa8c463563937a5748d1a8
    Reviewed-on: https://go-review.googlesource.com/23535
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2a6544b604b61898d666ffbe456ccde720c04577
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue May 31 20:05:39 2016 +1200

    cmd/go, cmd/link: set LC_ALL=C when checking if host compiler supports -no-pie
    
    Fixes #15900
    
    Change-Id: Ieada5f4e3b3b2ae358414e013f3090b4b820569b
    Reviewed-on: https://go-review.googlesource.com/23536
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 66736880ca2e50fc7c5428a171fbbe6d344a853b
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu May 26 17:47:03 2016 -0700

    runtime/cgo: add TSAN acquire/release calls
    
    Add TSAN acquire/release calls to runtime/cgo to match the ones
    generated by cgo.  This avoids a false positive race around the malloc
    memory used in runtime/cgo when other goroutines are simultaneously
    calling malloc and free from cgo.
    
    These new calls will only be used when building with CGO_CFLAGS and
    CGO_LDFLAGS set to -fsanitize=thread, which becomes a requirement to
    avoid all false positives when using TSAN.  These are needed not just
    for runtime/cgo, but also for any runtime package that uses cgo (such as
    net and os/user).
    
    Add an unused attribute to the _cgo_tsan_acquire and _cgo_tsan_release
    functions, in case there are no actual cgo function calls.
    
    Add a test that checks that setting CGO_CFLAGS/CGO_LDFLAGS avoids a
    false positive report when using os/user.
    
    Change-Id: I0905c644ff7f003b6718aac782393fa219514c48
    Reviewed-on: https://go-review.googlesource.com/23492
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 0e13dbc1a91cbe00e3c83a55f56db69380fe8f68
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 30 16:42:38 2016 -0700

    cmd/compile: disallow multiple nil cases in a type switch
    
    Fixes #15898.
    
    Change-Id: I66e2ad21f283563c7142aa820f0354711d964768
    Reviewed-on: https://go-review.googlesource.com/23573
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7cd6cae6a63f09caa88bbcc394053b40cdeeccd1
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sun May 29 00:47:45 2016 -0700

    compress/flate: use seperate const block for exported constants
    
    As rendered on https://tip.golang.org/pkg/compress/flate/, there is an
    extra new-line because of the unexported constants in the same block.
    
    <<<
    const (
        NoCompression      = 0
        BestSpeed          = 1
        BestCompression    = 9
        DefaultCompression = -1
        HuffmanOnly        = -2 // Disables match search and only does Huffman entropy reduction.
    
    )
    >>>
    
    Instead, seperate the exported compression level constants into its own
    const block. This is both more readable and also fixes the issue.
    
    Change-Id: I60b7966c83fb53356c02e4640d05f55a3bee35b7
    Reviewed-on: https://go-review.googlesource.com/23557
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4223294eab3dee0f6c03fd57fc24be3dc3e2d53a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri May 27 16:03:44 2016 -0700

    runtime/pprof, cmd/pprof: fix profiling for PIE
    
    In order to support pprof for position independent executables, pprof
    needs to adjust the PC addresses stored in the profile by the address at
    which the program is loaded. The legacy profiling support which we use
    already supports recording the GNU/Linux /proc/self/maps data
    immediately after the CPU samples, so do that. Also change the pprof
    symbolizer to use the information, if available, when looking up
    addresses in the Go pcline data.
    
    Fixes #15714.
    
    Change-Id: I4bf679210ef7c51d85cf873c968ce82db8898e3e
    Reviewed-on: https://go-review.googlesource.com/23525
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 87ee12cece96ec5837fe89c37899d725e7e852d9
Author: Andrew Gerrand <adg@golang.org>
Date:   Tue May 31 13:21:35 2016 +1000

    crypto/tls: reduce size of buffer in throughput benchmarks
    
    The Windows builders run the throughput benchmarks really slowly with a
    64kb buffer. Lowering it to 16kb brings the performance back into line
    with the other builders.
    
    This is a work-around to get the build green until we can figure out why
    the Windows builders are slow with the larger buffer size.
    
    Update #15899
    
    Change-Id: I215ebf115e8295295c87f3b3e22a4ef1f9e77f81
    Reviewed-on: https://go-review.googlesource.com/23574
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8e6e9e83818596048cfca1e121ad39b9b007ba28
Author: Richard Miller <miller.research@gmail.com>
Date:   Sat May 28 10:06:37 2016 +0100

    syscall: plan9 - mark gbit16 as go:nosplit
    
    This is a correction to CL 22610.  The gbit16 function is called in
    StartProcess between fork and exec, and therefore must not split the
    stack.  Normally it's inlined so this is not an issue, but on one
    occasion I've observed it to be compiled without inlining, and the
    result was a panic.  Mark it go:nosplit to be safe.
    
    Change-Id: I0381754397b766431bf406d9767c73598d23b901
    Reviewed-on: https://go-review.googlesource.com/23560
    Reviewed-by: David du Colombier <0intro@gmail.com>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b3f98d7a42d04f6f173cd61ce3fe2106e4877496
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon May 30 15:17:14 2016 +1000

    sync: document that RWMutex read locks may not be held recursively
    
    Fixes #15418
    
    Change-Id: Ibc51d602eb28819d0e44e5ca13a5c61573e4111c
    Reviewed-on: https://go-review.googlesource.com/23570
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit d2c92f8453cab8d042b794c8ce398f6ff8e6f650
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 30 12:57:20 2016 -0700

    path/filepath: prevent infinite recursion on Windows on UNC input
    
    This is a minimal fix to prevent this and
    other possible future infinite recursion.
    We can put in a proper fix for UNC in Go 1.8.
    
    Updates #15879
    
    Change-Id: I3653cf5891bab8511adf66fa3c1a1d8912d1a293
    Reviewed-on: https://go-review.googlesource.com/23572
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 81a8f1a7946c28eaa9c187b7aaa349020b7a9ba4
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon May 30 15:17:14 2016 +1000

    doc: remove remnant mention of io.SizedReaderAt from Go 1.7 docs
    
    Updates #15810
    
    Change-Id: I37f14a0ed1f5ac24ea2169a7e65c0469bfddd928
    Reviewed-on: https://go-review.googlesource.com/23559
    Reviewed-by: Michael McGreevy <mcgreevy@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit dc5b5239e8020ca0b366ba02f99fe87728fa290c
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat May 28 03:06:33 2016 +0900

    net: don't call forceCloseSockets in non-TestMain functions
    
    forceCloseSockets is just designed as a kingston valve for TestMain
    function and is not suitable to keep track of inflight sockets.
    
    Fixes #15525.
    
    Change-Id: Id967fe5b8da99bb08b699cc45e07bbc3dfc3ae3d
    Reviewed-on: https://go-review.googlesource.com/23505
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4e01c132d03ee1f862ae8ba9db465d6047f950f2
Author: Augusto Roman <aroman@gmail.com>
Date:   Sat May 28 16:59:28 2016 -0700

    doc: correct release notes for non-string map keys in encoding/json
    
    The original draft mentioned support for json.Marshaler, but that's
    not the case.  JSON supports only string keys (not arbitrary JSON)
    so only encoding.TextMarshaller is supported.
    
    Change-Id: I7788fc23ac357da88e92aa0ca17b513260840cee
    Reviewed-on: https://go-review.googlesource.com/23529
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 17396575135ba71472ab8a5b82f31af50d8bf312
Author: Keith Randall <khr@golang.org>
Date:   Sat May 28 21:15:24 2016 -0700

    cmd/compile: shift tests, fix triple-shift rules
    
    Add a bunch of tests for shifts.
    
    Fix triple-shift rules to always take constant shifts as 64 bits.
    (Earlier rules always promote shift amounts to 64 bits.)
    Add overflow checks.
    
    Increases generic rule coverage to 91%
    
    Change-Id: I6b42d368d19d36ac482dbb8e0d4f67e30ad7145d
    Reviewed-on: https://go-review.googlesource.com/23555
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 79f7ccf2c3931745aeb97c5c985b6ac7b44befb4
Author: Keith Randall <khr@golang.org>
Date:   Sat May 28 21:59:17 2016 -0700

    cmd/compile: add constant fold comparison tests
    
    Increases generic.rules coverage from 91% to 95%.
    
    Change-Id: I981eb94f3cd10d2f87c836576a43786787a25d83
    Reviewed-on: https://go-review.googlesource.com/23556
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit b859a78e0a71d769274dac8cf0108bdf41ec55a5
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat May 28 02:14:25 2016 -0700

    io: use SeekStart, SeekCurrent, and SeekEnd in io.Seeker documentation
    
    The documentation previously used C style enumerations: 0, 1, 2.
    While this is pretty much universally correct, it does not help a user
    become aware of the existence of the SeekStart, SeekCurrent, and SeekEnd
    constants. Thus, we should use them in the documentation to direct people's
    attention to them.
    
    Updates #6885
    
    Change-Id: I44b5e78d41601c68a0a1c96428c853df53981d52
    Reviewed-on: https://go-review.googlesource.com/23551
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 4969b46a316888950bd1910d7ef123883ab6c9f3
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat May 28 02:40:32 2016 -0700

    doc/go1.7.html: update documentation regarding compress/flate
    
    Document the following:
    * That the algorithmic changes are still compliant with RFC 1951. I remember
    people having questions regarding this issue, and it would be good to re-assure
    them that it is still standards compliant.
    * io.EOF can now be returned early (c27efce66bce7534dbb357ac1779bbc08395b267)
    * Use the term "decompress" when referred to as an action. The term "uncompressed"
    or "decompressed" are both valid as ways to represent the current state of the data.
    
    Change-Id: Ie29ebce709357359e7c36d3e7f3d53b260eaadfa
    Reviewed-on: https://go-review.googlesource.com/23552
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 24996832c68b9d0aa4cd0e51189d148aae7a2772
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sat May 28 02:33:23 2016 -0600

    net/http/httputil: fix typos in deprecation comments
    
    Fixes #15868
    
    Change-Id: I4e4471e77091309c4ea1d546b2c4f20dfbb4314e
    Reviewed-on: https://go-review.googlesource.com/23550
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 795809b5c7d7e281e392399b9a366cbe92aa9e98
Author: Robert Griesemer <gri@golang.org>
Date:   Mon May 23 17:43:09 2016 -0700

    go/types: better debugging output for init order computation
    
    Also: Added some test cases for issue #10709.
    No impact when debugging output is disabled (default).
    
    For #10709.
    
    Change-Id: I0751befb222c86d46225377a674f6bad2990349e
    Reviewed-on: https://go-review.googlesource.com/23442
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 429bbf331247ef598802a94a23670bfe1cf61d6f
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Wed May 25 16:33:19 2016 +0300

    strings: fix and reenable amd64 Index for 17-31 byte strings
    
    Fixes #15689
    
    Change-Id: I56d0103738cc35cd5bc5e77a0e0341c0dd55530e
    Reviewed-on: https://go-review.googlesource.com/23440
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit 42da35c699853002b7695052a8eeb3f10019cfd5
Author: Keith Randall <khr@golang.org>
Date:   Fri May 27 14:07:37 2016 -0700

    cmd/compile: SSA, don't let write barrier clobber return values
    
    When we do *p = f(), we might need to copy the return value from
    f to p with a write barrier.  The write barrier itself is a call,
    so we need to copy the return value of f to a temporary location
    before we call the write barrier function.  Otherwise, the call
    itself (specifically, marshalling the args to typedmemmove) will
    clobber the value we're trying to write.
    
    Fixes #15854
    
    Change-Id: I5703da87634d91a9884e3ec098d7b3af713462e7
    Reviewed-on: https://go-review.googlesource.com/23522
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3a6a41868eb620912235f2dd3f9738c76035e731
Author: Russ Cox <rsc@golang.org>
Date:   Fri May 27 16:30:03 2016 -0400

    doc: mention frame pointers in Go 1.7 release notes
    
    For #15840.
    
    Change-Id: I2ecf5c7b00afc2034cf3d7a1fd78636a908beb67
    Reviewed-on: https://go-review.googlesource.com/23517
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 496cf215cf7f36c2b1b14c00aadccf3e16f67eae
Author: Austin Clements <austin@google.com>
Date:   Fri May 27 14:25:16 2016 -0400

    crypto/tls: gofmt
    
    Commit fa3543e introduced formatting errors.
    
    Change-Id: I4b921f391a9b463cefca4318ad63b70ae6ce6865
    Reviewed-on: https://go-review.googlesource.com/23514
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit e149624ebb00a2fcc59bc02b9f122e3c4bae6e9c
Author: Austin Clements <austin@google.com>
Date:   Fri May 27 14:24:26 2016 -0400

    cmd/compile/internal/gc: gofmt
    
    Commit 36a80c5 introduced formatting errors.
    
    Change-Id: I6d5b231200cd7abcd5b94c1a3f4e99f10ee11c4f
    Reviewed-on: https://go-review.googlesource.com/23513
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 53af0d3476e3c5f5b71f0c5fcf2141c24cc102b2
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat May 28 03:20:11 2016 +0900

    crypto/tls: fix race in Benchmark{Throughput,Latency}
    
    Fixes #15864.
    
    Change-Id: Ic12aa3654bf0b7e4a26df20ea92d07d7efe7339c
    Reviewed-on: https://go-review.googlesource.com/23504
    Reviewed-by: David Chase <drchase@google.com>

commit b0b2f7d6dda2b01a06a1dd99b87c97c81934c184
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri May 27 17:35:45 2016 +0900

    net/http/httptrace: fix nit in test
    
    Change-Id: I6dc3666398b4cd7a7195bb9c0e321fa8b733fa15
    Reviewed-on: https://go-review.googlesource.com/23502
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c340f4867b61d0c9dab167df88f56efc4ed7f17b
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri May 27 17:34:22 2016 +0900

    runtime: skip TestGdbBacktrace on netbsd
    
    Also adds missing copyright notice.
    
    Updates #15603.
    
    Change-Id: Icf4bb45ba5edec891491fe5f0039a8a25125d168
    Reviewed-on: https://go-review.googlesource.com/23501
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6a86dbe75f6d5a135eefbae807d98e856136514f
Author: Austin Clements <austin@google.com>
Date:   Fri May 27 12:21:14 2016 -0400

    runtime: always call stackfree on the system stack
    
    Currently when the garbage collector frees stacks of dead goroutines
    in markrootFreeGStacks, it calls stackfree on a regular user stack.
    This is a problem, since stackfree manipulates the stack cache in the
    per-P mcache, so if it grows the stack or gets preempted in the middle
    of manipulating the stack cache (which are both possible since it's on
    a user stack), it can easily corrupt the stack cache.
    
    Fix this by calling markrootFreeGStacks on the system stack, so that
    all calls to stackfree happen on the system stack. To prevent this bug
    in the future, mark stack functions that manipulate the mcache as
    go:systemstack.
    
    Fixes #15853.
    
    Change-Id: Ic0d1c181efb342f134285a152560c3a074f14a3d
    Reviewed-on: https://go-review.googlesource.com/23511
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 966baedfea6b09fa203b0cf0e6388830cc9f9fa7
Author: Austin Clements <austin@google.com>
Date:   Thu May 26 11:05:01 2016 -0400

    runtime: record Python stack on TestGdbPython failure
    
    For #15599.
    
    Change-Id: Icc2e58a3f314b7a098d78fe164ba36f5b2897de6
    Reviewed-on: https://go-review.googlesource.com/23481
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fa3543e33782fd90e0a8f36366d9889d39a7575e
Author: Russ Cox <rsc@golang.org>
Date:   Fri May 27 09:50:06 2016 -0400

    crypto/tls: adjust dynamic record sizes to grow arithmetically
    
    The current code, introduced after Go 1.6 to improve latency on
    low-bandwidth connections, sends 1 kB packets until 1 MB has been sent,
    and then sends 16 kB packets (the maximum record size).
    
    Unfortunately this decreases throughput for 1-16 MB responses by 20% or so.
    
    Following discussion on #15713, change cutoff to 128 kB sent
    and also grow the size allowed for successive packets:
    1 kB, 2 kB, 3 kB, ..., 15 kB, 16 kB.
    This fixes the throughput problems: the overhead is now closer to 2%.
    
    I hope this still helps with latency but I don't have a great way to test it.
    At the least, it's not worse than Go 1.6.
    
    Comparing MaxPacket vs DynamicPacket benchmarks:
    
    name              maxpkt time/op  dyn. time/op delta
    Throughput/1MB-8    5.07ms ± 7%   5.21ms ± 7%  +2.73%  (p=0.023 n=16+16)
    Throughput/2MB-8   15.7ms ±201%    8.4ms ± 5%    ~     (p=0.604 n=20+16)
    Throughput/4MB-8    14.3ms ± 1%   14.5ms ± 1%  +1.53%  (p=0.000 n=16+16)
    Throughput/8MB-8    26.6ms ± 1%   26.8ms ± 1%  +0.47%  (p=0.003 n=19+18)
    Throughput/16MB-8   51.0ms ± 1%   51.3ms ± 1%  +0.47%  (p=0.000 n=20+20)
    Throughput/32MB-8    100ms ± 1%    100ms ± 1%  +0.24%  (p=0.033 n=20+20)
    Throughput/64MB-8    197ms ± 0%    198ms ± 0%  +0.56%   (p=0.000 n=18+7)
    
    The small MB runs are bimodal in both cases, probably GC pauses.
    But there's clearly no general slowdown anymore.
    
    Fixes #15713.
    
    Change-Id: I5fc44680ba71812d24baac142bceee0e23f2e382
    Reviewed-on: https://go-review.googlesource.com/23487
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 52c2db7e6d68b68938d904864ee484e7b5dd5d52
Author: Russ Cox <rsc@golang.org>
Date:   Fri May 27 12:15:04 2016 -0400

    doc/go1.7.html: fix broken sentence
    
    Change-Id: Ia540c890767dcb001d3b3b55d98d9517b13b21da
    Reviewed-on: https://go-review.googlesource.com/23510
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 605e751b53a8bec7d1f51b2ccc0093e063358dc6
Author: Russ Cox <rsc@golang.org>
Date:   Fri May 27 11:05:14 2016 -0400

    net/http: change Transport.Dialer to Transport.DialContext
    
    New in Go 1.7 so still possible to change.
    This allows implementations not tied to *net.Dialer.
    
    Fixes #15748.
    
    Change-Id: I5fabbf13c7f1951c06587a4ccd120def488267ce
    Reviewed-on: https://go-review.googlesource.com/23489
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 36a80c5941ec36d9c44d6f3c068d13201e023b5f
Author: Russ Cox <rsc@golang.org>
Date:   Fri May 27 00:56:19 2016 -0400

    cmd/compile: clean up, document Node closure fields
    
    Requested during CL 23431.
    
    Change-Id: I513ae42166b3a9fcfe51231ff55c163ab672e7d2
    Reviewed-on: https://go-review.googlesource.com/23485
    Reviewed-by: David Chase <drchase@google.com>

commit 93369001c76e01b2fe8b0d8a5074d62d0b8fdc81
Author: Russ Cox <rsc@golang.org>
Date:   Thu May 26 23:43:19 2016 -0400

    cmd/compile: delete Func.Outer
    
    This was just storage for a linked list.
    
    Change-Id: I850e8db1e1f5e72410f5c904be9409179b56a94a
    Reviewed-on: https://go-review.googlesource.com/23484
    Reviewed-by: David Chase <drchase@google.com>

commit cedc7c8f2091129514276c3c2f5f046f523a4684
Author: Russ Cox <rsc@golang.org>
Date:   Fri May 27 10:58:00 2016 -0400

    doc/go1.7.html: incorporate Rob's comments from CL 23379
    
    For #15810.
    
    Change-Id: Ib529808f664392feb9b36770f3d3d875fcb54528
    Reviewed-on: https://go-review.googlesource.com/23488
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 65dd08197ece4f64b990aa0023286c8f6abc25fa
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Fri May 27 02:31:59 2016 -0600

    doc/go1.7: document signal name printing during panics
    
    Document new behavior about signal name printing
    in panics as per CL golang.org/cl/22753.
    
    For #15810
    
    Change-Id: I9c677d5dd779b41e82afa25e3c797d8e739600d3
    Reviewed-on: https://go-review.googlesource.com/23493
    Reviewed-by: Russ Cox <rsc@golang.org>

commit dec1bae916fc75a6718fb7fa667e419cc902097a
Author: Russ Cox <rsc@golang.org>
Date:   Wed May 25 10:01:58 2016 -0400

    cmd/compile: additional paranoia and checking in plive.go
    
    The main check here is that liveness now crashes if it finds an instruction
    using a variable that should be tracked but is not.
    
    Comments and adjustments in nodarg to explain what's going on and
    to remove the "-1" argument added a few months ago, plus a sketch
    of a future simplification.
    
    The need for n.Orig in the earlier CL seems to have been an intermediate
    problem rather than fundamental: the new explanations in nodarg make
    clear that nodarg is not causing the problem I thought, and in fact now
    using n instead of n.Orig works fine in plive.go.
    
    Change-Id: I3f5cf9f6e4438a6d27abac7d490e7521545cd552
    Reviewed-on: https://go-review.googlesource.com/23450
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit e9228dd9490c3d4827170abeb8c82e68c175ecf0
Author: Dmitri Shuralyov <shurcooL@gmail.com>
Date:   Wed May 25 23:22:11 2016 -0700

    cmd/go: fixup for parsing SCP-like addresses
    
    This is a fixup change for commit 5cd294480364eb166751838a3df8f58649c214e1
    that added parsing of SCP-like addresses. To get the expected output
    from (*url.URL).String(), Path needs to be set, not RawPath.
    
    Add a test for this, since it has already regressed multiple times.
    
    Updates #11457.
    
    Change-Id: I806f5abbd3cf65e5bdcef01aab872caa8a5b8891
    Reviewed-on: https://go-review.googlesource.com/23447
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 20803b845f26111eb9281f8ece98383d48ea1b3f
Author: Russ Cox <rsc@golang.org>
Date:   Wed May 25 10:29:50 2016 -0400

    cmd/compile: eliminate PPARAMREF
    
    As in the elimination of PHEAP|PPARAM in CL 23393,
    this is something the front end can trivially take care of
    and then not bother the back ends with.
    It also eliminates some suspect (and only lightly exercised)
    code paths in the back ends.
    
    I don't have a smoking gun for this one but it seems
    more clearly correct.
    
    Change-Id: I3b3f5e669b3b81d091ff1e2fb13226a6f14c69d5
    Reviewed-on: https://go-review.googlesource.com/23431
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit b6dc3e6f668e4e0a2d2f710a7604d163d8ca45e1
Author: Russ Cox <rsc@golang.org>
Date:   Wed May 25 01:33:24 2016 -0400

    cmd/compile: fix liveness computation for heap-escaped parameters
    
    The liveness computation of parameters generally was never
    correct, but forcing all parameters to be live throughout the
    function covered up that problem. The new SSA back end is
    too clever: even though it currently keeps the parameter values live
    throughout the function, it may find optimizations that mean
    the current values are not written back to the original parameter
    stack slots immediately or ever (for example if a parameter is set
    to nil, SSA constant propagation may replace all later uses of the
    parameter with a constant nil, eliminating the need to write the nil
    value back to the stack slot), so the liveness code must now
    track the actual operations on the stack slots, exposing these
    problems.
    
    One small problem in the handling of arguments is that nodarg
    can return ONAME PPARAM nodes with adjusted offsets, so that
    there are actually multiple *Node pointers for the same parameter
    in the instruction stream. This might be possible to correct, but
    not in this CL. For now, we fix this by using n.Orig instead of n
    when considering PPARAM and PPARAMOUT nodes.
    
    The major problem in the handling of arguments is general
    confusion in the liveness code about the meaning of PPARAM|PHEAP
    and PPARAMOUT|PHEAP nodes, especially as contrasted with PAUTO|PHEAP.
    The difference between these two is that when a local variable "moves"
    to the heap, it's really just allocated there to start with; in contrast,
    when an argument moves to the heap, the actual data has to be copied
    there from the stack at the beginning of the function, and when a
    result "moves" to the heap the value in the heap has to be copied
    back to the stack when the function returns
    This general confusion is also present in the SSA back end.
    
    The PHEAP bit worked decently when I first introduced it 7 years ago (!)
    in 391425ae. The back end did nothing sophisticated, and in particular
    there was no analysis at all: no escape analysis, no liveness analysis,
    and certainly no SSA back end. But the complications caused in the
    various downstream consumers suggest that this should be a detail
    kept mainly in the front end.
    
    This CL therefore eliminates both the PHEAP bit and even the idea of
    "heap variables" from the back ends.
    
    First, it replaces the PPARAM|PHEAP, PPARAMOUT|PHEAP, and PAUTO|PHEAP
    variable classes with the single PAUTOHEAP, a pseudo-class indicating
    a variable maintained on the heap and available by indirecting a
    local variable kept on the stack (a plain PAUTO).
    
    Second, walkexpr replaces all references to PAUTOHEAP variables
    with indirections of the corresponding PAUTO variable.
    The back ends and the liveness code now just see plain indirected
    variables. This may actually produce better code, but the real goal
    here is to eliminate these little-used and somewhat suspect code
    paths in the back end analyses.
    
    The OPARAM node type goes away too.
    
    A followup CL will do the same to PPARAMREF. I'm not sure that
    the back ends (SSA in particular) are handling those right either,
    and with the framework established in this CL that change is trivial
    and the result clearly more correct.
    
    Fixes #15747.
    
    Change-Id: I2770b1ce3cbc93981bfc7166be66a9da12013d74
    Reviewed-on: https://go-review.googlesource.com/23393
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 99d29d5a43da0efde2ed9a137627d0d310e3baad
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu May 19 15:58:40 2016 +1000

    path/filepath: fix globbing of c:\*dir\... pattern
    
    The problem was introduced by the recent filepath.Join change.
    
    Fixes #14949
    
    Change-Id: I7ee52f210e12bbb1369e308e584ddb2c7766e095
    Reviewed-on: https://go-review.googlesource.com/23240
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit b5d18b50ac591d41cb4aab522fa9044c61b2c1e7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed May 18 18:42:25 2016 -0700

    cmd/cgo: remove -O options when generating compiler errors
    
    The cgo tool generates compiler errors to find out what kind of name it
    is using.  Turning on optimization can confuse that process by producing
    new unexpected messages.
    
    Fixes #14669.
    
    Change-Id: Idc8e35fd259711ecc9638566b691c11d17140325
    Reviewed-on: https://go-review.googlesource.com/23231
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 9369f22b8444d4e4afd791273ae13121d2ec7a6d
Author: Keith Randall <khr@golang.org>
Date:   Tue May 24 14:09:02 2016 -0700

    cmd/compile: testing harness for checking generated assembly
    
    Add a test which compiles a function and checks the
    generated assembly to make sure certain patterns are present.
    This test allows us to do white box tests of the compiler
    to make sure optimizations don't regress.
    
    Added a few simple tests for now.  More to come.
    
    Change-Id: I4ab5ce5d95b9e04e7d0d9328ffae47b8d1f95e74
    Reviewed-on: https://go-review.googlesource.com/23403
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b1894bb5cc781f1c59af727cea07ba4e84181830
Author: Quentin Smith <quentin@golang.org>
Date:   Thu May 26 17:53:21 2016 -0400

    encoding/json: improve Decode example
    
    Decoding a JSON message does not touch unspecified or null fields;
    always use a new underlying struct to prevent old field values from
    sticking around.
    
    Fixes: #14640
    
    Change-Id: Ica78c208ce104e2cdee1d4e92bf58596ea5587c8
    Reviewed-on: https://go-review.googlesource.com/23483
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 02bf6b5ef93cdb981949e8164e4364a9d8424dc9
Author: Keith Randall <khr@golang.org>
Date:   Thu May 26 14:31:35 2016 -0700

    cmd/compile: add tests for logical simplification rewrite rules
    
    Increases coverage of generic.rules from 72% to 84%.
    
    Change-Id: I1b139aeeb6410d025d49cbe4e4601f6f935ce1e5
    Reviewed-on: https://go-review.googlesource.com/23490
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 0e930015c16b73dc9f98776b6624f02ea41d8268
Author: Keith Randall <khr@golang.org>
Date:   Tue May 24 15:43:25 2016 -0700

    cmd/compile: log rules to a file for rule coverage tool
    
    When rules are generated with -log, log rule application to a file.
    
    The file is opened in append mode so multiple calls to the compiler
    union their logs.
    
    Change-Id: Ib35c7c85bf58e5909ea9231043f8cbaa6bf278b7
    Reviewed-on: https://go-review.googlesource.com/23406
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 13a5b1faee06b59df456930d04edd2b5e083b019
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu May 26 12:16:53 2016 -0700

    cmd/compile: improve domorder documentation
    
    domorder has some non-obvious useful properties
    that we’re relying on in cse.
    Document them and provide an argument that they hold.
    While we’re here, do some minor renaming.
    
    The argument is a re-working of a private email
    exchange with Todd Neal and David Chase.
    
    Change-Id: Ie154e0521bde642f5f11e67fc542c5eb938258be
    Reviewed-on: https://go-review.googlesource.com/23449
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2deb9209dec81792156c8e865a409a4ee5c331f6
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Thu May 26 11:29:53 2016 +0200

    math/big: using Run for some more benchmarks
    
    Change-Id: I3ede8098f405de5d88e51c8370d3b68446d40744
    Reviewed-on: https://go-review.googlesource.com/23428
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit bfccf4071eb9401cb906b203659010f9422c524f
Author: Russ Cox <rsc@golang.org>
Date:   Thu May 26 15:02:55 2016 -0400

    cmd/dist: drop ppc64le from testcshared
    
    I'm glad my CL fixed the library use case inside Google.
    It fixes neither of the two tests here.
    
    Change-Id: Ica91722dced8955a0a8ba3aad3d288816b46564e
    Reviewed-on: https://go-review.googlesource.com/23482
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 7fdec6216c0a25c6dbcc8159b755da6682dd9080
Author: Russ Cox <rsc@golang.org>
Date:   Wed May 25 14:37:43 2016 -0400

    build: enable framepointer mode by default
    
    This has a minor performance cost, but far less than is being gained by SSA.
    As an experiment, enable it during the Go 1.7 beta.
    Having frame pointers on by default makes Linux's perf, Intel VTune,
    and other profilers much more useful, because it lets them gather a
    stack trace efficiently on profiling events.
    (It doesn't help us that much, since when we walk the stack we usually
    need to look up PC-specific information as well.)
    
    Fixes #15840.
    
    Change-Id: I4efd38412a0de4a9c87b1b6e5d11c301e63f1a2a
    Reviewed-on: https://go-review.googlesource.com/23451
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2168f2a68bb438996d14869ff7dd10a47cc0552c
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 25 17:29:56 2016 -0700

    math/big: simplify benchmarking code some more
    
    Follow-up cleanup to https://golang.org/cl/23424/ .
    
    Change-Id: Ifb05c1ff5327df6bc5f4cbc554e18363293f7960
    Reviewed-on: https://go-review.googlesource.com/23446
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>

commit 56e5e0b69c92c9157c7db39112e27a4b5c026b48
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed May 25 13:19:11 2016 -0400

    runtime: tell race detector about reflectOffs.lock
    
    Fixes #15832
    
    Change-Id: I6f3f45e3c21edd0e093ecb1d8a067907863478f5
    Reviewed-on: https://go-review.googlesource.com/23441
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 6247ca2dbbdc13d6c80666119d182e119a2e7a5b
Author: Russ Cox <rsc@golang.org>
Date:   Thu May 26 09:59:29 2016 -0400

    cmd/dist: drop testcarchive on ppc64le
    
    It is timing out on the dashboard.
    (We enabled it as an experiment to see if it was still broken. Looks that way.)
    
    Change-Id: I425b7e54a2ab95b623ab7a15554b4173078f75e2
    Reviewed-on: https://go-review.googlesource.com/23480
    Reviewed-by: Russ Cox <rsc@golang.org>

commit b92f4238790c590168e7dae03165d75deb89fe41
Author: Austin Clements <austin@google.com>
Date:   Wed May 25 20:56:56 2016 -0400

    runtime: unwind BP in jmpdefer to match SP unwind
    
    The irregular calling convention for defers currently incorrectly
    manages the BP if frame pointers are enabled. Specifically, jmpdefer
    manipulates the SP as if its own caller, deferreturn, had returned.
    However, it does not manipulate the BP to match. As a result, when a
    BP-based traceback happens during a deferred function call, it unwinds
    to the function that performed the defer and then thinks that function
    called itself in an infinite regress.
    
    Fix this by making jmpdefer manipulate the BP as if deferreturn had
    actually returned.
    
    Fixes #12968.
    
    Updates #15840.
    
    Change-Id: Ic9cc7c863baeaf977883ed0c25a7e80e592cf066
    Reviewed-on: https://go-review.googlesource.com/23457
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit adff422779709c83db91700fdcc0a0bd5dee6a21
Author: Austin Clements <austin@google.com>
Date:   Wed May 25 22:59:19 2016 -0400

    cmd/link/internal/ld: fix DWARF offsets with GOEXPERIMENT=framepointer
    
    The offsets computed by the DWARF expressions for local variables
    currently don't account for the extra stack slot used by the frame
    pointer when GOEXPERIMENT=framepointer is enabled.
    
    Fix this by adding the extra stack slot to the offset.
    
    This fixes TestGdbPython with GOEXPERIMENT=framepointer.
    
    Updates #15840.
    
    Change-Id: I1b2ebb2750cd22266f4a89ec8d9e8bfa05fabd19
    Reviewed-on: https://go-review.googlesource.com/23458
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d9557523c2febc29ad3ecab8b1a4358abd709b30
Author: Russ Cox <rsc@golang.org>
Date:   Wed May 25 20:01:25 2016 -0400

    runtime: make framepointer mode safe for Windows
    
    A few other architectures have already defined a NOFRAME flag.
    Use it to disable frame pointer code on a few very low-level functions
    that must behave like Windows code.
    
    Makes the failing os/signal test pass on a Windows gomote.
    
    Change-Id: I982365f2c59a0aa302b4428c970846c61027cf3e
    Reviewed-on: https://go-review.googlesource.com/23456
    Reviewed-by: Austin Clements <austin@google.com>

commit 805eaeef33a52778ba6ee624389c2cbfe6896f6f
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Tue May 17 20:55:55 2016 +0300

    crypto/sha1: fix AVX2 variant on AMD64
    
    AVX2 variant reads next blocks while calculating current block.
    Avoid reading past the end of data, by switching back to original,
    for last blocks.
    
    Fixes #15617.
    
    Change-Id: I04fa2d83f1b47995117c77b4a3d403a7dff594d4
    Reviewed-on: https://go-review.googlesource.com/23138
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8a1dc3244725c2afd170025fc616df840b464a99
Author: Russ Cox <rsc@golang.org>
Date:   Wed May 25 14:54:21 2016 -0400

    runtime: add library startup support for ppc64le
    
    I have been running this patch inside Google against Go 1.6 for the last month.
    
    The new tests will probably break the builders but let's see
    exactly how they break.
    
    Change-Id: Ia65cf7d3faecffeeb4b06e9b80875c0e57d86d9e
    Reviewed-on: https://go-review.googlesource.com/23452
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 30282b091d6c80f4aa37d7c457fa288c3a181573
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 25 16:38:02 2016 -0700

    cmd/compile: correctly import labels, gotos, and fallthroughs
    
    The importer had several bugs with respect to labels and gotos:
    - it didn't create a new ONAME node for label names (label dcl,
      goto, continue, and break)
    - it overwrote the symbol for gotos with the dclstack
    - it didn't set the dclstack for labels
    
    In the process changed export format slightly to always assume
    a label name for labels and gotos, and never assume a label for
    fallthroughs.
    
    For fallthroughs and switch cases, now also set Xoffset like in
    the parser. (Not setting it, i.e., using 0 was ok since this is
    only used for verifying correct use of fallthroughs, which was
    checked already. But it's an extra level of verification of the
    import.)
    
    Fixes #15838.
    
    Change-Id: I3637f6314b8651c918df0c8cd70cd858c92bd483
    Reviewed-on: https://go-review.googlesource.com/23445
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b9ec0024fbc18dd94eff7240afd82fac6b4d8fdc
Author: Seth Vargo <sethvargo@gmail.com>
Date:   Thu May 12 16:26:27 2016 -0400

    net/http: add missing HTTP status codes
    
    This commit adds missing status codes:
    
    * 102 - Processing
    * 207 - Multi-Status
    * 208 - Already Reported
    * 226 - IM Used
    * 308 - Permanent Redirect
    * 422 - Unprocessable Entity
    * 423 - Locked
    * 424 - Failed Dependency
    * 426 - Upgrade Required
    * 506 - Variant Also Negotiates
    * 507 - Insufficient Storage
    * 508 - Loop Detected
    * 510 - Not Extended
    * 511 - Network Authentication Required
    
    Change-Id: Ife0e5b064f4b1e3542d2fd41abc9e7b1e410b644
    Reviewed-on: https://go-review.googlesource.com/23090
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a5d1a72a40b59db0d2f3f5d3fbb2ed60aafb7fdf
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu May 19 16:27:23 2016 -0700

    cmd/cgo, runtime, runtime/cgo: TSAN support for malloc
    
    Acquire and release the TSAN synchronization point when calling malloc,
    just as we do when calling any other C function. If we don't do this,
    TSAN will report false positive errors about races calling malloc and
    free.
    
    We used to have a special code path for malloc and free, going through
    the runtime functions cmalloc and cfree. The special code path for cfree
    was no longer used even before this CL. This CL stops using the special
    code path for malloc, because there is no place along that path where we
    could conditionally insert the TSAN synchronization. This CL removes
    the support for the special code path for both functions.
    
    Instead, cgo now automatically generates the malloc function as though
    it were referenced as C.malloc.  We need to automatically generate it
    even if C.malloc is not called, even if malloc and size_t are not
    declared, to support cgo-provided functions like C.CString.
    
    Change-Id: I829854ec0787a80f33fa0a8a0dc2ee1d617830e2
    Reviewed-on: https://go-review.googlesource.com/23260
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 10c8b2374f413ef6225555893cad5d2a530f77d5
Author: Russ Cox <rsc@golang.org>
Date:   Wed May 25 17:24:11 2016 -0400

    runtime: align C library startup calls on amd64
    
    This makes GOEXPERIMENT=framepointer, GOOS=darwin, and buildmode=carchive coexist.
    
    Change-Id: I9f6fb2f0f06f27df683e5b51f2fa55cd21872453
    Reviewed-on: https://go-review.googlesource.com/23454
    Reviewed-by: Austin Clements <austin@google.com>

commit 3be48b4dc8c50a6568afcac0113e61a8f6e5224a
Author: Austin Clements <austin@google.com>
Date:   Mon May 23 22:14:53 2016 -0400

    runtime: pass gcWork to scanstack
    
    Currently scanstack obtains its own gcWork from the P for the duration
    of the stack scan and then, if called during mark termination,
    disposes the gcWork.
    
    However, this means that the number of workbufs allocated will be at
    least the number of stacks scanned during mark termination, which may
    be very high (especially during a STW GC). This happens because, in
    steady state, each scanstack will obtain a fresh workbuf (either from
    the empty list or by allocating it), fill it with the scan results,
    and then dispose it to the full list. Nothing is consuming from the
    full list during this (and hence nothing is recycling them to the
    empty list), so the length of the full list by the time mark
    termination starts draining it is at least the number of stacks
    scanned.
    
    Fix this by pushing the gcWork acquisition up the stack to either the
    gcDrain that calls markroot that calls scanstack (which batches across
    many stack scans and is the path taken during STW GC) or to newstack
    (which is still a single scanstack call, but this is roughly bounded
    by the number of Ps).
    
    This fix reduces the workbuf allocation for the test program from
    issue #15319 from 213 MB (roughly 2KB * 1e5 goroutines) to 10 MB.
    
    Fixes #15319.
    
    Note that there's potentially a similar issue in write barriers during
    mark 2. Fixing that will be more difficult since there's no broader
    non-preemptible context, but it should also be less of a problem since
    the full list is being drained during mark 2.
    
    Some overall improvements in the go1 benchmarks, plus the usual noise.
    No significant change in the garbage benchmark (time/op or GC memory).
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.54s ± 1%     2.51s ± 1%  -1.09%  (p=0.000 n=20+19)
    Fannkuch11-12                2.12s ± 0%     2.17s ± 0%  +2.18%  (p=0.000 n=19+18)
    FmtFprintfEmpty-12          45.1ns ± 1%    45.2ns ± 0%    ~     (p=0.078 n=19+18)
    FmtFprintfString-12          127ns ± 0%     128ns ± 0%  +1.08%  (p=0.000 n=19+16)
    FmtFprintfInt-12             125ns ± 0%     122ns ± 1%  -2.71%  (p=0.000 n=14+18)
    FmtFprintfIntInt-12          196ns ± 0%     190ns ± 1%  -2.91%  (p=0.000 n=12+20)
    FmtFprintfPrefixedInt-12     196ns ± 0%     194ns ± 1%  -0.94%  (p=0.000 n=13+18)
    FmtFprintfFloat-12           253ns ± 1%     251ns ± 1%  -0.86%  (p=0.000 n=19+20)
    FmtManyArgs-12               807ns ± 1%     784ns ± 1%  -2.85%  (p=0.000 n=20+20)
    GobDecode-12                7.13ms ± 1%    7.12ms ± 1%    ~     (p=0.351 n=19+20)
    GobEncode-12                5.89ms ± 0%    5.95ms ± 0%  +0.94%  (p=0.000 n=19+19)
    Gzip-12                      219ms ± 1%     221ms ± 1%  +1.35%  (p=0.000 n=18+20)
    Gunzip-12                   37.5ms ± 1%    37.4ms ± 0%    ~     (p=0.057 n=20+19)
    HTTPClientServer-12         81.4µs ± 4%    81.9µs ± 3%    ~     (p=0.118 n=17+18)
    JSONEncode-12               15.7ms ± 1%    15.8ms ± 1%  +0.73%  (p=0.000 n=17+18)
    JSONDecode-12               57.9ms ± 1%    57.2ms ± 1%  -1.34%  (p=0.000 n=19+19)
    Mandelbrot200-12            4.12ms ± 1%    4.10ms ± 0%  -0.33%  (p=0.000 n=19+17)
    GoParse-12                  3.22ms ± 2%    3.25ms ± 1%  +0.72%  (p=0.000 n=18+20)
    RegexpMatchEasy0_32-12      70.6ns ± 1%    71.1ns ± 2%  +0.63%  (p=0.005 n=19+20)
    RegexpMatchEasy0_1K-12       240ns ± 0%     239ns ± 1%  -0.59%  (p=0.000 n=19+20)
    RegexpMatchEasy1_32-12      71.3ns ± 1%    71.3ns ± 1%    ~     (p=0.844 n=17+17)
    RegexpMatchEasy1_1K-12       384ns ± 2%     371ns ± 1%  -3.45%  (p=0.000 n=19+20)
    RegexpMatchMedium_32-12      109ns ± 1%     108ns ± 2%  -0.48%  (p=0.029 n=19+19)
    RegexpMatchMedium_1K-12     34.3µs ± 1%    34.5µs ± 2%    ~     (p=0.160 n=18+20)
    RegexpMatchHard_32-12       1.79µs ± 9%    1.72µs ± 2%  -3.83%  (p=0.000 n=19+19)
    RegexpMatchHard_1K-12       53.3µs ± 4%    51.8µs ± 1%  -2.82%  (p=0.000 n=19+20)
    Revcomp-12                   386ms ± 0%     388ms ± 0%  +0.72%  (p=0.000 n=17+20)
    Template-12                 62.9ms ± 1%    62.5ms ± 1%  -0.57%  (p=0.010 n=18+19)
    TimeParse-12                 325ns ± 0%     331ns ± 0%  +1.84%  (p=0.000 n=18+19)
    TimeFormat-12                338ns ± 0%     343ns ± 0%  +1.34%  (p=0.000 n=18+20)
    [Geo mean]                  52.7µs         52.5µs       -0.42%
    
    Change-Id: Ib2d34736c4ae2ec329605b0fbc44636038d8d018
    Reviewed-on: https://go-review.googlesource.com/23391
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit a1f7db88f8c70a7520ce870a71706032f173739f
Author: Austin Clements <austin@google.com>
Date:   Mon May 23 22:05:51 2016 -0400

    runtime: document scanstack
    
    Also mark it go:systemstack and explain why.
    
    Change-Id: I88baf22741c04012ba2588d8e03dd3801d19b5c0
    Reviewed-on: https://go-review.googlesource.com/23390
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit a689f6b8af6a1c4a388d6aabb64253e0ce9ab84f
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 25 11:23:56 2016 -0700

    cmd/compile: document how to update builtin.go
    
    No code changes.
    
    Fixes #15835.
    
    Change-Id: Ibae3f20882f976babc4093df5e9fea0b2cf0e9d9
    Reviewed-on: https://go-review.googlesource.com/23443
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit b7d96b8e059ce446f25e615ab9ef277eae2ef1c9
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed May 25 08:03:46 2016 -0400

    doc: reflect {Num,}Method skips unexported methods
    
    For #15673
    
    Change-Id: I3ce8d4016854d41860c5a9f05a54cda3de49f337
    Reviewed-on: https://go-review.googlesource.com/23430
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 07f0c19a30a5c83592bcd2f19e52eb8a40b32790
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed May 25 14:57:49 2016 +0200

    math/big: use run for benchmarks
    
    shortens code and gives an example of the use of Run.
    
    Change-Id: I75ffaf762218a589274b4b62e19022e31e805d1b
    Reviewed-on: https://go-review.googlesource.com/23424
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 23cb8864b52e5f2f60618a551ca564574e0575b0
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed May 25 19:34:01 2016 +0200

    runtime: use Run for more benchmarks
    
    Names for Append?Bytes are slightly changed in addition to adding a slash.
    
    Change-Id: I0291aa29c693f9040fd01368eaad9766259677df
    Reviewed-on: https://go-review.googlesource.com/23426
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d2aa5f95cce5055d71a77166a60b574cd3f8ecd5
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed May 25 11:19:17 2016 +0200

    compress/flate: simplify using subtests and sub-benchmarks
    
    This causes the large files to be loaded only once per benchmark.
    
    This CL also serves as an example use case of sub(tests|-benchmarks).
    
    This CL ensures that names are identical to the original
    except for an added slashes. Things could be
    simplified further if this restriction were dropped.
    
    Change-Id: I45e303e158e3152e33d0d751adfef784713bf997
    Reviewed-on: https://go-review.googlesource.com/23420
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 89283781c69314f09e999fe131b12c57059c1ba1
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Tue May 24 20:03:31 2016 +0200

    testing: added package doc for sub(tests/benchmarks)
    
    Change-Id: I6991cd7a41140da784a1ff8d69c5ea2032d05850
    Reviewed-on: https://go-review.googlesource.com/23354
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5dd922c935d28ded082f76a81e0c963938d7c3c3
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed May 25 14:54:41 2016 +0200

    compress/lzw: use Run for benchmarks
    
    load file only once per group.
    
    Change-Id: I965661507055e6e100506bf14d37133ecdd2cc5e
    Reviewed-on: https://go-review.googlesource.com/23423
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 095fbdcc91e41abf52a690dd6c64d701682ca96b
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed May 25 15:44:39 2016 +0200

    runtime: use of Run for some benchmarks
    
    Names of sub-benchmarks are preserved, short of the additional slash.
    
    Change-Id: I9b3f82964f9a44b0d28724413320afd091ed3106
    Reviewed-on: https://go-review.googlesource.com/23425
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 824e1f2e083c9c1df8455554744e49471becbaa2
Author: Robert Griesemer <gri@golang.org>
Date:   Tue May 24 12:54:14 2016 -0700

    text/scanner: better error message if no error handler is installed
    
    This is reverting golang.org/cl/19622 and introducing "<input>"
    as filename if no filename is specified.
    
    Fixes #15813.
    
    Change-Id: Iafc74b789fa33f48ee639c42d4aebc6f06435f95
    Reviewed-on: https://go-review.googlesource.com/23402
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 786e51d7baf6535290ecb0f34c9e73d7dcc21b02
Author: Keith Randall <khr@golang.org>
Date:   Tue May 24 16:53:48 2016 -0700

    cmd/compile: add generated tests for constant folding
    
    Covers a bunch of constant-folding rules in generic.rules that aren't
    being covered currently.
    
    Increases coverage in generic.rules from 65% to 72%.
    
    Change-Id: I7bf58809faf22e97070183b42e6dd7d3f35bf5f9
    Reviewed-on: https://go-review.googlesource.com/23407
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 9f38796270a017de8d9e1f102b28576826e6a188
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue May 24 19:04:51 2016 -0400

    reflect: remove type info for unexported methods
    
    Also remove some of the now unnecessary corner case handling and
    tests I've been adding recently for unexported method data.
    
    For #15673
    
    Change-Id: Ie0c7b03f2370bbe8508cdc5be765028f08000bd7
    Reviewed-on: https://go-review.googlesource.com/23410
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f2f3b6cd8fbe9f823fd6946f055bb70c3ef6f9db
Author: Elias Naur <elias.naur@gmail.com>
Date:   Wed May 25 13:24:36 2016 +0200

    cmd/link: fix ARM gold linker check
    
    CL 23400 introduced a check to make sure the gold linker is used
    on ARM host links. The check itself works, but the error checking
    logic was reversed; fix it.
    
    I manually verified that the check now correctly rejects host links
    on my RPi2 running an ancient rasbian without the gold linker
    installed.
    
    Updates #15696
    
    Change-Id: I927832620f0a60e91a71fdedf8cbd2550247b666
    Reviewed-on: https://go-review.googlesource.com/23421
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 72eb46c5a086051e3677579a0810922724eb6a6d
Author: Elias Naur <elias.naur@gmail.com>
Date:   Mon May 16 15:51:07 2016 +0200

    runtime,runtime/cgo: save callee-saved FP register on arm
    
    Other GOARCHs already handle their callee-saved FP registers, but
    arm was missing. Without this change, code using Cgo and floating
    point code might fail in mysterious and hard to debug ways.
    
    There are no floating point registers when GOARM=5, so skip the
    registers when runtime.goarm < 6.
    
    darwin/arm doesn't support GOARM=5, so the check is left out of
    rt0_darwin_arm.s.
    
    Fixes #14876
    
    Change-Id: I6bcb90a76df3664d8ba1f33123a74b1eb2c9f8b2
    Reviewed-on: https://go-review.googlesource.com/23140
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit fa3f484800415662cc741bbb8968ebb72896e20a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue May 24 11:39:48 2016 -0700

    encoding/csv: clarify that this package supports RFC 4180
    
    The intent of this comment is to reduce the number of issues opened
    against the package to add support for new kinds of CSV formats, such as
    issues #3150, #8458, #12372, #12755.
    
    Change-Id: I452c0b748e4ca9ebde3e6cea188bf7774372148e
    Reviewed-on: https://go-review.googlesource.com/23401
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 93e8e704996ce100fe46b2249324442947e47a9d
Author: Robert Griesemer <gri@golang.org>
Date:   Tue May 24 14:12:35 2016 -0700

    all: fixed a handful of typos
    
    Change-Id: Ib0683f27b44e2f107cca7a8dcc01d230cbcd5700
    Reviewed-on: https://go-review.googlesource.com/23404
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit a640d95172ec516a3b727a8ca796c64f5aea89ec
Author: Austin Clements <austin@google.com>
Date:   Fri May 20 14:57:55 2016 -0400

    runtime: update SP when jumping stacks in traceback
    
    When gentraceback starts on a system stack in sigprof, it is
    configured to jump to the user stack when it reaches the end of the
    system stack. Currently this updates the current frame's FP, but not
    its SP. This is okay on non-LR machines (x86) because frame.sp is only
    used to find defers, which the bottom-most frame of the user stack
    will never have.
    
    However, on LR machines, we use frame.sp to find the saved LR. We then
    use to resolve the function of the next frame, which is used to
    resolved the size of the next frame. Since we're not updating frame.sp
    on a stack jump, we read the saved LR from the system stack instead of
    the user stack and wind up resolving the wrong function and hence the
    wrong frame size for the next frame.
    
    This has had remarkably few ill effects (though the resulting profiles
    must be wrong). We noticed it because of a bad interaction with stack
    barriers. Specifically, once we get the next frame size wrong, we also
    get the location of its LR wrong. If we happen to get a stack slot
    that contains a stale stack barrier LR (for a stack barrier we already
    hit) and hasn't been overwritten with something else as we re-grew the
    stack, gentraceback will fail with a "found next stack barrier at ..."
    error, pointing at the slot that it thinks is an LR, but isn't.
    
    Fixes #15138.
    
    Updates #15313 (might fix it).
    
    Change-Id: I13cfa322b44c0c2f23ac2b3d03e12631e4a6406b
    Reviewed-on: https://go-review.googlesource.com/23291
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 7b6b5e340403c32756a92294729dc52f308b841a
Author: Jeff R. Allen <jra@nella.org>
Date:   Wed May 25 00:12:22 2016 +0600

    doc: add notes on good commit messages
    
    Explain Brad's algorithm for generating commit headlines.
    
    Fixes #15700
    
    Change-Id: Ic602f17629b3dd7675e2bb1ed119062c03353ee9
    Reviewed-on: https://go-review.googlesource.com/23355
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3474610fbc81f7e9f3f2cb23dc1554b3f5cec657
Author: Jeff R. Allen <jra@nella.org>
Date:   Tue May 24 23:00:06 2016 +0600

    math/rand: Doc fix for how many bits Seed uses
    
    Document the fact that the default Source uses only
    the bottom 31 bits of the given seed.
    
    Fixes #15788
    
    Change-Id: If20d1ec44a55c793a4a0a388f84b9392c2102bd1
    Reviewed-on: https://go-review.googlesource.com/23352
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2f9eeea212681927385a4713004438cd864966e0
Author: Jeff R. Allen <jra@nella.org>
Date:   Tue May 24 23:46:11 2016 +0600

    cmd/go: document testdata directory in "go help test"
    
    Document the correct use of the testdata directory
    where test writers might be expecting to find it.
    
    It seems that alldocs.go was out of date, so it
    has picked up some other changes with this commit.
    
    Fixes #14715.
    
    Change-Id: I0a22676bb7a64b2a61b56495f7ea38db889d8b37
    Reviewed-on: https://go-review.googlesource.com/23353
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a0abecf1020c33e82c464f7891b317e83f0c6a78
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue May 24 13:40:02 2016 -0400

    cmd/link: ensure -fuse-ld=gold uses gold
    
    Fixes #15696
    
    Change-Id: I134e918dc56f79a72a04aa54f415371884113d2a
    Reviewed-on: https://go-review.googlesource.com/23400
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7b9d3ff4cbd93c0b9e69c78cbb2cb891839c7fb3
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Sat May 21 14:37:29 2016 +0200

    testing: don't be silent if a test's goroutine fails a test after test exits
    
    Fixes #15654
    
    Change-Id: I9bdaa9b76d480d75f24d95f0235efd4a79e3593e
    Reviewed-on: https://go-review.googlesource.com/23320
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit dcc42c7d11ad06bebc9d13d1e812629f930f14a7
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Tue May 24 13:53:44 2016 +0300

    cmd/vet: do not check print-like functions with unknown type
    
    Fixes #15787
    
    Change-Id: I559ba886527b474dbdd44fe884c78973b3012377
    Reviewed-on: https://go-review.googlesource.com/23351
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 524956f8b976be2b7be829a2d0d87c2951932ac6
Author: Russ Cox <rsc@golang.org>
Date:   Tue May 24 09:42:33 2016 -0400

    io: remove SizedReaderAt
    
    It's not clear we want to enshrine an io interface in which Size cannot
    return an error. Because this requires more thought before committing
    to the API, remove from Go 1.7.
    
    Fixes #15818.
    
    Change-Id: Ic4138ffb0e033030145a12d33f78078350a8381f
    Reviewed-on: https://go-review.googlesource.com/23392
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit ba867a86fa28f9edca64b682bc2df66e73967f56
Author: Russ Cox <rsc@golang.org>
Date:   Tue May 24 02:50:17 2016 -0400

    api: update next.txt
    
    Change-Id: I7b38309d927409a92f68f5d26f491b0166eba838
    Reviewed-on: https://go-review.googlesource.com/23378
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit f117a5359af607d8e62fa9cd66eb327d18a7d6d7
Author: Russ Cox <rsc@golang.org>
Date:   Tue May 24 03:12:41 2016 -0400

    doc: first draft of Go 1.7 release notes
    
    Mostly complete but a few TODOs remain for future CLs.
    
    For #15810.
    
    Change-Id: I81ee19d1088d192cf709a5f7e6b7bcc44ad892ac
    Reviewed-on: https://go-review.googlesource.com/23379
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit 85e3c9e6b863792135c8cd49bebfd1028e87cee5
Author: Russ Cox <rsc@golang.org>
Date:   Tue May 24 02:52:31 2016 -0400

    cmd/compile, go/types: omit needless word in error message
    
    CL 21462 and CL 21463 made this message say explicitly that the problem
    was a struct field in a map, but the word "directly" is unnecessary,
    sounds wrong, and makes the error long.
    
    Change-Id: I2fb68cdaeb8bd94776b8022cf3eae751919ccf6f
    Reviewed-on: https://go-review.googlesource.com/23373
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 34b17d4dc5726eebde437f2c1b680d039cc3e7c0
Author: Russ Cox <rsc@golang.org>
Date:   Mon May 23 12:28:56 2016 -0400

    encoding/json: rename Indent method to SetIndent
    
    CL 21057 added this method during the Go 1.7 cycle
    (so it is not yet released and still possible to revise).
    
    This makes it clearer that the method is not doing something
    (like func Indent does), but just changing a setting about doing
    something later.
    
    Also document that this is in some sense irreversible.
    I think that's probably a mistake but the original CL discussion
    claimed it as a feature, so I'll leave it alone.
    
    For #6492.
    
    Change-Id: If4415c869a9196501056c143811a308822d5a420
    Reviewed-on: https://go-review.googlesource.com/23295
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit 4aea7a12b6a6621a67267050df0688f28adfe6b4
Author: Russ Cox <rsc@golang.org>
Date:   Mon May 23 11:41:00 2016 -0400

    encoding/json: change DisableHTMLEscaping to SetEscapeHTML
    
    DisableHTMLEscaping is now SetEscapeHTML, allowing the escaping
    to be toggled, not just disabled. This API is new for Go 1.7,
    so there are no compatibility concerns (quite the opposite,
    the point is to fix the API before we commit to it in Go 1.7).
    
    Change-Id: I96b9f8f169a9c44995b8a157a626eb62d0b6dea7
    Reviewed-on: https://go-review.googlesource.com/23293
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 658814fa386a08761032b659f64f4eecb79ca084
Author: Russ Cox <rsc@golang.org>
Date:   Tue May 24 02:25:56 2016 -0400

    A+C: add Andre Nathan (individual CLA)
    
    Andre wrote https://golang.org/cl/13454043 (never submitted),
    which served as the basis for Ross Light's https://golang.org/cl/19235.
    
    Individual CLA verified by hand.
    
    Change-Id: Ic09e8efd84b7ded3ae472c204133e40cb85d97f7
    Reviewed-on: https://go-review.googlesource.com/23377
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7f9255c2120f784c334431661145ee89e75f64fe
Author: Russ Cox <rsc@golang.org>
Date:   Mon May 23 20:40:52 2016 -0400

    net: revise IP.String result for malformed IP address to add ? back
    
    In earlier versions of Go the result was simply "?".
    A change in this cycle made the result echo back the hex bytes
    of the address, which is certainly useful, but now the result is
    not clearly indicating an error. Put the "?" back, at the beginning
    of the hex string, to make the invalidity of the string clearer.
    
    Change-Id: I3e0f0b6a005601cd98d982a62288551959185b40
    Reviewed-on: https://go-review.googlesource.com/23376
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8e724e7bbad07d530f547b6214c71ddfe26ba92a
Author: Russ Cox <rsc@golang.org>
Date:   Mon May 23 20:34:39 2016 -0400

    cmd/go: fix //go:binary-only-package check
    
    The use of a prefix check was too liberal.
    Noted in review after submit.
    
    Change-Id: I4fe1df660997efd225609e818040b8392fab79f0
    Reviewed-on: https://go-review.googlesource.com/23375
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 12610236375e2e981e370508548f3d51920df7e2
Author: Russ Cox <rsc@golang.org>
Date:   Mon May 23 12:21:57 2016 -0400

    encoding/json: additional tests and fixes for []typedByte encoding/decoding
    
    CL 19725 changed the encoding of []typedByte to look for
    typedByte.MarshalJSON and typedByte.MarshalText.
    Previously it was handled like []byte, producing a base64 encoding of the underlying byte data.
    
    CL 19725 forgot to look for (*typedByte).MarshalJSON and (*typedByte).MarshalText,
    as the marshaling of other slices would. Add test and fix for those.
    
    This CL also adds tests that the decoder can handle both the old and new encodings.
    (This was true even in Go 1.6, which is the only reason we can consider this
    not an incompatible change.)
    
    For #13783.
    
    Change-Id: I7cab8b6c0154a7f2d09335b7fa23173bcf856c37
    Reviewed-on: https://go-review.googlesource.com/23294
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit ab4414773e27624abf4361e48a0ca0979e804970
Author: Russ Cox <rsc@golang.org>
Date:   Tue May 24 02:45:11 2016 -0400

    math/big: write t*10 to multiply t by 10
    
    The compiler has caught up.
    In fact the compiler is ahead; it knows about a magic multiply-by-5 instruction:
    
            // compute '0' + byte(r - t*10) in AX
            MOVQ    t, AX
            LEAQ    (AX)(AX*4), AX
            SHLQ    $1, AX
            MOVQ    r, CX
            SUBQ    AX, CX
            LEAL    48(CX), AX
    
    For comparison, the shifty version compiles to:
    
            // compute '0' + byte(r - t*10) in AX
            MOVQ    t, AX
            MOVQ    AX, CX
            SHLQ    $3, AX
            MOVQ    r, DX
            SUBQ    AX, DX
            SUBQ    CX, DX
            SUBQ    CX, DX
            LEAL    48(DX), AX
    
    Fixes #2671.
    
    Change-Id: Ifbf23dbfeb19c0bb020fa44eb2f025943969fb6b
    Reviewed-on: https://go-review.googlesource.com/23372
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7a9f6c2b56bd87ff7f9296344c9e63cc46194428
Author: Keith Randall <khr@golang.org>
Date:   Mon May 23 13:09:12 2016 -0700

    cmd/compile: benchmark needs dominator tree
    
    Now that CSE uses dom tree to order partitions, we need the
    dom tree computed before benchmarking CSE.
    
    Fixes #15801
    
    Change-Id: Ifa4702c7b75250f34de185e69a880b3f3cc46a12
    Reviewed-on: https://go-review.googlesource.com/23361
    Reviewed-by: David Chase <drchase@google.com>

commit 30fc940c70ee5ee27f0a455248735b8b57f34fb7
Author: Robert Griesemer <gri@golang.org>
Date:   Fri May 20 17:26:24 2016 -0700

    go/types: don't drop type in n:1 var decl if one is given
    
    In n:1 variable declarations (multiple lhs variables with single
    multi-valued initialization expression) where also a variable
    type is provided, make sure that that type is assigned to all
    variables on the lhs before the init expression assignment is
    checked. Otherwise, (some) variables are assumed to take the type
    of the corresponding value of the multi-valued init expression.
    
    Fixes #15755.
    
    Change-Id: I969cb5a95c85e28dbb38abd7fa7df16ff5554c03
    Reviewed-on: https://go-review.googlesource.com/23313
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 65adb6ab9a91c2f4336e1e48f9e7c325dafa0213
Author: Kenny Grant <kennygrant@gmail.com>
Date:   Sat May 21 16:57:37 2016 +0100

    time: run genzabbrs.go with new source data
    
    The source xml data has changed, so running genzabbrs.go
    regenerates a new time zone file in zoneinfo_abbrs_windows.go
    which adds some zones and adjusts others.
    
    Now set export ZONEINFO=$GOROOT/lib/time/zoneinfo.zip to use zoneinfo.zip in go tip.
    
    Change-Id: I19f72359cc808094e5dcb420e480a00c6b2205d7
    Reviewed-on: https://go-review.googlesource.com/23321
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4b6e560b69f3fe6dfadcf6a43eda8a78b086448c
Author: djherbis <djherbis@gmail.com>
Date:   Sat May 21 13:25:47 2016 -0700

    AUTHORS: correcting my last name Herbis -> Herbison
    
    Change-Id: I91608b15e00c8eaf732db3a99a890d4ceeb41955
    Reviewed-on: https://go-review.googlesource.com/23317
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1f8d2768987ea1d7f1bc4d6bbfe59b2a8e98d9b9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 20 23:28:56 2016 +0000

    A+C: automated update (subrepos)
    
    Add Abe Haskins (individual CLA)
    Add Ahmy Yulrizka (individual CLA)
    Add Akihiro Suda (individual CLA)
    Add Alex Vaghin (corporate CLA for Google Inc.)
    Add Arlo Breault (individual CLA)
    Add Audrey Lim (individual CLA)
    Add Benjamin Wester (corporate CLA for Square, Inc.)
    Add Bryan Chan (corporate CLA for IBM)
    Add Christy Perez (corporate CLA for IBM)
    Add Colin Edwards (individual CLA)
    Add David Brophy (individual CLA)
    Add David Sansome (individual CLA)
    Add Diwaker Gupta (individual CLA)
    Add Doug Anderson (corporate CLA for Google Inc.)
    Add Dustin Carlino (corporate CLA for Google Inc.)
    Add Ernest Chiang (individual CLA)
    Add Ethan Burns (corporate CLA for Google Inc.)
    Add Gary Elliott (corporate CLA for Google Inc.)
    Add Hallgrimur Gunnarsson (corporate CLA for Google Inc.)
    Add Hironao OTSUBO (individual CLA)
    Add Holden Huang (individual CLA)
    Add Idora Shinatose (individual CLA)
    Add Irieda Noboru (individual CLA)
    Add Jeff Craig (corporate CLA for Google Inc.)
    Add Joe Henke (individual CLA)
    Add John Schnake (individual CLA)
    Add Jonathan Amsterdam (corporate CLA for Google Inc.)
    Add Kenji Kaneda (individual CLA)
    Add Kenneth Shaw (individual CLA)
    Add Mark Severson (individual CLA)
    Add Martin Garton (individual CLA)
    Add Mathias Leppich (individual CLA)
    Add Maxwell Krohn (individual CLA)
    Add Niall Sheridan (individual CLA)
    Add Nick Patavalis (individual CLA)
    Add Nick Petroni (individual CLA)
    Add Omar Jarjur (corporate CLA for Google Inc.)
    Add Özgür Kesim (individual CLA)
    Add Peter Gonda (corporate CLA for Google Inc.)
    Add Pierre Durand (individual CLA)
    Add Quentin Smith (corporate CLA for Google Inc.)
    Add Ricardo Padilha (individual CLA)
    Add Riku Voipio (corporate CLA for Linaro Limited)
    Add Roland Shoemaker (individual CLA)
    Add Sam Hug (individual CLA)
    Add Sam Whited (individual CLA)
    Add Sami Commerot (corporate CLA for Google Inc.)
    Add Scott Mansfield (corporate CLA for Netflix, Inc.)
    Add Sean Harger (corporate CLA for Google Inc.)
    Add Simon Jefford (individual CLA)
    Add Sridhar Venkatakrishnan (individual CLA)
    Add Tim Swast (corporate CLA for Google Inc.)
    Add Timothy Studd (individual CLA)
    Add Tipp Moseley (corporate CLA for Google Inc.)
    Add Toby Burress (corporate CLA for Google Inc.)
    Add Tzu-Jung Lee (corporate CLA for Currant)
    Add Vadim Grek (individual CLA)
    Add Xudong Zhang (individual CLA)
    
    Updates #12042
    
    Change-Id: I4119a8829119a2b8a9abbea9f52ceebb04878764
    Reviewed-on: https://go-review.googlesource.com/23306
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit def50f8e488dcfb12362d4b84feb38de3af5cadc
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat May 21 00:25:48 2016 +0000

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 0c607074 for https://golang.org/cl/23311,
    "http2: prevent Server from sending status 100 header after anything else"
    
    New test is in the x/net/http2 package (not bundled to std).
    
    Fixes #14030
    
    Change-Id: Ifc6afa4a5fe35977135428f6d0e9f7c164767720
    Reviewed-on: https://go-review.googlesource.com/23312
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 82ec4cd79f117191d12fc14060c4b4b786feca5b
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri May 13 12:13:00 2016 +0900

    net: don't crash DNS flood test on darwin
    
    Also renames the test function to TestDNSFlood.
    
    Updates #15659.
    
    Change-Id: Ia562004c43bcc19c2fee9440321c27b591f85da5
    Reviewed-on: https://go-review.googlesource.com/23077
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit da5ac69bd4dce05443220c73c9eadb606b9777f8
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 20 21:52:59 2016 +0000

    A+C: automated updates
    
    Add Aiden Scandella (individual CLA)
    Add Alessandro Arzilli (individual CLA)
    Add Augusto Roman (individual CLA)
    Add Brady Catherman (individual CLA)
    Add Brady Sullivan (individual CLA)
    Add Caio Marcelo de Oliveira Filho (corporate CLA for Intel Corporation)
    Add Catalin Nicutar (corporate CLA for Google Inc.)
    Add Cherry Zhang (corporate CLA for Google Inc.)
    Add Chris Zou (corporate CLA for IBM)
    Add Christopher Nelson (individual CLA)
    Add Conrad Irwin (individual CLA)
    Add Cuihtlauac ALVARADO (corporate CLA for Orange)
    Add Daniel Speichert (individual CLA)
    Add Datong Sun (individual CLA)
    Add Denys Honsiorovskyi (individual CLA)
    Add Derek Shockey (individual CLA)
    Add Dmitriy Dudkin (individual CLA)
    Add Dustin Herbis (individual CLA)
    Add Frits van Bommel (individual CLA)
    Add Harshavardhana (individual CLA)
    Add Hitoshi Mitake (individual CLA)
    Add James Bardin (individual CLA)
    Add James Chacon (corporate CLA for Google Inc.)
    Add Jamil Djadala (individual CLA)
    Add Jess Frazelle (individual CLA)
    Add Joe Sylve (individual CLA)
    Add Johan Sageryd (individual CLA)
    Add John Jeffery (individual CLA)
    Add Julia Hansbrough (corporate CLA for Google Inc.)
    Add Jure Ham (corporate CLA for Zemanta d.o.o.)
    Add Kamal Aboul-Hosn (corporate CLA for Google Inc.)
    Add Kevin Burke (individual CLA)
    Add Kevin Kirsche (individual CLA)
    Add Kevin Vu (individual CLA)
    Add Lee Hinman (individual CLA)
    Add Luan Santos (individual CLA)
    Add Marc-Antoine Ruel (corporate CLA for Google Inc.)
    Add Matt Robenolt (individual CLA)
    Add Michael McConville (individual CLA)
    Add Michael Munday (corporate CLA for IBM)
    Add Michael Pratt (corporate CLA for Google Inc.)
    Add Michel Lespinasse (corporate CLA for Google Inc.)
    Add Mike Danese (corporate CLA for Google Inc.)
    Add Mikhail Gusarov (individual CLA)
    Add Monty Taylor (individual CLA)
    Add Morten Siebuhr (individual CLA)
    Add Muhammed Uluyol (individual CLA)
    Add Niels Widger (individual CLA)
    Add Niko Dziemba (individual CLA)
    Add Olivier Poitrey (individual CLA)
    Add Paul Wankadia (corporate CLA for Google Inc.)
    Add Philip Hofer (individual CLA)
    Add Prashant Varanasi (individual CLA)
    Add Rhys Hiltner (corporate CLA for Amazon.com, Inc)
    Add Richard Miller (individual CLA)
    Add Scott Bell (individual CLA)
    Add Shahar Kohanim (individual CLA)
    Add Shinji Tanaka (individual CLA)
    Add Suharsh Sivakumar (corporate CLA for Google Inc.)
    Add Tal Shprecher (individual CLA)
    Add Tilman Dilo (individual CLA)
    Add Tim Ebringer (individual CLA)
    Add Tom Bergan (corporate CLA for Google Inc.)
    Add Vishvananda Ishaya (individual CLA)
    Add Wedson Almeida Filho (corporate CLA for Google Inc.)
    Add Zhongwei Yao (corporate CLA for ARM Ltd.)
    
    Updates #12042
    
    Change-Id: Ia118adc2eb38e5ffc8448de2d9dd3ca792ee7227
    Reviewed-on: https://go-review.googlesource.com/23303
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7ab698b0221fd4a5b2842fb50a34ba8a5f49c6d5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 20 22:43:14 2016 +0000

    time: document that After uses memory until duration times out
    
    Fixes #15698
    
    Change-Id: I616fc06dcf04092bafdaf56fb1afba2a998a6d83
    Reviewed-on: https://go-review.googlesource.com/23304
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 054a721dcac9b30610af0898b3ed8bf3ffa9f8b1
Author: Robert Griesemer <gri@golang.org>
Date:   Fri May 20 11:19:19 2016 -0700

    cmd/compile: read safemode bit from package header
    
    Ignore respective bit in export data, but leave the info to
    minimize format changes for 1.7. Scheduled to remove by 1.8.
    
    For #15772.
    
    Change-Id: Ifb3beea655367308a4e2d5dc8cb625915f904287
    Reviewed-on: https://go-review.googlesource.com/23285
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit cc0d8c86e3437c1eec697809bdc9b2bcc8e0ed92
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 20 18:13:49 2016 +0000

    net/http: deflake TestTransportEventTrace_h2
    
    Fixes #15765
    
    Change-Id: Id0a89d90ef9d3fffa9af0affca8c10a26fe6b7bc
    Reviewed-on: https://go-review.googlesource.com/23284
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit db5af0d7115781be12f510322ee01556fb1e6d16
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 20 20:58:44 2016 +0000

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 4d07e8a49 for CL 23287:
    
       http2: let handlers close Request.Body without killing streams
       https://golang.org/cl/23287
    
    Fixes #15425
    
    Change-Id: I20b6e37cd09aa1d5a040c122ca0daf14b8916559
    Reviewed-on: https://go-review.googlesource.com/23301
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4cad610401edc11fe921205438a7b3ab4faa3982
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 20 20:42:21 2016 +0000

    os/exec: remove Cmd.RunContext and Cmd.WaitContext, add CommandContext
    
    Fixes #15775
    
    Change-Id: I0a6c2ca09d3850c3538494711f7a9801b9500411
    Reviewed-on: https://go-review.googlesource.com/23300
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 85e39f838722a1521e09288cddfe378843d662fb
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 20 16:30:49 2016 +0000

    net/http: also clone DynamicRecordSizingDisabled in cloneTLSConfig
    
    Updates #15771
    
    Change-Id: I5dad96bdca19d680dd00cbd17b72a03e43eb557e
    Reviewed-on: https://go-review.googlesource.com/23283
    Reviewed-by: Tom Bergan <tombergan@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit be1b93065356e71362ca8469fc53c9ab102c4be5
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu May 19 13:31:58 2016 -0400

    reflect: hide unexported methods that do not satisfy interfaces
    
    Fixes #15673
    
    Change-Id: Ib36d8db3299a93d92665dbde012d52c2c5332ac0
    Reviewed-on: https://go-review.googlesource.com/23253
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b3bf2e7803174b77838a357ee05b1351ece6a29d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 20 03:01:27 2016 +0000

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 8a52c78 for golang.org/cl/23258
    (http2: fix Transport.CloseIdleConnections when http1+http2 are wired together)
    
    Fixes #14607
    
    Change-Id: I038badc69e230715b8ce4e398eb5e6ede73af918
    Reviewed-on: https://go-review.googlesource.com/23280
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1ded9fdcff8722ae961fb9da015faac874b7690e
Author: Jess Frazelle <me@jessfraz.com>
Date:   Thu May 19 22:26:01 2016 -0700

    syscall: fix unshare test on mips
    
    Change-Id: Iedce3770a92112802f3a45c7b95ee145ab5b187e
    Reviewed-on: https://go-review.googlesource.com/23282
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 16f846a9cbe747b13498761f1dd1a298478ec43e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu May 19 17:35:23 2016 +0000

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 202ff482 for https://golang.org/cl/23235 (Expect:
    100-continue support for HTTP/2)
    
    Fixes a flaky test too, and changes the automatic HTTP/2 behavior to
    no longer special-case the DefaultTransport, because
    ExpectContinueTimeout is no longer unsupported by the HTTP/2
    transport.
    
    Fixes #13851
    Fixes #15744
    
    Change-Id: I3522aace14179a1ca070fd7063368a831167a0f7
    Reviewed-on: https://go-review.googlesource.com/23254
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 9cd2c700deccc6dfcc8f264857e406c53bf07859
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu May 19 06:15:18 2016 +0900

    net: deflake TestDialTimeoutMaxDuration
    
    Fixes #15745.
    
    Change-Id: I6f9a1dcf0b1d97cb443900c7d8da09ead83d4b6a
    Reviewed-on: https://go-review.googlesource.com/23243
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8527b8ef9b00c72b1a8e30e5917c7bdd3c0e79ef
Author: Jess Frazelle <me@jessfraz.com>
Date:   Wed May 18 18:47:24 2016 -0700

    syscall: add Unshare flags to SysProcAttr on Linux
    
    This patch adds Unshare flags to SysProcAttr for Linux systems.
    
    Fixes #1954
    
    Change-Id: Id819c3f92b1474e5a06dd8d55f89d74a43eb770c
    Reviewed-on: https://go-review.googlesource.com/23233
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 448246adff7feb868d66cfde82b36fcfd0e66b75
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 18 17:43:15 2016 -0700

    cmd/compile: don't exit early because of hidden error messages
    
    Non-syntax errors are always counted to determine if to exit
    early, but then deduplication eliminates them. This can lead
    to situations which report "too many errors" and only one
    error is shown.
    
    De-duplicate non-syntax errors early, at least the ones that
    appear consecutively, and only count the ones actually being
    shown. This doesn't work perfectly as they may not appear in
    sequence, but it's cheap and good enough.
    
    Fixes #14136.
    
    Change-Id: I7b11ebb2e1e082f0d604b88e544fe5ba967af1d7
    Reviewed-on: https://go-review.googlesource.com/23259
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit dc4427f3727804ded270bc6a7a8066ccb3c151d0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu May 19 18:08:43 2016 +0000

    context: make DeadlineExceeded have a Timeout method
    
    Fixes #14238
    
    Change-Id: I1538bfb5cfa63e36a89df1f6eb9f5a0dcafb6ce5
    Reviewed-on: https://go-review.googlesource.com/23256
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0b80659832ec72532ee1210cdb51422ee6012c66
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu May 19 18:05:10 2016 +0000

    net/http/httptest: restore historic ResponseRecorder.HeaderMap behavior
    
    In Go versions 1 up to and including Go 1.6,
    ResponseRecorder.HeaderMap was both the map that handlers got access
    to, and was the map tests checked their results against. That did not
    mimic the behavior of the real HTTP server (Issue #8857), so HeaderMap
    was changed to be a snapshot at the first write in
    https://golang.org/cl/20047. But that broke cases where the Handler
    never did a write (#15560), so revert the behavior.
    
    Instead, introduce the ResponseWriter.Result method, returning an
    *http.Response. It subsumes ResponseWriter.Trailers which was added
    for Go 1.7 in CL 20047. Result().Header now contains the correct
    answer, and HeaderMap is unchanged in behavior from previous Go
    releases, so we don't break people's tests. People wanting the correct
    behavior can use ResponseWriter.Result.
    
    Fixes #15560
    Updates #8857
    
    Change-Id: I7ea9b56a6b843103784553d67f67847b5315b3d2
    Reviewed-on: https://go-review.googlesource.com/23257
    Reviewed-by: Damien Neil <dneil@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3b50adbc4f1a9d775f0434166ad71220e8a4b8ce
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu May 19 17:43:04 2016 +0000

    build: unset GOBIN during build
    
    Fixes #14340
    
    Change-Id: I43e1624fafc972fb868708c3857fc8acf1bfbbd7
    Reviewed-on: https://go-review.googlesource.com/23255
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 44497ebacb6336e4cc9ce2934840bdd68e8c46c0
Author: Austin Clements <austin@google.com>
Date:   Tue May 17 18:46:03 2016 -0400

    runtime: fix goroutine priority elevation
    
    Currently it's possible for user code to exploit the high scheduler
    priority of the GC worker in conjunction with the runnext optimization
    to elevate a user goroutine to high priority so it will always run
    even if there are other runnable goroutines.
    
    For example, if a goroutine is in a tight allocation loop, the
    following can happen:
    
    1. Goroutine 1 allocates, triggering a GC.
    2. G 1 attempts an assist, but fails and blocks.
    3. The scheduler runs the GC worker, since it is high priority.
       Note that this also starts a new scheduler quantum.
    4. The GC worker does enough work to satisfy the assist.
    5. The GC worker readies G 1, putting it in runnext.
    6. GC finishes and the scheduler runs G 1 from runnext, giving it
       the rest of the GC worker's quantum.
    7. Go to 1.
    
    Even if there are other goroutines on the run queue, they never get a
    chance to run in the above sequence. This requires a confluence of
    circumstances that make it unlikely, though not impossible, that it
    would happen in "real" code. In the test added by this commit, we
    force this confluence by setting GOMAXPROCS to 1 and GOGC to 1 so it's
    easy for the test to repeated trigger GC and wake from a blocked
    assist.
    
    We fix this by making GC always put user goroutines at the end of the
    run queue, instead of in runnext. This makes it so user code can't
    piggy-back on the GC's high priority to make a user goroutine act like
    it has high priority. The only other situation where GC wakes user
    goroutines is waking all blocked assists at the end, but this uses the
    global run queue and hence doesn't have this problem.
    
    Fixes #15706.
    
    Change-Id: I1589dee4b7b7d0c9c8575ed3472226084dfce8bc
    Reviewed-on: https://go-review.googlesource.com/23172
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 91740582c3ec1e57621cbb0ec0f9163431f1b688
Author: Austin Clements <austin@google.com>
Date:   Tue May 17 18:21:54 2016 -0400

    runtime: add 'next' flag to ready
    
    Currently ready always puts the readied goroutine in runnext. We're
    going to have to change this for some uses, so add a flag for whether
    or not to use runnext.
    
    For now we always pass true so this is a no-op change.
    
    For #15706.
    
    Change-Id: Iaa66d8355ccfe4bbe347570cc1b1878c70fa25df
    Reviewed-on: https://go-review.googlesource.com/23171
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 79ba1e44c7c2d7ff186f9ac142a85869f352f0f6
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu May 19 10:07:41 2016 -0700

    cmd/cgo: mark stub functions as no_sanitize_thread
    
    When the generated stub functions write back the results to the stack,
    they can in some cases be writing to the same memory on the g0 stack.
    There is no race here (assuming there is no race in the Go code), but
    the thread sanitizer does not know that.  Turn off the thread sanitizer
    for the stub functions to prevent false positive warnings.
    
    Current clang suggests the no_sanitize("thread") attribute, but that
    does not work with clang 3.6 or GCC.  clang 3.6, GCC, and current clang
    all support the no_sanitize_thread attribute, so use that
    unconditionally.
    
    The test case and first version of the patch are from Dmitriy Vyukov.
    
    Change-Id: I80ce92824c6c8cf88ea0fe44f21cf50cf62474c9
    Reviewed-on: https://go-review.googlesource.com/23252
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0dcd330bc8ab19db15b4517b80e940cf154071bc
Author: Joel Sing <joel@sing.id.au>
Date:   Wed May 18 23:39:23 2016 +1000

    runtime/cgo: make cgo work with openbsd ABI changes
    
    OpenBSD 6.0 (due out November 2016) will support PT_TLS, which will
    allow for the OpenBSD cgo pthread_create() workaround to be removed.
    
    However, in order for Go to continue working on supported OpenBSD
    releases (the current release and the previous release - 5.9 and 6.0,
    once 6.0 is released), we cannot enable PT_TLS immediately. Instead,
    adjust the existing code so that it works with the previous TCB
    allocation and the new TIB allocation. This allows the same Go
    runtime to work on 5.8, 5.9 and later 6.0.
    
    Once OpenBSD 5.9 is no longer supported (May 2017, when 6.1 is
    released), PT_TLS can be enabled and the additional cgo runtime
    code removed.
    
    Change-Id: I3eed5ec593d80eea78c6656cb12557004b2c0c9a
    Reviewed-on: https://go-review.googlesource.com/23197
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Joel Sing <joel@sing.id.au>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d603c27c6b462f044a7079ce5113d90bb3ca4814
Author: Keith Randall <khr@golang.org>
Date:   Wed May 18 13:04:00 2016 -0700

    cmd/compile: large ptr literals must escape
    
    They get rewritten to NEWs, and they must be marked as escaping
    so walk doesn't try to allocate them back onto the stack.
    
    Fixes #15733
    
    Change-Id: I433033e737c3de51a9e83a5a273168dbc9110b74
    Reviewed-on: https://go-review.googlesource.com/23223
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 1ab9428eec6cd1595de571aac4c093645a6629d0
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu May 19 06:15:18 2016 +0900

    net: deflake TestDialerDualStack
    
    Fixes #15316.
    Fixes #15574.
    
    Change-Id: I3ec8bffd35b9e5123de4be983a53fc0b8c2a0895
    Reviewed-on: https://go-review.googlesource.com/23242
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 086d7b0e9e34555f32248c9242b641273a32bc7e
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu May 19 17:36:47 2016 +0900

    net: deflake TestDialerDualStackFDLeak
    
    Fixes #14717.
    Updates #15157.
    
    Change-Id: I7238b4fe39f3670c2dfe09b3a3df51a982f261ed
    Reviewed-on: https://go-review.googlesource.com/23244
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1f7a0d4b5ec7ef94b96755e9b95168abf86e9d71
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon May 16 15:39:43 2016 -0700

    runtime: don't do a plain throw when throwsplit == true
    
    The test case in #15639 somehow causes an invalid syscall frame. The
    failure is obscured because the throw occurs when throwsplit == true,
    which causes a "stack split at bad time" error when trying to print the
    throw message.
    
    This CL fixes the "stack split at bad time" by using systemstack. No
    test because there shouldn't be any way to trigger this error anyhow.
    
    Update #15639.
    
    Change-Id: I4240f3fd01bdc3c112f3ffd1316b68504222d9e1
    Reviewed-on: https://go-review.googlesource.com/23153
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 2a12035f8ec18f0a577853fda78faf2826397131
Author: Scott Bell <scott@sctsm.com>
Date:   Wed May 18 18:44:46 2016 -0700

    expvar: slightly expand documentation for Var's String method
    
    Fixes #15088.
    
    Change-Id: I7727829a4062e15c0e5e3beff4d0bfc1fa327b0f
    Reviewed-on: https://go-review.googlesource.com/23232
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 255e206b2bae9e7632043e08cf8cc0c7ce445c31
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu May 19 02:13:36 2016 +0000

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 5916dcb1 for:
    
    * http2, lex/httplex: make Transport reject bogus headers before sending
      https://golang.org/cl/23229
    
    * http2: reject more trailer values
      https://golang.org/cl/23230
    
    Fixes #14048
    Fixes #14188
    
    Change-Id: Iaa8beca6e005267a3e849a10013eb424a882f2bb
    Reviewed-on: https://go-review.googlesource.com/23234
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8d428ed218d2b65dbb4abbd9be870c95439a2b14
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu May 19 12:04:10 2016 +0900

    net: don't return io.EOF from zero byte reads on Plan 9
    
    Updates #15735.
    Fixes #15741.
    
    Change-Id: Ic4ad7e948e8c3ab5feffef89d7a37417f82722a1
    Reviewed-on: https://go-review.googlesource.com/23199
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5bcdd639331cd7f8d844fd38a674c4751423f938
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 18 21:54:12 2016 +0000

    net: don't return io.EOF from zero byte reads
    
    Updates #15735
    
    Change-Id: I42ab2345443bbaeaf935d683460fc2c941b7679c
    Reviewed-on: https://go-review.googlesource.com/23227
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c08436d1c897996055892882d23ce6778f3492f7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed May 18 15:20:56 2016 -0700

    runtime: print PC, not the counter, for a cgo traceback
    
    Change-Id: I54ed7a26a753afb2d6a72080e1f50ce9fba7c183
    Reviewed-on: https://go-review.googlesource.com/23228
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 538537a28dc956f069b83e3f1966683901205331
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed May 18 13:19:24 2016 -0700

    runtime: check only up to ptrdata bytes for pointers
    
    Fixes #14508.
    
    Change-Id: I237d0c5a79a73e6c97bdb2077d8ede613128b978
    Reviewed-on: https://go-review.googlesource.com/23224
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit ebbe4f8db76b947663cc535602054c84b01b080d
Author: David Benjamin <davidben@google.com>
Date:   Mon Feb 15 11:41:40 2016 -0500

    crypto/tls: Never resume sessions across different versions.
    
    Instead, decline the session and do a full handshake. The semantics of
    cross-version resume are unclear, and all major client implementations
    treat this as a fatal error. (This doesn't come up very much, mostly if
    the client does the browser version fallback without sharding the
    session cache.)
    
    See BoringSSL's bdf5e72f50e25f0e45e825c156168766d8442dde and OpenSSL's
    9e189b9dc10786c755919e6792e923c584c918a1.
    
    Change-Id: I51ca95ac1691870dd0c148fd967739e2d4f58824
    Reviewed-on: https://go-review.googlesource.com/21152
    Reviewed-by: Adam Langley <agl@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d8bd7b24fcc72fb4117f7fc249ceaa79f69d4e00
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 18 17:59:12 2016 +0000

    net/http: update bundled x/net/http2 for Server context changes
    
    Updates x/net/http2 to golang.org/cl/23220
    (http2: with Go 1.7 set Request.Context in ServeHTTP handlers)
    
    Fixes #15134
    
    Change-Id: I73bac2601118614528f051e85dab51dc48e74f41
    Reviewed-on: https://go-review.googlesource.com/23221
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 1efec481d0997e260f4524d45d11cc35bed63f73
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 18 20:07:16 2016 +0000

    net/http: further restrict when Transport's automatic HTTP/2 happens
    
    Make the temporary, conservative restrictions from rev 79d9f48c in Go
    1.6 permanent, and also don't do automatic TLS if the user configured
    a Dial or DialTLS hook. (Go 1.7 has Transport.Dialer instead, for
    tweaking dialing parameters)
    
    Fixes #14275
    
    Change-Id: I5550d5c1e3a293e103eb4251a3685dc204a23941
    Reviewed-on: https://go-review.googlesource.com/23222
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1249197936aef58cb2296a3cd57b519ba3243042
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed May 18 13:43:50 2016 -0700

    doc/go1.7: add runtime.KeepAlive
    
    Update #13347.
    
    Change-Id: I04bf317ed409478a859355f833d4a5e30db2b9c9
    Reviewed-on: https://go-review.googlesource.com/23226
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 075880a8e8f6363a554c100ad09a85d108953eea
Author: Keith Randall <khr@golang.org>
Date:   Wed May 18 13:28:48 2016 -0700

    cmd/compile: fix build
    
    Run live vars test only on ssa builds.
    We can't just drop KeepAlive ops during regalloc.  We need
    to replace them with copies.
    
    Change-Id: Ib4b3b1381415db88fdc2165fc0a9541b73ad9759
    Reviewed-on: https://go-review.googlesource.com/23225
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6ab45c09f6fc1bde56e3a72e50505b9a5021aaaf
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri May 13 09:02:40 2016 -0700

    runtime: add KeepAlive function
    
    Fixes #13347.
    
    Change-Id: I591a80a1566ce70efb5f68e3ad69e7e3ab98cd9b
    Reviewed-on: https://go-review.googlesource.com/23102
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3572c6418b5032fbd7e888e14fd9ad5afac85dfc
Author: Keith Randall <khr@golang.org>
Date:   Thu Apr 21 19:28:28 2016 -0700

    cmd/compile: keep pointer input arguments live throughout function
    
    Introduce a KeepAlive op which makes sure that its argument is kept
    live until the KeepAlive.  Use KeepAlive to mark pointer input
    arguments as live after each function call and at each return.
    
    We do this change only for pointer arguments.  Those are the
    critical ones to handle because they might have finalizers.
    Doing compound arguments (slices, structs, ...) is more complicated
    because we would need to track field liveness individually (we do
    that for auto variables now, but inputs requires extra trickery).
    
    Turn off the automatic marking of args as live.  That way, when args
    are explicitly nulled, plive will know that the original argument is
    dead.
    
    The KeepAlive op will be the eventual implementation of
    runtime.KeepAlive.
    
    Fixes #15277
    
    Change-Id: I5f223e65d99c9f8342c03fbb1512c4d363e903e5
    Reviewed-on: https://go-review.googlesource.com/22365
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d52022676da939cb183083da4ee0b614f86ac3b0
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu May 5 13:25:19 2016 -0700

    html/template: mention risks of the CSS, HTML, JS, etc. types
    
    Fixes #15399
    
    Change-Id: I5b9645cb9ddede6981ce0a005e0c6fdd8a751c6f
    Reviewed-on: https://go-review.googlesource.com/22824
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 8f13080267d0ddbb50da9029339796841224116a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 18 15:42:54 2016 +0000

    net/http: allow Client.CheckRedirect to use most recent response
    
    Fixes #10069
    
    Change-Id: I3819ff597d5a0c8e785403bf9d65a054f50655a6
    Reviewed-on: https://go-review.googlesource.com/23207
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 5d92aefc18317578226a3873fb8fc37411cd2184
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 18 16:18:32 2016 +0000

    vendor, net/http: update vendored hpack
    
    Updates x/net/http2/hpack to rev 6050c111 for:
    
       http2/hpack: forbid excess and invalid padding in hpack decoder
       https://golang.org/cl/23067
    
    Updates #15614
    
    Change-Id: I3fbf9b265bfa5e49e6aa97d8c34e08214cfcc49a
    Reviewed-on: https://go-review.googlesource.com/23208
    Reviewed-by: Carl Mastrangelo <notcarl@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1119af89767dc4086cba336e732afcea084c8c34
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 18 04:42:37 2016 +0000

    net/http: update bundled x/net/http2 for httptrace changes
    
    Updates x/net/http2 to 3b99394 for golang.org/cl/23205
    
    And associated tests.
    
    Fixes #12580
    
    Change-Id: I1f4b59267b453d241f2afaa315b7fe10d477e52d
    Reviewed-on: https://go-review.googlesource.com/23206
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4d2ac544a437aaf7bbd78d1a46baa5108945f06e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 30 19:57:28 2016 -0700

    net/http: fix spurious logging in Transport when server closes idle conn
    
    In https://golang.org/3210, Transport errors occurring before
    receiving response headers were wrapped in another error type to
    indicate to the retry logic elsewhere that the request might be
    re-tryable. But a check for err == io.EOF was missed, which then became
    false once io.EOF was wrapped in the beforeRespHeaderError type.
    
    The beforeRespHeaderError was too fragile. Remove it. I tried to fix
    it in an earlier version of this CL and just broke different things
    instead.
    
    Also remove the "markBroken" method. It's redundant and confusing.
    
    Also, rename the checkTransportResend method to shouldRetryRequest and
    make it return a bool instead of an error. This also helps readability.
    
    Now the code recognizes the two main reasons we'd want to retry a
    request: because we never wrote the request in the first place (so:
    count the number of bytes we've written), or because the server hung
    up on us before we received response headers for an idempotent request.
    
    As an added bonus, this could make POST requests safely re-tryable
    since we know we haven't written anything yet. But it's too late in Go
    1.7 to enable that, so we'll do that later (filed #15723).
    
    This also adds a new internal (package http) test, since testing this
    blackbox at higher levels in transport_test wasn't possible.
    
    Fixes #15446
    
    Change-Id: I2c1dc03b1f1ebdf3f04eba81792bd5c4fb6b6b66
    Reviewed-on: https://go-review.googlesource.com/23160
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9d73e146dade6553f2365de2ada0156dcb6026d9
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Tue Apr 19 19:05:53 2016 +0300

    hash/crc64: Use slicing by 8.
    
    Similar to crc32 slicing by 8.
    This also fixes a Crc64KB benchmark actually using 1024 bytes.
    
    Crc64/ISO64KB-4       147µs ± 0%      37µs ± 0%   -75.05%  (p=0.000 n=18+18)
    Crc64/ISO4KB-4       9.19µs ± 0%    2.33µs ± 0%   -74.70%  (p=0.000 n=19+20)
    Crc64/ISO1KB-4       2.31µs ± 0%    0.60µs ± 0%   -73.81%  (p=0.000 n=19+15)
    Crc64/ECMA64KB-4      147µs ± 0%      37µs ± 0%   -75.05%  (p=0.000 n=20+20)
    Crc64/Random64KB-4    147µs ± 0%      41µs ± 0%   -72.17%  (p=0.000 n=20+18)
    Crc64/Random16KB-4   36.7µs ± 0%    36.5µs ± 0%    -0.54%  (p=0.000 n=18+19)
    
    name                old speed     new speed      delta
    Crc64/ISO64KB-4     446MB/s ± 0%  1788MB/s ± 0%  +300.72%  (p=0.000 n=18+18)
    Crc64/ISO4KB-4      446MB/s ± 0%  1761MB/s ± 0%  +295.20%  (p=0.000 n=18+20)
    Crc64/ISO1KB-4      444MB/s ± 0%  1694MB/s ± 0%  +281.46%  (p=0.000 n=19+20)
    Crc64/ECMA64KB-4    446MB/s ± 0%  1788MB/s ± 0%  +300.77%  (p=0.000 n=20+20)
    Crc64/Random64KB-4  446MB/s ± 0%  1603MB/s ± 0%  +259.32%  (p=0.000 n=20+18)
    Crc64/Random16KB-4  446MB/s ± 0%   448MB/s ± 0%    +0.54%  (p=0.000 n=18+20)
    
    Change-Id: I1c7621d836c486d6bfc41dbe1ec2ff9ab11aedfc
    Reviewed-on: https://go-review.googlesource.com/22222
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 6cd698d71da92aeb4540c378213ac4a1c6687097
Author: Lee Hinman <hinman@gmail.com>
Date:   Mon Mar 7 22:31:31 2016 -0600

    crypto/x509: add Admin & User Keychains to FetchPEMRoots on Darwin
    
    in root_cgo_darwin.go only certificates from the System Domain
    were being used in FetchPEMRoots.  This patch adds support for
    getting certificates from all three domains (System, Admin,
    User).  Also it will only read trusted certificates from those
    Keychains.  Because it is possible to trust a non Root certificate,
    this patch also adds a checks to see if the Subject and Issuer
    name are the same.
    
    Fixes #14514
    
    Change-Id: Ia03936d7a61d1e24e99f31c92f9927ae48b2b494
    Reviewed-on: https://go-review.googlesource.com/20351
    Reviewed-by: Russ Cox <rsc@golang.org>

commit b30fcbc9f59ca4bf1723eb6743b47fa89b3847a3
Author: Adam Langley <agl@golang.org>
Date:   Thu Apr 14 13:52:56 2016 -0700

    crypto/ecdsa: reject negative inputs.
    
    The fact that crypto/ecdsa.Verify didn't reject negative inputs was a
    mistake on my part: I had unsigned numbers on the brain. However, it
    doesn't generally cause problems. (ModInverse results in zero, which
    results in x being zero, which is rejected.)
    
    The amd64 P-256 code will crash when given a large, negative input.
    
    This fixes both crypto/ecdsa to reject these values and also the P-256
    code to ignore the sign of inputs.
    
    Change-Id: I6370ed7ca8125e53225866f55b616a4022b818f8
    Reviewed-on: https://go-review.googlesource.com/22093
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2ba8fc5b086942dbb23282702f61c813298867f3
Author: Monty Taylor <mordred@inaugust.com>
Date:   Tue May 17 08:24:18 2016 -0500

    vcs: Add support for git.openstack.org
    
    Go is being proposed as an officially supported language for elements of
    OpenStack:
    
      https://review.openstack.org/#/c/312267/
    
    As such, repos that exist in OpenStack's git infrastructure
    are likely to become places from which people might want to go get
    things. Allow optional .git suffixes to allow writing code that depends
    on git.openstack.org repos that will work with older go versions while
    we wait for this support to roll out.
    
    Change-Id: Ia64bdb1dafea33b1c3770803230d30ec1059df22
    Reviewed-on: https://go-review.googlesource.com/23135
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d35a4158ab66aef99d9204c65cc2e2fa74b57a73
Author: David Chase <drchase@google.com>
Date:   Mon May 9 14:59:25 2016 -0400

    cmd/compile: reduce element size of arrays in sparse{map,set}
    
    sparseSet and sparseMap only need 32 bit integers in their
    arrays, since a sparseEntry key is also limited to 32 bits.
    This appears to reduce the space allocated for at least
    one pathological compilation by 1%, perhaps more.
    
    Not necessarily for 1.7, but it saves a little and is very
    low-risk.
    
    Change-Id: Icf1185859e9f5fe1261a206b441e02c34f7d02fd
    Reviewed-on: https://go-review.googlesource.com/22972
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 2380a039c0457141e28f8f927139e1f9c38f8205
Author: Cuihtlauac ALVARADO <cuihtlauac.alvarado@orange.com>
Date:   Tue May 17 09:27:00 2016 +0200

    runtime: in tests, make sure gdb does not start with a shell
    
    On some systems, gdb is set to: "startup-with-shell on". This
    breaks runtime_test. This just make sure gdb does not start by
    spawning a shell.
    
    Fixes #15354
    
    Change-Id: Ia040931c61dea22f4fdd79665ab9f84835ecaa70
    Reviewed-on: https://go-review.googlesource.com/23142
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c65647d6204531e93c19ea2dba01ff13d1b8ef31
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 19 15:02:06 2016 -0700

    cmd/compile: handle unsafe.Pointer(f()) correctly
    
    Previously statements like
    
        f(unsafe.Pointer(g()), int(h()))
    
    would be reordered into a sequence of statements like
    
        autotmp_g := g()
        autotmp_h := h()
        f(unsafe.Pointer(autotmp_g), int(autotmp_h))
    
    which can leave g's temporary value on the stack as a uintptr, rather
    than an unsafe.Pointer. Instead, recognize uintptr-to-unsafe.Pointer
    conversions when reordering function calls to instead produce:
    
        autotmp_g := unsafe.Pointer(g())
        autotmp_h := h()
        f(autotmp_g, int(autotmp_h))
    
    Fixes #15329.
    
    Change-Id: I2cdbd89d233d0d5c94791513a9fd5fd958d11ed5
    Reviewed-on: https://go-review.googlesource.com/22273
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit c6a5b3602a87b2d1321ad11aa64b7f588bbb683b
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue May 17 18:07:07 2016 -0700

    doc/effective_go: clarify backward function reference
    
    Fixes #14656.
    
    Change-Id: I37a9aa51705ae18bd034f2cc6dbf06a55f969197
    Reviewed-on: https://go-review.googlesource.com/23202
    Reviewed-by: Rob Pike <r@golang.org>

commit d4ed8da9969dd04a3b10683971185359e5ec5302
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed May 18 13:02:39 2016 +0900

    net: don't increase test table rows when using -test.count flag
    
    Change-Id: I7881e3353dc5cd9755a79ea0eab146c6a0a08306
    Reviewed-on: https://go-review.googlesource.com/23195
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6de34e6e25732757b7b40e4053c6ac7fb6d00df4
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed May 18 10:54:20 2016 +0900

    net: deflake TestLookupPort on Android
    
    Looks like some version of Android still fails with "servname not
    supported for ai_socktype". It probably doesn't support
    ai_socktype=SOCK_STREAM.
    
    Updates #14576.
    
    Change-Id: I77ecff147d5b759e3281b3798c60f150a4aab811
    Reviewed-on: https://go-review.googlesource.com/23194
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit cdcb8271a411bac78aa886a5998ac2c10b23f058
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 18 01:00:32 2016 +0000

    regexp/syntax: clarify that \Z means Perl's \Z
    
    Fixes #14793
    
    Change-Id: I408056d096cd6a999fa5e349704b5ea8e26d2e4e
    Reviewed-on: https://go-review.googlesource.com/23201
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 23a59ba17cbfeb5380845f309f88165b2e38930b
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue May 17 18:16:47 2016 -0700

    runtime: deflake TestSignalExitStatus
    
    The signal might get delivered to a different thread, and that thread
    might not run again before the currently running thread returns and
    exits. Sleep to give the other thread time to pick up the signal and
    crash.
    
    Not tested for all cases, but, optimistically:
    Fixes #14063.
    
    Change-Id: Iff58669ac6185ad91cce85e0e86f17497a3659fd
    Reviewed-on: https://go-review.googlesource.com/23203
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit ac66bb343181bef154342638d45dcc2c695ded00
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Tue May 17 20:22:48 2016 -0600

    crypto/x509: fix typo in docs for CreateCertificateRequest
    
    Update the doc for CreateCertificateRequest
    to state that it creates a
      `new certificate request`
    instead of just a
      `new certificate`
    
    Fixes #14649.
    
    Change-Id: Ibbbcf91d74168998990990e78e5272a6cf294d51
    Reviewed-on: https://go-review.googlesource.com/23204
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f962e6e0e21b9e73981e6cf2407ea01fce04b989
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 18 00:35:43 2016 +0000

    net/http: add test confirming a connection reuse case
    
    Verify that for a server doing chunked encoding, with the final data
    and EOF arriving together, the client will reuse the connection even
    if it closes the body without seeing an EOF. The server sends at least
    one non-zero chunk and one zero chunk. This verifies that the client's
    bufio reading reads ahead and notes the EOF, so even if the JSON
    decoder doesn't read the EOF itself, as long as somebody sees it, a
    close won't forcible tear down the connection. This was true at least
    of https://golang.org/cl/21291
    
    No code change. Test already passed (even with lots of runs, including
    in race mode with randomized goroutine scheduling).
    
    Updates #15703
    
    Change-Id: I2140b3eec6b099b6b6e54f153fe271becac5d949
    Reviewed-on: https://go-review.googlesource.com/23200
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 733162fd6c0df8bd700859974957b25045fe9ee4
Author: James Chacon <jchacon@google.com>
Date:   Fri May 6 11:51:56 2016 -0700

    runtime: prevent racefini from being invoked more than once
    
    racefini calls __tsan_fini which is C code and at the end of it
    invoked the standard C library exit(3) call. This has undefined
    behavior if invoked more than once. Specifically in C++ programs
    it caused static destructors to run twice. At least on glibc
    impls it also means the at_exit handlers list (where those are
    stored) also free's a list entry when it completes these. So invoking
    twice results in a double free at exit which trips debug memory
    allocation tracking.
    
    Fix all of this by using an atomic as a boolean barrier around
    calls to racefini being invoked > 1 time.
    
    Fixes #15578
    
    Change-Id: I49222aa9b8ded77160931f46434c61a8379570fc
    Reviewed-on: https://go-review.googlesource.com/22882
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f744717d1924340b8f5e5a385e99078693ad9097
Author: Alessandro Arzilli <alessandro.arzilli@gmail.com>
Date:   Sat May 14 07:54:02 2016 +0200

    debug/gosym: parse remote packages correctly
    
    Fixes #15675
    
    Change-Id: I8bad220988e5d690f20804db970b2db037c81187
    Reviewed-on: https://go-review.googlesource.com/23086
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7b597f4d92a844e30694095485c335baa93a1ad1
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri May 13 05:02:00 2016 +0900

    net: deflake TestLookupPort for embedded, security-hardened platforms
    
    Fixes #14576.
    
    Change-Id: I760907c67c97cb827cf48ba7eb0bb2f4f8d4d790
    Reviewed-on: https://go-review.googlesource.com/23111
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9d36cac99c8248292be1cb6a196bbe0715d0c057
Author: Colin Cross <ccross@android.com>
Date:   Tue May 17 13:09:11 2016 -0700

    reflect: remove out of date UTF-8 StructOf restriction
    
    The initial implementation of reflect.StructOf in
    https://golang.org/cl/9251 had a limitation that field names had to be
    ASCII, which was later lifted by https://golang.org/cl/21777.  Remove
    the out-of-date documentation disallowing UTF-8 field names.
    
    Updates: #5748
    Updates: #15064
    
    Change-Id: I2c5bfea46bfd682449c6e847fc972a1a131f51b7
    Reviewed-on: https://go-review.googlesource.com/23170
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 1a3e4f05a067f37e8ee8f7a0d5eec39a7e0cad84
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Tue May 17 20:16:41 2016 +0800

    os/signal: fix wrong constant name in the documentation
    
    os.SIGINT is not defined, os.Interrupt or syscall.SIGINT should be used.
    
    Change-Id: I39867726d28e179d1160a4fd353b7bea676c9dbb
    Reviewed-on: https://go-review.googlesource.com/23127
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 495e3c60aa61615dd603050ac47f86468f8222b6
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue May 17 12:20:16 2016 +0900

    net: use IPv4/IPv6 reserved address blocks for documentation
    
    Also replaces google.com with golang.org in package documentation.
    
    Updates #15228.
    
    Change-Id: I554fa960878fa44557a522635ed412d8d7548d3f
    Reviewed-on: https://go-review.googlesource.com/23126
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca831135b34d13fe5b774a6b23867dd1a277786a
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue May 17 07:07:58 2016 +0900

    net: simplify interfaceTable for BSD variants
    
    This change drops parseInterfaceTable which becomes unnecessary by the
    golang.org/x/net/route plumbing.
    
    Change-Id: I05f96e347de950bb1e9292bb3eeff01bb40e292f
    Reviewed-on: https://go-review.googlesource.com/23125
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5ccd571f3e2798e4afe8affa354351b5055cb20d
Author: Scott Bell <scott@sctsm.com>
Date:   Mon May 16 12:51:52 2016 -0700

    crypto/tls: document certificate chains in LoadX509KeyPair
    
    Fixes #15348
    
    Change-Id: I9e0e1e3a26fa4cd697d2c613e6b4952188b7c7e1
    Reviewed-on: https://go-review.googlesource.com/23150
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ccdca832c569727f7985966a3324421a69739f57
Author: andrew werner <andrew@upthere.com>
Date:   Tue Dec 15 14:42:28 2015 -0800

    io: make chained multiReader Read more efficient
    
    before this change, when io.MultiReader was called many times but contain few
    underlying readers, calls to Read were unnecessarily expensive.
    
    Fixes #13558
    
    Change-Id: I3ec4e88c7b50c075b148331fb1b7348a5840adbe
    Reviewed-on: https://go-review.googlesource.com/17873
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 28c201860e0838b10972e805582007f9eb61e7ac
Author: Simon Thulbourn <simon+github@thulbourn.com>
Date:   Mon Dec 7 16:36:11 2015 +0000

    mime/multipart: sort header keys to ensure reproducible output
    
    Adds a transparent sort to the mime/multipart package, which is
    only used in the CreatePart func. This will ensure the ordering
    of the MIMEHeader.
    
    The point of this change was to ensure the output would be consistent
    and something that could be depended on.
    
    Fixes #13522
    
    Change-Id: I9584ef9dbe98ce97d536d897326914653f8d9ddf
    Reviewed-on: https://go-review.googlesource.com/17497
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 99ef42fe7b310749d83f9b76d814e78fe8139b42
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon May 16 15:45:18 2016 -0700

    A+C: add Andrew Werner (corporate CLA for Upthere, Inc)
    
    Change-Id: I7627e480d5d2366cba223fd81635c4115649f752
    Reviewed-on: https://go-review.googlesource.com/23154
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c1b32acefb3b1438981ba9dc4f5259999e9fc2ab
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon May 16 14:11:01 2016 -0700

    runtime: yield after raising signal that should kill process
    
    Issue #15613 points out that the darwin builders have been getting
    regular failures in which a process that should exit with a SIGPIPE
    signal is instead exiting with exit status 2. The code calls
    runtime.raise. On most systems runtime.raise is the equivalent of
    pthread_kill(gettid(), sig); that is, it kills the thread with the
    signal, which should ensure that the program does not keep going. On
    darwin, however, runtime.raise is actually kill(getpid(), sig); that is,
    it sends a signal to the entire process. If the process decides to
    deliver the signal to a different thread, then it is possible that in
    some cases the thread that calls raise is able to execute the next
    system call before the signal is actually delivered. That would cause
    the observed error.
    
    I have not been able to recreate the problem myself, so I don't know
    whether this actually fixes it. But, optimistically:
    
    Fixed #15613.
    
    Change-Id: I60c0a9912aae2f46143ca1388fd85e9c3fa9df1f
    Reviewed-on: https://go-review.googlesource.com/23152
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1b86862d0d6eeb818bc622fee5f140951bd31063
Author: Scott Bell <scott@sctsm.com>
Date:   Mon May 16 13:13:25 2016 -0700

    doc: fix broken link to the vet command documentation
    
    Fixes #15188
    
    Change-Id: I0ab7791f7db499cef6bc52292d3d93ff4da7caff
    Reviewed-on: https://go-review.googlesource.com/23151
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6b99fb5bea56b9674161b6c5415c1d05f19dfdc6
Author: David Chase <drchase@google.com>
Date:   Thu Apr 21 13:24:58 2016 -0400

    cmd/compile: use sparse algorithm for phis in large program
    
    This adds a sparse method for locating nearest ancestors
    in a dominator tree, and checks blocks with more than one
    predecessor for differences and inserts phi functions where
    there are.
    
    Uses reversed post order to cut number of passes, running
    it from first def to last use ("last use" for paramout and
    mem is end-of-program; last use for a phi input from a
    backedge is the source of the back edge)
    
    Includes a cutover from old algorithm to new to avoid paying
    large constant factor for small programs.  This keeps normal
    builds running at about the same time, while not running
    over-long on large machine-generated inputs.
    
    Add "phase" flags for ssa/build -- ssa/build/stats prints
    number of blocks, values (before and after linking references
    and inserting phis, so expansion can be measured), and their
    product; the product governs the cutover, where a good value
    seems to be somewhere between 1 and 5 million.
    
    Among the files compiled by make.bash, this is the shape of
    the tail of the distribution for #blocks, #vars, and their
    product:
    
             #blocks        #vars       product
     max    6171    28180   173,898,780
    99.9%   1641     6548    10,401,878
      99%    463     1909       873,721
      95%    152      639        95,235
      90%     84      359        30,021
    
    The old algorithm is indeed usually fastest, for 99%ile
    values of usually.
    
    The fix to LookupVarOutgoing
    ( https://go-review.googlesource.com/#/c/22790/ )
    deals with some of the same problems addressed by this CL,
    but on at least one bug ( #15537 ) this change is still
    a significant help.
    
    With this CL:
    /tmp/gopath$ rm -rf pkg bin
    /tmp/gopath$ time go get -v -gcflags -memprofile=y.mprof \
       github.com/gogo/protobuf/test/theproto3/combos/...
    ...
    real    4m35.200s
    user    13m16.644s
    sys     0m36.712s
    and pprof reports 3.4GB allocated in one of the larger profiles
    
    With tip:
    /tmp/gopath$ rm -rf pkg bin
    /tmp/gopath$ time go get -v -gcflags -memprofile=y.mprof \
       github.com/gogo/protobuf/test/theproto3/combos/...
    ...
    real    10m36.569s
    user    25m52.286s
    sys     4m3.696s
    and pprof reports 8.3GB allocated in the same larger profile
    
    With this CL, most of the compilation time on the benchmarked
    input is spent in register/stack allocation (cumulative 53%)
    and in the sparse lookup algorithm itself (cumulative 20%).
    
    Fixes #15537.
    
    Change-Id: Ia0299dda6a291534d8b08e5f9883216ded677a00
    Reviewed-on: https://go-review.googlesource.com/22342
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 466cae6ca9f28c971a2d716a5a49dc76bbd1d5bb
Author: Austin Clements <austin@google.com>
Date:   Mon May 16 15:27:48 2016 -0400

    runtime: use GOTRACEBACK=system for TestStackBarrierProfiling
    
    This should help with debugging failures.
    
    For #15138 and #15477.
    
    Change-Id: I77db2b6375d8b4403d3edf5527899d076291e02c
    Reviewed-on: https://go-review.googlesource.com/23134
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 181000896e381f07e8f105eef2667d566729f6eb
Author: Scott Bell <scott@sctsm.com>
Date:   Mon May 16 12:36:02 2016 -0700

    encoding/json: document that object keys are sorted
    
    Fixes #15424
    
    Change-Id: Ib9e97509f5ac239ee54fe6fe37152a7f5fc75087
    Reviewed-on: https://go-review.googlesource.com/23109
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 64770f642fe4b2f3af6f30d1e058e934e73d0b9b
Author: Austin Clements <austin@google.com>
Date:   Mon May 9 11:29:34 2016 -0400

    runtime: use conventional shift style for gcBitsChunkBytes
    
    The convention for writing something like "64 kB" is 64<<10, since
    this is easier to read than 1<<16. Update gcBitsChunkBytes to follow
    this convention.
    
    Change-Id: I5b5a3f726dcf482051ba5b1814db247ff3b8bb2f
    Reviewed-on: https://go-review.googlesource.com/23132
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 30ded16596246c719ede90acf45ecb31d8f428f6
Author: Austin Clements <austin@google.com>
Date:   Wed May 11 16:29:07 2016 -0400

    runtime: remove obsolete comment from scanobject
    
    Change-Id: I5ebf93b60213c0138754fc20888ae5ce60237b8c
    Reviewed-on: https://go-review.googlesource.com/23131
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit b66b97e0a120880e37b03eba00c0c7679f0a70c1
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Mon May 16 10:11:59 2016 -0300

    net/http: mention ALPN in http.Server.TLSNextProto documentation
    
    Make clear negotiation can happen via NPN or ALPN, similar to
    http.Transport.TLSNextProto and x/net/http2.NextProtoTLS.
    
    Change-Id: Ied00b842bc04e11159d6d2107beda921cefbc6ca
    Reviewed-on: https://go-review.googlesource.com/23108
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6a6c1d9841a1957a2fd292df776ea920ae38ea00
Author: Artyom Pervukhin <artyom.pervukhin@gmail.com>
Date:   Mon May 16 15:30:28 2016 +0300

    net/http/httputil: don't add User-Agent header by proxy made with NewSingleHostReverseProxy
    
    If client does not provided User-Agent header, do not set default one
    used by net/http package when doing request to backend.
    
    Fixes #15524
    
    Change-Id: I9a46bb3b7ec106bc7c3071e235b872d279994d67
    Reviewed-on: https://go-review.googlesource.com/23089
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a101b85e00f302706d8b1de1d2173a154d5f54cc
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sun May 15 17:24:51 2016 +0900

    syscall: fix missing use of use function in sysctl
    
    Updates #13372.
    
    Change-Id: Id2402a781474e9d0bb0901c5844adbd899f76cbd
    Reviewed-on: https://go-review.googlesource.com/23123
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5fae488633ff247b9b7964dc45b8fe4b491f5a16
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sun May 15 17:16:04 2016 +0900

    syscall: deprecate BPF/LSF
    
    Updates #14982.
    
    Change-Id: Id12b1e61456832d2b2ffbdbe8cf0a1db4444b1e4
    Reviewed-on: https://go-review.googlesource.com/23122
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6d66819587b9de3d7602721830884fd92a0f7090
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Apr 23 22:36:41 2016 +0900

    syscall: deprecate routing message APIs for BSD variants
    
    Also removes unnecessary test cases for avoiding unexpected failures on
    newer operating systems.
    
    Updates #14724.
    
    Change-Id: I2291585d951fb70383da68293a6ac1ff3524c7f7
    Reviewed-on: https://go-review.googlesource.com/22452
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6cc6ef82ea1ea5c904bb44c14bb6f4eb33937bb1
Author: David du Colombier <0intro@gmail.com>
Date:   Sun May 15 20:12:34 2016 +0200

    mime: fix mime type file name on Plan 9
    
    There was a typo introduced in the initial
    implementation of the Plan 9 support of
    the mime package.
    
    On Plan 9, the mime type file name should be
    /sys/lib/mimetype instead of /sys/lib/mimetypes.
    
    Change-Id: If0f0a9b6f3fbfa8dde551f790e83bdd05e8f0acb
    Reviewed-on: https://go-review.googlesource.com/23087
    Run-TryBot: Minux Ma <minux@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b4bf0663fa3334d053981f222eed5015a0a1b8df
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Apr 23 22:36:41 2016 +0900

    net: golang.org/x/net/route plumbing
    
    This change makes use of new routing message APIs for BSD variants to
    support FreeBSD 11 and newer versions of other BSDs.
    
    Fixes #7849.
    Fixes #14724.
    
    Change-Id: I56c7886d6622cdeddd7cc29c8a8062dcc06216d5
    Reviewed-on: https://go-review.googlesource.com/22451
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0bc14f57ec7e5518af711a64103ca2ac72f19a6e
Author: Keith Randall <khr@golang.org>
Date:   Sat May 14 17:33:23 2016 -0700

    strings: fix Contains on amd64
    
    The 17-31 byte code is broken.  Disabled it.
    
    Added a bunch of tests to at least cover the cases
    in indexShortStr.  I'll channel Brad and wonder why
    this CL ever got in without any tests.
    
    Fixes #15679
    
    Change-Id: I84a7b283a74107db865b9586c955dcf5f2d60161
    Reviewed-on: https://go-review.googlesource.com/23106
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit aba7b3e91cea1c95a1803357bcf219b0591d3c12
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Apr 23 22:36:41 2016 +0900

    vendor: import golang.org/x/net/route
    
    golang.org/x/net/route becomes vendor/golang.org/x/net/route.
    
    At git rev 30be488 (golang.org/cl/22446)
    
    Updates #14724.
    
    Change-Id: I41cfb5443aeecac4c71e843c09eb8c1d4b7413ea
    Reviewed-on: https://go-review.googlesource.com/22450
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2699da180967e5d5dab2cc64deeca4680bf2b2fb
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri May 13 14:26:30 2016 +1000

    time: set Local.name on windows
    
    Local.String() returns "Local" on every OS, but windows.
    Change windows code to do like others.
    
    Updates #15568
    
    Change-Id: I7a4d2713d940e2a01cff9d7f5cefc89def07546a
    Reviewed-on: https://go-review.googlesource.com/23078
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5f833121cb8e7722667d17dcf07bb32e4e524f23
Author: Kevin Burke <kev@inburke.com>
Date:   Sat May 14 10:23:09 2016 -0700

    archive/zip: use HTTPS for documentation link
    
    The resource is available over (and redirects to) HTTPS, it seems like a good
    idea to save a redirect and ensure an encrypted connection.
    
    Change-Id: I262c7616ae289cdd756b6f67573ba6bd7e3e0ca6
    Reviewed-on: https://go-review.googlesource.com/23104
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 094afe0cf1aa4182d62a3aea6970933b7ae4a27d
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Sat May 14 10:27:31 2016 +0800

    cmd/vendor: move cmd/internal/unvendor packages to cmd/vendor
    
    Updates #14047
    
    Change-Id: I4b150533393bfb90e840497095ac32bcca4f04c2
    Reviewed-on: https://go-review.googlesource.com/23114
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6181db53dbfec513300a236debbdc01735f00c07
Author: Austin Clements <austin@google.com>
Date:   Thu May 12 18:10:03 2016 -0400

    runtime: improve heapBitsSetType documentation
    
    Currently the heapBitsSetType documentation says that there are no
    races on the heap bitmap, but that isn't exactly true. There are no
    *write-write* races, but there are read-write races. Expand the
    documentation to explain this and why it's okay.
    
    Change-Id: Ibd92b69bcd6524a40a9dd4ec82422b50831071ed
    Reviewed-on: https://go-review.googlesource.com/23092
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit d8b08c3aa49d9aaac6ff34dbb8516040cc88a13a
Author: Austin Clements <austin@google.com>
Date:   Wed May 11 14:57:33 2016 -0400

    runtime: perform publication barrier even for noscan objects
    
    Currently we only execute a publication barrier for scan objects (and
    skip it for noscan objects). This used to be okay because GC would
    never consult the object itself (so it wouldn't observe uninitialized
    memory even if it found a pointer to a noscan object), and the heap
    bitmap was pre-initialized to noscan.
    
    However, now we explicitly initialize the heap bitmap for noscan
    objects when we allocate them. While the GC will still never consult
    the contents of a noscan object, it does need to see the initialized
    heap bitmap. Hence, we need to execute a publication barrier to make
    the bitmap visible before user code can expose a pointer to the newly
    allocated object even for noscan objects.
    
    Change-Id: Ie4133c638db0d9055b4f7a8061a634d970627153
    Reviewed-on: https://go-review.googlesource.com/23043
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 041cc148faae23714c38ec9e4388715d99aef518
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri May 13 05:02:00 2016 +0900

    net: deflake TestPointToPointInterface and TestInterfaceArrivalAndDeparture
    
    Fixes #6879.
    
    Change-Id: I9ed2460cf14cb9322d9521e7af910efa48abdaf0
    Reviewed-on: https://go-review.googlesource.com/23112
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 19619c21c36d1695000f5b798241971dfdb2cc2d
Author: Tom Bergan <tombergan@google.com>
Date:   Thu May 12 22:03:46 2016 -0700

    net, net/http: don't trace DNS dials
    
    This fixes change https://go-review.googlesource.com/#/c/23069/, which
    assumes all DNS requests are UDP. This is not true -- DNS requests can
    be TCP in some cases. See:
    https://tip.golang.org/src/net/dnsclient_unix.go#L154
    https://en.wikipedia.org/wiki/Domain_Name_System#Protocol_transport
    
    Also, the test code added by the above change doesn't actually test
    anything because the test uses a faked DNS resolver that doesn't
    actually make any DNS queries. I fixed that by adding another test
    that uses the system DNS resolver.
    
    Updates #12580
    
    Change-Id: I6c24c03ebab84d437d3ac610fd6eb5353753c490
    Reviewed-on: https://go-review.googlesource.com/23101
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0cc710dca63b79ed2dd6ce9375502e76e5fc0484
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri May 13 12:33:27 2016 -0400

    reflect: fix method type string
    
    By picking up a spurious tFlagExtraStar, the method type was printing
    as unc instead of func.
    
    Updates #15673
    
    Change-Id: I0c2c189b99bdd4caeb393693be7520b8e3f342bf
    Reviewed-on: https://go-review.googlesource.com/23103
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2cc0f2209653f9f6931e0c3a1fb63e581a0fe87f
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri May 13 11:10:29 2016 +0900

    Revert "cmd/build: reject non-existant directories in ImportDir"
    
    This reverts commit 7af2ce3f159760033c903b3730bfb5995b4edd40.
    
    The commit had a wrong prefix in the description line, probably
    misreconginized something. As a result it broke golang.org/x/tools/godoc
    and golang.org/x/tools/cmd/godoc like the following:
    
    --- FAIL: TestCLI (10.90s)
    --- FAIL: TestWeb (13.74s)
    FAIL
    FAIL        golang.org/x/tools/cmd/godoc    36.428s
    --- FAIL: TestCommandLine (0.00s)
    FAIL
    FAIL        golang.org/x/tools/godoc        0.068s
    
    Change-Id: I362a862a4ded8592dec7488a28e7a256adee148f
    Reviewed-on: https://go-review.googlesource.com/23076
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit be5782c330f2c743f81942f5bc1b9c1e04296d44
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri May 13 09:25:25 2016 +0200

    doc/go1.7.txt: add cmd/trace changes
    
    Change-Id: Iaf455d1a2863ff752e0c398e1c364373b4d36614
    Reviewed-on: https://go-review.googlesource.com/23084
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 15f2d0e45227f68024f3415d9466055877b70426
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu May 12 22:12:11 2016 +0000

    net, net/http: don't trace UDP dials
    
    The httptrace.ConnectStart and ConnectDone hooks are just about the
    post-DNS connection to the host. We were accidentally also firing on
    the UDP dials to DNS. Exclude those for now. We can add them back
    later as separate hooks if desired. (but they'd only work for pure Go
    DNS)
    
    This wasn't noticed earlier because I was developing on a Mac at the
    time, which always uses cgo for DNS. When running other tests on
    Linux, I started seeing UDP dials.
    
    Updates #12580
    
    Change-Id: I2b2403f2483e227308fe008019f1100f6300250b
    Reviewed-on: https://go-review.googlesource.com/23069
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4cffe44e361deb39e3274774a7984ab78a5b3931
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu May 12 15:04:05 2016 +1000

    syscall: separate stdlib imports from others in mksyscall_windows.go
    
    Change-Id: I6610b872578d161e535565258039d9f064f01456
    Reviewed-on: https://go-review.googlesource.com/23070
    Reviewed-by: Nigel Tao <nigeltao@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit eb69476c66339ca494f98e65a78d315da99a9c79
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu May 12 13:55:46 2016 -0700

    text/template: detect pathologically recursive template invocations
    
    Return an error message instead of eating memory and eventually
    triggering a stack overflow.
    
    Fixes #15618
    
    Change-Id: I3dcf1d669104690a17847a20fbfeb6d7e39e8751
    Reviewed-on: https://go-review.googlesource.com/23091
    Reviewed-by: Rob Pike <r@golang.org>

commit 8f48efb31c7cdddeec7d4221174254466b0891dd
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Fri May 13 02:05:48 2016 +0530

    fmt: remove extra space in too few arguments example
    
    Change-Id: Iae4855c52c4da9755277251d22121226507ea26a
    Reviewed-on: https://go-review.googlesource.com/23074
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7af2ce3f159760033c903b3730bfb5995b4edd40
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Tue May 10 21:28:30 2016 -0700

    cmd/build: reject non-existant directories in ImportDir
    
    Re-apply @adg's CL https://golang.org/cl/7129048 that was
    previously disabled in https://golang.org/cl/7235052 because
    it broke `godoc net/http` for go1.1.
    
    Currently `godoc net/http` seems to work fine with this CL.
    
    Fixes #3428.
    
    Change-Id: I7df06df02fd62dededac6ec60bea62561be59cf1
    Reviewed-on: https://go-review.googlesource.com/23013
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 7ae273923cdd5d00b72c293b57ade8a1e290a4a3
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Tue May 3 16:44:25 2016 +0200

    cmd/trace: split large traces into parts
    
    Trace viewer cannot handle traces larger than 256MB (limit on js string size):
    https://github.com/catapult-project/catapult/issues/627
    And even that is problematic (chrome hangs and crashes).
    Split large traces into 100MB parts. Somewhat clumsy, but I don't see any other
    solution (other than rewriting trace viewer). At least it works reliably now.
    
    Fixes #15482
    
    Change-Id: I993b5f43d22072c6f5bd041ab5888ce176f272b2
    Reviewed-on: https://go-review.googlesource.com/22731
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>

commit ccf2c019921999f49ba2ab8cbfe70ebecc986f46
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Thu May 12 15:27:30 2016 +0300

    go/types: fix certain vet warnings
    
    Updates #11041
    
    Change-Id: I4e1c670d2b7fc04927d77c6f933cee39b7d48b6e
    Reviewed-on: https://go-review.googlesource.com/23083
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a8a2b38fb9e3886b6942621bf4b24ae062f0460b
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu May 12 12:09:18 2016 -0400

    cmd/compile/internal/gc: minor cleanup of init.go comments
    
    Step 5 was deleted in f3575a9 however the numbering of the other
    steps wasn't adjusted accordingly.
    
    While we're here: clean up the whitespace, add curly braces where
    appropriate and delete semicolons.
    
    Change-Id: I4e77b2d3ee8460abe4bfb993674f83e35be8ff17
    Reviewed-on: https://go-review.googlesource.com/23066
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e54dfc2ec4a057aa1bf06f9bef5cdb2e769a669d
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Thu May 12 15:03:22 2016 +0300

    testing: fix vet warning
    
    Updates #11041
    
    Change-Id: I32a381854e6a4fd791db380150efab57e6dfc38c
    Reviewed-on: https://go-review.googlesource.com/23081
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 376e6415402b4e62f96fb7f8f7a99d352aa9c1b3
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Thu May 12 15:13:22 2016 +0300

    cmd: fixed certain vet warnings
    
    Updates #11041
    
    Change-Id: I7f2583d08f344d6622027c5e8a5de1f5d2f2881c
    Reviewed-on: https://go-review.googlesource.com/23082
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a71584975dedd4f4975d65047ec7660191a49613
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Thu May 12 15:00:10 2016 +0300

    reflect: fix vet warnings
    
    Updated #11041
    
    Change-Id: I4a110ba8fefb367a1049b4a65dd20c39eb890ea2
    Reviewed-on: https://go-review.googlesource.com/23080
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5bd37b8e78980beed2861bbdc7f8f28fc3f72671
Author: Joel Sing <joel@sing.id.au>
Date:   Mon May 9 02:13:03 2016 +1000

    runtime: stop using sigreturn on openbsd/386
    
    In future releases of OpenBSD, the sigreturn syscall will no longer
    exist. As such, stop using sigreturn on openbsd/386 and just return
    from the signal trampoline (as we already do for openbsd/amd64 and
    openbsd/arm).
    
    Change-Id: Ic4de1795bbfbfb062a685832aea0d597988c6985
    Reviewed-on: https://go-review.googlesource.com/23024
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 81b70f3751374ccd1eda2f536156dd91cd9f9c9b
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed May 11 16:16:37 2016 +1000

    syscall: make mksyscall_windows.go -systemdll flag true by default
    
    Updates #15167
    
    Change-Id: I826f67e75011ba79325a1294ac0d70d7c6a3e32f
    Reviewed-on: https://go-review.googlesource.com/23022
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 21d781070cea6001ee541933ed76dc6da96bde4c
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 11 13:39:36 2016 -0700

    cmd/compile: use one format for exporting calls of builtin functions
    
    Minor cleanup. Each of these cases appears both during export and
    import when running all.bash and thus is tested by all.bash.
    
    Change-Id: Iaa4a5a5b163cefe33e43d08d396e02a02e5c22a5
    Reviewed-on: https://go-review.googlesource.com/23060
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit eb9062b7bf77a5051b3db6f3e944739a486ca1e4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 11 15:01:28 2016 -0700

    net/http: keep HTTP/1.0 keep-alive conns open if response can't have a body
    
    Fixes #15647
    
    Change-Id: I588bfa4eb336d1da1fcda8d06e32ed13c0b51c70
    Reviewed-on: https://go-review.googlesource.com/23061
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 114051aa1d5da5dec1b2707b1403261a3135b9b5
Author: Johan Sageryd <j@1616.se>
Date:   Sun May 8 18:06:03 2016 +0200

    text/template: fix typo in documentation
    
    Change-Id: I4ccfaa16e153aad001d670891b3848264e63cf6f
    Reviewed-on: https://go-review.googlesource.com/23031
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ef62f641c37431a870fa093c43b3ee51a06db0da
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 11 12:40:17 2016 -0700

    cmd/compile: use ONAME instead of OPACK in binary export format
    
    This is addressing feedback given on golang.org/cl/23052;
    we do it in a separate CL to separate the functional from
    the rename change.
    
    ONAME was not used in the export data, but it's the natural node op
    where we used OPACK instead. Renamed.
    
    Furthermore, OPACK and ONONAME nodes are replaced by the type checker
    with ONAME nodes, so OPACK nodes cannot occur when exporting type-checked
    code. Removed a special-case for OPACK nodes since they don't appear.
    
    Change-Id: I78b01a1badbf60e9283eaadeca2578a65d28cbd2
    Reviewed-on: https://go-review.googlesource.com/23053
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit aff4889089f970fb739acf5e3a5bddd3491a908b
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 11 11:28:36 2016 -0700

    cmd/compile: clean up encoding of method expressions and add test
    
    Fixes #15646.
    
    Change-Id: Ic13d1adc0a358149209195cdb03811eeee506fb8
    Reviewed-on: https://go-review.googlesource.com/23052
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e9407ae514df7d18e162ce03ebd530fe21aed16d
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed May 11 10:23:37 2016 -0700

    cmd/pprof: remove tempDir when no longer needed
    
    The pprof tools properly cleans up all files it creates, but forgets
    to clean up the temporary directory itself. This CL fixes that.
    
    Fixes #13863
    
    Change-Id: I1151c36cdad5ace7cc97e7e04001cf0149ef0f63
    Reviewed-on: https://go-review.googlesource.com/23019
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2ffb3e5d905b5622204d199128dec06cefd57790
Author: Marc-Antoine Ruel <maruel@chromium.org>
Date:   Thu Apr 7 14:24:24 2016 -0400

    os: fix Remove for file with read only attribute on Windows
    
    Include integration test. Confirmed that without the fix, the test case
    TestDeleteReadOnly fails.
    
    This permits to revert "cmd/go: reset read-only flag during TestIssue10952"
    This reverts commit 3b7841b3aff9204f054ffabbe4dd39d3e3dd3e91.
    
    Fixes #9606
    
    Change-Id: Ib55c151a8cf1a1da02ab18c34a9b58f615c34254
    Reviewed-on: https://go-review.googlesource.com/18235
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4d8031cf3c179d8682b62feae1d5a9109d14b382
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue May 10 15:09:23 2016 -0700

    net/http: make the MaxBytesReader.Read error sticky
    
    Fixes #14981
    
    Change-Id: I39b906d119ca96815801a0fbef2dbe524a3246ff
    Reviewed-on: https://go-review.googlesource.com/23009
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 20e362dae73b84e7b9dba9959444e5bc9d513ff1
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed May 11 09:37:46 2016 -0700

    cmd/cgo: remove //extern for check functions in gccgo Go prologue
    
    The //extern comments are incorrect and cause undefined symbol
    errorswhen building cgo code with -compiler=gccgo. The code is already
    designed to use weak references, and that support relies on the cgo
    check functions being treated as local functions.
    
    Change-Id: Ib38a640cc4ce6eba74cfbf41ba7147ec88769ec0
    Reviewed-on: https://go-review.googlesource.com/23014
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9a57fa31ff35024b9f628e7eae39bfd35bf90d77
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue May 10 16:09:16 2016 -0700

    net/http: document ResponseWriter read-vs-write concurrency rules
    
    Summary: Go's HTTP/1.x server closes the request body once writes are
    flushed. Go's HTTP/2 server supports concurrent read & write.
    
    Added a TODO to make the HTTP/1.x server also support concurrent
    read+write. But for now, document it.
    
    Updates #15527
    
    Change-Id: I81f7354923d37bfc1632629679c75c06a62bb584
    Reviewed-on: https://go-review.googlesource.com/23011
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 80423f1e64f1e939cddc455a29e5111527cd16f8
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Sat Dec 26 16:50:01 2015 +0900

    os/exec: cleanup and remove duplicated code
    
    Change-Id: Ia2f61427b1cc09064ac4c0563bccbd9b98767a0e
    Reviewed-on: https://go-review.googlesource.com/18118
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c1e88920606e78b06e936c9c249bd55f06dd8c51
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed May 11 13:04:22 2016 +0900

    net: fix nits found by vet
    
    Change-Id: I323231f31c4e1e7415661ebd943a90b2f1e9da1c
    Reviewed-on: https://go-review.googlesource.com/23020
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d1981ac313f6858cf1ec163dac94ea0d6904a731
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue May 10 04:29:32 2016 +0900

    net: reorganize interface tests to avoid vague flakiness
    
    This change reorganizes test cases for surveying network interfaces and
    address prefixes to make sure which part of the functionality is broken.
    
    Updates #7849.
    
    Change-Id: If6918075802eef69a7f1ee040010b3c46f4f4b97
    Reviewed-on: https://go-review.googlesource.com/22990
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b4538d7aaa1a600dc1d3724f9aecb5c8039e1324
Author: David du Colombier <0intro@gmail.com>
Date:   Tue May 10 07:43:17 2016 +0000

    Revert "os: enable TestGetppid on Plan 9"
    
    This reverts commit a677724edfc465193d2f79ee48d2c06defbc916b.
    
    Change-Id: I6a54ac26a6deca5b2a39ec9f899469a88b543d3d
    Reviewed-on: https://go-review.googlesource.com/22980
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0efc16284bc4fd5b8b31d3f6b6763f98700c5664
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed May 11 15:19:32 2016 +1000

    syscall: remove mksyscall_windows.go -xsys flag
    
    Also run "go generate" in
    internal/syscall/windows and internal/syscall/windows/registry
    
    Updates #15167
    
    Change-Id: I0109226962f81857fe11d308b869d561ea8ed9f9
    Reviewed-on: https://go-review.googlesource.com/23021
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d958dab095febfe542c6209b023d15f1d0de7128
Author: Robert Griesemer <gri@golang.org>
Date:   Tue May 10 17:06:19 2016 -0700

    go/importer: use correct path when checking if package was already imported
    
    The importer uses a global (shared) package map across multiple imports
    to determine if a package was imported before. That package map is usually
    indexed by package (import) path ('id' in this code). However, the binary
    importer was using the incoming (possibly unclean) path.
    
    Fixes #15517.
    
    Change-Id: I0c32a708dfccf345e0353fbda20ad882121e437c
    Reviewed-on: https://go-review.googlesource.com/23012
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit b6712946c1b46eb629fb010e65e5b3735f94d171
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu Apr 7 15:12:32 2016 +1000

    runtime: make mksyscall_windows.go flags do what they say they do
    
    The -systemdll and -xsys flags generate broken code in some situations
    (see issue for details). Fix all that.
    
    This CL only fixes bugs in existing code, but I have more changes comming:
    
    golang.org/x/sys/windows is not the only package that uses mksyscall_windows.go.
    golang.org/x/exp/shiny and github.com/derekparker/delve do too. I also have
    few personal packages that use mksyscall_windows.go. None of those packages
    are aware of new -xsys flag. I would like to change mksyscall_windows.go, so
    external packages do not need to use -xsys flag. I would love to get rid of
    -xsys flag altogether, but I don't see how it is possible. So I will, probably,
    replace -xsys with a flag that means opposite to -xsys, and use new flag
    everywhere in standard libraries. Flag name suggestions are welcome.
    
    -systemdll flag makes users code more "secure". I would like to make -systemdll
    behaviour a default for all mksyscall_windows.go users. We use that already in
    standard library. If we think "secure" is important, we should encourage it in
    all users code. If mksyscall_windows.go user insist on using old code, provide
    -use_old_loaddll (need good name here) flag for that. So -systemdll flag will
    be replaced with -use_old_loaddll.
    
    Fixes #15167
    
    Change-Id: I516369507867358ba1b66aabe00a17a7b477016e
    Reviewed-on: https://go-review.googlesource.com/21645
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9628e6fd1d1afeedce7c4b45454e0bc5cbd0d5ff
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue May 10 15:32:00 2016 -0700

    runtime/testdata/testprogcgo: fix Windows C compiler warning
    
    Noticed and fix by Alex Brainman.
    
    Tested in https://golang.org/cl/23005 (which makes all compiler
    warnings fatal during development)
    
    Fixes #15623
    
    Change-Id: Ic19999fce8bb8640d963965cc328574efadd7855
    Reviewed-on: https://go-review.googlesource.com/23010
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 9780bf2a9587b6aa0c92526cc1d6d6d1ed4c7210
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue May 10 14:27:32 2016 -0700

    os/user: don't create C function mygetgrouplist
    
    Instead of exporting the C function mygetgrouplist as a global symbol to
    conflict with other symbols of the same name, use trivial Go code and a
    static C function.
    
    Change-Id: I98dd667814d0a0ed8f7b1d4cfc6483d5a6965b26
    Reviewed-on: https://go-review.googlesource.com/23008
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 81a89606ef7e1334a0a23dab2eaa295b381caebc
Author: Andrew Gerrand <adg@golang.org>
Date:   Tue May 10 11:48:48 2016 -0700

    doc: remove mention of %HOME% from installation instructions
    
    Fixes #15598
    
    Change-Id: I4cfb8799dab0e9e34cae2e61839911fd65e4cfa3
    Reviewed-on: https://go-review.googlesource.com/23004
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f77f22b2bf43f565ac0933c8e1068c387e4007c3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue May 10 09:46:39 2016 -0700

    net/http: update bundled x/net/http2
    
    Updates x/net/http2 to git rev 96dbb961 for golang.org/cl/23002
    
    Fixes #15366
    Updates #15134 (server part remains)
    
    Change-Id: I29336e624706f906b754da66381a620ae3293c6c
    Reviewed-on: https://go-review.googlesource.com/23003
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 78ff74375930d5ae391beae562c91da40e5d92a4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue May 10 09:24:57 2016 -0700

    crypto/sha1: disable crashing AVX2 optimizations for now
    
    Updates #15617
    
    Change-Id: I2104776f8e789d987b4f2f7f08f2ebe979b747a1
    Reviewed-on: https://go-review.googlesource.com/23001
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 9e96ad851d9fb3feb7ee3f7b72213c5b7a9977aa
Author: Keith Randall <khr@golang.org>
Date:   Tue May 10 09:10:43 2016 -0700

    test: add test for unlowered ITab
    
    See #15604.  This was a bug in a CL that has since been
    rolled back.  Adding a test to challenge the next attempter.
    
    Change-Id: Ic43be254ea6eaab0071018cdc61d9b1c21f19cbf
    Reviewed-on: https://go-review.googlesource.com/23000
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 636670b8db9b72c80ec89da0a666be0d686269fd
Author: Scott Bell <scott@sctsm.com>
Date:   Sun May 8 18:17:59 2016 -0700

    net: use contexts for cgo-based DNS resolution
    
    Although calls to getaddrinfo can't be portably interrupted,
    we still benefit from more granular resource management by
    pushing the context downwards.
    
    Fixes #15321
    
    Change-Id: I5506195fc6493080410e3d46aaa3fe02018a24fe
    Reviewed-on: https://go-review.googlesource.com/22961
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9edb27e76f297c034e9383ad2d1bf48b23e1a25b
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Tue May 10 07:06:47 2016 -0700

    reflect: make Field panic when out of bounds, as documented
    
    Fixes #15046.
    
    Change-Id: Iba7216297735be8e1ec550ce5336d17dcd3fd6b7
    Reviewed-on: https://go-review.googlesource.com/22992
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 42b647bde669ffa1d6f056eac20a683b9d02a786
Author: David du Colombier <0intro@gmail.com>
Date:   Tue May 10 07:50:09 2016 +0200

    go/internal/gccgoimporter: remove workaround on Plan 9
    
    We fixed the implementation of the pread syscall in
    the Plan 9 kernel, so calling pread doesn't update the
    channel offset when reading a file.
    
    Fixes #11194.
    
    Change-Id: Ie4019e445542a73479728af861a50bb54caea3f6
    Reviewed-on: https://go-review.googlesource.com/22245
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a677724edfc465193d2f79ee48d2c06defbc916b
Author: David du Colombier <0intro@gmail.com>
Date:   Mon Apr 18 03:18:13 2016 +0200

    os: enable TestGetppid on Plan 9
    
    Fixes #8206.
    
    Change-Id: Iec1026ecc586495f5c9562cc84b3240c71d53da5
    Reviewed-on: https://go-review.googlesource.com/22164
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3d82432288885696b01357e921ec00116291a790
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Apr 19 20:59:03 2016 +0200

    os: add TestReadAtOffset
    
    In the Plan 9 kernel, there used to be a bug in the implementation of
    the pread syscall, where the channel offset was erroneously updated after
    calling pread on a file.
    
    This test verifies that ReadAt is behaving as expected.
    
    Fixes #14534.
    
    Change-Id: Ifc9fd40a1f94879ee7eb09b2ffc369aa2bec2926
    Reviewed-on: https://go-review.googlesource.com/22244
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f05c3aa24d815cd3869153750c9875e35fc48a6e
Author: Caleb Spare <cespare@gmail.com>
Date:   Wed Apr 13 16:51:25 2016 -0700

    encoding/json: support maps with integer keys
    
    This change makes encoding and decoding support integer types in map
    keys, converting to/from JSON string keys.
    
    JSON object keys are still sorted lexically, even though the keys may be
    integer strings.
    
    For backwards-compatibility, the existing Text(Un)Marshaler support for
    map keys (added in CL 20356) does not take precedence over the default
    encoding for string types. There is no such concern for integer types,
    so integer map key encoding is only used as a fallback if the map key
    type is not a Text(Un)Marshaler.
    
    Fixes #12529.
    
    Change-Id: I7e68c34f9cd19704b1d233a9862da15fabf0908a
    Reviewed-on: https://go-review.googlesource.com/22060
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9af83462c6f432b77a846a24b4d8efae9bdf0567
Author: Tilman Dilo <tilman.dilo@gmail.com>
Date:   Mon May 9 23:37:07 2016 +0200

    crypto/cipher: execute AES-GCM decryption example
    
    The decryption example for AES-GCM was not executed, hiding the fact
    that the provided ciphertext could not be authenticated.
    
    This commit adds the required output comment, replaces the ciphertext
    with a working example, and removes an unnecessary string conversion
    along the way.
    
    Change-Id: Ie6729ca76cf4a56c48b33fb3b39872105faa604b
    Reviewed-on: https://go-review.googlesource.com/22953
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d88261fb6581106e4e7d8d6c63f0e33c2a24361e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon May 9 17:21:11 2016 +0000

    time: don't depend on the io package
    
    The time package has never depended on the io package until
    a recent change during Go 1.7 to use the io.Seek* constants.
    
    The go/build dependency check didn't catch this because "time" was
    allowed to depend on meta package group "L0", which included "io".
    
    Adding the "io" package broke one of Dmitry's tools. The tool is
    fixable, but it's also not necessary for us to depend on "io" at all
    for some constants. Mirror the constants instead, and change
    deps_test.go to prevent an io dependency in the future.
    
    Change-Id: I74325228565279a74fa4a2f419643f5710e3e09f
    Reviewed-on: https://go-review.googlesource.com/22960
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 561c94884477f568bdb68aacebfeb4d0411a874b
Author: Hana Kim <hyangah@gmail.com>
Date:   Mon May 9 15:14:07 2016 -0400

    os: skip Lchown test on Android if symlink doesn't work
    
    After upgrading builder device (android/arm) to android 5.0.2,
    the test started failing. Running 'ln -s' from shell fails with
    permission error.
    
    Change-Id: I5b9e312806d58532b41ea3560ff079dabbc6424e
    Reviewed-on: https://go-review.googlesource.com/22962
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 256a9670cc9a0acd1fd70ad53ba7ab032d5b2933
Author: Austin Clements <austin@google.com>
Date:   Mon May 9 15:03:15 2016 -0400

    runtime: fix some out of date comments in bitmap code
    
    Change-Id: I4613aa6d62baba01686bbab10738a7de23daae30
    Reviewed-on: https://go-review.googlesource.com/22971
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 7ba54d45732219af86bde9a5b73c145db82b70c6
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Mar 28 02:29:18 2016 -0700

    compress: update documentation regarding footer verification
    
    Address two documentation issues:
    1) Document that the GZIP and ZLIB footer is only verified when the
    reader has been fully consumed.
    2) The zlib reader is guaranteed to not read past the EOF if the
    input io.Reader is also a io.ByteReader. This functionality was
    documented in the flate and gzip packages but not on zlib.
    
    Fixes #14867
    
    Change-Id: I43d46b93e38f98a04901dc7d4f18ed2f9e09f6fb
    Reviewed-on: https://go-review.googlesource.com/21218
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5934523e75e2aa3725c4e709be56d9e84c472bfe
Author: Shenghou Ma <minux@golang.org>
Date:   Sun May 8 22:31:09 2016 -0400

    cmd/compile: document -l in godoc
    
    Fixes #15607.
    
    Change-Id: I3e68ad00ebe72027d064238d4e77f1ad6a52f533
    Reviewed-on: https://go-review.googlesource.com/22940
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3c090019172afd4517360606efc50750d3e278fa
Author: David Chase <drchase@google.com>
Date:   Fri May 6 17:05:02 2016 -0700

    cmd/compile: correct sparseSet probes in regalloc to avoid index error
    
    In regalloc, a sparse map is preallocated for later use by
    spill-in-loop sinking.  However, variables (spills) are added
    during register allocation before spill sinking, and a map
    query involving any of these new variables will index out of
    bounds in the map.
    
    To fix:
    1) fix the queries to use s.orig[v.ID].ID instead, to ensure
    proper indexing.  Note that s.orig will be nil for values
    that are not eligible for spilling (like memory and flags).
    
    2) add a test.
    
    Fixes #15585.
    
    Change-Id: I8f2caa93b132a0f2a9161d2178320d5550583075
    Reviewed-on: https://go-review.googlesource.com/22911
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 149ac34893ad1cc5023ae2fbabd0d553f21b0313
Author: Mikhail Gusarov <dottedmag@dottedmag.net>
Date:   Mon May 9 19:28:28 2016 +0200

    doc: update number of supported instruction sets
    
    Current  number was out-of-date since adding MIPS.
    
    Change-Id: I565342a92de3893b75cdfb76fa39f7fdf15672da
    Reviewed-on: https://go-review.googlesource.com/22952
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit feb6131b1a4c0da098821c516e06499add886182
Author: Russ Cox <rsc@golang.org>
Date:   Tue Apr 26 21:50:59 2016 -0400

    cmd/compile: add -linkobj flag to allow writing object file in two parts
    
    This flag is experimental and the semantics may change
    even after Go 1.7 is released. There are no changes to code
    not using the flag.
    
    The first part is for reading by future compiles.
    The second part is for reading by the final link step.
    Splitting the file this way allows distributed build systems
    to ship the compile-input part only to compile steps and
    the linker-input part only to linker steps.
    
    The first part is basically just the export data,
    and the second part is basically everything else.
    The overall files still have the same broad structure,
    so that existing tools will work with both halves.
    It's just that various pieces are empty in the two halves.
    
    This also copies the two bits of data the linker needed from
    export data into the object header proper, so that the linker
    doesn't need any export data at all. That eliminates a TODO
    that was left for switching to the binary export data.
    (Now the linker doesn't need to know about the switch.)
    
    The default is still to write out a combined output file.
    Nothing changes unless you pass -linkobj to the compiler.
    There is no support in the go command for -linkobj,
    since the go command doesn't copy objects around.
    The expectation is that other build systems (like bazel, say)
    might take advantage of this.
    
    The header adjustment and the option for the split output
    was intended as part of the zip archives, but the zip archives
    have been cut from Go 1.7. Doing this to the current archives
    both unblocks one step in the switch to binary export data
    and enables alternate build systems to experiment with the
    new flag using the Go 1.7 release.
    
    Change-Id: I8b6eab25b8a22b0a266ba0ac6d31e594f3d117f3
    Reviewed-on: https://go-review.googlesource.com/22500
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit aeecee8ce4cf1821dcb6b5e37e20f40696278498
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Mon May 9 15:11:24 2016 +0200

    runtime/race: deflake test
    
    The test sometimes fails on builders.
    The test uses sleeps to establish the necessary goroutine
    execution order. If sleeps undersleep/oversleep
    the race is still reported, but it can be reported when the
    main test goroutine returns. In such case test driver
    can't match the race with the test and reports failure.
    
    Wait for both test goroutines to ensure that the race
    is reported in the test scope.
    
    Fixes #15579
    
    Change-Id: I0b9bec0ebfb0c127d83eb5325a7fe19ef9545050
    Reviewed-on: https://go-review.googlesource.com/22951
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 87a2ae1fa25677dc9097a25292c54b7b9dac2c9d
Author: Robert Griesemer <gri@golang.org>
Date:   Sun May 8 20:59:53 2016 -0700

    cmd/compile: fix binary export of composite literals with implicit types
    
    Also:
    - replaced remaining panics with Fatal calls
    - more comments
    
    Fixes #15572.
    
    Change-Id: Ifb27e80b66700f5692a84078764a1e928d4b310d
    Reviewed-on: https://go-review.googlesource.com/22935
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 3696e469e5f8a5531c69ffcf091deaa692e81104
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun May 8 14:32:48 2016 -0700

    test: add test for issue 15602
    
    The problem was fixed by the rollback in CL 22930.
    This CL just adds a test to prevent regressions.
    
    Fixes #15602
    
    Change-Id: I37453f6e18ca43081266fe7f154c6d63fbaffd9b
    Reviewed-on: https://go-review.googlesource.com/22931
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 55546efeee9fb6104d3dfd76351e7765df0bdd71
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun May 8 12:54:31 2016 -0700

    Revert "cmd/compile: properly handle map assignments for OAS2DOTTYPE"
    
    This reverts commit 9d7c9b4384db01afd2acb27d3a4636b60e957f08.
    
    For #15602.
    
    Change-Id: I464184b05babe4cb8dedab6161efa730cea6ee2d
    Reviewed-on: https://go-review.googlesource.com/22930
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0b6e5e3d733c1da53244753b42940eddb7401c6c
Author: Joel Sing <joel@sing.id.au>
Date:   Sun May 8 01:27:45 2016 +1000

    cmd/link: specify correct size for dynamic symbols in 386 elf output
    
    Currently 386 ELF binaries are generated with dynamic symbols that have
    a size of zero bytes, even though the symbol in the symbol table has
    the correct size. Fix this by specifying the correct size when creating
    dynamic symbols.
    
    Issue found on OpenBSD -current, where ld.so is now producing link
    warnings due to mismatched symbol sizes.
    
    Fixes #15593.
    
    Change-Id: Ib1a12b23ff9159c61ac980bf48a983b86f3df256
    Reviewed-on: https://go-review.googlesource.com/22912
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 394ac818b037ab8a3714b8a23e06e17a1e05aace
Author: Robert Griesemer <gri@golang.org>
Date:   Thu May 5 18:03:59 2016 -0700

    cmd/compile: add and enable (internal) option to only track named types
    
    The new export format keeps track of all types that are exported.
    If a type is seen that was exported before, only a reference to
    that type is emitted. The importer maintains a list of all the
    seen types and uses that list to resolve type references.
    
    The existing compiler infrastructure's invariants assumes that
    only named types are referred to before they are fully set up.
    Referring to unnamed incomplete types causes problems. One of
    the issues was #15548.
    
    Added a new internal flag 'trackAllTypes' to enable/disable
    this type tracking. With this change only named types are
    tracked.
    
    Verified that this fix also addresses #15548, even w/o the
    prior fix for that issue (in fact that prior fix is turned
    off if trackAllTypes is disabled because it's not needed).
    
    The test for #15548 covers also this change.
    
    For #15548.
    
    Change-Id: Id0b3ff983629703d025a442823f99649fd728a56
    Reviewed-on: https://go-review.googlesource.com/22839
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit fa270ad98e77cd0625c97eb01ad01efe11a324e8
Author: Elias Naur <elias.naur@gmail.com>
Date:   Sat May 7 07:24:39 2016 +0200

    cmd/go: add -shared to darwin/arm{,64} default build mode
    
    Buildmode c-archive now supports position independent code for
    darwin/arm (in addition to darwin/arm64). Make PIC (-shared) the
    default for both platforms in the default buildmode.
    
    Without this change, gomobile will go install the standard library
    into its separate package directory without PIC support.
    
    Also add -shared to darwin/arm64 in buildmode c-archive, for
    symmetry (darwin/arm64 always generates position independent code).
    
    Fixes #15519
    
    Change-Id: If27d2cbea8f40982e14df25da2703cbba572b5c6
    Reviewed-on: https://go-review.googlesource.com/22920
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9d7c9b4384db01afd2acb27d3a4636b60e957f08
Author: Tal Shprecher <tshprecher@gmail.com>
Date:   Thu May 5 15:14:08 2016 -0700

    cmd/compile: properly handle map assignments for OAS2DOTTYPE
    
    The boolean destination in an OAS2DOTTYPE expression craps out during
    compilation when trying to assign to a map entry because, unlike slice entries,
    map entries are not directly addressable in memory. The solution is to
    properly order the boolean destination node so that map entries are set
    via autotmp variables.
    
    Fixes #14678
    
    Change-Id: If344e8f232b5bdac1b53c0f0d21eeb43ab17d3de
    Reviewed-on: https://go-review.googlesource.com/22833
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e6ec82067a9068c93db6e7041017060a1c863452
Author: Elias Naur <elias.naur@gmail.com>
Date:   Wed Mar 9 10:00:12 2016 +0100

    runtime: use entire address space on 32 bit
    
    In issue #13992, Russ mentioned that the heap bitmap footprint was
    halved but that the bitmap size calculation hadn't been updated. This
    presents the opportunity to either halve the bitmap size or double
    the addressable virtual space. This CL doubles the addressable virtual
    space. On 32 bit this can be tweaked further to allow the bitmap to
    cover the entire 4GB virtual address space, removing a failure mode
    if the kernel hands out memory with a too low address.
    
    First, fix the calculation and double _MaxArena32 to cover 4GB virtual
    memory space with the same bitmap size (256 MB).
    
    Then, allow the fallback mode for the initial memory reservation
    on 32 bit (or 64 bit with too little available virtual memory) to not
    include space for the arena. mheap.sysAlloc will automatically reserve
    additional space when the existing arena is full.
    
    Finally, set arena_start to 0 in 32 bit mode, so that any address is
    acceptable for subsequent (additional) reservations.
    
    Before, the bitmap was always located just before arena_start, so
    fix the two places relying on that assumption: Point the otherwise unused
    mheap.bitmap to one byte after the end of the bitmap, and use it for
    bitmap addressing instead of arena_start.
    
    With arena_start set to 0 on 32 bit, the cgoInRange check is no longer a
    sufficient check for Go pointers. Introduce and call inHeapOrStack to
    check whether a pointer is to the Go heap or stack.
    
    While we're here, remove sysReserveHigh which seems to be unused.
    
    Fixes #13992
    
    Change-Id: I592b513148a50b9d3967b5c5d94b86b3ec39acc2
    Reviewed-on: https://go-review.googlesource.com/20471
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 83676d694b64205e80c042ca7cf61f7ad4de6c62
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 6 18:33:39 2016 +0000

    net/url: remove RFC 3986 mention in package comment
    
    Change-Id: Ifd707a4bbfcb1721655b4fce2045f3b043e66818
    Reviewed-on: https://go-review.googlesource.com/22859
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 7c5c6645d2ac21073b146c3d1a83c9b8c6463c25
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 6 18:46:35 2016 +0000

    net: skip more flaky net tests on flaky net builders
    
    e.g. https://storage.googleapis.com/go-build-log/9b937dd8/linux-arm_df54a25a.log
    
    Change-Id: Ic5864c7bd840b4f0c6341f919fcbcd5c708b14e7
    Reviewed-on: https://go-review.googlesource.com/22881
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit a1813ae0a091e1b880c0d3472112d2c725c2fa18
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri May 6 11:32:18 2016 -0700

    misc/cgo/testcarchive: avoid possible pthread_create race
    
    The old code assumed that the thread ID set by pthread_create would be
    available in the newly created thread.  While that is clearly true
    eventually, it is not necessarily true immediately.  Rather than try to
    pass down the thread ID, just call pthread_self in the created thread.
    
    Fixes #15576 (I hope).
    
    Change-Id: Ic07086b00e4fd5676c04719a299c583320da64a1
    Reviewed-on: https://go-review.googlesource.com/22880
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f0e2d32fde77ad03616304ab42b8c7426cf3a350
Author: Russ Cox <rsc@golang.org>
Date:   Fri May 6 15:34:25 2016 +0000

    Revert "net/url: validate ports in IPv4 addresses"
    
    This reverts commit 9f1ccd647fcdb1b703c1042c90434e15aff75013.
    
    For #14860.
    
    Change-Id: I63522a4dda8915dc8b972ae2e12495553ed65f09
    Reviewed-on: https://go-review.googlesource.com/22861
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4eccc77f196edfa7646b0e92a11ef8d96ef85b57
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 6 18:21:22 2016 +0000

    net/http: wait longer for subprocess to startup in test
    
    Might deflake the occasional linux-amd64-race failures.
    
    Change-Id: I273b0e32bb92236168eb99887b166e079799c1f1
    Reviewed-on: https://go-review.googlesource.com/22858
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 31283dd4836542f94b063bfd2886fc32639358f7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 6 18:11:38 2016 +0000

    net/http: don't assume Response.Request is populated after redirect errors
    
    Fixes #15577
    
    Change-Id: I5f023790a393b17235db2e66c02c2483773ddc1a
    Reviewed-on: https://go-review.googlesource.com/22857
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 670a5cda2048af8d83958af0f4b2fda8f7b4ea72
Author: Russ Cox <rsc@golang.org>
Date:   Fri May 6 15:28:19 2016 +0000

    Revert "testing/quick: generate more map and slice states"
    
    This reverts commit 0ccabe2e0b42a2602e0f37ce28d5368aa811f530.
    
    Change-Id: Ib1c230fb6801c0ee26f4a352b0c1130fa240a76a
    Reviewed-on: https://go-review.googlesource.com/22860
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 131231b8db26b38c9c2fdc52fb788241f5c2de51
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 6 16:07:11 2016 +0000

    os: rename remaining four os1_*.go files to os_*.go
    
    Change-Id: Ice9c234960adc7857c8370b777a0b18e29d59281
    Reviewed-on: https://go-review.googlesource.com/22853
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1ff57143af65014c80e39cc0f19cd97a455f5b49
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 6 16:24:57 2016 +0000

    net: ignore network failures on some builders
    
    We run the external network tests on builders, but some of our
    builders have less-than-ideal DNS connectivity. This change continues
    to run the tests on all builders, but marks certain builders as flaky
    (network-wise), and only validates their DNS results if they got DNS
    results.
    
    Change-Id: I826dc2a6f6da55add89ae9c6db892b3b2f7b526b
    Reviewed-on: https://go-review.googlesource.com/22852
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 61602b0e9e1daa0490793ef9ada3a51f8f482265
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 6 16:06:02 2016 +0000

    runtime: delete empty files
    
    I meant to delete these in CL 22850, actually.
    
    Change-Id: I0c286efd2b9f1caf0221aa88e3bcc03649c89517
    Reviewed-on: https://go-review.googlesource.com/22851
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a5c5f6ea94dcd9caad0f0df8caaf68f8659900b2
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Fri May 6 18:16:52 2016 +0200

    all: fix copy-and-paste errors in tests
    
    Fixes #15570
    
    Change-Id: I95d1ac26e342c3bbf36ad1f0209711ea96eaf487
    Reviewed-on: https://go-review.googlesource.com/22870
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c81a3532fea42df33dea54497dfaa96873c2d976
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Fri Apr 15 00:33:28 2016 +0300

    cmd/vet: check sync.* types' copying
    
    Embed noLock struct into the following types, so `go vet -copylocks` catches
    their copying additionally to types containing sync.Mutex:
      - sync.Cond
      - sync.WaitGroup
      - sync.Pool
      - atomic.Value
    
    Fixes #14582
    
    Change-Id: Icb543ef5ad10524ad239a15eec8a9b334b0e0660
    Reviewed-on: https://go-review.googlesource.com/22015
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 258a4c3daf992958f5d7dc5bccf2c5b41e236959
Author: Richard Miller <miller.research@gmail.com>
Date:   Fri May 6 14:21:52 2016 +0100

    syscall,os,net: don't use ForkLock in plan9
    
    This is the follow-on to CL 22610: now that it's the child instead of
    the parent which lists unwanted fds to close in syscall.StartProcess,
    plan9 no longer needs the ForkLock to protect the list from changing.
    The readdupdevice function is also now unused and can be removed.
    
    Change-Id: I904c8bbf5dbaa7022b0f1a1de0862cd3064ca8c7
    Reviewed-on: https://go-review.googlesource.com/22842
    Reviewed-by: David du Colombier <0intro@gmail.com>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2dc680007e35f4cb87527582eb73a653392aa8c3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri May 6 08:26:37 2016 -0700

    runtime: merge the last four os-vs-os1 files together
    
    Change-Id: Ib0ba691c4657fe18a4659753e70d97c623cb9c1d
    Reviewed-on: https://go-review.googlesource.com/22850
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit bf151cc2aa4094b4633a7e5f07a34227d58231fe
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu May 5 16:51:54 2016 -0700

    cmd/compile/internal/mips64: fix large uint -> float conversion
    
    Re-enable TestFP in cmd/compile/internal/gc on mips64.
    
    Fixes #15552.
    
    Change-Id: I5c3a5564b94d28c723358f0862468fb6da371991
    Reviewed-on: https://go-review.googlesource.com/22835
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fafadc521ede90f8abed73e8d209e130c456e983
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Fri Apr 29 16:17:14 2016 +0300

    crypto/sha1: Add AVX2 version for AMD64
    
    name             old time/op    new time/op    delta
    Hash8Bytes-48       271ns ± 8%     273ns ± 5%     ~     (p=0.313 n=19+19)
    Hash320Bytes-48    1.04µs ± 7%    0.75µs ± 8%  -27.66%  (p=0.000 n=20+20)
    Hash1K-48          2.72µs ± 6%    1.75µs ± 6%  -35.79%  (p=0.000 n=19+20)
    Hash8K-48          19.9µs ± 7%    11.6µs ± 6%  -41.84%  (p=0.000 n=20+19)
    
    name             old speed      new speed      delta
    Hash8Bytes-48    29.5MB/s ± 8%  29.3MB/s ± 5%     ~     (p=0.314 n=19+19)
    Hash320Bytes-48   307MB/s ± 7%   424MB/s ± 8%  +38.29%  (p=0.000 n=20+20)
    Hash1K-48         377MB/s ± 6%   587MB/s ± 6%  +55.76%  (p=0.000 n=19+20)
    Hash8K-48         413MB/s ± 7%   709MB/s ± 6%  +71.85%  (p=0.000 n=20+19)
    
    Change-Id: I2963cf744eeb2e8191d4e4223fbf6f533a7fd405
    Reviewed-on: https://go-review.googlesource.com/22607
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2210d88a889e0ea463bcdef2b658aaec1050cf01
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Fri Apr 29 16:19:17 2016 +0300

    crypto/sha256: Use AVX2 if possible
    
    name          old time/op    new time/op    delta
    Hash8Bytes-4     376ns ± 0%     246ns ± 0%  -34.57%  (p=0.000 n=20+20)
    Hash1K-4        5.21µs ± 0%    2.82µs ± 0%  -45.83%  (p=0.000 n=20+20)
    Hash8K-4        38.6µs ± 0%    20.8µs ± 0%  -46.05%  (p=0.000 n=20+20)
    
    name          old speed      new speed      delta
    Hash8Bytes-4  21.2MB/s ± 0%  32.4MB/s ± 0%  +52.70%  (p=0.000 n=15+19)
    Hash1K-4       197MB/s ± 0%   363MB/s ± 0%  +84.60%  (p=0.000 n=20+20)
    Hash8K-4       212MB/s ± 0%   393MB/s ± 0%  +85.36%  (p=0.000 n=20+20)
    
    Change-Id: Ib50119c591074ff486d11d3566e24b691bcc6598
    Reviewed-on: https://go-review.googlesource.com/22608
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit e558fdbd9a3865dd383f50524bb8a18b9e6a0cb0
Author: Elias Naur <elias.naur@gmail.com>
Date:   Fri May 6 15:09:57 2016 +0200

    misc/cgo/testcarchive: don't force -no_pie on Darwin
    
    Now that darwin/arm supports position independent code, allow the
    binaries generated by the c-archive tests be position independent
    (PIE) as well.
    
    Change-Id: If0517f06e92349ada29a4e3e0a951f08b0fcc710
    Reviewed-on: https://go-review.googlesource.com/22841
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 009c002c925e391e5a7a406c9175aefafb6c9e3c
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Fri Apr 29 16:14:57 2016 +0300

    cmd/internal/obj/x86: add AVX2 instrutions needed for sha1/sha512/sha256 acceleration
    
    This means: VPSHUFB, VPSHUFD, VPERM2F128, VPALIGNR, VPADDQ, VPADDD, VPSRLDQ,
    VPSLLDQ, VPSRLQ, VPSLLQ, VPSRLD, VPSLLD, VPOR, VPBLENDD, VINSERTI128,
    VPERM2I128, RORXL, RORXQ.
    
    Change-Id: Ief27190ee6acfa86b109262af5d999bc101e923d
    Reviewed-on: https://go-review.googlesource.com/22606
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 2e32efc44ac86cce3bd0808e6049d8c9b0225ba8
Author: Shenghou Ma <minux@golang.org>
Date:   Fri May 6 00:53:42 2016 -0400

    runtime: get randomness from AT_RANDOM AUXV on linux/mips64x
    
    Fixes #15148.
    
    Change-Id: If3b628f30521adeec1625689dbc98aaf4a9ec858
    Reviewed-on: https://go-review.googlesource.com/22811
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ef92857e27556804d66e72e2360dc2c6b6554bd7
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu May 5 09:10:49 2016 -0700

    cmd/go, cmd/cgo: pass "-mabi=64" to gcc on mips64
    
    Change-Id: I9ac2ae57a00cee23d6255db02419b0a0f087d4f3
    Reviewed-on: https://go-review.googlesource.com/22801
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>

commit d68f800620b4295039912066970fb2be914f1d1e
Author: Robert Griesemer <gri@golang.org>
Date:   Thu May 5 17:46:58 2016 -0700

    test: update test for issue 15548
    
    Accidentally checked in the version of file c.go that doesn't
    exhibit the bug - hence the test was not testing the bug fix.
    Double-checked that this version exposes the bug w/o the fix.
    
    Change-Id: Ie4dc455229d1ac802a80164b5d549c2ad4d971f5
    Reviewed-on: https://go-review.googlesource.com/22837
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit b90cb3f4716d3fede57bf8e798d27406fba5c294
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu May 5 17:52:37 2016 -0700

    cmd/go: fail with nice error message on bad GOOS/GOARCH pair
    
    Fixes #12272
    
    Change-Id: I2115ec62ed4061084c482eb385a583a1c1909888
    Reviewed-on: https://go-review.googlesource.com/22838
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 30bfafc319288e8cfe54111664e3f2f259998a0a
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Thu Sep 17 00:22:56 2015 -0700

    archive/tar: centralize all information about tar header format
    
    The Reader and Writer have hard-coded constants regarding the
    offsets and lengths of certain fields in the tar format sprinkled
    all over. This makes it harder to verify that the offsets are
    correct since a reviewer would need to search for them throughout
    the code. Instead, all information about the layout of header
    fields should be centralized in one single file. This has the
    advantage of being both centralized, and also acting as a form
    of documentation about the header struct format.
    
    This method was chosen over using "encoding/binary" since that
    method would cause an allocation of a header struct every time
    binary.Read was called. This method causes zero allocations and
    its logic is no longer than if structs were declared.
    
    Updates #12594
    
    Change-Id: Ic7a0565d2a2cd95d955547ace3b6dea2b57fab34
    Reviewed-on: https://go-review.googlesource.com/14669
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 88d3db0a5b5196ed45c96014d5a2d32e4e41e34e
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jan 6 12:45:23 2016 -0500

    runtime: stop traceback at foreign function
    
    This can only happen when profiling and there is foreign code
    at the top of the g0 stack but we're not in cgo.
    That in turn only happens with the race detector.
    
    Fixes #13568.
    
    Change-Id: I23775132c9c1a3a3aaae191b318539f368adf25e
    Reviewed-on: https://go-review.googlesource.com/18322
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a633d766d1763f4f4648e423c4e8a8635b183d03
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri May 6 08:51:16 2016 +0900

    Revert "net: add support for Zone of IPNet"
    
    Updates #14518.
    
    This reverts commit 3e9264c9ae781a2cd28127deaed6ae26f84b4b15.
    
    Change-Id: I2531b04efc735b5b51ef675541172f2f5ae747d9
    Reviewed-on: https://go-review.googlesource.com/22836
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit acc757f678a42ba1ffbf8bb9886de4fe080302de
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Apr 5 11:22:53 2016 -0700

    all: use SeekStart, SeekCurrent, SeekEnd
    
    CL/19862 (f79b50b8d5bc159561c1dcf7c17e2a0db96a9a11) recently introduced the constants
    SeekStart, SeekCurrent, and SeekEnd to the io package. We should use these constants
    consistently throughout the code base.
    
    Updates #15269
    
    Change-Id: If7fcaca7676e4a51f588528f5ced28220d9639a2
    Reviewed-on: https://go-review.googlesource.com/22097
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6db98a3c51549eb5e1e481e9bca6ede7e8e15f54
Author: David Chase <drchase@google.com>
Date:   Thu May 5 13:35:10 2016 -0700

    cmd/compile: repair MININT conversion bug in arm softfloat
    
    Negative-case conversion code was wrong for minimum int32,
    used negate-then-widen instead of widen-then-negate.
    
    Test already exists; this fixes the failure.
    
    Fixes #15563.
    
    Change-Id: I4b0b3ae8f2c9714bdcc405d4d0b1502ccfba2b40
    Reviewed-on: https://go-review.googlesource.com/22830
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5f83bf6053763801beb84a926cde7221874bc4f7
Author: Alan Donovan <adonovan@google.com>
Date:   Thu May 5 14:56:58 2016 -0700

    go/token: document postcondition of SetLines
    
    Change-Id: Ie163deade396b3e298a93845b9ca4d52333ea82a
    Reviewed-on: https://go-review.googlesource.com/22831
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5bf9b39acc7c4e9658190d8606b5d719678db14a
Author: Richard Miller <miller.research@gmail.com>
Date:   Fri Apr 29 21:02:59 2016 +0100

    os/exec: re-enable TestExtraFiles for plan9
    
    This test should now succeed after CL 22610 which fixes issue #7118
    
    Change-Id: Ie785a84d77b27c832a1ddd81699bf25dab24b97d
    Reviewed-on: https://go-review.googlesource.com/22640
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David du Colombier <0intro@gmail.com>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 639a20da908c2646de46b93ca2933651363ec22a
Author: Richard Miller <miller.research@gmail.com>
Date:   Fri Apr 29 17:39:33 2016 +0100

    syscall: simplify closing of extra fds in plan9 StartProcess
    
    Reviving earlier work by @ality in https://golang.org/cl/57890043
    to make the closing of extra file descriptors in syscall.StartProcess
    less race-prone. Instead of making a list of open fds in the parent
    before forking, the child can read through the list of open fds and
    close the ones not explicitly requested.  Also eliminate the
    complication of keeping open any extra fds which were inherited by
    the parent when it started.
    
    This CL will be followed by one to eliminate the ForkLock in plan9,
    which is now redundant.
    
    Fixes #5605
    
    Change-Id: I6b4b942001baa54248b656c52dced3b62021c486
    Reviewed-on: https://go-review.googlesource.com/22610
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: David du Colombier <0intro@gmail.com>

commit 9b05ae612a4496df317e3c1c770b4b9c5648616d
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu May 5 13:19:07 2016 -0700

    doc: update broken links in release notes
    
    Fixes #15559
    
    Change-Id: Ie58650f35e32c1f49669134b62876357abcdc583
    Reviewed-on: https://go-review.googlesource.com/22823
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8650c2303449a1cccf3a05609a63193e34d6bae8
Author: Robert Griesemer <gri@golang.org>
Date:   Thu May 5 09:39:50 2016 -0700

    cmd/compile: verify imported types after they are fully imported
    
    Fixes #15548.
    
    Change-Id: I1dfa9c8739a4b6d5e4c737c1a1e09e80e045b7aa
    Reviewed-on: https://go-review.googlesource.com/22803
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 1a7fc2357b1c26dcdf4fa57dee67a1172696801f
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Wed May 4 01:42:13 2016 -0600

    runtime: print signal name in panic, if name is known
    
    Adds a small function signame that infers a signal name
    from the signal table, otherwise will fallback to using
    hex(sig) as previously. No signal table is present for
    Windows hence it will always print the hex value.
    
    Sample code and new result:
    ```go
    package main
    
    import (
      "fmt"
      "time"
    )
    
    func main() {
      defer func() {
        if err := recover(); err != nil {
          fmt.Printf("err=%v\n", err)
        }
      }()
    
      ticker := time.Tick(1e9)
      for {
        <-ticker
      }
    }
    ```
    
    ```shell
    $ go run main.go &
    $ kill -11 <pid>
    fatal error: unexpected signal during runtime execution
    [signal SIGSEGV: segmentation violation code=0x1 addr=0xb01dfacedebac1e
    pc=0xc71db]
    ...
    ```
    
    Fixes #13969
    
    Change-Id: Ie6be312eb766661f1cea9afec352b73270f27f9d
    Reviewed-on: https://go-review.googlesource.com/22753
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fafd792de30f46cbd822fd6bb041c60c7b5fbe6d
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jan 6 14:37:45 2016 -0500

    net: fix hostLookupOrder("")
    
    Fixes #13623.
    
    Change-Id: I1bd96aa7b6b715e4dbdcf0c37c2d29228df6565c
    Reviewed-on: https://go-review.googlesource.com/18329
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit eeca3ba92fdb07e44abf3e2bebfcede03e1eae12
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Thu Apr 28 07:16:08 2016 -0500

    sync/atomic, runtime/internal/atomic: improve ppc64x atomics
    
    The following performance improvements have been made to the
    low-level atomic functions for ppc64le & ppc64:
    
    - For those cases containing a lwarx and stwcx (or other sizes):
    sync, lwarx, maybe something, stwcx, loop to sync, sync, isync
    The sync is moved before (outside) the lwarx/stwcx loop, and the
     sync after is removed, so it becomes:
    sync, lwarx, maybe something, stwcx, loop to lwarx, isync
    
    - For the Or8 and And8, the shifting and manipulation of the
    address to the word aligned version were removed and the
    instructions were changed to use lbarx, stbcx instead of
    register shifting, xor, then lwarx, stwcx.
    
    - New instructions LWSYNC, LBAR, STBCC were tested and added.
    runtime/atomic_ppc64x.s was changed to use the LWSYNC opcode
    instead of the WORD encoding.
    
    Fixes #15469
    
    Ran some of the benchmarks in the runtime and sync directories.
    Some results varied from run to run but the trend was improvement
    based on best times for base and new:
    
    runtime.test:
    BenchmarkChanNonblocking-128         0.88          0.89          +1.14%
    BenchmarkChanUncontended-128         569           511           -10.19%
    BenchmarkChanContended-128           63110         53231         -15.65%
    BenchmarkChanSync-128                691           598           -13.46%
    BenchmarkChanSyncWork-128            11355         11649         +2.59%
    BenchmarkChanProdCons0-128           2402          2090          -12.99%
    BenchmarkChanProdCons10-128          1348          1363          +1.11%
    BenchmarkChanProdCons100-128         1002          746           -25.55%
    BenchmarkChanProdConsWork0-128       2554          2720          +6.50%
    BenchmarkChanProdConsWork10-128      1909          1804          -5.50%
    BenchmarkChanProdConsWork100-128     1624          1580          -2.71%
    BenchmarkChanCreation-128            237           212           -10.55%
    BenchmarkChanSem-128                 705           667           -5.39%
    BenchmarkChanPopular-128             5081190       4497566       -11.49%
    
    BenchmarkCreateGoroutines-128             532           473           -11.09%
    BenchmarkCreateGoroutinesParallel-128     35.0          34.7          -0.86%
    BenchmarkCreateGoroutinesCapture-128      4923          4200          -14.69%
    
    sync.test:
    BenchmarkUncontendedSemaphore-128      112           94.2          -15.89%
    BenchmarkContendedSemaphore-128        133           128           -3.76%
    BenchmarkMutexUncontended-128          1.90          1.67          -12.11%
    BenchmarkMutex-128                     353           310           -12.18%
    BenchmarkMutexSlack-128                304           283           -6.91%
    BenchmarkMutexWork-128                 554           541           -2.35%
    BenchmarkMutexWorkSlack-128            567           556           -1.94%
    BenchmarkMutexNoSpin-128               275           242           -12.00%
    BenchmarkMutexSpin-128                 1129          1030          -8.77%
    BenchmarkOnce-128                      1.08          0.96          -11.11%
    BenchmarkPool-128                      29.8          27.4          -8.05%
    BenchmarkPoolOverflow-128              40564         36583         -9.81%
    BenchmarkSemaUncontended-128           3.14          2.63          -16.24%
    BenchmarkSemaSyntNonblock-128          1087          1069          -1.66%
    BenchmarkSemaSyntBlock-128             897           893           -0.45%
    BenchmarkSemaWorkNonblock-128          1034          1028          -0.58%
    BenchmarkSemaWorkBlock-128             949           886           -6.64%
    
    Change-Id: I4403fb29d3cd5254b7b1ce87a216bd11b391079e
    Reviewed-on: https://go-review.googlesource.com/22549
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 0960c7c7eb30b3d651037c799aaa0d80722f063f
Author: Shenghou Ma <minux@golang.org>
Date:   Thu May 5 14:22:34 2016 -0400

    context: use https in docs
    
    Change-Id: I9354712768702e3b083c77f30165a34cb414d686
    Reviewed-on: https://go-review.googlesource.com/22810
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bc1989f1154b5b8f235e7e4932d935e490d6e79e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed May 4 14:04:03 2016 -0700

    cmd/compile: optimize lookupVarOutgoing
    
    If b has exactly one predecessor, as happens
    frequently with static calls, we can make
    lookupVarOutgoing generate less garbage.
    
    Instead of generating a value that is just
    going to be an OpCopy and then get eliminated,
    loop. This can lead to lots of looping.
    However, this loop is way cheaper than generating
    lots of ssa.Values and then eliminating them.
    
    For a subset of the code in #15537:
    
    Before:
    
           28.31 real        36.17 user         1.68 sys
    2282450944  maximum resident set size
    
    After:
    
            9.63 real        11.66 user         0.51 sys
     638144512  maximum resident set size
    
    Updates #15537.
    
    Excitingly, it appears that this also helps
    regular code:
    
    name       old time/op      new time/op      delta
    Template        288ms ± 6%       276ms ± 7%   -4.13%        (p=0.000 n=21+24)
    Unicode         143ms ± 8%       141ms ±10%     ~           (p=0.287 n=24+25)
    GoTypes         932ms ± 4%       874ms ± 4%   -6.20%        (p=0.000 n=23+22)
    Compiler        4.89s ± 4%       4.58s ± 4%   -6.46%        (p=0.000 n=22+23)
    MakeBash        40.2s ±13%       39.8s ± 9%     ~           (p=0.648 n=23+23)
    
    name       old user-ns/op   new user-ns/op   delta
    Template   388user-ms ±10%  373user-ms ± 5%   -3.80%        (p=0.000 n=24+25)
    Unicode    203user-ms ± 6%  202user-ms ± 7%     ~           (p=0.492 n=22+24)
    GoTypes    1.29user-s ± 4%  1.17user-s ± 4%   -9.67%        (p=0.000 n=25+23)
    Compiler   6.86user-s ± 5%  6.28user-s ± 4%   -8.49%        (p=0.000 n=25+25)
    
    name       old alloc/op     new alloc/op     delta
    Template       51.5MB ± 0%      47.6MB ± 0%   -7.47%        (p=0.000 n=22+25)
    Unicode        37.2MB ± 0%      37.1MB ± 0%   -0.21%        (p=0.000 n=25+25)
    GoTypes         166MB ± 0%       138MB ± 0%  -16.83%        (p=0.000 n=25+25)
    Compiler        756MB ± 0%       628MB ± 0%  -16.96%        (p=0.000 n=25+23)
    
    name       old allocs/op    new allocs/op    delta
    Template         450k ± 0%        445k ± 0%   -1.02%        (p=0.000 n=25+25)
    Unicode          356k ± 0%        356k ± 0%     ~           (p=0.374 n=24+25)
    GoTypes         1.31M ± 0%       1.25M ± 0%   -4.18%        (p=0.000 n=25+25)
    Compiler        5.29M ± 0%       5.02M ± 0%   -5.15%        (p=0.000 n=25+23)
    
    It also seems to help in other cases in which
    phi insertion is a pain point (#14774, #14934).
    
    Change-Id: Ibd05ed7b99d262117ece7bb250dfa8c3d1cc5dd2
    Reviewed-on: https://go-review.googlesource.com/22790
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>

commit 6ccab441de1063a16b263107426fe62d2cefa990
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed May 4 23:47:37 2016 -0700

    cmd/compile/internal/gc: skip TestFP on mips64x
    
    The legacy mips64 backend doesn't handle large uint->float conversion
    correctly. See #15552.
    
    Change-Id: I84ceeaa95cc4e85f09cc46dfb30ab5d151f6b205
    Reviewed-on: https://go-review.googlesource.com/22800
    Reviewed-by: Minux Ma <minux@golang.org>

commit bfa89c3cd42f4301c5dc8657e02372bdd449cfcb
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed May 4 23:42:10 2016 -0700

    cmd/compile/internal/gc: remove duplicated TestFP
    
    TestFp and TestFP are same, remove one.
    
    Change-Id: Iffdece634cd4572421974496298925e7c6ac13a9
    Reviewed-on: https://go-review.googlesource.com/22799
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4fa050024fbdfff9eb43c930c5b1f73b1a16fafa
Author: Keith Randall <khr@golang.org>
Date:   Thu Apr 28 16:52:47 2016 -0700

    cmd/compile: enable constant-time CFG editing
    
    Provide indexes along with block pointers for Preds
    and Succs arrays.  This allows us to splice edges in
    and out of those arrays in constant time.
    
    Fixes worst-case O(n^2) behavior in deadcode and fuse.
    
    benchmark                     old ns/op      new ns/op     delta
    BenchmarkFuse1-8              2065           2057          -0.39%
    BenchmarkFuse10-8             9408           9073          -3.56%
    BenchmarkFuse100-8            105238         76277         -27.52%
    BenchmarkFuse1000-8           3982562        1026750       -74.22%
    BenchmarkFuse10000-8          301220329      12824005      -95.74%
    BenchmarkDeadCode1-8          1588           1566          -1.39%
    BenchmarkDeadCode10-8         4333           4250          -1.92%
    BenchmarkDeadCode100-8        32031          32574         +1.70%
    BenchmarkDeadCode1000-8       590407         468275        -20.69%
    BenchmarkDeadCode10000-8      17822890       5000818       -71.94%
    BenchmarkDeadCode100000-8     1388706640     78021127      -94.38%
    BenchmarkDeadCode200000-8     5372518479     168598762     -96.86%
    
    Change-Id: Iccabdbb9343fd1c921ba07bbf673330a1c36ee17
    Reviewed-on: https://go-review.googlesource.com/22589
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bcd4b84bc56889b5a9a8a5d457f35fc0188e8315
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed May 4 22:07:50 2016 -0700

    runtime: skip TestCgoCallbackGC on linux/mips64x
    
    Builder is too slow. This test passed on builder machines but took
    15+ min.
    
    Change-Id: Ief9d67ea47671a57e954e402751043bc1ce09451
    Reviewed-on: https://go-review.googlesource.com/22798
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3c4ebd20235e965237f5856d30d6ce6513b9f6c9
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed May 4 21:38:45 2016 -0700

    cmd/link: fix external linker argument for mips64
    
    I overlooked it when rebasing CL 19803.
    
    Change-Id: Ife9d6bcc6a772715d137af903c64bafac0cdb216
    Reviewed-on: https://go-review.googlesource.com/22797
    Reviewed-by: Minux Ma <minux@golang.org>

commit 34f97d28d2ff435b8ac85ad6645aaf79a5d061bd
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed May 4 13:27:27 2016 -0700

    runtime: put tracebackctxt C functions in .c file
    
    Since tracebackctxt.go uses //export functions, the C functions can't be
    externally visible in the C comment. The code was using attributes to
    work around that, but that failed on Windows.
    
    Change-Id: If4449fd8209a8998b4f6855ea89e5db1471b2981
    Reviewed-on: https://go-review.googlesource.com/22786
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 57be1607d975ebec2f5faecea068f2db31abc041
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Tue May 3 16:37:33 2016 +1000

    debug/pe: unexport newly introduced identifiers
    
    CLs 22181, 22332 and 22336 intorduced new functionality to be used
    in cmd/link (see issue #15345 for details). But we didn't have chance
    to use new functionality yet. Unexport newly introduced identifiers,
    so we don't have to commit to the API until we actually tried it.
    
    Rename File.COFFSymbols into File._COFFSymbols,
    COFFSymbol.FullName into COFFSymbol._FullName,
    Section.Relocs into Section._Relocs,
    Reloc into _Relocs,
    File.StringTable into File._StringTable and
    StringTable into _StringTable.
    
    Updates #15345
    
    Change-Id: I770eeb61f855de85e0c175225d5d1c006869b9ec
    Reviewed-on: https://go-review.googlesource.com/22720
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 27d0d849fe7802794c74d049f5e8e1b0be018f9a
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu May 5 06:43:13 2016 +1000

    compress/flate: distinguish between base and min match length.
    
    Change-Id: I93db5cd86e3fb568e4444cad95268ba4a02ce8a0
    Reviewed-on: https://go-review.googlesource.com/22787
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit 1f4f2d0d39ceac483f3d42eb25ec992cdaf257f3
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed May 4 14:26:46 2016 -0400

    cmd/compile: fix uint64 to float casts on ppc64
    
    Adds the FCFIDU instruction and uses it instead of the FCFID
    instruction for unsigned integer to float casts. This change means
    that unsigned integers do not have to be cast to signed integers
    before being cast to a floating point value. Therefore it is no
    longer necessary to insert instructions to detect and fix
    values that overflow int64.
    
    The previous code generating the uint64 to int64 cast handled
    overflow by truncating the uint64 value. This truncation can
    change the result of the rounding performed by the integer to
    float cast.
    
    The FCFIDU instruction was added in Power ISA 2.06B.
    
    Fixes #15539.
    
    Change-Id: Ia37a9631293eff91032d4cd9a9bec759d2142437
    Reviewed-on: https://go-review.googlesource.com/22772
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3747c00923b140847f5d8f7978e672fa79e3ec37
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 4 15:13:36 2016 -0700

    cmd/compile: fix debugFormat for new export format
    
    Change-Id: Ic3415f3ee643636eab4ff7d2351b8ad0dae62895
    Reviewed-on: https://go-review.googlesource.com/22792
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 4d6788ecae127017ab4ab4d5d5907b8912a08bd6
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Thu May 5 00:04:54 2016 +0530

    runtime: clean up profiling data files produced by TestCgoPprof
    
    Fixes #15541
    
    Change-Id: I9b6835157db0eb86de13591e785f971ffe754baa
    Reviewed-on: https://go-review.googlesource.com/22783
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bfcb5b64062b3bdf367e0888cd42a4a46d37a913
Author: Shenghou Ma <minux@golang.org>
Date:   Wed May 4 17:06:50 2016 -0400

    net/http: correct RFC for MethodPatch
    
    Fixes #15546.
    
    Change-Id: I39c29ea6999812dd5f1c45f67bddad28f20b6c6b
    Reviewed-on: https://go-review.googlesource.com/22773
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2e2481ed345347197d0a5685ef200ac761def2f2
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Apr 7 16:03:53 2016 -0400

    cmd/dist: remove the use of debug/elf package
    
    debug/elf is only needed to determine the endianness of the host
    machine, which is easy to do without debug/elf.
    
    Fixes #15180.
    
    Change-Id: I21035ed3884871270765a1ca3b812a5d4890a7ee
    Reviewed-on: https://go-review.googlesource.com/21662
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 24744f6561f3ff7bc58046ba62abbc1c07e9fd4e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed May 4 11:43:42 2016 -0700

    cmd/compile: check that SSA memory args are in the right place
    
    Fixes #15510
    
    Change-Id: I2e0568778ef90cf29712753b8c42109ef84a0256
    Reviewed-on: https://go-review.googlesource.com/22784
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0f84afe24bd7954ed2408008c17b1930881d89d5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed May 4 09:08:27 2016 -0700

    cmd/dist: add flag to build tests only, but not run them
    
    To speed up the ssacheck check builder and make it on by default as a
    trybot.
    
    Change-Id: I91a3347491507c84f4878dff744ca426ba3e2e9f
    Reviewed-on: https://go-review.googlesource.com/22755
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 43d2a10e2647b2d6ee10a2a7629ee4055dcce740
Author: Shenghou Ma <minux@golang.org>
Date:   Wed Apr 27 13:47:41 2016 -0400

    runtime/internal/atomic: fix vet warnings
    
    Change-Id: Ib29cf7abbbdaed81e918e5e41bca4e9b8da24621
    Reviewed-on: https://go-review.googlesource.com/22503
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7a964e1df4c94941d7ca53491de4ff7f12bc0941
Author: Shenghou Ma <minux@golang.org>
Date:   Wed Apr 27 13:47:19 2016 -0400

    cmd/vet: add mips64x assembly check support
    
    Change-Id: I0a6a92604dbfa4b0f9c5ae483b574331f246dcad
    Reviewed-on: https://go-review.googlesource.com/22502
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit c5a95e47a02fa32a5a560d1e1cccc30f0a502dda
Author: Shenghou Ma <minux@golang.org>
Date:   Wed May 4 12:48:20 2016 -0400

    doc: update go1.7.txt
    
    Change-Id: I78efbfe0d7e9825126109a568c99f548a099b0fb
    Reviewed-on: https://go-review.googlesource.com/22771
    Reviewed-by: Minux Ma <minux@golang.org>

commit 04a30025dbc8ff7757a763562d7d4a2b5ff68583
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:58 2016 -0400

    test: enable fixedbugs/issue10607.go test on linux/mips64x
    
    external linking is now supported.
    
    Change-Id: I13e90c39dad86e60781adecdbe8e6bc9e522f740
    Reviewed-on: https://go-review.googlesource.com/19811
    Reviewed-by: Minux Ma <minux@golang.org>

commit 3b4180c67425ead0631a8c86eb164f9eaa6c922d
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:48 2016 -0400

    cmd/go: enable TestNodeReading on linux/mips64x
    
    external linking is now supported.
    
    Change-Id: I3f552f5f09391205fced509fe8a5a38297ea8153
    Reviewed-on: https://go-review.googlesource.com/19810
    Reviewed-by: Minux Ma <minux@golang.org>

commit 1cec0fec8caff1eacaba99ff71b2c57574887aab
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:44 2016 -0400

    cmd/dist: enable cgo and external linking on linux/mips64x
    
    Fixes #14126
    
    Change-Id: I21c8e06c01d3ef02ee09dc185d4443e2da8fd52b
    Reviewed-on: https://go-review.googlesource.com/19809
    Reviewed-by: Minux Ma <minux@golang.org>

commit 094e5a92886948ed2ba42031e29919ecb6087c8b
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:38 2016 -0400

    misc/cgo/test: add mips64x test case for issue9400
    
    Change-Id: If2b4abb6ff322c20e35de025298c8e5ab53edd42
    Reviewed-on: https://go-review.googlesource.com/19808
    Reviewed-by: Minux Ma <minux@golang.org>

commit dcd613862bc51db8455ccd22c03336111afe6883
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:33 2016 -0400

    cmd/link/internal/ld: force external linking for mips64x with cgo
    
    cgo internal linking is not supported yet (issue #14449).
    
    Change-Id: Ic968916383d77b7f449db8f230c928a1e81939e0
    Reviewed-on: https://go-review.googlesource.com/19807
    Reviewed-by: Minux Ma <minux@golang.org>

commit b6687c8933e2e123cd336d6ee96aa43df40bfc24
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:24 2016 -0400

    runtime: add linux/mips64x cgo support
    
    Change-Id: Id40dd05b7b264f3b779fdf9ccc2421ba4bc70589
    Reviewed-on: https://go-review.googlesource.com/19806
    Reviewed-by: Minux Ma <minux@golang.org>

commit 6e9043234221678e53d3b46ea98fb2ed56c260b7
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Tue May 3 13:49:54 2016 -0700

    runtime/cgo: add context argument to crosscall2 on mips64
    
    Change-Id: Id018516075842afd8af12fbf207763a851d5a851
    Reviewed-on: https://go-review.googlesource.com/22754
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 082881daf84a0ce3aae847c64b483c04d471e088
Author: Martin Möhrmann <martisch@uos.de>
Date:   Tue May 3 11:10:26 2016 +0200

    misc/cgo/fortran: fix gfortran compile test
    
    Fixes #14544
    
    Change-Id: I58b0b164ebbfeafe4ab32039a063df53e3018a6d
    Reviewed-on: https://go-review.googlesource.com/22730
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Sean Lake <odysseus9672@gmail.com>

commit e155bf0ce8543ebffb3b5a699861402f7abe08d7
Author: Niko Dziemba <niko@dziemba.com>
Date:   Wed Feb 10 15:57:16 2016 +0100

    archive/zip: pool flate readers
    
    Similar to the flate Writer pools already used,
    this adds pooling for flate Readers.
    
    compress/flate allows re-using of Readers, see
    https://codereview.appspot.com/97140043/
    
    In a real-world scenario when reading ~ 500 small files from a ZIP
    archive this gives a speedup of 1.5x-2x.
    
    Fixes #14289
    
    Change-Id: I2d98ad983e95ab7d97e06fd0145f619b4f47caa4
    Reviewed-on: https://go-review.googlesource.com/19416
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f41edf120923000c92ed65ab501590fb1c8c548
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Wed May 4 11:23:24 2016 +1200

    cmd/link: always read type data for dynimport symbols
    
    Consider three shared libraries:
    
     libBase.so -- defines a type T
     lib2.so    -- references type T
     lib3.so    -- also references type T, and something from lib2
    
    lib2.so will contain a type symbol for T in its symbol table, but no
    definition. If, when linking lib3.so the linker reads the symbols from lib2.so
    before libBase.so, the linker didn't read the type data and later crashed.
    
    The fix is trivial but the test change is a bit messy because the order the
    linker reads the shared libraries in ends up depending on the order of the
    import statements in the file so I had to rename one of the test packages so
    that gofmt doesn't fix the test by accident...
    
    Fixes #15516
    
    Change-Id: I124b058f782c900a3a54c15ed66a0d91d0cde5ce
    Reviewed-on: https://go-review.googlesource.com/22744
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ba6765c237ed4dece0056b774d81e160b3839db1
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed May 4 12:20:14 2016 +1000

    cmd/api: remove debug/pe replated changes from next.txt
    
    See CL 22720 for details.
    
    Updates #15345
    
    Change-Id: If93ddbb8137d57da9846b671160b4cebe1992570
    Reviewed-on: https://go-review.googlesource.com/22752
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 9f8ecd75fcbee462dc9f1f2d1ce1025a14e1cf5b
Author: Keith Randall <khr@golang.org>
Date:   Tue May 3 17:21:36 2016 -0700

    cmd/compile: use SSA tests on legacy compiler
    
    Why not?  Because the 386 backend can't handle one of them.
    But other than that, it should work.
    
    Change-Id: Iaeb9735f8c3c281136a0734376dec5ddba21be3b
    Reviewed-on: https://go-review.googlesource.com/22748
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 9dee7771f561cf6aee081c0af6658cc81fac3918
Author: Vishvananda Ishaya <vishvananda@gmail.com>
Date:   Tue Feb 16 17:58:11 2016 -0800

    net: allow netgo to use lookup from nsswitch.conf
    
    Change https://golang.org/cl/8945 allowed Go to use its own DNS resolver
    instead of libc in a number of cases. The code parses nsswitch.conf and
    attempts to resolve things in the same order. Unfortunately, builds with
    netgo completely ignore this parsing and always search via
    hostLookupFilesDNS.
    
    This commit modifies the logic to allow binaries built with netgo to
    parse nsswitch.conf and attempt to resolve using the order specified
    there. If the parsing results in hostLookupCGo, it falls back to the
    original hostLookupFilesDNS. Tests are also added to ensure that both
    the parsing and the fallback work properly.
    
    Fixes #14354
    
    Change-Id: Ib079ad03d7036a4ec57f18352a15ba55d933f261
    Reviewed-on: https://go-review.googlesource.com/19523
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 84e808043ff40992ea1e25beb58365fd8e4f2591
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Apr 29 15:20:27 2016 -0700

    runtime: use cgo traceback for SIGPROF
    
    If we collected a cgo traceback when entering the SIGPROF signal
    handler, record it as part of the profiling stack trace.
    
    This serves as the promised test for https://golang.org/cl/21055 .
    
    Change-Id: I5f60cd6cea1d9b7c3932211483a6bfab60ed21d2
    Reviewed-on: https://go-review.googlesource.com/22650
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 4d5ac10f690bbc742a3cbf186ad8f3169a45ee26
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue May 3 23:33:32 2016 +0000

    cmd/vet: fix test's dependence on perl
    
    Change-Id: I774dbd4f90ef271a0969c3c8e65d145669312e3e
    Reviewed-on: https://go-review.googlesource.com/22745
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ross Light <light@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b64c7fc6832902acb8eebc67c887d2ef9114f644
Author: Keith Randall <khr@golang.org>
Date:   Tue May 3 13:58:28 2016 -0700

    cmd/compile: never CSE two memories
    
    It never makes sense to CSE two ops that generate memory.
    We might as well start those ops off in their own partition.
    
    Fixes #15520
    
    Change-Id: I0091ed51640f2c10cd0117f290b034dde7a86721
    Reviewed-on: https://go-review.googlesource.com/22741
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 01182425f847e4c98a53c60d0994175e21fd06dd
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue May 3 19:54:49 2016 +0000

    strings, bytes: fix Reader 0 byte read at EOF
    
    0 byte reads at EOF weren't returning EOF.
    
    Change-Id: I19b5fd5a72e83d49566a230ce4067be03f00d14b
    Reviewed-on: https://go-review.googlesource.com/22740
    Reviewed-by: Bryan Mills <bcmills@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 15f7a66f3686d24fd5ad233c6c6b1ff22daa42ae
Author: Robert Griesemer <gri@golang.org>
Date:   Mon May 2 17:03:36 2016 -0700

    cmd/compile: use correct packages when exporting/importing _ (blank) names
    
    1) Blank parameters cannot be accessed so the package doesn't matter.
       Do not export it, and consistently use localpkg when importing a
       blank parameter.
    
    2) More accurately replicate fmt.go and parser.go logic when importing
       a blank struct field. Blank struct fields get exported without
       package qualification.
       (This is actually incorrect, even with the old textual export format,
       but we will fix that in a separate change. See also issue 15514.)
    
    Fixes #15491.
    
    Change-Id: I7978e8de163eb9965964942aee27f13bf94a7c3c
    Reviewed-on: https://go-review.googlesource.com/22714
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit babdbfb8260bbe8c6305c9d3023d83cc0b3645bf
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Sun Apr 24 13:33:33 2016 +0200

    cmd/trace: make binary argument optional
    
    1.7 traces embed symbol info and we now generate symbolized pprof profiles,
    so we don't need the binary. Make binary argument optional as 1.5 traces
    still need it.
    
    Change-Id: I65eb13e3d20ec765acf85c42d42a8d7aae09854c
    Reviewed-on: https://go-review.googlesource.com/22410
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>
    Reviewed-by: Austin Clements <austin@google.com>

commit caa21475328999c1cd108b71ceb6efb7f4cf8fc4
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Feb 26 21:57:16 2016 +0100

    runtime: per-P contexts for race detector
    
    Race runtime also needs local malloc caches and currently uses
    a mix of per-OS-thread and per-goroutine caches. This leads to
    increased memory consumption. But more importantly cache of
    synchronization objects is per-goroutine and we don't always
    have goroutine context when feeing memory in GC. As the result
    synchronization object descriptors leak (more precisely, they
    can be reused if another synchronization object is recreated
    at the same address, but it does not always help). For example,
    the added BenchmarkSyncLeak has effectively runaway memory
    consumption (based on a real long running server).
    
    This change updates race runtime with support for per-P contexts.
    BenchmarkSyncLeak now stabilizes at ~1GB memory consumption.
    
    Long term, this will allow us to remove race runtime dependency
    on glibc (as malloc is the main cornerstone).
    
    I've also implemented a different scheme to pass P context to
    race runtime: scheduler notified race runtime about association
    between G and P by calling procwire(g, p)/procunwire(g, p).
    But it turned out to be very messy as we have lots of places
    where the association changes (e.g. syscalls). So I dropped it
    in favor of the current scheme: race runtime asks scheduler
    about the current P.
    
    Fixes #14533
    
    Change-Id: Iad10d2f816a44affae1b9fed446b3580eafd8c69
    Reviewed-on: https://go-review.googlesource.com/19970
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fcd7c02c70a110c6f6dbac30ad4ac3eb435ac3fd
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Mar 18 16:34:11 2016 +0100

    runtime: fix CPU underutilization
    
    Runqempty is a critical predicate for scheduler. If runqempty spuriously
    returns true, then scheduler can fail to schedule arbitrary number of
    runnable goroutines on idle Ps for arbitrary long time. With the addition
    of runnext runqempty predicate become broken (can spuriously return true).
    Consider that runnext is not nil and the main array is empty. Runqempty
    observes that the array is empty, then it is descheduled for some time.
    Then queue owner pushes another element to the queue evicting runnext
    into the array. Then queue owner pops runnext. Then runqempty resumes
    and observes runnext is nil and returns true. But there were no point
    in time when the queue was empty.
    
    Fix runqempty predicate to not return true spuriously.
    
    Change-Id: Ifb7d75a699101f3ff753c4ce7c983cf08befd31e
    Reviewed-on: https://go-review.googlesource.com/20858
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 499cd3371997bdb6e33377266754d20782ef134d
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon May 2 14:46:40 2016 +1200

    cmd/cgo: an approach to tsan that works with gcc
    
    GCC, unlike clang, does not provide any way for code being compiled to tell if
    -fsanitize-thread was passed. But cgo can look to see if that flag is being
    passed and generate different code in that case.
    
    Fixes #14602
    
    Change-Id: I86cb5318c2e35501ae399618c05af461d1252d2d
    Reviewed-on: https://go-review.googlesource.com/22688
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f459660cb85abd504845f93fdb65b1932bd6ac37
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon May 2 22:22:25 2016 +0000

    net/http: keep idle conns sorted by usage
    
    Addressing feedback from Alan Su in https://golang.org/cl/22655
    
    Change-Id: Ie0724efea2b4da67503c074e265ec7f8d7de7791
    Reviewed-on: https://go-review.googlesource.com/22709
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6b019e216b4521c2375572a4edf2e08c1d9bc754
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon May 2 17:32:14 2016 -0400

    cmd/link: bump object file version number
    
    The format has been tweaked several times in the latest cycle, so
    replace go13ld with go17ld.
    
    Change-Id: I343c49b02b7516fd781bc96ad46640579da68c59
    Reviewed-on: https://go-review.googlesource.com/22708
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 097e2c0a8a759819dde3c9b169058b2fb55b0de3
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun May 1 17:18:18 2016 -0600

    net/http: fix typo in comment in main_test
    
    Change-Id: I22d4b5a0d5c146a65d4ef77a32e23f7780ba1d95
    Reviewed-on: https://go-review.googlesource.com/22684
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 35d342b4fa749f7a3d45527580d3aa0c2a42e1f4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon May 2 16:07:18 2016 +0000

    net/http: remove some TODOs
    
    Change-Id: Iaf200ba9a308bc8f511eec4a70dbeb014bf5fdc3
    Reviewed-on: https://go-review.googlesource.com/22690
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 53fd522c0db58f3bd75d85295f46bb06e8ab1a9b
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Apr 10 14:32:26 2016 -0700

    all: make copyright headers consistent with one space after period
    
    Follows suit with https://go-review.googlesource.com/#/c/20111.
    
    Generated by running
    $ grep -R 'Go Authors.  All' * | cut -d":" -f1 | while read F;do perl -pi -e 's/Go
    Authors.  All/Go Authors. All/g' $F;done
    
    The code in cmd/internal/unvendor wasn't changed.
    
    Fixes #15213
    
    Change-Id: I4f235cee0a62ec435f9e8540a1ec08ae03b1a75f
    Reviewed-on: https://go-review.googlesource.com/21819
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e50346d26a935cd43023856d0df65a158d867c00
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun May 1 17:03:46 2016 -0700

    cmd/cgo, misc/cgo/test: make -Wdeclaration-after-statement clean
    
    I got a complaint that cgo output triggers warnings with
    -Wdeclaration-after-statement.  I don't think it's worth testing for
    this--C has permitted declarations after statements since C99--but it is
    easy enough to fix.  It may break again; so it goes.
    
    This CL also fixes errno handling to avoid getting confused if the tsan
    functions happen to change the global errno variable.
    
    Change-Id: I0ec7c63a6be5653ef44799d134c8d27cb5efa441
    Reviewed-on: https://go-review.googlesource.com/22686
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 45f39fb46747d0c46bc25e6ef605c00e96e2dc07
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon May 2 13:58:48 2016 +1200

    cmd/link: pass -Wl,-z,relro to host linker in -buildmode=PIE
    
    Fixes #15485
    
    Change-Id: I8e9314be91db89873130b232b589a284822e6643
    Reviewed-on: https://go-review.googlesource.com/22687
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5325fbc7dbab155a88efab0bcd128236e97b3349
Author: Keith Randall <khr@golang.org>
Date:   Fri Apr 29 12:09:32 2016 -0700

    cmd/compile: don't SSA any variables when -N
    
    Turn SSAing of variables off when compiling with optimizations off.
    This helps keep variable names around that would otherwise be
    optimized away.
    
    Fixes #14744
    
    Change-Id: I31db8cf269c068c7c5851808f13e5955a09810ca
    Reviewed-on: https://go-review.googlesource.com/22681
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 5776c20164e5852ec13828db10277019db86180b
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon May 2 04:44:46 2016 +0900

    net/http: gofmt -w -s
    
    Change-Id: I7e07888e90c7449f119e74b97995efcd7feef76e
    Reviewed-on: https://go-review.googlesource.com/22682
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ade0eb2f0689b4d88d425451387c516013fd4b20
Author: Keith Randall <khr@golang.org>
Date:   Sat Apr 30 22:28:37 2016 -0700

    cmd/compile: fix reslice
    
    := is the wrong thing here.  The new variable masks the old
    variable so we allocate the slice afresh each time around the loop.
    
    Change-Id: I759c30e1bfa88f40decca6dd7d1e051e14ca0844
    Reviewed-on: https://go-review.googlesource.com/22679
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 24c05e7e695767a46ce6e48d2492c29ba7adffc4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun May 1 15:18:13 2016 +0000

    net/http: fix typo in comment
    
    Change-Id: I753e62879a56582a9511e3f34fdeac929202efbf
    Reviewed-on: https://go-review.googlesource.com/22680
    Reviewed-by: Ralph Corderoy <ralph@inputplus.co.uk>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca8b6270724026fb7697e9f9510d1e6865ed7045
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 16 09:35:32 2016 -0700

    net/http: add Response.Uncompressed bool
    
    The Transport's automatic gzip uncompression lost information in the
    process (the compressed Content-Length, if known). Normally that's
    okay, but it's not okay for reverse proxies which have to be able to
    generate a valid HTTP response from the Transport's provided
    *Response.
    
    Reverse proxies should normally be disabling compression anyway and
    just piping the compressed pipes though and not wasting CPU cycles
    decompressing them. So also document that on the new Uncompressed
    field.
    
    Then, using the new field, fix Response.Write to not inject a bogus
    "Connection: close" header when it doesn't see a transfer encoding or
    content-length.
    
    Updates #15366 (the http2 side remains, once this is submitted)
    
    Change-Id: I476f40aa14cfa7aa7b3bf99021bebba4639f9640
    Reviewed-on: https://go-review.googlesource.com/22671
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a9cf0b1e1e2a66db547fcabb7188465e4ac54700
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 30 21:11:26 2016 -0700

    net/http: provide access to the listener address an HTTP request arrived on
    
    This adds a context key named LocalAddrContextKey (for now, see #15229) to
    let users access the net.Addr of the net.Listener that accepted the connection
    that sent an HTTP request. This is similar to ServerContextKey which provides
    access to the *Server. (A Server may have multiple Listeners)
    
    Fixes #6732
    
    Change-Id: I74296307b68aaaab8df7ad4a143e11b5227b5e62
    Reviewed-on: https://go-review.googlesource.com/22672
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit abc1472d78c70888473634497b49b1c2e1bb6569
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 30 21:11:42 2016 -0500

    net/http: add Transport.IdleConnTimeout
    
    Don't keep idle HTTP client connections open forever. Add a new knob,
    Transport.IdleConnTimeout, and make the default be 90 seconds. I
    figure 90 seconds is more than a minute, and less than infinite, and I
    figure enough code has things waking up once a minute polling APIs.
    
    This also removes the Transport's idleCount field which was unused and
    redundant with the size of the idleLRU map (which was actually used).
    
    Change-Id: Ibb698a9a9a26f28e00a20fe7ed23f4afb20c2322
    Reviewed-on: https://go-review.googlesource.com/22670
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0ab78df9ea602d6bc9cf45dbd610c3d6f534cb58
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 30 21:27:04 2016 -0500

    net/http: fix a few crashes with a ClientTrace with nil funcs
    
    And add a test.
    
    Updates #12580
    
    Change-Id: Ia7eaba09b8e7fd0eddbcaefb948d01ab10af876e
    Reviewed-on: https://go-review.googlesource.com/22659
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b3a130e81a0c3c2508f483af15e57d181c5cdc1e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 30 20:11:34 2016 -0700

    net/http: document some errors more, mark ErrWriteAfterFlush as unused
    
    Fixes #15150
    
    Change-Id: I1a892d5b0516a37dac050d3bb448e0a2571db16e
    Reviewed-on: https://go-review.googlesource.com/22658
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit d713e8e8069ee052ef4d9eac49a0c74a3b5c2c92
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Apr 28 15:01:41 2016 -0700

    archive/zip: improve BenchmarkCompressedZipGarbage
    
    Before this CL:
    
    $ go test -bench=CompressedZipGarbage -count=5 -run=NONE archive/zip
    BenchmarkCompressedZipGarbage-8        50  20677087 ns/op   42973 B/op      47 allocs/op
    BenchmarkCompressedZipGarbage-8       100  20584764 ns/op   24294 B/op      47 allocs/op
    BenchmarkCompressedZipGarbage-8        50  20859221 ns/op   42973 B/op      47 allocs/op
    BenchmarkCompressedZipGarbage-8       100  20901176 ns/op   24294 B/op      47 allocs/op
    BenchmarkCompressedZipGarbage-8        50  21282409 ns/op   42973 B/op      47 allocs/op
    
    The B/op number is effectively meaningless. There
    is a surprisingly large one-time cost that gets
    divided by the number of iterations that your
    machine can get through in a second.
    
    This CL discards the first run, which helps.
    It is not a panacea. Running with -benchtime=10s
    will allow the sync.Pool to be emptied,
    which brings the problem back.
    However, since there are more iterations to divide
    the cost through, it’s not quite as bad,
    and running with a high benchtime is rare.
    
    This CL changes the meaning of the B/op number,
    which is unfortunate, since it won’t have the
    same order of magnitude as previous Go versions.
    But it wasn’t really comparable before anyway,
    since it didn’t have any reliable meaning at all.
    
    After this CL:
    
    $ go test -bench=CompressedZipGarbage -count=5 -run=NONE archive/zip
    BenchmarkCompressedZipGarbage-8              100          20881890 ns/op            5616 B/op         47 allocs/op
    BenchmarkCompressedZipGarbage-8               50          20622757 ns/op            5616 B/op         47 allocs/op
    BenchmarkCompressedZipGarbage-8               50          20628193 ns/op            5616 B/op         47 allocs/op
    BenchmarkCompressedZipGarbage-8              100          20756612 ns/op            5616 B/op         47 allocs/op
    BenchmarkCompressedZipGarbage-8              100          20639774 ns/op            5616 B/op         47 allocs/op
    
    Change-Id: Iedee04f39328974c7fa272a6113d423e7ffce50f
    Reviewed-on: https://go-review.googlesource.com/22585
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3836354f113367a6a405ac17a65f406514ea9313
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Apr 28 13:51:12 2016 -0500

    doc: update go1.7.txt
    
    Change-Id: I53dd5affc3a1e1f741fe44c7ce691bb2cd432764
    Reviewed-on: https://go-review.googlesource.com/22657
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3b0b30727ca6caeddcc6b49bc97960826b9f15d1
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:14 2016 -0400

    cmd/internal/obj/mips, cmd/link: add support TLS relocation for mips64x
    
    a new relocation R_ADDRMIPSTLS is added, which resolves to 16-bit offset
    of a TLS address on mips64x.
    
    Change-Id: Ic60d0e1ba49ff1c433cead242f5884677ab227a5
    Reviewed-on: https://go-review.googlesource.com/19804
    Reviewed-by: Minux Ma <minux@golang.org>

commit 77c7f12438aa83d9ba02c7fd48e4a0a288ed9123
Author: Austin Clements <austin@google.com>
Date:   Sat Apr 30 21:47:30 2016 -0400

    runtime: update some comments
    
    This updates some comments that became out of date when we moved the
    mark bit out of the heap bitmap and started using the high bit for the
    first word as a scan/dead bit.
    
    Change-Id: I4a572d16db6114cadff006825466c1f18359f2db
    Reviewed-on: https://go-review.googlesource.com/22662
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 5d002dbc2179c99beb47490d316c53f687c9565a
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:20 2016 -0400

    runtime/cgo: add linux/mips64x cgo support
    
    MIPS N64 ABI passes arguments in registers R4-R11, return value in R2.
    R16-R23, R28, R30 and F24-F31 are callee-save. gcc PIC code expects
    to be called with indirect call through R25.
    
    Change-Id: I24f582b4b58e1891ba9fd606509990f95cca8051
    Reviewed-on: https://go-review.googlesource.com/19805
    Reviewed-by: Minux Ma <minux@golang.org>

commit 073d292c453f85f6c50f063ba0a4d0d1b328dadc
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:09 2016 -0400

    cmd/link, runtime: add external linking support for linux/mips64x
    
    Fixes #12560
    
    Change-Id: Ic2004fc7b09f2dbbf83c41f8c6307757c0e1676d
    Reviewed-on: https://go-review.googlesource.com/19803
    Reviewed-by: Minux Ma <minux@golang.org>

commit b13b249f43d4d38b145cd01135026286052bbc88
Author: Frits van Bommel <fvbommel@gmail.com>
Date:   Sat Apr 30 11:13:29 2016 +0200

    cmd/compile: Improve readability of HTML produced by GOSSAFUNC
    
    Factor out the Aux/AuxInt handling in (*Value).LongString() and
    use it in (*Value).LongHTML() as well.
    This especially improves readability of auxFloat32, auxFloat64,
    and auxSymValAndOff values which would otherwise be printed as
    opaque integers.
    This change also makes LongString() slightly less verbose by
    eliding offsets that are zero (as is very often the case).
    
    Additionally, ensure the HTML is interpreted as UTF-8 so that
    non-ASCII characters (especially the "middle dots" in some symbols)
    show up correctly.
    
    Change-Id: Ie26221df876faa056d322b3e423af63f33cd109d
    Reviewed-on: https://go-review.googlesource.com/22641
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Frits van Bommel <fvbommel@gmail.com>

commit 981395103e9addfc494245979063dc59a327e888
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:18:02 2016 -0400

    cmd/internal/obj/mips et al.: introduce SB register on mips64x
    
    SB register (R28) is introduced for access external addresses with shorter
    instruction sequences. It is loaded at entry points. External data within
    2G of SB can be accessed this way.
    
    cmd/internal/obj: relocaltion R_ADDRMIPS is split into two relocations
    R_ADDRMIPS and R_ADDRMIPSU, handling the low 16 bits and the "upper" 16
    bits of external addresses, respectively, since the instructios may not
    be adjacent. It might be better if relocation Variant could be used.
    
    cmd/link/internal/mips64: support new relocations.
    
    cmd/compile/internal/mips64: reserve SB register.
    
    runtime: initialize SB register at entry points.
    
    Change-Id: I5f34868f88c5a9698c042a8a1f12f76806c187b9
    Reviewed-on: https://go-review.googlesource.com/19802
    Reviewed-by: Minux Ma <minux@golang.org>

commit 8dc0444a04a8a43887b4ca3753ee63b430cf2602
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:17:44 2016 -0400

    cmd/asm, cmd/internal/obj/mips: add an alias of RSB on mips64x
    
    Change-Id: I724ce0a48c1aeed14267c049fa415a6fa2fffbcf
    Reviewed-on: https://go-review.googlesource.com/19864
    Reviewed-by: Minux Ma <minux@golang.org>

commit a409fb80b0ebc1353336a9c03f8db408fbc6d1d5
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:17:36 2016 -0400

    cmd/internal/obj/mips, runtime: change REGTMP to R23
    
    Leave R28 to SB register, which will be introduced in CL 19802.
    
    Change-Id: I1cf7a789695c5de664267ec8086bfb0b043ebc14
    Reviewed-on: https://go-review.googlesource.com/19863
    Reviewed-by: Minux Ma <minux@golang.org>

commit 9bc1e2065c3a4ac257bebc5c7c07cd5c844b11ba
Author: Cherry Zhang <lunaria21@gmail.com>
Date:   Wed Apr 27 22:16:51 2016 -0400

    cmd/asm/internal/asm/testdata: remove WORD $foo(SB) from mips64.s
    
    on mips64, address is 64 bit, not a WORD. also it is never used anywhere.
    
    Change-Id: Ic6bf6d6a21c8d2f1eb7bfe9efc5a29186ec2a8ef
    Reviewed-on: https://go-review.googlesource.com/19801
    Reviewed-by: Minux Ma <minux@golang.org>

commit 81b2ea4d34a42bee14e1ed17d5166546be957849
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 30 17:17:26 2016 -0500

    net/http: add Transport.MaxIdleConns limit
    
    The HTTP client had a limit for the maximum number of idle connections
    per-host, but not a global limit.
    
    This CLs adds a global idle connection limit too,
    Transport.MaxIdleConns.
    
    All idle conns are now also stored in a doubly-linked list. When there
    are too many, the oldest one is closed.
    
    Fixes #15461
    
    Change-Id: I72abbc28d140c73cf50f278fa70088b45ae0deef
    Reviewed-on: https://go-review.googlesource.com/22655
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 38cfaa5f0ac1e8b9c7528649f01e4b0edcd4a788
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 30 17:29:28 2016 -0500

    net/http: expand documentation of Server.MaxHeaderBytes
    
    Clarify that it includes the RFC 7230 "request-line".
    
    Fixes #15494
    
    Change-Id: I9cc5dd5f2d85ebf903229539208cec4da5c38d04
    Reviewed-on: https://go-review.googlesource.com/22656
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 4e0cd1eeef419b221fda3dd3966be71095f0b4ce
Author: Kevin Burke <kev@inburke.com>
Date:   Sat Apr 23 11:00:05 2016 -0700

    database/sql: clone data for named []byte types
    
    Previously named byte types like json.RawMessage could get dirty
    database memory from a call to Scan. These types would activate a
    code path that didn't clone the byte data coming from the database
    before assigning it. Another thread could then overwrite the byte
    array in src, which has unexpected consequences.
    
    Originally reported by Jason Moiron; the patch and test are his
    suggestions. Fixes #13905.
    
    Change-Id: Iacfef61cbc9dd51c8fccef9b2b9d9544c77dd0e0
    Reviewed-on: https://go-review.googlesource.com/22393
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a20fd1f6ba668ec0bd8c432d26def2b65cc6609a
Author: Austin Clements <austin@google.com>
Date:   Fri Apr 29 14:51:48 2016 -0400

    runtime: reclaim scan/dead bit in first word
    
    With the switch to separate mark bitmaps, the scan/dead bit for the
    first word of each object is now unused. Reclaim this bit and use it
    as a scan/dead bit, just like words three and on. The second word is
    still used for checkmark.
    
    This dramatically simplifies heapBitsSetTypeNoScan and hasPointers,
    since they no longer need different cases for 1, 2, and 3+ word
    objects. They can instead just manipulate the heap bitmap for the
    first word and be done with it.
    
    In order to enable this, we change heapBitsSetType and runGCProg to
    always set the scan/dead bit to scan for the first word on every code
    path. Since these functions only apply to types that have pointers,
    there's no need to do this conditionally: it's *always* necessary to
    set the scan bit in the first word.
    
    We also change every place that scans an object and checks if there
    are more pointers. Rather than only checking morePointers if the word
    is >= 2, we now check morePointers if word != 1 (since that's the
    checkmark word).
    
    Looking forward, we should probably reclaim the checkmark bit, too,
    but that's going to be quite a bit more work.
    
    Tested by setting doubleCheck in heapBitsSetType and running all.bash
    on both linux/amd64 and linux/386, and by running GOGC=10 all.bash.
    
    This particularly improves the FmtFprintf* go1 benchmarks, since they
    do a large amount of noscan allocation.
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.34s ± 1%     2.38s ± 1%  +1.70%  (p=0.000 n=17+19)
    Fannkuch11-12                2.09s ± 0%     2.09s ± 1%    ~     (p=0.276 n=17+16)
    FmtFprintfEmpty-12          44.9ns ± 2%    44.8ns ± 2%    ~     (p=0.340 n=19+18)
    FmtFprintfString-12          127ns ± 0%     125ns ± 0%  -1.57%  (p=0.000 n=16+15)
    FmtFprintfInt-12             128ns ± 0%     122ns ± 1%  -4.45%  (p=0.000 n=15+20)
    FmtFprintfIntInt-12          207ns ± 1%     193ns ± 0%  -6.55%  (p=0.000 n=19+14)
    FmtFprintfPrefixedInt-12     197ns ± 1%     191ns ± 0%  -2.93%  (p=0.000 n=17+18)
    FmtFprintfFloat-12           263ns ± 0%     248ns ± 1%  -5.88%  (p=0.000 n=15+19)
    FmtManyArgs-12               794ns ± 0%     779ns ± 1%  -1.90%  (p=0.000 n=18+18)
    GobDecode-12                7.14ms ± 2%    7.11ms ± 1%    ~     (p=0.072 n=20+20)
    GobEncode-12                5.85ms ± 1%    5.82ms ± 1%  -0.49%  (p=0.000 n=20+20)
    Gzip-12                      218ms ± 1%     215ms ± 1%  -1.22%  (p=0.000 n=19+19)
    Gunzip-12                   36.8ms ± 0%    36.7ms ± 0%  -0.18%  (p=0.006 n=18+20)
    HTTPClientServer-12         77.1µs ± 4%    77.1µs ± 3%    ~     (p=0.945 n=19+20)
    JSONEncode-12               15.6ms ± 1%    15.9ms ± 1%  +1.68%  (p=0.000 n=18+20)
    JSONDecode-12               55.2ms ± 1%    53.6ms ± 1%  -2.93%  (p=0.000 n=17+19)
    Mandelbrot200-12            4.05ms ± 1%    4.05ms ± 0%    ~     (p=0.306 n=17+17)
    GoParse-12                  3.14ms ± 1%    3.10ms ± 1%  -1.31%  (p=0.000 n=19+18)
    RegexpMatchEasy0_32-12      69.3ns ± 1%    70.0ns ± 0%  +0.89%  (p=0.000 n=19+17)
    RegexpMatchEasy0_1K-12       237ns ± 1%     236ns ± 0%  -0.62%  (p=0.000 n=19+16)
    RegexpMatchEasy1_32-12      69.5ns ± 1%    70.3ns ± 1%  +1.14%  (p=0.000 n=18+17)
    RegexpMatchEasy1_1K-12       377ns ± 1%     366ns ± 1%  -3.03%  (p=0.000 n=15+19)
    RegexpMatchMedium_32-12      107ns ± 1%     107ns ± 2%    ~     (p=0.318 n=20+19)
    RegexpMatchMedium_1K-12     33.8µs ± 3%    33.5µs ± 1%  -1.04%  (p=0.001 n=20+19)
    RegexpMatchHard_32-12       1.68µs ± 1%    1.73µs ± 0%  +2.50%  (p=0.000 n=20+18)
    RegexpMatchHard_1K-12       50.8µs ± 1%    52.0µs ± 1%  +2.50%  (p=0.000 n=19+18)
    Revcomp-12                   381ms ± 1%     385ms ± 1%  +1.00%  (p=0.000 n=17+18)
    Template-12                 64.9ms ± 3%    62.6ms ± 1%  -3.55%  (p=0.000 n=19+18)
    TimeParse-12                 324ns ± 0%     328ns ± 1%  +1.25%  (p=0.000 n=18+18)
    TimeFormat-12                345ns ± 0%     334ns ± 0%  -3.31%  (p=0.000 n=15+17)
    [Geo mean]                  52.1µs         51.5µs       -1.00%
    
    Change-Id: I13e74da3193a7f80794c654f944d1f0d60817049
    Reviewed-on: https://go-review.googlesource.com/22632
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d5e3d08b3ad0048c540727b5512f29ecc70ef51a
Author: Austin Clements <austin@google.com>
Date:   Fri Apr 29 15:19:11 2016 -0400

    runtime: use morePointers and isPointer in more places
    
    This makes this code better self-documenting and makes it easier to
    find these places in the future.
    
    Change-Id: I31dc5598ae67f937fb9ef26df92fd41d01e983c3
    Reviewed-on: https://go-review.googlesource.com/22631
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a5d3f7ece9033393166d0c74cd1121c15032ba4d
Author: Austin Clements <austin@google.com>
Date:   Fri Apr 29 15:17:34 2016 -0400

    runtime: avoid conditional execution in morePointers and isPointer
    
    heapBits.bits is carefully written to produce good machine code. Use
    it in heapBits.morePointers and heapBits.isPointer to get good machine
    code there, too.
    
    Change-Id: I208c7d0d38697e7a22cad67f692162589b75f1e2
    Reviewed-on: https://go-review.googlesource.com/22630
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7a60a962b9284763f8ff239aae54d1d858dd4543
Author: Keith Randall <khr@golang.org>
Date:   Fri Apr 29 17:10:02 2016 -0700

    cmd/compile: ecx is reserved for PIC, don't let peep work on it
    
    Fixes #15496
    
    Change-Id: Ieb5be1caa4b1c23e23b20d56c1a0a619032a9f5d
    Reviewed-on: https://go-review.googlesource.com/22652
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 58f52cbb79d6ed369bd3fed44fe615a23c721189
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Apr 29 20:17:06 2016 -0400

    runtime: fix cgocallback_gofunc on ppc64x
    
    Fix issues introduced in 5f9a870.
    
    Change-Id: Ia75945ef563956613bf88bbe57800a96455c265d
    Reviewed-on: https://go-review.googlesource.com/22661
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9fe572e509470d53c220e7f43a825d70a7f0d8b3
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Apr 29 15:44:36 2016 -0700

    runtime: fix cgocallback_gofunc argument passing on arm64
    
    Change-Id: I4b34bcd5cde71ecfbb352b39c4231de6168cc7f3
    Reviewed-on: https://go-review.googlesource.com/22651
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 36b6c03827f51a8464a135d27212100d893f582c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 29 15:56:57 2016 -0700

    root: remove dev.garbage file
    
    Change-Id: I99b2ca52824341d986090f5c78ab4f396594bcdf
    Reviewed-on: https://go-review.googlesource.com/22660
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5f9a870bf1bf461ca3609502608b12cc4aab189a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Apr 27 14:18:29 2016 -0700

    cmd/cgo, runtime, runtime/cgo: use cgo context function
    
    Add support for the context function set by runtime.SetCgoTraceback.
    The context function was added in CL 17761, without support.
    This CL is the support.
    
    This CL has not been tested for real C code, as a working context
    function for C code requires unwind support that does not seem to exist.
    I wanted to get the CL out before the freeze.
    
    I apologize for the length of this CL.  It's mostly plumbing, but
    unfortunately the plumbing is processor-specific.
    
    Change-Id: I8ce11a0de9b3dafcc29efd2649d776e93bff0e90
    Reviewed-on: https://go-review.googlesource.com/22508
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c717675c35cb436bdab62091a6288843aa1c863c
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Apr 17 21:26:23 2016 -0400

    crypto/cipher, crypto/aes: add s390x implementation of AES-CTR
    
    This commit adds the new 'ctrAble' interface to the crypto/cipher
    package. The role of ctrAble is the same as gcmAble but for CTR
    instead of GCM. It allows block ciphers to provide optimized CTR
    implementations.
    
    The primary benefit of adding CTR support to the s390x AES
    implementation is that it allows us to encrypt the counter values
    in bulk, giving the cipher message instruction a larger chunk of
    data to work on per invocation.
    
    The xorBytes assembly is necessary because xorBytes becomes a
    bottleneck when CTR is done in this way. Hopefully it will be
    possible to remove this once s390x has migrated to the ssa
    backend.
    
    name      old speed     new speed     delta
    AESCTR1K  160MB/s ± 6%  867MB/s ± 0%  +442.42%  (p=0.000 n=9+10)
    
    Change-Id: I1ae16b0ce0e2641d2bdc7d7eabc94dd35f6e9318
    Reviewed-on: https://go-review.googlesource.com/22195
    Reviewed-by: Adam Langley <agl@golang.org>

commit 2f8475648a5500830561ea03960a1425e1ff0993
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Apr 25 21:46:02 2016 -0400

    crypto/cipher, crypto/aes: add s390x implementation of AES-CBC
    
    This commit adds the cbcEncAble and cbcDecAble interfaces that
    can be implemented by block ciphers that support an optimized
    implementation of CBC. This is similar to what is done for GCM
    with the gcmAble interface.
    
    The cbcEncAble, cbcDecAble and gcmAble interfaces all now have
    tests to ensure they are detected correctly in the cipher
    package.
    
    name             old speed     new speed      delta
    AESCBCEncrypt1K  152MB/s ± 1%  1362MB/s ± 0%  +795.59%   (p=0.000 n=10+9)
    AESCBCDecrypt1K  143MB/s ± 1%  1362MB/s ± 0%  +853.00%   (p=0.000 n=10+9)
    
    Change-Id: I715f686ab3686b189a3dac02f86001178fa60580
    Reviewed-on: https://go-review.googlesource.com/22523
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>

commit cd956576ae618a1de829e42f9ec557e6cee338d1
Author: Keith Randall <khr@golang.org>
Date:   Fri Apr 29 09:02:27 2016 -0700

    cmd/compile: make vet happy with ssa code
    
    Fixes #15488
    
    Change-Id: I054eb1e1c859de315e3cdbdef5428682bce693fd
    Reviewed-on: https://go-review.googlesource.com/22609
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 56b54912628934707977a2a0a3824288c0286830
Merge: d8d3351 e9eaa18
Author: Rick Hudson <rlh@golang.org>
Date:   Fri Apr 29 13:49:18 2016 -0400

    Merge remote-tracking branch 'origin/dev.garbage'
    
    This commit moves the GC from free list allocation to
    bit mark allocation. Instead of using the bitmaps
    generated during the mark phases to generate free
    list and then using the free lists for allocation we
    allocate directly from the bitmaps.
    
    The change in the garbage benchmark
    
    name              old time/op  new time/op  delta
    XBenchGarbage-12  2.22ms ± 1%  2.13ms ± 1%  -3.90%  (p=0.000 n=18+18)
    
    Change-Id: I17f57233336f0ca5ef5404c3be4ecb443ab622aa

commit e9eaa181fcadc2162baa62ccd8bfeb610acfdd55
Author: Rick Hudson <rlh@golang.org>
Date:   Fri Apr 29 12:09:36 2016 -0400

    [dev.garbage] runtime: simplify nextFreeFast so it is inlined
    
    nextFreeFast is currently not inlined by the compiler due
    to its size and complexity. This CL simplifies
    nextFreeFast by letting the slow path handle (nextFree)
    handle a corner cases.
    
    Change-Id: Ia9c5d1a7912bcb4bec072f5fd240f0e0bafb20e4
    Reviewed-on: https://go-review.googlesource.com/22598
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Austin Clements <austin@google.com>

commit d8d33514f9e8c80d504ab4a61ef96621afc3647d
Author: David Chase <drchase@google.com>
Date:   Fri Apr 29 11:15:16 2016 -0400

    cmd/compile: Move divconst_test out of test/bench/go1
    
    This is necessary to avoid disrupting the go1 suite and gives
    us a place to put other tests of basic compiler function and
    correctness.
    
    Change-Id: I36933819ff2bfe6a2121fff2be9a98efd2123d9a
    Reviewed-on: https://go-review.googlesource.com/22597
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit fa9435cdff443d12c526b0436435925dd52e8503
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 26 12:08:31 2016 -0700

    cmd/compile: clean up rewrite rules
    
    Break really long lines.
    Add spacing to line up columns.
    
    In AMD64, put all the optimization rules after all the
    lowering rules.
    
    Change-Id: I45cc7368bf278416e67f89e74358db1bd4326a93
    Reviewed-on: https://go-review.googlesource.com/22470
    Reviewed-by: David Chase <drchase@google.com>

commit b3579c095e00f89d8c92c2aa4fb4af222a96f429
Author: Austin Clements <austin@google.com>
Date:   Fri Apr 29 10:57:06 2016 -0400

    [dev.garbage] runtime: revive sweep fast path
    
    sweep used to skip mcental.freeSpan (and its locking) if it didn't
    find any new free objects. We lost that optimization when the
    freed-object counting changed in dad83f7 to count total free objects
    instead of newly freed objects.
    
    The previous commit brings back counting of newly freed objects, so we
    can easily revive this optimization by checking that count (like we
    used to) instead of the total free objects count.
    
    Change-Id: I43658707a1c61674d0366124d5976b00d98741a9
    Reviewed-on: https://go-review.googlesource.com/22596
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit d97625ae9e7195a68d1c9f2b2ff54eb85545982e
Author: Austin Clements <austin@google.com>
Date:   Fri Apr 29 09:44:53 2016 -0400

    [dev.garbage] runtime: fix nfree accounting
    
    Commit 8dda1c4 changed the meaning of "nfree" in sweep from the number
    of newly freed objects to the total number of free objects in the
    span, but didn't update where sweep added nfree to c.local_nsmallfree.
    Hence, we're over-accounting the number of frees. This is causing
    TestArrayHash to fail with "too many allocs NNN - hash not balanced".
    
    Fix this by computing the number of newly freed objects and adding
    that to c.local_nsmallfree, so it behaves like it used to. Computing
    this requires a small tweak to mallocgc: apparently we've never set
    s.allocCount when allocating a large object; fix this by setting it to
    1 so sweep doesn't get confused.
    
    Change-Id: I31902ffd310110da4ffd807c5c06f1117b872dc8
    Reviewed-on: https://go-review.googlesource.com/22595
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>

commit 6d11490539e3aa459066b94c6587f5429dfe7a31
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 28 15:49:39 2016 -0400

    [dev.garbage] runtime: fix allocfreetrace
    
    We broke tracing of freed objects in GODEBUG=allocfreetrace=1 mode
    when we removed the sweep over the mark bitmap. Fix it by
    re-introducing the sweep over the bitmap specifically if we're in
    allocfreetrace mode. This doesn't have to be even remotely efficient,
    since the overhead of allocfreetrace is huge anyway, so we can keep
    the code for this down to just a few lines.
    
    Change-Id: I9e176b3b04c73608a0ea3068d5d0cd30760ebd40
    Reviewed-on: https://go-review.googlesource.com/22592
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 38f674687a5dbce63af60a0a52892f666d7c626c
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 28 15:32:01 2016 -0400

    [dev.garbage] runtime: reintroduce no-zeroing optimization
    
    Currently we always zero objects when we allocate them. We used to
    have an optimization that would not zero objects that had not been
    allocated since the whole span was last zeroed (either by getting it
    from the system or by getting it from the heap, which does a bulk
    zero), but this depended on the sweeper clobbering the first two words
    of each object. Hence, we lost this optimization when the bitmap
    sweeper went away.
    
    Re-introduce this optimization using a different mechanism. Each span
    already keeps a flag indicating that it just came from the OS or was
    just bulk zeroed by the mheap. We can simply use this flag to know
    when we don't need to zero an object. This is slightly less efficient
    than the old optimization: if a span gets allocated and partially
    used, then GC happens and the span gets returned to the mcentral, then
    the span gets re-acquired, the old optimization knew that it only had
    to re-zero the objects that had been reclaimed, whereas this
    optimization will re-zero everything. However, in this case, you're
    already paying for the garbage collection, and you've only wasted one
    zeroing of the span, so in practice there seems to be little
    difference. (If we did want to revive the full optimization, each span
    could keep track of a frontier beyond which all free slots are zeroed.
    I prototyped this and it didn't obvious do any better than the much
    simpler approach in this commit.)
    
    This significantly improves BinaryTree17, which is allocation-heavy
    (and runs first, so most pages are already zeroed), and slightly
    improves everything else.
    
    name              old time/op  new time/op  delta
    XBenchGarbage-12  2.15ms ± 1%  2.14ms ± 1%  -0.80%  (p=0.000 n=17+17)
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.71s ± 1%     2.56s ± 1%  -5.73%        (p=0.000 n=18+19)
    DivconstI64-12              1.70ns ± 1%    1.70ns ± 1%    ~           (p=0.562 n=18+18)
    DivconstU64-12              1.74ns ± 2%    1.74ns ± 1%    ~           (p=0.394 n=20+20)
    DivconstI32-12              1.74ns ± 0%    1.74ns ± 0%    ~     (all samples are equal)
    DivconstU32-12              1.66ns ± 1%    1.66ns ± 0%    ~           (p=0.516 n=15+16)
    DivconstI16-12              1.84ns ± 0%    1.84ns ± 0%    ~     (all samples are equal)
    DivconstU16-12              1.82ns ± 0%    1.82ns ± 0%    ~     (all samples are equal)
    DivconstI8-12               1.79ns ± 0%    1.79ns ± 0%    ~     (all samples are equal)
    DivconstU8-12               1.60ns ± 0%    1.60ns ± 1%    ~           (p=0.603 n=17+19)
    Fannkuch11-12                2.11s ± 1%     2.11s ± 0%    ~           (p=0.333 n=16+19)
    FmtFprintfEmpty-12          45.1ns ± 4%    45.4ns ± 5%    ~           (p=0.111 n=20+20)
    FmtFprintfString-12          134ns ± 0%     129ns ± 0%  -3.45%        (p=0.000 n=18+16)
    FmtFprintfInt-12             131ns ± 1%     129ns ± 1%  -1.54%        (p=0.000 n=16+18)
    FmtFprintfIntInt-12          205ns ± 2%     203ns ± 0%  -0.56%        (p=0.014 n=20+18)
    FmtFprintfPrefixedInt-12     200ns ± 2%     197ns ± 1%  -1.48%        (p=0.000 n=20+18)
    FmtFprintfFloat-12           256ns ± 1%     256ns ± 0%  -0.21%        (p=0.008 n=18+20)
    FmtManyArgs-12               805ns ± 0%     804ns ± 0%  -0.19%        (p=0.001 n=18+18)
    GobDecode-12                7.21ms ± 1%    7.14ms ± 1%  -0.92%        (p=0.000 n=19+20)
    GobEncode-12                5.88ms ± 1%    5.88ms ± 1%    ~           (p=0.641 n=18+19)
    Gzip-12                      218ms ± 1%     218ms ± 1%    ~           (p=0.271 n=19+18)
    Gunzip-12                   37.1ms ± 0%    36.9ms ± 0%  -0.29%        (p=0.000 n=18+17)
    HTTPClientServer-12         78.1µs ± 2%    77.4µs ± 2%    ~           (p=0.070 n=19+19)
    JSONEncode-12               15.5ms ± 1%    15.5ms ± 0%    ~           (p=0.063 n=20+18)
    JSONDecode-12               56.1ms ± 0%    55.4ms ± 1%  -1.18%        (p=0.000 n=19+18)
    Mandelbrot200-12            4.05ms ± 0%    4.06ms ± 0%  +0.29%        (p=0.001 n=18+18)
    GoParse-12                  3.28ms ± 1%    3.21ms ± 1%  -2.30%        (p=0.000 n=20+20)
    RegexpMatchEasy0_32-12      69.4ns ± 2%    69.3ns ± 1%    ~           (p=0.205 n=18+16)
    RegexpMatchEasy0_1K-12       239ns ± 0%     239ns ± 0%    ~     (all samples are equal)
    RegexpMatchEasy1_32-12      69.4ns ± 1%    69.4ns ± 1%    ~           (p=0.620 n=15+18)
    RegexpMatchEasy1_1K-12       370ns ± 1%     369ns ± 2%    ~           (p=0.088 n=20+20)
    RegexpMatchMedium_32-12      108ns ± 0%     108ns ± 0%    ~     (all samples are equal)
    RegexpMatchMedium_1K-12     33.6µs ± 3%    33.5µs ± 3%    ~           (p=0.718 n=20+20)
    RegexpMatchHard_32-12       1.68µs ± 1%    1.67µs ± 2%    ~           (p=0.316 n=20+20)
    RegexpMatchHard_1K-12       50.5µs ± 3%    50.4µs ± 3%    ~           (p=0.659 n=20+20)
    Revcomp-12                   381ms ± 1%     381ms ± 1%    ~           (p=0.916 n=19+18)
    Template-12                 66.5ms ± 1%    65.8ms ± 2%  -1.08%        (p=0.000 n=20+20)
    TimeParse-12                 317ns ± 0%     319ns ± 0%  +0.48%        (p=0.000 n=19+12)
    TimeFormat-12                338ns ± 0%     338ns ± 0%    ~           (p=0.124 n=19+18)
    [Geo mean]                  5.99µs         5.96µs       -0.54%
    
    Change-Id: I638ffd9d9f178835bbfa499bac20bd7224f1a907
    Reviewed-on: https://go-review.googlesource.com/22591
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 1fb4e4de26034cb2822bd8a9eadeb8e2b215d796
Author: Nigel Tao <nigeltao@golang.org>
Date:   Fri Apr 29 17:17:44 2016 +1000

    compress/flate: use a constant hash table size for Best Speed.
    
    This makes compress/flate's version of Snappy diverge from the upstream
    golang/snappy version, but the latter has a goal of matching C++ snappy
    output byte-for-byte. Both C++ and the asm version of golang/snappy can
    use a smaller N for the O(N) zero-initialization of the hash table when
    the input is small, even if the pure Go golang/snappy algorithm cannot:
    "var table [tableSize]uint16" zeroes all tableSize elements.
    
    For this package, we don't have the match-C++-snappy goal, so we can use
    a different (constant) hash table size.
    
    This is a small win, in terms of throughput and output size, but it also
    enables us to re-use the (constant size) hash table between
    encodeBestSpeed calls, avoiding the cost of zero-initializing the hash
    table altogether. This will be implemented in follow-up commits.
    
    This package's benchmarks:
    name                    old speed      new speed      delta
    EncodeDigitsSpeed1e4-8  72.8MB/s ± 1%  73.5MB/s ± 1%  +0.86%  (p=0.000 n=10+10)
    EncodeDigitsSpeed1e5-8  77.5MB/s ± 1%  78.0MB/s ± 0%  +0.69%  (p=0.000 n=10+10)
    EncodeDigitsSpeed1e6-8  82.0MB/s ± 1%  82.7MB/s ± 1%  +0.85%   (p=0.000 n=10+9)
    EncodeTwainSpeed1e4-8   65.1MB/s ± 1%  65.6MB/s ± 0%  +0.78%   (p=0.000 n=10+9)
    EncodeTwainSpeed1e5-8   80.0MB/s ± 0%  80.6MB/s ± 1%  +0.66%   (p=0.000 n=9+10)
    EncodeTwainSpeed1e6-8   81.6MB/s ± 1%  82.1MB/s ± 1%  +0.55%  (p=0.017 n=10+10)
    
    Input size in bytes, output size (and time taken) before and after on
    some larger files:
    1073741824   57269781 (  3183ms)   57269781 (  3177ms) adresser.001
    1000000000  391052000 ( 11071ms)  391051996 ( 11067ms) enwik9
    1911399616  378679516 ( 13450ms)  378679514 ( 13079ms) gob-stream
    8558382592 3972329193 ( 99962ms) 3972329193 ( 91290ms) rawstudio-mint14.tar
     200000000  200015265 (   776ms)  200015265 (   774ms) sharnd.out
    
    Thanks to Klaus Post for the original suggestion on cl/21021.
    
    Change-Id: Ia4c63a8d1b92c67e1765ec5c3c8c69d289d9a6ce
    Reviewed-on: https://go-review.googlesource.com/22604
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 5edcff01343f36618dd6330438cf8b456bd914ef
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Apr 29 14:17:04 2016 +1000

    cmd/compile/internal/gc: bv.go cleanup
    
    Drive by gardening of bv.go.
    
    - Unexport the Bvec type, it is not used outside internal/gc.
      (machine translated with gofmt -r)
    - Removed unused constants and functions.
      (driven by cmd/unused)
    
    Change-Id: I3433758ad4e62439f802f4b0ed306e67336d9aba
    Reviewed-on: https://go-review.googlesource.com/22602
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 94e523cb522959f10b345bf27a32bf087c094108
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Apr 27 18:03:49 2016 -0400

    misc/cgo/testcarchive: fix C include path for darwin/arm
    
    After CL 22461, c-archive build on darwin/arm is by default compiled
    with -shared and installed in pkg/darwin_arm_shared.
    
    Fix build (2nd time...)
    
    Change-Id: Ia2bb09bb6e1ebc9bc74f7570dd80c81d05eaf744
    Reviewed-on: https://go-review.googlesource.com/22534
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d8b7bd6a1f89df1fbcf43fcaee72a94e291dcdb1
Author: Nigel Tao <nigeltao@golang.org>
Date:   Tue Apr 26 19:16:30 2016 +1000

    compress/flate: replace "Best Speed" with specialized version
    
    This encoding algorithm, which prioritizes speed over output size, is
    based on Snappy's LZ77-style encoder: github.com/golang/snappy
    
    This commit keeps the diff between this package's encodeBestSpeed
    function and and Snappy's encodeBlock function as small as possible (see
    the diff below). Follow-up commits will improve this package's
    performance and output size.
    
    This package's speed benchmarks:
    
    name                    old speed      new speed      delta
    EncodeDigitsSpeed1e4-8  40.7MB/s ± 0%  73.0MB/s ± 0%   +79.18%  (p=0.008 n=5+5)
    EncodeDigitsSpeed1e5-8  33.0MB/s ± 0%  77.3MB/s ± 1%  +134.04%  (p=0.008 n=5+5)
    EncodeDigitsSpeed1e6-8  32.1MB/s ± 0%  82.1MB/s ± 0%  +156.18%  (p=0.008 n=5+5)
    EncodeTwainSpeed1e4-8   42.1MB/s ± 0%  65.0MB/s ± 0%   +54.61%  (p=0.008 n=5+5)
    EncodeTwainSpeed1e5-8   46.3MB/s ± 0%  80.0MB/s ± 0%   +72.81%  (p=0.008 n=5+5)
    EncodeTwainSpeed1e6-8   47.3MB/s ± 0%  81.7MB/s ± 0%   +72.86%  (p=0.008 n=5+5)
    
    Here's the milliseconds taken, before and after this commit, to compress
    a number of test files:
    
    Go's src/compress/testdata files:
    
         4          1 e.txt
         8          4 Mark.Twain-Tom.Sawyer.txt
    
    github.com/golang/snappy's benchmark files:
    
         3          1 alice29.txt
        12          3 asyoulik.txt
         6          1 fireworks.jpeg
         1          1 geo.protodata
         1          0 html
         2          2 html_x_4
         6          3 kppkn.gtb
        11          4 lcet10.txt
         5          1 paper-100k.pdf
        14          6 plrabn12.txt
        17          6 urls.10K
    
    Larger files linked to from
    https://docs.google.com/spreadsheets/d/1VLxi-ac0BAtf735HyH3c1xRulbkYYUkFecKdLPH7NIQ/edit#gid=166102500
    
      2409       3182 adresser.001
     16757      11027 enwik9
     13764      12946 gob-stream
    153978      74317 rawstudio-mint14.tar
      4371        770 sharnd.out
    
    Output size is larger. In the table below, the first column is the input
    size, the second column is the output size prior to this commit, the
    third column is the output size after this commit.
    
        100003      47707      50006 e.txt
        387851     172707     182930 Mark.Twain-Tom.Sawyer.txt
        152089      62457      66705 alice29.txt
        125179      54503      57274 asyoulik.txt
        123093     122827     123108 fireworks.jpeg
        118588      18574      20558 geo.protodata
        102400      16601      17305 html
        409600      65506      70313 html_x_4
        184320      49007      50944 kppkn.gtb
        426754     166957     179355 lcet10.txt
        102400      82126      84937 paper-100k.pdf
        481861     218617     231988 plrabn12.txt
        702087     241774     258020 urls.10K
    1073741824   43074110   57269781 adresser.001
    1000000000  365772256  391052000 enwik9
    1911399616  340364558  378679516 gob-stream
    8558382592 3807229562 3972329193 rawstudio-mint14.tar
     200000000  200061040  200015265 sharnd.out
    
    The diff between github.com/golang/snappy's encodeBlock function and
    this commit's encodeBestSpeed function:
    
    1c1,7
    < func encodeBlock(dst, src []byte) (d int) {
    ---
    > func encodeBestSpeed(dst []token, src []byte) []token {
    >       // This check isn't in the Snappy implementation, but there, the caller
    >       // instead of the callee handles this case.
    >       if len(src) < minNonLiteralBlockSize {
    >               return emitLiteral(dst, src)
    >       }
    >
    4c10
    <       // and len(src) <= maxBlockSize and maxBlockSize == 65536.
    ---
    >       // and len(src) <= maxStoreBlockSize and maxStoreBlockSize == 65535.
    65c71
    <                       if load32(src, s) == load32(src, candidate) {
    ---
    >                       if s-candidate < maxOffset && load32(src, s) == load32(src, candidate) {
    73c79
    <               d += emitLiteral(dst[d:], src[nextEmit:s])
    ---
    >               dst = emitLiteral(dst, src[nextEmit:s])
    90c96
    <                       // This is an inlined version of:
    ---
    >                       // This is an inlined version of Snappy's:
    93c99,103
    <                       for i := candidate + 4; s < len(src) && src[i] == src[s]; i, s = i+1, s+1 {
    ---
    >                       s1 := base + maxMatchLength
    >                       if s1 > len(src) {
    >                               s1 = len(src)
    >                       }
    >                       for i := candidate + 4; s < s1 && src[i] == src[s]; i, s = i+1, s+1 {
    96c106,107
    <                       d += emitCopy(dst[d:], base-candidate, s-base)
    ---
    >                       // matchToken is flate's equivalent of Snappy's emitCopy.
    >                       dst = append(dst, matchToken(uint32(s-base-3), uint32(base-candidate-minOffsetSize)))
    114c125
    <                       if uint32(x>>8) != load32(src, candidate) {
    ---
    >                       if s-candidate >= maxOffset || uint32(x>>8) != load32(src, candidate) {
    124c135
    <               d += emitLiteral(dst[d:], src[nextEmit:])
    ---
    >               dst = emitLiteral(dst, src[nextEmit:])
    126c137
    <       return d
    ---
    >       return dst
    
    This change is based on https://go-review.googlesource.com/#/c/21021/ by
    Klaus Post, but it is a separate changelist as cl/21021 seems to have
    stalled in code review, and the Go 1.7 feature freeze approaches.
    
    Golang-dev discussion:
    https://groups.google.com/d/topic/golang-dev/XYgHX9p8IOk/discussion and
    of course cl/21021.
    
    Change-Id: Ib662439417b3bd0b61c2977c12c658db3e44d164
    Reviewed-on: https://go-review.googlesource.com/22370
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 3e2462387f39db99a9a2b551c444c22fae460949
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 28 11:21:01 2016 -0400

    [dev.garbage] runtime: eliminate mspan.start
    
    This converts all remaining uses of mspan.start to instead use
    mspan.base(). In many cases, this actually reduces the complexity of
    the code.
    
    Change-Id: If113840e00d3345a6cf979637f6a152e6344aee7
    Reviewed-on: https://go-review.googlesource.com/22590
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>

commit b7adc41fbacac446c1daf0cb282cb2a921d4a15b
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 28 10:59:00 2016 -0400

    [dev.garbage] runtime: use s.base() everywhere it makes sense
    
    Currently we have lots of (s.start << _PageShift) and variants. We now
    have an s.base() function that returns this. It's faster and more
    readable, so use it.
    
    Change-Id: I888060a9dae15ea75ca8cc1c2b31c905e71b452b
    Reviewed-on: https://go-review.googlesource.com/22559
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>

commit 2e8b74b69574e969b5565e69cb54d39064b2dba1
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 28 11:19:53 2016 -0400

    [dev.garbage] runtime: document sysAlloc
    
    In particular, it always returns an aligned pointer.
    
    Change-Id: I763789a539a4bfd8b0efb36a39a80be1a479d3e2
    Reviewed-on: https://go-review.googlesource.com/22558
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 15744c92de5e6a2295bfbae2126b19c124bbb46a
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 28 10:53:25 2016 -0400

    [dev.garbage] runtime: remove unused head/end arguments from freeSpan
    
    These used to be used for the list of newly freed objects, but that's
    no longer a thing.
    
    Change-Id: I5a4503137b74ec0eae5372ca271b1aa0b32df074
    Reviewed-on: https://go-review.googlesource.com/22557
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c884f6594a594d2d18c4d21106592bd3cdfcbe9b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Apr 28 22:04:30 2016 -0500

    context: produce a nicer panic message for a nil WithValue key
    
    Change-Id: I2e8ae403622ba7131cadaba506100d79613183f1
    Reviewed-on: https://go-review.googlesource.com/22601
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 694846a548f23cebb9b913999fa4fa6756e2c545
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu Apr 28 15:19:11 2016 +1000

    debug/pe: .bss section must contain only zeros
    
    .bss section has no data stored in PE file. But when .bss section data
    is used by the linker it is assumed that its every byte is set to zero.
    (*Section).Data returns garbage at this moment. Change (*Section).Data
    so it returns slice filled with 0s.
    
    Updates #15345
    
    Change-Id: I1fa5138244a9447e1d59dec24178b1dd0fd4c5d7
    Reviewed-on: https://go-review.googlesource.com/22544
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d954f9c4d19bbe459ad4a6de95af47349da1d40b
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Apr 28 14:24:19 2016 -0700

    test: added test case for (fixed) issue 15470
    
    Follow-up to https://golang.org/cl/22543.
    
    Change-Id: I873b4fa6616ac2aea8faada2fccd126233bbc07f
    Reviewed-on: https://go-review.googlesource.com/22583
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit af6aa0fd745d48c2db70712ebfe6833d30a9a85d
Author: Russ Cox <rsc@golang.org>
Date:   Mon Apr 25 11:54:24 2016 -0400

    cmd/go, go/build: add support for binary-only packages
    
    See https://golang.org/design/2775-binary-only-packages for design.
    
    Fixes #2775.
    
    Change-Id: I33e74eebffadc14d3340bba96083af0dec5172d5
    Reviewed-on: https://go-review.googlesource.com/22433
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4618dd8704b868a095a98ee8beaf465578aaec30
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu Apr 28 17:19:31 2016 +1000

    image/gif: accept an out-of-bounds transparent color index.
    
    This is an error according to the spec, but Firefox and Google Chrome
    seem OK with this.
    
    Fixes #15059.
    
    Change-Id: I841cf44e96655e91a2481555f38fbd7055a32202
    Reviewed-on: https://go-review.googlesource.com/22546
    Reviewed-by: Rob Pike <r@golang.org>

commit 2fb75ea6c65d03c3fda89c8e954712a2fa97b052
Author: Rick Hudson <rlh@golang.org>
Date:   Thu Mar 31 10:45:36 2016 -0400

    [dev.garbage] runtime: use sys.Ctz64 intrinsic
    
    Our compilers now provides instrinsics including
    sys.Ctz64 that support CTZ (count trailing zero)
    instructions. This CL replaces the Go versions
    of CTZ with the compiler intrinsic.
    
    Count trailing zeros CTZ finds the least
    significant 1 in a word and returns the number
    of less significant 0s in the word.
    
    Allocation uses the bitmap created by the garbage
    collector to locate an unmarked object. The logic
    takes a word of the bitmap, complements, and then
    caches it. It then uses CTZ to locate an available
    unmarked object. It then shifts marked bits out of
    the bitmap word preparing it for the next search.
    Once all the unmarked objects are used in the
    cached work the bitmap gets another word and
    repeats the process.
    
    Change-Id: Id2fc42d1d4b9893efaa2e1bd01896985b7e42f82
    Reviewed-on: https://go-review.googlesource.com/21366
    Reviewed-by: Austin Clements <austin@google.com>

commit 2063d5d903718962de58a86a692626fe89919a4d
Author: Rick Hudson <rlh@golang.org>
Date:   Mon Mar 14 12:17:48 2016 -0400

    [dev.garbage] runtime: restructure alloc and mark bits
    
    Two changes are included here that are dependent on the other.
    The first is that allocBits and gcamrkBits are changed to
    a *uint8 which points to the first byte of that span's
    mark and alloc bits. Several places were altered to
    perform pointer arithmetic to locate the byte corresponding
    to an object in the span. The actual bit corresponding
    to an object is indexed in the byte by using the lower three
    bits of the objects index.
    
    The second change avoids the redundant calculation of an
    object's index. The index is returned from heapBitsForObject
    and then used by the functions indexing allocBits
    and gcmarkBits.
    
    Finally we no longer allocate the gc bits in the span
    structures. Instead we use an arena based allocation scheme
    that allows for a more compact bit map as well as recycling
    and bulk clearing of the mark bits.
    
    Change-Id: If4d04b2021c092ec39a4caef5937a8182c64dfef
    Reviewed-on: https://go-review.googlesource.com/20705
    Reviewed-by: Austin Clements <austin@google.com>

commit ac0ee77d630c4a692b02cad630a61e974b0c52ce
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu Apr 28 19:01:48 2016 +1000

    image/gif: be stricter on parsing graphic control extensions.
    
    See Section 23. Graphic Control Extension of the spec:
    https://www.w3.org/Graphics/GIF/spec-gif89a.txt
    
    Change-Id: Ie78b4ff4aa97e1b332ade67ae4fa25f7c0770610
    Reviewed-on: https://go-review.googlesource.com/22547
    Reviewed-by: Rob Pike <r@golang.org>

commit cb97fd7741fc8bfa257bb020dab756a14c420daf
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Apr 29 10:37:37 2016 +1200

    cmd/link: fix -no-pie / -race check
    
    golang.org/cl/22453 was supposed to pass -no-pie to the linker when linking a
    race-enabled binary if the host toolchain supports it. But I bungled the
    supported check as I forgot to pass -c to the host compiler so it tried to
    compile a 0 byte .c file into an executable, which will never work. Fix it to
    pass -c as it should have all along.
    
    Change-Id: I4801345c7a29cb18d5f22cec5337ce535f92135d
    Reviewed-on: https://go-review.googlesource.com/22587
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 6ed79fbd1abf018b018088c6a1699cd34ee6d56c
Author: Keith Randall <khr@golang.org>
Date:   Thu Apr 28 15:04:10 2016 -0700

    cmd/compile: remove BlockDead state
    
    It is unused, remove the clutter.
    
    Change-Id: I51a44326b125ef79241459c463441f76a289cc08
    Reviewed-on: https://go-review.googlesource.com/22586
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3cb090f93c4b0d9ebdf111efb0c5383d8ca97bd2
Author: David Symonds <dsymonds@golang.org>
Date:   Fri Apr 29 08:43:53 2016 +1000

    lib/time: update to IANA release 2016d (Apr 2016).
    
    Change-Id: I46d9ea31cf5836d054a9ce22af4dd1742a418a07
    Reviewed-on: https://go-review.googlesource.com/22588
    Run-TryBot: David Symonds <dsymonds@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit be730b49ca41e8a7e98a21cf61bb6c9c7fc7857e
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Apr 28 09:35:19 2016 +0900

    runtime: drop _SigUnblock for SIGSYS on Linux
    
    The _SigUnblock flag was appended to SIGSYS slot of runtime signal table
    for Linux in https://go-review.googlesource.com/22202, but there is
    still no concrete opinion on whether SIGSYS must be an unblocked signal
    for runtime.
    
    This change removes _SigUnblock flag from SIGSYS on Linux for
    consistency in runtime signal handling and adds a reference to #15204 to
    runtime signal table for FreeBSD.
    
    Updates #15204.
    
    Change-Id: I42992b1d852c2ab5dd37d6dbb481dba46929f665
    Reviewed-on: https://go-review.googlesource.com/22537
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit bec0863b53777f313396a10f0bc1349139d1009e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 28 13:44:15 2016 -0700

    net: remove unneeded tags from dnsRR structs
    
    DNS packing and unpacking uses hand-coded struct walking functions
    rather than reflection, so these tags are unneeded and just contribute
    to their runtime reflect metadata size.
    
    Change-Id: I2db09d5159912bcbc3b482cbf23a50fa8fa807fa
    Reviewed-on: https://go-review.googlesource.com/22594
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c231dd21e1fe992e196d4a36f9e990523b9cc45a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 28 13:26:14 2016 -0700

    net: remove internal support for obsolete DNS record types
    
    There are no real world use cases for HINFO, MINFO, MB, MG, or MR
    records, and package net's exposed APIs don't provide any way to
    access them even if there were. If a use ever does show up, we can
    revive them. In the mean time, this is just effectively-dead code that
    sticks around because of rr_mk.
    
    Change-Id: I6c188b5ee32f3b3a04588b79a0ee9c2e3e725ccc
    Reviewed-on: https://go-review.googlesource.com/22593
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1518d431321100cd9f0e18d740da7c835ba438dd
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 16 11:57:06 2016 -0700

    net/http, net/http/httptrace: new package for tracing HTTP client requests
    
    Updates #12580
    
    Change-Id: I9f9578148ef2b48dffede1007317032d39f6af55
    Reviewed-on: https://go-review.googlesource.com/22191
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Tom Bergan <tombergan@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1b591dfb1f071d978448966e979e40b1f265c1a5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Apr 28 15:16:46 2016 -0500

    os/exec: fix variable shadow, don't leak goroutine
    
    Goroutine leak checking is still too tedious, so untested.
    
    See #6705 which is my fault for forgetting to mail out.
    
    Change-Id: I899fb311c9d4229ff1dbd3f54fe307805e17efee
    Reviewed-on: https://go-review.googlesource.com/22581
    Reviewed-by: Ahmed W. <oneofone@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6c11e2710e96171e7c202940bf2b14aa859f5ca2
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Apr 28 12:43:12 2016 -0700

    cmd/compile: use delta encoding for filenames in export data position info
    
    This reduces the export data size significantly (15%-25%) for some packages,
    especially where the paths are very long or if there are many files involved.
    Slight (2%) reduction on average, with virtually no increases in export data
    size.
    
    Selected export data sizes for packages with |delta %| > 3%:
    
                         package   before    after   delta     %
    
            cmd/asm/internal/arch   11647    11088    -559   -4%
       cmd/compile/internal/amd64     838      600    -238  -27%
         cmd/compile/internal/arm    7323     6793    -530   -6%
       cmd/compile/internal/arm64   19948    18971    -977   -4%
         cmd/compile/internal/big    9043     8548    -495   -4%
      cmd/compile/internal/mips64     645      482    -163  -24%
       cmd/compile/internal/ppc64     695      497    -198  -27%
       cmd/compile/internal/s390x     553      433    -120  -21%
         cmd/compile/internal/x86     744      555    -189  -24%
                         cmd/dist     145      121     -24  -16%
             cmd/internal/objfile   17359    16474    -885   -4%
       cmd/internal/pprof/symbolz    8346     7941    -405   -4%
          cmd/link/internal/amd64   11178    10604    -574   -4%
            cmd/link/internal/arm     204      171     -33  -15%
          cmd/link/internal/arm64     210      175     -35  -16%
         cmd/link/internal/mips64     213      177     -36  -16%
          cmd/link/internal/ppc64     211      176     -35  -16%
          cmd/link/internal/s390x     210      175     -35  -16%
            cmd/link/internal/x86     203      170     -33  -15%
                        cmd/trace     782      744     -38   -4%
                     compress/lzw     402      383     -19   -4%
                       crypto/aes     311      262     -49  -15%
                    crypto/cipher    1138      959    -179  -15%
                       crypto/des     315      288     -27   -8%
                  crypto/elliptic    6063     5746    -317   -4%
                       crypto/rc4     317      295     -22   -6%
                    crypto/sha256     348      312     -36   -9%
                    crypto/sha512     487      451     -36   -6%
                           go/doc    3871     3649    -222   -5%
        go/internal/gccgoimporter    2063     1949    -114   -5%
           go/internal/gcimporter    3253     3096    -157   -4%
                             math    4343     3572    -771  -17%
                       math/cmplx    1580     1274    -306  -18%
                        math/rand     982      926     -56   -5%
            net/internal/socktest    2159     2049    -110   -4%
                          os/exec    7928     7492    -436   -4%
                        os/signal     237      208     -29  -11%
                          os/user     717      682     -35   -4%
          runtime/internal/atomic     728      693     -35   -4%
             runtime/internal/sys    2287     2107    -180   -7%
                             sync    1306     1214     -92   -6%
    
                     all packages 1509255  1465507  -43748   -2%
    
    Change-Id: I98a11521b552166b7f47f2039a29f106748bf5d4
    Reviewed-on: https://go-review.googlesource.com/22580
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit f04eb356732c205f9e8c2f38a4f5fdb9def991b2
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 28 10:58:55 2016 -0700

    cmd/compile: remove unused Bputname function
    
    Change-Id: Icecbf9bae8c39670d1ceef62dd94b36e90b27b04
    Reviewed-on: https://go-review.googlesource.com/22570
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3c8ef0e0c9c26f15926a396688b0fe8acd4e3dcf
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Apr 24 14:37:14 2016 -0400

    cmd/compile: allow 64-bit multiplication with immediates on s390x
    
    MGHI (16-bit signed immediate) is now used where possible for both
    MULLW and MULLD. MGHI is 2-bytes shorter than MSGFI.
    
    Change-Id: I5d0648934f28b3403b1126913fd703d8f62b9e9f
    Reviewed-on: https://go-review.googlesource.com/22398
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5fe1b35ed214a8ece13449f5788dd9f5c927379f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 28 11:31:59 2016 -0700

    net: ensure dnsConfig search list is rooted
    
    Avoids some extra work and string concatenation at query time.
    
    benchmark                                      old allocs     new allocs     delta
    BenchmarkGoLookupIP-32                         154            150            -2.60%
    BenchmarkGoLookupIPNoSuchHost-32               446            442            -0.90%
    BenchmarkGoLookupIPWithBrokenNameServer-32     564            568            +0.71%
    
    benchmark                                      old bytes     new bytes     delta
    BenchmarkGoLookupIP-32                         10824         10704         -1.11%
    BenchmarkGoLookupIPNoSuchHost-32               43140         42992         -0.34%
    BenchmarkGoLookupIPWithBrokenNameServer-32     46616         46680         +0.14%
    
    BenchmarkGoLookupIPWithBrokenNameServer's regression appears to be
    because it's actually only performing 1 LookupIP call, so the extra
    work done parsing the DNS config file doesn't amortize as well as for
    BenchmarkGoLookupIP or BenchmarkGoLOokupIPNoSuchHost, which perform
    2000+ LookupIP calls per run.
    
    Update #15473.
    
    Change-Id: I98c8072f2f39e2f2ccd6c55e9e9bd309f5ad68f8
    Reviewed-on: https://go-review.googlesource.com/22571
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4d9bda51ff91f79944a12106b77315c9414b851a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 28 11:15:44 2016 -0700

    net: append ":53" to DNS servers when reading resolv.conf
    
    Avoids generating some redundant garbage from re-concatenating the
    same string for every DNS query.
    
    benchmark                                      old allocs     new allocs     delta
    BenchmarkGoLookupIP-32                         156            154            -1.28%
    BenchmarkGoLookupIPNoSuchHost-32               456            446            -2.19%
    BenchmarkGoLookupIPWithBrokenNameServer-32     577            564            -2.25%
    
    benchmark                                      old bytes     new bytes     delta
    BenchmarkGoLookupIP-32                         10873         10824         -0.45%
    BenchmarkGoLookupIPNoSuchHost-32               43303         43140         -0.38%
    BenchmarkGoLookupIPWithBrokenNameServer-32     46824         46616         -0.44%
    
    Update #15473.
    
    Change-Id: I3b0173dfedf31bd08eaea1069968b416850864a1
    Reviewed-on: https://go-review.googlesource.com/22556
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2cc27a7de9e7d14cb6702153688d02746c6a49ea
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Apr 28 11:53:58 2016 -0500

    os/exec: add Cmd.RunContext and Cmd.WaitContext
    
    Updates #14660
    
    Change-Id: Ifa5c97ba327ad7ceea0a9a252e3dbd9d079dae54
    Reviewed-on: https://go-review.googlesource.com/22529
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit af125a5193c75dd59307fcf1b26d885010ce8bfd
Author: Adam Langley <agl@golang.org>
Date:   Tue Apr 26 10:45:35 2016 -0700

    crypto/tls: allow renegotiation to be handled by a client.
    
    This change adds Config.Renegotiation which controls whether a TLS
    client will accept renegotiation requests from a server. This is used,
    for example, by some web servers that wish to “add” a client certificate
    to an HTTPS connection.
    
    This is disabled by default because it significantly complicates the
    state machine.
    
    Originally, handshakeMutex was taken before locking either Conn.in or
    Conn.out. However, if renegotiation is permitted then a handshake may
    be triggered during a Read() call. If Conn.in were unlocked before
    taking handshakeMutex then a concurrent Read() call could see an
    intermediate state and trigger an error. Thus handshakeMutex is now
    locked after Conn.in and the handshake functions assume that Conn.in is
    locked for the duration of the handshake.
    
    Additionally, handshakeMutex used to protect Conn.out also. With the
    possibility of renegotiation that's no longer viable and so
    writeRecordLocked has been split off.
    
    Fixes #5742.
    
    Change-Id: I935914db1f185d507ff39bba8274c148d756a1c8
    Reviewed-on: https://go-review.googlesource.com/22475
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d610d304f86021cc5f388b8f02d99bc73fca0d9b
Author: Keith Randall <khr@golang.org>
Date:   Wed Apr 27 16:58:50 2016 -0700

    cmd/compile: reorg copyelim to avoid O(n^2) problem
    
    Make sure we don't do O(n^2) work to eliminate a chain
    of n copies.
    
    benchmark                     old ns/op       new ns/op     delta
    BenchmarkCopyElim1-8          1418            1406          -0.85%
    BenchmarkCopyElim10-8         5289            5162          -2.40%
    BenchmarkCopyElim100-8        52618           41684         -20.78%
    BenchmarkCopyElim1000-8       2473878         424339        -82.85%
    BenchmarkCopyElim10000-8      269373954       6367971       -97.64%
    BenchmarkCopyElim100000-8     31272781165     104357244     -99.67%
    
    Change-Id: I680f906f70f2ee1a8615cb1046bc510c77d59284
    Reviewed-on: https://go-review.googlesource.com/22535
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>

commit 5ec87ba554c2a83cdc188724f815e53fede91b66
Author: David Chase <drchase@google.com>
Date:   Thu Apr 28 10:46:08 2016 -0400

    cmd/compile: fix.gc.Type.cmp for map.notBucket cmp map.Bucket
    
    Comparison of certain map types could fail to be antisymmetric.
    This corrects that.
    
    Change-Id: I88c6256053ce29950ced4ba4d538e241ee8591fe
    Reviewed-on: https://go-review.googlesource.com/22552
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: jcd . <jcd@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9faf5cdf9d1f9050a03ae3d420768c846e54646d
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Thu Apr 28 09:41:32 2016 -0300

    net: change type of dnsConfig.timeout from int to time.Duration
    
    Instead of keeping the desired number of seconds and converting to
    time.Duration for every query, convert to time.Duration when
    building the config.
    
    Updates #15473
    
    Change-Id: Ib24c050b593b3109011e359f4ed837a3fb45dc65
    Reviewed-on: https://go-review.googlesource.com/22548
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 22db3c5a62b01dba6122230aa71d35c48107c70c
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Sat Apr 23 21:00:38 2016 +0300

    cmd/vet: improve checking unkeyed fields in composite literals
    
    - Simplified the code.
    
    - Removed types for slice aliases from composite literals' whitelist, since they
    are properly handled by vet.
    
    Fixes #15408
    Updates #9171
    Updates #11041
    
    Change-Id: Ia1806c9eb3f327c09d2e28da4ffdb233b5a159b0
    Reviewed-on: https://go-review.googlesource.com/22318
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 80e9a7f0797c73b27471eb4b371baa1c7ccb427b
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 27 22:04:49 2016 -0700

    cmd/compile: have all or no parameter named in exported signatures
    
    Binary export format only.
    
    Make sure we don't accidentally export an unnamed parameter
    in signatures which expect all named parameters; otherwise
    we crash during import. Appears to happen for _ (blank)
    parameter names, as observed in method signatures such as
    the one at: x/tools/godoc/analysis/analysis.go:76.
    
    Fixes #15470.
    
    TBR=mdempsky
    
    Change-Id: I1b1184bf08c4c09d8a46946539c4b8c341acdb84
    Reviewed-on: https://go-review.googlesource.com/22543
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit e8d4ffb7661a5e2662d93340d88244f9f833b153
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 27 17:30:20 2016 -0700

    cmd/compile: use correct (field/method) node for position info
    
    Position info for fields and methods was based on the wrong node
    in the new export format, leading to position info for empty
    file names and 0 line numbers. Use correct node now.
    
    Due to compact delta encoding, there is no difference in export
    format size. In fact, because encoding of "no line changed" is
    uncommon and thus a bit more expensive, in many cases the data
    is now slightly shorter.
    
    Stats for export data size (pachage, before, after, delta%):
    
                                             archive/tar     5128     5025  -1%
                                             archive/zip     7672     7515  -1%
                                                   bufio     3486     3377  -2%
                                                   bytes     4879     4821   0%
                                           cmd/addr2line       66       66   0%
                                                 cmd/api    14033    13970   0%
                                                 cmd/asm       60       60   0%
                                   cmd/asm/internal/arch    11659    11647   0%
                                    cmd/asm/internal/asm    13858    13766   0%
                                  cmd/asm/internal/flags      306      300  -1%
                                    cmd/asm/internal/lex    15684    15623   0%
                                                 cmd/cgo    15383    15298   0%
                                             cmd/compile       63       63   0%
                              cmd/compile/internal/amd64      838      838   0%
                                cmd/compile/internal/arm     7333     7323   0%
                              cmd/compile/internal/arm64    19953    19951   0%
                                cmd/compile/internal/big     8943     9043   1%
                                 cmd/compile/internal/gc    57465    56801   0%
                             cmd/compile/internal/mips64      645      645   0%
                              cmd/compile/internal/ppc64      695      695   0%
                              cmd/compile/internal/s390x      553      553   0%
                                cmd/compile/internal/ssa    34883    34559   0%
                                cmd/compile/internal/x86      744      744   0%
                                               cmd/cover     4961     4892   0%
                                                cmd/dist      145      145   0%
                                                 cmd/doc     8891     8853   0%
                                             cmd/expdump       67       67   0%
                                                 cmd/fix      422      406  -3%
                                                  cmd/go     9951     9747  -1%
                                               cmd/gofmt       66       66   0%
                                        cmd/internal/bio     6378     6340   0%
                                     cmd/internal/gcprog      684      644  -5%
                                      cmd/internal/goobj     1276     1193  -6%
                                        cmd/internal/obj    12908    12551  -2%
                                    cmd/internal/obj/arm    10074    10053   0%
                                  cmd/internal/obj/arm64    17723    17699   0%
                                   cmd/internal/obj/mips    12573    12530   0%
                                  cmd/internal/obj/ppc64    15352    15330   0%
                                  cmd/internal/obj/s390x    18785    18769   0%
                                    cmd/internal/obj/x86    23586    23551   0%
                                    cmd/internal/objfile    17148    17359   1%
                             cmd/internal/pprof/commands     1948     1930   0%
                               cmd/internal/pprof/driver    11123    11095   0%
                                cmd/internal/pprof/fetch     8931     8907   0%
                               cmd/internal/pprof/plugin    15335    15221   0%
                              cmd/internal/pprof/profile     8493     8370   0%
                               cmd/internal/pprof/report     9273     9214   0%
                                  cmd/internal/pprof/svg     1589     1589   0%
                           cmd/internal/pprof/symbolizer     8737     8727   0%
                              cmd/internal/pprof/symbolz     8277     8346   1%
                             cmd/internal/pprof/tempfile     4319     4317   0%
                                        cmd/internal/sys      622      603  -2%
      cmd/internal/unvendor/golang.org/x/arch/arm/armasm    79231    79148   0%
      cmd/internal/unvendor/golang.org/x/arch/x86/x86asm    11761    11726   0%
                                                cmd/link       60       60   0%
                                 cmd/link/internal/amd64    11190    11178   0%
                                   cmd/link/internal/arm      204      204   0%
                                 cmd/link/internal/arm64      210      210   0%
                                    cmd/link/internal/ld    60670    59758  -1%
                                cmd/link/internal/mips64      213      213   0%
                                 cmd/link/internal/ppc64      211      211   0%
                                 cmd/link/internal/s390x      210      210   0%
                                   cmd/link/internal/x86      203      203   0%
                                                  cmd/nm       57       57   0%
                                             cmd/objdump       64       64   0%
                                                cmd/pack     4968     4908   0%
                                               cmd/pprof       63       63   0%
                                               cmd/trace      828      782  -5%
                                                 cmd/vet    13485    13503   0%
                              cmd/vet/internal/whitelist      109      109   0%
                                                cmd/yacc     1315     1269  -2%
                                          compress/bzip2     2561     2506  -1%
                                          compress/flate     4906     4748  -2%
                                           compress/gzip     7788     7717   0%
                                            compress/lzw      406      402   0%
                                           compress/zlib     4739     4712   0%
                                          container/heap      265      257  -2%
                                          container/list     1506     1450  -3%
                                          container/ring      556      536  -3%
                                                 context     3552     3527   0%
                                                  crypto      864      834  -2%
                                              crypto/aes      313      311   0%
                                           crypto/cipher     1139     1138   0%
                                              crypto/des      317      315   0%
                                              crypto/dsa     5326     5304   0%
                                            crypto/ecdsa     6383     6364   0%
                                         crypto/elliptic     5983     6063   1%
                                             crypto/hmac      258      256   0%
                                              crypto/md5      722      700  -2%
                                             crypto/rand     4996     4993   0%
                                              crypto/rc4      327      317  -2%
                                              crypto/rsa     6763     6722   0%
                                             crypto/sha1      767      744  -2%
                                           crypto/sha256      348      348   0%
                                           crypto/sha512      487      487   0%
                                           crypto/subtle      620      620   0%
                                              crypto/tls    24344    24083   0%
                                             crypto/x509    17473    17524   0%
                                        crypto/x509/pkix     9682     9596   0%
                                            database/sql     8099     7831  -2%
                                     database/sql/driver     1556     1500  -3%
                                             debug/dwarf     9358     9010  -3%
                                               debug/elf    28226    27882   0%
                                             debug/gosym     2472     2333  -5%
                                             debug/macho     9032     8830  -1%
                                                debug/pe     8561     8328  -2%
                                          debug/plan9obj     1347     1295  -3%
                                                encoding      275      261  -4%
                                        encoding/ascii85      775      738  -4%
                                           encoding/asn1     1280     1246  -2%
                                         encoding/base32     1207     1146  -4%
                                         encoding/base64     1471     1407  -3%
                                         encoding/binary     2430     2386  -1%
                                            encoding/csv     4347     4280  -1%
                                            encoding/gob    13488    13387   0%
                                            encoding/hex      665      646  -2%
                                           encoding/json    11763    11592   0%
                                            encoding/pem      283      273  -3%
                                            encoding/xml    13804    13631   0%
                                                  errors      166      162  -1%
                                                  expvar     1193     1139  -4%
                                                    flag     6896     6964   1%
                                                     fmt     1247     1213  -2%
                                                  go/ast    15797    15473  -1%
                                                go/build     6497     6336  -1%
                                             go/constant     1846     1820   0%
                                                  go/doc     3942     3871  -1%
                                               go/format     1854     1850   0%
                                             go/importer     1702     1695   0%
                               go/internal/gccgoimporter     2084     2063   0%
                                  go/internal/gcimporter     3236     3253   1%
                                               go/parser     7377     7371   0%
                                              go/printer     2480     2469   0%
                                              go/scanner     3806     3733  -1%
                                                go/token     3579     3523  -1%
                                                go/types    26514    26117   0%
                                                    hash      323      295  -8%
                                            hash/adler32      568      554  -1%
                                              hash/crc32      843      825  -1%
                                              hash/crc64      758      739  -2%
                                                hash/fnv     1583     1530  -2%
                                                    html      113      113   0%
                                           html/template    16957    16937   0%
                                                   image    11470    11045  -3%
                                             image/color     2566     2503  -1%
                                     image/color/palette      165      163   0%
                                              image/draw     2543     2522   0%
                                               image/gif     3467     3439   0%
                                image/internal/imageutil     3481     3479   0%
                                              image/jpeg     2725     2717   0%
                                               image/png     2702     2689   0%
                                       index/suffixarray     5802     5777   0%
                                           internal/race      274      274   0%
                                   internal/singleflight      756      718  -4%
                         internal/syscall/windows/sysdll      162      162   0%
                                        internal/testenv     5288     5276   0%
                                          internal/trace     1853     1768  -4%
                                                      io     3425     3349  -1%
                                               io/ioutil     4768     4756   0%
                                                     log     4173     4224   1%
                                              log/syslog     5049     4996   0%
                                                    math     4343     4343   0%
                                                math/big     8779     8817   0%
                                              math/cmplx     1580     1580   0%
                                               math/rand      944      982   4%
                                                    mime     2313     2298   0%
                                          mime/multipart     5021     4922  -1%
                                    mime/quotedprintable     2049     2008  -1%
                                                     net    19332    19090   0%
                                                net/http    50404    49542  -1%
                                            net/http/cgi    22533    22637   0%
                                      net/http/cookiejar     5488     5431   0%
                                           net/http/fcgi    20557    20512   0%
                                       net/http/httptest    30350    30255   0%
                                       net/http/httputil    24045    23964   0%
                                       net/http/internal     2579     2550   0%
                                          net/http/pprof    20307    20258   0%
                                   net/internal/socktest     2227     2159  -2%
                                                net/mail     5086     5054   0%
                                                 net/rpc    28365    28208   0%
                                         net/rpc/jsonrpc    12805    12722   0%
                                                net/smtp    19975    19887   0%
                                           net/textproto     4558     4466  -1%
                                                 net/url     1391     1326  -4%
                                                      os    10372    10195  -1%
                                                 os/exec     7814     7928   1%
                                               os/signal      239      237   0%
                                                 os/user      735      717  -1%
                                                    path      391      391   0%
                                           path/filepath     4136     4136   0%
                                                 reflect     6258     5893  -5%
                                                  regexp     5808     5623  -2%
                                           regexp/syntax     3118     3077   0%
                                                 runtime    11685    10912  -6%
                                             runtime/cgo       18       18   0%
                                           runtime/debug     3320     3304   0%
                                 runtime/internal/atomic      728      728   0%
                                    runtime/internal/sys     2287     2287   0%
                                           runtime/pprof      611      587  -3%
                                            runtime/race       19       19   0%
                                           runtime/trace      145      143   0%
                                                    sort     1229     1206  -1%
                                                 strconv     1752     1744   0%
                                                 strings     3809     3775   0%
                                                    sync     1331     1306  -1%
                                             sync/atomic     1135     1130   0%
                                                 syscall    46280    45722   0%
                                                 testing     7558     7284  -3%
                                          testing/iotest     1122     1071  -4%
                                           testing/quick     5656     5609   0%
                                            text/scanner     3367     3312  -1%
                                          text/tabwriter     2810     2755  -1%
                                           text/template    15613    15595   0%
                                     text/template/parse     9499     9040  -4%
                                                    time     5515     5395  -1%
                                                 unicode     4357     4344   0%
                                           unicode/utf16      583      583   0%
                                            unicode/utf8      970      970   0%
                     vendor/golang.org/x/net/http2/hpack     4105     4012  -1%
                                                 average  1524284  1509610   0%
    
    Change-Id: Ibe1ce098c7c575965389c1cad368c62c2cea256a
    Reviewed-on: https://go-review.googlesource.com/22536
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit c04bc70cd1b290436917301846992e492944805f
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Apr 28 11:50:48 2016 +0900

    net: fix misrecongnization of IPv6 zone on Windows
    
    Fixes #15463.
    
    Change-Id: Ic85886861c650ffcb71240d847941534152b92bc
    Reviewed-on: https://go-review.googlesource.com/22540
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cad04e7e66d51486b9d3b63bf1b9281a0153dd9f
Author: David du Colombier <0intro@gmail.com>
Date:   Thu Apr 28 01:01:15 2016 +0200

    net/http: skip TestTransportRemovesDeadIdleConnections on Plan 9
    
    Updates #15464.
    
    Change-Id: If3221034bb10751c6fcf1fbeba401a879c18079f
    Reviewed-on: https://go-review.googlesource.com/22513
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2da642a917c618c367a2fc01eb5b704769312199
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Apr 27 15:15:47 2016 +1000

    cmd/compile/internal/gc: unexport {J,S,F,H,B,V}conv
    
    Updates #15462
    
    Unexport Jconv, Sconv, Fconv, Hconv, Bconv, and VConv as they are
    not referenced outside internal/gc.
    
    Econv was only called by EType.String, so merge it into that method.
    
    Change-Id: Iad9b06078eb513b85a03a43cd9eb9366477643d1
    Reviewed-on: https://go-review.googlesource.com/22531
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 733f835f307595366a87fd377ba60c5d23841982
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Apr 27 19:34:17 2016 +1000

    cmd/compile/internal/gc: remove all uses of oconv(op, FmtSharp)
    
    Updates #15462
    
    Replace all use of oconv(op, FmtSharp) with fmt.Printf("%#v", op).
    This removes all the callers of oconv.
    
    Change-Id: Ic3bf22495147f8497c8bada01d681428e2405b0e
    Reviewed-on: https://go-review.googlesource.com/22530
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 23aeb34df172b17b7bfaa85fb59ca64bef9073bb
Merge: 1354b32 d3c79d3
Author: Rick Hudson <rlh@golang.org>
Date:   Wed Apr 27 18:19:16 2016 -0400

    [dev.garbage] Merge remote-tracking branch 'origin/master' into HEAD
    
    Change-Id: I282fd9ce9db435dfd35e882a9502ab1abc185297

commit f08f1cd2e97835dbaa7c509b837265774ae39dac
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 27 16:32:37 2016 -0500

    net: clarify DialContext's use of its provided context
    
    Fixes #15325
    
    Change-Id: I60137ecf27e236e97734b1730ce29ab23e9fe07f
    Reviewed-on: https://go-review.googlesource.com/22509
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 06d639e07588ef290ed28ab384d5371e052240b1
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 27 16:56:13 2016 -0500

    runtime: fix SetCgoTraceback doc indentation
    
    It wasn't rendering as HTML nicely.
    
    Change-Id: I5408ec22932a05e85c210c0faa434bd19dce5650
    Reviewed-on: https://go-review.googlesource.com/22532
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 239fb76ea01b88a2b3dff8b4da357e605435b980
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Apr 25 23:31:36 2016 -0400

    crypto/md5: add s390x assembly implementation
    
    Adapted from md5block_amd64.s.
    
    name                 old speed      new speed      delta
    Hash8Bytes           14.0MB/s ± 1%  39.9MB/s ± 0%  +185.52%   (p=0.000 n=9+10)
    Hash1K                176MB/s ± 1%   661MB/s ± 1%  +274.44%  (p=0.000 n=10+10)
    Hash8K                196MB/s ± 0%   742MB/s ± 1%  +278.35%   (p=0.000 n=10+9)
    Hash8BytesUnaligned  14.2MB/s ± 2%  39.8MB/s ± 0%  +180.06%  (p=0.000 n=10+10)
    Hash1KUnaligned       177MB/s ± 1%   651MB/s ± 0%  +267.38%  (p=0.000 n=10+10)
    Hash8KUnaligned       197MB/s ± 1%   731MB/s ± 1%  +271.73%  (p=0.000 n=10+10)
    
    Change-Id: I45ece98ee10f30fcd192b9c3d743ba61c248f36a
    Reviewed-on: https://go-review.googlesource.com/22505
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f4d38a87927f42272c7dfd10283beac8865edeab
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Mar 28 22:27:36 2016 +1300

    cmd/compile: de-dup the gclocals symbols in compiler too
    
    These symbols are de-duplicated in the linker but the compiler generates quite
    many duplicates too: 2425 of 13769 total symbols for runtime.a for example.
    De-duplicating them in the compiler saves the linker a bit of work.
    
    Fixes #14983
    
    Change-Id: I5f18e5f9743563c795aad8f0a22d17a7ed147711
    Reviewed-on: https://go-review.googlesource.com/22293
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 1354b32cd70f2702381764fd595dd2faa996840c
Author: Rick Hudson <rlh@golang.org>
Date:   Mon Mar 14 12:17:48 2016 -0400

    [dev.garbage] runtime: add gc work buffer tryGet and put fast paths
    
    The complexity of the GC work buffers put and tryGet
    prevented them from being inlined. This CL simplifies
    the fast path thus enabling inlining. If the fast
    path does not succeed the previous put and tryGet
    functions are called.
    
    Change-Id: I6da6495d0dadf42bd0377c110b502274cc01acf5
    Reviewed-on: https://go-review.googlesource.com/20704
    Reviewed-by: Austin Clements <austin@google.com>

commit f8d0d4fd59b6cb6f875eac7753f036b10a28f995
Author: Rick Hudson <rlh@golang.org>
Date:   Mon Mar 14 12:02:02 2016 -0400

    [dev.garbage] runtime: cleanup and optimize span.base()
    
    Prior to this CL the base of a span was calculated in various
    places using shifts or calls to base(). This CL now
    always calls base() which has been optimized to calculate the
    base of the span when the span is initialized and store that
    value in the span structure.
    
    Change-Id: I661f2bfa21e3748a249cdf049ef9062db6e78100
    Reviewed-on: https://go-review.googlesource.com/20703
    Reviewed-by: Austin Clements <austin@google.com>

commit 8dda1c4c08adf8b2107dec1c0d70d24443269ccd
Author: Rick Hudson <rlh@golang.org>
Date:   Wed Mar 2 12:15:02 2016 -0500

    [dev.garbage] runtime: remove heapBitsSweepSpan
    
    Prior to this CL the sweep phase was responsible for locating
    all objects that were about to be freed and calling a function
    to process the object. This was done by the function
    heapBitsSweepSpan. Part of processing included calls to
    tracefree and msanfree as well as counting how many objects
    were freed.
    
    The calls to tracefree and msanfree have been moved into the
    gcmalloc routine and called when the object is about to be
    reallocated. The counting of free objects has been optimized
    using an array based popcnt algorithm and if all the objects
    in a span are free then span is freed.
    
    Similarly the code to locate the next free object has been
    optimized to use an array based ctz (count trailing zero).
    Various hot paths in the allocation logic have been optimized.
    
    At this point the garbage benchmark is within 3% of the 1.6
    release.
    
    Change-Id: I00643c442e2ada1685c010c3447e4ea8537d2dfa
    Reviewed-on: https://go-review.googlesource.com/20201
    Reviewed-by: Austin Clements <austin@google.com>

commit 4093481523b1e064e998d5d586276db45f4d11a7
Author: Rick Hudson <rlh@golang.org>
Date:   Wed Feb 24 14:36:30 2016 -0500

    [dev.garbage] runtime: add bit and cache ctz64 (count trailing zero)
    
    Add to each span a 64 bit cache (allocCache) of the allocBits
    at freeindex. allocCache is shifted such that the lowest bit
    corresponds to the bit freeindex. allocBits uses a 0 to
    indicate an object is free, on the other hand allocCache
    uses a 1 to indicate an object is free. This facilitates
    ctz64 (count trailing zero) which counts the number of 0s
    trailing the least significant 1. This is also the index of
    the least significant 1.
    
    Each span maintains a freeindex indicating the boundary
    between allocated objects and unallocated objects. allocCache
    is shifted as freeindex is incremented such that the low bit
    in allocCache corresponds to the bit a freeindex in the
    allocBits array.
    
    Currently ctz64 is written in Go using a for loop so it is
    not very efficient. Use of the hardware instruction will
    follow. With this in mind comparisons of the garbage
    benchmark are as follows.
    
    1.6 release        2.8 seconds
    dev:garbage branch 3.1 seconds.
    
    Profiling shows the go implementation of ctz64 takes up
    1% of the total time.
    
    Change-Id: If084ed9c3b1eda9f3c6ab2e794625cb870b8167f
    Reviewed-on: https://go-review.googlesource.com/20200
    Reviewed-by: Austin Clements <austin@google.com>

commit 44fe90d0b393c961e3fb1b4c37e93ce268da46bc
Author: Rick Hudson <rlh@golang.org>
Date:   Wed Feb 17 11:27:52 2016 -0500

    [dev.garbage] runtime: logic that uses count trailing zero (ctz)
    
    Most (all?) processors that Go supports supply a hardware
    instruction that takes a byte and returns the number
    of zeros trailing the first 1 encountered, or 8
    if no ones are found. This is the index within the
    byte of the first 1 encountered. CTZ should improve the
    performance of the nextFreeIndex function.
    
    Since nextFreeIndex wants the next unmarked (0) bit
    a bit-wise complement is needed before calling ctz.
    Furthermore unmarked bits associated with previously
    allocated objects need to be ignored. Instead of writing
    a 1 as we allocate the code masks all bits less than the
    freeindex after loading the byte.
    
    While this CL does not actual execute a CTZ instruction
    it supplies a ctz function with the appropiate signature
    along with the logic to execute it.
    
    Change-Id: I5c55ce0ed48ca22c21c4dd9f969b0819b4eadaa7
    Reviewed-on: https://go-review.googlesource.com/20169
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit e4ac2d4acc8cb44df2107e3fa1067755feaaa005
Author: Rick Hudson <rlh@golang.org>
Date:   Tue Feb 16 17:16:43 2016 -0500

    [dev.garbage] runtime: replace ref with allocCount
    
    This is a renaming of the field ref to the
    more appropriate allocCount. The field
    holds the number of objects in the span
    that are currently allocated. Some throws
    strings were adjusted to more accurately
    convey the meaning of allocCount.
    
    Change-Id: I10daf44e3e9cc24a10912638c7de3c1984ef8efe
    Reviewed-on: https://go-review.googlesource.com/19518
    Reviewed-by: Austin Clements <austin@google.com>

commit 3479b065d43f2990ac12e7b00ddff6f63a876ca9
Author: Rick Hudson <rlh@golang.org>
Date:   Thu Feb 11 13:57:58 2016 -0500

    [dev.garbage] runtime: allocate directly from GC mark bits
    
    Instead of building a freelist from the mark bits generated
    by the GC this CL allocates directly from the mark bits.
    
    The approach moves the mark bits from the pointer/no pointer
    heap structures into their own per span data structures. The
    mark/allocation vectors consist of a single mark bit per
    object. Two vectors are maintained, one for allocation and
    one for the GC's mark phase. During the GC cycle's sweep
    phase the interpretation of the vectors is swapped. The
    mark vector becomes the allocation vector and the old
    allocation vector is cleared and becomes the mark vector that
    the next GC cycle will use.
    
    Marked entries in the allocation vector indicate that the
    object is not free. Each allocation vector maintains a boundary
    between areas of the span already allocated from and areas
    not yet allocated from. As objects are allocated this boundary
    is moved until it reaches the end of the span. At this point
    further allocations will be done from another span.
    
    Since we no longer sweep a span inspecting each freed object
    the responsibility for maintaining pointer/scalar bits in
    the heapBitMap containing is now the responsibility of the
    the routines doing the actual allocation.
    
    This CL is functionally complete and ready for performance
    tuning.
    
    Change-Id: I336e0fc21eef1066e0b68c7067cc71b9f3d50e04
    Reviewed-on: https://go-review.googlesource.com/19470
    Reviewed-by: Austin Clements <austin@google.com>

commit dc65a82eff0a3af5a26f6c6d31c53bdac9b31168
Author: Rick Hudson <rlh@golang.org>
Date:   Tue Feb 9 09:38:44 2016 -0500

    [dev.garbage] runtime: mark/allocation helper functions
    
    The gcmarkBits is a bit vector used by the GC to mark
    reachable objects. Once a GC cycle is complete the gcmarkBits
    swap places with the allocBits. allocBits is then used directly
    by malloc to locate free objects, thus avoiding the
    construction of a linked free list. This CL introduces a set
    of helper functions for manipulating gcmarkBits and allocBits
    that will be used by later CLs to realize the actual
    algorithm. Minimal attempts have been made to optimize these
    helper routines.
    
    Change-Id: I55ad6240ca32cd456e8ed4973c6970b3b882dd34
    Reviewed-on: https://go-review.googlesource.com/19420
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Rick Hudson <rlh@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e1c4e9a754833e169a41ea98a49c3712513879ab
Author: Rick Hudson <rlh@golang.org>
Date:   Mon Feb 8 12:36:23 2016 -0500

    [dev.garbage] runtime: refactor next free object
    
    In preparation for changing how the next free object is chosen
    refactor and consolidate code into a single function.
    
    Change-Id: I6836cd88ed7cbf0b2df87abd7c1c3b9fabc1cbd8
    Reviewed-on: https://go-review.googlesource.com/19317
    Reviewed-by: Austin Clements <austin@google.com>

commit aed861038f876643a67c2297b384b6be140c46c1
Author: Rick Hudson <rlh@golang.org>
Date:   Mon Feb 8 09:53:14 2016 -0500

    [dev.garbage] runtime: add stackfreelist
    
    The freelist for normal objects and the freelist
    for stacks share the same mspan field for holding
    the list head but are operated on by different code
    sequences. This overloading complicates the use of bit
    vectors for allocation of normal objects. This change
    refactors the use of the stackfreelist out from the
    use of freelist.
    
    Change-Id: I5b155b5b8a1fcd8e24c12ee1eb0800ad9b6b4fa0
    Reviewed-on: https://go-review.googlesource.com/19315
    Reviewed-by: Austin Clements <austin@google.com>

commit 2ac8bdc52ae1ea0418df465de3f1ef36f49e2274
Author: Rick Hudson <rlh@golang.org>
Date:   Thu Feb 4 11:41:48 2016 -0500

    [dev.garbage] runtime: bitmap allocation data structs
    
    The bitmap allocation data structure prototypes. Before
    this is released these underlying data structures need
    to be more performant but the signatures of helper
    functions utilizing these structures will remain stable.
    
    Change-Id: I5ace12f2fb512a7038a52bbde2bfb7e98783bcbe
    Reviewed-on: https://go-review.googlesource.com/19221
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d3c79d324acd7300b6f705e66af8ca711af00d9f
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Apr 27 15:10:10 2016 +1000

    cmd/compile/internal/gc: remove oconv(op, 0) calls
    
    Updates #15462
    
    Automatic refactor with sed -e.
    
    Replace all oconv(op, 0) to string conversion with the raw op value
    which fmt's %v verb can print directly.
    
    The remaining oconv(op, FmtSharp) will be replaced with op.GoString and
    %#v in the next CL.
    
    Change-Id: I5e2f7ee0bd35caa65c6dd6cb1a866b5e4519e641
    Reviewed-on: https://go-review.googlesource.com/22499
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cbd72318b964bde9d95102571cd22d1919dbd37f
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Sat Apr 2 18:07:24 2016 -0300

    net: search domain from hostname if no search directives
    
    Fixes #14897
    
    Change-Id: Iffe7462983a5623a37aa0dc6f74c8c70e10c3244
    Reviewed-on: https://go-review.googlesource.com/21464
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 4edb40d441b0def61507e65141535de4d86b9edc
Author: Damien Neil <dneil@google.com>
Date:   Wed Apr 27 11:08:58 2016 -0700

    syscall: fix uint64->int cast of control message header
    
    Change-Id: I28980b307d10730b122a4f833809bc400d6aff24
    Reviewed-on: https://go-review.googlesource.com/22525
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 78bcdeb6a36a6d45f93c8ff546fa946e5fbec093
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Apr 27 15:44:22 2016 -0400

    misc/cgo/testcarchive: fix path of libgo.a for darwin/arm
    
    After CL 22461, c-archive build on darwin/arm is by default compiled
    with -shared, so update the install path.
    
    Fix build.
    
    Change-Id: Ie93dbd226ed416b834da0234210f4b98bc0e3606
    Reviewed-on: https://go-review.googlesource.com/22507
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b49b71ae192c72faf699edd321ff0637f90e794c
Author: Austin Clements <austin@google.com>
Date:   Fri Mar 18 11:27:59 2016 -0400

    runtime: don't rescan globals
    
    Currently the runtime rescans globals during mark 2 and mark
    termination. This costs as much as 500µs/MB in STW time, which is
    enough to surpass the 10ms STW limit with only 20MB of globals.
    
    It's also basically unnecessary. The compiler already generates write
    barriers for global -> heap pointer updates and the regular write
    barrier doesn't check whether the slot is a global or in the heap.
    Some less common write barriers do cause problems.
    heapBitsBulkBarrier, which is used by typedmemmove and related
    functions, currently depends on having access to the pointer bitmap
    and as a result ignores writes to globals. Likewise, the
    reflect-related write barriers reflect_typedmemmovepartial and
    callwritebarrier ignore non-heap destinations; though it appears they
    can never be called with global pointers anyway.
    
    This commit makes heapBitsBulkBarrier issue write barriers for writes
    to global pointers using the data and BSS pointer bitmaps, removes the
    inheap checks from the reflection write barriers, and eliminates the
    rescans during mark 2 and mark termination. It also adds a test that
    writes to globals have write barriers.
    
    Programs with large data+BSS segments (with pointers) aren't common,
    but for programs that do have large data+BSS segments, this
    significantly reduces pause time:
    
    name \ 95%ile-time/markTerm              old         new  delta
    LargeBSS/bss:1GB/gomaxprocs:4  148200µs ± 6%  302µs ±52%  -99.80% (p=0.008 n=5+5)
    
    This very slightly improves the go1 benchmarks:
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.62s ± 3%     2.62s ± 4%    ~     (p=0.904 n=20+20)
    Fannkuch11-12                2.15s ± 1%     2.13s ± 0%  -1.29%  (p=0.000 n=18+20)
    FmtFprintfEmpty-12          48.3ns ± 2%    47.6ns ± 1%  -1.52%  (p=0.000 n=20+16)
    FmtFprintfString-12          152ns ± 0%     152ns ± 1%    ~     (p=0.725 n=18+18)
    FmtFprintfInt-12             150ns ± 1%     149ns ± 1%  -1.14%  (p=0.000 n=19+20)
    FmtFprintfIntInt-12          250ns ± 0%     244ns ± 1%  -2.12%  (p=0.000 n=20+18)
    FmtFprintfPrefixedInt-12     219ns ± 1%     217ns ± 1%  -1.20%  (p=0.000 n=19+20)
    FmtFprintfFloat-12           280ns ± 0%     281ns ± 1%  +0.47%  (p=0.000 n=19+19)
    FmtManyArgs-12               928ns ± 0%     923ns ± 1%  -0.53%  (p=0.000 n=19+18)
    GobDecode-12                7.21ms ± 1%    7.24ms ± 2%    ~     (p=0.091 n=19+19)
    GobEncode-12                6.07ms ± 1%    6.05ms ± 1%  -0.36%  (p=0.002 n=20+17)
    Gzip-12                      265ms ± 1%     265ms ± 1%    ~     (p=0.496 n=20+19)
    Gunzip-12                   39.6ms ± 1%    39.3ms ± 1%  -0.85%  (p=0.000 n=19+19)
    HTTPClientServer-12         74.0µs ± 2%    73.8µs ± 1%    ~     (p=0.569 n=20+19)
    JSONEncode-12               15.4ms ± 1%    15.3ms ± 1%  -0.25%  (p=0.049 n=17+17)
    JSONDecode-12               53.7ms ± 2%    53.0ms ± 1%  -1.29%  (p=0.000 n=18+17)
    Mandelbrot200-12            3.97ms ± 1%    3.97ms ± 0%    ~     (p=0.072 n=17+18)
    GoParse-12                  3.35ms ± 2%    3.36ms ± 1%  +0.51%  (p=0.005 n=18+20)
    RegexpMatchEasy0_32-12      72.7ns ± 2%    72.2ns ± 1%  -0.70%  (p=0.005 n=19+19)
    RegexpMatchEasy0_1K-12       246ns ± 1%     245ns ± 0%  -0.60%  (p=0.000 n=18+16)
    RegexpMatchEasy1_32-12      72.8ns ± 1%    72.5ns ± 1%  -0.37%  (p=0.011 n=18+18)
    RegexpMatchEasy1_1K-12       380ns ± 1%     385ns ± 1%  +1.34%  (p=0.000 n=20+19)
    RegexpMatchMedium_32-12      115ns ± 2%     115ns ± 1%  +0.44%  (p=0.047 n=20+20)
    RegexpMatchMedium_1K-12     35.4µs ± 1%    35.5µs ± 1%    ~     (p=0.079 n=18+19)
    RegexpMatchHard_32-12       1.83µs ± 0%    1.80µs ± 1%  -1.76%  (p=0.000 n=18+18)
    RegexpMatchHard_1K-12       55.1µs ± 0%    54.3µs ± 1%  -1.42%  (p=0.000 n=18+19)
    Revcomp-12                   386ms ± 1%     381ms ± 1%  -1.14%  (p=0.000 n=18+18)
    Template-12                 61.5ms ± 2%    61.5ms ± 2%    ~     (p=0.647 n=19+20)
    TimeParse-12                 338ns ± 0%     336ns ± 1%  -0.72%  (p=0.000 n=14+19)
    TimeFormat-12                350ns ± 0%     357ns ± 0%  +2.05%  (p=0.000 n=19+18)
    [Geo mean]                  55.3µs         55.0µs       -0.41%
    
    Change-Id: I57e8720385a1b991aeebd111b6874354308e2a6b
    Reviewed-on: https://go-review.googlesource.com/20829
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 30172f1811a3e08487c6191d1923f8608a338496
Author: Austin Clements <austin@google.com>
Date:   Wed Apr 27 14:30:01 2016 -0400

    runtime: make {add,subtract}{b,1} nosplit
    
    These are used at the bottom level of various GC operations that must
    not be preempted. To be on the safe side, mark them all nosplit.
    
    Change-Id: I8f7360e79c9852bd044df71413b8581ad764380c
    Reviewed-on: https://go-review.googlesource.com/22504
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit bddfc337f9b053740b51e1fd8429f84dafa89205
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 27 13:10:49 2016 -0400

    reflect: fix strings of SliceOf-created types
    
    The new type was inheriting the tflagExtraStar from its prototype.
    
    Fixes #15467
    
    Change-Id: Ic22c2a55cee7580cb59228d52b97e1c0a1e60220
    Reviewed-on: https://go-review.googlesource.com/22501
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 217be5b35d8fb0f812ca59bf7dec3aa0fb850c46
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 27 12:49:27 2016 -0400

    reflect: unnamed interface types have no name
    
    Fixes #15468
    
    Change-Id: I8723171f87774a98d5e80e7832ebb96dd1fbea74
    Reviewed-on: https://go-review.googlesource.com/22524
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>

commit 74a9bad63899ffb02b747678c2c181ffb13983b9
Author: Zhongwei Yao <zhongwei.yao@arm.com>
Date:   Mon Apr 25 11:08:38 2016 +0800

    cmd/compile: enable const division for arm64
    
    performance:
    benchmark                   old ns/op     new ns/op     delta
    BenchmarkDivconstI64-8      8.28          2.70          -67.39%
    BenchmarkDivconstU64-8      8.28          4.69          -43.36%
    BenchmarkDivconstI32-8      8.28          6.39          -22.83%
    BenchmarkDivconstU32-8      8.28          4.43          -46.50%
    BenchmarkDivconstI16-8      5.17          5.17          +0.00%
    BenchmarkDivconstU16-8      5.33          5.34          +0.19%
    BenchmarkDivconstI8-8       3.50          3.50          +0.00%
    BenchmarkDivconstU8-8       3.51          3.50          -0.28%
    
    Fixes #15382
    
    Change-Id: Ibce7b28f0586d593b33c4d4ecc5d5e7e7c905d13
    Reviewed-on: https://go-review.googlesource.com/22292
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 7538b1db8ec0d82a623847fe5987f1988fe16448
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Apr 15 14:14:04 2016 -0700

    cmd/compile: switch to compact export format by default
    
    builtin.go was auto-generated via go generate; all other
    changes were manual.
    
    The new format reduces the export data size by ~65% on average
    for the std library packages (and there is still quite a bit of
    room for improvement).
    
    The average time to write export data is reduced by (at least)
    62% as measured in one run over the std lib, it is likely more.
    
    The average time to read import data is reduced by (at least)
    37% as measured in one run over the std lib, it is likely more.
    There is also room to improve this time.
    
    The compiler transparently handles both packages using the old
    and the new format.
    
    Comparing the -S output of the go build for each package via
    the cmp.bash script (added) shows identical assembly code for
    all packages, but 6 files show file:line differences:
    
    The following files have differences because they use cgo
    and cgo uses different temp. directories for different builds.
    Harmless.
    
            src/crypto/x509
            src/net
            src/os/user
            src/runtime/cgo
    
    The following files have file:line differences that are not yet
    fully explained; however the differences exist w/ and w/o new export
    format (pre-existing condition). See issue #15453.
    
            src/go/internal/gccgoimporter
            src/go/internal/gcimporter
    
    In summary, switching to the new export format produces the same
    package files as before for all practical purposes.
    
    How can you tell which one you have (if you care): Open a package
    (.a) file in an editor. Textual export data starts with a $$ after
    the header and is more or less legible; binary export data starts
    with a $$B after the header and is mostly unreadable. A stand-alone
    decoder (for debugging) is in the works.
    
    In case of a problem, please first try reverting back to the old
    textual format to determine if the cause is the new export format:
    
    For a stand-alone compiler invocation:
    - go tool compile -newexport=0 <files>
    
    For a single package:
    - go build -gcflags="-newexport=0" <pkg>
    
    For make/all.bash:
    - (export GO_GCFLAGS="-newexport=0"; sh make.bash)
    
    Fixes #13241.
    
    Change-Id: I2588cb463be80af22446bf80c225e92ab79878b8
    Reviewed-on: https://go-review.googlesource.com/22123
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 70d95a488da89d268d0a61171ec389982a62184d
Author: Michael Matloob <matloob@golang.org>
Date:   Tue Apr 26 15:28:17 2016 -0400

    regexp: add a harder regexp to the benchmarks
    
    This regexp has many parallel alternations
    
    Change-Id: I8044f460aa7d18f20cb0452e9470557b87facd6d
    Reviewed-on: https://go-review.googlesource.com/22471
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9629f55fbbfb4052ea24c247cbd5db49ba2f389e
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Apr 26 15:17:56 2016 -0400

    cmd/link: remove absolute address for c-archive on darwin/arm
    
    Now it is possible to build a c-archive as PIC on darwin/arm (this is
    now the default). Then the system linker can link the binary using
    the archive as PIE.
    
    Fixes #12896.
    
    Change-Id: Iad84131572422190f5fa036e7d71910dc155f155
    Reviewed-on: https://go-review.googlesource.com/22461
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 86c93c989e73e823e9e66f3d3e319b616544c320
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 26 22:31:02 2016 -0700

    cmd/compile: don't write pos info for builtin packages
    
    TestBuiltin will fail if run on Windows and builtin.go was generated
    on a non-Windows machine (or vice versa) because path names have
    different separators. Avoid problem altogether by not writing pos
    info for builtin packages. It's not needed.
    
    Affects -newexport only.
    
    Change-Id: I8944f343452faebaea9a08b5fb62829bed77c148
    Reviewed-on: https://go-review.googlesource.com/22498
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a19e60b2c3c388abd3503da3fc2659bef1e76b46
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 26 15:22:33 2016 -0700

    cmd/compile: don't use line numbers from ONAME and named OLITERALs
    
    The line numbers of ONAMEs are the location of their
    declaration, not their use.
    
    The line numbers of named OLITERALs are also the location
    of their declaration.
    
    Ignore both of these.  Instead, we will inherit the line number from
    the containing syntactic item.
    
    Fixes #14742
    Fixes #15430
    
    Change-Id: Ie43b5b9f6321cbf8cead56e37ccc9364d0702f2f
    Reviewed-on: https://go-review.googlesource.com/22479
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c9389a101b020b41a954ac35642ec254c8344238
Author: Zhongwei Yao <zhongwei.yao@arm.com>
Date:   Thu Mar 31 15:34:12 2016 +0800

    cmd/asm: fix SIMD register name on arm64
    
    Current V-register range is V32~V63 on arm64. This patch changes it to
    V0~V31.
    
    fix #15465.
    
    Change-Id: I90dab42dea46825ec5d7a8321ec4f6550735feb8
    Reviewed-on: https://go-review.googlesource.com/22520
    Reviewed-by: Aram Hăvărneanu <aram@mgk.ro>
    Run-TryBot: Aram Hăvărneanu <aram@mgk.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6dfba5c7ce867583cbcea9da09dceacd2633bacc
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Feb 26 13:02:42 2016 +0100

    runtime/race: improve TestNoRaceIOHttp test
    
    TestNoRaceIOHttp does all kinds of bad things:
    1. Binds to a fixed port, so concurrent tests fail.
    2. Registers HTTP handler multiple times, so repeated tests fail.
    3. Relies on sleep to wait for listen.
    
    Fix all of that.
    
    Change-Id: I1210b7797ef5e92465b37dc407246d92a2a24fe8
    Reviewed-on: https://go-review.googlesource.com/19953
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 102cf2ae0321775eef2d36d7c4258b740fe92458
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Apr 15 09:38:36 2016 +0200

    image/color: optimize RGBToYCbCr
    
    Apply optimizations used to speed up YCbCrToRGB from
    https://go-review.googlesource.com/#/c/21910/
    to RGBToYCbCr.
    
    name             old time/op  new time/op  delta
    RGBToYCbCr/0-2   6.81ns ± 0%  5.96ns ± 0%  -12.48%  (p=0.000 n=38+50)
    RGBToYCbCr/Cb-2  7.68ns ± 0%  6.13ns ± 0%  -20.21%  (p=0.000 n=50+33)
    RGBToYCbCr/Cr-2  6.84ns ± 0%  6.04ns ± 0%  -11.70%  (p=0.000 n=39+42)
    
    Updates #15260
    
    Change-Id: If3ea5393ae371a955ddf18ab226aae20b48f9692
    Reviewed-on: https://go-review.googlesource.com/22411
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ralph Corderoy <ralph@inputplus.co.uk>

commit 8f2e780e8ac29e47466103998484c0a73df34d51
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Apr 27 14:46:09 2016 +1000

    cmd/compile/internal: unexport gc.Oconv
    
    Updates #15462
    
    Semi automatic change with gofmt -r and hand fixups for callers outside
    internal/gc.
    
    All the uses of gc.Oconv outside cmd/compile/internal/gc were for the
    Oconv(op, 0) form, which is already handled the Op.String method.
    
    Replace the use of gc.Oconv(op, 0) with op itself, which will call
    Op.String via the %v or %s verb. Unexport Oconv.
    
    Change-Id: I84da2a2e4381b35f52efce427b2d6a3bccdf2526
    Reviewed-on: https://go-review.googlesource.com/22496
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 707aed0363c31bfef761a86464a09ecf0817267e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 26 19:11:53 2016 -0700

    cmd/compile: fix opnames
    
    Change-Id: Ief4707747338912216a8509b1adbf655c8ffac56
    Reviewed-on: https://go-review.googlesource.com/22495
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2e30218223a7bf2b560fbaf79bac8d80ea4ece1c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 26 15:43:04 2016 -0700

    net/http: remove idle transport connections from Transport when server closes
    
    Previously the Transport would cache idle connections from the
    Transport for later reuse, but if a peer server disconnected
    (e.g. idle timeout), we would not proactively remove the *persistConn
    from the Transport's idle list, leading to a waste of memory
    (potentially forever).
    
    Instead, when the persistConn's readLoop terminates, remote it from
    the idle list, if present.
    
    This also adds the beginning of accounting for the total number of
    idle connections, which will be needed for Transport.MaxIdleConns
    later.
    
    Updates #15461
    
    Change-Id: Iab091f180f8dd1ee0d78f34b9705d68743b5557b
    Reviewed-on: https://go-review.googlesource.com/22492
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 87bca88c703c1f14fe8473dc2f07dc521cf2b989
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 26 18:54:12 2016 -0700

    context: fix doc typo
    
    Fixes #15449
    
    Change-Id: I8d84d076a05c56694b48f7b84f572b1a6524f522
    Reviewed-on: https://go-review.googlesource.com/22493
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 0b5fbf7098b10da284f48de604e7d2860d2cd9d0
Author: Russ Cox <rsc@golang.org>
Date:   Mon Apr 25 10:51:26 2016 -0400

    cmd/go: add Package.StaleReason for debugging with go list
    
    It comes up every few months that we can't understand why
    the go command is rebuilding some package.
    Add diagnostics so that the go command can explain itself
    if asked.
    
    For #2775, #3506, #12074.
    
    Change-Id: I1c73b492589b49886bf31a8f9d05514adbd6ed70
    Reviewed-on: https://go-review.googlesource.com/22432
    Reviewed-by: Rob Pike <r@golang.org>

commit 525ae3f897bf79fd78f3e693bd65056efc8f9109
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Apr 25 17:58:34 2016 -0400

    crypto/sha256: add s390x assembly implementation
    
    Renames block to blockGeneric so that it can be called when the
    assembly feature check fails. This means making block a var on
    platforms without an assembly implementation (similar to the sha1
    package).
    
    Also adds a test to check that the fallback path works correctly
    when the feature check fails.
    
    name        old speed      new speed       delta
    Hash8Bytes  6.42MB/s ± 1%  27.14MB/s ± 0%  +323.01%  (p=0.000 n=10+10)
    Hash1K      53.9MB/s ± 0%  511.1MB/s ± 0%  +847.57%   (p=0.000 n=10+9)
    Hash8K      57.1MB/s ± 1%  609.7MB/s ± 0%  +967.04%  (p=0.000 n=10+10)
    
    Change-Id: If962b2a5c9160b3a0b76ccee53b2fd809468ed3d
    Reviewed-on: https://go-review.googlesource.com/22460
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2a889b9d931e58166350f785b16edc51e28ef19b
Author: Austin Clements <austin@google.com>
Date:   Fri Mar 4 11:58:26 2016 -0500

    runtime: make stack re-scan O(# dirty stacks)
    
    Currently the stack re-scan during mark termination is O(# stacks)
    because we enqueue a root marking job for every goroutine. It takes
    ~34ns to process this root marking job for a valid (clean) stack, so
    at around 300k goroutines we exceed the 10ms pause goal. A non-trivial
    portion of this time is spent simply taking the cache miss to check
    the gcscanvalid flag, so simply optimizing the path that handles clean
    stacks can only improve this so much.
    
    Fix this by keeping an explicit list of goroutines with dirty stacks
    that need to be rescanned. When a goroutine first transitions to
    running after a stack scan and marks its stack dirty, it adds itself
    to this list. We enqueue root marking jobs only for the goroutines in
    this list, so this improves stack re-scanning asymptotically by
    completely eliminating time spent on clean goroutines.
    
    This reduces mark termination time for 500k idle goroutines from 15ms
    to 238µs. Overall performance effect is negligible.
    
    name \ 95%ile-time/markTerm     old           new         delta
    IdleGs/gs:500000/gomaxprocs:12  15000µs ± 0%  238µs ± 5%  -98.41% (p=0.000 n=10+10)
    
    name              old time/op  new time/op  delta
    XBenchGarbage-12  2.30ms ± 3%  2.29ms ± 1%  -0.43%  (p=0.049 n=17+18)
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.57s ± 3%     2.59s ± 2%    ~     (p=0.141 n=19+20)
    Fannkuch11-12                2.09s ± 0%     2.10s ± 1%  +0.53%  (p=0.000 n=19+19)
    FmtFprintfEmpty-12          45.3ns ± 3%    45.2ns ± 2%    ~     (p=0.845 n=20+20)
    FmtFprintfString-12          129ns ± 0%     127ns ± 0%  -1.55%  (p=0.000 n=16+16)
    FmtFprintfInt-12             123ns ± 0%     119ns ± 1%  -3.24%  (p=0.000 n=19+19)
    FmtFprintfIntInt-12          195ns ± 1%     189ns ± 1%  -3.11%  (p=0.000 n=17+17)
    FmtFprintfPrefixedInt-12     193ns ± 1%     187ns ± 1%  -3.06%  (p=0.000 n=19+19)
    FmtFprintfFloat-12           254ns ± 0%     255ns ± 1%  +0.35%  (p=0.001 n=14+17)
    FmtManyArgs-12               781ns ± 0%     770ns ± 0%  -1.48%  (p=0.000 n=16+19)
    GobDecode-12                7.00ms ± 1%    6.98ms ± 1%    ~     (p=0.563 n=19+19)
    GobEncode-12                5.91ms ± 1%    5.92ms ± 0%    ~     (p=0.118 n=19+18)
    Gzip-12                      219ms ± 1%     215ms ± 1%  -1.81%  (p=0.000 n=18+18)
    Gunzip-12                   37.2ms ± 0%    37.4ms ± 0%  +0.45%  (p=0.000 n=17+19)
    HTTPClientServer-12         76.9µs ± 3%    77.5µs ± 2%  +0.81%  (p=0.030 n=20+19)
    JSONEncode-12               15.0ms ± 0%    14.8ms ± 1%  -0.88%  (p=0.001 n=15+19)
    JSONDecode-12               50.6ms ± 0%    53.2ms ± 2%  +5.07%  (p=0.000 n=17+19)
    Mandelbrot200-12            4.05ms ± 0%    4.05ms ± 1%    ~     (p=0.581 n=16+17)
    GoParse-12                  3.34ms ± 1%    3.30ms ± 1%  -1.21%  (p=0.000 n=15+20)
    RegexpMatchEasy0_32-12      69.6ns ± 1%    69.8ns ± 2%    ~     (p=0.566 n=19+19)
    RegexpMatchEasy0_1K-12       238ns ± 1%     236ns ± 0%  -0.91%  (p=0.000 n=17+13)
    RegexpMatchEasy1_32-12      69.8ns ± 1%    70.0ns ± 1%  +0.23%  (p=0.026 n=17+16)
    RegexpMatchEasy1_1K-12       371ns ± 1%     363ns ± 1%  -2.07%  (p=0.000 n=19+19)
    RegexpMatchMedium_32-12      107ns ± 2%     106ns ± 1%  -0.51%  (p=0.031 n=18+20)
    RegexpMatchMedium_1K-12     33.0µs ± 0%    32.9µs ± 0%  -0.30%  (p=0.004 n=16+16)
    RegexpMatchHard_32-12       1.70µs ± 0%    1.70µs ± 0%  +0.45%  (p=0.000 n=16+17)
    RegexpMatchHard_1K-12       51.1µs ± 2%    51.4µs ± 1%  +0.53%  (p=0.000 n=17+19)
    Revcomp-12                   378ms ± 1%     385ms ± 1%  +1.92%  (p=0.000 n=19+18)
    Template-12                 64.3ms ± 2%    65.0ms ± 2%  +1.09%  (p=0.001 n=19+19)
    TimeParse-12                 315ns ± 1%     317ns ± 2%    ~     (p=0.108 n=18+20)
    TimeFormat-12                360ns ± 1%     337ns ± 0%  -6.30%  (p=0.000 n=18+13)
    [Geo mean]                  51.8µs         51.6µs       -0.48%
    
    Change-Id: Icf8994671476840e3998236e15407a505d4c760c
    Reviewed-on: https://go-review.googlesource.com/20700
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5b765ce310c594276ea919a9cb455cc894fee999
Author: Austin Clements <austin@google.com>
Date:   Fri Mar 11 14:08:10 2016 -0500

    runtime: don't clear gcscanvalid in casfrom_Gscanstatus
    
    Currently we clear gcscanvalid in both casgstatus and
    casfrom_Gscanstatus if the new status is _Grunning. This is very
    important to do in casgstatus. However, this is potentially wrong in
    casfrom_Gscanstatus because in this case the caller doesn't own gp and
    hence the write is racy. Unlike the other _Gscan statuses, during
    _Gscanrunning, the G is still running. This does not indicate that
    it's transitioning into a running state. The scan simply hasn't
    happened yet, so it's neither valid nor invalid.
    
    Conveniently, this also means clearing gcscanvalid is unnecessary in
    this case because the G was already in _Grunning, so we can simply
    remove this code. What will happen instead is that the G will be
    preempted to scan itself, that scan will set gcscanvalid to true, and
    then the G will return to _Grunning via casgstatus, clearing
    gcscanvalid.
    
    This fix will become necessary shortly when we start keeping track of
    the set of G's with dirty stacks, since it will no longer be
    idempotent to simply set gcscanvalid to false.
    
    Change-Id: I688c82e6fbf00d5dbbbff49efa66acb99ee86785
    Reviewed-on: https://go-review.googlesource.com/20669
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c707d8385639dfda22dc06b112f5f7af78006a1f
Author: Austin Clements <austin@google.com>
Date:   Mon Apr 18 18:28:36 2016 -0400

    runtime: fix typos in comment about gcscanvalid
    
    Change-Id: Id4ad7ebf88a21eba2bc5714b96570ed5cfaed757
    Reviewed-on: https://go-review.googlesource.com/22210
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9f263c14edccb564b675ed6c4f12260f333505d5
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 2 17:55:45 2016 -0500

    runtime: remove stack barriers during sweep
    
    This adds a best-effort pass to remove stack barriers immediately
    after the end of mark termination. This isn't necessary for the Go
    runtime, but should help external tools that perform stack walks but
    aren't aware of Go's stack barriers such as GDB, perf, and VTune.
    (Though clearly they'll still have trouble unwinding stacks during
    mark.)
    
    Change-Id: I66600fae1f03ee36b5459d2b00dcc376269af18e
    Reviewed-on: https://go-review.googlesource.com/20668
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 269c969c81774d1579e80a8c35edbd0ebea065a7
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 2 14:52:08 2016 -0500

    runtime: remove stack barriers during concurrent mark
    
    Currently we remove stack barriers during STW mark termination, which
    has a non-trivial per-goroutine cost and means that we have to touch
    even clean stacks during mark termination. However, there's no problem
    with leaving them in during the sweep phase. They just have to be out
    by the time we install new stack barriers immediately prior to
    scanning the stack such as during the mark phase of the next GC cycle
    or during mark termination in a STW GC.
    
    Hence, move the gcRemoveStackBarriers from STW mark termination to
    just before we install new stack barriers during concurrent mark. This
    removes the cost from STW. Furthermore, this combined with concurrent
    stack shrinking means that the mark termination scan of a clean stack
    is a complete no-op, which will make it possible to skip clean stacks
    entirely during mark termination.
    
    This has the downside that it will mess up anything outside of Go that
    tries to walk Go stacks all the time instead of just some of the time.
    This includes tools like GDB, perf, and VTune. We'll improve the
    situation shortly.
    
    Change-Id: Ia40baad8f8c16aeefac05425e00b0cf478137097
    Reviewed-on: https://go-review.googlesource.com/20667
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit efb0c55407cdbef6aa5471f057b8afd1d0303369
Author: Austin Clements <austin@google.com>
Date:   Fri Mar 11 13:54:55 2016 -0500

    runtime: avoid span root marking entirely during mark termination
    
    Currently we enqueue span root mark jobs during both concurrent mark
    and mark termination, but we make the job a no-op during mark
    termination.
    
    This is silly. Instead of queueing them up just to not do them, don't
    queue them up in the first place.
    
    Change-Id: Ie1d36de884abfb17dd0db6f0449a2b7c997affab
    Reviewed-on: https://go-review.googlesource.com/20666
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e8337491aa6b6a5f96f31077764352549dc34159
Author: Austin Clements <austin@google.com>
Date:   Fri Mar 11 17:00:46 2016 -0500

    runtime: free dead G stacks concurrently
    
    Currently we free cached stacks of dead Gs during STW stack root
    marking. We do this during STW because there's no way to take
    ownership of a particular dead G, so attempting to free a dead G's
    stack during concurrent stack root marking could race with reusing
    that G.
    
    However, we can do this concurrently if we take a completely different
    approach. One way to prevent reuse of a dead G is to remove it from
    the free G list. Hence, this adds a new fixed root marking task that
    simply removes all Gs from the list of dead Gs with cached stacks,
    frees their stacks, and then adds them to the list of dead Gs without
    cached stacks.
    
    This is also a necessary step toward rescanning only dirty stacks,
    since it eliminates another task from STW stack marking.
    
    Change-Id: Iefbad03078b284a2e7bf30fba397da4ca87fe095
    Reviewed-on: https://go-review.googlesource.com/20665
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1a2cf91f5e9e3dfb0873e61ed6907cc365857f6c
Author: Austin Clements <austin@google.com>
Date:   Fri Mar 11 16:27:51 2016 -0500

    runtime: split gfree list into with-stacks and without-stacks
    
    Currently all free Gs are added to one list. Split this into two
    lists: one for free Gs with cached stacks and one for Gs without
    cached stacks.
    
    This lets us preferentially allocate Gs that already have a stack, but
    more importantly, it sets us up to free cached G stacks concurrently.
    
    Change-Id: Idbe486f708997e1c9d166662995283f02d1eeb3c
    Reviewed-on: https://go-review.googlesource.com/20664
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3b0efa689ec7a32de30cbda2221452f57abb2532
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 26 14:09:58 2016 -0700

    cmd/compile: a rule's line number is at its ->
    
    Let's define the line number of a multiline rule as the line
    number on which the -> appears.  This helps make the rule
    cover analysis look a bit nicer.
    
    Change-Id: I4ac4c09f2240285976590ecfd416bc4c05e78946
    Reviewed-on: https://go-review.googlesource.com/22473
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 8d075beeef137455b9dc40f1c724b495f3ceda26
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 26 10:55:32 2016 -0700

    cmd/compile: lazily initialize litbuf
    
    Instead of eagerly creating strings like "literal 2.01" for every
    lexed number in case we need to mention it in an error message, defer
    this work to (*parser).syntax_error.
    
    name      old allocs/op  new allocs/op  delta
    Template      482k ± 0%      482k ± 0%  -0.12%   (p=0.000 n=9+10)
    GoTypes      1.35M ± 0%     1.35M ± 0%  -0.04%  (p=0.015 n=10+10)
    Compiler     5.45M ± 0%     5.44M ± 0%  -0.12%    (p=0.000 n=9+8)
    
    Change-Id: I333b3c80e583864914412fb38f8c0b7f1d8c8821
    Reviewed-on: https://go-review.googlesource.com/22480
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 19912e1d0a0739cd8a3214de994f7e9ecb656e1d
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 26 15:18:48 2016 -0700

    cmd/dist: sort entries in zcgo.go generated file for deterministic build
    
    This simplifies comparison of object files across different builds
    by ensuring that the strings in the zcgo.go always appear in the
    same order.
    
    Change-Id: I3639ea4fd10e0d645b838d1bbb03cd33deca340e
    Reviewed-on: https://go-review.googlesource.com/22478
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e607abbfd6e0550c13f4fa7b666d033eb9b14759
Author: Egon Elbre <egonelbre@gmail.com>
Date:   Tue Nov 17 16:51:23 2015 +0200

    unicode: improve SimpleFold performance for ascii
    
    This change significantly speeds up case-insensitive regexp matching.
    
    benchmark                      old ns/op      new ns/op      delta
    BenchmarkMatchEasy0i_32-8      2690           1473           -45.24%
    BenchmarkMatchEasy0i_1K-8      80404          42269          -47.43%
    BenchmarkMatchEasy0i_32K-8     3272187        2076118        -36.55%
    BenchmarkMatchEasy0i_1M-8      104805990      66503805       -36.55%
    BenchmarkMatchEasy0i_32M-8     3360192200     2126121600     -36.73%
    
    benchmark                      old MB/s     new MB/s     speedup
    BenchmarkMatchEasy0i_32-8      11.90        21.72        1.83x
    BenchmarkMatchEasy0i_1K-8      12.74        24.23        1.90x
    BenchmarkMatchEasy0i_32K-8     10.01        15.78        1.58x
    BenchmarkMatchEasy0i_1M-8      10.00        15.77        1.58x
    BenchmarkMatchEasy0i_32M-8     9.99         15.78        1.58x
    
    Issue #13288
    
    Change-Id: I94af7bb29e75d60b4f6ee760124867ab271b9642
    Reviewed-on: https://go-review.googlesource.com/16943
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6e4a8615f652a2020471622354be6d890404020c
Author: Alan Donovan <adonovan@google.com>
Date:   Mon Apr 25 18:31:36 2016 -0400

    gc: use AbsFileLine for deterministic binary export data
    
    This version of the file name honors the -trimprefix flag,
    which strips off variable parts like $WORK or $PWD.
    The TestCgoConsistentResults test now passes.
    
    Change-Id: If93980b054f9b13582dd314f9d082c26eaac4f41
    Reviewed-on: https://go-review.googlesource.com/22444
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 17db07f9b5034f22851f32f7700649ac61c44e8f
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 26 14:11:38 2016 -0700

    cmd/compile: don't discard inlineable but empty functions with binary export format
    
    Change-Id: I0f016fa000f949d27847d645b4cdebe68a8abf20
    Reviewed-on: https://go-review.googlesource.com/22474
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3a72d626a8bae104c658f361d97f992f609d91e7
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Apr 26 21:37:49 2016 +1200

    cmd/link: pass -no-pie (if supported) when creating a race-enabled executable.
    
    Fixes #15443
    
    Change-Id: Ia3593104fc1a4255926ae5675c25390604b44b7b
    Reviewed-on: https://go-review.googlesource.com/22453
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 55154cf0b27e3c48e7cf7654c890868a95e7eed6
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Apr 13 13:34:41 2016 -0400

    cmd/link: fix gdb backtrace on architectures using a link register
    
    Also adds TestGdbBacktrace to the runtime package.
    
    Dwarf modifications written by Bryan Chan (@bryanpkc) who is also
    at IBM and covered by the same CLA.
    
    Fixes #14628
    
    Change-Id: I106a1f704c3745a31f29cdadb0032e3905829850
    Reviewed-on: https://go-review.googlesource.com/20193
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 01d5e63faa7cbfe10c6c45a788cd9859da2dfcdb
Author: Russ Cox <rsc@golang.org>
Date:   Tue Apr 26 13:18:14 2016 -0400

    cmd/compile/internal/gc: rewrite comment to avoid automated meaning
    
    The comment says 'DΟ NΟT SUBMIT', and that text being in a file can cause
    automated errors or warnings when trying to check the Go sources into other
    source control systems.
    
    (We reject that string in CL commit messages, which I've avoided here
    by changing the O's to Ο's above.)
    
    Change-Id: I6cdd57a8612ded5208f05a8bd6b137f44424a030
    Reviewed-on: https://go-review.googlesource.com/22434
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit e4355aeedfdd6a68185c4551c889eb13823cd86d
Author: Keith Randall <khr@golang.org>
Date:   Wed Apr 20 11:17:41 2016 -0700

    cmd/compile: more sanity checks on rewrite rules
    
    Make sure ops have the right number of args, set
    aux and auxint only if allowed, etc.
    
    Normalize error reporting format.
    
    Change-Id: Ie545fcc5990c8c7d62d40d9a0a55885f941eb645
    Reviewed-on: https://go-review.googlesource.com/22320
    Reviewed-by: David Chase <drchase@google.com>

commit 24a297286a3032223c432a830a53ebf102e08de4
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Apr 25 16:17:42 2016 -0400

    crypto/sha512: add s390x assembly implementation
    
    Renames block to blockGeneric so that it can be called when the
    assembly feature check fails. This means making block a var on
    platforms without an assembly implementation (similar to the sha1
    package).
    
    Also adds a test to check that the fallback path works correctly
    when the feature check fails.
    
    name        old speed      new speed       delta
    Hash8Bytes  7.13MB/s ± 2%  19.89MB/s ± 1%  +178.82%   (p=0.000 n=9+10)
    Hash1K       121MB/s ± 1%    661MB/s ± 1%  +444.54%   (p=0.000 n=10+9)
    Hash8K       137MB/s ± 0%    918MB/s ± 1%  +569.29%  (p=0.000 n=10+10)
    
    Change-Id: Id65dd6e943f14eeffe39a904dc88065fc6a60179
    Reviewed-on: https://go-review.googlesource.com/22402
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 98b99d561225cc1d140360b217df2acc9aa1f746
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Apr 25 13:09:11 2016 -0700

    net: ignore lame referral responses like libresolv
    
    Fixes #15434.
    
    Change-Id: Ia88b740df5418a6d3af1c29a03756f4234f388b0
    Reviewed-on: https://go-review.googlesource.com/22428
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 96b8f70e22e103c11fbb89ba6df9d229d24cdbc2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Apr 26 10:53:25 2016 -0400

    cmd/link: correctly decode name length
    
    The linker was incorrectly decoding type name lengths, causing
    typelinks to be sorted out of order and in cases where the name was
    the exact right length, linker panics.
    
    Added a test to the reflect package that causes TestTypelinksSorted
    to fail before this CL. It's not the exact failure seen in #15448
    but it has the same cause: decodetype_name calculating the wrong
    length.
    
    The equivalent decoders in reflect/type.go and runtime/type.go
    have the parenthesis in the right place.
    
    Fixes #15448
    
    Change-Id: I33257633d812b7d2091393cb9d6cc8a73e0138c8
    Reviewed-on: https://go-review.googlesource.com/22403
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0b6332eb54767f916926ae39516ddaed87b26edb
Author: David Chase <drchase@google.com>
Date:   Mon Apr 25 16:24:11 2016 -0400

    cmd/compile: fix another bug in dominator computation
    
    Here, "fix" means "replace".  The new dominator computation
    is the "simple" algorithm from Lengauer and Tarjan's TOPLAS
    paper, with minimal changes.
    
    Also included is a test that tweaks the fixed error.
    
    Change-Id: I0abdf53d5d64df1e67e4e62f55e88957045cd63b
    Reviewed-on: https://go-review.googlesource.com/22401
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6b02a1924725688b4d264065454ac5287fbed535
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Thu Apr 21 18:24:12 2016 +0300

    strings: use SSE4.2 in strings.Index on AMD64
    
    Use PCMPESTRI instruction if available.
    
    Index-4              21.1ns ± 0%  21.1ns ± 0%     ~     (all samples are equal)
    IndexHard1-4          395µs ± 0%   105µs ± 0%  -73.53%        (p=0.000 n=19+20)
    IndexHard2-4          300µs ± 0%   147µs ± 0%  -51.11%        (p=0.000 n=19+20)
    IndexHard3-4          665µs ± 0%   665µs ± 0%     ~           (p=0.942 n=16+19)
    
    Change-Id: I4f66794164740a2b939eb1c78934e2390b489064
    Reviewed-on: https://go-review.googlesource.com/22337
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d78c84c419b0ecdd70e85aad22951798c1707f50
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Apr 25 15:59:42 2016 -0700

    cmd/compile: sort import strings for canonical obj files
    
    This is not necessary for reproduceability but it removes
    differences due to imported package order between compiles
    using textual vs binary export format. The packages list
    tends to be very short, so it's ok doing it always for now.
    
    Guarded with a documented (const) flag so it's trivial to
    disable and remove eventually.
    
    Also, use the same flag now to enforce parameter numbering.
    
    Change-Id: Ie05d2490df770239696ecbecc07532ed62ccd5c0
    Reviewed-on: https://go-review.googlesource.com/22445
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 9cb79e9536a2f7977f9139a808f912d216094ecc
Author: Keith Randall <khr@golang.org>
Date:   Mon Apr 25 14:12:26 2016 -0700

    runtime: arm5, fix large-offset floating-point stores
    
    The code sequence for large-offset floating-point stores
    includes adding the base pointer to r11.  Make sure we
    can interpret that instruction correctly.
    
    Fixes build.
    
    Fixes #15440
    
    Change-Id: I7fe5a4a57e08682967052bf77c54e0ec47fcb53e
    Reviewed-on: https://go-review.googlesource.com/22440
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 0b8c0767d0b95066734647edeb5a252c270a4a1a
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Apr 25 14:39:51 2016 -0700

    cmd/compile: for now, keep parameter numbering in binary export format
    
    The numbering is only required for parameters of functions/methods
    with exported inlineable bodies. For now, always export parameter names
    with internal numbering to minimize the diffs between assembly code
    dumps of code compiled with the textual vs the binary format.
    
    To be disabled again once the new export format is default.
    
    Change-Id: I6d14c564e734cc5596c7e995d8851e06d5a35013
    Reviewed-on: https://go-review.googlesource.com/22441
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e48a2958d1cfa4ae75dead9d8e65489b53c70f14
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Apr 25 13:24:48 2016 -0700

    cmd/compile: treat empty and absent struct field tags as identical
    
    Fixes #15439.
    
    Change-Id: I5a32384c46e20f8db6968e5a9e854c45ab262fe4
    Reviewed-on: https://go-review.googlesource.com/22429
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6f3f02f80d23d3bbc2857be147341517d1762fbd
Author: Keith Randall <khr@golang.org>
Date:   Sun Apr 24 17:04:32 2016 -0700

    runtime: zero tmpbuf between len and cap
    
    Zero the entire buffer so we don't need to
    lower its capacity upon return.  This lets callers
    do some appending without allocation.
    
    Zeroing is cheap, the byte buffer requires only
    4 extra instructions.
    
    Fixes #14235
    
    Change-Id: I970d7badcef047dafac75ac17130030181f18fe2
    Reviewed-on: https://go-review.googlesource.com/22424
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8b92397bcdcd5d6de3f72951a5514933fee32eb2
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Sun Apr 24 21:21:07 2016 +0200

    cmd/compile: introduce bool operations.
    
    Introduce OrB, EqB, NeqB, AndB to handle bool operations.
    
    Change-Id: I53e4d5125a8090d5eeb4576db619103f19fff58d
    Reviewed-on: https://go-review.googlesource.com/22412
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0436a89a2c5afad41356dc1dff7c745cd30636a7
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Apr 22 16:35:29 2016 -0700

    spec: be more explicit about equivalence of empty string and absent field tags
    
    Note that the spec already makes that point with a comment in the very first
    example for struct field tags. This change is simply stating this explicitly
    in the actual spec prose.
    
    - gccgo and go/types already follow this rule
    - the current reflect package API doesn't distinguish between absent tags
      and empty tags (i.e., there is no discoverable difference)
    
    Fixes #15412.
    
    Change-Id: I92f9c283064137b4c8651630cee0343720717a02
    Reviewed-on: https://go-review.googlesource.com/22391
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 9dcbc43f4f299b8ea6546a464d9fdeb5839b5ae9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Apr 25 10:55:22 2016 -0700

    test: add test for issue 15084
    
    The underlying issues have been fixed.
    All the individual fixes have their own tests,
    but it's still useful to have a plain source test.
    
    Fixes #15084
    
    Change-Id: I06c485a7d0716201bd57d1f3be53668dddd7ec14
    Reviewed-on: https://go-review.googlesource.com/22426
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit f12bd8a5a8f8485f13793f03d4803a924923badb
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Apr 21 11:55:33 2016 -0700

    cmd/compile: encapsulate OSLICE* representation
    
    As a nice side-effect, this allows us to
    unify several code paths.
    
    The terminology (low, high, max, simple slice expr,
    full slice expr) is taken from the spec and
    the examples in the spec.
    
    This is a trial run. The plan, probably for Go 1.8,
    is to change slice expressions to use Node.List
    instead of OKEY, and to do some similar
    tree structure changes for other ops.
    
    Passes toolstash -cmp. No performance change.
    all.bash passes with GO_GCFLAGS=-newexport.
    
    Updates #15350
    
    Change-Id: Ic1efdc36e79cdb95ae1636e9817a3ac8f83ab1ac
    Reviewed-on: https://go-review.googlesource.com/22425
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 2bf7034d87c051ff3d3fcce9f62d7ef2d2f4108d
Author: Russ Cox <rsc@golang.org>
Date:   Mon Apr 25 10:48:45 2016 -0400

    cmd/go: disable failing TestGoGetInsecure
    
    Update #15410
    
    Change-Id: Iad3f2639aa7a67b11efc35a629e1893f7d87b957
    Reviewed-on: https://go-review.googlesource.com/22430
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 093ac15a14137b4a9454442ae9fea282e5c09180
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Sun Apr 24 15:09:00 2016 +1000

    debug/pe: better error messages
    
    Updates #15345
    
    Change-Id: Iae35d3e378cbc8157ba1ff91e4971ed4515a5e5c
    Reviewed-on: https://go-review.googlesource.com/22394
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 758431fe8c2906690a209e33531d8b95e381c8c1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Apr 24 14:09:03 2016 -0700

    cmd/compile: minor cleanup in inl
    
    * Make budget an int32 to avoid needless conversions.
    * Introduce some temporary variables to reduce repetition.
    * If ... args are present, they will be the last argument
      to the function. No need to scan all arguments.
    
    Passes toolstash -cmp.
    
    Change-Id: I55203609f5d2f25a4e238cd48c63214651120cfc
    Reviewed-on: https://go-review.googlesource.com/22421
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1da62afeef1fdfb822afc4af0feb2eece10d8c7d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Apr 24 13:50:26 2016 -0700

    cmd/compile: replace len(Nodes.Slice()) with Nodes.Len()
    
    Generated with eg:
    
    func before(n gc.Nodes) int { return len(n.Slice()) }
    func after(n gc.Nodes) int  { return n.Len() }
    
    Change-Id: Ifdf01915e60069166afe96aa7b1d08720bf62fc5
    Reviewed-on: https://go-review.googlesource.com/22420
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3de87bc4d92d58446d5072d416a29366b83135c1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Apr 24 13:31:55 2016 -0700

    test: add test that required algs get generated
    
    This is a follow-up to CLs 19769 and 19770.
    
    Change-Id: Ia9b71055613b80df4ce62b34fcc4f479f04f72fd
    Reviewed-on: https://go-review.googlesource.com/22399
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit fca0f331c8b99d476c871d8718e296b32ad24073
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Apr 22 08:39:56 2016 -0700

    cmd/compile: use gc.Etype's String method
    
    Passes toolstash -cmp.
    
    Change-Id: I42c962cc5a3ffec2969f223cf238c2fdadbf5857
    Reviewed-on: https://go-review.googlesource.com/22381
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f027241445f3064b41f5d5e68f86370d37bad0be
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Apr 22 07:14:10 2016 -0700

    cmd/compile: give gc.Op a String method, use it
    
    Passes toolstash -cmp.
    
    Change-Id: I915e76374fd64aa2597e6fa47e4fa95ca00ca643
    Reviewed-on: https://go-review.googlesource.com/22380
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit a6abc1cd70bf561d1e4c10d53499733c502c30b5
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 4 15:01:03 2015 -0700

    cmd/compile: don't generate algs for map buckets
    
    Note that this is only safe because
    the compiler generates multiple distinct
    gc.Types. If we switch to having canonical
    gc.Types, then this will need to be updated
    to handle the case in which the user uses both
    map[T]S and also map[[8]T]S. In that case,
    the runtime needs algs for [8]T, but this could
    mark the sole [8]T type as Noalg. This is a general
    problem with having a single bool to represent
    whether alg generation is needed for a type.
    
    Cuts 5k off cmd/go and 22k off golang.org/x/tools/cmd/godoc,
    approx 0.04% and 0.12% respectively.
    
    For #6853 and #9930
    
    Change-Id: I30a15ec72ecb62e2aa053260a7f0f75015fc0ade
    Reviewed-on: https://go-review.googlesource.com/19769
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b6b144bf97744ead3ac51fd1b5648d2e31a8de0e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 4 15:01:29 2015 -0700

    cmd/compile: don't generate algs for ... args
    
    Note that this is only safe because
    the compiler generates multiple distinct
    gc.Types. If we switch to having canonical
    gc.Types, then this will need to be updated
    to handle the case in which the user uses both
    map[[n]T]S and also calls a function f(...T) with n arguments.
    In that case, the runtime needs algs for [n]T, but this could
    mark the sole [n]T type as Noalg. This is a general
    problem with having a single bool to represent
    whether alg generation is needed for a type.
    
    Cuts 17k off cmd/go and 13k off golang.org/x/tools/cmd/godoc,
    approx 0.14% and 0.07% respectively.
    
    For #6853 and #9930
    
    Change-Id: Iccb6b9fd88ade5497d7090528a903816d340bf0a
    Reviewed-on: https://go-review.googlesource.com/19770
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 934c3599648ae841668ec753881134347fc28c29
Author: Keith Randall <khr@golang.org>
Date:   Sat Apr 23 22:59:01 2016 -0700

    cmd/compile: reorder how slicelit initializes a slice
    
      func f(x, y, z *int) {
        a := []*int{x,y,z}
        ...
      }
    
    We used to use:
      var tmp [3]*int
      a := tmp[:]
      a[0] = x
      a[1] = y
      a[2] = z
    
    Now we do:
      var tmp [3]*int
      tmp[0] = x
      tmp[1] = y
      tmp[2] = z
      a := tmp[:]
    
    Doesn't sound like a big deal, but the compiler has trouble
    eliminating write barriers when using the former method because it
    doesn't know that the slice points to the stack.  In the latter
    method, the compiler knows the array is on the stack and as a result
    doesn't emit any write barriers.
    
    This turns out to be extremely common when building ... args, like
    for calls fmt.Printf.
    
    Makes go binaries ~1% smaller.
    
    Doesn't have a measurable effect on the go1 fmt benchmarks,
    unfortunately.
    
    Fixes #14263
    Update #6853
    
    Change-Id: I9074a2788ec9e561a75f3b71c119b69f304d6ba2
    Reviewed-on: https://go-review.googlesource.com/22395
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit c4c182140adedf300800778127840e3b8b9f7423
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Sat Apr 23 21:18:34 2016 +0200

    internal/trace: fix event ordering for coarse timestamps
    
    Arm arch uses coarse-grained kernel timer as cputicks.
    As the result sort.Sort smashes trace entirely. Use sort.Stable instead.
    
    Change-Id: Idfa017a86a489be58cf239f7fe56d7f4b66b52a9
    Reviewed-on: https://go-review.googlesource.com/22317
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 75b844f0d228bda5dea2aabae096909f81355bac
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Thu Apr 7 15:48:15 2016 +0200

    runtime/trace: test detection of broken timestamps
    
    On some processors cputicks (used to generate trace timestamps)
    produce non-monotonic timestamps. It is important that the parser
    distinguishes logically inconsistent traces (e.g. missing, excessive
    or misordered events) from broken timestamps. The former is a bug
    in tracer, the latter is a machine issue.
    
    Test that (1) parser does not return a logical error in case of
    broken timestamps and (2) broken timestamps are eventually detected
    and reported.
    
    Change-Id: Ib4b1eb43ce128b268e754400ed8b5e8def04bd78
    Reviewed-on: https://go-review.googlesource.com/21608
    Reviewed-by: Austin Clements <austin@google.com>

commit 687fe991e42f15fe1f491680c615ef96568f780a
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu Apr 21 16:51:36 2016 +1000

    debug/pe: introduce File.COFFSymbols and (*COFFSymbol).FullName
    
    Reloc.SymbolTableIndex is an index into symbol table. But
    Reloc.SymbolTableIndex cannot be used as index into File.Symbols,
    because File.Symbols slice has Aux lines removed as it is built.
    
    We cannot change the way File.Symbols works, so I propose we
    introduce new File.COFFSymbols that does not have that limitation.
    
    Also unlike File.Symbols, File.COFFSymbols will consist of
    COFFSymbol. COFFSymbol matches PE COFF specification exactly,
    and it is simpler to use.
    
    Updates #15345
    
    Change-Id: Icbc265853a472529cd6d64a76427b27e5459e373
    Reviewed-on: https://go-review.googlesource.com/22336
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d224e98d9ac969e733f5578dce3e1831c5c84f45
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Apr 22 18:49:59 2016 -0700

    cmd/link: add -dumpdep flag to dump linker dependency graph
    
    This is what led to https://golang.org/cl/20763 and
    https://golang.org/cl/20765 to shrink binary sizes.
    
    Change-Id: Id360d474e6153cfe32a525b0a720810fd113195b
    Reviewed-on: https://go-review.googlesource.com/22392
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 9e3c68f1e02021a845c452ae347d06332e4ed79d
Author: Keith Randall <khr@golang.org>
Date:   Fri Apr 22 13:09:18 2016 -0700

    cmd/compile: get rid of most byte and word insns for amd64
    
    Now that we're using 32-bit ops for 8/16-bit logical operations
    (to avoid partial register stalls), there's really no need to
    keep track of the 8/16-bit ops at all.  Convert everything we
    can to 32-bit ops.
    
    This CL is the obvious stuff.  I might think a bit more about
    whether we can get rid of weirder stuff like HMULWU.
    
    The only downside to this CL is that we lose some information
    about constants.  If we had source like:
      var a byte = ...
      a += 128
      a += 128
    We will convert that to a += 256, when we could get rid of the
    add altogether.  This seems like a fairly unusual scenario and
    I'm happy with forgoing that optimization.
    
    Change-Id: Ia7c1e5203d0d110807da69ed646535194a3efba1
    Reviewed-on: https://go-review.googlesource.com/22382
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 217c284995400bb761e5718782c8a90748c75aef
Author: Keith Randall <khr@golang.org>
Date:   Wed Apr 20 15:02:48 2016 -0700

    cmd/compile: combine stores into larger widths
    
    Combine stores into larger widths when it is safe to do so.
    
    Add clobber() function so stray dead uses do not impede the
    above rewrites.
    
    Fix bug in loads where all intermediate values depending on
    a small load (not just the load itself) must have no other uses.
    We really need the small load to be dead after the rewrite..
    
    Fixes #14267
    
    Change-Id: Ib25666cb19777f65082c76238fba51a76beb5d74
    Reviewed-on: https://go-review.googlesource.com/22326
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit a3703618eadeb74b60f2cb9a23fabe178d4b141d
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Tue Apr 5 15:29:14 2016 +0200

    runtime: use per-goroutine sequence numbers in tracer
    
    Currently tracer uses global sequencer and it introduces
    significant slowdown on parallel machines (up to 10x).
    Replace the global sequencer with per-goroutine sequencer.
    
    If we assign per-goroutine sequence numbers to only 3 types
    of events (start, unblock and syscall exit), it is enough to
    restore consistent partial ordering of all events. Even these
    events don't need sequence numbers all the time (if goroutine
    starts on the same P where it was unblocked, then start does
    not need sequence number).
    The burden of restoring the order is put on trace parser.
    Details of the algorithm are described in the comments.
    
    On http benchmark with GOMAXPROCS=48:
    no tracing: 5026 ns/op
    tracing: 27803 ns/op (+453%)
    with this change: 6369 ns/op (+26%, mostly for traceback)
    
    Also trace size is reduced by ~22%. Average event size before: 4.63
    bytes/event, after: 3.62 bytes/event.
    
    Besides running trace tests, I've also tested with manually broken
    cputicks (random skew for each event, per-P skew and episodic random skew).
    In all cases broken timestamps were detected and no test failures.
    
    Change-Id: I078bde421ccc386a66f6c2051ab207bcd5613efa
    Reviewed-on: https://go-review.googlesource.com/21512
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ba966f5d891191450f286859c35bf8a7fa49cde2
Author: Francesc Campoy <campoy@golang.org>
Date:   Fri Apr 22 16:27:34 2016 -0700

    doc: mention security from contribution guidelines
    
    Fixes #15413
    
    Change-Id: I837a391276eed565cf66d3715ec68b7b959ce143
    Reviewed-on: https://go-review.googlesource.com/22390
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit f058ab09fb14afe3a51b880a6895b96aa3e07c85
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 22 15:45:24 2016 -0700

    cmd/compile: remove redundant "// fallthrough" comments
    
    Change-Id: Ia3f262f06592b66447c213e2350402cd5e6e2ccd
    Reviewed-on: https://go-review.googlesource.com/22389
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 889c0a66fc7a43b23cc02ee42cfa17d221fce3c4
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Apr 22 14:50:20 2016 -0700

    cmd/compile: don't export pos info in new export format for now
    
    Exporting filenames as part of the position information can lead
    to different object files which breaks tests.
    
    Change-Id: Ia678ab64293ebf04bf83601e6ba72919d05762a4
    Reviewed-on: https://go-review.googlesource.com/22385
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit f7d19672f273ecb600d0b0db32990d1a6462a898
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Apr 22 22:15:17 2016 +0000

    api: update next.txt
    
    Change-Id: I12d5e5d0e74b354f26898bab4ea30eb27ac45cd7
    Reviewed-on: https://go-review.googlesource.com/22387
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3564ec52cda2a3c83aaf41159b26369ca4e7ecee
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Apr 22 22:13:50 2016 +0000

    cmd/api: ignore vendored packages
    
    Fixes #15404
    
    Change-Id: I16f2a34a1e4c3457053a1fc2141f21747cfb22b4
    Reviewed-on: https://go-review.googlesource.com/22386
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 3411d6321979b33291e3b4c6fe79d4dd41bd5fba
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 15 19:19:58 2016 -0700

    net: keep waiting for valid DNS response until timeout
    
    Prevents denial of service attacks from bogus UDP packets.
    
    Fixes #13281.
    
    Change-Id: Ifb51b17a1b0807bfd27b144d6037431701184e7b
    Reviewed-on: https://go-review.googlesource.com/22126
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9f1ccd647fcdb1b703c1042c90434e15aff75013
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Fri Apr 22 00:47:04 2016 +0530

    net/url: validate ports in IPv4 addresses
    
    Fixes #14860
    
    Change-Id: Id55ad942d45a104d560a879d6e8e1aa09671789b
    Reviewed-on: https://go-review.googlesource.com/22351
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ab52ad894f453a02153fb2bc106d08c47ba643b6
Author: Caleb Spare <cespare@gmail.com>
Date:   Sat Apr 9 21:18:22 2016 -0700

    encoding/json: add Encoder.DisableHTMLEscaping
    
    This provides a way to disable the escaping of <, >, and & in JSON
    strings.
    
    Fixes #14749.
    
    Change-Id: I1afeb0244455fc8b06c6cce920444532f229555b
    Reviewed-on: https://go-review.googlesource.com/21796
    Run-TryBot: Caleb Spare <cespare@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 97360096e5e9fdea06be8c97f32bd83741f68adb
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 22 12:27:29 2016 -0700

    cmd/compile: replace Ctype switches with type switches
    
    Instead of switching on Ctype (which internally uses a type switch)
    and then scattering lots of type assertions throughout the CTFOO case
    clauses, just use type switches directly on the underlying constant
    value.
    
    Passes toolstash/buildall.
    
    Change-Id: I9bc172cc67e5f391cddc15539907883b4010689e
    Reviewed-on: https://go-review.googlesource.com/22384
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2d342fba78d9cbddb4c8c71bfc0d1044b2e5c58a
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Apr 22 22:48:11 2016 +0200

    runtime: fix description of trace events
    
    Change-Id: I037101b1921fe151695d32e9874b50dd64982298
    Reviewed-on: https://go-review.googlesource.com/22314
    Reviewed-by: Austin Clements <austin@google.com>

commit e05b9746ddc6e53864d1ab26fc172b09ccbe321c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 21 20:58:35 2016 -0700

    cmd/compile: map TSLICE to obj.KindSlice directly
    
    Change-Id: Idab5f603c1743895b8f4edbcc55f7be83419a099
    Reviewed-on: https://go-review.googlesource.com/22383
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit eee20b7244586da70b2bca6fe6346da7dac6be78
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Apr 22 10:17:06 2016 -0700

    cmd/dist: skip misc/cgo/test with internal linking on ppc64le
    
    CL 22372 changed ppc64le to use normal cgo initialization on ppc64le.
    Doing this uncovered a cmd/link error using internal linking.
    Opened issue 15409 for the problem.  This CL disables the test.
    
    Update #15409.
    
    Change-Id: Ia1bb6b874c1b5a4df1a0436c8841c145142c30f7
    Reviewed-on: https://go-review.googlesource.com/22379
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f71a13da93b6ec2da88e2568deacdb6ef002b36c
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Tue Apr 12 20:50:59 2016 +0200

    cmd/trace: generate new pprof profiles
    
    Generate new protobuf pprof profiles with embed symbol info.
    This makes program binary unnecessary.
    
    Change-Id: Ie628439c13c5e34199782031138102c83ea50621
    Reviewed-on: https://go-review.googlesource.com/21873
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>

commit d32229b3b1edd3d3b1e2dbb61bd6ae7cd8400d56
Author: David Chase <drchase@google.com>
Date:   Fri Apr 22 12:15:08 2016 -0400

    cmd/compile: in a Tarjan algorithm, DFS should really be DFS
    
    Replaced incorrect recursion-free rendering of DFS with
    something that was correct.  Enhanced test with all
    permutations of IF successors to ensure that all possible
    DFS traversals are exercised.
    
    Test is improved version of
    https://go-review.googlesource.com/#/c/22334
    
    Update 15084.
    
    Change-Id: I6e944c41244e47fe5f568dfc2b360ff93b94079e
    Reviewed-on: https://go-review.googlesource.com/22347
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>

commit babd5da61fbaa7a1b3a5413c3c8947d71fa1001d
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Apr 21 08:00:07 2016 -0400

    crypto/aes: use asm for BenchmarkExpand on amd64
    
    This reverses the change to this benchmark made in 9b6bf20.
    
    Change-Id: I79ab88286c3028d3be561957140375bbc413e7ab
    Reviewed-on: https://go-review.googlesource.com/22340
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 5833d843de4d774f6b76e982b170f42b8e94a198
Author: Chris Zou <chriszou@ca.ibm.com>
Date:   Mon Apr 18 19:30:17 2016 -0400

    hash/crc32: use vector instructions on s390x
    
    The input buffer is aligned to a doubleword boundary to
    improve performance of the vector instructions. The pure
    Go implementation is used to align the input data, and is
    also used when the vector instructions are not available
    or the data length is less than 64 bytes.
    
    Change-Id: Ie259a5f2f1562bcc17961c99e5776c99091d6bed
    Reviewed-on: https://go-review.googlesource.com/22201
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7879e9193b39e6455ae03f2baace9c41f6393ee4
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Thu Apr 21 10:11:33 2016 +0200

    cmd/compile: reenable phielim during rewrite
    
    Remove the "optimization" that was causing the issue.
    
    For the following code the "optimization" was
    converting v to (OpCopy x) which is wrong because
    x doesn't dominate v.
    
    b1:
        y = ...
        First .. b3
    b2:
       x = ...
       Goto b3
    b3:
       v = phi x y
       ... use v ...
    
    That "optimization" is likely no longer needed because
    we now have a second opt pass with a dce in between
    which removes blocks of type First.
    
    For pkg/tools/linux_amd64/* the binary size drops
    from 82142886 to 82060034.
    
    Change-Id: I10428abbd8b32c5ca66fec3da2e6f3686dddbe31
    Reviewed-on: https://go-review.googlesource.com/22312
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit caef4496fcdaca8dc5b86f60b07760e5434ca1f3
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Apr 22 12:44:31 2016 +0200

    cmd/compile: convert some Phis into And8.
    
    See discussion at [1]. True value must have a fixed non-zero
    representation meaning that a && b can be implemented as a & b.
    
    [1] https://groups.google.com/forum/#!topic/golang-dev/xV0vPuFP9Vg
    
    This change helps with m := a && b, but it's more common to see
    if a && b { do something } which is not handled.
    
    Change-Id: Ib6f9ff898a0a8c05d12466e2464e4fe781035394
    Reviewed-on: https://go-review.googlesource.com/22313
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3c1a4c1902711c16489ed0c3506df97439ffbd85
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 19 21:06:53 2016 -0700

    cmd/compile: don't nilcheck newobject and return values from mapaccess{1,2}
    
    They are guaranteed to be non-nil, no point in inserting
    nil checks for them.
    
    Fixes #15390
    
    Change-Id: I3b9a0f2319affc2139dcc446d0a56c6785ae5a86
    Reviewed-on: https://go-review.googlesource.com/22291
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 32302d6289e9721015d5d7ac99bbce30de47746c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Apr 22 07:08:13 2016 -0700

    runtime/cgo: use normal libinit on PPC GNU/Linux
    
    The special case was because PPC did not support external linking, but
    now it does.
    
    Fixes #10410.
    
    Change-Id: I9b024686e0f03da7a44c1c59b41c529802f16ab0
    Reviewed-on: https://go-review.googlesource.com/22372
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c165988360457553ccbfa4a09919de3262a4438a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Apr 7 21:37:45 2016 -0400

    cmd/compile, etc: use nameOff in uncommonType
    
    linux/amd64 PIE:
            cmd/go:  -62KB (0.5%)
            jujud:  -550KB (0.7%)
    
    For #6853.
    
    Change-Id: Ieb67982abce5832e24b997506f0ae7108f747108
    Reviewed-on: https://go-review.googlesource.com/22371
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1492e7db059ea7903110b0725d5ced3134558e73
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Apr 7 16:29:16 2016 -0400

    cmd/compile, etc: use nameOff for rtype string
    
    linux/amd64:
            cmd/go:   -8KB (basically nothing)
    
    linux/amd64 PIE:
            cmd/go: -191KB (1.6%)
            jujud:  -1.5MB (1.9%)
    
    Updates #6853
    Fixes #15064
    
    Change-Id: I0adbb95685e28be92e8548741df0e11daa0a9b5f
    Reviewed-on: https://go-review.googlesource.com/21777
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit bb52ceafea60dc4688b6c6b71f241752ce597db8
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Apr 7 20:07:09 2016 -0400

    cmd/link: do not align type name data
    
    Now that reflect.name objects contain an offset to pkgPath instead of a
    pointer, there is no need to align the symbol data.
    
    Removes approx. 10KB from the cmd/go binary. The effect becomes more
    important later as more type data is moved into name objects.
    
    For #6853
    
    Change-Id: Idb507fdbdad04f16fc224378f82272cb5c236ab7
    Reviewed-on: https://go-review.googlesource.com/21776
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 63ceeafa308b99e6b7d5480521b83360b4f6b2fd
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Apr 18 17:41:50 2016 -0400

    crypto/sha1: add s390x assembly implementation
    
    Use the compute intermediate message digest (KIMD) instruction
    when possible. Adds test to check fallback code path in case
    KIMD is not available.
    
    Benchmark changes:
    Hash8Bytes  3.4x
    Hash1K      9.3x
    Hash8K      10.9x
    
    Change-Id: Ibcd71a886dfd7b3822042235b4f4eaa7a148036b
    Reviewed-on: https://go-review.googlesource.com/22350
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7085fb31dfb1a6b447a139064a4a692677284132
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Apr 11 11:14:53 2016 +1000

    html/template, text/template: clarify Parse{Files,Glob} semantics
    
    Document the subtle property that files with equivalent base names
    will overwrite extant templates with those same names.
    
    Fixes golang/go#14320
    
    Change-Id: Ie9ace1b08e6896ea599836e31582123169aa7a25
    Reviewed-on: https://go-review.googlesource.com/21824
    Reviewed-by: Rob Pike <r@golang.org>

commit b563fcfabba559646b42b0ff2066fc98042d8a8a
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Apr 18 13:25:51 2016 +1000

    cmd/go: write test file to temporary directory
    
    Before this change, a go-vendor-issue-14613 file would be left in the
    working directory after tests run.
    
    Change-Id: If1858421bb287215ab4a19163f489131b2e8912c
    Reviewed-on: https://go-review.googlesource.com/22169
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 8082828ed0b07225c50a991dbe2a176346fba3b8
Author: Rob Pike <r@golang.org>
Date:   Thu Apr 21 12:43:22 2016 -0700

    encoding/gob: document compatibility
    
    Fixes #13808.
    
    Change-Id: Ifbd5644da995a812438a405485c9e08b4503a313
    Reviewed-on: https://go-review.googlesource.com/22352
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 70184087239482331a9e4a66627e4458ffe48933
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Apr 21 15:55:50 2016 -0700

    flag: update test case (fix build)
    
    Change-Id: I2275dc703be4fda3feedf76483148eab853b43b8
    Reviewed-on: https://go-review.googlesource.com/22360
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 25d95ee918b4b1315cb2fee0fc625d24cd408240
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Apr 22 10:10:08 2016 +1200

    cmd/link: convert Link.Filesyms into a slice
    
    Change-Id: I6490de325b0f4ba962c679503102d30d41dcc384
    Reviewed-on: https://go-review.googlesource.com/22359
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4b175fd23b3bf220e4121ba4986f2d7af1415482
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Apr 22 09:38:41 2016 +1200

    cmd/link: fix Codeblk printing when -a to use Textp as a slice
    
    Does anyone actually pass -a to the linker?
    
    Change-Id: I1d31ea66aa5604b7fd42adf15bdab71e9f52d0ed
    Reviewed-on: https://go-review.googlesource.com/22356
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 0ef041cfa5d51d86c25b039d7ae8aef8a92c085e
Author: Rob Pike <r@golang.org>
Date:   Thu Apr 21 15:09:49 2016 -0700

    doc/go1.7.txt: 0s for zero duration, go doc groups constructors with types
    
    Change-Id: I4fc35649ff5a3510f5667b62e7e84e113e95dffe
    Reviewed-on: https://go-review.googlesource.com/22358
    Reviewed-by: Rob Pike <r@golang.org>

commit 9c4295b574a89bf02294111f811f90ab06b9951b
Author: Rob Pike <r@golang.org>
Date:   Thu Apr 21 14:53:19 2016 -0700

    time: print zero duration as 0s, not 0
    
    There should be a unit, and s is the SI unit name, so use that.
    The other obvious possibility is ns (nanosecond), but the fact
    that durations are measured in nanoseconds is an internal detail.
    
    Fixes #14058.
    
    Change-Id: Id1f8f3c77088224d9f7cd643778713d5cc3be5d9
    Reviewed-on: https://go-review.googlesource.com/22357
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit a33e9cf7ead3d7853546a71796a6c404d02cb474
Author: Rob Pike <r@golang.org>
Date:   Thu Apr 21 13:29:07 2016 -0700

    cmd/doc: group constructors with type in package presentation
    
    Fixes #14004.
    
    $ go doc encoding.gob
    Before:
    func Register(value interface{})
    func RegisterName(name string, value interface{})
    func NewDecoder(r io.Reader) *Decoder
    func NewEncoder(w io.Writer) *Encoder
    type CommonType struct { ... }
    type Decoder struct { ... }
    type Encoder struct { ... }
    type GobDecoder interface { ... }
    type GobEncoder interface { ... }
    
    After:
    func Register(value interface{})
    func RegisterName(name string, value interface{})
    type CommonType struct { ... }
    type Decoder struct { ... }
        func NewDecoder(r io.Reader) *Decoder
    type Encoder struct { ... }
        func NewEncoder(w io.Writer) *Encoder
    type GobDecoder interface { ... }
    type GobEncoder interface { ... }
    
    Change-Id: I021db25bce4a16b3dfa22ab323ca1f4e68d50111
    Reviewed-on: https://go-review.googlesource.com/22354
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 8ad8d7d87edf0aec3b56c2e2d0139bc12531d359
Author: Keith Randall <khr@golang.org>
Date:   Thu Apr 21 13:58:22 2016 -0700

    cmd/compile: Use pre-regalloc value ID in lateSpillUse
    
    The cached copy's ID is sometimes outside the bounds of the orig array.
    
    There's no reason to start at the cached copy and work backwards
    to the original value. We already have the original value ID at
    all the callsites.
    
    Fixes noopt build
    
    Change-Id: I313508a1917e838a87e8cc83b2ef3c2e4a8db304
    Reviewed-on: https://go-review.googlesource.com/22355
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 40f1d0ca9f978376f7db24de3737b58589c8542b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Apr 18 14:02:08 2016 -0700

    cmd/compile: split TSLICE into separate Type kind
    
    Instead of using TARRAY for both arrays and slices, create a new
    TSLICE kind to handle slices.
    
    Also, get rid of the "DDDArray" distinction. While kinda ugly, it
    seems likely we'll need to defer evaluating the constant bounds
    expressions for golang.org/issue/13890.
    
    Passes toolstash/buildall.
    
    Change-Id: I8e45d4900e7df3a04cce59428ec8b38035d3cc3a
    Reviewed-on: https://go-review.googlesource.com/22329
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5213cd700062917bc98f949479dfc0865751f2e8
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Apr 21 12:47:24 2016 -0700

    spec: fix incorrect comment in shift example
    
    - adjusted example code
    - fixed comments
    
    Fixes #14785.
    
    Change-Id: Ia757dc93b0a69b8408559885ece7f3685a37daaa
    Reviewed-on: https://go-review.googlesource.com/22353
    Reviewed-by: Rob Pike <r@golang.org>

commit c8bd293e56d17c5599ec62aee63fe819366adcab
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 30 17:15:15 2016 -0400

    runtime: eliminate floating garbage estimate
    
    Currently when we compute the trigger for the next GC, we do it based
    on an estimate of the reachable heap size at the start of the GC
    cycle, which is itself based on an estimate of the floating garbage.
    This was introduced by 4655aad to fix a bad feedback loop that allowed
    the heap to grow to many times the true reachable size.
    
    However, this estimate gets easily confused by rapidly allocating
    applications, and, worse it's different than the heap size the trigger
    controller uses to compute the trigger itself. This results in the
    trigger controller often thinking that GC finished before it started.
    Since this would be a pretty great outcome from it's perspective, it
    sets the trigger for the next cycle as close to the next goal as
    possible (which is limited to 95% of the goal).
    
    Furthermore, the bad feedback loop this estimate originally fixed
    seems not to happen any more, suggesting it was fixed more correctly
    by some other change in the mean time. Finally, with the change to
    allocate black, it shouldn't even be theoretically possible for this
    bad feedback loop to occur.
    
    Hence, eliminate the floating garbage estimate and simply consider the
    reachable heap to be the marked heap. This harms overall throughput
    slightly for allocation-heavy benchmarks, but significantly improves
    mutator availability.
    
    Fixes #12204. This brings the average trigger in this benchmark from
    0.95 (the cap) to 0.7 and the active GC utilization from ~90% to ~45%.
    
    Updates #14951. This makes the trigger controller much better behaved,
    so it pulls the trigger lower if assists are consuming a lot of CPU
    like it's supposed to, increasing mutator availability.
    
    name              old time/op  new time/op  delta
    XBenchGarbage-12  2.21ms ± 1%  2.28ms ± 3%  +3.29%  (p=0.000 n=17+17)
    
    Some of this slow down we paid for in earlier commits. Relative to the
    start of the series to switch to allocate-black (the parent of "count
    black allocations toward scan work"), the garbage benchmark is 2.62%
    slower.
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.53s ± 3%     2.53s ± 3%    ~     (p=0.708 n=20+19)
    Fannkuch11-12                2.08s ± 0%     2.08s ± 0%  -0.22%  (p=0.002 n=19+18)
    FmtFprintfEmpty-12          45.3ns ± 2%    45.2ns ± 3%    ~     (p=0.505 n=20+20)
    FmtFprintfString-12          129ns ± 0%     131ns ± 2%  +1.80%  (p=0.000 n=16+19)
    FmtFprintfInt-12             121ns ± 2%     121ns ± 2%    ~     (p=0.768 n=19+19)
    FmtFprintfIntInt-12          186ns ± 1%     188ns ± 3%  +0.99%  (p=0.000 n=19+19)
    FmtFprintfPrefixedInt-12     188ns ± 1%     188ns ± 1%    ~     (p=0.947 n=18+16)
    FmtFprintfFloat-12           254ns ± 1%     255ns ± 1%  +0.30%  (p=0.002 n=19+17)
    FmtManyArgs-12               763ns ± 0%     770ns ± 0%  +0.92%  (p=0.000 n=18+18)
    GobDecode-12                7.00ms ± 1%    7.04ms ± 1%  +0.61%  (p=0.049 n=20+20)
    GobEncode-12                5.88ms ± 1%    5.88ms ± 0%    ~     (p=0.641 n=18+19)
    Gzip-12                      214ms ± 1%     215ms ± 1%  +0.43%  (p=0.002 n=18+19)
    Gunzip-12                   37.6ms ± 0%    37.6ms ± 0%  +0.11%  (p=0.015 n=17+18)
    HTTPClientServer-12         76.9µs ± 2%    78.1µs ± 2%  +1.44%  (p=0.000 n=20+18)
    JSONEncode-12               15.2ms ± 2%    15.1ms ± 1%    ~     (p=0.271 n=19+18)
    JSONDecode-12               53.1ms ± 1%    53.3ms ± 0%  +0.49%  (p=0.000 n=18+19)
    Mandelbrot200-12            4.04ms ± 1%    4.03ms ± 0%  -0.33%  (p=0.005 n=18+18)
    GoParse-12                  3.29ms ± 1%    3.28ms ± 1%    ~     (p=0.146 n=16+17)
    RegexpMatchEasy0_32-12      69.9ns ± 3%    69.5ns ± 1%    ~     (p=0.785 n=20+19)
    RegexpMatchEasy0_1K-12       237ns ± 0%     237ns ± 0%    ~     (p=1.000 n=18+18)
    RegexpMatchEasy1_32-12      69.5ns ± 1%    69.2ns ± 1%  -0.44%  (p=0.020 n=16+19)
    RegexpMatchEasy1_1K-12       372ns ± 1%     371ns ± 2%    ~     (p=0.086 n=20+19)
    RegexpMatchMedium_32-12      108ns ± 3%     107ns ± 1%  -1.00%  (p=0.004 n=19+14)
    RegexpMatchMedium_1K-12     34.2µs ± 4%    34.0µs ± 2%    ~     (p=0.380 n=19+20)
    RegexpMatchHard_32-12       1.77µs ± 4%    1.76µs ± 3%    ~     (p=0.558 n=18+20)
    RegexpMatchHard_1K-12       53.4µs ± 4%    52.8µs ± 2%  -1.10%  (p=0.020 n=18+20)
    Revcomp-12                   359ms ± 4%     377ms ± 0%  +5.19%  (p=0.000 n=20+18)
    Template-12                 63.7ms ± 2%    62.9ms ± 2%  -1.27%  (p=0.005 n=18+20)
    TimeParse-12                 316ns ± 2%     313ns ± 1%    ~     (p=0.059 n=20+16)
    TimeFormat-12                329ns ± 0%     331ns ± 0%  +0.39%  (p=0.000 n=16+18)
    [Geo mean]                  51.6µs         51.7µs       +0.18%
    
    Change-Id: I1dce4640c8205d41717943b021039fffea863c57
    Reviewed-on: https://go-review.googlesource.com/21324
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6002e01e34f5b847eb4c49ca84e9623d7204f5f2
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 30 17:02:23 2016 -0400

    runtime: allocate black during GC
    
    Currently we allocate white for most of concurrent marking. This is
    based on the classical argument that it produces less floating
    garbage, since allocations during GC may not get linked into the heap
    and allocating white lets us reclaim these. However, it's not clear
    how often this actually happens, especially since our write barrier
    shades any pointer as soon as it's installed in the heap regardless of
    the color of the slot.
    
    On the other hand, allocating black has several advantages that seem
    to significantly outweigh this downside.
    
    1) It naturally bounds the total scan work to the live heap size at
    the start of a GC cycle. Allocating white does not, and thus depends
    entirely on assists to prevent the heap from growing faster than it
    can be scanned.
    
    2) It reduces the total amount of scan work per GC cycle by the size
    of newly allocated objects that are linked into the heap graph, since
    objects allocated black never need to be scanned.
    
    3) It reduces total write barrier work since more objects will already
    be black when they are linked into the heap graph.
    
    This gives a slight overall improvement in benchmarks.
    
    name              old time/op  new time/op  delta
    XBenchGarbage-12  2.24ms ± 0%  2.21ms ± 1%  -1.32%  (p=0.000 n=18+17)
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.60s ± 3%     2.53s ± 3%  -2.56%  (p=0.000 n=20+20)
    Fannkuch11-12                2.08s ± 1%     2.08s ± 0%    ~     (p=0.452 n=19+19)
    FmtFprintfEmpty-12          45.1ns ± 2%    45.3ns ± 2%    ~     (p=0.367 n=19+20)
    FmtFprintfString-12          131ns ± 3%     129ns ± 0%  -1.60%  (p=0.000 n=20+16)
    FmtFprintfInt-12             122ns ± 0%     121ns ± 2%  -0.86%  (p=0.000 n=16+19)
    FmtFprintfIntInt-12          187ns ± 1%     186ns ± 1%    ~     (p=0.514 n=18+19)
    FmtFprintfPrefixedInt-12     189ns ± 0%     188ns ± 1%  -0.54%  (p=0.000 n=16+18)
    FmtFprintfFloat-12           256ns ± 0%     254ns ± 1%  -0.43%  (p=0.000 n=17+19)
    FmtManyArgs-12               769ns ± 0%     763ns ± 0%  -0.72%  (p=0.000 n=18+18)
    GobDecode-12                7.08ms ± 2%    7.00ms ± 1%  -1.22%  (p=0.000 n=20+20)
    GobEncode-12                5.88ms ± 0%    5.88ms ± 1%    ~     (p=0.406 n=18+18)
    Gzip-12                      214ms ± 0%     214ms ± 1%    ~     (p=0.103 n=17+18)
    Gunzip-12                   37.6ms ± 0%    37.6ms ± 0%    ~     (p=0.563 n=17+17)
    HTTPClientServer-12         77.2µs ± 3%    76.9µs ± 2%    ~     (p=0.606 n=20+20)
    JSONEncode-12               15.1ms ± 1%    15.2ms ± 2%    ~     (p=0.138 n=19+19)
    JSONDecode-12               53.3ms ± 1%    53.1ms ± 1%  -0.33%  (p=0.000 n=19+18)
    Mandelbrot200-12            4.04ms ± 1%    4.04ms ± 1%    ~     (p=0.075 n=19+18)
    GoParse-12                  3.30ms ± 1%    3.29ms ± 1%  -0.57%  (p=0.000 n=18+16)
    RegexpMatchEasy0_32-12      69.5ns ± 1%    69.9ns ± 3%    ~     (p=0.822 n=18+20)
    RegexpMatchEasy0_1K-12       237ns ± 1%     237ns ± 0%    ~     (p=0.398 n=19+18)
    RegexpMatchEasy1_32-12      69.8ns ± 2%    69.5ns ± 1%    ~     (p=0.090 n=20+16)
    RegexpMatchEasy1_1K-12       371ns ± 1%     372ns ± 1%    ~     (p=0.178 n=19+20)
    RegexpMatchMedium_32-12      108ns ± 2%     108ns ± 3%    ~     (p=0.124 n=20+19)
    RegexpMatchMedium_1K-12     33.9µs ± 2%    34.2µs ± 4%    ~     (p=0.309 n=20+19)
    RegexpMatchHard_32-12       1.75µs ± 2%    1.77µs ± 4%  +1.28%  (p=0.018 n=19+18)
    RegexpMatchHard_1K-12       52.7µs ± 1%    53.4µs ± 4%  +1.23%  (p=0.013 n=15+18)
    Revcomp-12                   354ms ± 1%     359ms ± 4%  +1.27%  (p=0.043 n=20+20)
    Template-12                 63.6ms ± 2%    63.7ms ± 2%    ~     (p=0.654 n=20+18)
    TimeParse-12                 313ns ± 1%     316ns ± 2%  +0.80%  (p=0.014 n=17+20)
    TimeFormat-12                332ns ± 0%     329ns ± 0%  -0.66%  (p=0.000 n=16+16)
    [Geo mean]                  51.7µs         51.6µs       -0.09%
    
    Change-Id: I2214a6a0e4f544699ea166073249a8efdf080dc0
    Reviewed-on: https://go-review.googlesource.com/21323
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 64a26b79ac781118d4fa364f884ce8080ba97870
Author: Austin Clements <austin@google.com>
Date:   Sun Apr 17 11:42:37 2016 -0400

    runtime: simplify/optimize allocate-black a bit
    
    Currently allocating black switches to the system stack (which is
    probably a historical accident) and atomically updates the global
    bytes marked stat. Since we're about to depend on this much more,
    optimize it a bit by putting it back on the regular stack and updating
    the per-P bytes marked stat, which gets lazily folded into the global
    bytes marked stat.
    
    Change-Id: Ibbe16e5382d3fd2256e4381f88af342bf7020b04
    Reviewed-on: https://go-review.googlesource.com/22170
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 479501c14c9d36e27727bc4b4294d57c5ddc29d0
Author: Austin Clements <austin@google.com>
Date:   Sat Apr 16 18:27:38 2016 -0400

    runtime: count black allocations toward scan work
    
    Currently we count black allocations toward the scannable heap size,
    but not toward the scan work we've done so far. This is clearly
    inconsistent (we have, in effect, scanned these allocations and since
    they're already black, we're not going to scan them again). Worse, it
    means we don't count black allocations toward the scannable heap size
    as of the *next* GC because this is based on the amount of scan work
    we did in this cycle.
    
    Fix this by counting black allocations as scan work. Currently the GC
    spends very little time in allocate-black mode, so this probably
    hasn't been a problem, but this will become important when we switch
    to always allocating black.
    
    Change-Id: If6ff693b070c385b65b6ecbbbbf76283a0f9d990
    Reviewed-on: https://go-review.googlesource.com/22119
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a683c385ad874b0066787dc010cacba8aaff894c
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Jan 29 16:16:03 2016 +0100

    testing: add matching of subtest
    
    Allows passing regexps per subtest to --test.run and --test.bench
    
    Note that the documentation explicitly states that the split regular
    expressions match the correpsonding parts (path components) of
    the bench/test identifier. This is intended and slightly different
    from the i'th RE matching the subtest/subbench at the respective
    level.  Picking this semantics allows guaranteeing that a test or
    benchmark identifier as printed by go test can be passed verbatim
    (possibly quoted) to, respectively, -run or -bench: subtests and
    subbenches might have a '/' in their name, causing a misaligment if
    their ID is passed to -run or -bench as is.
    This semantics has other benefits, but this is the main motivation.
    
    Fixes golang.go#15126
    
    Change-Id: If72e6d3f54db1df6bc2729ac6edc7ab3c740e7c3
    Reviewed-on: https://go-review.googlesource.com/19122
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f8fc3710fd4c596adac57048f705a994f199df8c
Author: Keith Randall <khr@golang.org>
Date:   Thu Apr 21 10:02:36 2016 -0700

    cmd/compile: handle mem copies in amd64 backend
    
    Fixes noopt builder.
    
    Change-Id: If13373b2597f0fcc9b1b2f9c860f2bd043e43c6c
    Reviewed-on: https://go-review.googlesource.com/22338
    Reviewed-by: Keith Randall <khr@golang.org>

commit 508a424eedccfe77f64d50c9870988a8c15b46b1
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Apr 18 10:30:20 2016 -0400

    cmd/compile/internal/gc: fix return value offset for SSA backend on ARM
    
    Progress on SSA backend for ARM. Still not complete. It compiles a
    Fibonacci function, but the caller picked the return value from an
    incorrect offset. This CL adjusts it to match the stack frame layout
    for architectures with link register.
    
    Updates #15365.
    
    Change-Id: I01e03c3e95f5503a185e8ac2b6d9caf4faf3d014
    Reviewed-on: https://go-review.googlesource.com/22186
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7c6b48ffba9e0ea8ed846d194fe30189863f17f0
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Apr 18 12:21:51 2016 -0400

    cmd/compile/internal/arm: fix comparison & conditional branch for SSA on ARM
    
    Progress on SSA for ARM. Still not complete. Now Fibonacci function compiles
    and runs correctly.
    
    The old backend swaps the operands for CMP instruction. This CL does the same
    on SSA backend, and uses conditional branch accordingly.
    
    Updates #15365.
    
    Change-Id: I117e17feb22f03d936608bd232f76970e4bbe21a
    Reviewed-on: https://go-review.googlesource.com/22187
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7d56215bcbc5a2ef5e59805271b0ca6a4fd56e4d
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Apr 19 14:02:21 2016 -0400

    cmd/link: convert textp into a slice
    
    Updates #15374
    
    Change-Id: I3ea715735862fe9550b88d7a29def6cb9d4419a6
    Reviewed-on: https://go-review.googlesource.com/22243
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 5a0881a1d1797a5f34c33ec4cf67cb97cc1aa634
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Apr 19 08:59:56 2016 -0400

    cmd/link: calculate section alignment concurrently
    
    Reduces link time for cmd/go by 1%.
    
    Change-Id: Iad4a16db0aedc56f81ddf73ba9b632e418dc1b19
    Reviewed-on: https://go-review.googlesource.com/22242
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 45522a6a93efe0fd487f6875f2b104d772a26469
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu Apr 21 11:44:05 2016 +1000

    debug/pe: introduce Section.Relocs
    
    cmd/link reads PE object files when building programs with cgo.
    cmd/link accesses object relocations. Add new Section.Relocs that
    provides similar functionality in debug/pe.
    
    Updates #15345
    
    Change-Id: I34de91b7f18cf1c9e4cdb3aedd685486a625ac92
    Reviewed-on: https://go-review.googlesource.com/22332
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit e48434887e568fa96800a0dff36ab45bc844ea04
Author: Keith Randall <khr@golang.org>
Date:   Wed Apr 20 21:46:39 2016 -0700

    cmd/compile: fix ssa/check/on build
    
    Disable phielimValue from rewrite pass for now.
    
    Change-Id: I9f3bb1f527b50bc7a21cc6b7cb89f6136efd81e8
    Reviewed-on: https://go-review.googlesource.com/22335
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7e460e70d90295cf08ea627c0a0fff170aba5518
Author: Martin Möhrmann <martisch@uos.de>
Date:   Wed Apr 20 18:00:52 2016 +0200

    runtime: use type int to specify size for newarray
    
    Consistently use type int for the size argument of
    runtime.newarray, runtime.reflect_unsafe_NewArray
    and reflect.unsafe_NewArray.
    
    Change-Id: Ic77bf2dde216c92ca8c49462f8eedc0385b6314e
    Reviewed-on: https://go-review.googlesource.com/22311
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4938d7b5fc06bbd137619eddd494a8cca288eb25
Author: Keith Randall <khr@golang.org>
Date:   Wed Apr 20 17:29:50 2016 -0700

    cmd/compile: fix dominator check in check()
    
    Ancestor comparison was the wrong way around, effectively
    disabling the def-must-dominate-use check.
    
    Update #15084
    
    Change-Id: Ic56d674c5000569d2cc855bbb000a60eae517c7c
    Reviewed-on: https://go-review.googlesource.com/22330
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9568d54fb8d89267304d23cac23190f55ec95683
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 20 19:10:20 2016 -0400

    cmd/link: fix reordering of plt/rel
    
    For the Solaris and S/390 builders.
    
    Change-Id: Id9a83e0df91e6d0df8488ec5e2a546ba8e2d800e
    Reviewed-on: https://go-review.googlesource.com/22327
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 11f1041022e001869de076699f297b28d25fc558
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu Apr 21 10:42:25 2016 +1000

    debug/pe: update cstring documentation
    
    Updates #15345
    
    Change-Id: If1fca1f6042571cb0ac689bbb3c294309dd6e7b4
    Reviewed-on: https://go-review.googlesource.com/22331
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 285a18436d480ef91b2af236d5ddd2fa7fa49de8
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed Apr 20 15:58:55 2016 +1000

    debug/pe: pretty section.go code
    
    Introduce (*SectionHeader32).fullName and add documentation comments.
    
    Updates #15345
    
    Change-Id: I8f3b8ab9492642d62e7aad010c91c68daea3f14b
    Reviewed-on: https://go-review.googlesource.com/22301
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 75b886ab790782f34945c0e1b0dee4189399ac9e
Author: Tal Shprecher <tshprecher@gmail.com>
Date:   Wed Apr 20 14:05:48 2016 -0700

    cmd/compile: reject embedded unsafe.Pointer values
    
    Fixes #14729
    
    Change-Id: Ied819aa7b23e25de30aa8cde049c97297b4cab11
    Reviewed-on: https://go-review.googlesource.com/22325
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f4f1b30749be167b7c5ecb7c775c2acd8d32ae9e
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 20 16:41:43 2016 -0700

    cmd/compile: accept old and new import format for builtin declarations
    
    Test with forceNewExport set to true (but continues to be disabled by
    default for now).
    
    Fixes #15322.
    
    Change-Id: I3b893db2206cbb79e66339284f22f4a0b20bf137
    Reviewed-on: https://go-review.googlesource.com/22328
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ed41054b6d1306537df0ba3a34d11579ae2c1829
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Apr 18 14:50:14 2016 -0400

    cmd/link: process data symbols with slices
    
    First (and largest single) step to switching cmd/link from linked
    lists of symbols to slices.
    
    Sort sections independently and concurrently.
    This reduces jujud link times on linux/amd64 by ~4%.
    
    Updates #15374
    
    Change-Id: I452bc8f33081039468636502fe3c1cc8d6ed9efa
    Reviewed-on: https://go-review.googlesource.com/22205
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit cda0aa16807b20410e57992b09570f6a9dd11f9b
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 20 10:36:49 2016 -0400

    cmd/link: cleanup Datablk debug printing
    
    (Split out from CL 22205.)
    
    Change-Id: I45838dda8ea8c451b4388b8aade2c209cde2c0e1
    Reviewed-on: https://go-review.googlesource.com/22299
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0fec75f5ca6a75962fb5037f59a1743659ac3bf3
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Wed Apr 20 08:15:07 2016 -0500

    crypto/md5: add assembly implementation on ppc64le
    
    This change improves the performance of the block
    function used within crypto/md5 on ppc64le.  The following
    improvement was seen:
    
    BenchmarkHash8Bytes              8.39         26.04        3.10x
    BenchmarkHash1K                  99.41        407.84       4.10x
    BenchmarkHash8K                  108.87       460.00       4.23x
    BenchmarkHash8BytesUnaligned     8.39         25.80        3.08x
    BenchmarkHash1KUnaligned         89.94        407.81       4.53x
    BenchmarkHash8KUnaligned         96.57        459.22       4.76x
    
    Fixes #15385
    
    Change-Id: I8af5af089cc3e3740c33c662003d104de5fe1d1b
    Reviewed-on: https://go-review.googlesource.com/22294
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit aea224386ea7c10c07490bb6cdef12a51fa9a9cf
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 20 13:40:55 2016 -0700

    math/big: more tests, documentation for Flot gob marshalling
    
    Follow-up to https://golang.org/cl/21755.
    This turned out to be a bit more than just a few nits
    as originally expected in that CL.
    
    1) The actual mantissa may be shorter than required for the
       given precision (because of trailing 0's): no need to
       allocate space for it (and transmit 0's). This can save
       a lot of space when the precision is high: E.g., for
       prec == 1000, 16 words or 128 bytes are required at the
       most, but if the actual number is short, it may be much
       less (for the test cases present, it's significantly less).
    
    2) The actual mantissa may be longer than the number of
       words required for the given precision: make sure to
       not overflow when encoding in bytes.
    
    3) Add more documentation.
    
    4) Add more tests.
    
    Change-Id: I9f40c408cfdd9183a8e81076d2f7d6c75e7a00e9
    Reviewed-on: https://go-review.googlesource.com/22324
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 60fd32a47fdffb95d3646c9fc75acc9beff67183
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 19 08:31:04 2016 -0700

    cmd/compile: change the way we handle large map values
    
    mapaccess{1,2} returns a pointer to the value.  When the key
    is not in the map, it returns a pointer to zeroed memory.
    Currently, for large map values we have a complicated scheme which
    dynamically allocates zeroed memory for this purpose.  It is ugly
    code and requires an atomic.Load in a bunch of places we'd rather
    not have it.
    
    Switch to a scheme where callsites of mapaccess{1,2} which expect
    large return values pass in a pointer to zeroed memory that
    mapaccess can return if the key is not found.  This avoids the
    atomic.Load on all map accesses with a few extra instructions only
    for the large value acccesses, plus a bit of bss space.
    
    There was a time (1.4 & 1.5?) where we did something like this but
    all the tricks to make the right size zero value were done by the
    linker.  That scheme broke in the presence of dyamic linking.
    The scheme in this CL works even when dynamic linking.
    
    Fixes #12337
    
    Change-Id: Ic2d0319944af33bbb59785938d9ab80958d1b4b1
    Reviewed-on: https://go-review.googlesource.com/22221
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit bc33dd7432369b3abd2a6fd75cb57d6c5c3defa7
Author: Rob Pike <r@golang.org>
Date:   Wed Apr 20 08:56:33 2016 -0700

    doc/faq: reword the link to the generics proposal
    
    A late response to CL 22163.
    
    Change-Id: I5275a22af7081875af0256da296811f4fe9832dc
    Reviewed-on: https://go-review.googlesource.com/22296
    Reviewed-by: David Symonds <dsymonds@golang.org>

commit 79c527f4a7643b6cc9e49f5e919d6f4a44f492ca
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 20 14:40:18 2016 -0400

    cmd/link: move ppc64 genplt declarations into loop
    
    (Split out from CL 22243.)
    
    Change-Id: I07709a0c417e7a57e839e5085a37db7d5fbf3a35
    Reviewed-on: https://go-review.googlesource.com/22322
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 854ab14b7e20a419620a42b837a9cf45cbca8189
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 20 14:22:20 2016 -0400

    cmd/link: move pcln declarations into loops
    
    (Split out from CL 22243.)
    
    Change-Id: Idac1748c8db2b2ed0484e4afadb105c471c6ce34
    Reviewed-on: https://go-review.googlesource.com/22321
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1dad218da1239a8375b7fad5dd83e4a840e3fdbb
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 20 10:36:27 2016 -0400

    cmd/link: move declarations into loops
    
    (Split out from CL 22205.)
    
    Change-Id: Id32698f48ce02b55c15b6f2842215e0ffdbf425b
    Reviewed-on: https://go-review.googlesource.com/22298
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d8c9dd604801958c649a32511deef373adeecfe0
Author: OneOfOne <oneofone@gmail.com>
Date:   Sun Apr 10 03:50:11 2016 +0200

    math/big: implement GobDecode/Encode for big.Float
    
    Added GobEncode/Decode and a test for them.
    
    Fixes #14593
    
    Change-Id: Ic8d3efd24d0313a1a66f01da293c4c1fd39764a8
    Reviewed-on: https://go-review.googlesource.com/21755
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 7acb642e4f0b77763a13c99c756aa846b01a428c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 20 10:29:43 2016 -0400

    test: print output on link -X failure
    
    (Split out from CL 22205.)
    
    Change-Id: Iab66ac2a1cd3716966d8e59c570931bce95aba9b
    Reviewed-on: https://go-review.googlesource.com/22297
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 46efe0bc7fb1933c74d80cd3fe7c47f21d042a5d
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Apr 15 18:45:17 2016 -0400

    crypto/aes: add s390x assembly implementation
    
    Adds support for single block encryption using the cipher message
    (KM) instruction. KM handles key expansion internally and
    therefore it is not done up front when using the assembly
    implementation on s390x.
    
    Change-Id: I69954b8ae36d549e1dc40d7acd5a10bedfaaef9c
    Reviewed-on: https://go-review.googlesource.com/22194
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b57ac333310e8b8ec01708dcca99430b641457c5
Author: Keith Randall <khr@golang.org>
Date:   Fri Apr 15 12:49:30 2016 -0700

    cmd/compile: forward-looking desired register biasing
    
    Improve forward-looking desired register calculations.
    It is now inter-block and handles a bunch more cases.
    
    Fixes #14504
    Fixes #14828
    Fixes #15254
    
    Change-Id: Ic240fa0ec6a779d80f577f55c8a6c4ac8c1a940a
    Reviewed-on: https://go-review.googlesource.com/22160
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 30c278dbe907111b51737adb8ba0a9e1956f3ed5
Author: Jamil Djadala <djadala@gmail.com>
Date:   Wed Apr 20 09:08:28 2016 +0300

    container/heap: correct number of elements in BenchmarkDup
    
    In BenchmarkDup fuction, heap is created as h := make(myHeap, n)
    and then n elements are added, so first time there are 2*n elements
    in heap.
    
    Fixes #15380
    
    Change-Id: I0508486a847006b3cd545fd695e8b09af339134f
    Reviewed-on: https://go-review.googlesource.com/22310
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 001e8e8070e8ed3a578dbad93cc3f70257e965bd
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 19 19:35:10 2016 -0700

    runtime: simplify mallocgc flag argument
    
    mallocgc can calculate noscan itself.  The only remaining
    flag argument is needzero, so we just make that a boolean arg.
    
    Fixes #15379
    
    Change-Id: I839a70790b2a0c9dbcee2600052bfbd6c8148e20
    Reviewed-on: https://go-review.googlesource.com/22290
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 731531980a36f1fa6434c947c54daf8ba530a65f
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed Apr 20 13:02:41 2016 +1000

    debug/pe: move some code into section.go and symbol.go
    
    Just moving code. No code changes.
    
    Updates #15345
    
    Change-Id: I89c257b7aae4fbd78ce59a42909ecb3ff493659d
    Reviewed-on: https://go-review.googlesource.com/22300
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d697a9d5d7d75cecd8d49b95ed9a0d1f2f3e8ed4
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Mon Apr 18 16:12:48 2016 +1000

    debug/pe: introduce StringTable type
    
    PE specification requires that long section and symbol names
    are stored in PE string table. Introduce StringTable that
    implements this functionality. Only string table reading is
    implemented.
    
    Updates #15345
    
    Change-Id: Ib9638617f2ab1881ad707111d96fc68b0e47340e
    Reviewed-on: https://go-review.googlesource.com/22181
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 5183ad696c708ab5fc65006413019b1ef96aa91b
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Mon Apr 18 16:42:17 2016 +1000

    debug/pe: add some documentation and TODO
    
    No code changes. Just moved ImportDirectory next to ImportedSymbols.
    And moved useless FormatError to the bottom of file.go.
    
    Updates #15345
    
    Change-Id: I91ff243cefd18008b1c5ee9ec4326583deee431b
    Reviewed-on: https://go-review.googlesource.com/22182
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bfe0cbdc50cbc6a632d1e5ebbdcc625d69451935
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 19 15:38:59 2016 -0700

    cmd/compile,runtime: pass elem type to {make,grow}slice
    
    No point in passing the slice type to these functions.
    All they need is the element type.  One less indirection,
    maybe a few less []T type descriptors in the binary.
    
    Change-Id: Ib0b83b5f14ca21d995ecc199ce8ac00c4eb375e6
    Reviewed-on: https://go-review.googlesource.com/22275
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 0150f15a924a7b4ac0c794012f6b12c8aa406b54
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 19 15:14:26 2016 -0700

    runtime: call mallocgc directly from makeslice and growslice
    
    The extra checks provided by newarray are
    redundant in these cases.
    
    This shrinks by one frame the call stack expected
    by the pprof test.
    
    name                      old time/op  new time/op  delta
    MakeSlice-8               34.3ns ± 2%  30.5ns ± 3%  -11.03%  (p=0.000 n=24+22)
    GrowSlicePtr-8             134ns ± 2%   129ns ± 3%   -3.25%  (p=0.000 n=25+24)
    
    Change-Id: Icd828655906b921c732701fd9d61da3fa217b0af
    Reviewed-on: https://go-review.googlesource.com/22276
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7b0ba1cff86429f0eb39b916fba54e3061fa5787
Author: Andrew Gerrand <adg@golang.org>
Date:   Wed Apr 20 09:16:00 2016 +1000

    doc: document go1.6.2
    
    Change-Id: Ib3063719cf90dfad139dd723b3b16ef0b45e312e
    Reviewed-on: https://go-review.googlesource.com/22251
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2244ae417312a59e722643f6ea2f1b8168c599c9
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 19 14:15:37 2016 -0700

    cmd/compile/internal/gc: simplify typecheck's Efoo consts
    
    There's no need for Eiota, Eindir, Eaddr, or Eproc; the values are
    threaded through to denote various typechecking contexts, but they
    don't actually influence typechecking behavior at all.
    
    Also, while here, switch the Efoo const declarations to use iota.
    
    Passes toolstash -cmp.
    
    Change-Id: I5cea869ccd0755c481cf071978f863474bc9c1ed
    Reviewed-on: https://go-review.googlesource.com/22271
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 58012ea785851052a28f20544d7e2da0e0e6eefa
Author: Julia Hansbrough <flowerhack@google.com>
Date:   Mon Apr 18 15:53:29 2016 -0700

    runtime: updated SIGSYS to cause a panic + stacktrace
    
    On GNU/Linux, SIGSYS is specified to cause the process to terminate
    without a core dump. In https://codereview.appspot.com/3749041 , it
    appears that Golang accidentally introduced incorrect behavior for
    this signal, which caused Golang processes to keep running after
    receiving SIGSYS. This change reverts it to the old/correct behavior.
    
    Updates #15204
    
    Change-Id: I3aa48a9499c1bc36fa5d3f40c088fdd7599e0db5
    Reviewed-on: https://go-review.googlesource.com/22202
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5e74d4095241655ce6bf6e5d32eeaeef353b614f
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 19 14:42:15 2016 -0700

    strconv: fix ParseFloat for special forms of zero values
    
    Fixes #15364.
    
    Change-Id: Id2a349896064c7c9e00e36c55162068bf18162b2
    Reviewed-on: https://go-review.googlesource.com/22272
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ba7563019f4c5c78cbfd740da1ad68acee37885c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 19 18:31:17 2016 +0000

    crypto/x509: fix copy/paste-o in error message
    
    Fixes #15371
    
    Change-Id: Iff8d36e1bd9b5641f6b577a30ac6e967f973c939
    Reviewed-on: https://go-review.googlesource.com/22240
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 998c8e034c98fccb52b0692b97d36a5a6d3bd31a
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 19 12:48:09 2016 -0700

    cmd/compile: convT2{I,E} don't handle direct interfaces
    
    We now inline type to interface conversions when the type
    is pointer-shaped.  No need to keep code to handle that in
    convT2{I,E}.
    
    Change-Id: I3a6668259556077cbb2986a9e8fe42a625d506c9
    Reviewed-on: https://go-review.googlesource.com/22249
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michel Lespinasse <walken@google.com>

commit 8b20fd000d7e894865442134f9d6d197ac5dabed
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Apr 12 18:24:34 2016 +0200

    cmd/compile: transform some Phis into Or8.
    
    func f(a, b bool) bool {
              return a || b
    }
    
    is now a single instructions (excluding loading and unloading the arguments):
          v10 = ORB <bool> v11 v12 : AX
    
    Change-Id: Iff63399410cb46909f4318ea1c3f45a029f4aa5e
    Reviewed-on: https://go-review.googlesource.com/21872
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 082f464823cdb47042a142802776fa7874e6c05b
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 19 14:18:59 2016 -0700

    go/types: trailing semis are ok after valid fallthrough
    
    Fixes #15376.
    
    Change-Id: I9ece80f26b83be129671c961120c157da2ac0079
    Reviewed-on: https://go-review.googlesource.com/22270
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit a4dd6ea1524901fab5deac60772345babd058ae7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 19 09:18:59 2016 -0700

    runtime: add maxSliceCap
    
    This avoids expensive division calculations
    for many common slice element sizes.
    
    name                      old time/op  new time/op  delta
    MakeSlice-8               51.9ns ± 3%  35.1ns ± 2%  -32.41%  (p=0.000 n=10+10)
    GrowSliceBytes-8          44.1ns ± 2%  44.1ns ± 1%     ~     (p=0.984 n=10+10)
    GrowSliceInts-8           60.9ns ± 3%  60.9ns ± 3%     ~     (p=0.698 n=10+10)
    GrowSlicePtr-8             131ns ± 1%   120ns ± 2%   -8.41%   (p=0.000 n=8+10)
    GrowSliceStruct24Bytes-8   111ns ± 2%   103ns ± 3%   -7.23%    (p=0.000 n=8+8)
    
    Change-Id: I2630eb3d73c814db030cad16e620ea7fecbbd312
    Reviewed-on: https://go-review.googlesource.com/22223
    Reviewed-by: Keith Randall <khr@golang.org>

commit 55ab07c224a358cabe795fb1e52a627194d7daee
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 19 12:26:28 2016 -0700

    cmd/compile: static composite literals are side-effect free
    
    This extends CL 22192.
    
    This removes the remaining performance disparity
    between non-SSA and SSA on the AppendInPlace benchmarks.
    
    Going from non-SSA to SSA:
    
    AppendInPlace/NoGrow/2Ptr-8  1.60µs ± 5%  1.53µs ± 5%  -4.04%  (p=0.000 n=15+14)
    AppendInPlace/NoGrow/3Ptr-8  2.04µs ± 3%  1.96µs ± 2%  -3.90%  (p=0.000 n=13+14)
    AppendInPlace/NoGrow/4Ptr-8  2.83µs ± 8%  2.62µs ± 4%  -7.39%  (p=0.000 n=13+15)
    
    Previously these were 20% regressions.
    
    Change-Id: Ie87810bffd598730658e07585f5e2ef979a12b8f
    Reviewed-on: https://go-review.googlesource.com/22248
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3c6e60c0e41ed42d5df6dcbf134e3a664c08c154
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 19 12:08:33 2016 -0700

    cmd/compile: fix isStaticCompositeLiteral
    
    Previously, isStaticCompositeLiteral would
    return the wrong value for literals like:
    
    [1]struct{ b []byte }{b: []byte{1}}
    
    Note that the outermost component is an array,
    but once we recurse into isStaticCompositeLiteral,
    we never check again that arrays are actually arrays.
    
    Instead of adding more logic to the guts of
    isStaticCompositeLiteral, allow it to accept
    any Node and return the correct answer.
    
    Change-Id: I6af7814a9037bbc7043da9a96137fbee067bbe0e
    Reviewed-on: https://go-review.googlesource.com/22247
    Reviewed-by: Keith Randall <khr@golang.org>

commit 562d398aef1378c781a3164f59f54dd1b0f4638f
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 19 11:27:52 2016 -0700

    go/types: accept trailing empty stmts in terminating stmt lists
    
    Per the latest spec refinement (https://golang.org/cl/19981).
    
    Fixes #14537.
    
    Change-Id: I2dedee942c4da21dc94bdeda466f133827ab5bb9
    Reviewed-on: https://go-review.googlesource.com/22241
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9b6bf20a35130b2b0754f2ec54370e207e2f2d9b
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Apr 15 16:56:37 2016 -0400

    crypto/aes: de-couple asm and go implementations
    
    There is currently only one assembly implementation of AES
    (amd64). While it is possible to fit other implementations to the
    same pattern it complicates the code. For example s390x does not
    use expanded keys, so having enc and dec in the aesCipher struct
    is confusing.
    
    By separating out the asm implementations we can more closely
    match the data structures to the underlying implementation. This
    also opens the door for AES implementations that support block
    cipher modes other than GCM (e.g. CTR and CBC).
    
    This commit changes BenchmarkExpandKey to test the go
    implementation of key expansion. It might be better to have some
    sort of 'initialisation' benchmark instead to cover the startup
    costs of the assembly implementations (which might be doing
    key expansion in a different way, or not at all).
    
    Change-Id: I094a7176b5bbe2177df73163a9c0b711a61c12d6
    Reviewed-on: https://go-review.googlesource.com/22193
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 03e216f30d8bad7f4f9dadb50f7f6ca71e632682
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Apr 18 09:40:30 2016 -0700

    cmd/compile: re-enable in-place append optimization
    
    CL 21891 was too clever in its attempts to avoid spills.
    Storing newlen too early caused uses of append in the runtime
    itself to receive an inconsistent view of a slice,
    leading to corruption.
    
    This CL makes the generate code much more similar to
    the old backend. It spills more than before,
    but those spills have been contained to the grow path.
    It recalculates newlen unnecessarily on the fast path,
    but that's measurably cheaper than spilling it.
    
    CL 21891 caused runtime failures in 6 of 2000 runs
    of net/http and crypto/x509 in my test setup.
    This CL has gone 6000 runs without a failure.
    
    
    Benchmarks going from master to this CL:
    
    name                         old time/op  new time/op  delta
    AppendInPlace/NoGrow/Byte-8   439ns ± 2%   436ns ± 2%  -0.72%  (p=0.001 n=28+27)
    AppendInPlace/NoGrow/1Ptr-8   901ns ± 0%   856ns ± 0%  -4.95%  (p=0.000 n=26+29)
    AppendInPlace/NoGrow/2Ptr-8  2.15µs ± 1%  1.95µs ± 0%  -9.07%  (p=0.000 n=28+30)
    AppendInPlace/NoGrow/3Ptr-8  2.66µs ± 0%  2.45µs ± 0%  -7.93%  (p=0.000 n=29+26)
    AppendInPlace/NoGrow/4Ptr-8  3.24µs ± 1%  3.02µs ± 1%  -6.75%  (p=0.000 n=28+30)
    AppendInPlace/Grow/Byte-8     269ns ± 1%   271ns ± 1%  +0.84%  (p=0.000 n=30+29)
    AppendInPlace/Grow/1Ptr-8     275ns ± 1%   280ns ± 1%  +1.75%  (p=0.000 n=30+30)
    AppendInPlace/Grow/2Ptr-8     384ns ± 0%   391ns ± 0%  +1.94%  (p=0.000 n=27+30)
    AppendInPlace/Grow/3Ptr-8     455ns ± 0%   462ns ± 0%  +1.43%  (p=0.000 n=29+29)
    AppendInPlace/Grow/4Ptr-8     478ns ± 0%   479ns ± 0%  +0.23%  (p=0.000 n=30+27)
    
    
    However, for the large no-grow cases, there is still more work to be done.
    Going from this CL to the non-SSA backend:
    
    name                         old time/op  new time/op  delta
    AppendInPlace/NoGrow/Byte-8   436ns ± 2%   436ns ± 2%     ~     (p=0.967 n=27+29)
    AppendInPlace/NoGrow/1Ptr-8   856ns ± 0%   884ns ± 0%   +3.28%  (p=0.000 n=29+26)
    AppendInPlace/NoGrow/2Ptr-8  1.95µs ± 0%  1.56µs ± 0%  -20.28%  (p=0.000 n=30+29)
    AppendInPlace/NoGrow/3Ptr-8  2.45µs ± 0%  1.89µs ± 0%  -22.88%  (p=0.000 n=26+28)
    AppendInPlace/NoGrow/4Ptr-8  3.02µs ± 1%  2.56µs ± 1%  -15.35%  (p=0.000 n=30+28)
    AppendInPlace/Grow/Byte-8     271ns ± 1%   283ns ± 1%   +4.56%  (p=0.000 n=29+29)
    AppendInPlace/Grow/1Ptr-8     280ns ± 1%   288ns ± 1%   +2.99%  (p=0.000 n=30+30)
    AppendInPlace/Grow/2Ptr-8     391ns ± 0%   409ns ± 0%   +4.66%  (p=0.000 n=30+29)
    AppendInPlace/Grow/3Ptr-8     462ns ± 0%   481ns ± 0%   +4.13%  (p=0.000 n=29+30)
    AppendInPlace/Grow/4Ptr-8     479ns ± 0%   502ns ± 0%   +4.81%  (p=0.000 n=27+26)
    
    
    New generated code:
    
    var x []byte
    
    func a() {
            x = append(x, 1)
    }
    
    
    "".a t=1 size=208 args=0x0 locals=0x48
            0x0000 00000 (a.go:5)   TEXT    "".a(SB), $72-0
            0x0000 00000 (a.go:5)   MOVQ    (TLS), CX
            0x0009 00009 (a.go:5)   CMPQ    SP, 16(CX)
            0x000d 00013 (a.go:5)   JLS     190
            0x0013 00019 (a.go:5)   SUBQ    $72, SP
            0x0017 00023 (a.go:5)   FUNCDATA        $0, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0017 00023 (a.go:5)   FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0017 00023 (a.go:6)   MOVQ    "".x+16(SB), CX
            0x001e 00030 (a.go:6)   MOVQ    "".x+8(SB), DX
            0x0025 00037 (a.go:6)   MOVQ    "".x(SB), BX
            0x002c 00044 (a.go:6)   LEAQ    1(DX), BP
            0x0030 00048 (a.go:6)   CMPQ    BP, CX
            0x0033 00051 (a.go:6)   JGT     $0, 73
            0x0035 00053 (a.go:6)   LEAQ    1(DX), AX
            0x0039 00057 (a.go:6)   MOVQ    AX, "".x+8(SB)
            0x0040 00064 (a.go:6)   MOVB    $1, (BX)(DX*1)
            0x0044 00068 (a.go:7)   ADDQ    $72, SP
            0x0048 00072 (a.go:7)   RET
            0x0049 00073 (a.go:6)   LEAQ    type.[]uint8(SB), AX
            0x0050 00080 (a.go:6)   MOVQ    AX, (SP)
            0x0054 00084 (a.go:6)   MOVQ    BX, 8(SP)
            0x0059 00089 (a.go:6)   MOVQ    DX, 16(SP)
            0x005e 00094 (a.go:6)   MOVQ    CX, 24(SP)
            0x0063 00099 (a.go:6)   MOVQ    BP, 32(SP)
            0x0068 00104 (a.go:6)   PCDATA  $0, $0
            0x0068 00104 (a.go:6)   CALL    runtime.growslice(SB)
            0x006d 00109 (a.go:6)   MOVQ    40(SP), CX
            0x0072 00114 (a.go:6)   MOVQ    48(SP), DX
            0x0077 00119 (a.go:6)   MOVQ    DX, "".autotmp_0+64(SP)
            0x007c 00124 (a.go:6)   MOVQ    56(SP), BX
            0x0081 00129 (a.go:6)   MOVQ    BX, "".x+16(SB)
            0x0088 00136 (a.go:6)   MOVL    runtime.writeBarrier(SB), AX
            0x008e 00142 (a.go:6)   TESTB   AL, AL
            0x0090 00144 (a.go:6)   JNE     $0, 162
            0x0092 00146 (a.go:6)   MOVQ    CX, "".x(SB)
            0x0099 00153 (a.go:6)   MOVQ    "".x(SB), BX
            0x00a0 00160 (a.go:6)   JMP     53
            0x00a2 00162 (a.go:6)   LEAQ    "".x(SB), BX
            0x00a9 00169 (a.go:6)   MOVQ    BX, (SP)
            0x00ad 00173 (a.go:6)   MOVQ    CX, 8(SP)
            0x00b2 00178 (a.go:6)   PCDATA  $0, $0
            0x00b2 00178 (a.go:6)   CALL    runtime.writebarrierptr(SB)
            0x00b7 00183 (a.go:6)   MOVQ    "".autotmp_0+64(SP), DX
            0x00bc 00188 (a.go:6)   JMP     153
            0x00be 00190 (a.go:6)   NOP
            0x00be 00190 (a.go:5)   CALL    runtime.morestack_noctxt(SB)
            0x00c3 00195 (a.go:5)   JMP     0
    
    
    Fixes #14969 again
    
    Change-Id: Ia50463b1f506011aad0718a4fef1d4738e43c32d
    Reviewed-on: https://go-review.googlesource.com/22197
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit b5ddbb90bf1b6aa3881a342bbf7986ba14df3348
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Feb 26 15:52:13 2016 -0800

    spec: refine rules about terminating statements
    
    Per a suggestion from mdempsky.
    
    Both gc and gccgo consider a statement list as terminating if the
    last _non_empty_ statement is terminating; i.e., trailing semis are
    ok. Only gotype followed the current stricter rule in the spec.
    
    This change adjusts the spec to match gc and gccgo behavior. In
    support of this change, the spec has a matching rule for fallthrough,
    which in valid positions may be followed by trailing semis as well.
    
    For details and examples, see the issue below.
    
    Fixes #14422.
    
    Change-Id: Ie17c282e216fc40ecb54623445c17be111e17ade
    Reviewed-on: https://go-review.googlesource.com/19981
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit a39950ba66998b7166a37ddf878d0a414a267ea5
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Apr 15 15:20:24 2016 -0400

    crypto/aes: delete TestEncryptBlock and TestDecryptBlock
    
    The encryptBlock and decryptBlock functions are already tested
    (via the public API) by TestCipherEncrypt and TestCipherDecrypt
    respectively. Both sets of tests check the output of the two
    functions against the same set of FIPS 197 examples. I therefore
    think it is safe to delete these two tests without losing any
    coverage.
    
    Deleting these two tests will make it easier to modify the
    internal API, which I am hoping to do in future CLs.
    
    Change-Id: I0dd568bc19f47b70ab09699b507833e527d39ba7
    Reviewed-on: https://go-review.googlesource.com/22115
    Reviewed-by: Adam Langley <agl@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3e9264c9ae781a2cd28127deaed6ae26f84b4b15
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sun Feb 28 09:37:36 2016 +0900

    net: add support for Zone of IPNet
    
    This change adds Zone field to IPNet structure for making it possible to
    determine which network interface is associated with IPv6 link-local
    address. Also makes ParseCIDR and IPNet.String capable handling literal
    IPv6 address prefixes with zone identifier.
    
    Fixes #14518.
    
    Change-Id: I8f8a40d3b4f500ffef25728d4995651379d8408a
    Reviewed-on: https://go-review.googlesource.com/19946
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 45bb8874314635fc40945da3f765a7844482bfef
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Tue Apr 19 14:31:41 2016 +1000

    net: stop using GetHostByName and GetServByName
    
    Go 1.6 requires Windows XP or later. I have:
    
    C:\>systeminfo | findstr /B /C:"OS Name" /C:"OS Version"
    OS Name:                   Microsoft Windows XP Professional
    OS Version:                5.1.2600 Service Pack 3 Build 2600
    
    Running "go test" PASSes on my system after this CL is applied.
    
    Change-Id: Id59d169138c4a4183322c89ee7e766fb74d381fa
    Reviewed-on: https://go-review.googlesource.com/22209
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f947429983d3906127432120b49fa3362e7de374
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Apr 19 03:24:21 2016 +0200

    net: enable DualStack mode on Plan 9
    
    DualStack mode requires dialTCP to support cancellation,
    which has been implemented for Plan 9 in CL 22144.
    
    Updates #11225.
    Updates #11932.
    
    Change-Id: I6e468363dc147326b097b604c122d5af80362787
    Reviewed-on: https://go-review.googlesource.com/22204
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4331ab97802c39052f063d7597187563882353aa
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Apr 19 03:19:12 2016 +0200

    net: enable TestDialParallel, TestDialerFallbackDelay and TestDialCancel on Plan 9
    
    TestDialParallel, TestDialerFallbackDelay and TestDialCancel
    require dialTCP to support cancellation, which has been
    implemented for Plan 9 in CL 22144.
    
    Updates #11225.
    Updates #11932.
    
    Change-Id: I3b30a645ef79227dfa519cde8d46c67b72f2485c
    Reviewed-on: https://go-review.googlesource.com/22203
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a5386f3c7dc7735aa4695647896ba94bab0341e0
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Apr 18 13:55:40 2016 -0700

    cmd/compile: fix internal consistency check with binary exporter
    
    Per feedback from mdempsky from https://go-review.googlesource.com/22096.
    
    Also fix emitted position info.
    
    Change-Id: I7ff1967430867d922be8784832042c75d81df28b
    Reviewed-on: https://go-review.googlesource.com/22198
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 262814467e7e574ac03114d23931042272fc714d
Author: David du Colombier <0intro@gmail.com>
Date:   Mon Apr 18 22:37:33 2016 +0200

    net: handle hangup in read on Plan 9
    
    On Plan 9, when closing a TCP connection, we
    write the "hangup" string to the TCP ctl file.
    
    The next read on the TCP data file will return
    an error like "/net/tcp/18/data: Hangup", while
    in Go, we expect to return io.EOF.
    
    This change makes Read to return io.EOF when
    an error string containing "Hangup" is returned.
    
    Change-Id: I3f71ed543704190b441cac4787488a77f46d88a1
    Reviewed-on: https://go-review.googlesource.com/22149
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f81ae3b22ca9cab78251b38fe52eacfea57e08f5
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 6 13:09:06 2016 -0400

    cmd/link: shorter type symbol names
    
    Use (part of) a SHA-1 checksum to replace type symbol names.
    
    In typical programs this has no effect because types are not included
    in the symbol table. But when dynamically linking, types are in the
    table to make sure there is only one *rtype per Go type.
    
    Eventually we may be able to get rid of all pointers to rtype values in
    the binary, but probably not by 1.7. And this has a nice effect on
    binary size today:
    
    libstd.so:
            before 27.4MB
            after  26.2MB
    
    For #6853.
    
    Change-Id: I603d7f3e5baad84f59f2fd37eeb1e4ae5acfe44a
    Reviewed-on: https://go-review.googlesource.com/21583
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4d5adf1eb1a955bae08012e568c645eb4d7f3544
Author: Keith Randall <khr@golang.org>
Date:   Mon Apr 18 09:28:50 2016 -0700

    cmd/compile: logical operation identities
    
    Some rewrites to simplify logical operations.
    
    Fixes #14363
    
    Change-Id: I45a1e8f227267cbcca0778101125f7bab776a5dd
    Reviewed-on: https://go-review.googlesource.com/22188
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4140da7b57f944cc16324496adcc5a41d7a987ed
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Apr 4 13:07:24 2016 -0400

    cmd/link, cmd/compile: typelink sorting in linker
    
    Instead of writing out the type almost twice in the symbol name,
    teach the linker how to sort typelink symbols by their contents.
    
    This ~halves the size of typelink symbol names, which helps very
    large (6KB) names like those mentioned in #15104.
    
    This does not increase the total sorting work done by the linker,
    and makes it possible to use shorter symbol names for types. See
    the follow-on CL 21583.
    
    Change-Id: Ie5807565ed07d31bc477d20f60e4c0b47144f337
    Reviewed-on: https://go-review.googlesource.com/21457
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2e2df78ae9c2c5e96cce99bccebd5a22f30d6a1a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Apr 18 04:50:19 2016 -0400

    reflect: test that method name offset is valid
    
    Bug fix went in CL 21396, this is a matching test.
    
    Fixes #15343
    
    Change-Id: I3670145c7cac45cb4fb3121ffc039cfb7fa7c87a
    Reviewed-on: https://go-review.googlesource.com/22171
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 411a0adc9bbee3a981af93de5f83b13f26f0413f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Apr 17 19:53:39 2016 -0700

    runtime: add benchmarks for in-place append
    
    Change-Id: I2b43cc976d2efbf8b41170be536fdd10364b65e5
    Reviewed-on: https://go-review.googlesource.com/22190
    Reviewed-by: Keith Randall <khr@golang.org>

commit b024ed0d944c0f839e699fb10af633d295abb311
Author: Keith Randall <khr@golang.org>
Date:   Mon Apr 18 11:17:55 2016 -0700

    cmd/compile: eliminate copy for static literals
    
    *p = [5]byte{1,2,3,4,5}
    
    First we allocate a global containing the RHS.  Then we copy
    that global to a local stack variable, and then copy that local
    stack variable to *p.  The intermediate copy is unnecessary.
    
    Note that this only works if the RHS is completely constant.
    If the code was:
    *p = [5]byte{1,2,x,4,5}
    this optimization doesn't apply as we have to construct the
    RHS on the stack before copying it to *p.
    
    Fixes #12841
    
    Change-Id: I7cd0404ecc7a2d1750cbd8fe1222dba0fa44611f
    Reviewed-on: https://go-review.googlesource.com/22192
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit f60fcca5f1e7b7a33e219ec45d4bd9dc58dd2552
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 16 14:17:40 2016 -0700

    net: fix plan9 after context change, propagate contexts more
    
    My previous https://golang.org/cl/22101 to add context throughout the
    net package broke Plan 9, which isn't currently tested (#15251).
    
    It also broke some old unsupported version of Windows (Windows 2000?)
    which doesn't have the ConnectEx function, but that was only found
    visually, since our minimum supported Windows version has ConnectEx.
    This change simplifies the Windows and deletes the non-ConnectEx code
    path.  Windows 2000 will work even less now, if it even worked
    before. Windows XP remains our minimum supported version.
    
    Specifically, the previous CL stopped using the "dial" function, which
    0intro noted:
    https://github.com/golang/go/issues/15333#issuecomment-210842761
    
    This CL removes the dial function instead and makes plan9's net
    implementation respect contexts, which likely fixes a number of
    t.Skipped tests. I'm leaving that to 0intro to investigate.
    
    In the process of propagating and respecting contexts for plan9, I had
    to change some signatures to add contexts to more places and ended up
    pushing contexts down into the Go-based DNS resolution as well,
    replacing the pure-Go DNS implementation's use of "timeout
    time.Duration" with a context instead.
    
    Updates #11932
    Updates #15328
    
    Fixes #15333
    
    Change-Id: I6ad1e62f38271cdd86b3f40921f2d0f23374936a
    Reviewed-on: https://go-review.googlesource.com/22144
    Reviewed-by: David du Colombier <0intro@gmail.com>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a3c92c9db137413b17447a72c334c3e560bace06
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Apr 18 07:24:48 2016 -0400

    cmd/link: use gold when dynamic linking on arm64
    
    The GNU linker follows the letter of -znocopyreloc by refusing to
    generate COPY relocations on arm64. Unfortunately it generates an
    error instead of finding another way. The gold linker works, so
    switch to it.
    
    Fixes linux/arm64 build.
    
    Change-Id: I1f7119d999c8f9f1f2d0c1e06b6462cea9c02a71
    Reviewed-on: https://go-review.googlesource.com/22185
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0db2bf2313cdd7711c2215fab2ae234a0f591fe8
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Apr 15 21:56:30 2016 +0000

    net/http: document Hijacker and Flusher more
    
    Fixes #15312
    
    Change-Id: I4fabef3f21081bc4b020069851b5c2504bc6b4d8
    Reviewed-on: https://go-review.googlesource.com/22122
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit f5423a63dfa5d010e7796271666f592a5f9dad70
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Apr 17 15:33:07 2016 -0700

    cmd/compile: a dot expression can not be a struct literal key
    
    Passes toolstash -cmp.
    
    Fixes #15311.
    
    Change-Id: I1d67f5c9de38e899ab2d6c8986fabd6f197df23a
    Reviewed-on: https://go-review.googlesource.com/22162
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 95df0c6ab93f6a42bdc9fd45500fd4d56bfc9add
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Mar 28 21:51:10 2016 -0400

    cmd/compile, etc: use name offset in method tables
    
    Introduce and start using nameOff for two encoded names. This pair
    of changes is best done together because the linker's method decoder
    expects the method layouts to match.
    
    Precursor to converting all existing name and *string fields to
    nameOff.
    
    linux/amd64:
            cmd/go:  -45KB (0.5%)
            jujud:  -389KB (0.6%)
    
    linux/amd64 PIE:
            cmd/go: -170KB (1.4%)
            jujud:  -1.5MB (1.8%)
    
    For #6853.
    
    Change-Id: Ia044423f010fb987ce070b94c46a16fc78666ff6
    Reviewed-on: https://go-review.googlesource.com/21396
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3c8d6af8e02bbf230c2bef9f181d8ea393068299
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Apr 16 11:08:41 2016 -0400

    cmd/link: use -znocopyreloc when dynamic linking
    
    On ARM, use the gold linker to avoid copy relocations.
    https://sourceware.org/bugzilla/show_bug.cgi?id=19962
    
    Change-Id: Icf82a38d39495d4518812713b957a03a6652c728
    Reviewed-on: https://go-review.googlesource.com/22141
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 135572eb326dfc445e1faf74fdffaf82d041c22d
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Apr 18 13:31:50 2016 +1000

    cmd/go: mention that _test.go files are ignored when building
    
    Fixes #15315
    
    Change-Id: I8fea31507a5f83df8a86fb067f1b11d90133dc09
    Reviewed-on: https://go-review.googlesource.com/22180
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 6ec481b06c1ceba5792e355ca45f7476bb78f21f
Author: Klaus Post <klauspost@gmail.com>
Date:   Sun Apr 10 12:00:13 2016 +0200

    compress/flate: use uncompressed if dynamic encoding is larger
    
    This adds size calculation to "dynamic" writes.
    This ensures that if dynamic Huffman encoding is bigger,
    or only slightly smaller than raw data, the block is written
    uncompressed.
    
    To minimize the code duplication of this function, the
    size calculation has been moved to separate functions.
    
    Since I was modifying these calculations, I changed "int64"
    size calculations to "int". Blocks are of very limited size,
    so there is not any risk of overflows.
    This should mainly improve 32 bit performance, but amd64 also
    gets a slight boost:
    
    name                       old time/op    new time/op    delta
    EncodeDigitsHuffman1e4-8     49.9µs ± 1%    49.3µs ± 1%  -1.21%  (p=0.000 n=10+10)
    EncodeDigitsHuffman1e5-8      476µs ± 1%     471µs ± 3%    ~     (p=0.218 n=10+10)
    EncodeDigitsHuffman1e6-8     4.80ms ± 2%    4.75ms ± 2%    ~      (p=0.243 n=10+9)
    EncodeDigitsSpeed1e4-8        305µs ± 3%     300µs ± 1%  -1.86%  (p=0.005 n=10+10)
    EncodeDigitsSpeed1e5-8       3.67ms ± 2%    3.58ms ± 1%  -2.29%    (p=0.000 n=9+8)
    EncodeDigitsSpeed1e6-8       38.3ms ± 2%    37.0ms ± 1%  -3.45%    (p=0.000 n=9+9)
    EncodeDigitsDefault1e4-8      361µs ± 2%     353µs ± 1%  -2.21%  (p=0.000 n=10+10)
    EncodeDigitsDefault1e5-8     5.24ms ± 2%    5.19ms ± 2%    ~     (p=0.105 n=10+10)
    EncodeDigitsDefault1e6-8     56.5ms ± 3%    55.1ms ± 1%  -2.42%  (p=0.001 n=10+10)
    EncodeDigitsCompress1e4-8     362µs ± 2%     358µs ± 2%    ~     (p=0.123 n=10+10)
    EncodeDigitsCompress1e5-8    5.26ms ± 3%    5.20ms ± 1%    ~     (p=0.089 n=10+10)
    EncodeDigitsCompress1e6-8    56.0ms ± 4%    55.0ms ± 1%    ~      (p=0.065 n=10+9)
    EncodeTwainHuffman1e4-8      70.9µs ± 3%    67.6µs ± 2%  -4.59%  (p=0.000 n=10+10)
    EncodeTwainHuffman1e5-8       556µs ± 2%     533µs ± 1%  -4.20%  (p=0.000 n=10+10)
    EncodeTwainHuffman1e6-8      5.54ms ± 3%    5.29ms ± 1%  -4.37%   (p=0.000 n=10+9)
    EncodeTwainSpeed1e4-8         294µs ± 3%     293µs ± 1%    ~      (p=0.965 n=10+8)
    EncodeTwainSpeed1e5-8        2.59ms ± 2%    2.56ms ± 1%    ~     (p=0.353 n=10+10)
    EncodeTwainSpeed1e6-8        25.6ms ± 1%    24.9ms ± 1%  -2.62%   (p=0.000 n=9+10)
    EncodeTwainDefault1e4-8       419µs ± 2%     417µs ± 1%    ~      (p=0.780 n=10+9)
    EncodeTwainDefault1e5-8      6.23ms ± 4%    6.16ms ± 1%    ~     (p=0.218 n=10+10)
    EncodeTwainDefault1e6-8      66.2ms ± 2%    65.7ms ± 1%    ~     (p=0.529 n=10+10)
    EncodeTwainCompress1e4-8      426µs ± 1%     428µs ± 2%    ~      (p=0.549 n=9+10)
    EncodeTwainCompress1e5-8     6.80ms ± 1%    6.85ms ± 3%    ~      (p=0.156 n=9+10)
    EncodeTwainCompress1e6-8     74.6ms ± 3%    73.8ms ± 2%    ~     (p=0.280 n=10+10)
    
    name                       old speed      new speed      delta
    EncodeDigitsHuffman1e4-8    200MB/s ± 1%   203MB/s ± 1%  +1.23%  (p=0.000 n=10+10)
    EncodeDigitsHuffman1e5-8    210MB/s ± 1%   212MB/s ± 3%    ~      (p=0.356 n=10+9)
    EncodeDigitsHuffman1e6-8    208MB/s ± 2%   210MB/s ± 2%    ~      (p=0.243 n=10+9)
    EncodeDigitsSpeed1e4-8     32.8MB/s ± 3%  33.4MB/s ± 1%  +1.88%  (p=0.005 n=10+10)
    EncodeDigitsSpeed1e5-8     27.2MB/s ± 2%  27.9MB/s ± 1%  +2.60%   (p=0.000 n=10+8)
    EncodeDigitsSpeed1e6-8     26.1MB/s ± 2%  27.0MB/s ± 1%  +3.56%    (p=0.000 n=9+9)
    EncodeDigitsDefault1e4-8   27.7MB/s ± 2%  28.4MB/s ± 1%  +2.24%  (p=0.000 n=10+10)
    EncodeDigitsDefault1e5-8   19.1MB/s ± 2%  19.3MB/s ± 2%    ~     (p=0.101 n=10+10)
    EncodeDigitsDefault1e6-8   17.7MB/s ± 3%  18.1MB/s ± 1%  +2.46%  (p=0.001 n=10+10)
    EncodeDigitsCompress1e4-8  27.6MB/s ± 2%  27.9MB/s ± 2%    ~     (p=0.119 n=10+10)
    EncodeDigitsCompress1e5-8  19.0MB/s ± 3%  19.2MB/s ± 1%    ~     (p=0.085 n=10+10)
    EncodeDigitsCompress1e6-8  17.9MB/s ± 4%  18.1MB/s ± 3%    ~     (p=0.110 n=10+10)
    EncodeTwainHuffman1e4-8     141MB/s ± 3%   148MB/s ± 2%  +4.79%  (p=0.000 n=10+10)
    EncodeTwainHuffman1e5-8     180MB/s ± 2%   188MB/s ± 1%  +4.38%  (p=0.000 n=10+10)
    EncodeTwainHuffman1e6-8     181MB/s ± 3%   189MB/s ± 1%  +4.54%   (p=0.000 n=10+9)
    EncodeTwainSpeed1e4-8      34.0MB/s ± 3%  34.1MB/s ± 1%    ~      (p=0.948 n=10+8)
    EncodeTwainSpeed1e5-8      38.7MB/s ± 2%  39.0MB/s ± 1%    ~     (p=0.353 n=10+10)
    EncodeTwainSpeed1e6-8      39.1MB/s ± 1%  40.1MB/s ± 1%  +2.68%   (p=0.000 n=9+10)
    EncodeTwainDefault1e4-8    23.9MB/s ± 2%  24.0MB/s ± 1%    ~      (p=0.734 n=10+9)
    EncodeTwainDefault1e5-8    16.0MB/s ± 4%  16.2MB/s ± 1%    ~     (p=0.210 n=10+10)
    EncodeTwainDefault1e6-8    15.1MB/s ± 2%  15.2MB/s ± 1%    ~     (p=0.515 n=10+10)
    EncodeTwainCompress1e4-8   23.5MB/s ± 1%  23.4MB/s ± 2%    ~      (p=0.536 n=9+10)
    EncodeTwainCompress1e5-8   14.7MB/s ± 1%  14.6MB/s ± 3%    ~      (p=0.138 n=9+10)
    EncodeTwainCompress1e6-8   13.4MB/s ± 3%  13.5MB/s ± 2%    ~     (p=0.239 n=10+10)
    
    This improves "random input" to the dynamic writer, which is why the test data is
    updated. The output size goes from 1051 to 1005 bytes.
    
    Change-Id: I3ee11d2d2511b277d2dd16734aeea07c98bca450
    Reviewed-on: https://go-review.googlesource.com/21757
    Reviewed-by: Joe Tsai <joetsai@digital-static.net>
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit 3629814c4399010a47f146516511ecfef64f05c3
Author: David Symonds <dsymonds@golang.org>
Date:   Mon Apr 18 09:20:58 2016 +1000

    doc: link to iant's generics proposal from the FAQ.
    
    Updates #15292.
    
    Change-Id: I229f66c2a41ae0738225f2ba7a574478f5d6d620
    Reviewed-on: https://go-review.googlesource.com/22163
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 04535459caf349bc5a731133f5e9eef5e1ab9af9
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Apr 17 15:13:46 2016 -0700

    .gitignore: don't ignore y.output
    
    We no longer use yacc, and we shouldn't have any y.output files.
    
    Change-Id: I045671b6aef3f53c3cfe068b0c14a4871689c13e
    Reviewed-on: https://go-review.googlesource.com/22161
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5c434e93a16fae3edc4f0494bc796eb80bfbd0b2
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Apr 17 11:24:57 2016 -0700

    fmt: remove extra space in doc for compound objects
    
    Fixes #15339
    
    Change-Id: I0b006deefb58ccfc47beae4e1b8da3d77fafda6b
    Reviewed-on: https://go-review.googlesource.com/22148
    Reviewed-by: Rob Pike <r@golang.org>

commit a85a224e8e835fc9544f5e9e7b28d7bbc732045b
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Apr 16 09:24:43 2016 +0200

    fmt: fix padding when precision is set for integer formatting
    
    Ignore the f.zero flag and use spaces for padding instead
    when precision is set.
    
    Fixes #15331
    
    Change-Id: I3ac485df24b7bdf4fddf69e3cc17c213c737b5ff
    Reviewed-on: https://go-review.googlesource.com/22131
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit d07709ed7b798a1eca3394202a241e6f36fe9695
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Apr 16 21:42:07 2016 -0700

    crypto/x509: gofmt
    
    Change-Id: I05659a836612f958083fea9a27805eb9f0ac0836
    Reviewed-on: https://go-review.googlesource.com/22145
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 31da093c1e8b82bcba42846a4a8f670452df88f3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Apr 16 18:36:07 2016 -0700

    image/draw: remove some bounds checks from DrawYCbCr
    
    It’d be nicer to write just
    
    _ = dpix[x+3]
    
    but the compiler isn’t able to reason about offsets
    from symbols (yet).
    
    image/draw benchmark:
    
    YCbCr-8   722µs ± 3%   682µs ± 3%  -5.54%  (p=0.000 n=50+50)
    
    Change-Id: Ia1e399496ed87c282bf0f9ca56c0b2d4948a0df9
    Reviewed-on: https://go-review.googlesource.com/22146
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2563b6f9fe76da6c9f95c7766986f4684b80ae6d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Apr 3 14:44:29 2016 -0700

    cmd/compile/internal/ssa: use Compare instead of Equal
    
    They have different semantics.
    
    Equal is stricter and is designed for the front-end.
    Compare is looser and cheaper and is designed for the back-end.
    To avoid possible regression, remove Equal from ssa.Type.
    
    Updates #15043
    
    Change-Id: Ie23ce75ff6b4d01b7982e0a89e6f81b5d099d8d6
    Reviewed-on: https://go-review.googlesource.com/21483
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>

commit 462aa7ec7b854f5a1bb4f633cb439eb67bced625
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 13 18:14:52 2016 +0000

    encoding/json: update docs to not use misuse the term "object"
    
    In JSON terminology, "object" is a collect of key/value pairs. But a
    JSON object is only one type of JSON value (others are string, number,
    array, true, false, null).
    
    This updates the Go docs (at least the public godoc) to not use
    "object" when we mean any JSON value.
    
    Change-Id: Ieb1c456c703693714d63d9d09d306f4d9e8f4597
    Reviewed-on: https://go-review.googlesource.com/22003
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 2cdcb6f8296b6528bb7d256a45e339c4aefb9109
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 14 13:41:36 2016 -0400

    runtime: scavenge memory on physical page-aligned boundaries
    
    Currently the scavenger marks memory unused in multiples of the
    allocator page size (8K). This is safe as long as the true physical
    page size is 4K (or 8K), as it is on many platforms. However, on
    ARM64, PPC64x, and MIPS64, the physical page size is larger than 8K,
    so if we attempt to mark memory unused, the kernel will round the
    boundaries of the region *out* to all pages covered by the requested
    region, and we'll release a larger region of memory than intended. As
    a result, the scavenger is currently disabled on these platforms.
    
    Fix this by first rounding the region to be marked unused *in* to
    multiples of the physical page size, so that when we ask the kernel to
    mark it unused, it releases exactly the requested region.
    
    Fixes #9993.
    
    Change-Id: I96d5fdc2f77f9d69abadcea29bcfe55e68288cb1
    Reviewed-on: https://go-review.googlesource.com/22066
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 1151473077fb03df798d4eb57a22fa820f9e41f8
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 14 13:40:35 2016 -0400

    runtime: check that sysUnused is always physical-page aligned
    
    If sysUnused is passed an address or length that is not aligned to the
    physical page boundary, the kernel will unmap more memory than the
    caller wanted. Add a check for this.
    
    For #9993.
    
    Change-Id: I68ff03032e7b65cf0a853fe706ce21dc7f2aaaf8
    Reviewed-on: https://go-review.googlesource.com/22065
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 8ce844e88ed8c16bef7febea05b003b50bd0609e
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 14 13:27:36 2016 -0400

    runtime: check kernel physical page size during init
    
    The runtime hard-codes an assumed physical page size. If this is
    smaller than the kernel's page size or not a multiple of it, sysUnused
    may incorrectly release more memory to the system than intended.
    
    Add a runtime startup check that the runtime's assumed physical page
    is compatible with the kernel's physical page size.
    
    For #9993.
    
    Change-Id: Ida9d07f93c00ca9a95dd55fc59bf0d8a607f6728
    Reviewed-on: https://go-review.googlesource.com/22064
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit d6b177d1eb7849375e246b97c58406aed7350c86
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 14 15:08:24 2016 -0400

    runtime: remove empty 386 archauxv
    
    archauxv no longer does anything on 386, so remove it.
    
    Change-Id: I94545238e40fa6a6832a7c3b40aedfc6c1f6a97b
    Reviewed-on: https://go-review.googlesource.com/22063
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 90addd3d41852192ba697d33c9b1660988b82ed7
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 14 12:32:28 2016 -0400

    runtime: common handling of _AT_RANDOM auxv
    
    The Linux kernel provides 16 bytes of random data via the auxv vector
    at startup. Currently we consume this separately on 386, amd64, arm,
    and arm64. Now that we have a common auxv parser, handle _AT_RANDOM in
    the common path.
    
    Change-Id: Ib69549a1d37e2d07a351cf0f44007bcd24f0d20d
    Reviewed-on: https://go-review.googlesource.com/22062
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c955bb2040e601c474e547b8badbe44677c9fbdf
Author: Austin Clements <austin@google.com>
Date:   Thu Apr 14 12:12:45 2016 -0400

    runtime: common auxv parser
    
    Currently several different Linux architectures have separate copies
    of the auxv parser. Bring these all together into a single copy of the
    parser that calls out to a per-arch handler for each tag/value pair.
    This is in preparation for handling common auxv tags in one place.
    
    For #9993.
    
    Change-Id: Iceebc3afad6b4133b70fca7003561ae370445c10
    Reviewed-on: https://go-review.googlesource.com/22061
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 26ecb42fb4c5ee1d8b64f12e5bb8df6549523d23
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sat Apr 16 02:04:00 2016 -0700

    net/http: normalize empty port in URL.Host's ":port"
    
    - Ensures that the empty port and preceeding ":"
    in a URL.Host are stripped.
    Normalize the empty port in a URL.Host's ":port" as
    mandated by RFC 3986 Section 6.2.3 which states that:
    `Likewise an explicit ":port", for which the port is empty or
    the default for the scheme, is equivalent to one where the port
    and its ":" delimiter are elided and thus should be
    removed by scheme-based normalization.`
    
    - Moves function `hasPort` from client.go (where it was defined but
    not used directly), to http.go the common area.
    
    Fixes #14836
    
    Change-Id: I2067410377be9c71106b1717abddc2f8b1da1c03
    Reviewed-on: https://go-review.googlesource.com/22140
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 585590549a3c6e26e7963081e11478a1913744a6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Apr 15 22:59:36 2016 +0000

    net/http: add Transport.Dialer, plumb RoundTrip contexts to net package
    
    This simply connects the contexts, pushing them down the call stack.
    Future CLs will utilize them.
    
    For #12580 (http.Transport tracing/analytics)
    Updates #13021
    
    Change-Id: I5b2074d6eb1e87d79a767fc0609c84e7928d1a16
    Reviewed-on: https://go-review.googlesource.com/22124
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 318da8d66958574497450e4dcee518df55194f14
Author: David du Colombier <0intro@gmail.com>
Date:   Sat Apr 16 04:36:42 2016 +0200

    net: ignore lack of deadline support on Plan 9
    
    Since CL 22101, network tests are failing on Plan 9
    due to the lack of deadline support.
    
    Instead of panicking, we just ignore the deadline
    when set.
    
    Update #11932.
    Fixes #15328.
    
    Change-Id: I1399303b0b3d6d81e0b8b8d327980d978b411a46
    Reviewed-on: https://go-review.googlesource.com/22127
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 002c69e05d6a24693ac1052d98845ec635f34c19
Author: Morten Siebuhr <sbhr@sbhr.dk>
Date:   Fri Feb 19 21:53:17 2016 +0100

    net: fix looking up port numbers starting with numbers.
    
    LookupPort() correctly parses service names beginning with numerals by
    implementing a new parser, mainly taken from strconv/atoi.go.
    
    Also testes some previously undefined behaviours around port numbers
    larger than 65535 that previously could lead to some tests fail with
    EOPNOTSUPP (Operation Not Supported).
    
    Fixes #14322
    
    Change-Id: I1b90dbed434494723e261d84e73fe705e5c0507a
    Reviewed-on: https://go-review.googlesource.com/19720
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit b6b4004d5a5bf7099ac9ab76777797236da7fe63
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Apr 14 17:47:25 2016 -0700

    net: context plumbing, add Dialer.DialContext
    
    For #12580 (http.Transport tracing/analytics)
    Updates #13021
    
    Change-Id: I126e494a7bd872e42c388ecb58499ecbf0f014cc
    Reviewed-on: https://go-review.googlesource.com/22101
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 1d0977a1d552ad19a88c4ba9aeecd403699d82b6
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Apr 14 16:51:18 2016 -0700

    cmd/cgo: add missing formatting directive in error message
    
    Fixes #15310.
    
    Change-Id: I588b3c630a20a6878f7cd00f9af29b1dd8a4abf6
    Reviewed-on: https://go-review.googlesource.com/22100
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d57a118afabdd5b0f516d8d3225b2c7f8c96d64a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 15 14:22:27 2016 -0700

    cmd/compile: remove dead flags
    
    For some time now, the -d flag has been used to control various named
    debug options, rather than setting Debug['d']. Consequently, that
    means dflag() always returns false, which means the -y flag is also
    useless.
    
    Similarly, Debug['L'] is never used anywhere, so the -L flag can be
    dropped too.
    
    Change-Id: I4bb12454e462410115ec4f5565facf76c5c2f255
    Reviewed-on: https://go-review.googlesource.com/22121
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 75c079cb976e2ba2106074ca0b3005b788c18f08
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 15 13:39:47 2016 -0700

    archive/tar: style nit: s/nano_buf/nanoBuf/
    
    Pointed out during review of golang.org/cl/22104.
    
    Change-Id: If8842e7f8146441e918ec6a2b6e893b7cf88615c
    Reviewed-on: https://go-review.googlesource.com/22120
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6f59ccb052534f3293e9e0b0e02f35578901ef3c
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Jan 15 14:57:41 2016 +0900

    runtime: don't always unblock all signals on dragonfly, freebsd and openbsd
    
    https://golang.org/cl/10173 intrduced msigsave, ensureSigM and
    _SigUnblock but didn't enable the new signal save/restore mechanism for
    SIG{HUP,INT,QUIT,ABRT,TERM} on DragonFly BSD, FreeBSD and OpenBSD.
    
    At present, it looks like they have the implementation. This change
    enables the new mechanism on DragonFly BSD, FreeBSD and OpenBSD the same
    as Darwin, NetBSD.
    
    Change-Id: Ifb4b4743b3b4f50bfcdc7cf1fe1b59c377fa2a41
    Reviewed-on: https://go-review.googlesource.com/18657
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7345fa54c17e979c4dc9d5c26c385d77ad614592
Author: Martin Möhrmann <martisch@uos.de>
Date:   Mon Mar 21 14:36:21 2016 +0100

    fmt: optimize struct layout and intbuf size
    
    Move boolean fields to the end of the pp struct for better packing.
    
    Increase the fmt.intbuf size to leave no padding space unused
    at the end of the fmt struct on 32 bit architectures.
    
    The size of the pp struct on amd64 is decreased from 192 byte
    to 184 byte and on 386 from 132 byte to 128 byte.
    
    Simplify buffer size calculation in fmt_integer.
    
    Consolidate test cases for intbuf overflow checks.
    
    amd64 Haswell:
    
    name                     old time/op  new time/op  delta
    SprintfPadding-2          227ns ± 2%   227ns ± 1%    ~     (p=0.941 n=25+25)
    SprintfEmpty-2           38.4ns ± 6%  35.8ns ±23%  -6.71%  (p=0.030 n=24+25)
    SprintfString-2           100ns ± 0%   101ns ± 0%  +1.00%  (p=0.000 n=19+18)
    SprintfTruncateString-2   142ns ± 1%   142ns ± 1%  +0.37%  (p=0.028 n=25+25)
    SprintfQuoteString-2      397ns ± 0%   393ns ± 0%  -0.82%  (p=0.000 n=21+24)
    SprintfInt-2              101ns ± 2%   102ns ± 4%    ~     (p=0.159 n=21+24)
    SprintfIntInt-2           155ns ± 3%   155ns ± 3%    ~     (p=0.934 n=25+25)
    SprintfPrefixedInt-2      252ns ± 2%   251ns ± 2%    ~     (p=0.198 n=25+25)
    SprintfFloat-2            184ns ± 3%   179ns ± 2%  -3.07%  (p=0.000 n=24+25)
    SprintfComplex-2          532ns ± 2%   535ns ± 2%  +0.64%  (p=0.046 n=25+24)
    SprintfBoolean-2         90.5ns ± 3%  91.6ns ± 2%  +1.17%  (p=0.000 n=22+22)
    SprintfHexString-2        164ns ± 2%   165ns ± 3%    ~     (p=0.066 n=25+25)
    SprintfHexBytes-2         171ns ± 3%   170ns ± 3%    ~     (p=0.941 n=25+24)
    SprintfBytes-2            320ns ± 1%   313ns ± 1%  -2.31%  (p=0.000 n=24+21)
    SprintfStringer-2         347ns ± 2%   348ns ± 2%    ~     (p=0.426 n=24+24)
    SprintfStructure-2        753ns ± 1%   742ns ± 1%  -1.49%  (p=0.000 n=24+25)
    FprintInt-2               145ns ± 0%   144ns ± 0%  -0.69%  (p=0.000 n=24+23)
    FprintfBytes-2            163ns ± 0%   163ns ± 0%  -0.27%  (p=0.000 n=25+25)
    FprintIntNoAlloc-2        108ns ± 0%   105ns ± 0%  -2.78%  (p=0.000 n=25+2
    
    386 Haswell:
    
    name                     old time/op  new time/op  delta
    SprintfPadding-2          426ns ± 2%   422ns ± 1%  -0.89%  (p=0.000 n=25+24)
    SprintfEmpty-2           24.6ns ± 1%  24.5ns ± 0%  -0.39%  (p=0.000 n=22+15)
    SprintfString-2          99.1ns ± 3%  95.6ns ± 0%  -3.52%  (p=0.000 n=25+24)
    SprintfTruncateString-2   156ns ± 4%   153ns ± 1%  -1.65%  (p=0.000 n=24+23)
    SprintfQuoteString-2      500ns ± 2%   493ns ± 1%  -1.49%  (p=0.000 n=25+24)
    SprintfInt-2             92.6ns ± 9%  88.3ns ± 1%  -4.72%  (p=0.000 n=25+25)
    SprintfIntInt-2           143ns ± 7%   137ns ± 2%  -4.01%  (p=0.000 n=23+25)
    SprintfPrefixedInt-2      268ns ±19%   264ns ±16%    ~     (p=0.826 n=24+24)
    SprintfFloat-2            242ns ± 4%   246ns ± 2%  +1.60%  (p=0.000 n=25+25)
    SprintfComplex-2         1.04µs ± 3%  1.03µs ± 1%  -0.89%  (p=0.026 n=25+25)
    SprintfBoolean-2         82.2ns ± 9%  80.7ns ± 2%    ~     (p=0.163 n=24+24)
    SprintfHexString-2        240ns ± 5%   224ns ± 2%  -6.94%  (p=0.000 n=25+25)
    SprintfHexBytes-2         245ns ± 3%   234ns ± 2%  -4.55%  (p=0.000 n=25+25)
    SprintfBytes-2            432ns ±13%   419ns ± 2%    ~     (p=0.081 n=23+25)
    SprintfStringer-2         356ns ± 4%   356ns ± 4%    ~     (p=0.988 n=25+25)
    SprintfStructure-2        968ns ± 5%   948ns ± 2%  -2.11%  (p=0.000 n=25+25)
    FprintInt-2               206ns ± 0%   201ns ± 0%  -2.43%  (p=0.000 n=25+21)
    FprintfBytes-2            187ns ± 1%   187ns ± 1%    ~     (p=0.420 n=25+25)
    FprintIntNoAlloc-2        173ns ± 0%   168ns ± 0%  -2.89%  (p=0.000 n=25+2
    
    amd64 Ivy Bridge:
    
    name                     old time/op  new time/op  delta
    SprintfPadding-4          203ns ± 4%   210ns ± 8%  +3.27%  (p=0.000 n=23+25)
    SprintfEmpty-4           24.4ns ± 2%  24.4ns ± 3%    ~     (p=0.487 n=24+25)
    SprintfString-4          92.4ns ± 2%  93.1ns ± 3%    ~     (p=0.087 n=22+25)
    SprintfTruncateString-4   137ns ± 3%   136ns ± 2%  -1.02%  (p=0.002 n=25+25)
    SprintfQuoteString-4      378ns ± 1%   373ns ± 1%  -1.32%  (p=0.000 n=24+22)
    SprintfInt-4             89.9ns ± 3%  90.3ns ± 4%    ~     (p=0.444 n=25+25)
    SprintfIntInt-4           137ns ± 4%   138ns ± 3%    ~     (p=0.112 n=25+23)
    SprintfPrefixedInt-4      155ns ±14%   154ns ±14%    ~     (p=0.791 n=25+25)
    SprintfFloat-4            154ns ± 2%   154ns ± 3%    ~     (p=0.789 n=25+25)
    SprintfComplex-4          396ns ± 2%   402ns ± 3%  +1.53%  (p=0.001 n=23+25)
    SprintfBoolean-4         71.0ns ± 3%  71.2ns ± 2%    ~     (p=0.515 n=25+24)
    SprintfHexString-4        156ns ± 3%   150ns ± 5%  -3.69%  (p=0.000 n=24+25)
    SprintfHexBytes-4         154ns ± 3%   157ns ± 5%  +1.72%  (p=0.003 n=24+25)
    SprintfBytes-4            297ns ± 4%   291ns ± 3%  -1.86%  (p=0.000 n=25+25)
    SprintfStringer-4         275ns ± 3%   265ns ± 3%  -3.51%  (p=0.000 n=25+25)
    SprintfStructure-4        878ns ± 2%   823ns ± 2%  -6.21%  (p=0.000 n=25+22)
    FprintInt-4               145ns ± 1%   147ns ± 2%  +0.94%  (p=0.001 n=23+25)
    FprintfBytes-4            166ns ± 1%   168ns ± 2%  +0.81%  (p=0.000 n=24+25)
    FprintIntNoAlloc-4        113ns ± 2%   109ns ± 2%  -3.79%  (p=0.000 n=24+25)
    
    386 Ivy Bridge:
    
    name                     old time/op  new time/op  delta
    SprintfPadding-4          353ns ± 4%   354ns ± 4%    ~     (p=0.769 n=25+24)
    SprintfEmpty-4           21.9ns ± 6%  21.1ns ± 3%  -3.45%  (p=0.000 n=24+25)
    SprintfString-4          94.7ns ± 1%  93.0ns ± 3%  -1.77%  (p=0.000 n=24+23)
    SprintfTruncateString-4   150ns ± 2%   147ns ± 0%  -1.71%  (p=0.000 n=25+21)
    SprintfQuoteString-4      472ns ± 1%   479ns ± 1%  +1.48%  (p=0.000 n=25+23)
    SprintfInt-4             87.0ns ± 2%  85.3ns ± 2%  -1.95%  (p=0.000 n=25+25)
    SprintfIntInt-4           137ns ± 2%   134ns ± 2%  -1.97%  (p=0.000 n=24+23)
    SprintfPrefixedInt-4      166ns ± 8%   161ns ± 8%  -3.07%  (p=0.023 n=24+24)
    SprintfFloat-4            226ns ± 1%   219ns ± 1%  -2.97%  (p=0.000 n=24+25)
    SprintfComplex-4          867ns ± 1%   784ns ± 1%  -9.47%  (p=0.000 n=24+23)
    SprintfBoolean-4         77.2ns ± 2%  76.0ns ± 2%  -1.63%  (p=0.000 n=25+25)
    SprintfHexString-4        212ns ± 2%   214ns ± 2%  +0.96%  (p=0.000 n=25+25)
    SprintfHexBytes-4         221ns ± 2%   218ns ± 1%  -1.42%  (p=0.000 n=25+24)
    SprintfBytes-4            423ns ± 3%   417ns ± 1%  -1.49%  (p=0.000 n=25+24)
    SprintfStringer-4         306ns ± 3%   298ns ± 3%  -2.57%  (p=0.000 n=24+25)
    SprintfStructure-4       1.00µs ± 2%  0.98µs ± 2%  -1.34%  (p=0.000 n=24+24)
    FprintInt-4               202ns ± 3%   197ns ± 2%  -2.04%  (p=0.000 n=25+25)
    FprintfBytes-4            186ns ± 2%   184ns ± 2%  -0.88%  (p=0.000 n=24+25)
    FprintIntNoAlloc-4        170ns ± 2%   166ns ± 2%  -2.26%  (p=0.000 n=24+25)
    
    Change-Id: I46e62bf8b6afa90a24f75b40f1d354b2084b910b
    Reviewed-on: https://go-review.googlesource.com/20984
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 7f52b43954d75aa0c444d57b9d0eb7ff36eb3dd0
Author: Conrad Irwin <conrad.irwin@gmail.com>
Date:   Fri Feb 19 10:12:44 2016 -0800

    net/mail: allow utf-8 in ParseAddress
    
    The existing implementation correctly supported RFC 5322, this
    change adds support for UTF-8 while parsing as specified by
    RFC 6532. The serialization code is unchanged, so emails created
    by go remain compatible with very legacy systems.
    
    Fixes #14260
    
    Change-Id: Ib57e510f5834d273605e1892679f2df19ea931b1
    Reviewed-on: https://go-review.googlesource.com/19687
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alexandre Cesaro <alexandre.cesaro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 89a1f02834f1472cf307b222e14884ebd41086d3
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Tue Apr 12 18:14:45 2016 +0300

    hash/adler32: Unroll loop for extra performance.
    
    name         old time/op    new time/op    delta
    Adler32KB-4     592ns ± 0%     447ns ± 0%  -24.49%  (p=0.000 n=19+20)
    
    name         old speed      new speed      delta
    Adler32KB-4  1.73GB/s ± 0%  2.29GB/s ± 0%  +32.41%  (p=0.000 n=20+20)
    
    Change-Id: I38990aa66ca4452a886200018a57c0bc3af30717
    Reviewed-on: https://go-review.googlesource.com/21880
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8955745bfb9a3682e78b71fb8cb343abc4bd72a6
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Apr 15 08:56:01 2016 +0200

    image/color: order color computation to match rgb
    
    The order of computation was switched unintentionally
    in https://go-review.googlesource.com/21910.
    
    Revert the order to first compute g then b.
    
    Change-Id: I8cedb5e45fbad2679246839f609bcac4f9052403
    Reviewed-on: https://go-review.googlesource.com/22016
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit 0da4dbe2322eb3b6224df35ce3e9fc83f104762b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 14 19:09:36 2016 -0700

    all: remove unnecessary type conversions
    
    cmd and runtime were handled separately, and I'm intentionally skipped
    syscall. This is the rest of the standard library.
    
    CL generated mechanically with github.com/mdempsky/unconvert.
    
    Change-Id: I9e0eff886974dedc37adb93f602064b83e469122
    Reviewed-on: https://go-review.googlesource.com/22104
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 80e7dddffafa6c5eb8e98d642b87546eb8e445ab
Author: Nigel Tao <nigeltao@golang.org>
Date:   Fri Apr 15 16:29:43 2016 +1000

    compress/flate: fix a fmt.Fprintf style nit in a test.
    
    It's not a big deal (the for loop drops from 130-ish to 120-ish
    milliseconds for me) but it's not a big change either.
    
    Change-Id: I161a49caab5cae5a2b87866ed1dfb93627be8013
    Reviewed-on: https://go-review.googlesource.com/22110
    Reviewed-by: Klaus Post <klauspost@gmail.com>
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit 106b9d391518fe382162559e1520a8af72564130
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 14 19:44:55 2016 -0700

    cmd/internal/obj, cmd/link: random style cleanups
    
    Identified during review of golang.org/cl/22103.
    
    Change-Id: I86bab4cc17204df1e45deefdb0d0f9a8f6e17073
    Reviewed-on: https://go-review.googlesource.com/22106
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1441f76938bf61a2c8c2ed1a65082ddde0319633
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 14 19:04:45 2016 -0700

    cmd: remove unnecessary type conversions
    
    CL generated mechanically with github.com/mdempsky/unconvert.
    
    Change-Id: Ic590315cbc7026163a1b3f8ea306ba35f1a53256
    Reviewed-on: https://go-review.googlesource.com/22103
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit e7b96e1a1f1ead0d5def61f339e446c3afefa617
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Apr 14 18:51:18 2016 -0700

    cmd/internal/sys: cleanup documentation
    
    Expand description of ArchFamily, because it seems to be a common
    source of confusion.  Also, update InFamily's description to reflect
    current name.
    
    Change-Id: I66b7999aef64ab8fee39aec0f752ae4f3a08d36d
    Reviewed-on: https://go-review.googlesource.com/22102
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1d214f7062e80bebb081cdfad2ceda3e5bd0de29
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Apr 13 06:19:53 2016 +0900

    net: cache IPv6 zone information for applications using IPv6 link-local address
    
    This change reduces the overhead of calling routing information per IPv6
    link-local datagram read by caching IPv6 addressing scope zone
    information.
    
    Fixes #15237.
    
    name                    old time/op    new time/op    delta
    UDP6LinkLocalUnicast-8    64.9µs ± 0%    18.6µs ± 0%  -71.30%
    
    name                    old alloc/op   new alloc/op   delta
    UDP6LinkLocalUnicast-8    11.2kB ± 0%     0.2kB ± 0%  -98.42%
    
    name                    old allocs/op  new allocs/op  delta
    UDP6LinkLocalUnicast-8       101 ± 0%         3 ± 0%  -97.03%
    
    Change-Id: I5ae2ef5058df1028bbb7f4ab32b13edfb330c3a7
    Reviewed-on: https://go-review.googlesource.com/21952
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 19db74566491dcbb4dc2ad0a92b98aa2c28dd8fe
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Apr 14 16:31:52 2016 +0900

    net: relax TestInterfaces and TestInterfaceAddrs for BSD variants
    
    Fixes #15249.
    
    Change-Id: I91fc3d6a2df294b21a67d085da6fe661827a850e
    Reviewed-on: https://go-review.googlesource.com/22079
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 77d374940e87935a2cc46a60591ec8213003e99a
Author: Todd Neal <todd@tneal.org>
Date:   Thu Apr 14 19:09:57 2016 -0400

    cmd/compile: speed up dom checking in cse
    
    Process a slice of equivalent values by setting replaced values to nil
    instead of removing them from the slice to eliminate copying.  Also take
    advantage of the entry number sort to break early once we reach a value
    in a block that is not dominated.
    
    For the code in issue #15112:
    
    Before:
    real    0m52.603s
    user    0m56.957s
    sys     0m1.213s
    
    After:
    real    0m22.048s
    user    0m26.445s
    sys     0m0.939s
    
    Updates #15112
    
    Change-Id: I06d9e1e1f1ad85d7fa196c5d51f0dc163907376d
    Reviewed-on: https://go-review.googlesource.com/22068
    Reviewed-by: David Chase <drchase@google.com>

commit d0e8d3a7ae2194b1753bc4e419d5f00aa2d5cb86
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Apr 2 16:47:51 2016 -0700

    compress/gzip: fix Reader to properly check FHCRC
    
    RFC 1952, section 3.2.3 says:
    >>>
    If FHCRC is set, a CRC16 for the gzip header is present,
    immediately before the compressed data. The CRC16 consists of the two
    least significant bytes of the CRC32 for all bytes of the
    gzip header up to and not including the CRC16.
    <<<
    
    Thus, instead of computing the CRC only over the first 10 bytes
    of the header, we compute it over the whole header (minus CRC16).
    
    Fixes #15070
    
    Change-Id: I55703fd30b535b12abeb5e3962d4da0a86ed615a
    Reviewed-on: https://go-review.googlesource.com/21466
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d093a6269160cf94b7add76dc3e60e94d8afc44e
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu Apr 14 12:12:11 2016 +1000

    doc: add classes to version tags in source install instructions
    
    This will allow us to mechanically substitute these strings
    using javascript (in a forthcoming change to x/tools/godoc).
    
    Updates #14371
    
    Change-Id: I96e876283060ffbc9f3eabaf55d6b880685453e1
    Reviewed-on: https://go-review.googlesource.com/22055
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5c593a3227d97f5d2afa66a39b6dd8ea6ebf73f3
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 13 17:53:03 2016 -0700

    cmd/compile: first cut at exporting position info
    
    - position info for all exported globals, plus methods and fields
    - use delta-encoded line number info in most cases
    - canonicalize all strings: each filename appears only once,
      but will also compact other strings (names) to at most one
      occurence in encoding
    - positions not yet hooked up when reading in
    
    Also:
    - adjusted go/importer (gcimporter)
    - some refactoring for better symmetry
    
    Stats:
    - comparison of export data size w/o and w/ position info (bytes).
    - delta is increase in %
    - overall (see bottom of table): 14% increase
    - however, the current binary format decreased from
      the original binary format last week by 14%
    - compared to original textual format: 65% decrease
      (increase by 14% after decrease by 14% still leads
      to a decrease from original textual format)
    
    (caveat: we used the textual size from last week, assuming
    it has not changed - there may be a small error here).
    
    package                         w/o pos w/ pos  delta
    
    archive/tar                     4234    4902    16%
    archive/zip                     6387    7340    15%
    bufio                           3106    3419    10%
    bytes                           4362    4757    9%
    cmd/addr2line                   27      70      159%
    cmd/api                         12065   13590   13%
    cmd/asm                         27      64      137%
    cmd/asm/internal/arch           9957    11529   16%
    cmd/asm/internal/asm            11788   13385   14%
    cmd/asm/internal/flags          239     311     30%
    cmd/asm/internal/lex            13415   15358   14%
    cmd/cgo                         13064   15006   15%
    cmd/compile                     27      67      148%
    cmd/compile/internal/amd64      461     869     89%
    cmd/compile/internal/arm        5963    7273    22%
    cmd/compile/internal/arm64      363     657     81%
    cmd/compile/internal/big        7186    8590    20%
    cmd/compile/internal/gc         48242   56234   17%
    cmd/compile/internal/mips64     367     666     81%
    cmd/compile/internal/ppc64      372     721     94%
    cmd/compile/internal/s390x      330     569     72%
    cmd/compile/internal/ssa        30464   35058   15%
    cmd/compile/internal/x86        429     770     79%
    cmd/cover                       3984    4731    19%
    cmd/dist                        74      154     108%
    cmd/doc                         7272    8591    18%
    cmd/expdump                     27      71      163%
    cmd/fix                         342     419     23%
    cmd/go                          8126    9520    17%
    cmd/gofmt                       27      70      159%
    cmd/gofmt2                      27      69      156%
    cmd/gofmt2/internal/format      702     856     22%
    cmd/gofmt2/internal/lexical     2954    3509    19%
    cmd/gofmt2/internal/parse       6185    7295    18%
    cmd/gofmt2/internal/syntax      3533    4738    34%
    cmd/gofmt2/internal/test        540     615     14%
    cmd/internal/bio                5395    6060    12%
    cmd/internal/gcprog             533     663     24%
    cmd/internal/goobj              1022    1277    25%
    cmd/internal/obj                10951   12825   17%
    cmd/internal/obj/arm            8612    9985    16%
    cmd/internal/obj/arm64          15814   17638   12%
    cmd/internal/obj/mips           10928   12487   14%
    cmd/internal/obj/ppc64          13576   15277   13%
    cmd/internal/obj/s390x          16513   18708   13%
    cmd/internal/obj/x86            21152   23482   11%
    cmd/internal/objfile            14442   16505   14%
    cmd/internal/pprof/commands     1663    1885    13%
    cmd/internal/pprof/driver       9517    10789   13%
    cmd/internal/pprof/fetch        7632    8635    13%
    cmd/internal/pprof/plugin       13150   14809   13%
    cmd/internal/pprof/profile      7004    8248    18%
    cmd/internal/pprof/report       7763    8942    15%
    cmd/internal/pprof/svg          1332    1534    15%
    cmd/internal/pprof/symbolizer   7376    8439    14%
    cmd/internal/pprof/symbolz      6970    7976    14%
    cmd/internal/pprof/tempfile     3645    4093    12%
    cmd/internal/sys                505     619     23%
    cmd/internal/unvendor/golang.org/x/arch/arm/armasm      73951   79188   7%
    cmd/internal/unvendor/golang.org/x/arch/x86/x86asm      10140   11738   16%
    cmd/link                        27      64      137%
    cmd/link/internal/amd64         9317    11034   18%
    cmd/link/internal/arm           110     213     94%
    cmd/link/internal/arm64         112     219     96%
    cmd/link/internal/ld            53524   60149   12%
    cmd/link/internal/mips64        113     222     96%
    cmd/link/internal/ppc64         113     220     95%
    cmd/link/internal/s390x         112     219     96%
    cmd/link/internal/x86           110     212     93%
    cmd/nm                          27      61      126%
    cmd/objdump                     27      68      152%
    cmd/pack                        4141    4688    13%
    cmd/pprof                       27      67      148%
    cmd/trace                       624     842     35%
    cmd/vet                         11194   13140   17%
    cmd/vet/internal/whitelist      52      113     117%
    cmd/yacc                        1141    1317    15%
    compress/bzip2                  2101    2484    18%
    compress/flate                  3619    4336    20%
    compress/gzip                   6261    7111    14%
    compress/lzw                    276     401     45%
    compress/zlib                   3630    4158    15%
    container/heap                  187     250     34%
    container/list                  1370    1506    10%
    container/ring                  466     546     17%
    context                         3005    3338    11%
    crypto                          728     856     18%
    crypto/aes                      181     321     77%
    crypto/cipher                   744     1163    56%
    crypto/des                      220     320     45%
    crypto/dsa                      4526    4990    10%
    crypto/ecdsa                    5341    5982    12%
    crypto/elliptic                 4969    5593    13%
    crypto/hmac                     188     250     33%
    crypto/md5                      560     706     26%
    crypto/rand                     4218    4746    13%
    crypto/rc4                      214     321     50%
    crypto/rsa                      5648    6355    13%
    crypto/sha1                     597     751     26%
    crypto/sha256                   228     351     54%
    crypto/sha512                   354     484     37%
    crypto/subtle                   586     621     6%
    crypto/tls                      20909   23438   12%
    crypto/x509                     14862   16857   13%
    crypto/x509/pkix                8384    9278    11%
    database/sql                    6721    7715    15%
    database/sql/driver             1243    1535    23%
    debug/dwarf                     7867    9153    16%
    debug/elf                       25479   28025   10%
    debug/gosym                     1887    2267    20%
    debug/macho                     7222    8846    22%
    debug/pe                        6921    8081    17%
    debug/plan9obj                  1084    1319    22%
    encoding                        217     280     29%
    encoding/ascii85                587     722     23%
    encoding/asn1                   1043    1268    22%
    encoding/base32                 929     1112    20%
    encoding/base64                 1166    1368    17%
    encoding/binary                 2168    2410    11%
    encoding/csv                    3761    4203    12%
    encoding/gob                    11304   12936   14%
    encoding/hex                    510     606     19%
    encoding/json                   9965    11395   14%
    encoding/pem                    202     266     32%
    encoding/xml                    11817   13361   13%
    errors                          126     170     35%
    expvar                          930     1142    23%
    flag                            5905    6519    10%
    fmt                             1027    1190    16%
    go/ast                          12910   15541   20%
    go/build                        5460    6173    13%
    go/constant                     1645    1816    10%
    go/doc                          3107    3882    25%
    go/format                       1416    1729    22%
    go/importer                     1426    1668    17%
    go/internal/gccgoimporter       1624    2028    25%
    go/internal/gcimporter          2650    3095    17%
    go/parser                       6220    7073    14%
    go/printer                      1924    2306    20%
    go/scanner                      3137    3602    15%
    go/token                        3053    3474    14%
    go/types                        21793   25561   17%
    hash                            234     327     40%
    hash/adler32                    465     553     19%
    hash/crc32                      668     817     22%
    hash/crc64                      630     727     15%
    hash/fnv                        1413    1582    12%
    html                            76      114     50%
    html/template                   14382   16457   14%
    image                           10248   11409   11%
    image/color                     2247    2562    14%
    image/color/palette             107     169     58%
    image/draw                      2313    2494    8%
    image/gif                       3079    3450    12%
    image/internal/imageutil        3136    3456    10%
    image/jpeg                      2349    2735    16%
    image/png                       2404    2695    12%
    index/suffixarray               4978    5596    12%
    internal/race                   225     278     24%
    internal/singleflight           551     697     26%
    internal/syscall/windows/sysdll 97      166     71%
    internal/testenv                4488    5052    13%
    internal/trace                  1392    1680    21%
    io                              2811    3318    18%
    io/ioutil                       3988    4467    12%
    log                             3532    3907    11%
    log/syslog                      4247    4775    12%
    math                            3021    4499    49%
    math/big                        7250    8456    17%
    math/cmplx                      1034    1617    56%
    math/rand                       734     885     21%
    mime                            1889    2194    16%
    mime/multipart                  4313    4849    12%
    mime/quotedprintable            1758    1996    14%
    net                             15686   18617   19%
    net/http                        42182   47848   13%
    net/http/cgi                    19496   21768   12%
    net/http/cookiejar              4615    5248    14%
    net/http/fcgi                   17758   19771   11%
    net/http/httptest               26108   29350   12%
    net/http/httputil               20732   23286   12%
    net/http/internal               2195    2497    14%
    net/http/pprof                  17596   19545   11%
    net/internal/socktest           1689    2153    27%
    net/mail                        4328    4810    11%
    net/rpc                         24328   27249   12%
    net/rpc/jsonrpc                 11052   12438   13%
    net/smtp                        17127   19174   12%
    net/textproto                   3705    4329    17%
    net/url                         1193    1371    15%
    os                              8493    10113   19%
    os/exec                         6625    7532    14%
    os/signal                       137     236     72%
    os/user                         529     761     44%
    path                            295     372     26%
    path/filepath                   3452    3952    14%
    reflect                         5091    6028    18%
    regexp                          4848    5585    15%
    regexp/syntax                   2590    3076    19%
    runtime                         8721    11598   33%
    runtime/cgo                     17      17      0%
    runtime/debug                   2721    3130    15%
    runtime/internal/atomic         569     704     24%
    runtime/internal/sys            1874    2318    24%
    runtime/pprof                   478     582     22%
    runtime/race                    18      18      0%
    runtime/trace                   95      146     54%
    sort                            1052    1215    15%
    strconv                         1389    1667    20%
    strings                         3372    3772    12%
    sync                            946     1371    45%
    sync/atomic                     962     1079    12%
    syscall                         41574   45613   10%
    testing                         6184    7243    17%
    testing/iotest                  883     1116    26%
    testing/quick                   4659    5443    17%
    text/scanner                    2930    3269    12%
    text/tabwriter                  2333    2607    12%
    text/template                   13335   15274   15%
    text/template/parse             8270    9285    12%
    time                            4687    5313    13%
    unicode                         3831    4355    14%
    unicode/utf16                   530     584     10%
    unicode/utf8                    872     946     8%
    vendor/golang.org/x/net/http2/hpack     3386    3970    17%
    
                                    1295440 1481566 14%
    orig. textual                   4253585 1481566 -65%
    orig. binary                    1724071 1481566 -14%
    
    Change-Id: I4177c6511cc57ebe5eb80c89bf3aefc83376ce86
    Reviewed-on: https://go-review.googlesource.com/22096
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ac8127d7e6ead390bc44c89d47d16be587c3ac11
Author: Keith Randall <khr@golang.org>
Date:   Thu Apr 14 13:47:58 2016 -0700

    cmd/compile: fix register size for ODOTPTR result
    
    The result of ODOTPTR, as well as a bunch of other ops,
    should be the type of the result, not always a pointer type.
    
    This fixes an amd64p32 bug where we were incorrectly truncating
    a 64-bit slice index to 32 bits, and then barfing on a weird
    load-64-bits-but-then-truncate-to-32-bits op that doesn't exist.
    
    Fixes #15252
    
    Change-Id: Ie62f4315fffd79f233e5449324ccc0879f5ac343
    Reviewed-on: https://go-review.googlesource.com/22094
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7c7081f514c9ec4820a842f7ef07394df4d41bab
Author: Austin Clements <austin@google.com>
Date:   Wed Apr 13 15:12:32 2016 -0400

    sync/atomic: don't atomically write pointers twice
    
    sync/atomic.StorePointer (which is implemented in
    runtime/atomic_pointer.go) writes the pointer twice (through two
    completely different code paths, no less). Fix it to only write once.
    
    Change-Id: Id3b2aef9aa9081c2cf096833e001b93d3dd1f5da
    Reviewed-on: https://go-review.googlesource.com/21999
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 8f6c35de2f7c972a4f34efddd21281b7060c4457
Author: Austin Clements <austin@google.com>
Date:   Wed Apr 13 15:06:01 2016 -0400

    runtime: make sync_atomic_SwapPointer signature match sync/atomic
    
    SwapPointer is declared as
    
      func SwapPointer(addr *unsafe.Pointer, new unsafe.Pointer) (old unsafe.Pointer)
    
    in sync/atomic, but defined in the runtime (where it's actually
    implemented) as
    
      func sync_atomic_SwapPointer(ptr unsafe.Pointer, new unsafe.Pointer) unsafe.Pointer
    
    Make ptr a *unsafe.Pointer in the runtime definition to match the type
    in sync/atomic.
    
    Change-Id: I99bab651b995001bbe54f9e790fdef2417ef0e9e
    Reviewed-on: https://go-review.googlesource.com/21998
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit 98b6febcef8f6d7411a77e9e828df681871a28ad
Author: Keith Randall <khr@golang.org>
Date:   Thu Apr 14 10:28:35 2016 -0700

    runtime/internal/sys: better fallback algorithms for intrinsics
    
    Use deBruijn sequences to count low-order zeros.
    Reorg bswap to not use &^, it takes another instruction on x86.
    
    Change-Id: I4a5ed9fd16ee6a279d88c067e8a2ba11de821156
    Reviewed-on: https://go-review.googlesource.com/22084
    Reviewed-by: David Chase <drchase@google.com>

commit 12e3b184f0fe15787be7f0837d2b168a4fbe60be
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Apr 8 15:06:04 2016 +1200

    cmd/go: deduplicate gccgo afiles by package path, not *Package
    
    This code was fixed a while ago to ensure that xtest and fake packages came
    first on the link line, but golang.org/cl/16775 added --whole-archive ...
    --no-whole-archive around all the .a files and rendered this fix useless.
    
    So, take a different approach and only put one .a file on the linker command
    line for each ImportPath we see while traversing the action graph, not for each
    *Package we see. The way we walk the graph ensures that we'll see the .a files
    that need to be first first.
    
    Change-Id: I137f00f129ccc9fc99f40eee885cc04cc358a62e
    Reviewed-on: https://go-review.googlesource.com/21692
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e5463f5055d590046a451a115ceac7b58b3f825f
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Thu Jan 21 14:53:55 2016 +1300

    cmd/go: fix "#cgo pkg-config:" comments with gccgo
    
    The unique difficulty of #cgo pkg-config is that the linker flags are recorded
    when the package is compiled but (obviously) must be used when the package is
    linked into an executable -- so the flags need to be stored on disk somewhere.
    As it happens cgo already writes out a _cgo_flags file: nothing uses it
    currently, but this change adds it to the lib$pkg.a file when compiling a
    package, reads it out when linking (and passes a version of the .a file with
    _cgo_flags stripped out of it to the linker). It's all fairly ugly but it works
    and I can't really think of any way of reducing the essential level of
    ugliness.
    
    Fixes #11739
    
    Change-Id: I35621878014e1e107eda77a5b0b23d0240ec5750
    Reviewed-on: https://go-review.googlesource.com/18790
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 096c900f9edbe7138e1683c8740e5e94b97d6b83
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Apr 14 12:41:54 2016 -0700

    crypto/aes: fix vet warnings in gcm_amd64.s
    
    Notably, this fixes two incorrect argument sizes.
    
    Update #11041
    
    Change-Id: Ie4a3b1a59cd6a6707f6d2f4d3be978fc70322b46
    Reviewed-on: https://go-review.googlesource.com/22091
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6372c821c7cada20e662f9cc37f5d1c202a6b5fe
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Apr 13 21:44:35 2016 -0700

    doc: GCC 6 will have the Go 1.6.1 user libraries
    
    Update #14759.
    
    Change-Id: I8a174aad721beb62380e10071d9648b6b1c21b8c
    Reviewed-on: https://go-review.googlesource.com/22072
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit c9638810df5c0ab7e15a0856f0ddddf4b3afbba6
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Apr 14 08:54:15 2016 -0400

    cmd/compile: use type. prefix on importpath symbol
    
    This ensures that importpath symbols are treated like other type data
    and end up in the same section under all build modes.
    
    Fixes: go test -buildmode=pie reflect
    
    Change-Id: Ibb8348648e8dcc850f2424d206990a06090ce4c6
    Reviewed-on: https://go-review.googlesource.com/22081
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 644493f1090e965cbde3e3245bc8b12bb5486477
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Apr 14 08:48:36 2016 -0700

    cmd/compile: clear hidden value at end of channel range body
    
    While we’re here, clean up a few comments.
    
    Fixes #15281
    
    Change-Id: Ia6173e9941133db08f57bc80bdd3c5722122bfdb
    Reviewed-on: https://go-review.googlesource.com/22082
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 24bd465bca145320bffd5b06e11da105226a1eae
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Apr 14 14:07:59 2016 -0400

    test: use correct value in error message in init1.go
    
    Print numGC followed by numGC1, rather than printing numGC twice.
    
    Change-Id: I8e7144b6a11d4ae9be0d82d88b86fed04b906e2f
    Reviewed-on: https://go-review.googlesource.com/22087
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 02b8e6978a86c2f4f3a604e8b05014d127f4020a
Author: Jeremy Jackins <jeremyjackins@gmail.com>
Date:   Wed Apr 13 18:16:21 2016 +0900

    runtime: find a home for orphaned comments
    
    These comments were left behind after runtime.h was converted
    from C to Go. I examined the original code and tried to move these
    to the places that the most sense.
    
    Change-Id: I8769d60234c0113d682f9de3bd8d6c34c450c188
    Reviewed-on: https://go-review.googlesource.com/21969
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 980146bfde2b4e2d62c537023c19670666fc0604
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Apr 14 13:29:37 2016 -0400

    crypto/cipher: enable fastXORBytes on s390x
    
    s390x can handle unaligned loads and stores of 64-bit values.
    
    Change-Id: Iae5621781e3ba56e27b4a1f4788772c86e4f6475
    Reviewed-on: https://go-review.googlesource.com/22086
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6b0b3f86d6b3c2cf01c7ed6080e038bda2c12997
Author: David Chase <drchase@google.com>
Date:   Wed Apr 13 13:30:03 2016 -0400

    cmd/compile: fix use of original spill name after sinking
    
    This is a fix for the ssacheck builder
    http://build.golang.org/log/baa00f70c34e41186051cfe90568de3d91f115d7
    after CL 21307 for sinking spills down loop exits
    https://go-review.googlesource.com/#/c/21037/
    
    The fix is to reuse (move) the original spill, thus preserving
    the definition of the variable and its use count. Original and
    copy both use the same stack slot, but ssacheck needs to see
    a definition for the variable itself.
    
    Fixes #15279.
    
    Change-Id: I286285490193dc211b312d64dbc5a54867730bd6
    Reviewed-on: https://go-review.googlesource.com/21995
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 170c1b479bcd089eb8f76c8de6e5d44c6c4dbaa8
Author: Alan Donovan <adonovan@google.com>
Date:   Thu Apr 14 13:41:32 2016 -0400

    go/types: record CallExpr result type even if argument is invalid
    
    + test
    
    Fixes #15305
    
    Change-Id: Ica657c00c92f0b19f0df7452cdbe5a95d23cc8a4
    Reviewed-on: https://go-review.googlesource.com/22085
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 67cdec00c256d817fc3d2c099fa1830c8f446923
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Apr 14 09:39:40 2016 -0700

    cmd/vet: teach asm checker about PEXTRD’s op size
    
    Fixes #15271
    
    Change-Id: I28e3fb5bde1e6fd5b263b1434873b8ce051aee97
    Reviewed-on: https://go-review.googlesource.com/22083
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 045411e6f28c64e6448a2432fa652cc80ca18f31
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 12 17:58:46 2016 -0700

    cmd/internal/obj: remove use of package bio
    
    Also add MustClose and MustWriter to cmd/internal/bio, and use them in
    cmd/asm.
    
    Change-Id: I07f5df3b66c17bc5b2e6ec9c4357d9b653e354e0
    Reviewed-on: https://go-review.googlesource.com/21938
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b623b71509b2d24df915d5bc68602e1c6edf38ca
Author: Adam Langley <agl@golang.org>
Date:   Tue Apr 12 11:14:25 2016 -0700

    crypto/x509: don't add an AuthorityKeyId to self-signed certificates.
    
    The AuthorityKeyId is optional for self-signed certificates, generally
    useless, and takes up space. This change causes an AuthorityKeyId not to
    be added to self-signed certificates, although it can still be set in
    the template if the caller really wants to include it.
    
    Fixes #15194.
    
    Change-Id: If5d3c3d9ca9ae5fe67458291510ec7140829756e
    Reviewed-on: https://go-review.googlesource.com/21895
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit eede112492174c8b0f72845e6ac9edf1bd481f41
Author: Adam Langley <agl@golang.org>
Date:   Tue Apr 12 10:43:44 2016 -0700

    crypto/tls: make error prefix uniform.
    
    Error strings in this package were all over the place: some were
    prefixed with “tls:”, some with “crypto/tls:” and some didn't have a
    prefix.
    
    This change makes everything use the prefix “tls:”.
    
    Change-Id: Ie8b073c897764b691140412ecd6613da8c4e33a2
    Reviewed-on: https://go-review.googlesource.com/21893
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 8d8feb4d2fdb9c09821c4dc84e164e4c86d283ff
Author: Luan Santos <cfcluan@gmail.com>
Date:   Wed Apr 13 08:10:41 2016 -0700

    cmd/vet: allow untyped composite literals to be unkeyed
    
    We can trust that untyped composite literals are part of a slice literal
    and not emit a vet warning for those.
    
    Fixes #9171
    
    Change-Id: Ia7c081e543b850f8be1fd1f9e711520061e70bed
    Reviewed-on: https://go-review.googlesource.com/22000
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 2c9d773f7411de211389b9e1da441fae68f826d8
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Thu Apr 14 16:31:42 2016 +0200

    misc/trace: update trace viewer html
    
    The old trace-viewer is broken since Chrome 49:
    https://bugs.chromium.org/p/chromium/issues/detail?id=569417
    It was fixed in:
    https://github.com/catapult-project/catapult/commit/506457cbd726324f327b80ae11f46c1dfeb8710d
    
    This change updates trace-viewer to the latest version
    (now it is called catapult).
    
    This version has a bug in the lean config that we use, though:
    https://github.com/catapult-project/catapult/issues/2247
    So use full config for now (it works, but leads to larger html).
    When the bug is fixed we need to switch back to lean config (issue #15302).
    
    Change-Id: Ifb8d782ced66e3292d81c5604039fe18eaf267c5
    Reviewed-on: https://go-review.googlesource.com/22013
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0ec6d7c0bbfceb7b8e4857b775686ae5cf699e54
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Thu Apr 14 15:44:48 2016 +0800

    testing: removed flakey test
    
    The synchronization in this test is a bit complicated and likely
    incorrect, judging from the sporadically hanging trybots.
    Most of what this is supposed to test is already tested in
    TestTestContext, so I'll just remove it.
    
    Fixes #15170
    
    Change-Id: If54db977503caa109cec4516974eda9191051888
    Reviewed-on: https://go-review.googlesource.com/22080
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 285e78609f4fd85948d056f581d3443d5f9b230a
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Apr 14 14:53:12 2016 +0900

    net: fix TestDialAddrError
    
    Fixes #15291.
    
    Change-Id: I563140c2acd37d4989a940488b217414cf73f6c2
    Reviewed-on: https://go-review.googlesource.com/22077
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit ed7cd2546eb997e976534f0542816e12448f34d5
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Apr 14 12:17:44 2016 +0900

    net: make use of internal/testenv package
    
    Change-Id: I6644081df495cb92b3d208f867066f9acb08946f
    Reviewed-on: https://go-review.googlesource.com/22074
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8f64336edc7c725abcbe564d21b3d2dc5ec250ec
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Apr 14 09:57:43 2016 +0900

    net: make newLocalPacketListener handle network argument correcly
    
    Change-Id: I41691134770d01805c19c0f84f8828b00b85de0c
    Reviewed-on: https://go-review.googlesource.com/22058
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit babfb4ec3ba3e4e36b1003d6efbaeddf2e975240
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Apr 13 18:41:59 2016 -0700

    cmd/internal/obj: change Link.Flag_shared to bool
    
    Change-Id: I9bda2ce6f45fb8292503f86d8f9f161601f222b7
    Reviewed-on: https://go-review.googlesource.com/22053
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 980ab12ade53e70d037ab2ab475148b216d84a14
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Apr 13 18:37:18 2016 -0700

    cmd/compile/internal/gc: change flags to bool where possible
    
    Some of the Debug[x] flags are actually boolean too, but not all, so
    they need to be handled separately.
    
    While here, change some obj.Flagstr and obj.Flagint64 calls to
    directly use flag.StringVar and flag.Int64Var instead.
    
    Change-Id: Iccedf6fed4328240ee2257f57fe6d66688f237c4
    Reviewed-on: https://go-review.googlesource.com/22052
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit ae9804595879eb07efd23b9c98eab46693573447
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 13 16:57:23 2016 -0700

    cmd/compile: use correct export function (fix debugFormat)
    
    Tested with debugFormat enabled and running
    (export GO_GCFLAGS=-newexport; sh all.bash).
    
    Change-Id: If7d43e1e594ea43c644232b89e670f7abb6b003e
    Reviewed-on: https://go-review.googlesource.com/22033
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 933d521a7aa5defc46d3336bcb71a2f3f2b8172d
Author: Rob Pike <r@golang.org>
Date:   Wed Apr 13 11:47:25 2016 -0700

    fmt: clarify that for %g precision determines number of significant digits
    
    Documentation change only.
    
    Fixes #15178.
    
    Change-Id: I3c7d80ce9e668ac7515f7ebb9da80f3bd8e534d6
    Reviewed-on: https://go-review.googlesource.com/22006
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6e5027a37a851eb19dba7dad7ea5a8b43e27b842
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 13 13:17:30 2016 -0700

    cmd/compile: don't export unneeded OAS, OASWB nodes
    
    Also:
    - "rewrite" node Op in exporter for some nodes instead of importer
    - more comments
    
    Change-Id: I809e6754d14987b28f1da9379951ffa2e690c2a7
    Reviewed-on: https://go-review.googlesource.com/22008
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 44f80f6d4925ae59b519ced3a626170099258904
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Wed Apr 6 11:07:12 2016 -0500

    syscall:  fix epoll_event struct for ppc64le/ppc64
    
    The existing epoll_event structure used by many of
    the epoll_* syscalls was defined incorrectly
    for use with ppc64le & ppc64 in the syscall
    directory.  This resulted in the caller getting
    incorrect information on return from these
    syscalls.  This caused failures in fsnotify as
    well as builds with upstream Docker.  The
    structure is defined correctly in gccgo.
    
    This adds a pad field that is expected for
    these syscalls on ppc64le, ppc64.
    Fixes #15135
    
    Change-Id: If7e8ea9eb1d1ca5182c8dc0f935b334127341ffd
    Reviewed-on: https://go-review.googlesource.com/21582
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit f120936dfffa3ac935730699587e6957f2d5ea61
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Mar 31 10:02:10 2016 -0400

    cmd/compile, etc: use name for type pkgPath
    
    By replacing the *string used to represent pkgPath with a
    reflect.name everywhere, the embedded *string for package paths
    inside the reflect.name can be replaced by an offset, nameOff.
    This reduces the number of pointers in the type information.
    
    This also moves all reflect.name types into the same section, making
    it possible to use nameOff more widely in later CLs.
    
    No significant binary size change for normal binaries, but:
    
    linux/amd64 PIE:
            cmd/go: -440KB (3.7%)
            jujud:  -2.6MB (3.2%)
    
    For #6853.
    
    Change-Id: I3890b132a784a1090b1b72b32febfe0bea77eaee
    Reviewed-on: https://go-review.googlesource.com/21395
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 73e2ad20220050f88b1ea79bf5a2e4c4fbee0533
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 13 11:33:42 2016 -0700

    runtime: rename os1_darwin.go to os_darwin.go
    
    Change-Id: If0e0bc5a85101db1e70faaab168fc2d12024eb93
    Reviewed-on: https://go-review.googlesource.com/22005
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d9712aa82af7192469d75802c6dc1734ea9858b2
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 13 11:31:24 2016 -0700

    runtime: merge the darwin os*.go files together
    
    Merge them together into os1_darwin.go. A future CL will rename it.
    
    Change-Id: Ia4380d3296ebd5ce210908ce3582ff184566f692
    Reviewed-on: https://go-review.googlesource.com/22004
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 79048df2ccc2d4c2ccc4e15d481f7888d48cf440
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 6 07:11:24 2016 -0400

    cmd/link: handle long symbol names
    
    Fixes #15104.
    
    Change-Id: I9ddfbbf39ef0a873b703ee3e04fbb7d1192f5f39
    Reviewed-on: https://go-review.googlesource.com/21581
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3ea7cfabbb0549d62d524e4ad30cb464af250fde
Author: Todd Neal <todd@tneal.org>
Date:   Wed Apr 13 08:51:46 2016 -0400

    cmd/compile: sort partitions by dom to speed up cse
    
    We do two O(n) scans of all values in an eqclass when computing
    substitutions for CSE.
    
    In unfortunate cases, like those found in #15112, we can have a large
    eqclass composed of values found in blocks none of whom dominate the
    other.  This leads to O(n^2) behavior. The elements are removed one at a
    time, with O(n) scans each time.
    
    This CL removes the linear scan by sorting the eqclass so that dominant
    values will be sorted first.  As long as we also ensure we don't disturb
    the sort order, then we no longer need to scan for the maximally
    dominant value.
    
    For the code in issue #15112:
    
    Before:
    real    1m26.094s
    user    1m30.776s
    sys     0m1.125s
    
    Aefter:
    real    0m52.099s
    user    0m56.829s
    sys     0m1.092s
    
    Updates #15112
    
    Change-Id: Ic4f8680ed172e716232436d31963209c146ef850
    Reviewed-on: https://go-review.googlesource.com/21981
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4721ea6abcde318a2f5d61ec249cde5e9c57ebea
Author: Austin Clements <austin@google.com>
Date:   Wed Apr 13 11:22:42 2016 -0400

    runtime/internal/atomic: rename Storep1 to StorepNoWB
    
    Make it clear that the point of this function stores a pointer
    *without* a write barrier.
    
    sed -i -e 's/Storep1/StorepNoWB/' $(git grep -l Storep1)
    
    Updates #15270.
    
    Change-Id: Ifad7e17815e51a738070655fe3b178afdadaecf6
    Reviewed-on: https://go-review.googlesource.com/21994
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit da6205b67e844503152b3be7bbb1a25c76cbbce2
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Apr 8 17:56:36 2016 +0200

    cmd/pprof/internal/profile: always subtract 1 from PCs
    
    Go runtime never emits PCs that are not a return address
    (except for cpu profiler).
    
    Change-Id: I08d9dc5c7c71e23f34f2f0c16f8baeeb4f64fcd6
    Reviewed-on: https://go-review.googlesource.com/21735
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit eb79f21c48915454b372de7fee2c6b86d52ea0bc
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 12 21:58:44 2016 -0700

    cmd/compile, go/importer: minor cleanups
    
    Change-Id: Ic7a1fb0dbbf108052c970a4a830269a5673df7df
    Reviewed-on: https://go-review.googlesource.com/21963
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 7d0d1222477ce50736ee24adb38c1f487d0801d9
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 12 18:00:04 2016 -0700

    cmd/compile: move more compiler specifics into compiler specific export section
    
    Instead of indicating with each function signature if it has an inlineable
    body, collect all functions in order and export function bodies with function
    index in platform-specific section.
    
    Moves this compiler specific information out of the platform-independent
    export data section, and removes an int value for all functions w/o body.
    Also simplifies the code a bit.
    
    Change-Id: I8b2d7299dbe81f2706be49ecfb9d9f7da85fd854
    Reviewed-on: https://go-review.googlesource.com/21939
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d8e8fc292ace5ae59a0da44dfca1dd5b1a71ecf1
Author: Austin Clements <austin@google.com>
Date:   Wed Apr 13 11:13:39 2016 -0400

    runtime/internal/atomic: remove write barrier from Storep1 on s390x
    
    atomic.Storep1 is not supposed to invoke a write barrier (that's what
    atomicstorep is for), but currently does on s390x. This causes a panic
    in runtime.mapzero when it tries to use atomic.Storep1 to store what's
    actually a scalar.
    
    Fix this by eliminating the write barrier from atomic.Storep1 on
    s390x. Also add some documentation to atomicstorep to explain the
    difference between these.
    
    Fixes #15270.
    
    Change-Id: I291846732d82f090a218df3ef6351180aff54e81
    Reviewed-on: https://go-review.googlesource.com/21993
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 6b85a45edc94786c7669823ee47a6ce1156d6a9a
Author: David Chase <drchase@google.com>
Date:   Mon Mar 21 11:32:04 2016 -0400

    cmd/compile: move spills to loop exits when easy.
    
    For call-free inner loops.
    
    Revised statistics:
      85 inner loop spills sunk
     341 inner loop spills remaining
    1162 inner loop spills that were candidates for sinking
         ended up completely register allocated
     119 inner loop spills could have been sunk were used in
         "shuffling" at the bottom of the loop.
       1 inner loop spill not sunk because the register assigned
         changed between def and exit,
    
     Understanding how to make an inner loop definition not be
     a candidate for from-memory shuffling (to force the shuffle
     code to choose some other value) should pick up some of the
     119 other spills disqualified for this reason.
    
     Modified the stats printing based on feedback from Austin.
    
    Change-Id: If3fb9b5d5a028f42ccc36c4e3d9e0da39db5ca60
    Reviewed-on: https://go-review.googlesource.com/21037
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c4807d4cc759025854e354fee99ac20d125f0d79
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Wed Apr 13 08:58:10 2016 -0500

    runtime: improve memmove performance ppc64,ppc64le
    
    This change improves the performance of memmove
    on ppc64 & ppc64le mainly for moves >=32 bytes.
    In addition, the test to detect backward moves
     was enhanced to avoid backward moves if source
    and dest were in different types of storage, since
    backward moves might not always be efficient.
    
    Fixes #14507
    
    The following shows some of the improvements from the test
    in the runtime package:
    
    BenchmarkMemmove32                   4229.56      4717.13      1.12x
    BenchmarkMemmove64                   6156.03      7810.42      1.27x
    BenchmarkMemmove128                  7521.69      12468.54     1.66x
    BenchmarkMemmove256                  6729.90      18260.33     2.71x
    BenchmarkMemmove512                  8521.59      18033.81     2.12x
    BenchmarkMemmove1024                 9760.92      25762.61     2.64x
    BenchmarkMemmove2048                 10241.00     29584.94     2.89x
    BenchmarkMemmove4096                 10399.37     31882.31     3.07x
    
    BenchmarkMemmoveUnalignedDst16       1943.69      2258.33      1.16x
    BenchmarkMemmoveUnalignedDst32       3885.08      3965.81      1.02x
    BenchmarkMemmoveUnalignedDst64       5121.63      6965.54      1.36x
    BenchmarkMemmoveUnalignedDst128      7212.34      11372.68     1.58x
    BenchmarkMemmoveUnalignedDst256      6564.52      16913.59     2.58x
    BenchmarkMemmoveUnalignedDst512      8364.35      17782.57     2.13x
    BenchmarkMemmoveUnalignedDst1024     9539.87      24914.72     2.61x
    BenchmarkMemmoveUnalignedDst2048     9199.23      21235.11     2.31x
    BenchmarkMemmoveUnalignedDst4096     10077.39     25231.99     2.50x
    
    BenchmarkMemmoveUnalignedSrc32       3249.83      3742.52      1.15x
    BenchmarkMemmoveUnalignedSrc64       5562.35      6627.96      1.19x
    BenchmarkMemmoveUnalignedSrc128      6023.98      10200.84     1.69x
    BenchmarkMemmoveUnalignedSrc256      6921.83      15258.43     2.20x
    BenchmarkMemmoveUnalignedSrc512      8593.13      16541.97     1.93x
    BenchmarkMemmoveUnalignedSrc1024     9730.95      22927.84     2.36x
    BenchmarkMemmoveUnalignedSrc2048     9793.28      21537.73     2.20x
    BenchmarkMemmoveUnalignedSrc4096     10132.96     26295.06     2.60x
    
    Change-Id: I73af59970d4c97c728deabb9708b31ec7e01bdf2
    Reviewed-on: https://go-review.googlesource.com/21990
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 66afbf1010fa492fb9a266f9019f707bd09f066d
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 13 10:06:12 2016 -0400

    cmd/link: use a switch for name prefix switching
    
    Minor cleanup.
    
    Change-Id: I7574f58a7e55c2bb798ebe9c7c98d36b8c258fb8
    Reviewed-on: https://go-review.googlesource.com/21982
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7d469179e6e3dafe16700b7fc1cf8683ad9453fa
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Mar 28 10:32:27 2016 -0400

    cmd/compile, etc: store method tables as offsets
    
    This CL introduces the typeOff type and a lookup method of the same
    name that can turn a typeOff offset into an *rtype.
    
    In a typical Go binary (built with buildmode=exe, pie, c-archive, or
    c-shared), there is one moduledata and all typeOff values are offsets
    relative to firstmoduledata.types. This makes computing the pointer
    cheap in typical programs.
    
    With buildmode=shared (and one day, buildmode=plugin) there are
    multiple modules whose relative offset is determined at runtime.
    We identify a type in the general case by the pair of the original
    *rtype that references it and its typeOff value. We determine
    the module from the original pointer, and then use the typeOff from
    there to compute the final *rtype.
    
    To ensure there is only one *rtype representing each type, the
    runtime initializes a typemap for each module, using any identical
    type from an earlier module when resolving that offset. This means
    that types computed from an offset match the type mapped by the
    pointer dynamic relocations.
    
    A series of followup CLs will replace other *rtype values with typeOff
    (and name/*string with nameOff).
    
    For types created at runtime by reflect, type offsets are treated as
    global IDs and reference into a reflect offset map kept by the runtime.
    
    darwin/amd64:
            cmd/go:  -57KB (0.6%)
            jujud:  -557KB (0.8%)
    
    linux/amd64 PIE:
            cmd/go: -361KB (3.0%)
            jujud:  -3.5MB (4.2%)
    
    For #6853.
    
    Change-Id: Icf096fd884a0a0cb9f280f46f7a26c70a9006c96
    Reviewed-on: https://go-review.googlesource.com/21285
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e0611b16645dba6768cab405f1ec1b3fce83334a
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Apr 13 10:58:38 2016 +0200

    cmd/compile: use shared dom tree for cse, too
    
    Missed this in the previous CL where the shared
    dom tree was introduced.
    
    Change-Id: If0bd85d4b4567d7e87814ed511603b1303ab3903
    Reviewed-on: https://go-review.googlesource.com/21970
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 61b7a9c57bb6b9c259360239001b2d5be4876abd
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Tue Apr 12 23:18:47 2016 +0300

    cmd/link: rename Pcln to FuncInfo
    
    After non pcln fields were added to it in a previous commit.
    
    Change-Id: Icf92c0774d157c61399a6fc2a3c4d2cd47a634d2
    Reviewed-on: https://go-review.googlesource.com/21921
    Run-TryBot: Shahar Kohanim <skohanim@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 24967ec122710e73b35893925fd9a8390d7524ab
Author: Tal Shprecher <tshprecher@gmail.com>
Date:   Sun Apr 10 18:12:41 2016 -0700

    cmd/compile: make enqueued map keys fail validation on forward types
    
    Map keys are currently validated in multiple locations but share
    a common validation routine. The problem is that early validations
    should be lenient enough to allow for forward types while the final
    validations should not. The final validations should fail on forward
    types since they've already settled.
    
    This change also separates the key type checking from the creation
    of the map via typMap. Instead of the mapqueue being populated in
    copytype() by checking the map line number, it's populated in the
    same block that validates the key type. This isolates key validation
    logic while type checking.
    
    Fixes #14988
    
    Change-Id: Ia47cf6213585d6c63b3a35249104c0439feae658
    Reviewed-on: https://go-review.googlesource.com/21830
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0e01db4b8d6ac64e6661508bc6876fa41c799208
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 12 17:46:41 2016 -0700

    cmd/compile: fix crash on bare package name in constant declarations
    
    Fixes #11361.
    
    Change-Id: I70b8808f97f0e07de680e7e6ede1322ea0fdbbc0
    Reviewed-on: https://go-review.googlesource.com/21936
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6531fab06fc4667b7d167c7e3ee936f28bac68e2
Author: Tal Shprecher <tshprecher@gmail.com>
Date:   Tue Apr 12 22:29:34 2016 -0700

    cmd/compile: remove unnecessary assignments while type checking.
    
    Change-Id: Ica0ec84714d7f01d800d62fa10cdb08321d43cf3
    Reviewed-on: https://go-review.googlesource.com/21967
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 6af4e996e2f0408f159a8553d11122b9fe052ffb
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 12 15:51:24 2016 -0700

    runtime: simplify setPanicOnFault slightly
    
    No need to acquire the M just to change G's paniconfault flag, and the
    original C implementation of SetPanicOnFault did not. The M
    acquisition logic is an artifact of golang.org/cl/131010044, which was
    started before golang.org/cl/123640043 (which introduced the current
    "getg" function) was submitted.
    
    Change-Id: I6d1939008660210be46904395cf5f5bbc2c8f754
    Reviewed-on: https://go-review.googlesource.com/21935
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 381e5eee39edfb3a43e294023957aff05e9ff349
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 13 04:35:37 2016 +0000

    all: use new io.SeekFoo constants instead of os.SEEK_FOO
    
    Automated change.
    
    Fixes #15269
    
    Change-Id: I8deb2ac0101d3f7c390467ceb0a1561b72edbb2f
    Reviewed-on: https://go-review.googlesource.com/21962
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 819e0b29bbbc07022e7b94c12b55860466a02e5b
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Mar 26 00:04:48 2016 +0100

    strings: improve explode and correct comment
    
    Merges explodetests into splittests which already contain
    some of the tests that cover explode.
    
    Adds a test to cover the utf8.RuneError branch in explode.
    
    name      old time/op  new time/op  delta
    Split1-2  14.9ms ± 0%  14.2ms ± 0%  -4.06%  (p=0.000 n=47+49)
    
    Change-Id: I00f796bd2edab70e926ea9e65439d820c6a28254
    Reviewed-on: https://go-review.googlesource.com/21609
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3f66d8c84b4b3d685db1031954d3343a7a8c9d0f
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Tue Apr 12 01:55:14 2016 -0700

    html/template: add examples of loading templates from files
    
    Adds examples showing loading templates from files and
    executing them.
    
    Shows examples:
    - Using ParseGlob.
    - Using ParseFiles.
    - Using helper functions to share and use templates
    in different contexts by adding them to an existing
    bundle of templates.
    - Using a group of driver templates with distinct sets
    of helper templates.
    
    Almost all of the code was directly copied from text/template.
    
    Fixes #8500
    
    Change-Id: Ic3d91d5232afc5a1cd2d8cd3d9a5f3b754c64225
    Reviewed-on: https://go-review.googlesource.com/21854
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit db5338f87982086a19310ad6e25c046280644b98
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 12 17:12:26 2016 -0700

    cmd/compile: teach CSE that new objects are bespoke
    
    runtime.newobject never returns the same thing twice,
    so the resulting value will never be a common subexpression.
    
    This helps when compiling large static data structures
    that include pointers, such as maps and slices.
    No clear performance impact on other code. (See below.)
    
    For the code in issue #15112:
    
    Before:
      real  1m14.238s
      user  1m18.985s
      sys   0m0.787s
    
    After:
      real  0m47.172s
      user  0m52.248s
      sys   0m0.767s
    
    For the code in issue #15235, size 10k:
    
    Before:
      real  0m44.916s
      user  0m46.577s
      sys   0m0.304s
    
    After:
      real  0m7.703s
      user  0m9.041s
      sys   0m0.316s
    
    Still more work to be done, particularly for #15112.
    
    Updates #15112
    Updates #15235
    
    
    name       old time/op      new time/op      delta
    Template        330ms ±11%       333ms ±13%    ~           (p=0.749 n=20+19)
    Unicode         148ms ± 6%       152ms ± 8%    ~           (p=0.072 n=18+20)
    GoTypes         1.01s ± 7%       1.01s ± 3%    ~           (p=0.583 n=20+20)
    Compiler        5.04s ± 2%       5.06s ± 2%    ~           (p=0.314 n=20+20)
    
    name       old user-ns/op   new user-ns/op   delta
    Template   444user-ms ±11%  445user-ms ±10%    ~           (p=0.738 n=20+20)
    Unicode    215user-ms ± 5%  218user-ms ± 5%    ~           (p=0.239 n=18+18)
    GoTypes    1.45user-s ± 3%  1.45user-s ± 4%    ~           (p=0.620 n=20+20)
    Compiler   7.23user-s ± 2%  7.22user-s ± 2%    ~           (p=0.901 n=20+19)
    
    name       old alloc/op     new alloc/op     delta
    Template       55.0MB ± 0%      55.0MB ± 0%    ~           (p=0.547 n=20+20)
    Unicode        37.6MB ± 0%      37.6MB ± 0%    ~           (p=0.301 n=20+20)
    GoTypes         177MB ± 0%       177MB ± 0%    ~           (p=0.065 n=20+19)
    Compiler        798MB ± 0%       797MB ± 0%  -0.05%        (p=0.000 n=19+20)
    
    name       old allocs/op    new allocs/op    delta
    Template         492k ± 0%        493k ± 0%  +0.03%        (p=0.030 n=20+20)
    Unicode          377k ± 0%        377k ± 0%    ~           (p=0.423 n=20+19)
    GoTypes         1.40M ± 0%       1.40M ± 0%    ~           (p=0.102 n=20+20)
    Compiler        5.53M ± 0%       5.53M ± 0%    ~           (p=0.094 n=17+18)
    
    name       old text-bytes   new text-bytes   delta
    HelloSize        561k ± 0%        561k ± 0%    ~     (all samples are equal)
    CmdGoSize       6.13M ± 0%       6.13M ± 0%    ~     (all samples are equal)
    
    name       old data-bytes   new data-bytes   delta
    HelloSize        128k ± 0%        128k ± 0%    ~     (all samples are equal)
    CmdGoSize        306k ± 0%        306k ± 0%    ~     (all samples are equal)
    
    name       old exe-bytes    new exe-bytes    delta
    HelloSize        905k ± 0%        905k ± 0%    ~     (all samples are equal)
    CmdGoSize       9.64M ± 0%       9.64M ± 0%    ~     (all samples are equal)
    
    Change-Id: Id774e2901d7701a3ec7a1c1d1cf1d9327a4107fc
    Reviewed-on: https://go-review.googlesource.com/21937
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 260b7daf0a3fa1548d976f2484325240d4bdb73a
Author: Keith Randall <khr@golang.org>
Date:   Tue Apr 12 16:25:48 2016 -0700

    cmd/compile: fix arg to getcallerpc
    
    getcallerpc's arg needs to point to the first argument slot.
    I believe this bug was introduced by Michel's itab changes
    (specifically https://go-review.googlesource.com/c/20902).
    
    Fixes #15145
    
    Change-Id: Ifb2e17f3658e2136c7950dfc789b4d5706320683
    Reviewed-on: https://go-review.googlesource.com/21931
    Reviewed-by: Michel Lespinasse <walken@google.com>

commit b0cbe158da10aac1876680e825a902d58a9d1bac
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Mon Apr 11 22:19:34 2016 +0300

    cmd/link: move function only lsym fields to pcln struct
    
    name       old secs    new secs    delta
    LinkCmdGo   0.53 ± 9%   0.53 ±10%  -1.30%  (p=0.022 n=100+99)
    
    name       old MaxRSS  new MaxRSS  delta
    LinkCmdGo   151k ± 4%   142k ± 6%  -5.92%  (p=0.000 n=98+100)
    
    Change-Id: Ic30e63a948f8e626b3396f458a0163f7234810c1
    Reviewed-on: https://go-review.googlesource.com/21920
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a0ab6cd6852cec430e280217a9516d6be3c1ef5f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 12 00:22:39 2016 +0000

    net/http: add test that panic in a handler signals an error to the client
    
    Change-Id: Iba40edc9ddad62534b06c5af20bbc3dd3dc14d0a
    Reviewed-on: https://go-review.googlesource.com/21881
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 982274c96d6c9ad88a9deb07583d3b74ec2df357
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Apr 12 15:47:17 2016 -0700

    reflect: test that Call results are not addressable
    
    Gccgo was erroneously marking Call results as addressable, which led to
    an obscure bug using text/template, as text/template calls CanAddr to
    check whether to take the address of a value when looking up methods.
    When a function returned a pointer, and CanAddr was true, the result was
    a pointer to a pointer that had no methods.
    
    Fixed in gccgo by https://golang.org/cl/21908.  Adding the test here so
    that it doesn't regress.
    
    Change-Id: I1d25b868e1b8e2348b21cbac6404a636376d1a4a
    Reviewed-on: https://go-review.googlesource.com/21930
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f0c5b8b9c9c7900033ddb11b584da6198d599454
Author: Martin Möhrmann <martisch@uos.de>
Date:   Tue Apr 12 21:16:27 2016 +0200

    image/color: optimize YCbCrToRGB
    
    Use one comparison to detect underflow and overflow simultaneously.
    Use a shift, bitwise complement and uint8 type conversion to handle
    clamping to upper and lower bound without additional branching.
    
    Overall the new code is faster for a mix of
    common case, underflow and overflow.
    
    name     old time/op  new time/op  delta
    YCbCr-2  1.12ms ± 0%  0.64ms ± 0%  -43.01%  (p=0.000 n=48+47)
    
    name              old time/op  new time/op  delta
    YCbCrToRGB/0-2    5.52ns ± 0%  5.77ns ± 0%  +4.48%  (p=0.000 n=50+49)
    YCbCrToRGB/128-2  6.05ns ± 0%  5.52ns ± 0%  -8.69%  (p=0.000 n=39+50)
    YCbCrToRGB/255-2  5.80ns ± 0%  5.77ns ± 0%  -0.58%  (p=0.000 n=50+49)
    
    Found in collaboration with Josh Bleecher Snyder and Ralph Corderoy.
    
    Change-Id: Ic5020320f704966f545fdc1ae6bc24ddb5d3d09a
    Reviewed-on: https://go-review.googlesource.com/21910
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1650ced98f4f6c5f0783f78cb9d0ffd3a6d1768f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 12 22:27:33 2016 +0000

    net: skip failing or flaky TestInterfaces on freebsd-arm
    
    Updates #15262
    
    Change-Id: I3eb1f6f71d6285d039f11ba6a34b8a599a33bf49
    Reviewed-on: https://go-review.googlesource.com/21909
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit f6db855d5595e170bfc70d90f1eaa26034d2e191
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 12 21:51:19 2016 +0000

    net: mirror Tom Sawyer in the net package for tests
    
    Fixes the darwin/arm builder, which has a special test runner which
    makes the assumption that tests never use testdata from another
    package.
    
    This looks large, but it's no more space in git.
    
    Change-Id: I81921b516443d12d21b77617d323ddebedbe40f8
    Reviewed-on: https://go-review.googlesource.com/21907
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e46b00a43b62bd67ec13ca75c51037db3b312043
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 12 14:44:49 2016 -0700

    cmd/internal/obj: remove unused Pciter type
    
    Change-Id: Ie8323cfcd1193f390729d0d3dd67863aedf47d13
    Reviewed-on: https://go-review.googlesource.com/21906
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6fb8bf9d7940b2e2a90249e1894ad4e3d24fd3e7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 12 14:04:01 2016 -0700

    net: make two tests not parallel
    
    Running
    
    stress -p 1 go test -short std
    
    on a heavily loaded machine causes net timeouts
    every 15 or 20 runs.
    Making these tests not run in parallel helps.
    With this change, I haven’t seen a single failure
    in over 100 runs.
    
    Fixes #14986
    
    Change-Id: Ibaa14869ce8d95b00266aee94d62d195927ede68
    Reviewed-on: https://go-review.googlesource.com/21905
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 022548cfe82915e5bf14ce7cb28f3ec651550662
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Tue Apr 12 16:58:56 2016 -0300

    all: standardize RFC mention format
    
    Standardize on space between "RFC" and number. Additionally change
    the couple "a RFC" instances to "an RFC."
    
    Fixes #15258
    
    Change-Id: I2b17ecd06be07dfbb4207c690f52a59ea9b04808
    Reviewed-on: https://go-review.googlesource.com/21902
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 24fc3234428e138e693584185fab4146de6088db
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Mon Apr 11 17:35:55 2016 +0300

    cmd/internal/obj: split plist flushing from object writing
    
    Only splits into separate files, no other changes.
    
    Change-Id: Icc0da2c5f18e03e9ed7c0043bd7c790f741900f2
    Reviewed-on: https://go-review.googlesource.com/21804
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f028b9f9e2433662502283850d06e9e07e72a6bb
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sun Mar 27 10:21:48 2016 -0400

    cmd/link, etc: store typelinks as offsets
    
    This is the first in a series of CLs to replace the use of pointers
    in binary read-only data with offsets.
    
    In standard Go binaries these CLs have a small effect, shrinking
    8-byte pointers to 4-bytes. In position-independent code, it also
    saves the dynamic relocation for the pointer. This has a significant
    effect on the binary size when building as PIE, c-archive, or
    c-shared.
    
    darwin/amd64:
            cmd/go: -12KB (0.1%)
            jujud:  -82KB (0.1%)
    
    linux/amd64 PIE:
            cmd/go:  -86KB (0.7%)
            jujud:  -569KB (0.7%)
    
    For #6853.
    
    Change-Id: Iad5625bbeba58dabfd4d334dbee3fcbfe04b2dcf
    Reviewed-on: https://go-review.googlesource.com/21284
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 23cbfa2545a735eca5ffc1ffd6c0e93c2eecac2a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 12 19:48:01 2016 +0000

    net: skip TestDialCancel on linux-arm64-buildlet
    
    These builders (on Linaro) have a different network configuration
    which is incompatible with this test. Or so it seems.
    
    Updates #15191
    
    Change-Id: Ibfeacddc98dac1da316e704b5c8491617a13e3bf
    Reviewed-on: https://go-review.googlesource.com/21901
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit da224a5c42e7fce7f1d190a86962b1c46be454ef
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sun Apr 10 20:14:27 2016 +0200

    cmd/pprof: pass the event to pprof_toggle_asm for the weblist command
    
    Fixes #15225
    
    Change-Id: I1f85590b2c3293463c6476beebcd3256adc1bf23
    Reviewed-on: https://go-review.googlesource.com/21802
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 37af06360039c96be707526596557a33885c3ad0
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Tue Apr 12 13:12:54 2016 -0300

    crypto/x509: remove broken link in ParsePKCS8PrivateKey documentation
    
    Fixes #14776
    
    Change-Id: I55423ac643f18542b9fd1386ed98dec47fb678aa
    Reviewed-on: https://go-review.googlesource.com/21890
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e07a4459a155789fb57bbf4e2c8eaca5b369fd17
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 12 12:16:20 2016 -0700

    cmd: replace x[i:][0] expressions with x[i]
    
    Passes toolstash -cmp.
    
    Change-Id: Id504e71ed1f23900e24a9aed25143c94f4d7d50c
    Reviewed-on: https://go-review.googlesource.com/21899
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 98080a6c64c2d9bc2a759b66a9b861af4ef7367b
Author: Shawn Walker-Salas <shawn.walker@oracle.com>
Date:   Fri Apr 8 15:59:04 2016 -0700

    net: broken sendfile on SmartOS/Solaris
    
    In the event of a partial write on Solaris and some BSDs, the offset
    pointer passed to sendfile() will be updated even though the function
    returns -1 if errno is set to EAGAIN/EINTR.  In that case, calculate the
    bytes written based on the difference between the updated offset and the
    original offset.  If no bytes were written, and errno is set to
    EAGAIN/EINTR, ignore the errno.
    
    Fixes #13892
    
    Change-Id: I6334b5ef2edcbebdaa7db36fa4f7785967313c2d
    Reviewed-on: https://go-review.googlesource.com/21769
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b1851a3c11a179d4eb55f9d0dd25ef81668a9f81
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 12 11:31:16 2016 -0700

    cmd/compile: move compiler-specific flags into compiler-spec. export data section
    
    Also: Adjust go/importer accordingly.
    
    Change-Id: Ia6669563793e218946af45b9fba1cf986a21c031
    Reviewed-on: https://go-review.googlesource.com/21896
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit be7c786dd04db51076012618ea29ee528a654978
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Apr 12 13:38:24 2016 -0400

    cmd/objdump: skip TestDisasm* on s390x
    
    The disassembler is not yet implemented on s390x.
    
    Updates #15255.
    
    Change-Id: Ibab319c8c087b1a619baa1529398305c1e721877
    Reviewed-on: https://go-review.googlesource.com/21894
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b09c274bfabb3edef60b4df3375906852aab7da1
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Apr 12 12:46:54 2016 -0400

    net/http: fix TestLinuxSendfile on s390x
    
    s390x doesn't have sendfile64 so apply the same fix as MIPS
    (eebf7d27) and just use sendfile.
    
    Change-Id: If8fe2e974ed44a9883282430157c3545d5bd04bd
    Reviewed-on: https://go-review.googlesource.com/21892
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 613ba6cda845fef442995d705027a622984c6b3a
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Apr 12 12:26:17 2016 -0400

    cmd/compile/internal/gc: add s390x support
    
    Allows instructions with a From3 field to be used in regopt so
    long as From3 represents a constant. This is needed because the
    storage-to-storage instructions on s390x place the length of the
    data into From3.
    
    Change-Id: I12cd32d4f997baf2fe97937bb7d45bbf716dfcb5
    Reviewed-on: https://go-review.googlesource.com/20875
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>

commit 811ebb6ac961162b815f4fd50976df81ba4c47b0
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 12 09:22:26 2016 -0700

    cmd/compile: temporarily disable inplace append special case
    
    Fixes #15246
    Re-opens #14969
    
    Change-Id: Ic0b41c5aa42bbb229a0d62b7f3e5888c6b29293d
    Reviewed-on: https://go-review.googlesource.com/21891
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8edf4cb27d07a81ae340b0fda4e519c12f139618
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Apr 8 13:30:41 2016 -0400

    hash/crc32: invert build tags for go implementation
    
    It seems cleaner and more consistent with other files to list the
    architectures that have assembly implementations rather than to
    list those that do not.
    
    This means we don't have to add s390x and future platforms to this
    list.
    
    Change-Id: I2ad3f66b76eb1711333c910236ca7f5151b698e5
    Reviewed-on: https://go-review.googlesource.com/21770
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 78ecd61f6245197f701629f5f511be7f2bc1ff58
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 19:20:34 2016 -0400

    runtime/cgo: add s390x support
    
    Change-Id: I64ada9fe34c3cfc4bd514ec5d8c8f4d4c99074fb
    Reviewed-on: https://go-review.googlesource.com/20950
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 921b2eba52906fc8b9bc4a8744dab63678f5ed3a
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Mar 21 13:30:50 2016 -0400

    debug/gosym: accept PC quantum of 2 (for s390x)
    
    Needed for the header check to accept the header generated for
    s390x as Go 1.2 style rather than Go 1.1 style.
    
    Change-Id: I7b3713d4cc7514cfc58f947a45702348f6d7b824
    Reviewed-on: https://go-review.googlesource.com/20966
    Reviewed-by: Minux Ma <minux@golang.org>

commit 7cbe7b1e867db9001db35ca41ee3e4a3b0de31c7
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 19:13:59 2016 -0400

    runtime/internal/atomic: add s390x atomic operations
    
    Load and store instructions are atomic on the s390x.
    
    Change-Id: I0031ed2fba43f33863bca114d0fdec2e7d1ce807
    Reviewed-on: https://go-review.googlesource.com/20938
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7f5a063d157c777d8e78a567fc9538929bfd38f5
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Apr 12 10:27:16 2016 -0400

    cmd/compile/internal/gc: minor Cgen_checknil cleanup
    
    Most architectures can only generate nil checks when the
    the address to check is in a register. Currently only
    amd64 and 386 can generate checks for addresses that
    reside in memory. This is unlikely to change so the architecture
    check has been inverted.
    
    Change-Id: I73697488a183406c79a9039c62823712b510bb6a
    Reviewed-on: https://go-review.googlesource.com/21861
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cd85f711c0b6847cbfe4e05f4402df075ea936de
Author: Keith Randall <khr@golang.org>
Date:   Mon Apr 11 21:23:11 2016 -0700

    cmd/compile: add x.Uses==1 test to load combiners
    
    We need to make sure that when we combine loads, we only do
    so if there are no other uses of the load.  We can't split
    one load into two because that can then lead to inconsistent
    loaded values in the presence of races.
    
    Add some aggressive copy removal code so that phantom
    "dead copy" uses of values are cleaned up promptly.  This lets
    us use x.Uses==1 conditions reliably.
    
    Change-Id: I9037311db85665f3868dbeb3adb3de5c20728b38
    Reviewed-on: https://go-review.googlesource.com/21853
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 204b6f48c5107d3132033324fd492ca0253568dc
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Tue Apr 12 09:41:11 2016 +0200

    cmd/pprof/internal: move to cmd/internal/pprof
    
    Make internal pprof packages available to cmd/trace.
    cmd/trace needs access to them to generate symbolized
    svg profiles (create and serialize Profile struct).
    And potentially generate svg programmatically instead
    of invoking go tool pprof.
    
    Change-Id: Iafd0c87ffdd4ddc081093be0b39761f19507907a
    Reviewed-on: https://go-review.googlesource.com/21870
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9743e4b0311c37ebacc2c9063a1cd778510eae09
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Apr 11 21:51:29 2016 +0200

    cmd/compile: share dominator tree among many passes
    
    These passes do not modify the dominator tree too much.
    
    % benchstat old.txt new.txt
    name       old time/op     new time/op     delta
    Template       335ms ± 3%      325ms ± 8%    ~             (p=0.074 n=8+9)
    GoTypes        1.05s ± 1%      1.05s ± 3%    ~            (p=0.095 n=9+10)
    Compiler       5.37s ± 4%      5.29s ± 1%  -1.42%         (p=0.022 n=9+10)
    MakeBash       34.9s ± 3%      34.4s ± 2%    ~            (p=0.095 n=9+10)
    
    name       old alloc/op    new alloc/op    delta
    Template      55.4MB ± 0%     54.9MB ± 0%  -0.81%        (p=0.000 n=10+10)
    GoTypes        179MB ± 0%      178MB ± 0%  -0.89%        (p=0.000 n=10+10)
    Compiler       807MB ± 0%      798MB ± 0%  -1.10%        (p=0.000 n=10+10)
    
    name       old allocs/op   new allocs/op   delta
    Template        498k ± 0%       496k ± 0%  -0.29%          (p=0.000 n=9+9)
    GoTypes        1.42M ± 0%      1.41M ± 0%  -0.24%        (p=0.000 n=10+10)
    Compiler       5.61M ± 0%      5.60M ± 0%  -0.12%        (p=0.000 n=10+10)
    
    Change-Id: I4cd20cfba3f132ebf371e16046ab14d7e42799ec
    Reviewed-on: https://go-review.googlesource.com/21806
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit a223ccae386449169774597b15a00f2d70addce7
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Apr 11 20:23:19 2016 -0400

    cmd/compile/internal/s390x: add s390x support
    
    s390x does not require duffzero/duffcopy since it has
    storage-to-storage instructions that can copy/clear up to 256
    bytes at a time.
    
    peep contains several new passes to optimize instruction
    sequences that match s390x instructions such as the
    compare-and-branch and load/store multiple instructions.
    
    copyprop and subprop have been extended to work with moves that
    require sign/zero extension. This work could be ported to other
    architectures that do not used sized math however it does add
    complexity and will probably be rendered unnecessary by ssa in
    the near future.
    
    Change-Id: I1b64b281b452ed82a85655a0df69cb224d2a6941
    Reviewed-on: https://go-review.googlesource.com/20873
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 944a0859b9a16a1951512b82870a31f371d1c417
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Apr 8 11:53:23 2016 +0200

    internal/trace: fix int overflow in timestamps
    
    Fixes #15102
    
    Change-Id: I7fdb6464afd0b7af9b6652051416f0fddd34dc9a
    Reviewed-on: https://go-review.googlesource.com/21730
    Reviewed-by: Austin Clements <austin@google.com>

commit b6cd6d7d3211bd9030dec4115b6202d93fe570a3
Author: Dmitri Shuralyov <shurcooL@gmail.com>
Date:   Thu Mar 31 02:01:48 2016 -0700

    cmd/go: fix vcsFromDir returning bad root on Windows
    
    Apply golang/tools@5804fef4c0556d3e5e7d2440740a3d7aced7d58b.
    
    In the context of cmd/go build tool, import path is a '/'-separated path.
    This can be inferred from `go help importpath` and `go help packages`.
    vcsFromDir documentation says on return, root is the import path
    corresponding to the root of the repository. On Windows and other
    OSes where os.PathSeparator is not '/', that wasn't true since root
    would contain characters other than '/', and therefore it wasn't a
    valid import path corresponding to the root of the repository.
    Fix that by using filepath.ToSlash.
    
    Add test coverage for vcsFromDir, it was previously not tested.
    It's taken from golang.org/x/tools/go/vcs tests, and modified to
    improve style.
    
    Additionally, remove an unneccessary statement from the documentation
    "(thus root is a prefix of importPath)". There is no variable
    importPath that is being referred to (it's possible p.ImportPath
    was being referred to). Without it, the description of root value
    matches the documentation of repoRoot.root struct field:
    
            // root is the import path corresponding to the root of the
            // repository
            root string
    
    Rename and change signature of vcsForDir(p *Package) to
    vcsFromDir(dir, srcRoot string). This is more in sync with the x/tools
    version. It's also simpler, since vcsFromDir only needs those two
    values from Package, and nothing more. Change "for" to "from" in name
    because it's more consistent and clear.
    
    Update usage of vcsFromDir to match the new signature, and respect
    that returned root is a '/'-separated path rather than a os.PathSeparator
    separated path.
    
    Fixes #15040.
    Updates #7723.
    Helps #11490.
    
    Change-Id: Idf51b9239f57248739daaa200aa1c6e633cb5f7f
    Reviewed-on: https://go-review.googlesource.com/21345
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 07669d2737aa51107a4e54b61d6704f6ad8035b5
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Apr 7 08:01:47 2016 +0200

    cmd/compile: cleanup pragcgo
    
    Removes dynimport, dynexport, dynlinker cases since they can not
    be reached due to prefix check for "go:cgo_" in getlinepragma.
    
    Replaces the if chains for verb distinction by a switch statement.
    Replaces fmt.Sprintf by fmt.Sprintln for string concatenation.
    
    Removes the more, getimpsym and getquoted functions by introducing a
    pragmaFields function that partitions a pragma into its components.
    
    Adds tests for cgo pragmas.
    
    Change-Id: I43c7b9550feb3ddccaff7fb02198a3f994444123
    Reviewed-on: https://go-review.googlesource.com/21607
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e569b10ebaed8fbf27d0b55886b6a81d635ddbc7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 12 00:09:05 2016 +0000

    src: split nacltest.bash into naclmake.bash and keep nacltest.bash
    
    Needed by the build system to shard tests. nacl was the last unsharded
    builder.
    
    (I considered also adding a -make-only flag to nacltest.bash, but that
    wouldn't fail fast when the file didn't exist.)
    
    Updates #15242
    
    Change-Id: I6afc1c1fe4268ab98c0724b5764c67d3784caebe
    Reviewed-on: https://go-review.googlesource.com/21851
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 73a0185ad390761f21a3407858fcccc6a11c0858
Author: David Benjamin <davidben@google.com>
Date:   Mon Feb 15 11:51:54 2016 -0500

    crypto/tls: Enforce that version and cipher match on resume.
    
    Per RFC 5246, 7.4.1.3:
    
       cipher_suite
          The single cipher suite selected by the server from the list in
          ClientHello.cipher_suites.  For resumed sessions, this field is
          the value from the state of the session being resumed.
    
    The specifications are not very clearly written about resuming sessions
    at the wrong version (i.e. is the TLS 1.0 notion of "session" the same
    type as the TLS 1.1 notion of "session"?). But every other
    implementation enforces this check and not doing so has some odd
    semantics.
    
    Change-Id: I6234708bd02b636c25139d83b0d35381167e5cad
    Reviewed-on: https://go-review.googlesource.com/21153
    Reviewed-by: Adam Langley <agl@golang.org>

commit c9b66bb355ebbc6a26ee511e996cba4da3e1d644
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Mon Apr 11 21:47:37 2016 -0300

    io: document WriteString calls Write exactly once
    
    Fixes #13849
    
    Change-Id: Idd7f06b547a0179fe15571807a8c48b7c3b78d7c
    Reviewed-on: https://go-review.googlesource.com/21852
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1f54410a61e2242285e366a5580943f78fbff741
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Apr 7 17:19:29 2016 +0900

    net: make IP.{String,MarshalText} return helpful information on address error
    
    This change makes String and MarshalText methods of IP return a
    hexadecial form of IP with no punctuation as part of error
    notification. It doesn't affect the existing behavior of ParseIP.
    
    Also fixes bad shadowing in ipToSockaddr and makes use of reserved
    IP address blocks for documnetation.
    
    Fixes #15052.
    Updates #15228.
    
    Change-Id: I9e9ecce308952ed5683066c3d1bb6a7b36458c65
    Reviewed-on: https://go-review.googlesource.com/21642
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a119f88f2c52e6eb969f51c5bf610d6f105348a3
Author: Alan Donovan <adonovan@google.com>
Date:   Mon Apr 11 18:39:46 2016 -0400

    go/importer: make For("gccgo",  nil) not panic
    
    Apparently we forgot to test this.
    
    Fixes #15092
    
    Change-Id: I33d4fef0f659dfbdfc1ebf8401e96610c8215592
    Reviewed-on: https://go-review.googlesource.com/21860
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 501ddf7189cf97ef27eb870ad134a312f80ae585
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Apr 11 18:16:55 2016 +0000

    context: attempt to deflake timing tests
    
    Passes on OpenBSD now when running it with -count=500.
    
    Presumably this will also fix the same problems seen on FreeBSD and
    Windows.
    
    Fixes #15158
    
    Change-Id: I86451c901613dfa5ecff0c2ecc516527a3c011b3
    Reviewed-on: https://go-review.googlesource.com/21840
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit d1feddb7ae6389ee4175ee85b7168cf58a04b952
Author: Rob Pike <r@golang.org>
Date:   Mon Apr 4 13:22:34 2016 -0700

    cmd/vet: improve documentation for flags, slightly
    
    The way that -all works was unclear from the documentation and made
    worse by recent changes to the flag package. Improve matters by making
    the help message say "default true" for the tests that do default to true,
    and tweak some of the wording.
    
    Before:
    
    Usage of vet:
            vet [flags] directory...
            vet [flags] files... # Must be a single package
    For more information run
            go doc cmd/vet
    
    Flags:
      -all
            enable all non-experimental checks (default unset)
      -asmdecl
            check assembly against Go declarations (default unset)
    ...
    
    After:
    
    Usage of vet:
            vet [flags] directory...
            vet [flags] files... # Must be a single package
    By default, -all is set and all non-experimental checks are run.
    For more information run
            go doc cmd/vet
    
    Flags:
      -all
            enable all non-experimental checks (default true)
      -asmdecl
            check assembly against Go declarations (default true)
    ...
    
    Change-Id: Ie94b27381a9ad2382a10a7542a93bce1d59fa8f5
    Reviewed-on: https://go-review.googlesource.com/21495
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit a4650a2111b2bb826ca64a13bdad9c96e3095e47
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Apr 10 09:44:17 2016 -0700

    cmd/compile: avoid write barrier in append fast path
    
    When we are writing the result of an append back
    to the same slice, we don’t need a write barrier
    on the fast path.
    
    This re-implements an optimization that was present
    in the old backend.
    
    Updates #14921
    Fixes #14969
    
    Sample code:
    
    var x []byte
    
    func p() {
            x = append(x, 1, 2, 3)
    }
    
    Before:
    
    "".p t=1 size=224 args=0x0 locals=0x48
            0x0000 00000 (append.go:21)     TEXT    "".p(SB), $72-0
            0x0000 00000 (append.go:21)     MOVQ    (TLS), CX
            0x0009 00009 (append.go:21)     CMPQ    SP, 16(CX)
            0x000d 00013 (append.go:21)     JLS     199
            0x0013 00019 (append.go:21)     SUBQ    $72, SP
            0x0017 00023 (append.go:21)     FUNCDATA        $0, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0017 00023 (append.go:21)     FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0017 00023 (append.go:19)     MOVQ    "".x+16(SB), CX
            0x001e 00030 (append.go:19)     MOVQ    "".x(SB), DX
            0x0025 00037 (append.go:19)     MOVQ    "".x+8(SB), BX
            0x002c 00044 (append.go:19)     MOVQ    BX, "".autotmp_0+64(SP)
            0x0031 00049 (append.go:22)     LEAQ    3(BX), BP
            0x0035 00053 (append.go:22)     CMPQ    BP, CX
            0x0038 00056 (append.go:22)     JGT     $0, 131
            0x003a 00058 (append.go:22)     MOVB    $1, (DX)(BX*1)
            0x003e 00062 (append.go:22)     MOVB    $2, 1(DX)(BX*1)
            0x0043 00067 (append.go:22)     MOVB    $3, 2(DX)(BX*1)
            0x0048 00072 (append.go:22)     MOVQ    BP, "".x+8(SB)
            0x004f 00079 (append.go:22)     MOVQ    CX, "".x+16(SB)
            0x0056 00086 (append.go:22)     MOVL    runtime.writeBarrier(SB), AX
            0x005c 00092 (append.go:22)     TESTB   AL, AL
            0x005e 00094 (append.go:22)     JNE     $0, 108
            0x0060 00096 (append.go:22)     MOVQ    DX, "".x(SB)
            0x0067 00103 (append.go:23)     ADDQ    $72, SP
            0x006b 00107 (append.go:23)     RET
            0x006c 00108 (append.go:22)     LEAQ    "".x(SB), CX
            0x0073 00115 (append.go:22)     MOVQ    CX, (SP)
            0x0077 00119 (append.go:22)     MOVQ    DX, 8(SP)
            0x007c 00124 (append.go:22)     PCDATA  $0, $0
            0x007c 00124 (append.go:22)     CALL    runtime.writebarrierptr(SB)
            0x0081 00129 (append.go:23)     JMP     103
            0x0083 00131 (append.go:22)     LEAQ    type.[]uint8(SB), AX
            0x008a 00138 (append.go:22)     MOVQ    AX, (SP)
            0x008e 00142 (append.go:22)     MOVQ    DX, 8(SP)
            0x0093 00147 (append.go:22)     MOVQ    BX, 16(SP)
            0x0098 00152 (append.go:22)     MOVQ    CX, 24(SP)
            0x009d 00157 (append.go:22)     MOVQ    BP, 32(SP)
            0x00a2 00162 (append.go:22)     PCDATA  $0, $0
            0x00a2 00162 (append.go:22)     CALL    runtime.growslice(SB)
            0x00a7 00167 (append.go:22)     MOVQ    40(SP), DX
            0x00ac 00172 (append.go:22)     MOVQ    48(SP), AX
            0x00b1 00177 (append.go:22)     MOVQ    56(SP), CX
            0x00b6 00182 (append.go:22)     ADDQ    $3, AX
            0x00ba 00186 (append.go:19)     MOVQ    "".autotmp_0+64(SP), BX
            0x00bf 00191 (append.go:22)     MOVQ    AX, BP
            0x00c2 00194 (append.go:22)     JMP     58
            0x00c7 00199 (append.go:22)     NOP
            0x00c7 00199 (append.go:21)     CALL    runtime.morestack_noctxt(SB)
            0x00cc 00204 (append.go:21)     JMP     0
    
    After:
    
    "".p t=1 size=208 args=0x0 locals=0x48
            0x0000 00000 (append.go:21)     TEXT    "".p(SB), $72-0
            0x0000 00000 (append.go:21)     MOVQ    (TLS), CX
            0x0009 00009 (append.go:21)     CMPQ    SP, 16(CX)
            0x000d 00013 (append.go:21)     JLS     191
            0x0013 00019 (append.go:21)     SUBQ    $72, SP
            0x0017 00023 (append.go:21)     FUNCDATA        $0, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0017 00023 (append.go:21)     FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0017 00023 (append.go:19)     MOVQ    "".x+16(SB), CX
            0x001e 00030 (append.go:19)     MOVQ    "".x+8(SB), DX
            0x0025 00037 (append.go:19)     MOVQ    DX, "".autotmp_0+64(SP)
            0x002a 00042 (append.go:19)     MOVQ    "".x(SB), BX
            0x0031 00049 (append.go:22)     LEAQ    3(DX), BP
            0x0035 00053 (append.go:22)     MOVQ    BP, "".x+8(SB)
            0x003c 00060 (append.go:22)     CMPQ    BP, CX
            0x003f 00063 (append.go:22)     JGT     $0, 84
            0x0041 00065 (append.go:22)     MOVB    $1, (BX)(DX*1)
            0x0045 00069 (append.go:22)     MOVB    $2, 1(BX)(DX*1)
            0x004a 00074 (append.go:22)     MOVB    $3, 2(BX)(DX*1)
            0x004f 00079 (append.go:23)     ADDQ    $72, SP
            0x0053 00083 (append.go:23)     RET
            0x0054 00084 (append.go:22)     LEAQ    type.[]uint8(SB), AX
            0x005b 00091 (append.go:22)     MOVQ    AX, (SP)
            0x005f 00095 (append.go:22)     MOVQ    BX, 8(SP)
            0x0064 00100 (append.go:22)     MOVQ    DX, 16(SP)
            0x0069 00105 (append.go:22)     MOVQ    CX, 24(SP)
            0x006e 00110 (append.go:22)     MOVQ    BP, 32(SP)
            0x0073 00115 (append.go:22)     PCDATA  $0, $0
            0x0073 00115 (append.go:22)     CALL    runtime.growslice(SB)
            0x0078 00120 (append.go:22)     MOVQ    40(SP), CX
            0x007d 00125 (append.go:22)     MOVQ    56(SP), AX
            0x0082 00130 (append.go:22)     MOVQ    AX, "".x+16(SB)
            0x0089 00137 (append.go:22)     MOVL    runtime.writeBarrier(SB), AX
            0x008f 00143 (append.go:22)     TESTB   AL, AL
            0x0091 00145 (append.go:22)     JNE     $0, 168
            0x0093 00147 (append.go:22)     MOVQ    CX, "".x(SB)
            0x009a 00154 (append.go:22)     MOVQ    "".x(SB), BX
            0x00a1 00161 (append.go:19)     MOVQ    "".autotmp_0+64(SP), DX
            0x00a6 00166 (append.go:22)     JMP     65
            0x00a8 00168 (append.go:22)     LEAQ    "".x(SB), DX
            0x00af 00175 (append.go:22)     MOVQ    DX, (SP)
            0x00b3 00179 (append.go:22)     MOVQ    CX, 8(SP)
            0x00b8 00184 (append.go:22)     PCDATA  $0, $0
            0x00b8 00184 (append.go:22)     CALL    runtime.writebarrierptr(SB)
            0x00bd 00189 (append.go:22)     JMP     154
            0x00bf 00191 (append.go:22)     NOP
            0x00bf 00191 (append.go:21)     CALL    runtime.morestack_noctxt(SB)
            0x00c4 00196 (append.go:21)     JMP     0
    
    Change-Id: I77a41ad3a22557a4bb4654de7d6d24a029efe34a
    Reviewed-on: https://go-review.googlesource.com/21813
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 32efa16c3d63dd630e2190a8c0f30c0a941f6fd7
Author: David Chase <drchase@google.com>
Date:   Fri Apr 1 14:51:29 2016 -0400

    cmd/compile: added stats printing to stackalloc
    
    This is controlled by the "regalloc" stats flag, since regalloc
    calls stackalloc.  The plan is for this to allow comparison
    of cheaper stack allocation algorithms with what we have now.
    
    Change-Id: Ibf64a780344c69babfcbb328fd6d053ea2e02cfc
    Reviewed-on: https://go-review.googlesource.com/21393
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7e40627a0e595aa321efaf44f8507b678ee5eb1e
Author: Keith Randall <khr@golang.org>
Date:   Mon Apr 11 13:17:52 2016 -0700

    cmd/compile: zero all three argstorage slots
    
    These changes were missed when going from 2 to 3 argstorage slots.
    https://go-review.googlesource.com/20296/
    
    Change-Id: I930a307bb0b695bf1ae088030c9bbb6d14ca31d2
    Reviewed-on: https://go-review.googlesource.com/21841
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 7f53391f6b7f2387a5ed00398d34b046c321966f
Author: Keith Randall <khr@golang.org>
Date:   Mon Apr 11 12:22:26 2016 -0700

    cmd/compile: fix -N build
    
    The decomposer of builtin types is confused by having structs
    still around from the user-type decomposer.  They're all dead though,
    so just enabling a deadcode pass fixes things.
    
    Change-Id: I2df6bc7e829be03eabfd24c8dda1bff96f3d7091
    Reviewed-on: https://go-review.googlesource.com/21839
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7166dfe0c11bd25b962d7f691ea1be857842dfbf
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Apr 11 11:54:07 2016 -0700

    image/color: add YCbCrToRGB benchmark
    
    Change-Id: I9ba76d5b0861a901415fdceccaf2f5caa2facb7f
    Reviewed-on: https://go-review.googlesource.com/21837
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cd6b2b7451c6feb277d38820f41f81ce4a036af2
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Apr 10 20:01:49 2016 -0400

    cmd/internal/obj/s390x: add MULHD instruction
    
    Emulate 64-bit signed high multiplication ((a*b)>>64). To do this
    we use the 64-bit unsigned high multiplication method and then
    fix the result as shown in Hacker's Delight 2nd ed., chapter 8-3.
    
    Required to enable some division optimizations.
    
    Change-Id: I9194f428e09d3d029cb1afb4715cd5424b5d922e
    Reviewed-on: https://go-review.googlesource.com/21774
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cabb1402568ae7d05d9d5adf56953a4792085a81
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Apr 11 05:12:43 2016 +0000

    net/http: add ServerContextKey to let a handler access its Server
    
    Fixes #12438
    Updates #15229 (to decide context key variable naming convention)
    
    Change-Id: I3ba423e91b689e232143247d044495a12c97a7d2
    Reviewed-on: https://go-review.googlesource.com/21829
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e79fef8e55f8a893c65f41566bbec10339d45dec
Author: Shawn Walker-Salas <shawn.walker@oracle.com>
Date:   Thu Apr 7 15:26:57 2016 -0700

    cmd/link: external linking can fail on Solaris 11.2+
    
    Workaround external linking issues encountered on Solaris 11.2+ due to
    the go.o object file being created with a NULL STT_FILE symtab entry by
    using a placeholder name.
    
    Fixes #14957
    
    Change-Id: I89c501b4c548469f3c878151947d35588057982b
    Reviewed-on: https://go-review.googlesource.com/21636
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 3fafe2e8888dadb6877fa1e7569f5bd1f688dd3a
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Mon Apr 11 08:57:52 2016 +0200

    internal/trace: support parsing of 1.5 traces
    
    1. Parse out version from trace header.
    2. Restore handling of 1.5 traces.
    3. Restore optional symbolization of traces.
    4. Add some canned 1.5 traces for regression testing
       (http benchmark trace, runtime/trace stress traces,
        plus one with broken timestamps).
    
    Change-Id: Idb18a001d03ded8e13c2730eeeb37c5836e31256
    Reviewed-on: https://go-review.googlesource.com/21803
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit b04e145248d5d3721a41d4bb26704fdb43caaf38
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 31 21:24:10 2016 -0700

    cmd/compile: fix naming of decomposed structs
    
    When a struct is SSAable, we will name its component parts
    by their field names.  For example,
    type T struct {
         a, b, c int
    }
    If we ever need to spill a variable x of type T, we will
    spill its individual components to variables named x.a, x.b,
    and x.c.
    
    Change-Id: I857286ff1f2597f2c4bbd7b4c0b936386fb37131
    Reviewed-on: https://go-review.googlesource.com/21389
    Reviewed-by: David Chase <drchase@google.com>

commit 6c6089b3fdba9eb0cff863a03074dbac47c92f63
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Apr 1 15:09:19 2016 +0200

    cmd/compile: bce when max and limit are consts
    
    Removes 49 more bound checks in make.bash. For example:
    
    var a[100]int
    for i := 0; i < 50; i++ {
      use a[i+25]
    }
    
    Change-Id: I85e0130ee5d07f0ece9b17044bba1a2047414ce7
    Reviewed-on: https://go-review.googlesource.com/21379
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 00681eec6aec03b8b2822c9220fba27c18923c01
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Mon Apr 11 11:15:00 2016 -0300

    net/http: document Error does not end the request
    
    Fixes #15205
    
    Change-Id: Ia650806756758ca8ed2272b1696e59b809b16c61
    Reviewed-on: https://go-review.googlesource.com/21836
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 683917a72154e3409e1ab5ef5b26030388312d0b
Author: Dominik Honnef <dominik@honnef.co>
Date:   Fri Apr 1 07:34:18 2016 +0200

    all: use bytes.Equal, bytes.Contains and strings.Contains, again
    
    The previous cleanup was done with a buggy tool, missing some potential
    rewrites.
    
    Change-Id: I333467036e355f999a6a493e8de87e084f374e26
    Reviewed-on: https://go-review.googlesource.com/21378
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4f12cc08132f3e5d2ba4b756c91d88c2e58a73b1
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Thu Apr 7 18:00:57 2016 +0300

    cmd/link: symbol generation optimizations
    
    After making dwarf generation backed by LSyms there was a performance regression
    of about 10%. These changes make on the fly symbol generation faster and
    are meant to help mitigate that.
    
    name       old secs    new secs    delta
    LinkCmdGo   0.55 ± 9%   0.53 ± 8%  -4.42%   (p=0.000 n=100+99)
    
    name       old MaxRSS  new MaxRSS  delta
    LinkCmdGo   152k ± 6%   149k ± 3%  -1.99%    (p=0.000 n=99+97)
    
    Change-Id: Iacca3ec924ce401aa83126bc0b10fe89bedf0ba6
    Reviewed-on: https://go-review.googlesource.com/21733
    Run-TryBot: Shahar Kohanim <skohanim@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit b0eeb8b0aaaf4997c25e3048bfc40e53d556a8eb
Author: Russ Cox <rsc@golang.org>
Date:   Sun Apr 3 12:52:12 2016 -0400

    net/http/pprof: accept fractional seconds in trace handler
    
    For heavily loaded servers, even 1 second of trace is too large
    to process with the trace viewer; using a float64 here allows
    fetching /debug/pprof/trace?seconds=0.1.
    
    Change-Id: I286c07abf04f9c1fe594b0e26799bf37f5c734db
    Reviewed-on: https://go-review.googlesource.com/21455
    Reviewed-by: Austin Clements <austin@google.com>

commit 720c4c016c75d37d14e0621696127819c8a73b0b
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Apr 8 17:50:40 2016 +1000

    runtime: merge lfstack_amd64.go into lfstack_64bit.go
    
    Merge the amd64 lfstack implementation into the general 64 bit
    implementation.
    
    Change-Id: Id9ed61b90d2e3bc3b0246294c03eb2c92803b6ca
    Reviewed-on: https://go-review.googlesource.com/21707
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 20375f64b18e9f904302d8f873e23702117bf4f5
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Apr 11 11:04:15 2016 +1000

    cmd/go: document that -run=^$ skips all tests
    
    Change-Id: I7bbdd9600e0d9a647aeea16f1ae9e42a4e0cf44d
    Reviewed-on: https://go-review.googlesource.com/21823
    Reviewed-by: Rob Pike <r@golang.org>

commit 2a4158207edb499f8b210aaa7a9af103b93b5ac7
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Apr 10 21:58:37 2016 -0400

    cmd/compile/internal/gc: refactor cgen_div
    
    This commit adds two new functions to cgen.go: hasHMUL64 and
    hasRROTC64. These are used to determine whether or not an
    architecture supports the instructions needed to perform an
    optimization in cgen_div.
    
    This commit should not affect existing architectures (although it
    does add s390x to the new functions). However, since most
    architectures support HMUL the hasHMUL64 function could be
    modified to enable most of the optimizations in cgen_div on those
    platforms.
    
    Change-Id: I33bf329ddeb6cf2954bd17b7c161012de352fb62
    Reviewed-on: https://go-review.googlesource.com/21775
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a00ad5f47ea9c950dd041b33476c2bb4568496e1
Author: Andrew Gerrand <adg@golang.org>
Date:   Mon Apr 11 14:54:54 2016 +1000

    doc: document Go 1.6.1 and Go 1.5.4
    
    Change-Id: Icb9e947a43fb87fbfe0655b09e0d7e8f61825aeb
    Reviewed-on: https://go-review.googlesource.com/21825
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ba09d06e166a06b4405b2ffd92df6acf222d281f
Author: Jeremy Jackins <jeremyjackins@gmail.com>
Date:   Thu Apr 7 15:42:35 2016 +0900

    runtime: remove remaining references to TheChar
    
    After mdempsky's recent changes, these are the only references to
    "TheChar" left in the Go tree. Without the context, and without
    knowing the history, this is confusing.
    
    Also rename sys.TheGoos and sys.TheGoarch to sys.GOOS
    and sys.GOARCH.
    
    Also change the heap dump format to include sys.GOARCH
    rather than TheChar, which is no longer a concept.
    
    Updates #15169 (changes heapdump format)
    
    Change-Id: I3e99eeeae00ed55d7d01e6ed503d958c6e931dca
    Reviewed-on: https://go-review.googlesource.com/21647
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 1faa8869c6c72f055cdaa2b547964830909c96c6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 6 12:31:55 2016 -0700

    net/http: set the Request context for incoming server requests
    
    Updates #13021
    Updates #15224
    
    Change-Id: Ia3cd608bb887fcfd8d81b035fa57bd5eb8edf09b
    Reviewed-on: https://go-review.googlesource.com/21810
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bd7249766617fda12d112c3ad3ae2857ff97c71e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Apr 10 15:45:34 2016 +0000

    context: document that WithValue's key must be comparable
    
    Also, check it and explode earlier, rather than cryptic failures later.
    
    Change-Id: I319a425f60e2bc9d005a187fbdbd153faa96411c
    Reviewed-on: https://go-review.googlesource.com/21799
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit e6a8daceb0b0df77f5d2ca34a73561375bb89c63
Author: David Symonds <dsymonds@golang.org>
Date:   Mon Apr 11 10:26:38 2016 +1000

    cmd/vet: refresh command for updating whitelist data.
    
    This excludes internal and testdata packages, as well as func types.
    
    No new whitelist entries were found.
    
    Change-Id: Ie7d42ce0a235394e4bcabf09e155726a35cd2d3d
    Reviewed-on: https://go-review.googlesource.com/21822
    Reviewed-by: Rob Pike <r@golang.org>

commit ad7448fe982d83de15deec9c55c56d0cd9261c6c
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Apr 10 17:32:35 2016 +0200

    runtime: speed up makeslice by avoiding divisions
    
    Only compute the number of maximum allowed elements per slice once.
    
    name         old time/op  new time/op  delta
    MakeSlice-2  55.5ns ± 1%  45.6ns ± 2%  -17.88%  (p=0.000 n=99+100)
    
    Change-Id: I951feffda5d11910a75e55d7e978d306d14da2c5
    Reviewed-on: https://go-review.googlesource.com/21801
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5b3e5766bcc5e1090d0512a5916886ffc24ab246
Author: Andrew Gerrand <adg@golang.org>
Date:   Fri Apr 8 14:43:35 2016 +1000

    cmd/go: remove special case that puts godoc in $GOROOT/bin
    
    Updates golang/go#15106
    
    Change-Id: I4214b841d63bb7e9c3c5ede2abe21a8a68f06c41
    Reviewed-on: https://go-review.googlesource.com/21701
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0fd270ab7abec08c050f29a3bbeb83d7740d0a47
Author: Andrew Gerrand <adg@golang.org>
Date:   Fri Apr 8 15:39:32 2016 +1000

    text/template: emit field error over nil pointer error where appropriate
    
    When evaluating "{{.MissingField}}" on a nil *T, Exec returns
    "can't evaluate field MissingField in type *T" instead of
    "nil pointer evaluating *T.MissingField".
    
    Fixes golang/go#15125
    
    Change-Id: I6e73f61b8a72c694179c1f8cdc808766c90b6f57
    Reviewed-on: https://go-review.googlesource.com/21705
    Reviewed-by: Rob Pike <r@golang.org>

commit 0004f34cefcdaad13a5131e3494fb2ff04877cd2
Author: Keith Randall <khr@golang.org>
Date:   Sun Apr 10 08:26:43 2016 -0700

    cmd/compile: regalloc enforces 2-address instructions
    
    Instead of being a hint, resultInArg0 is now enforced by regalloc.
    This allows us to delete all the code from amd64/ssa.go which
    deals with converting from a semantically three-address instruction
    into some copies plus a two-address instruction.
    
    Change-Id: Id4f39a80be4b678718bfd42a229f9094ab6ecd7c
    Reviewed-on: https://go-review.googlesource.com/21816
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 6b33b0e98e9be77d98b026ae2adf10dd71be5a1b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Apr 10 09:08:00 2016 -0700

    cmd/compile: avoid a spill in append fast path
    
    Instead of spilling newlen, recalculate it.
    This removes a spill from the fast path,
    at the cost of a cheap recalculation
    on the (rare) growth path.
    This uses 8 bytes less of stack space.
    It generates two more bytes of code,
    but that is due to suboptimal register allocation;
    see far below.
    
    Runtime append microbenchmarks are all over the map,
    presumably due to incidental code movement.
    
    Sample code:
    
    func s(b []byte) []byte {
            b = append(b, 1, 2, 3)
            return b
    }
    
    Before:
    
    "".s t=1 size=160 args=0x30 locals=0x48
            0x0000 00000 (append.go:8)      TEXT    "".s(SB), $72-48
            0x0000 00000 (append.go:8)      MOVQ    (TLS), CX
            0x0009 00009 (append.go:8)      CMPQ    SP, 16(CX)
            0x000d 00013 (append.go:8)      JLS     149
            0x0013 00019 (append.go:8)      SUBQ    $72, SP
            0x0017 00023 (append.go:8)      FUNCDATA        $0, gclocals·6432f8c6a0d23fa7bee6c5d96f21a92a(SB)
            0x0017 00023 (append.go:8)      FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0017 00023 (append.go:9)      MOVQ    "".b+88(FP), CX
            0x001c 00028 (append.go:9)      LEAQ    3(CX), DX
            0x0020 00032 (append.go:9)      MOVQ    DX, "".autotmp_0+64(SP)
            0x0025 00037 (append.go:9)      MOVQ    "".b+96(FP), BX
            0x002a 00042 (append.go:9)      CMPQ    DX, BX
            0x002d 00045 (append.go:9)      JGT     $0, 86
            0x002f 00047 (append.go:8)      MOVQ    "".b+80(FP), AX
            0x0034 00052 (append.go:9)      MOVB    $1, (AX)(CX*1)
            0x0038 00056 (append.go:9)      MOVB    $2, 1(AX)(CX*1)
            0x003d 00061 (append.go:9)      MOVB    $3, 2(AX)(CX*1)
            0x0042 00066 (append.go:10)     MOVQ    AX, "".~r1+104(FP)
            0x0047 00071 (append.go:10)     MOVQ    DX, "".~r1+112(FP)
            0x004c 00076 (append.go:10)     MOVQ    BX, "".~r1+120(FP)
            0x0051 00081 (append.go:10)     ADDQ    $72, SP
            0x0055 00085 (append.go:10)     RET
            0x0056 00086 (append.go:9)      LEAQ    type.[]uint8(SB), AX
            0x005d 00093 (append.go:9)      MOVQ    AX, (SP)
            0x0061 00097 (append.go:9)      MOVQ    "".b+80(FP), BP
            0x0066 00102 (append.go:9)      MOVQ    BP, 8(SP)
            0x006b 00107 (append.go:9)      MOVQ    CX, 16(SP)
            0x0070 00112 (append.go:9)      MOVQ    BX, 24(SP)
            0x0075 00117 (append.go:9)      MOVQ    DX, 32(SP)
            0x007a 00122 (append.go:9)      PCDATA  $0, $0
            0x007a 00122 (append.go:9)      CALL    runtime.growslice(SB)
            0x007f 00127 (append.go:9)      MOVQ    40(SP), AX
            0x0084 00132 (append.go:9)      MOVQ    56(SP), BX
            0x0089 00137 (append.go:8)      MOVQ    "".b+88(FP), CX
            0x008e 00142 (append.go:9)      MOVQ    "".autotmp_0+64(SP), DX
            0x0093 00147 (append.go:9)      JMP     52
            0x0095 00149 (append.go:9)      NOP
            0x0095 00149 (append.go:8)      CALL    runtime.morestack_noctxt(SB)
            0x009a 00154 (append.go:8)      JMP     0
    
    After:
    
    "".s t=1 size=176 args=0x30 locals=0x40
            0x0000 00000 (append.go:8)      TEXT    "".s(SB), $64-48
            0x0000 00000 (append.go:8)      MOVQ    (TLS), CX
            0x0009 00009 (append.go:8)      CMPQ    SP, 16(CX)
            0x000d 00013 (append.go:8)      JLS     151
            0x0013 00019 (append.go:8)      SUBQ    $64, SP
            0x0017 00023 (append.go:8)      FUNCDATA        $0, gclocals·6432f8c6a0d23fa7bee6c5d96f21a92a(SB)
            0x0017 00023 (append.go:8)      FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0017 00023 (append.go:9)      MOVQ    "".b+80(FP), CX
            0x001c 00028 (append.go:9)      LEAQ    3(CX), DX
            0x0020 00032 (append.go:9)      MOVQ    "".b+88(FP), BX
            0x0025 00037 (append.go:9)      CMPQ    DX, BX
            0x0028 00040 (append.go:9)      JGT     $0, 81
            0x002a 00042 (append.go:8)      MOVQ    "".b+72(FP), AX
            0x002f 00047 (append.go:9)      MOVB    $1, (AX)(CX*1)
            0x0033 00051 (append.go:9)      MOVB    $2, 1(AX)(CX*1)
            0x0038 00056 (append.go:9)      MOVB    $3, 2(AX)(CX*1)
            0x003d 00061 (append.go:10)     MOVQ    AX, "".~r1+96(FP)
            0x0042 00066 (append.go:10)     MOVQ    DX, "".~r1+104(FP)
            0x0047 00071 (append.go:10)     MOVQ    BX, "".~r1+112(FP)
            0x004c 00076 (append.go:10)     ADDQ    $64, SP
            0x0050 00080 (append.go:10)     RET
            0x0051 00081 (append.go:9)      LEAQ    type.[]uint8(SB), AX
            0x0058 00088 (append.go:9)      MOVQ    AX, (SP)
            0x005c 00092 (append.go:9)      MOVQ    "".b+72(FP), BP
            0x0061 00097 (append.go:9)      MOVQ    BP, 8(SP)
            0x0066 00102 (append.go:9)      MOVQ    CX, 16(SP)
            0x006b 00107 (append.go:9)      MOVQ    BX, 24(SP)
            0x0070 00112 (append.go:9)      MOVQ    DX, 32(SP)
            0x0075 00117 (append.go:9)      PCDATA  $0, $0
            0x0075 00117 (append.go:9)      CALL    runtime.growslice(SB)
            0x007a 00122 (append.go:9)      MOVQ    40(SP), AX
            0x007f 00127 (append.go:9)      MOVQ    48(SP), CX
            0x0084 00132 (append.go:9)      MOVQ    56(SP), BX
            0x0089 00137 (append.go:9)      ADDQ    $3, CX
            0x008d 00141 (append.go:9)      MOVQ    CX, DX
            0x0090 00144 (append.go:8)      MOVQ    "".b+80(FP), CX
            0x0095 00149 (append.go:9)      JMP     47
            0x0097 00151 (append.go:9)      NOP
            0x0097 00151 (append.go:8)      CALL    runtime.morestack_noctxt(SB)
            0x009c 00156 (append.go:8)      JMP     0
    
    Observe that in the following sequence,
    we should use DX directly instead of using
    CX as a temporary register, which would make
    the new code a strict improvement on the old:
    
            0x007f 00127 (append.go:9)      MOVQ    48(SP), CX
            0x0084 00132 (append.go:9)      MOVQ    56(SP), BX
            0x0089 00137 (append.go:9)      ADDQ    $3, CX
            0x008d 00141 (append.go:9)      MOVQ    CX, DX
            0x0090 00144 (append.go:8)      MOVQ    "".b+80(FP), CX
    
    Change-Id: I4ee50b18fa53865901d2d7f86c2cbb54c6fa6924
    Reviewed-on: https://go-review.googlesource.com/21812
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 974c201f74f730737964e5239da473fc548b408e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Apr 10 10:43:04 2016 -0700

    runtime: avoid unnecessary map iteration write barrier
    
    Update #14921
    
    Change-Id: I5c5816d0193757bf7465b1e09c27ca06897df4bf
    Reviewed-on: https://go-review.googlesource.com/21814
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit a44c4256ae958b0aacecd5fd0b0e7f1156f8bcf4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Apr 10 14:51:07 2016 +0000

    html: fix typo in UnescapeString string docs
    
    Fixes #15221
    
    Change-Id: I9e927a2f604213338b4572f1a32d0247c58bdc60
    Reviewed-on: https://go-review.googlesource.com/21798
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a56f5a032217e1e28c005886a98054caf7dc8201
Author: Klaus Post <klauspost@gmail.com>
Date:   Sun Apr 10 17:16:07 2016 +0200

    compress/flate: improve short writer error test
    
    This improves the short version of the writer test.
    
    First of all, it has a much quicker setup. Previously that
    could take up towards 0.5 second.
    
    Secondly, it will test all compression levels in short mode as well.
    
    Execution time is 1.7s/0.03s for normal/short mode.
    
    Change-Id: I275a21f712daff6f7125cc6a493415e86439cb19
    Reviewed-on: https://go-review.googlesource.com/21800
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f20b1809f213c662932106a68c76ea3545eab1ee
Author: Klaus Post <klauspost@gmail.com>
Date:   Sun Apr 10 13:43:24 2016 +0200

    compress/flate: eliminate most common bounds checks
    
    This uses the SSA compiler to eliminate various unneeded bounds
    checks in loops and various lookups.
    
    This fixes the low hanging fruit, without any major code changes.
    
    name                       old time/op    new time/op    delta
    EncodeDigitsHuffman1e4-8     49.9µs ± 1%    48.1µs ± 1%  -3.74%   (p=0.000 n=10+9)
    EncodeDigitsHuffman1e5-8      476µs ± 1%     458µs ± 1%  -3.58%  (p=0.000 n=10+10)
    EncodeDigitsHuffman1e6-8     4.80ms ± 2%    4.56ms ± 1%  -5.07%   (p=0.000 n=10+9)
    EncodeDigitsSpeed1e4-8        305µs ± 3%     290µs ± 2%  -5.03%   (p=0.000 n=10+9)
    EncodeDigitsSpeed1e5-8       3.67ms ± 2%    3.49ms ± 2%  -4.78%   (p=0.000 n=9+10)
    EncodeDigitsSpeed1e6-8       38.3ms ± 2%    35.8ms ± 1%  -6.58%   (p=0.000 n=9+10)
    EncodeDigitsDefault1e4-8      361µs ± 2%     346µs ± 3%  -4.12%   (p=0.000 n=10+9)
    EncodeDigitsDefault1e5-8     5.24ms ± 2%    4.96ms ± 3%  -5.38%  (p=0.000 n=10+10)
    EncodeDigitsDefault1e6-8     56.5ms ± 3%    52.2ms ± 2%  -7.68%  (p=0.000 n=10+10)
    EncodeDigitsCompress1e4-8     362µs ± 2%     343µs ± 1%  -5.20%   (p=0.000 n=10+9)
    EncodeDigitsCompress1e5-8    5.26ms ± 3%    4.98ms ± 2%  -5.48%  (p=0.000 n=10+10)
    EncodeDigitsCompress1e6-8    56.0ms ± 4%    52.1ms ± 1%  -7.01%  (p=0.000 n=10+10)
    EncodeTwainHuffman1e4-8      70.9µs ± 3%    64.7µs ± 1%  -8.68%   (p=0.000 n=10+9)
    EncodeTwainHuffman1e5-8       556µs ± 2%     524µs ± 2%  -5.84%  (p=0.000 n=10+10)
    EncodeTwainHuffman1e6-8      5.54ms ± 3%    5.22ms ± 2%  -5.70%  (p=0.000 n=10+10)
    EncodeTwainSpeed1e4-8         294µs ± 3%     284µs ± 1%  -3.71%  (p=0.000 n=10+10)
    EncodeTwainSpeed1e5-8        2.59ms ± 2%    2.48ms ± 1%  -4.14%   (p=0.000 n=10+9)
    EncodeTwainSpeed1e6-8        25.6ms ± 1%    24.3ms ± 1%  -5.28%   (p=0.000 n=9+10)
    EncodeTwainDefault1e4-8       419µs ± 2%     396µs ± 1%  -5.59%   (p=0.000 n=10+9)
    EncodeTwainDefault1e5-8      6.23ms ± 4%    5.75ms ± 1%  -7.83%   (p=0.000 n=10+9)
    EncodeTwainDefault1e6-8      66.2ms ± 2%    61.4ms ± 1%  -7.22%  (p=0.000 n=10+10)
    EncodeTwainCompress1e4-8      426µs ± 1%     405µs ± 1%  -4.97%   (p=0.000 n=9+10)
    EncodeTwainCompress1e5-8     6.80ms ± 1%    6.32ms ± 1%  -6.97%   (p=0.000 n=9+10)
    EncodeTwainCompress1e6-8     74.6ms ± 3%    68.7ms ± 1%  -7.90%   (p=0.000 n=10+9)
    
    name                       old speed      new speed      delta
    EncodeDigitsHuffman1e4-8    200MB/s ± 1%   208MB/s ± 1%  +3.88%   (p=0.000 n=10+9)
    EncodeDigitsHuffman1e5-8    210MB/s ± 1%   218MB/s ± 1%  +3.71%  (p=0.000 n=10+10)
    EncodeDigitsHuffman1e6-8    208MB/s ± 2%   219MB/s ± 1%  +5.32%   (p=0.000 n=10+9)
    EncodeDigitsSpeed1e4-8     32.8MB/s ± 3%  34.5MB/s ± 2%  +5.29%   (p=0.000 n=10+9)
    EncodeDigitsSpeed1e5-8     27.2MB/s ± 2%  28.6MB/s ± 2%  +5.29%  (p=0.000 n=10+10)
    EncodeDigitsSpeed1e6-8     26.1MB/s ± 2%  27.9MB/s ± 1%  +7.02%   (p=0.000 n=9+10)
    EncodeDigitsDefault1e4-8   27.7MB/s ± 2%  28.9MB/s ± 3%  +4.30%   (p=0.000 n=10+9)
    EncodeDigitsDefault1e5-8   19.1MB/s ± 2%  20.2MB/s ± 3%  +5.69%  (p=0.000 n=10+10)
    EncodeDigitsDefault1e6-8   17.7MB/s ± 3%  19.2MB/s ± 2%  +8.31%  (p=0.000 n=10+10)
    EncodeDigitsCompress1e4-8  27.6MB/s ± 2%  29.1MB/s ± 1%  +5.47%   (p=0.000 n=10+9)
    EncodeDigitsCompress1e5-8  19.0MB/s ± 3%  20.1MB/s ± 2%  +5.78%  (p=0.000 n=10+10)
    EncodeDigitsCompress1e6-8  17.9MB/s ± 4%  19.2MB/s ± 1%  +7.50%  (p=0.000 n=10+10)
    EncodeTwainHuffman1e4-8     141MB/s ± 3%   154MB/s ± 1%  +9.46%   (p=0.000 n=10+9)
    EncodeTwainHuffman1e5-8     180MB/s ± 2%   191MB/s ± 2%  +6.19%  (p=0.000 n=10+10)
    EncodeTwainHuffman1e6-8     181MB/s ± 3%   192MB/s ± 2%  +6.02%  (p=0.000 n=10+10)
    EncodeTwainSpeed1e4-8      34.0MB/s ± 3%  35.3MB/s ± 1%  +3.84%  (p=0.000 n=10+10)
    EncodeTwainSpeed1e5-8      38.7MB/s ± 2%  40.3MB/s ± 1%  +4.30%   (p=0.000 n=10+9)
    EncodeTwainSpeed1e6-8      39.1MB/s ± 1%  41.2MB/s ± 1%  +5.57%   (p=0.000 n=9+10)
    EncodeTwainDefault1e4-8    23.9MB/s ± 2%  25.3MB/s ± 1%  +5.91%   (p=0.000 n=10+9)
    EncodeTwainDefault1e5-8    16.0MB/s ± 4%  17.4MB/s ± 1%  +8.47%   (p=0.000 n=10+9)
    EncodeTwainDefault1e6-8    15.1MB/s ± 2%  16.3MB/s ± 1%  +7.76%  (p=0.000 n=10+10)
    EncodeTwainCompress1e4-8   23.5MB/s ± 1%  24.7MB/s ± 1%  +5.24%   (p=0.000 n=9+10)
    EncodeTwainCompress1e5-8   14.7MB/s ± 1%  15.8MB/s ± 1%  +7.50%   (p=0.000 n=9+10)
    EncodeTwainCompress1e6-8   13.4MB/s ± 3%  14.6MB/s ± 1%  +8.57%   (p=0.000 n=10+9)
    
    Change-Id: I5c7e84c2f9ea4d38a2115995705eebb93387e22f
    Reviewed-on: https://go-review.googlesource.com/21759
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 012557b3769f9286b9488fbfd4bddfeee66b6a55
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Apr 10 08:48:55 2016 +0200

    all: replace magic 0x80 with named constant utf8.RuneSelf
    
    Change-Id: Id1c2e8e9d60588de866e8b6ca59cc83dd28f848f
    Reviewed-on: https://go-review.googlesource.com/21756
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 527ffebb2c9fe432a0ef0aa0c2449d83cd8a23cb
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Sun Apr 10 12:49:40 2016 +0200

    internal/trace: fix a typo in error message
    
    Change-Id: Id79eaa6d49dae80c334c7243b0a5bbcdcb9397d3
    Reviewed-on: https://go-review.googlesource.com/21758
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit de7ee57c7ead59899d5b412a839c995de0e813b5
Author: Marvin Stenger <marvin.stenger94@gmail.com>
Date:   Fri Apr 8 18:19:10 2016 +0200

    cmd: remove bio.Bread
    
    Replace calls to bio.Bread with calls to io.ReadFull.
    
    Change-Id: I2ee8739d01e04a4da9c20b6ce7d1d5b89914b8ad
    Reviewed-on: https://go-review.googlesource.com/21750
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit e4f1d9cf2e948eb0f0bb91d7c253ab61dfff3a59
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Mar 27 17:29:53 2016 -0700

    runtime: make execution error panic values implement the Error interface
    
    Make execution panics implement Error as
    mandated by https://golang.org/ref/spec#Run_time_panics,
    instead of panics with strings.
    
    Fixes #14965
    
    Change-Id: I7827f898b9b9c08af541db922cc24fa0800ff18a
    Reviewed-on: https://go-review.googlesource.com/21214
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 824d8c10fe5e1026c15cbece41ee372b1fd333f3
Author: Wisdom Omuya <deafgoat@gmail.com>
Date:   Sat Apr 9 19:23:01 2016 -0400

    cmd/go: fix typo in findInternal documentation
    
    Fixes #15217
    
    Change-Id: Ib8f7af714197fd209e743f61f28a5b07c04a7f5c
    Reviewed-on: https://go-review.googlesource.com/21793
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3598d4b8387a9e1c9afd522e0d18201f855f613b
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sat Apr 9 00:34:18 2016 -0700

    net/http/httputil: DumpRequest dumps Content-Length if set in header
    
    Fixes #7215
    
    Change-Id: I108171ef18cac66d0dc11ce3553c26fc49529807
    Reviewed-on: https://go-review.googlesource.com/21790
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit c31fdd4ee9fccd24a274cebd82dcc7123ad43d0e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 9 22:54:26 2016 +0000

    cmd/go: fix typo in comment
    
    Thanks to deafgoat.
    
    Fixes #15215
    
    Change-Id: I9fababc7ecd201ce86020a438e4faee95e7623a8
    Reviewed-on: https://go-review.googlesource.com/21792
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0435e88a119fd057aa7209591ba3dff122c9f24c
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Mar 18 10:56:23 2016 +0100

    runtime: revert "do not call timeBeginPeriod on windows"
    
    This reverts commit ab4c9298b8185a056ff1152f2c7bd9b38d3d06f3.
    
    Sysmon critically depends on system timer resolution for retaking
    of Ps blocked in system calls. See #14790 for an example
    of a program where execution time goes from 2ms to 30ms if
    timeBeginPeriod(1) is not used.
    
    We can remove timeBeginPeriod(1) when we support UMS (#7876).
    
    Update #14790
    
    Change-Id: I362b56154359b2c52d47f9f2468fe012b481cf6d
    Reviewed-on: https://go-review.googlesource.com/20834
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 9d4efdfd12f47f1ed8ce482ebeeb4d4e30a2dbc6
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Apr 8 20:44:56 2016 +1000

    cmd/internal/bio: move Bgetc to link/internal/ld
    
    Also, remove bio.Brdline.
    
    Change-Id: I3e0caed27a373fd71737cf6892de5e8fc208b776
    Reviewed-on: https://go-review.googlesource.com/21783
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>

commit bce9747ed00c53e7ddeea102e87aede1b3ec9bd3
Author: Dave Cheney <dave@cheney.net>
Date:   Sat Apr 9 15:04:45 2016 +1000

    cmd: remove unused code
    
    Generated with honnef.co/go/unused
    
    There is a large amount of unused code in cmd/internal/obj/s390x but
    that can wait til the s390x port is merged.
    
    There is some unused code in
    cmd/internal/unvendor/golang.org/x/arch/arm/armasm but that should be
    addressed upstream and a new revision imported.
    
    Change-Id: I252c0f9ea8c5bb1a0b530a374ef13a0a20ea56aa
    Reviewed-on: https://go-review.googlesource.com/21782
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>

commit 93368be61ebaf8069d0d70034097de580441c412
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Apr 8 20:37:54 2016 +1000

    cmd/internal/bio: embed bufio.{Reader,Writer} in bio.{Reader,Writer}
    
    Change-Id: Ie95b0b0d4f724f4769cf2d4f8063cb5019fa9bc9
    Reviewed-on: https://go-review.googlesource.com/21781
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca397bb68e4b548843d2886e374f96ec3bb0f9c0
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Apr 8 19:30:41 2016 +1000

    cmd: remove bio.BufReader and bio.BufWriter
    
    bio.BufReader was never used.
    
    bio.BufWriter was used to wrap an existing io.Writer, but the
    bio.Writer returned would not be seekable, so replace all occurences
    with bufio.Reader instead.
    
    Change-Id: I9c6779e35c63178aa4e104c17bb5bb8b52de0359
    Reviewed-on: https://go-review.googlesource.com/21722
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6fee4aa5c76612d133d2b01441e608cfa696bae9
Author: Dave Cheney <dave@cheney.net>
Date:   Sat Apr 9 12:54:45 2016 +1000

    cmd/link/internal: make ld.Bso a *bio.Writer
    
    This is a pre requesite of CL 21722 and removes a lot of unidiomatic
    boilerplate in the linker.
    
    Change-Id: If7491b88212b2be7b0c8c588e9c196839131f8ad
    Reviewed-on: https://go-review.googlesource.com/21780
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 092ef8a2ca60e1a7573442757b02ec1efc456c2c
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Apr 8 14:27:35 2016 +1200

    cmd/cgo: fix cgo with gccgo
    
    Change-Id: I1780899255e22c16d7f8e9947609a1c284d7c42e
    Reviewed-on: https://go-review.googlesource.com/21690
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c3b3e7b4ef9dff1fc0cc504f81465ded5663b4e4
Author: David Chase <drchase@google.com>
Date:   Fri Apr 8 13:33:43 2016 -0400

    cmd/compile: insert instrumentation more carefully in racewalk
    
    Be more careful about inserting instrumentation in racewalk.
    If the node being instrumented is an OAS, and it has a non-
    empty Ninit, then append instrumentation to the Ninit list
    rather than letting it be inserted before the OAS (and the
    compilation of its init list).  This deals with the case that
    the Ninit list defines a variable used in the RHS of the OAS.
    
    Fixes #15091.
    
    Change-Id: Iac91696d9104d07f0bf1bd3499bbf56b2e1ef073
    Reviewed-on: https://go-review.googlesource.com/21771
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 0fb7b4cccd02df10f239ed77d6d85566b6388b83
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Apr 8 15:14:37 2016 +0200

    runtime: emit file:line info into traces
    
    This makes traces self-contained and simplifies trace workflow
    in modern cloud environments where it is simpler to reach
    a service via HTTP than to obtain the binary.
    
    Change-Id: I6ff3ca694dc698270f1e29da37d5efaf4e843a0d
    Reviewed-on: https://go-review.googlesource.com/21732
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>

commit 9ada88aec271a2f08c998e9669331145803e7d5a
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Apr 8 13:02:49 2016 -0400

    cmd/cgo: increase s390x int type size to 8 bytes
    
    The size of the int type in Go on s390x is 8 bytes, not 4.
    
    Change-Id: I1a71ce8c9925f3499abb61c1aa4f6fa2d2ec0d7e
    Reviewed-on: https://go-review.googlesource.com/21760
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 59af53d681845a8b0be2a728ca1b59aee5ad9ea6
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Thu Apr 7 23:22:30 2016 -0700

    bytes: add ContainsRune
    
    Make package bytes consistent with strings
    by adding missing function ContainsRune.
    
    Fixes #15189
    
    Change-Id: Ie09080b389e55bbe070c57aa3bd134053a805423
    Reviewed-on: https://go-review.googlesource.com/21710
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 6c5352f181846b73d532c039df3017befe657d6a
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Apr 8 11:40:51 2016 -0400

    syscall: add assembly for Linux on s390x
    
    Change-Id: I42ade65a91f3effc03dd663ee449410baa9f8ca8
    Reviewed-on: https://go-review.googlesource.com/21740
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 59d186832b94349d683431e01e084d6ce460f476
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Apr 8 17:50:03 2016 +0000

    context: disable more flaky tests on openbsd
    
    Updates #15158
    
    Change-Id: Icb3788152a7a5a9b0d56ea38da46d770ffdce413
    Reviewed-on: https://go-review.googlesource.com/21763
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit dae98d5c3b02b39f53168a9403d24e1ddd4a16d4
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 19:35:59 2016 -0400

    test: skip nilptr3 test on s390x
    
    Fails for the same reason as ppc64 and mips64 (incomplete
    optimization).
    
    Change-Id: Ieb4d997fc27d4f2b756e63dd7f588abe10c0213a
    Reviewed-on: https://go-review.googlesource.com/20963
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 78715cebcfcca3aaaaba4dd41ef6b82a46d7b93d
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Apr 8 11:55:05 2016 -0400

    cmd/link: add s390x to link tool main function
    
    Change-Id: I83bc2b4a00216b069f133113e4ae9ad76c98a708
    Reviewed-on: https://go-review.googlesource.com/21741
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 01360a64c5895a9ec8b8c34140415fe34c3de201
Author: Rob Pike <r@golang.org>
Date:   Wed Apr 6 20:19:47 2016 -0700

    io: change the name of ReadAtSizer to SizedReaderAt
    
    This is a proposal. The old name is pretty poor. The new one describes
    it better and may be easier to remember. It does not start with Read,
    though I think that inconsistency is worthwhile.
    
    Reworded the comment a bit for clarity.
    
    Change-Id: Icb4f9c663cc68958e0363d7ff78a0b29cc521f98
    Reviewed-on: https://go-review.googlesource.com/21629
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8f2edf11998a30b497586ac0e9f75036a318280a
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Apr 8 19:14:03 2016 +1000

    cmd: replace bio.Buf with bio.Reader and bio.Writer
    
    Replace the bidirectional bio.Buf type with a pair of unidirectional
    buffered seekable Reader and Writers.
    
    Change-Id: I86664a06f93c94595dc67c2cbd21356feb6680ef
    Reviewed-on: https://go-review.googlesource.com/21720
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d22357ce9dc650a69e78b37a6b25be1ee0b8b26c
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Apr 7 15:31:49 2016 -0400

    cmd/compile: cleanup -dynlink/-shared support check
    
    Moves the list of architectures that support shared libraries into
    a function. Also adds s390x to that list.
    
    Change-Id: I99c8a9f6cd4816ce3d53abaabaf8d002e25e6b28
    Reviewed-on: https://go-review.googlesource.com/21661
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>

commit 49e07f2b7e25a1f7a050f73fbb7807185e09e46b
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Apr 8 20:09:10 2016 +1000

    cmd/compile/internal/gc: unexport Export
    
    Export does not need to be exported.
    
    Change-Id: I252f0c024732f1d056817cab13e8e3c589b54d13
    Reviewed-on: https://go-review.googlesource.com/21721
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4dae828f77a37ed87401f7877998b241f0d2c33e
Author: Andrew Gerrand <adg@golang.org>
Date:   Fri Apr 8 15:09:45 2016 +1000

    cmd/go: fix failing tests since vet was moved from x/tools
    
    Change-Id: I3276a118ced78f3efd8f1bc5fb8b8fa2fde52496
    Reviewed-on: https://go-review.googlesource.com/21704
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 853f1a1a63b759686421196d419ddaa626a44bf5
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Thu Apr 7 19:59:59 2016 -0700

    net/http: fixed trivial go vet warnings
    
    Updates #15177
    
    Change-Id: I748f025461f313b5b426821ead695f90d3011a6b
    Reviewed-on: https://go-review.googlesource.com/21677
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 68ac1f774624faf99e7f6ec6592acb50f23b7874
Author: Keith Randall <khr@golang.org>
Date:   Thu Apr 7 10:21:35 2016 -0700

    cmd/compile: Fix constant-folding of unsigned shifts
    
    Make sure the results of unsigned constant-folded
    shifts are sign-extended into the AuxInt field.
    
    Fixes #15175
    
    Change-Id: I3490d1bc3d9b2e1578ed30964645508577894f58
    Reviewed-on: https://go-review.googlesource.com/21586
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit dfded57819dd9111afffc25360cd3e147859d354
Author: Cheng-Lung Sung <clsung@gmail.com>
Date:   Wed Apr 6 23:05:20 2016 +0800

    cmd/go: revise importPath when ImportPath is 'command-line-arguments'
    
    Fixes #14613
    
    Change-Id: I40d9696db3879549e78373ef17f6c92bd4b3470b
    Reviewed-on: https://go-review.googlesource.com/21596
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e88f89028a55acf9c8b76b7f6ca284c3f9eb4cbd
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Thu Mar 31 16:05:23 2016 -0700

    bytes, string: add Reset method to Reader
    
    Currently, there is no easy allocation-free way to turn a
    []byte or string into an io.Reader. Thus, we add a Reset method
    to bytes.Reader and strings.Reader to allow the reuse of these
    Readers with another []byte or string.
    
    This is consistent with the fact that many standard library io.Readers
    already support a Reset method of some type:
            bufio.Reader
            flate.Reader
            gzip.Reader
            zlib.Reader
            debug/dwarf.LineReader
            bytes.Buffer
            crypto/rc4.Cipher
    
    Fixes #15033
    
    Change-Id: I456fd1af77af6ef0b4ac6228b058ac1458ff3d19
    Reviewed-on: https://go-review.googlesource.com/21386
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e6f36f0cd5b45b9ce7809a34c45aeb66a5ca64a4
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 19:09:39 2016 -0400

    runtime: add s390x support (new files and lfstack_64bit.go modifications)
    
    Change-Id: I51c0a332e3cbdab348564e5dcd27583e75e4b881
    Reviewed-on: https://go-review.googlesource.com/20946
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9658b7ef83ae9c34f4a52680e7102d958577d5bb
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Apr 7 14:27:15 2016 -0400

    cmd/link: hide go.dwarf symbols
    
    Fixes #15179
    
    Change-Id: I0f70b7ae1682eafaece7f22d8e76f0aa806f3ec9
    Reviewed-on: https://go-review.googlesource.com/21589
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e6181eb9e1dc4ab9e297a102ed192997582ac46c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Apr 7 14:00:00 2016 -0400

    cmd/link: disable DWARF when not generating symtab
    
    Fixes #15166
    
    Change-Id: I30284e3c0fb2c80b26a2572e2fb249b8018e85f9
    Reviewed-on: https://go-review.googlesource.com/21587
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 39f1ecd157941420693239fa269643ce8a34c267
Author: Burcu Dogan <jbd@google.com>
Date:   Thu Apr 7 10:50:47 2016 -0700

    C: fix jbd's identity
    
    Change-Id: Ib4353710a742b1067723c7c6186e8639559668a3
    Reviewed-on: https://go-review.googlesource.com/21655
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e2c09749af8c50fc2c0b515f2adc990cb0cb3cf6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Apr 7 09:00:32 2016 -0700

    context: mark more tests as flaky on OpenBSD
    
    Updates #15158
    
    Change-Id: I53e9e68d36efbf52736822e6caa047cfff501283
    Reviewed-on: https://go-review.googlesource.com/21653
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 187afdebef7953295189d4531e7dccdc0cb64500
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Mon Apr 4 19:28:15 2016 +0300

    math/big: re-use memory in Int.GCD
    
    This improves TLS handshake performance.
    
    benchmark                                 old ns/op     new ns/op     delta
    BenchmarkGCD10x10/WithoutXY-4             965           968           +0.31%
    BenchmarkGCD10x10/WithXY-4                1813          1391          -23.28%
    BenchmarkGCD10x100/WithoutXY-4            1093          1075          -1.65%
    BenchmarkGCD10x100/WithXY-4               2348          1676          -28.62%
    BenchmarkGCD10x1000/WithoutXY-4           1569          1565          -0.25%
    BenchmarkGCD10x1000/WithXY-4              4262          3242          -23.93%
    BenchmarkGCD10x10000/WithoutXY-4          6069          6066          -0.05%
    BenchmarkGCD10x10000/WithXY-4             12123         11331         -6.53%
    BenchmarkGCD10x100000/WithoutXY-4         52664         52610         -0.10%
    BenchmarkGCD10x100000/WithXY-4            97494         95649         -1.89%
    BenchmarkGCD100x100/WithoutXY-4           5244          5228          -0.31%
    BenchmarkGCD100x100/WithXY-4              22572         18630         -17.46%
    BenchmarkGCD100x1000/WithoutXY-4          6143          6233          +1.47%
    BenchmarkGCD100x1000/WithXY-4             24652         19357         -21.48%
    BenchmarkGCD100x10000/WithoutXY-4         15725         15804         +0.50%
    BenchmarkGCD100x10000/WithXY-4            60552         55973         -7.56%
    BenchmarkGCD100x100000/WithoutXY-4        107008        107853        +0.79%
    BenchmarkGCD100x100000/WithXY-4           349597        340994        -2.46%
    BenchmarkGCD1000x1000/WithoutXY-4         63785         64434         +1.02%
    BenchmarkGCD1000x1000/WithXY-4            373186        334035        -10.49%
    BenchmarkGCD1000x10000/WithoutXY-4        78038         78241         +0.26%
    BenchmarkGCD1000x10000/WithXY-4           543692        507034        -6.74%
    BenchmarkGCD1000x100000/WithoutXY-4       205607        207727        +1.03%
    BenchmarkGCD1000x100000/WithXY-4          2488113       2415323       -2.93%
    BenchmarkGCD10000x10000/WithoutXY-4       1731340       1714992       -0.94%
    BenchmarkGCD10000x10000/WithXY-4          10601046      7111329       -32.92%
    BenchmarkGCD10000x100000/WithoutXY-4      2239155       2212173       -1.21%
    BenchmarkGCD10000x100000/WithXY-4         30097040      26538887      -11.82%
    BenchmarkGCD100000x100000/WithoutXY-4     119845326     119863916     +0.02%
    BenchmarkGCD100000x100000/WithXY-4        768006543     426795966     -44.43%
    
    benchmark                                 old allocs     new allocs     delta
    BenchmarkGCD10x10/WithoutXY-4             5              5              +0.00%
    BenchmarkGCD10x10/WithXY-4                17             9              -47.06%
    BenchmarkGCD10x100/WithoutXY-4            6              6              +0.00%
    BenchmarkGCD10x100/WithXY-4               21             9              -57.14%
    BenchmarkGCD10x1000/WithoutXY-4           6              6              +0.00%
    BenchmarkGCD10x1000/WithXY-4              30             12             -60.00%
    BenchmarkGCD10x10000/WithoutXY-4          6              6              +0.00%
    BenchmarkGCD10x10000/WithXY-4             26             12             -53.85%
    BenchmarkGCD10x100000/WithoutXY-4         6              6              +0.00%
    BenchmarkGCD10x100000/WithXY-4            28             12             -57.14%
    BenchmarkGCD100x100/WithoutXY-4           5              5              +0.00%
    BenchmarkGCD100x100/WithXY-4              183            61             -66.67%
    BenchmarkGCD100x1000/WithoutXY-4          8              8              +0.00%
    BenchmarkGCD100x1000/WithXY-4             170            47             -72.35%
    BenchmarkGCD100x10000/WithoutXY-4         8              8              +0.00%
    BenchmarkGCD100x10000/WithXY-4            200            67             -66.50%
    BenchmarkGCD100x100000/WithoutXY-4        8              8              +0.00%
    BenchmarkGCD100x100000/WithXY-4           188            65             -65.43%
    BenchmarkGCD1000x1000/WithoutXY-4         5              5              +0.00%
    BenchmarkGCD1000x1000/WithXY-4            2435           1193           -51.01%
    BenchmarkGCD1000x10000/WithoutXY-4        8              8              +0.00%
    BenchmarkGCD1000x10000/WithXY-4           2211           1076           -51.33%
    BenchmarkGCD1000x100000/WithoutXY-4       8              8              +0.00%
    BenchmarkGCD1000x100000/WithXY-4          2271           1108           -51.21%
    BenchmarkGCD10000x10000/WithoutXY-4       5              5              +0.00%
    BenchmarkGCD10000x10000/WithXY-4          23183          11605          -49.94%
    BenchmarkGCD10000x100000/WithoutXY-4      8              8              +0.00%
    BenchmarkGCD10000x100000/WithXY-4         23421          11717          -49.97%
    BenchmarkGCD100000x100000/WithoutXY-4     5              5              +0.00%
    BenchmarkGCD100000x100000/WithXY-4        232976         116815         -49.86%
    
    benchmark                                 old bytes      new bytes     delta
    BenchmarkGCD10x10/WithoutXY-4             208            208           +0.00%
    BenchmarkGCD10x10/WithXY-4                736            432           -41.30%
    BenchmarkGCD10x100/WithoutXY-4            256            256           +0.00%
    BenchmarkGCD10x100/WithXY-4               896            432           -51.79%
    BenchmarkGCD10x1000/WithoutXY-4           368            368           +0.00%
    BenchmarkGCD10x1000/WithXY-4              1856           1152          -37.93%
    BenchmarkGCD10x10000/WithoutXY-4          1616           1616          +0.00%
    BenchmarkGCD10x10000/WithXY-4             7920           7376          -6.87%
    BenchmarkGCD10x100000/WithoutXY-4         13776          13776         +0.00%
    BenchmarkGCD10x100000/WithXY-4            68800          68176         -0.91%
    BenchmarkGCD100x100/WithoutXY-4           208            208           +0.00%
    BenchmarkGCD100x100/WithXY-4              6960           2112          -69.66%
    BenchmarkGCD100x1000/WithoutXY-4          544            560           +2.94%
    BenchmarkGCD100x1000/WithXY-4             7280           2400          -67.03%
    BenchmarkGCD100x10000/WithoutXY-4         2896           2912          +0.55%
    BenchmarkGCD100x10000/WithXY-4            15280          10002         -34.54%
    BenchmarkGCD100x100000/WithoutXY-4        27344          27365         +0.08%
    BenchmarkGCD100x100000/WithXY-4           88288          83427         -5.51%
    BenchmarkGCD1000x1000/WithoutXY-4         544            544           +0.00%
    BenchmarkGCD1000x1000/WithXY-4            178288         40043         -77.54%
    BenchmarkGCD1000x10000/WithoutXY-4        3344           3136          -6.22%
    BenchmarkGCD1000x10000/WithXY-4           188720         54432         -71.16%
    BenchmarkGCD1000x100000/WithoutXY-4       27792          27592         -0.72%
    BenchmarkGCD1000x100000/WithXY-4          373872         239447        -35.95%
    BenchmarkGCD10000x10000/WithoutXY-4       4288           4288          +0.00%
    BenchmarkGCD10000x10000/WithXY-4          11935584       481875        -95.96%
    BenchmarkGCD10000x100000/WithoutXY-4      31296          28834         -7.87%
    BenchmarkGCD10000x100000/WithXY-4         13237088       1662620       -87.44%
    BenchmarkGCD100000x100000/WithoutXY-4     40768          40768         +0.00%
    BenchmarkGCD100000x100000/WithXY-4        1165518864     14256010      -98.78%
    
    Change-Id: I652b3244bd074a03f3bc9a87c282330f9e5f1507
    Reviewed-on: https://go-review.googlesource.com/21506
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1e7c61d8c3fc0916b73cb7411afa45e99b50aac4
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 21:49:52 2016 -0400

    math/big: add s390x function implementations
    
    Change-Id: I2aadc885d6330460e494c687757f07c5e006f3b0
    Reviewed-on: https://go-review.googlesource.com/20937
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7da42d75975044df37aa3aa2499623e2084a12df
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 21:34:48 2016 -0400

    sync/atomic: add s390x implementations of atomic functions
    
    Load and store instructions are atomic on s390x.
    
    Change-Id: I33c641a75954f4fbd301b11a467cb57872038880
    Reviewed-on: https://go-review.googlesource.com/20947
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 95a895df0c64b0cd1283c4cf7794d491427d765c
Author: Alan Donovan <adonovan@google.com>
Date:   Thu Apr 7 10:07:10 2016 -0400

    go/types: make Identical(nil, T) == Identical(T, nil)
    
    Fixes #15173
    
    Change-Id: I353756f7bc36db0d2b24d40c80771481b7b18f6b
    Reviewed-on: https://go-review.googlesource.com/21585
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 9cc9e95b288648d796d92f0b92cb713b35f20062
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Apr 7 14:05:06 2016 +0000

    Revert "runtime: merge lfstack{Pack,Unpack} into one file"
    
    This broke solaris, which apparently does use the upper 17 bits of the address space.
    
    This reverts commit 3b02c5b1b66df9cdb23d5a3243bb37b2c312ea1b.
    
    Change-Id: Iedfe54abd0384960845468205f20191a97751c0b
    Reviewed-on: https://go-review.googlesource.com/21652
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 8448d3aace7f26bd6eca14e8b89c5a981c2ab9d3
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Tue Apr 5 23:32:49 2016 +0200

    cmd/compile: fold CMPconst and SHR
    
    Fold the comparison when the SHR result is small.
    
    Useful for:
    - murmur mix like hashing where higher bits are desirable, i.e. hash = uint32(i * C) >> 18
    - integer log2 via DeBruijn sequence: http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogDeBruijn
    
    Change-Id: If70ae18cb86f4cc83ab6213f88ced03cc4986156
    Reviewed-on: https://go-review.googlesource.com/21514
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 121c434f7add815c3147b01a097a8998018bcc6b
Author: Richard Miller <miller.research@gmail.com>
Date:   Wed Apr 6 18:58:22 2016 +0100

    runtime/pprof: make TestBlockProfile less timing dependent
    
    The test for profiling of channel blocking is timing dependent,
    and in particular the blockSelectRecvAsync case can fail on a
    slow builder (plan9_arm) when many tests are run in parallel.
    The child goroutine sleeps for a fixed period so the parent
    can be observed to block in a select call reading from the
    child; but if the OS process running the parent goroutine is
    delayed long enough, the child may wake again before the
    parent has reached the blocking point.  By repeating the test
    three times, the likelihood of a blocking event is increased.
    
    Fixes #15096
    
    Change-Id: I2ddb9576a83408d06b51ded682bf8e71e53ce59e
    Reviewed-on: https://go-review.googlesource.com/21604
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3b02c5b1b66df9cdb23d5a3243bb37b2c312ea1b
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Apr 7 07:29:22 2016 +1000

    runtime: merge lfstack{Pack,Unpack} into one file
    
    Merge the remaining lfstack{Pack,Unpack} implemetations into one file.
    
    unsafe.Sizeof(uintptr(0)) == 4 is a constant comparison so this branch
    folds away at compile time.
    
    Dmitry confirmed that the upper 17 bits of an address will be zero for a
    user mode pointer, so there is no need to sign extend on amd64 during
    unpack, so we can reuse the same implementation as all othe 64 bit
    archs.
    
    Change-Id: I99f589416d8b181ccde5364c9c2e78e4a5efc7f1
    Reviewed-on: https://go-review.googlesource.com/21597
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 438ce713a1c8e4d24aea547b6fcf907b5dbf0bec
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Apr 6 23:34:32 2016 -0700

    cmd/link/internal/amd64: remove empty source file
    
    Change-Id: I2da012ed996c669db513a462f014c6f3ffa396ee
    Reviewed-on: https://go-review.googlesource.com/21646
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 4b7e36cdfe8e0c3579a2503a81474fe43db4db69
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Apr 6 21:45:29 2016 -0700

    cmd: extract obj's Biobuf code into new bio package
    
    API could still be made more Go-ey.
    
    Updates #15165.
    
    Change-Id: I514ffceffa43c293ae5d7e5f1e9193fda0098865
    Reviewed-on: https://go-review.googlesource.com/21644
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b17b95301a549d168d96e38310d06216f595e53b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Apr 6 20:06:41 2016 -0700

    cmd/internal/sys: change ArchFamily constants to iotas
    
    RIP architecture characters.
    
    Change-Id: I36f53afdc311b14b9459ff3821bd6df54a057ded
    Reviewed-on: https://go-review.googlesource.com/21628
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 22ef687da815c4d651cef3c1b7d44f41100b6715
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Apr 6 20:06:12 2016 -0700

    cmd/link: remove dependency on sys.ArchFamily values
    
    Change-Id: I858054b72847f4f27a1ebbdaff82820a28c03743
    Reviewed-on: https://go-review.googlesource.com/21627
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d481ffc1afeae8852caa3452a0e23b1cd90d1e10
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Apr 6 18:54:17 2016 -0700

    cmd/compile, cmd/link: eliminate uses of ArchFamily in error messages
    
    Two of these error messages are already dead code: cmd/compile.main
    and cmd/link.main already switch on $GOARCH, ensuring it must be a
    prefix of the sys.Arch.Family.
    
    The error message about uncompiled Go source files can be just be
    simplified: anyone who's manually constructing Go object file archives
    probably knows what tool to use to compile Go source files.
    
    Change-Id: Ia4a67c0a1d1158379c127c91e909226d3367f3c2
    Reviewed-on: https://go-review.googlesource.com/21626
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c6e11fe03765e3fe1fc68bd794625ca0ecd833be
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Apr 6 12:01:40 2016 -0700

    cmd: add new common architecture representation
    
    Information about CPU architectures (e.g., name, family, byte
    ordering, pointer and register size) is currently redundantly
    scattered around the source tree. Instead consolidate the basic
    information into a single new package cmd/internal/sys.
    
    Also, introduce new sys.I386, sys.AMD64, etc. names for the constants
    '8', '6', etc. and replace most uses of the latter. The notable
    exceptions are a couple of error messages that still refer to the old
    char-based toolchain names and function reltype in cmd/link.
    
    Passes toolstash/buildall.
    
    Change-Id: I8a6f0cbd49577ec1672a98addebc45f767e36461
    Reviewed-on: https://go-review.googlesource.com/21623
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 31cf1c17792d4da9dae2504c703633a0db8072c7
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Thu Apr 7 11:47:32 2016 +1200

    runtime: clamp OS-reported number of processors to _MaxGomaxprocs
    
    So that all Go processes do not die on startup on a system with >256 CPUs.
    
    I tested this by hacking osinit to set ncpu to 1000.
    
    Updates #15131
    
    Change-Id: I52e061a0de97be41d684dd8b748fa9087d6f1aef
    Reviewed-on: https://go-review.googlesource.com/21599
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a037c73ccfc7c35a389e95ffa7996c8dd38e0cde
Author: Ryan Brown <ribrdb@google.com>
Date:   Mon Mar 14 09:23:04 2016 -0700

    cmd/link: generate DWARF info using symbols
    
    This updates dwarf.go to generate debug information as symbols
    instead of directly writing to the output file. This should make
    it easier to move generation of some of the debug info into the compiler.
    
    Change-Id: Id2358988bfb689865ab4d68f82716f0676336df4
    Reviewed-on: https://go-review.googlesource.com/20679
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0382a30dd6cd78efd9fb27bfed50dd1d6d7f722b
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 21:44:31 2016 -0400

    math: add functions and stubs for s390x
    
    Includes assembly implementations of Sqrt and Dim.
    
    Change-Id: I57472e8d31e2ee74bcebf9f8e818f765eb9b8abf
    Reviewed-on: https://go-review.googlesource.com/20936
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 81aacb80d55eddcb95cbe2c87392cc922e026e45
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 6 15:27:30 2016 -0700

    cmd/compile, go/importer: minor cleanups
    
    Change-Id: I4ffb79d8cb08b0b44f59757fb7f0ec3ed1e4479f
    Reviewed-on: https://go-review.googlesource.com/21624
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 007b12977aa8f3373b358361fe21802d5a8408b4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Apr 6 14:12:48 2016 -0700

    cmd/compile: move Type.Maplineno to separate data structure
    
    Relatively few types are ever used as map keys,
    so tracking this separately is a net win.
    
    Passes toolstash -cmp.
    
    name       old alloc/op     new alloc/op     delta
    Template       55.9MB ± 0%      55.5MB ± 0%  -0.71%        (p=0.000 n=10+10)
    Unicode        37.8MB ± 0%      37.7MB ± 0%  -0.27%        (p=0.000 n=10+10)
    GoTypes         180MB ± 0%       179MB ± 0%  -0.52%         (p=0.000 n=7+10)
    Compiler        806MB ± 0%       803MB ± 0%  -0.41%        (p=0.000 n=10+10)
    
    CPU and number of allocs are unchanged.
    
    Change-Id: I6d60d74a4866995a231dfed3dd5792d75d904292
    Reviewed-on: https://go-review.googlesource.com/21622
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d636d7907c46b728b07b58669ec1fa1158105579
Author: Rob Pike <r@golang.org>
Date:   Tue Apr 5 15:43:07 2016 -0700

    bytes: add ContainsAny
    
    This function is present in the strings package but missing from bytes,
    and we would like to keep the two packages consistent.
    
    Add it to bytes, and copy the test over as well.
    
    Fixes #15140
    
    Change-Id: I5dbd28da83a9fe741885794ed15f2af2f826cb3c
    Reviewed-on: https://go-review.googlesource.com/21562
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0c81248bf46f611b56e3ab38b4d83e449b3c8636
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Apr 6 18:43:23 2016 +1000

    runtime: remove unused return value from lfstackUnpack
    
    None of the two places that call lfstackUnpack use the second argument.
    This simplifies a followup CL that merges the lfstack{Pack,Unpack}
    implementations.
    
    Change-Id: I3c93f6259da99e113d94f8c8027584da79c1ac2c
    Reviewed-on: https://go-review.googlesource.com/21595
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 04945edd40fff4d66321a4f98c1bb070b6356008
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Apr 4 19:23:41 2016 +0200

    cmd/compile: replaces ANDQ with MOV?ZX
    
    Where possible replace ANDQ with MOV?ZX.
    Takes care that we don't regress wrt bounds checking,
    for example [1000]int{}[i&255].
    
    According to "Intel 64 and IA-32 Architectures Optimization Reference
    Manual" Section: "3.5.1.13 Zero-Latency MOV Instructions"
    MOV?ZX instructions have zero latency on newer processors.
    
    Updates #15105
    
    Change-Id: I63539fdbc5812d5563aa1ebc49eca035bd307997
    Reviewed-on: https://go-review.googlesource.com/21508
    Reviewed-by: Айнар Гарипов <gugl.zadolbal@gmail.com>
    Reviewed-by: David Chase <drchase@google.com>

commit cdc0ebbebe64d8fa601914945112db306c85c426
Author: Håvard Haugen <havard.haugen@gmail.com>
Date:   Wed Feb 3 23:41:55 2016 +0100

    encoding/json: respect json.Marshaler when encoding byte kind slices
    
    Fixes #13783.
    
    Change-Id: I0122c1f0cf4075acabf5f58241bded1835699dc1
    Reviewed-on: https://go-review.googlesource.com/19725
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2cefd12a1bf7ee1d1aad03e17c4680d4b611d6da
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 6 19:02:27 2016 +0000

    net, runtime: skip flaky tests on OpenBSD
    
    Flaky tests are a distraction and cover up real problems.
    
    File bugs instead and mark them as flaky.
    
    This moves the net/http flaky test flagging mechanism to internal/testenv.
    
    Updates #15156
    Updates #15157
    Updates #15158
    
    Change-Id: I0e561cd2a09c0dec369cd4ed93bc5a2b40233dfe
    Reviewed-on: https://go-review.googlesource.com/21614
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit f38f43d029de16f21f9102226d5c24684fb0ea25
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Apr 1 20:11:30 2016 -0700

    cmd/compile: shrink gc.Type in half
    
    Many of Type's fields are etype-specific.
    This CL organizes them into their own auxiliary types,
    duplicating a few fields as necessary,
    and adds an Extra field to hold them.
    It also sorts the remaining fields for better struct packing.
    It also improves documentation for most fields.
    
    This reduces the size of Type at the cost of some extra allocations.
    There's no CPU impact; memory impact below.
    It also makes the natural structure of Type clearer.
    
    Passes toolstash -cmp on all architectures.
    
    Ideas for future work in this vein:
    
    (1) Width and Align probably only need to be
    stored for Struct and Array types.
    The refactoring to accomplish this would hopefully
    also eliminate TFUNCARGS and TCHANARGS entirely.
    
    (2) Maplineno is sparsely used and could probably better be
    stored in a separate map[*Type]int32, with mapqueue updated
    to store both a Node and a line number.
    
    (3) The Printed field may be removable once the old (non-binary)
    importer/exported has been removed.
    
    (4) StructType's fields field could be changed from *[]*Field to []*Field,
    which would remove a common allocation.
    
    (5) I believe that Type.Nod can be moved to ForwardType. Separate CL.
    
    name       old alloc/op     new alloc/op     delta
    Template       57.9MB ± 0%      55.9MB ± 0%  -3.43%        (p=0.000 n=50+50)
    Unicode        38.3MB ± 0%      37.8MB ± 0%  -1.39%        (p=0.000 n=50+50)
    GoTypes         185MB ± 0%       180MB ± 0%  -2.56%        (p=0.000 n=50+50)
    Compiler        824MB ± 0%       806MB ± 0%  -2.19%        (p=0.000 n=50+50)
    
    name       old allocs/op    new allocs/op    delta
    Template         486k ± 0%        497k ± 0%  +2.25%        (p=0.000 n=50+50)
    Unicode          377k ± 0%        379k ± 0%  +0.55%        (p=0.000 n=50+50)
    GoTypes         1.39M ± 0%       1.42M ± 0%  +1.63%        (p=0.000 n=50+50)
    Compiler        5.52M ± 0%       5.57M ± 0%  +0.84%        (p=0.000 n=47+50)
    
    Change-Id: I828488eeb74902b013d5ae4cf844de0b6c0dfc87
    Reviewed-on: https://go-review.googlesource.com/21611
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a25e368f44941c22406b2f88535ec9e812fd4dba
Author: Richard Miller <miller.research@gmail.com>
Date:   Wed Apr 6 18:42:14 2016 +0100

    test: make goprint.go wait for goroutine termination
    
    Test goprint.go sometimes failed on a slow builder (plan9_arm)
    because of timing dependency.  Instead of sleeping for a fixed
    time to allow the child goroutine to finish, wait explicitly for
    child termination by calling runtime.NumGoroutine until the
    returned value is 1.
    
    Fixes #15097
    
    Change-Id: Ib3ef5ec3c8277083c774542f48bcd4ff2f79efde
    Reviewed-on: https://go-review.googlesource.com/21603
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 5176a4b39b4595e5d9025e7aaf19146c29b7e349
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed Apr 6 15:01:50 2016 +0200

    testing: fix flakey test on plan9
    
    allow for more than 0.00s.
    
    Fixes #15149
    
    Change-Id: I1d428a9b3c9bb3d1db8682c53b86e44cecc1dde1
    Reviewed-on: https://go-review.googlesource.com/21602
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ff7ba773f43bf04c34ffb6ed67da464072e476f7
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Apr 6 10:49:12 2016 -0700

    cmd/gofmt: make gofmt -s simplify slices in presence of dot-imports
    
    A dot-import cannot possibly introduce a `len` function since that
    function would not be exported (it's lowercase). Furthermore, the
    existing code already (incorrectly) assumed that there was no other
    `len` function in another file of the package. Since this has been
    an ok assumption for years, let's leave it, but remove the dot-import
    restriction.
    
    Fixes #15153.
    
    Change-Id: I18fbb27acc5a5668833b4b4aead0cca540862b52
    Reviewed-on: https://go-review.googlesource.com/21613
    Reviewed-by: Alan Donovan <adonovan@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d7ddee78ddca805e6609149ff4320b1547698259
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Tue Apr 5 18:42:07 2016 +0300

    icmd/vet: improved checking for variadic Println-like functions
    
    - Automatically determine the first argument to check.
    - Skip checking matching non-variadic functions.
    - Skip checking matching functions accepting non-interface{}
      variadic arguments.
    - Removed fragile 'magic' code for special cases such as math.Log
      and error interface.
    
    Fixes #15067
    Fixes #15099
    
    Change-Id: Ib313557f18b12b36daa493f4b02c598b9503b55b
    Reviewed-on: https://go-review.googlesource.com/21513
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit ec3c5b9d178ee373a41e46f6074c8729cfd11084
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 5 23:01:10 2016 -0700

    cmd/link: eliminate a bunch of open coded elf64/rela switches
    
    We already have variables to track whether the target platform is
    64-bit vs 32-bit or RELA vs REL, so no point in repeating the list of
    obscure architecture characters everywhere.
    
    Passes toolstash/buildall.
    
    Change-Id: I6a07f74188ac592ef229a7c65848a9ba93013cdb
    Reviewed-on: https://go-review.googlesource.com/21569
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 63cea5ac2b8ed0cf257c7bfe7ed13bdd42373a0c
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed Apr 6 09:59:32 2016 +0200

    testing: fixed bug introduced by CL 21504
    
    This broke T.Run
    
    Change-Id: I12c8fe3612f3fa2caa83049c1c7003056daf2b0c
    Reviewed-on: https://go-review.googlesource.com/21600
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d70cb46f0fde56ec0147c5cc679714fd63cb10bb
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed Apr 6 16:11:22 2016 +1000

    runtime: use windows.NewLazySystemDLL in mksyscall_windows.go
    
    Change-Id: Ie4c4ff4167ee45ae93a8b764fb6197f402e7994d
    Reviewed-on: https://go-review.googlesource.com/21593
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0d375381963d1236b1f70546386ffe92dddb59fc
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Tue Apr 5 23:54:50 2016 +0800

    cmd/vet: do not treat declaration as asignment in atomic check
    
    Fixes #15118
    
    Change-Id: Iad56ed412535c8ac0a01c4bd7769fd3d37688ac9
    Reviewed-on: https://go-review.googlesource.com/21526
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 530e2164940d6650c43ecc8c652eed557e0bff8a
Author: Ross Light <light@google.com>
Date:   Thu Mar 31 14:57:49 2016 -0700

    os/user: wrap getgrnam_r to fix type issues
    
    Even with -D_POSIX_PTHREAD_SEMANTICS, Solaris seems to not define
    getgrnam_r in a POSIX compatible way.
    
    Fixes #14967
    
    Change-Id: I78cb7e5b30b2d8b860e336060a0a06f4720c0475
    Reviewed-on: https://go-review.googlesource.com/21385
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b2fc9f1c23453e16ab08d411ed0e439212d6e5e6
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Wed Apr 6 11:18:55 2016 -0300

    net/http/pprof: note calling runtime.SetBlockProfileRate is required for block profile
    
    Fixes #15076
    
    Change-Id: I5ce8f6253245d8cc1f862a1bf618775f557f955d
    Reviewed-on: https://go-review.googlesource.com/21610
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 309144b7f1090cbc7c3a90eb252d20a939caf398
Author: Keith Randall <khr@golang.org>
Date:   Fri Apr 1 11:05:30 2016 -0700

    cmd/compile: fix x=x assignments
    
    No point in doing anything for x=x assignments.
    In addition, skipping these assignments prevents generating:
        VARDEF x
        COPY x -> x
    which is bad because x is incorrectly considered
    dead before the vardef.
    
    Fixes #14904
    
    Change-Id: I6817055ec20bcc34a9648617e0439505ee355f82
    Reviewed-on: https://go-review.googlesource.com/21470
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 5c7ae10f66eae34b8a786fc2fdf753bf48a3d116
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Apr 6 15:19:12 2016 +1000

    runtime: merge 64bit lfstack impls
    
    Merge all the 64bit lfstack impls into one file, adjust build tags to
    match.
    
    Merge all the comments on the various lfstack implementations for
    posterity.
    
    lfstack_amd64.go can probably be merged, but it is slightly different so
    that will happen in a followup.
    
    Change-Id: I5362d5e127daa81c9cb9d4fa8a0cc5c5e5c2707c
    Reviewed-on: https://go-review.googlesource.com/21591
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 8455f3a3d5f2879e8574882978e7646db1ebabb5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 6 04:38:00 2016 +0000

    os: consolidate os{1,2}_*.go files
    
    Change-Id: I463ca59f486b2842f67f151a55f530ee10663830
    Reviewed-on: https://go-review.googlesource.com/21568
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fd2bb1e30ae2f489e05ec022a8457a680663c27d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 6 02:39:47 2016 +0000

    runtime: rename os1_windows.go to os_windows.go
    
    Change-Id: I11172f3d0e28f17b812e67a4db9cfe513b8e1974
    Reviewed-on: https://go-review.googlesource.com/21565
    Reviewed-by: Minux Ma <minux@golang.org>

commit e095f53e9be7aadc74fddf5532296a438410df40
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 6 02:38:45 2016 +0000

    runtime: merge os{,2}_windows.go into os1_windows.go.
    
    A future CL will rename os1_windows.go to os_windows.go.
    
    Change-Id: I223e76002dd1e9c9d1798fb0beac02c7d3bf4812
    Reviewed-on: https://go-review.googlesource.com/21564
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 0f08dd21831a71292dc306cfc05e28a3a9d73786
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 19:02:52 2016 -0400

    runtime: add s390x support (modified files only)
    
    Change-Id: Ib79ad4a890994ad64edb1feb79bd242d26b5b08a
    Reviewed-on: https://go-review.googlesource.com/20945
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a2eded3421f144983c0ccb9e6c0a325fa1ba1f82
Author: Shenghou Ma <minux@golang.org>
Date:   Tue Apr 5 23:09:39 2016 -0400

    runtime: get randomness from AT_RANDOM AUXV on linux/arm64
    
    Fixes #15147.
    
    Change-Id: Ibfe46c747dea987787a51eb0c95ccd8c5f24f366
    Reviewed-on: https://go-review.googlesource.com/21580
    Run-TryBot: Minux Ma <minux@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit db9348b866775974b5e04eed04c03de47f1c2d46
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 21:41:07 2016 -0400

    reflect: add s390x support
    
    Change-Id: I1f975130179cf26af67e82664310b93d43e87a75
    Reviewed-on: https://go-review.googlesource.com/20944
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7f39f21c7be83b9ff59089b29fa9e723c13cafa9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Apr 4 16:54:54 2016 +0000

    io: add ReadAtSizer interface
    
    ReadAtSizer is a common abstraction for a stateless,
    concurrently-readable fixed number of bytes.
    
    This interface has existed in various codebases for over 3 years (previously
    usually named SizeReaderAt). It is used inside Google in dl.google.com
    (mentioned in https://talks.golang.org/2013/oscon-dl.slide) and other
    packages. It is used in Camlistore, in Juju, in the Google API Go client, in
    github.com/nightlyone/views, and 33 other pages of Github search results.
    
    It is implemented by io.SectionReader, bytes.Reader, strings.Reader, etc.
    
    Time to finally promote this interface to the standard library and give it a
    standard name, blessing it as best practice.
    
    Updates #7263
    Updates #14889
    
    Change-Id: Id28c0cafa7d2d37e8887c54708b5daf1b11c83ea
    Reviewed-on: https://go-review.googlesource.com/21492
    Reviewed-by: Rob Pike <r@golang.org>

commit 34c58065e54e0ac2d610b4a550bdba8f1db90ec6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 6 02:52:17 2016 +0000

    runtime: rename os1_linux.go to os_linux.go
    
    Change-Id: I938f61763c3256a876d62aeb54ef8c25cc4fc90e
    Reviewed-on: https://go-review.googlesource.com/21567
    Reviewed-by: Minux Ma <minux@golang.org>

commit 5103fbfdb29278533c666163a9d56f85408224d9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Apr 6 02:51:55 2016 +0000

    runtime: merge os_linux.go into os1_linux.go
    
    Change-Id: I791c47014fe69e8529c7b2f0b9a554e47902d46c
    Reviewed-on: https://go-review.googlesource.com/21566
    Reviewed-by: Minux Ma <minux@golang.org>

commit 6f2a8810b01d6332d35c9b3e3e64c13f60d31776
Author: David Symonds <dsymonds@golang.org>
Date:   Wed Apr 6 11:53:26 2016 +1000

    expvar: Ensure strings are written as valid JSON.
    
    Change-Id: I5147dbf4e85cf42cd1f32c57861e4c16d9dbd049
    Reviewed-on: https://go-review.googlesource.com/21529
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 870d997ab47fe88c33f4dadef38d7e85eeabf17c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 5 17:24:23 2016 +0000

    net/http: keep request context during Client redirects
    
    Change-Id: I25c51280ba55120ffeaf08222f5ac5d471632d89
    Reviewed-on: https://go-review.googlesource.com/21535
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fda831ed3f904c659fe41f253f75fe76528a28ee
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Apr 5 16:44:07 2016 -0700

    cmd/compile: encapsulate reads of gc.Type.Funarg
    
    Changes generated with eg and then manually
    checked and in some cases simplified.
    
    Passes toolstash -cmp.
    
    Change-Id: I2119f37f003368ce1884d2863b406d6ffbfe38c7
    Reviewed-on: https://go-review.googlesource.com/21563
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e0307c25bebd694b98ae538065cda0681ef9ecf1
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 5 15:59:55 2016 +0000

    net/http: document that Handlers shouldn't mutate Request
    
    Also, don't read from the Request.Headers in the http Server code once
    ServeHTTP has started. This is partially redundant with documenting
    that handlers shouldn't mutate request, but: the space is free due to
    bool packing, it's faster to do the checks once instead of N times in
    writeChunk, and it's a little nicer to code which previously didn't
    play by the unwritten rules. But I'm not going to fix all the cases.
    
    Fixes #14940
    
    Change-Id: I612a8826b41c8682b59515081c590c512ee6949e
    Reviewed-on: https://go-review.googlesource.com/21530
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 8556c76f88a6e80aafb535802be71cc79bd22c75
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 5 18:22:23 2016 +0000

    runtime: minor Windows cleanup
    
    Change-Id: I9a8081ef1109469e9577c642156aa635188d8954
    Reviewed-on: https://go-review.googlesource.com/21538
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit cb284313f7e24319e7d22a551bd04ad9632db659
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 5 20:01:50 2016 +0000

    net/http, net/http/httputil: start with capitals in deprecation sentences
    
    Fixes #15139
    
    Change-Id: I73111137907e612af871b77ccf166572bf78c840
    Reviewed-on: https://go-review.googlesource.com/21544
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 5ba797bd189b460854a0aea877381abcaef8105b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 5 14:20:04 2016 -0700

    cmd/compile: move a lot of declarations outside of go.go
    
    go.go is currently a grab bag of various unrelated type and variable
    declarations. Move a bunch of them into other more relevant source
    files.
    
    There are still more that can be moved, but these were the low hanging
    fruit with obvious homes.
    
    No code/comment changes. Just shuffling stuff around.
    
    Change-Id: I43dbe1a5b8b707709c1a3a034c693d38b8465063
    Reviewed-on: https://go-review.googlesource.com/21561
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cca4ddb497a2d56654b38991566e45be1ef18f4d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Apr 5 12:48:49 2016 -0700

    cmd/compile: add comments explaining how declarations/scopes work
    
    Change-Id: I301760b015eb69ff12eee53473fdbf5e9f168413
    Reviewed-on: https://go-review.googlesource.com/21542
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit d7c699d9935ce2f99419faf81909b36409171705
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 5 20:40:40 2016 +0000

    crypto/rsa, crypto/ecdsa: fail earlier on zero parameters
    
    Change-Id: Ia6ed49d5ef3a256a55e6d4eaa1b4d9f0fc447013
    Reviewed-on: https://go-review.googlesource.com/21560
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 7e0d66020c49ef56158346ce18dc3f538393829e
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Mon Apr 4 18:22:29 2016 +0200

    testing: improve output
    
    This introduces a few changes
    - Skipped benchmarks now print a SKIP line, also if there was
    no output
    - The benchmark name is only printed if there the benchmark
    was not skipped or did not fail in the probe phase.
    
    It also fixes a bug of doubling a skip message in chatty mode in
    absense of a failure.
    
    The chatty flag is now passed in the common struct to allow
    for testing of the printed messages.
    
    Fixes #14799
    
    Change-Id: Ia8eb140c2e5bb467e66b8ef20a2f98f5d95415d5
    Reviewed-on: https://go-review.googlesource.com/21504
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6d6e16001bb04d4bf60c6d14d1f64684a043ef6c
Merge: 22972d2 5e1b7bd
Author: Austin Clements <austin@google.com>
Date:   Tue Apr 5 16:37:29 2016 -0400

    [dev.garbage] Merge branch 'master' into dev.garbage
    
    Change-Id: I47ac4112befc07d3674d7a88827227199edd93b4

commit 5e1b7bdecf7a8b5b5d06633758bf53e475902414
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Apr 4 10:58:21 2016 -0700

    cmd/compile: pull ssa OAPPEND expression handing into its own function
    
    Pure code movement.
    
    Change-Id: Ia07ee0b0041c931b08adf090f262a6f74a6fdb01
    Reviewed-on: https://go-review.googlesource.com/21546
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7735dfb67c2c18274e70582b23846ef9f854c31a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Apr 4 10:49:55 2016 -0700

    cmd/compile: give TLS relocations a name when dumping assembly
    
    Before:
    
            ...
            0x00d0 ff ff ff e8 00 00 00 00 e9 23 ff ff ff cc cc cc  .........#......
            rel 5+4 t=14 +0
            rel 82+4 t=13 runtime.writeBarrier+0
            ...
    
    After:
    
            ...
            0x00d0 ff ff ff e8 00 00 00 00 e9 23 ff ff ff cc cc cc  .........#......
            rel 5+4 t=14 TLS+0
            rel 82+4 t=13 runtime.writeBarrier+0
            ...
    
    Change-Id: Ibdaf694581b5fd5fb87fa8ce6a792f3eb4493622
    Reviewed-on: https://go-review.googlesource.com/21545
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 260ea689992c4d4eccbebdc2750c707213934f50
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Apr 5 11:29:15 2016 -0700

    os: deprecate os.SEEK_SET, os.SEEK_CUR, and os.SEEK_END
    
    CL/19862 introduced the same set of constants to the io package.
    We should steer users away from the os.SEEK* versions and towards
    the io.Seek* versions.
    
    Updates #6885
    
    Change-Id: I96ec5be3ec3439e1295c937159dadaf1ebfb2737
    Reviewed-on: https://go-review.googlesource.com/21540
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f79b50b8d5bc159561c1dcf7c17e2a0db96a9a11
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 5 11:17:57 2016 -0700

    go/importer: match predeclared type list with gc's list in binary exporter
    
    I think we had this code before but it may have gone lost somehow.
    
    Change-Id: Ifde490e686de0d2bfe907cbe19c9197f24f5fa8e
    Reviewed-on: https://go-review.googlesource.com/21537
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d8c815d8b5df75c9c030a318fbc566f38c58526f
Author: David Chase <drchase@google.com>
Date:   Tue Mar 1 16:53:37 2016 -0500

    cmd/compile: note escape of parts of closured-capture vars
    
    Missed a case for closure calls (OCALLFUNC && indirect) in
    esc.go:esccall.
    
    Cleanup to runtime code for windows to more thoroughly hide
    a technical escape.  Also made code pickier about failing
    to late non-optional kernel32.dll.
    
    Fixes #14409.
    
    Change-Id: Ie75486a2c8626c4583224e02e4872c2875f7bca5
    Reviewed-on: https://go-review.googlesource.com/20102
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit eb876dd83cb8413335d64e50aae5d38337d1ebb4
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Apr 5 09:44:00 2016 -0700

    crypto/dsa: eliminate invalid PublicKey early
    
    For PublicKey.P == 0, Verify will fail. Don't even try.
    
    Change-Id: I1009f2b3dead8d0041626c946633acb10086d8c8
    Reviewed-on: https://go-review.googlesource.com/21533
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b9531d31ac8a0078b437f778caf09727e218f492
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Apr 5 16:04:03 2016 +0000

    doc: add httptest.ResponseRecorder note to go1.7.txt notes
    
    Fixes #14928
    
    Change-Id: Id772eb623815cb2bb3e49de68a916762345a9dc1
    Reviewed-on: https://go-review.googlesource.com/21531
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 475d113b53024fe7a35cea0f620b30f97cd0810f
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Mon Apr 4 16:22:38 2016 +0200

    runtime: don't burn CPU unnecessarily
    
    Two GC-related functions, scang and casgstatus, wait in an active spin loop.
    Active spinning is never a good idea in user-space. Once we wait several
    times more than the expected wait time, something unexpected is happenning
    (e.g. the thread we are waiting for is descheduled or handling a page fault)
    and we need to yield to OS scheduler. Moreover, the expected wait time is
    very high for these functions: scang wait time can be tens of milliseconds,
    casgstatus can be hundreds of microseconds. It does not make sense to spin
    even for that time.
    
    go install -a std profile on a 4-core machine shows that 11% of time is spent
    in the active spin in scang:
    
      6.12%    compile  compile                [.] runtime.scang
      3.27%    compile  compile                [.] runtime.readgstatus
      1.72%    compile  compile                [.] runtime/internal/atomic.Load
    
    The active spin also increases tail latency in the case of the slightest
    oversubscription: GC goroutines spend whole quantum in the loop instead of
    executing user code.
    
    Here is scang wait time histogram during go install -a std:
    
    13707.0000 - 1815442.7667 [   118]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎...
    1815442.7667 - 3617178.5333 [     9]: ∎∎∎∎∎∎∎∎∎
    3617178.5333 - 5418914.3000 [    11]: ∎∎∎∎∎∎∎∎∎∎∎
    5418914.3000 - 7220650.0667 [     5]: ∎∎∎∎∎
    7220650.0667 - 9022385.8333 [    12]: ∎∎∎∎∎∎∎∎∎∎∎∎
    9022385.8333 - 10824121.6000 [    13]: ∎∎∎∎∎∎∎∎∎∎∎∎∎
    10824121.6000 - 12625857.3667 [    15]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
    12625857.3667 - 14427593.1333 [    18]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
    14427593.1333 - 16229328.9000 [    18]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
    16229328.9000 - 18031064.6667 [    32]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
    18031064.6667 - 19832800.4333 [    28]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
    19832800.4333 - 21634536.2000 [     6]: ∎∎∎∎∎∎
    21634536.2000 - 23436271.9667 [    15]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
    23436271.9667 - 25238007.7333 [    11]: ∎∎∎∎∎∎∎∎∎∎∎
    25238007.7333 - 27039743.5000 [    27]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
    27039743.5000 - 28841479.2667 [    20]: ∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
    28841479.2667 - 30643215.0333 [    10]: ∎∎∎∎∎∎∎∎∎∎
    30643215.0333 - 32444950.8000 [     7]: ∎∎∎∎∎∎∎
    32444950.8000 - 34246686.5667 [     4]: ∎∎∎∎
    34246686.5667 - 36048422.3333 [     4]: ∎∎∎∎
    36048422.3333 - 37850158.1000 [     1]: ∎
    37850158.1000 - 39651893.8667 [     5]: ∎∎∎∎∎
    39651893.8667 - 41453629.6333 [     2]: ∎∎
    41453629.6333 - 43255365.4000 [     2]: ∎∎
    43255365.4000 - 45057101.1667 [     2]: ∎∎
    45057101.1667 - 46858836.9333 [     1]: ∎
    46858836.9333 - 48660572.7000 [     2]: ∎∎
    48660572.7000 - 50462308.4667 [     3]: ∎∎∎
    50462308.4667 - 52264044.2333 [     2]: ∎∎
    52264044.2333 - 54065780.0000 [     2]: ∎∎
    
    and the zoomed-in first part:
    
    13707.0000 - 19916.7667 [     2]: ∎∎
    19916.7667 - 26126.5333 [     2]: ∎∎
    26126.5333 - 32336.3000 [     9]: ∎∎∎∎∎∎∎∎∎
    32336.3000 - 38546.0667 [     8]: ∎∎∎∎∎∎∎∎
    38546.0667 - 44755.8333 [    12]: ∎∎∎∎∎∎∎∎∎∎∎∎
    44755.8333 - 50965.6000 [    10]: ∎∎∎∎∎∎∎∎∎∎
    50965.6000 - 57175.3667 [     5]: ∎∎∎∎∎
    57175.3667 - 63385.1333 [     6]: ∎∎∎∎∎∎
    63385.1333 - 69594.9000 [     5]: ∎∎∎∎∎
    69594.9000 - 75804.6667 [     6]: ∎∎∎∎∎∎
    75804.6667 - 82014.4333 [     6]: ∎∎∎∎∎∎
    82014.4333 - 88224.2000 [     4]: ∎∎∎∎
    88224.2000 - 94433.9667 [     1]: ∎
    94433.9667 - 100643.7333 [     1]: ∎
    100643.7333 - 106853.5000 [     2]: ∎∎
    106853.5000 - 113063.2667 [     0]:
    113063.2667 - 119273.0333 [     2]: ∎∎
    119273.0333 - 125482.8000 [     2]: ∎∎
    125482.8000 - 131692.5667 [     1]: ∎
    131692.5667 - 137902.3333 [     1]: ∎
    137902.3333 - 144112.1000 [     0]:
    144112.1000 - 150321.8667 [     2]: ∎∎
    150321.8667 - 156531.6333 [     1]: ∎
    156531.6333 - 162741.4000 [     1]: ∎
    162741.4000 - 168951.1667 [     0]:
    168951.1667 - 175160.9333 [     0]:
    175160.9333 - 181370.7000 [     1]: ∎
    181370.7000 - 187580.4667 [     1]: ∎
    187580.4667 - 193790.2333 [     2]: ∎∎
    193790.2333 - 200000.0000 [     0]:
    
    Here is casgstatus wait time histogram:
    
      631.0000 -  5276.6333 [     3]: ∎∎∎
     5276.6333 -  9922.2667 [     5]: ∎∎∎∎∎
     9922.2667 - 14567.9000 [     2]: ∎∎
    14567.9000 - 19213.5333 [     6]: ∎∎∎∎∎∎
    19213.5333 - 23859.1667 [     5]: ∎∎∎∎∎
    23859.1667 - 28504.8000 [     6]: ∎∎∎∎∎∎
    28504.8000 - 33150.4333 [     6]: ∎∎∎∎∎∎
    33150.4333 - 37796.0667 [     2]: ∎∎
    37796.0667 - 42441.7000 [     1]: ∎
    42441.7000 - 47087.3333 [     3]: ∎∎∎
    47087.3333 - 51732.9667 [     0]:
    51732.9667 - 56378.6000 [     1]: ∎
    56378.6000 - 61024.2333 [     0]:
    61024.2333 - 65669.8667 [     0]:
    65669.8667 - 70315.5000 [     0]:
    70315.5000 - 74961.1333 [     1]: ∎
    74961.1333 - 79606.7667 [     0]:
    79606.7667 - 84252.4000 [     0]:
    84252.4000 - 88898.0333 [     0]:
    88898.0333 - 93543.6667 [     0]:
    93543.6667 - 98189.3000 [     0]:
    98189.3000 - 102834.9333 [     0]:
    102834.9333 - 107480.5667 [     1]: ∎
    107480.5667 - 112126.2000 [     0]:
    112126.2000 - 116771.8333 [     0]:
    116771.8333 - 121417.4667 [     0]:
    121417.4667 - 126063.1000 [     0]:
    126063.1000 - 130708.7333 [     0]:
    130708.7333 - 135354.3667 [     0]:
    135354.3667 - 140000.0000 [     1]: ∎
    
    Ideally we eliminate the waiting by switching to async
    state machine for GC, but for now just yield to OS scheduler
    after a reasonable wait time.
    
    To choose yielding parameters I've measured
    golang.org/x/benchmarks/http tail latencies with different yield
    delays and oversubscription levels.
    
    With no oversubscription (to the degree possible):
    
    scang yield delay = 1, casgstatus yield delay = 1
    Latency-50   1.41ms ±15%  1.41ms ± 5%    ~     (p=0.611 n=13+12)
    Latency-95   5.21ms ± 2%  5.15ms ± 2%  -1.15%  (p=0.012 n=13+13)
    Latency-99   7.16ms ± 2%  7.05ms ± 2%  -1.54%  (p=0.002 n=13+13)
    Latency-999  10.7ms ± 9%  10.2ms ±10%  -5.46%  (p=0.004 n=12+13)
    
    scang yield delay = 5000, casgstatus yield delay = 3000
    Latency-50   1.41ms ±15%  1.41ms ± 8%    ~     (p=0.511 n=13+13)
    Latency-95   5.21ms ± 2%  5.14ms ± 2%  -1.23%  (p=0.006 n=13+13)
    Latency-99   7.16ms ± 2%  7.02ms ± 2%  -1.94%  (p=0.000 n=13+13)
    Latency-999  10.7ms ± 9%  10.1ms ± 8%  -6.14%  (p=0.000 n=12+13)
    
    scang yield delay = 10000, casgstatus yield delay = 5000
    Latency-50   1.41ms ±15%  1.45ms ± 6%    ~     (p=0.724 n=13+13)
    Latency-95   5.21ms ± 2%  5.18ms ± 1%    ~     (p=0.287 n=13+13)
    Latency-99   7.16ms ± 2%  7.05ms ± 2%  -1.64%  (p=0.002 n=13+13)
    Latency-999  10.7ms ± 9%  10.0ms ± 5%  -6.72%  (p=0.000 n=12+13)
    
    scang yield delay = 30000, casgstatus yield delay = 10000
    Latency-50   1.41ms ±15%  1.51ms ± 7%  +6.57%  (p=0.002 n=13+13)
    Latency-95   5.21ms ± 2%  5.21ms ± 2%    ~     (p=0.960 n=13+13)
    Latency-99   7.16ms ± 2%  7.06ms ± 2%  -1.50%  (p=0.012 n=13+13)
    Latency-999  10.7ms ± 9%  10.0ms ± 6%  -6.49%  (p=0.000 n=12+13)
    
    scang yield delay = 100000, casgstatus yield delay = 50000
    Latency-50   1.41ms ±15%  1.53ms ± 6%  +8.48%  (p=0.000 n=13+12)
    Latency-95   5.21ms ± 2%  5.23ms ± 2%    ~     (p=0.287 n=13+13)
    Latency-99   7.16ms ± 2%  7.08ms ± 2%  -1.21%  (p=0.004 n=13+13)
    Latency-999  10.7ms ± 9%   9.9ms ± 3%  -7.99%  (p=0.000 n=12+12)
    
    scang yield delay = 200000, casgstatus yield delay = 100000
    Latency-50   1.41ms ±15%  1.47ms ± 5%    ~     (p=0.072 n=13+13)
    Latency-95   5.21ms ± 2%  5.17ms ± 2%    ~     (p=0.091 n=13+13)
    Latency-99   7.16ms ± 2%  7.02ms ± 2%  -1.99%  (p=0.000 n=13+13)
    Latency-999  10.7ms ± 9%   9.9ms ± 5%  -7.86%  (p=0.000 n=12+13)
    
    With slight oversubscription (another instance of http benchmark
    was running in background with reduced GOMAXPROCS):
    
    scang yield delay = 1, casgstatus yield delay = 1
    Latency-50    840µs ± 3%   804µs ± 3%  -4.37%  (p=0.000 n=15+18)
    Latency-95   6.52ms ± 4%  6.03ms ± 4%  -7.51%  (p=0.000 n=18+18)
    Latency-99   10.8ms ± 7%  10.0ms ± 4%  -7.33%  (p=0.000 n=18+14)
    Latency-999  18.0ms ± 9%  16.8ms ± 7%  -6.84%  (p=0.000 n=18+18)
    
    scang yield delay = 5000, casgstatus yield delay = 3000
    Latency-50    840µs ± 3%   809µs ± 3%  -3.71%  (p=0.000 n=15+17)
    Latency-95   6.52ms ± 4%  6.11ms ± 4%  -6.29%  (p=0.000 n=18+18)
    Latency-99   10.8ms ± 7%   9.9ms ± 6%  -7.55%  (p=0.000 n=18+18)
    Latency-999  18.0ms ± 9%  16.5ms ±11%  -8.49%  (p=0.000 n=18+18)
    
    scang yield delay = 10000, casgstatus yield delay = 5000
    Latency-50    840µs ± 3%   823µs ± 5%  -2.06%  (p=0.002 n=15+18)
    Latency-95   6.52ms ± 4%  6.32ms ± 3%  -3.05%  (p=0.000 n=18+18)
    Latency-99   10.8ms ± 7%  10.2ms ± 4%  -5.22%  (p=0.000 n=18+18)
    Latency-999  18.0ms ± 9%  16.7ms ±10%  -7.09%  (p=0.000 n=18+18)
    
    scang yield delay = 30000, casgstatus yield delay = 10000
    Latency-50    840µs ± 3%   836µs ± 5%    ~     (p=0.442 n=15+18)
    Latency-95   6.52ms ± 4%  6.39ms ± 3%  -2.00%  (p=0.000 n=18+18)
    Latency-99   10.8ms ± 7%  10.2ms ± 6%  -5.15%  (p=0.000 n=18+17)
    Latency-999  18.0ms ± 9%  16.6ms ± 8%  -7.48%  (p=0.000 n=18+18)
    
    scang yield delay = 100000, casgstatus yield delay = 50000
    Latency-50    840µs ± 3%   836µs ± 6%    ~     (p=0.401 n=15+18)
    Latency-95   6.52ms ± 4%  6.40ms ± 4%  -1.79%  (p=0.010 n=18+18)
    Latency-99   10.8ms ± 7%  10.2ms ± 5%  -4.95%  (p=0.000 n=18+18)
    Latency-999  18.0ms ± 9%  16.5ms ±14%  -8.17%  (p=0.000 n=18+18)
    
    scang yield delay = 200000, casgstatus yield delay = 100000
    Latency-50    840µs ± 3%   828µs ± 2%  -1.49%  (p=0.001 n=15+17)
    Latency-95   6.52ms ± 4%  6.38ms ± 4%  -2.04%  (p=0.001 n=18+18)
    Latency-99   10.8ms ± 7%  10.2ms ± 4%  -4.77%  (p=0.000 n=18+18)
    Latency-999  18.0ms ± 9%  16.9ms ± 9%  -6.23%  (p=0.000 n=18+18)
    
    With significant oversubscription (background http benchmark
    was running with full GOMAXPROCS):
    
    scang yield delay = 1, casgstatus yield delay = 1
    Latency-50   1.32ms ±12%  1.30ms ±13%    ~     (p=0.454 n=14+14)
    Latency-95   16.3ms ±10%  15.3ms ± 7%  -6.29%  (p=0.001 n=14+14)
    Latency-99   29.4ms ±10%  27.9ms ± 5%  -5.04%  (p=0.001 n=14+12)
    Latency-999  49.9ms ±19%  45.9ms ± 5%  -8.00%  (p=0.008 n=14+13)
    
    scang yield delay = 5000, casgstatus yield delay = 3000
    Latency-50   1.32ms ±12%  1.29ms ± 9%    ~     (p=0.227 n=14+14)
    Latency-95   16.3ms ±10%  15.4ms ± 5%  -5.27%  (p=0.002 n=14+14)
    Latency-99   29.4ms ±10%  27.9ms ± 6%  -5.16%  (p=0.001 n=14+14)
    Latency-999  49.9ms ±19%  46.8ms ± 8%  -6.21%  (p=0.050 n=14+14)
    
    scang yield delay = 10000, casgstatus yield delay = 5000
    Latency-50   1.32ms ±12%  1.35ms ± 9%     ~     (p=0.401 n=14+14)
    Latency-95   16.3ms ±10%  15.0ms ± 4%   -7.67%  (p=0.000 n=14+14)
    Latency-99   29.4ms ±10%  27.4ms ± 5%   -6.98%  (p=0.000 n=14+14)
    Latency-999  49.9ms ±19%  44.7ms ± 5%  -10.56%  (p=0.000 n=14+11)
    
    scang yield delay = 30000, casgstatus yield delay = 10000
    Latency-50   1.32ms ±12%  1.36ms ±10%     ~     (p=0.246 n=14+14)
    Latency-95   16.3ms ±10%  14.9ms ± 5%   -8.31%  (p=0.000 n=14+14)
    Latency-99   29.4ms ±10%  27.4ms ± 7%   -6.70%  (p=0.000 n=14+14)
    Latency-999  49.9ms ±19%  44.9ms ±15%  -10.13%  (p=0.003 n=14+14)
    
    scang yield delay = 100000, casgstatus yield delay = 50000
    Latency-50   1.32ms ±12%  1.41ms ± 9%  +6.37%  (p=0.008 n=14+13)
    Latency-95   16.3ms ±10%  15.1ms ± 8%  -7.45%  (p=0.000 n=14+14)
    Latency-99   29.4ms ±10%  27.5ms ±12%  -6.67%  (p=0.002 n=14+14)
    Latency-999  49.9ms ±19%  45.9ms ±16%  -8.06%  (p=0.019 n=14+14)
    
    scang yield delay = 200000, casgstatus yield delay = 100000
    Latency-50   1.32ms ±12%  1.42ms ±10%   +7.21%  (p=0.003 n=14+14)
    Latency-95   16.3ms ±10%  15.0ms ± 7%   -7.59%  (p=0.000 n=14+14)
    Latency-99   29.4ms ±10%  27.3ms ± 8%   -7.20%  (p=0.000 n=14+14)
    Latency-999  49.9ms ±19%  44.8ms ± 8%  -10.21%  (p=0.001 n=14+13)
    
    All numbers are on 8 cores and with GOGC=10 (http benchmark has
    tiny heap, few goroutines and low allocation rate, so by default
    GC barely affects tail latency).
    
    10us/5us yield delays seem to provide a reasonable compromise
    and give 5-10% tail latency reduction. That's what used in this change.
    
    go install -a std results on 4 core machine:
    
    name      old time/op  new time/op  delta
    Time       8.39s ± 2%   7.94s ± 2%  -5.34%  (p=0.000 n=47+49)
    UserTime   24.6s ± 2%   22.9s ± 2%  -6.76%  (p=0.000 n=49+49)
    SysTime    1.77s ± 9%   1.89s ±11%  +7.00%  (p=0.000 n=49+49)
    CpuLoad    315ns ± 2%   313ns ± 1%  -0.59%  (p=0.000 n=49+48) # %CPU
    MaxRSS    97.1ms ± 4%  97.5ms ± 9%    ~     (p=0.838 n=46+49) # bytes
    
    Update #14396
    Update #14189
    
    Change-Id: I3f4109bf8f7fd79b39c466576690a778232055a2
    Reviewed-on: https://go-review.googlesource.com/21503
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 3b246fa863dbd91588c5920969f9fd0ce8362129
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Mar 18 11:00:03 2016 +0100

    runtime: sleep less when we can do work
    
    Usleep(100) in runqgrab negatively affects latency and throughput
    of parallel application. We are sleeping instead of doing useful work.
    This is effect is particularly visible on windows where minimal
    sleep duration is 1-15ms.
    
    Reduce sleep from 100us to 3us and use osyield on windows.
    Sync chan send/recv takes ~50ns, so 3us gives us ~50x overshoot.
    
    benchmark                    old ns/op     new ns/op     delta
    BenchmarkChanSync-12         216           217           +0.46%
    BenchmarkChanSyncWork-12     27213         25816         -5.13%
    
    CPU consumption goes up from 106% to 108% in the first case,
    and from 107% to 125% in the second case.
    
    Test case from #14790 on windows:
    
    BenchmarkDefaultResolution-8  4583372   29720    -99.35%
    Benchmark1ms-8                992056    30701    -96.91%
    
    99-th latency percentile for HTTP request serving is improved by up to 15%
    (see http://golang.org/cl/20835 for details).
    
    The following benchmarks are from the change that originally added this sleep
    (see https://golang.org/s/go15gomaxprocs):
    
    name        old time/op  new time/op  delta
    Chain       22.6µs ± 2%  22.7µs ± 6%    ~      (p=0.905 n=9+10)
    ChainBuf    22.4µs ± 3%  22.5µs ± 4%    ~      (p=0.780 n=9+10)
    Chain-2     23.5µs ± 4%  24.9µs ± 1%  +5.66%   (p=0.000 n=10+9)
    ChainBuf-2  23.7µs ± 1%  24.4µs ± 1%  +3.31%   (p=0.000 n=9+10)
    Chain-4     24.2µs ± 2%  25.1µs ± 3%  +3.70%   (p=0.000 n=9+10)
    ChainBuf-4  24.4µs ± 5%  25.0µs ± 2%  +2.37%  (p=0.023 n=10+10)
    Powser       2.37s ± 1%   2.37s ± 1%    ~       (p=0.423 n=8+9)
    Powser-2     2.48s ± 2%   2.57s ± 2%  +3.74%   (p=0.000 n=10+9)
    Powser-4     2.66s ± 1%   2.75s ± 1%  +3.40%  (p=0.000 n=10+10)
    Sieve        13.3s ± 2%   13.3s ± 2%    ~      (p=1.000 n=10+9)
    Sieve-2      7.00s ± 2%   7.44s ±16%    ~      (p=0.408 n=8+10)
    Sieve-4      4.13s ±21%   3.85s ±22%    ~       (p=0.113 n=9+9)
    
    Fixes #14790
    
    Change-Id: Ie7c6a1c4f9c8eb2f5d65ab127a3845386d6f8b5d
    Reviewed-on: https://go-review.googlesource.com/20835
    Reviewed-by: Austin Clements <austin@google.com>

commit 036d09d5bff8b9da789ba0c914e5966055d9d7fe
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Tue Mar 29 13:53:34 2016 +0300

    cmd/compile/internal/amd64: Use 32-bit operands for byte operations
    
    We already generate ADDL for byte operations, reflect this in code.
    This also allows inc/dec for +-1 operation, which are 1-byte shorter,
    and enables lea for 3-operand addition/subtraction.
    
    Change-Id: Ibfdfee50667ca4cd3c28f72e3dece0c6d114d3ae
    Reviewed-on: https://go-review.googlesource.com/21251
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ffbd31e9f79ad8b6aaeceac1397678e237581064
Author: Augusto Roman <aroman@gmail.com>
Date:   Tue Mar 8 12:41:35 2016 -0800

    encoding/json: allow non-string type keys for (un-)marshal
    
    This CL allows JSON-encoding & -decoding maps whose keys are types that
    implement encoding.TextMarshaler / TextUnmarshaler.
    
    During encode, the map keys are marshaled upfront so that they can be
    sorted.
    
    Fixes #12146
    
    Change-Id: I43809750a7ad82a3603662f095c7baf75fd172da
    Reviewed-on: https://go-review.googlesource.com/20356
    Run-TryBot: Caleb Spare <cespare@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit acefcb732cae4daa59a621cb102793860b564a12
Author: Eric Lagergren <ericscottlagergren@gmail.com>
Date:   Tue Feb 23 18:40:42 2016 -0800

    io: define SeekStart, SeekCurrent, SeekEnd constants for use with Seeker
    
    Fixes #6885
    
    Change-Id: I6907958186f6a2427da1ad2f6c20bd5d7bf7a3f9
    Reviewed-on: https://go-review.googlesource.com/19862
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1747788c5668e76a238221ae4982daa5bdf24939
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Mon Apr 4 23:33:30 2016 +0200

    cmd/compile: add a pass to print bound checks
    
    Since BCE happens over several passes (opt, loopbce, prove)
    it's easy to regress especially with rewriting.
    
    The pass is only activated with special debug flag.
    
    Change-Id: I46205982e7a2751156db8e875d69af6138068f59
    Reviewed-on: https://go-review.googlesource.com/21510
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 3bbede0c512ca645fa19522480c0200ee4711bf3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Jan 29 18:26:06 2016 +0000

    net/http: zero pad Response status codes to three digits
    
    Go 1.6's HTTP/1.x Transport started enforcing that responses have 3
    status digits, per the spec, but we could still write out invalid
    status codes ourselves if the called
    ResponseWriter.WriteHeader(0). That is bogus anyway, since the minimum
    status code is 1xx, but be a little bit less bogus (and consistent)
    and zero pad our responses.
    
    Change-Id: I6883901fd95073cb72f6b74035cabf1a79c35e1c
    Reviewed-on: https://go-review.googlesource.com/19130
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 7208a2cd785fee77d951ad575adc705a3a012486
Author: Dave Cheney <dave@cheney.net>
Date:   Tue Apr 5 15:11:08 2016 +1000

    cmd/compile/internal/ssa: hide gen packge from ./make.bash
    
    Fixes #15122
    
    Change-Id: Ie2c802d78aea731e25bf4b193b3c2e4c884e0573
    Reviewed-on: https://go-review.googlesource.com/21524
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e8f01e5cae3d72ea78c06d95a5ac622076f455ed
Author: David Symonds <dsymonds@golang.org>
Date:   Tue Apr 5 15:19:27 2016 +1000

    expvar: document that the Var interface's String method should return a valid JSON value.
    
    Change-Id: If4e740f3dbef4053355542eebdd899b3099d872c
    Reviewed-on: https://go-review.googlesource.com/21525
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 869e576517f825aecdc8730b0d22f8d6b59bd749
Author: Paul Marks <pmarks@google.com>
Date:   Mon Apr 4 14:13:56 2016 -0700

    net: wait for cancelation goroutine before returning from connect.
    
    This fixes a race which made it possible to cancel a connection after
    returning from net.Dial.
    
    Fixes #15035
    Fixes #15078
    
    Change-Id: Iec6215009538362f7ad9f408a33549f3e94d1606
    Reviewed-on: https://go-review.googlesource.com/21497
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bbbd572c10e8e28d343a559b9c0ceef9074c719c
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Tue Apr 5 14:10:22 2016 +1000

    cmd/go: leave directory before removing it in TestSharedLibName
    
    Fixes #15124
    
    Change-Id: I55fe4c2957370f3fb417c3df54f99fb085a5dada
    Reviewed-on: https://go-review.googlesource.com/21522
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 31f2bb4ba28fa0e9908026def705822dd9b4fa6c
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Tue Apr 5 12:54:46 2016 +1000

    debug/gosym: do not forget to close test binay file handle in TestPCLine
    
    Fixes #15121
    
    Change-Id: I651521743c56244c55eda5762905889d7e06887a
    Reviewed-on: https://go-review.googlesource.com/21521
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ffeae198d018693f84b15f8f44f9a2eb6b8e9713
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Tue Apr 5 11:31:50 2016 +1000

    runtime: leave directory before removing it in TestDLLPreloadMitigation
    
    Fixes #15120
    
    Change-Id: I1d9a192ac163826bad8b46e8c0b0b9e218e69570
    Reviewed-on: https://go-review.googlesource.com/21520
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c1c7547f6ad7264c1d6eea3fc1645b2eab104694
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Apr 4 13:31:08 2016 -0700

    net/http: add Request.Context and Request.WithContext
    
    Currently only used by the client. The server is not yet wired up.  A
    TODO remains to document how it works server-side, once implemented.
    
    Updates #14660
    
    Change-Id: I27c2e74198872b2720995fa8271d91de200e23d5
    Reviewed-on: https://go-review.googlesource.com/21496
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit fcac88098b1d5eee5f0a546e550c3d95cc13f64b
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Tue Apr 5 10:28:19 2016 +1000

    runtime: remove race out of BenchmarkChanToSyscallPing1ms
    
    Fixes #15119
    
    Change-Id: I31445bf282a5e2a160ff4e66c5a592b989a5798f
    Reviewed-on: https://go-review.googlesource.com/21448
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c4dda7e5a830e86b597d34483fd7787723b34f2f
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Thu Mar 17 17:24:19 2016 +0900

    path/filepath: normalize output of EvalSymlinks on windows
    
    Current implementation uses GetShortPathName and GetLongPathName
    to get a normalized path. That approach sometimes fails because
    user can disable short path name anytime. This CL provides
    an alternative approach suggested by MSDN.
    
    https://msdn.microsoft.com/en-us/library/windows/desktop/aa364989(v=vs.85).aspx
    
    Fixes #13980
    
    Change-Id: Icf4afe4c9c4b507fc110c1483bf8db2c3f606b0a
    Reviewed-on: https://go-review.googlesource.com/20860
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9db7ef561462606085759a2f8a93b7224fdfd2fc
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 8 00:07:18 2016 +0000

    context: add the context package from golang.org/x/net/context
    
    This copies the golang.org/x/net/context package to the standard library.
    
    It is imported from the x/net repo's git rev 1d9fd3b8333e (the most
    recent modified to x/net/context as of 2016-03-07).
    
    The corresponding change to x/net/context is in https://golang.org/cl/20347
    
    Updates #14660
    
    Change-Id: Ida14b1b7e115194d6218d9ac614548b9f41641cc
    Reviewed-on: https://go-review.googlesource.com/20346
    Reviewed-by: Sameer Ajmani <sameer@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0c71e293b57b0b2fbfa63d0fbf364b1771b6ee6e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Apr 4 15:41:56 2016 -0700

    cmd/compile: minor cleanup to import loading
    
    Briefly document what the importfoo functions do.
    
    Get rid of importsym's unused result parameter.
    
    Get rid of the redundant calls to importsym(s, OTYPE)
    after we've already called pkgtype(s).
    
    Passes toolstash -cmp.
    
    Change-Id: I4c057358144044f5356e4dec68907ec85f1fe806
    Reviewed-on: https://go-review.googlesource.com/21498
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 86e7a5b92a8cda6809d7677689fad557b2d15544
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Apr 4 18:46:13 2016 +0900

    net: factor out fdMutex-related methods on netFD
    
    Also updates documentation.
    
    Change-Id: Idb0fc0feed61407f7f07eab81ce82b55ffde5040
    Reviewed-on: https://go-review.googlesource.com/21446
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2ae749c13fa365fc14a639c5a7f74d2c12d98b31
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Apr 4 18:48:06 2016 +0900

    net: rename TestSelfConnect to TestTCPSelfConnect
    
    Alos moves TestTCPSelfConnect into tcpsock_test.go
    
    Change-Id: I3e1cbd029594ecb36a67f42bc3ecdbc7176a95dc
    Reviewed-on: https://go-review.googlesource.com/21447
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bc942823069fd004166360164e13821ded38f11c
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Mon Apr 4 22:36:43 2016 +0300

    cmd/link: grow rdBuf lazily
    
    Counting the final buffer size usually doesn't result in the buffer growing,
    so assume that it doesn't need to grow and only grow if necessary.
    
    name       old secs    new secs    delta
    LinkCmdGo   0.49 ± 4%   0.48 ± 3%  -1.31%   (p=0.000 n=95+95)
    
    name       old MaxRSS  new MaxRSS  delta
    LinkCmdGo   122k ± 4%   121k ± 5%    ~     (p=0.065 n=96+100)
    
    Change-Id: I85e7f5688a61ef5ef2b1b7afe56507e71c5bd5b1
    Reviewed-on: https://go-review.googlesource.com/21509
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Shahar Kohanim <skohanim@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit a9ea36afbbf39555b7a215651535f0eef89db37c
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 18 17:21:32 2016 -0700

    cmd/compile: export inlined function bodies
    
    Completed implementation for exporting inlined functions
    using the new binary export format. This change passes
    (export GO_GCFLAGS=-newexport; make all.bash) but for
    gc's builtin_test.go which we need to adjust before enabling
    this code by default.
    
    For a high-level description of the export format see the
    comment at the top of bexport.go.
    
    Major changes:
    
    1) The export format for the platform independent export data
       changed: When we export inlined function bodies, additional
       objects (other functions, types, etc.) that are referred to
       by the function bodies will need to be exported. While this
       doesn't affect the platform-independent portion directly, it
       adds more objects to the exportlist while we are exporting.
       Instead of trying to sort the objects into groups, just export
       objects as they appear in the export list. This is slightly
       less compact (one extra byte per object), but it is simpler
       and much more flexible.
    
    2) The export format contains now three sections: 1) The plat-
       form independent objects, 2) the objects pulled in for export
       via inlined function bodies, and 3) the inlined function bodies.
    
    3) Completed the exporting and importing code for inlined function
       bodies. The format is completely compiler-specific and easily
       changeable w/o affecting other tools. There is still quite a
       bit of room for denser encoding. This can happen at any time
       in the future.
    
    This change contains also the adjustments for go/internal/gcimporter,
    necessary because of the export format change 1) mentioned above.
    
    For #13241.
    
    Change-Id: I86bca0bd984b12ccf13d0d30892e6e25f6d04ed5
    Reviewed-on: https://go-review.googlesource.com/21172
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 38e11d05b9f563ca6588f020c40dbac7d4850fc2
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 30 14:26:04 2016 -0700

    cmd/compile: use *byte for pointer to string memory
    
    Change-Id: I14cff013ef4920d33b5ead0c75d51681bb4f635a
    Reviewed-on: https://go-review.googlesource.com/21337
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8bc9c57b186043ccbd23ab73ff14553a9c173729
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Mon Apr 4 19:05:48 2016 +0200

    testing: unflake TestBRun
    
    by only testing the lower bound of memalloc
    
    Fixes #15063
    
    Change-Id: Iab2fdd75e9ce98c641bfbce57f142fa47176772d
    Reviewed-on: https://go-review.googlesource.com/21507
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>

commit 060501dc0ef178dc38afb195f65186562e6dc84e
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Apr 4 16:13:35 2016 +0200

    cmd/compile: constant fold modulo
    
    Fixes #15079
    
    Change-Id: Ib4dd9eab322da39234008e040100e75cb58761b3
    Reviewed-on: https://go-review.googlesource.com/21501
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 68325b56e7657cf9c0f2c223182b988a4f097cd1
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Apr 4 16:38:26 2016 +0200

    cmd/compile: fold IsInBounds of modulo.
    
    In b we only need the division by 0 check.
    
    func b(i uint, v []byte) byte {
        return v[i%uint(len(v))]
    }
    
    Updates #15079.
    
    Change-Id: Ic7491e677dd57cd6ba577efbce576dbb6e023cbd
    Reviewed-on: https://go-review.googlesource.com/21502
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Ahmed Waheed <oneofone@gmail.com>

commit 61f56e925ea97b82090d30f05cde3cd7a2668ed0
Author: Austin Clements <austin@google.com>
Date:   Tue Mar 29 12:28:24 2016 -0400

    runtime: fix pagesInUse accounting
    
    When we grow the heap, we create a temporary "in use" span for the
    memory acquired from the OS and then free that span to link it into
    the heap. Hence, we (1) increase pagesInUse when we make the temporary
    span so that (2) freeing the span will correctly decrease it.
    
    However, currently step (1) increases pagesInUse by the number of
    pages requested from the heap, while step (2) decreases it by the
    number of pages requested from the OS (the size of the temporary
    span). These aren't necessarily the same, since we round up the number
    of pages we request from the OS, so steps 1 and 2 don't necessarily
    cancel out like they're supposed to. Over time, this can add up and
    cause pagesInUse to underflow and wrap around to 2^64. The garbage
    collector computes the sweep ratio from this, so if this happens, the
    sweep ratio becomes effectively infinite, causing the first allocation
    on each P in a sweep cycle to sweep the entire heap. This makes
    sweeping effectively STW.
    
    Fix this by increasing pagesInUse in step 1 by the number of pages
    requested from the OS, so that the two steps correctly cancel out. We
    add a test that checks that the running total matches the actual state
    of the heap.
    
    Fixes #15022. For 1.6.x.
    
    Change-Id: Iefd9d6abe37d0d447cbdbdf9941662e4f18eeffc
    Reviewed-on: https://go-review.googlesource.com/21280
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 2d5688952db33fc967a23011c22fa8fc71251fb1
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Apr 1 10:55:21 2016 -0400

    cmd/link: keep types together when dynamic linking
    
    To refer to types and names by offsets, we want to keep the symbols in
    the same sections. Do this by making all types .relro for now.
    
    Once name offsets are further along, name data can move out of relro.
    
    Change-Id: I1cbd2e914bd180cdf25c4aeb13d9c1c734febe69
    Reviewed-on: https://go-review.googlesource.com/21394
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 74c0fea9e8a37ae08d4c08b71d27be94feb3332a
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Sat Apr 2 12:04:45 2016 -0300

    go/types: better error when assigning to struct field in map
    
    Identify this assignment case and instead of the more general error
    
        prog.go:6: cannot assign to students["sally"].age (value of type int)
    
    produce
    
        prog.go:6: cannot directly assign to struct field students["sally"].age in map
    
    that explains why the assignment is not possible. Used ExprString
    instead of String of operand since the type of the field is not relevant
    to the error.
    
    Updates #13779.
    
    Change-Id: I581251145ae6336ddd181b9ddd77f657c51b5aff
    Reviewed-on: https://go-review.googlesource.com/21463
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f229e46783a12b7604bf99f0b7329965d5a2b1f6
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Sat Apr 2 11:27:02 2016 -0300

    cmd/compile: better error when assigning to struct field in map
    
    Identify this assignment case and instead of the more general error
    
        prog.go:6: cannot assign to students["sally"].age
    
    produce
    
        prog.go:6: cannot directly assign to struct field students["sally"].age in map
    
    that explains why the assignment is not possible.
    
    Fixes #13779.
    
    Change-Id: I90c10b445f907834fc1735aa66e44a0f447aa74f
    Reviewed-on: https://go-review.googlesource.com/21462
    Reviewed-by: David Chase <drchase@google.com>

commit 1f5b1b2b66ee530af8d86c190c74f49a2809ee92
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed Mar 30 16:33:52 2016 +1100

    runtime: change osyield to use Windows SwitchToThread
    
    It appears that windows osyield is just 15ms sleep on my computer
    (see benchmarks below). Replace NtWaitForSingleObject in osyield
    with SwitchToThread (as suggested by Dmitry).
    
    Also add issue #14790 related benchmarks, so we can track perfomance
    changes in CL 20834 and CL 20835 and beyond.
    
    Update #14790
    
    benchmark                             old ns/op     new ns/op     delta
    BenchmarkChanToSyscallPing1ms         1953200       1953000       -0.01%
    BenchmarkChanToSyscallPing15ms        31562904      31248400      -1.00%
    BenchmarkSyscallToSyscallPing1ms      5247          4202          -19.92%
    BenchmarkSyscallToSyscallPing15ms     5260          4374          -16.84%
    BenchmarkChanToChanPing1ms            474           494           +4.22%
    BenchmarkChanToChanPing15ms           468           489           +4.49%
    BenchmarkOsYield1ms                   980018        75.5          -99.99%
    BenchmarkOsYield15ms                  15625200      75.8          -100.00%
    
    Change-Id: I1b4cc7caca784e2548ee3c846ca07ef152ebedce
    Reviewed-on: https://go-review.googlesource.com/21294
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 02adfa0b3d6dd46dc69709df7f39a1c947bec867
Author: Rob Pike <r@golang.org>
Date:   Sun Apr 3 20:45:52 2016 -0700

    html/template: prefix the internally-used FuncMap values with an underscore
    
    This makes these names even less likely to collide with a real user-defined function.
    
    Fixes #13852.
    
    Change-Id: If5a8562c6797ced19c355c7ab2c86fc4401a8674
    Reviewed-on: https://go-review.googlesource.com/21490
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit ed8f0e5c33269de2f950d33ab7d50554b13f336e
Author: Christopher Nelson <nadiasvertex@gmail.com>
Date:   Sun Dec 13 08:02:29 2015 -0500

    cmd/go: fix -buildmode=c-archive should work on windows
    
    Add supporting code for runtime initialization, including both
    32- and 64-bit x86 architectures.
    
    Add .ctors section on Windows to PE .o files, and INITENTRY to .ctors
    section to plug in to the GCC C/C++ startup initialization mechanism.
    This allows the Go runtime to initialize itself. Add .text section
    symbol for .ctor relocations. Note: This is unlikely to be useful for
    MSVC-based toolchains.
    
    Fixes #13494
    
    Change-Id: I4286a96f70e5f5228acae88eef46e2bed95813f3
    Reviewed-on: https://go-review.googlesource.com/18057
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 386c0e6598eadab18e01d3fa60f8e21872cbe70c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Apr 3 22:58:10 2016 +0000

    cmd/compile: give ChanDir a type
    
    Change-Id: I03621db79637b04982e1f0e7b4268c4ed2db6d22
    Reviewed-on: https://go-review.googlesource.com/21484
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 73edd7b20868825223bce7947587fb1a1ddab213
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Apr 3 18:27:17 2016 +0000

    cmd/link: simplify readSymName, taking advantage of bufio.Reader
    
    Now that cmd/link uses bufio.Reader, take advantage of it.
    I find this new version easier to reason about.
    
    Reduces allocations by 1.1% when linking a basic HTTP server.
    
    Numbers are stable with each round measuring using:
    rm prof.mem; go tool link -o foo  -memprofile=prof.mem -memprofilerate=1 foo.a
    
    Before:
    
    65.36MB of 74.53MB total (87.70%)
    Dropped 157 nodes (cum <= 0.37MB)
    Showing top 10 nodes out of 39 (cum >= 1.47MB)
          flat  flat%   sum%        cum   cum%
       21.48MB 28.81% 28.81%    21.48MB 28.81%  cmd/link/internal/ld.Linklookup
       16.04MB 21.52% 50.33%    16.04MB 21.52%  cmd/link/internal/ld.(*objReader).readSlices
        4.61MB  6.19% 56.52%     4.61MB  6.19%  cmd/link/internal/ld.(*objReader).readSymName
        4.51MB  6.05% 62.57%     6.32MB  8.48%  cmd/link/internal/ld.writelines
        4.50MB  6.03% 68.60%     4.50MB  6.03%  cmd/link/internal/ld.Symgrow
        4.02MB  5.39% 73.99%     4.02MB  5.39%  cmd/link/internal/ld.linknew
        3.98MB  5.34% 79.33%     3.98MB  5.34%  cmd/link/internal/ld.setaddrplus
        2.96MB  3.97% 83.30%    28.78MB 38.62%  cmd/link/internal/ld.(*objReader).readRef
        1.81MB  2.43% 85.73%     1.81MB  2.43%  cmd/link/internal/ld.newcfaoffsetattr
        1.47MB  1.97% 87.70%     1.47MB  1.97%  cmd/link/internal/ld.(*objReader).readSym
    
    After:
    
    64.66MB of 73.87MB total (87.53%)
    Dropped 156 nodes (cum <= 0.37MB)
    Showing top 10 nodes out of 40 (cum >= 1.47MB)
          flat  flat%   sum%        cum   cum%
       21.48MB 29.08% 29.08%    21.48MB 29.08%  cmd/link/internal/ld.Linklookup
       16.04MB 21.71% 50.79%    16.04MB 21.71%  cmd/link/internal/ld.(*objReader).readSlices
        4.51MB  6.10% 56.90%     6.32MB  8.56%  cmd/link/internal/ld.writelines
        4.50MB  6.09% 62.99%     4.50MB  6.09%  cmd/link/internal/ld.Symgrow
        4.02MB  5.44% 68.42%     4.02MB  5.44%  cmd/link/internal/ld.linknew
        3.98MB  5.38% 73.81%     3.98MB  5.38%  cmd/link/internal/ld.setaddrplus
        3.90MB  5.28% 79.09%     3.90MB  5.28%  cmd/link/internal/ld.(*objReader).readSymName
        2.96MB  4.01% 83.09%    28.08MB 38.01%  cmd/link/internal/ld.(*objReader).readRef
        1.81MB  2.45% 85.55%     1.81MB  2.45%  cmd/link/internal/ld.newcfaoffsetattr
        1.47MB  1.99% 87.53%     1.47MB  1.99%  cmd/link/internal/ld.(*objReader).readSym
    
    Also tested locally with asserts that that the calculated length is
    always correct and thus the adjName buf never reallocates.
    
    Change-Id: I19e3e8bfa6a12bcd8b5216f6232f42c122e4f80e
    Reviewed-on: https://go-review.googlesource.com/21481
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1934a77f5a1680397481d5bc6ed85b017d1e8b38
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Sun Apr 3 19:32:31 2016 +1200

    cmd/link: define a variable for the target platform's elf relocation type
    
    Rather than having half a dozen switch statements. Also remove some c2go dregs.
    
    Change-Id: I19af5b64f73369126020e15421c34cad5bbcfbf8
    Reviewed-on: https://go-review.googlesource.com/21442
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit af74dca49732d5953331d14dc06ec635838c357c
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Mar 30 23:56:49 2016 -0400

    syscall: add support for s390x
    
    On s390x char is unsigned. We cannot force it to be signed using
    -fsigned-char (see arm64) because the s390x gccgo API is already
    public and we need to stick as closely as possible to it to avoid
    breaking existing projects. In order to match the gccgo API we
    also force the RawSockaddr.Data and RawSockaddrUnix.Path fields
    to be signed.
    
    This CL adds a post-processing pass (mkpost.go) to mkall.sh in
    order to export the types of fields in PtraceRegs on s390x
    without affecting the API on other platforms. The types of these
    fields match their counterparts in gccgo. mkpost.go also cleans
    up the Pad_cgo* fields and X_* fields (these fields are not
    exported by gccgo currently). It could be extended to add build
    tags on platforms that need them.
    
    Change-Id: I66bdf5b86ec98af70baf666989027bb354df9e3e
    Reviewed-on: https://go-review.googlesource.com/20961
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fe5be5aced063a16c5c36051045f8f8af313bed9
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Thu Mar 31 18:34:02 2016 +0300

    cmd/link: more idiomatic object reader
    
    name       old secs    new secs    delta
    LinkCmdGo   0.52 ± 3%   0.52 ± 7%    ~     (p=0.325 n=93+100)
    
    name       old MaxRSS  new MaxRSS  delta
    LinkCmdGo   120k ± 1%   118k ± 4%  -1.10%   (p=0.000 n=87+96)
    
    Change-Id: I967660b8dc6036d28eeea1b6b30f400fadd57b05
    Reviewed-on: https://go-review.googlesource.com/21372
    Run-TryBot: Shahar Kohanim <skohanim@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7a8caf7d43886f2b546c4b3b5439dee93f006918
Author: Eric Engestrom <eric@engestrom.ch>
Date:   Sun Apr 3 12:43:27 2016 +0100

    all: fix spelling mistakes
    
    Signed-off-by: Eric Engestrom <eric@engestrom.ch>
    
    Change-Id: I91873aaebf79bdf1c00d38aacc1a1fb8d79656a7
    Reviewed-on: https://go-review.googlesource.com/21433
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1f7e55e418659dc3b5fe66792b85807a7065144f
Author: Russ Cox <rsc@golang.org>
Date:   Mon Mar 14 20:23:22 2016 -0400

    path, path/filepath: add Join example with joined rooted path
    
    This makes clear that Go's path.Join and filepath.Join are different
    from the Python os.path.join (and perhaps others).
    
    Requested in private mail.
    
    Change-Id: Ie5dfad8a57f9baa5cca31246af1fd4dd5b1a64ee
    Reviewed-on: https://go-review.googlesource.com/20711
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 29a6149e67a9c382938ffb40102fb989a0a6db48
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sat Mar 19 00:23:17 2016 -0400

    cmd/link/internal/s390x: add s390x support
    
    Supports basic internal linking, external linking and shared library
    linking.
    
    Change-Id: Ic9693dd94df561b0f9df9880009b1e8ab9d59b92
    Reviewed-on: https://go-review.googlesource.com/20879
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 7c15b2ab4bfec46b07794c5406a438f993cdc56e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Apr 3 00:44:39 2016 +0000

    os: make IsExists also recognize syscall.ENOTEMPTY
    
    And adds missing tests.
    
    Fixes #14970
    
    Change-Id: I0dba02603bc245f555498cb5dd3e0a9d87c52353
    Reviewed-on: https://go-review.googlesource.com/21467
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0656da910a1750921961b0955f9150f326199847
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Apr 3 01:34:29 2016 +0000

    fmt: hold on to all free buffers, regardless of size
    
    This code made sense before fmt switched to using sync.Pool, but a
    sync.Pool clears all items on GC, so not reusing something based on
    size is just a waste of memory.
    
    Change-Id: I201312b0ee6c572ff3c0ffaf71e42623a160d23f
    Reviewed-on: https://go-review.googlesource.com/21480
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 163ff700b8ac3192fa1cb1424e5facf060683dd2
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 16:57:54 2016 -0400

    cmd/link/internal/ld: add s390x support
    
    Introduces the new relocation variant RV_390_DBL which indicates
    that the relocation value should be shifted right by 1 (to make
    it 2-byte aligned).
    
    Change-Id: I03fa96b4759ee19330c5298c3720746622fb1a03
    Reviewed-on: https://go-review.googlesource.com/20878
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 29267c2131495585ba047a0c55d4e244757a3708
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Apr 2 16:26:30 2016 -0700

    cmd/compile: add Type.ChanDir
    
    Generated with eg.
    
    Passes toolstash -cmp.
    
    Change-Id: I3af35191e73a558080f777a4eed93bcec7dfe1f5
    Reviewed-on: https://go-review.googlesource.com/21469
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4ae4e81c2c14d4b36768d8d44b440c95f76411db
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Apr 2 15:24:32 2016 -0700

    compress/gzip: fix Reader.Reset
    
    Rather than specifying every field that should be cleared in Reset,
    it is better to just zero the entire struct and only preserve or set the
    fields that we actually care about. This ensures that the Header field
    is reset for the next use.
    
    Fixes #15077
    
    Change-Id: I41832e506d2d64c62b700aa1986e7de24a577511
    Reviewed-on: https://go-review.googlesource.com/21465
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 27ebc84716f19e1c5b21e3a14de3204d19f28499
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Sat Apr 2 10:29:11 2016 +0200

    cmd/compile: handle non-negatives in prove
    
    Handle this case:
    if 0 <= i && i < len(a) {
            use a[i]
    }
    
    Shaves about 5k from pkg/tools/linux_amd64/*.
    
    Change-Id: I6675ff49aa306b0d241b074c5738e448204cd981
    Reviewed-on: https://go-review.googlesource.com/21431
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 72c1180852d5b059cd1e51d1db1956ea208b7f2f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 30 23:08:44 2016 -0700

    net: don't do DNS for onion and local addresses
    
    Fixes #13705
    
    Change-Id: I86c60c78ce0394f830f904c9cba83ebbf3efc046
    Reviewed-on: https://go-review.googlesource.com/21328
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0d40dfa745b176a83d91cf0981bdbd3a92e2e547
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Apr 1 18:11:26 2016 -0700

    compress/gzip: cleanup gzip package
    
    Changes made:
    * Reader.flg is not used anywhere else other than readHeader and
    does not need to be stored.
    * Store Reader.digest and Writer.digest as uint32s rather than as
    a hash.Hash32 and use the crc32.Update function instead. This simplifies
    initialization logic since the zero value of uint32 is the initial
    CRC-32 value. There are no performance detriments to doing this since
    the hash.Hash32 returned by crc32 simply calls crc32.Update as well.
    * s/[0:/[:/            Consistently use shorter notation for slicing.
    * s/RFC1952/RFC 1952/  Consistently use RFC notation.
    
    Change-Id: I55416a19f4836cbed943adaa3f672538ea5d166d
    Reviewed-on: https://go-review.googlesource.com/21429
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ac8d97b6796aad8ca33db9d377064ddb3952a834
Author: Todd Neal <todd@tneal.org>
Date:   Fri Apr 1 23:28:14 2016 -0500

    cmd/compile: fix inlining of switch issue
    
    The issue was seen when inlining an exported function that contained
    a fallthrough statement.
    
    Fixes #15071
    
    Change-Id: I1e8215ad49d57673dba7e8f8bd2ed8ad290dc452
    Reviewed-on: https://go-review.googlesource.com/21452
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 6a0bb87bd0bf0fdf8ddbd35f77a75ebd412f61b0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Apr 2 00:20:13 2016 +0000

    syscall: point to x/sys in DLL loading docs, update syscall generator
    
    Updates the syscall generator for patchset 4 of https://golang.org/cl/21388.
    
    Updates #14959
    
    Change-Id: Icbd6df489887d3dcc076dfc73d4feb1376abaf8b
    Reviewed-on: https://go-review.googlesource.com/21428
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 75a22d0d107d291c2dbb78dce7017cffe6531b49
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 1 16:43:43 2016 -0700

    cmd/compile: eliminate dead code in walkappend
    
    The IsStruct case is meant to handle cases like append(f()) where f's
    result parameters are something like ([]int, int, int). However, at
    this point in the compiler we've already rewritten append(f()) into
    "tmp1, tmp2, tmp3 := f(); append(tmp1, tmp2, tmp3)".
    
    As further evidence, the t.Elem() is not a valid method call for a
    struct type anyway, which would trigger the Fatalf call in Type.Elem
    if this code was ever hit.
    
    Change-Id: Ia066f93df66ee3fadc9a9a0f687be7b5263af163
    Reviewed-on: https://go-review.googlesource.com/21427
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 683448a304a3871039ab44fc01e839f05ac36f05
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Mar 25 06:40:58 2016 +0000

    runtime, syscall: only search for Windows DLLs in the System32 directory
    
    Make sure that for any DLL that Go uses itself, we only look for the
    DLL in the Windows System32 directory, guarding against DLL preloading
    attacks.
    
    (Unless the Windows version is ancient and LoadLibraryEx is
    unavailable, in which case the user probably has bigger security
    problems anyway.)
    
    This does not change the behavior of syscall.LoadLibrary or NewLazyDLL
    if the DLL name is something unused by Go itself.
    
    This change also intentionally does not add any new API surface. Instead,
    x/sys is updated with a LoadLibraryEx function and LazyDLL.Flags in:
        https://golang.org/cl/21388
    
    Updates #14959
    
    Change-Id: I8d29200559cc19edf8dcf41dbdd39a389cd6aeb9
    Reviewed-on: https://go-review.googlesource.com/21140
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 59fc42b230671d083feb68925d9cadc1da1d2616
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Apr 1 15:06:25 2016 -0700

    runtime: allocate mp.cgocallers earlier
    
    Fixes #15061.
    
    Change-Id: I71f69f398d1c5f3a884bbd044786f1a5600d0fae
    Reviewed-on: https://go-review.googlesource.com/21398
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5cab01698a782b28933ac16fdc4c43634b1331d6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Apr 1 14:51:02 2016 -0700

    cmd/compile: rename Node.Int to Node.Int64
    
    gorename -from '"cmd/compile/internal/gc".Node.Int' -to 'Int64'
    
    Change-Id: I2fe3bf9a26ae6b0600d990d0c981e4b8b53020a4
    Reviewed-on: https://go-review.googlesource.com/21426
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 00e5a68c3e948f734c3811051a4bc05f2cc515e3
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 1 13:36:24 2016 -0700

    cmd/compile: more Isfoo Type cleanups
    
    Replace isideal(t) with t.IsUntyped().
    Replace Istype(t, k) with t.IsKind(k).
    Replace isnilinter(t) with t.IsEmptyInterface().
    
    Also replace a lot of t.IsKind(TFOO) with t.IsFoo().
    
    Replacements prepared mechanically with gofmt -w -r.
    
    Passes toolstash -cmp.
    
    Change-Id: Iba48058f3cc863e15af14277b5ff5e729e67e043
    Reviewed-on: https://go-review.googlesource.com/21424
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>

commit 5dd129bcff20e7b7337bd536935fab3b7214db15
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Mar 31 15:18:39 2016 -0700

    cmd/compile: add Type.SetNumElem
    
    This removes all access to Type.Bound
    from outside type.go.
    
    Update sinit to make a new type rather than
    copy and mutate.
    
    Update bimport to create a new slice type
    instead of mutating TDDDFIELD.
    These are rare, so the extra allocs are nominal.
    
    I’m not happy about having a setter,
    but it appears the most practical route
    forward at the moment, and it only has a few uses.
    
    Passes toolstash -cmp.
    
    Change-Id: I174f07c8f336afc656904bde4bdbde4f3ef0db96
    Reviewed-on: https://go-review.googlesource.com/21423
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e504055e7847a933557f94e92c2cfe9092d678f8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Mar 31 14:54:46 2016 -0700

    cmd/compile: use Node.Int more
    
    Generated by eg.
    
    Passes toolstash -cmp.
    
    Change-Id: I7516c211ca9aacf824f74894671dc62d31763b01
    Reviewed-on: https://go-review.googlesource.com/21422
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3a0783c5046eb2d9036671671e89608d9f644d2f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Mar 31 14:46:04 2016 -0700

    cmd/compile: use NumElem instead of Type.Bound
    
    This eliminates all direct reads of Type.Bound
    outside type.go.
    
    Change-Id: I0a9a72539f8f4c0de7f5e05e1821936bf7db5eb7
    Reviewed-on: https://go-review.googlesource.com/21421
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 077902d1a6f03b54e7f0786e33b8f4ca91708f97
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Apr 1 11:22:03 2016 -0700

    cmd/compile: cleanup algtype code
    
    Add AlgKind enum type to represent AFOO values.
    
    Add IsComparable, IsRegularMemory, IncomparableField helper methods to
    codify common higher-level idioms.
    
    Passes toolstash -cmp.
    
    Change-Id: I54c544953997a8ccc72396b3058897edcbbea392
    Reviewed-on: https://go-review.googlesource.com/21420
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 58394fd7d56ff233a5e32aa3001ec8ad5988e8f3
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Apr 1 08:33:25 2016 -0700

    runtime/cgo: only build _cgo_callers if x_cgo_callers is defined
    
    Fixes a problem when using the external linker on Solaris.  The Solaris
    external linker still doesn't work due to issue #14957.
    
    The problem is, for example, with `go test cmd/objdump`:
    
            objdump_test.go:71: go build fmthello.go: exit status 2
                    # command-line-arguments
                    /var/gcc/iant/go/pkg/tool/solaris_amd64/link: running gcc failed: exit status 1
                    Undefined                       first referenced
                     symbol                             in file
                    x_cgo_callers                       /tmp/go-link-355600608/go.o
                    ld: fatal: symbol referencing errors
                    collect2: error: ld returned 1 exit status
    
    Change-Id: I54917cfd5c288ee77ea25c439489bd2c9124fe73
    Reviewed-on: https://go-review.googlesource.com/21392
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 633ab7426a906b72dcf6f1d54e87f4ae926dc4e1
Author: Sebastien Binet <seb.binet@gmail.com>
Date:   Sat Mar 5 13:37:38 2016 +0100

    reflect: implement StructOf
    
    This change exposes a facility to create new struct types from a slice of
    reflect.StructFields.
    
    - reflect: first stab at implementing StructOf
    - reflect: tests for StructOf
    
    StructOf creates new struct types in the form of structTypeWithMethods
    to accomodate the GC (especially the uncommonType.methods slice field.)
    
    Creating struct types with embedded interfaces with unexported methods
    is not supported yet and will panic.
    Creating struct types with non-ASCII field names or types is not yet
    supported (see #15064.)
    
    Binaries' sizes for linux_amd64:
    
    old=tip (0104a31)
    
                old bytes     new bytes     delta
    bin/go      9911336       9915456       +0.04%
    reflect     781704        830048        +6.18%
    
    Updates #5748.
    Updates #15064.
    
    Change-Id: I3b8fd4fadd6ce3b1b922e284f0ae72a3a8e3ce44
    Reviewed-on: https://go-review.googlesource.com/9251
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>

commit 014f3e1e094c4a173ce503e5dfe1bc0619f2f4a8
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Thu Mar 31 12:59:05 2016 +0300

    cmd/internal/obj: more idiomatic object writer
    
    Change-Id: I41722ee605ea76a6b52e8a7e1e10f2293cef1a7a
    Reviewed-on: https://go-review.googlesource.com/21371
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit b91cc5303364c4aae758ff1f0b4efc66b7802700
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Mar 2 12:58:27 2016 +0100

    cmd/compile/internal/ssa: BCE for induction variables
    
    There are 5293 loop in the main go repository.
    A survey of the top most common for loops:
    
         18 for __k__ := 0; i < len(sa.Addr); i++ {
         19 for __k__ := 0; ; i++ {
         19 for __k__ := 0; i < 16; i++ {
         25 for __k__ := 0; i < length; i++ {
         30 for __k__ := 0; i < 8; i++ {
         49 for __k__ := 0; i < len(s); i++ {
         67 for __k__ := 0; i < n; i++ {
        376 for __k__ := range __slice__ {
        685 for __k__, __v__ := range __slice__ {
       2074 for __, __v__ := range __slice__ {
    
    The algorithm to find induction variables handles all cases
    with an upper limit. It currently doesn't find related induction
    variables such as c * ind or c + ind.
    
    842 out of 22954 bound checks are removed for src/make.bash.
    1957 out of 42952 bounds checks are removed for src/all.bash.
    
    Things to do in follow-up CLs:
    * Find the associated pointer for `for _, v := range a {}`
    * Drop the NilChecks on the pointer.
    * Replace the implicit induction variable by a loop over the pointer
    
    Generated garbage can be reduced if we share the sdom between passes.
    
    % benchstat old.txt new.txt
    name       old time/op     new time/op     delta
    Template       337ms ± 3%      333ms ± 3%    ~             (p=0.258 n=9+9)
    GoTypes        1.11s ± 2%      1.10s ± 2%    ~           (p=0.912 n=10+10)
    Compiler       5.25s ± 1%      5.29s ± 2%    ~             (p=0.077 n=9+9)
    MakeBash       33.5s ± 1%      34.1s ± 2%  +1.85%          (p=0.011 n=9+9)
    
    name       old alloc/op    new alloc/op    delta
    Template      63.6MB ± 0%     63.9MB ± 0%  +0.52%         (p=0.000 n=10+9)
    GoTypes        218MB ± 0%      219MB ± 0%  +0.59%         (p=0.000 n=10+9)
    Compiler       978MB ± 0%      985MB ± 0%  +0.69%        (p=0.000 n=10+10)
    
    name       old allocs/op   new allocs/op   delta
    Template        582k ± 0%       583k ± 0%  +0.10%        (p=0.000 n=10+10)
    GoTypes        1.78M ± 0%      1.78M ± 0%  +0.12%        (p=0.000 n=10+10)
    Compiler       7.68M ± 0%      7.69M ± 0%  +0.05%        (p=0.000 n=10+10)
    
    name       old text-bytes  new text-bytes  delta
    HelloSize       581k ± 0%       581k ± 0%  -0.08%        (p=0.000 n=10+10)
    CmdGoSize      6.40M ± 0%      6.39M ± 0%  -0.08%        (p=0.000 n=10+10)
    
    name       old data-bytes  new data-bytes  delta
    HelloSize      3.66k ± 0%      3.66k ± 0%    ~     (all samples are equal)
    CmdGoSize       134k ± 0%       134k ± 0%    ~     (all samples are equal)
    
    name       old bss-bytes   new bss-bytes   delta
    HelloSize       126k ± 0%       126k ± 0%    ~     (all samples are equal)
    CmdGoSize       149k ± 0%       149k ± 0%    ~     (all samples are equal)
    
    name       old exe-bytes   new exe-bytes   delta
    HelloSize       947k ± 0%       946k ± 0%  -0.01%        (p=0.000 n=10+10)
    CmdGoSize      9.92M ± 0%      9.91M ± 0%  -0.06%        (p=0.000 n=10+10)
    
    Change-Id: Ie74bdff46fd602db41bb457333d3a762a0c3dc4d
    Reviewed-on: https://go-review.googlesource.com/20517
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>

commit ea306ae625d001a43ef20163739593a21be51f97
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Dec 11 17:16:48 2015 -0800

    runtime: support symbolic backtrace of C code in a cgo crash
    
    The new function runtime.SetCgoTraceback may be used to register stack
    traceback and symbolizer functions, written in C, to do a stack
    traceback from cgo code.
    
    There is a sample implementation of runtime.SetCgoSymbolizer at
    github.com/ianlancetaylor/cgosymbolizer.  Just importing that package is
    sufficient to get symbolic C backtraces.
    
    Currently only supported on linux/amd64.
    
    Change-Id: If96ee2eb41c6c7379d407b9561b87557bfe47341
    Reviewed-on: https://go-review.googlesource.com/17761
    Reviewed-by: Austin Clements <austin@google.com>

commit b64f549ba95fb9115afb1db8ae594b9442c45a6e
Author: David Chase <drchase@google.com>
Date:   Wed Mar 30 14:14:00 2016 -0400

    cmd/compile: ignore OXXX nodes in closure captured vars list
    
    Added a debug flag "-d closure" to explain compilation of
    closures (should this be done some other way? Should we
    rewrite the "-m" flag to "-d escapes"?)  Used this to
    discover that cause was an OXXX node in the captured vars
    list, and in turn noticed that OXXX nodes are explicitly
    ignored in all other processing of captured variables.
    
    Couldn't figure out a reproducer, did verify that this OXXX
    was not caused by an unnamed return value (which is one use
    of these).  Verified lack of heap allocation by examining -S
    output.
    
    Assembly:
    (runtime/mgc.go:1371) PCDATA $0, $2
    (runtime/mgc.go:1371) CALL "".notewakeup(SB)
    (runtime/mgc.go:1377) LEAQ "".gcBgMarkWorker.func1·f(SB), AX
    (runtime/mgc.go:1404) MOVQ AX, (SP)
    (runtime/mgc.go:1404) MOVQ "".autotmp_2242+88(SP), CX
    (runtime/mgc.go:1404) MOVQ CX, 8(SP)
    (runtime/mgc.go:1404) LEAQ go.string."GC worker (idle)"(SB), AX
    (runtime/mgc.go:1404) MOVQ AX, 16(SP)
    (runtime/mgc.go:1404) MOVQ $16, 24(SP)
    (runtime/mgc.go:1404) MOVB $20, 32(SP)
    (runtime/mgc.go:1404) MOVQ $0, 40(SP)
    (runtime/mgc.go:1404) PCDATA $0, $2
    (runtime/mgc.go:1404) CALL "".gopark(SB)
    
    Added a check for compiling_runtime to ensure that this is
    caught in the future.  Added a test to test the check.
    Verified that 1.5.3 did NOT reject the test case when
    compiled with -+ flag, so this is not a recently added bug.
    
    Cause of bug is two-part -- there was no leaking closure
    detection ever, and instead it relied on capture-of-variables
    to trigger compiling_runtime test, but closures improved in
    1.5.3 so that mere capture of a value did not also capture
    the variable, which thus allowed closures to escape, as well
    as this case where the escape was spurious.  In
    fixedbugs/issue14999.go, compare messages for f and g;
    1.5.3 would reject g, but not f.  1.4 rejects both because
    1.4 heap-allocates parameter x for both.
    
    Fixes #14999.
    
    Change-Id: I40bcdd27056810628e96763a44f2acddd503aee1
    Reviewed-on: https://go-review.googlesource.com/21322
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 1cb3044c9fcd88e1557eca1bf35845a4108bc1db
Author: Dominik Honnef <dominik@honnef.co>
Date:   Fri Apr 1 03:49:43 2016 +0200

    all: use bytes.Equal, bytes.Contains and strings.Contains
    
    Change-Id: Iba82a5bd3846f7ab038cc10ec72ff6bcd2c0b484
    Reviewed-on: https://go-review.googlesource.com/21377
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 42d62946946eb0e6dc55fe76973c84eafd113154
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Apr 1 11:49:25 2016 +1100

    crypto/x509: fix build break on darwin/{arm,arm64}
    
    Fix build error on darwin/{arm,arm64} caused by a62ae9f6.
    
    Change-Id: I7da4d147a529b11b3e71352a9276a57595ec4b05
    Reviewed-on: https://go-review.googlesource.com/21356
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f76b793784cc8c89ca1b28002846a8cd76a90fb5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 00:41:54 2016 -0700

    net/http/httputil: deprecate Client+ServerConn harder, use Deprecated syntax
    
    Also cleans up return parameter stutter and missing periods.
    
    Change-Id: I47f5c230227ddfd1b105d5e06842f89ffea50760
    Reviewed-on: https://go-review.googlesource.com/21362
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit aecfcd827edb4a7ab6248668f7329a330e1f0e4a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 05:36:20 2016 -0700

    net/http: clean up the Client redirect code, document Body.Close rules more
    
    Issue #8633 (and #9134) noted that we didn't document the rules about
    closing the Response.Body when Client.Do returned both a non-nil
    *Response and a non-nil error (which can only happen when the user's
    CheckRedirect returns an error).
    
    In the process of investigating, I cleaned this code up a bunch, but
    no user-visible behavior should have changed, except perhaps some
    better error messages in some cases.
    
    It turns out it's always been the case that when a CheckRedirect error
    occurs, the Response.Body is already closed. Document that.
    
    And the new code makes that more obvious too.
    
    Fixes #8633
    
    Change-Id: Ibc40cc786ad7fc4e0cf470d66bb559c3b931684d
    Reviewed-on: https://go-review.googlesource.com/21364
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 92bb694a493723d901a253bc88be53a207c8d550
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 31 13:58:33 2016 -0700

    cmd/compile: s.f aliases itself
    
    The change in 20907 fixed varexpr but broke aliased.  After that change,
    a reference to a field in a struct would not be seen as aliasing itself.
    Before that change, it would, but only because all fields in a struct
    aliased everything.
    
    This CL changes the compiler to consider all references to a field as
    aliasing all other fields in that struct.  This is imperfect--a
    reference to one field does not alias another field--but is a simple fix
    for the immediate problem.  A better fix would require tracking the
    specific fields as well.
    
    Fixes #15042.
    
    Change-Id: I5c95c0dd7b0699e53022fce9bae2e8f50d6d1d04
    Reviewed-on: https://go-review.googlesource.com/21390
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 1bf779a44a924650885111c6161c0c5a22968dbf
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 04:03:57 2016 -0700

    net/http/httputil: make ReverseProxy return 502 Bad Gateway instead of 500
    
    ... when the backend can't be reached.
    
    Fixes #9864
    
    Change-Id: I9e4814824943060e0101b6236d6dfd8d7822b4c7
    Reviewed-on: https://go-review.googlesource.com/21363
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a3537522d67a1cc01f0e533acb8384341e80f5e0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 05:49:23 2016 -0700

    net/http: update bundled http2
    
    Updates x/net/http2 to git rev 31df19d6 for changes since Go 1.6.
    
    The main change was https://go-review.googlesource.com/19726 (move
    merging of HEADERS and CONTINUATION into Framer), but there were a few
    garbage reduction changes too.
    
    Change-Id: I882443d20749f8638f637a2835efe92538c95d31
    Reviewed-on: https://go-review.googlesource.com/21365
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 36feb1a00aef40b793c173859aab49f8080b71fc
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 00:06:27 2016 -0700

    net/http: limit Transport's reading of response header bytes from servers
    
    The default is 10MB, like http2, but can be configured with a new
    field http.Transport.MaxResponseHeaderBytes.
    
    Fixes #9115
    
    Change-Id: I01808ac631ce4794ef2b0dfc391ed51cf951ceb1
    Reviewed-on: https://go-review.googlesource.com/21329
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 7a4211bc1f03672422ff0d761d3bf9d9f97b8997
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Fri Apr 1 00:54:13 2016 +0200

    cmd/compile: constant fold ANDs.
    
    ANDQConst show up occassionally because of right shifting lowering.
    ORs and XORs are already folded properly during generic.
    
    Change-Id: I2f9134679555029c641264ce5333d70e167c65f7
    Reviewed-on: https://go-review.googlesource.com/21375
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ec5083e49bea8fdd25a3df9b93f35374f524c7df
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Fri Apr 1 00:33:29 2016 +0200

    cmd/compile: combine SHLQ into loads and stores
    
    Very common, cuts about 70k from pkg/tools/linux_amd64/* binaries.
    
    Change-Id: Ied0c049e56e56a56810c781435d79027fbcaf274
    Reviewed-on: https://go-review.googlesource.com/21374
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>

commit 8677cad1992af3ba4ce7cdfdaca8bcdbf320eaa8
Author: Christopher Nelson <nadiasvertex@gmail.com>
Date:   Thu Mar 31 16:22:54 2016 -0400

    cmd/link: Replace fmt.Sprintf with filepath.Join
    
    In a number of places the code was joining filepaths explicitly with
    "/", instead of using filepath.Join. This may cause problems on Windows
    (or other) platforms.
    
    This is in support of https://go-review.googlesource.com/#/c/18057
    
    Change-Id: Ieb1334f35ddb2e125be690afcdadff8d7b0ace10
    Reviewed-on: https://go-review.googlesource.com/21369
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c27efce66bce7534dbb357ac1779bbc08395b267
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Mar 29 22:04:03 2016 -0700

    compress/flate: make Reader.Read return io.EOF eagerly
    
    Rather than checking the block final bit on the next invocation
    of nextBlock, we check it at the termination of the current block.
    This ensures that we return (n, io.EOF) instead of (0, io.EOF)
    more frequently for most streams.
    
    However, there are certain situations where an eager io.EOF is not done:
    1) We previously returned from Read because the write buffer of the internal
    dictionary was full, and it just so happens that there is no more data
    remaining in the stream.
    2) There exists a [non-final, empty, raw block] after all blocks that
    actually contain uncompressed data. We cannot return io.EOF eagerly here
    since it would break flushing semantics.
    
    Both situations happen infrequently, but it is still important to note that
    this change does *not* guarantee that flate will *always* return (n, io.EOF).
    
    Furthermore, this CL makes no changes to the pattern of ReadByte calls
    to the underlying io.ByteReader.
    
    Below is the motivation for this change, pulling the text from
    @bradfitz's CL/21290:
    
    net/http and other things work better when io.Reader implementations
    return (n, io.EOF) at the end, instead of (n, nil) followed by (0,
    io.EOF). Both are legal, but the standard library has been moving
    towards n+io.EOF.
    
    An investigation of net/http connection re-use in
    https://github.com/google/go-github/pull/317 revealed that with gzip
    compression + http/1.1 chunking, the net/http package was not
    automatically reusing the underlying TCP connections when the final
    EOF bytes were already read off the wire. The net/http package only
    reuses the connection if the underlying Readers (many of them nested
    in this case) all eagerly return io.EOF.
    
    Previous related CLs:
        https://golang.org/cl/76400046 - tls.Reader
        https://golang.org/cl/58240043 - http chunked reader
    
    In addition to net/http, this behavior also helps things like
    ioutil.ReadAll (see comments about performance improvements in
    https://codereview.appspot.com/49570044)
    
    Updates #14867
    Updates google/go-github#317
    
    Change-Id: I637c45552efb561d34b13ed918b73c660f668378
    Reviewed-on: https://go-review.googlesource.com/21302
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4a7aba775d6886109e0d4117d8c0a02112568686
Author: Keith Randall <khr@golang.org>
Date:   Mon Mar 28 11:25:17 2016 -0700

    cmd/compile: better job of naming compound types
    
    Compound AUTO types weren't named previously.  That was because live
    variable analysis (plive.go) doesn't handle spilling to compound types.
    It can't handle them because there is no valid place to put VARDEFs when
    regalloc is spilling compound types.
    
    compound types = multiword builtin types: complex, string, slice, and
    interface.
    
    Instead, we split named AUTOs into individual one-word variables.  For
    example, a string s gets split into a byte ptr s.ptr and an integer
    s.len.  Those two variables can be spilled to / restored from
    independently.  As a result, live variable analysis can handle them
    because they are one-word objects.
    
    This CL will change how AUTOs are described in DWARF information.
    Consider the code:
    
    func f(s string, i int) int {
        x := s[i:i+5]
        g()
        return lookup(x)
    }
    
    The old compiler would spill x to two consecutive slots on the stack,
    both named x (at offsets 0 and 8).  The new compiler spills the pointer
    of x to a slot named x.ptr.  It doesn't spill x.len at all, as it is a
    constant (5) and can be rematerialized for the call to lookup.
    
    So compound objects may not be spilled in their entirety, and even if
    they are they won't necessarily be contiguous.  Such is the price of
    optimization.
    
    Re-enable live variable analysis tests.  One test remains disabled, it
    fails because of #14904.
    
    Change-Id: I8ef2b5ab91e43a0d2136bfc231c05d100ec0b801
    Reviewed-on: https://go-review.googlesource.com/21233
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit e55896b9f421aeb6c33056a7cf6d7f90f8e36365
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 00:31:58 2016 -0700

    net/http, net/http/httputil: rename lk to mu
    
    The conventional name for a sync.Mutex is "mu".
    
    These "lk" names date back to a time before conventions.
    
    Change-Id: Iee57f9f4423d04269e1125b5d82455c453aac26f
    Reviewed-on: https://go-review.googlesource.com/21361
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9f66636c93affa363f59196cacd160fa17deeb96
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 31 14:09:04 2016 -0700

    cmd/compile: don't put SP in index slot
    
    For idx1 ops, SP can appear in the index slot.
    Swap SP into the base register slot so we can encode
    the instruction.
    
    Fixes #15053
    
    Change-Id: I19000cc9d6c86c7611743481e6e2cb78b1ef04eb
    Reviewed-on: https://go-review.googlesource.com/21384
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 47c9e139aed3e6d24ee980828835fb03229272ff
Author: Keith Randall <khr@golang.org>
Date:   Wed Mar 23 10:20:44 2016 -0700

    cmd/compile: extend prove pass to handle constant comparisons
    
    Find comparisons to constants and propagate that information
    down the dominator tree.  Use it to resolve other constant
    comparisons on the same variable.
    
    So if we know x >= 7, then a x > 4 condition must return true.
    
    This change allows us to use "_ = b[7]" hints to eliminate bounds checks.
    
    Fixes #14900
    
    Change-Id: Idbf230bd5b7da43de3ecb48706e21cf01bf812f7
    Reviewed-on: https://go-review.googlesource.com/21008
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>

commit f5bd3556f51ce607daa0996bacd1d22563d65ea4
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Wed Mar 30 17:54:11 2016 +0300

    hash/crc64: Add tests for ECMA polynomial
    
    Currently we test crc64 only with ISO polynomial.
    
    Change-Id: Ibc5e202db3b960369cbbb18e31eb0fea07b54dba
    Reviewed-on: https://go-review.googlesource.com/21309
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 11d916b157415de568a619eb2970ff44a3910839
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 31 11:42:35 2016 -0700

    cmd/compile: remove Node.Nointerface field
    
    We already keep the entire pragma bitset in n.Func.Pragma, so there's
    no need to track Nointerface separately.
    
    Passes toolstash -cmp.
    
    Change-Id: Ic027ece477fcf63b0c1df128a08b89ef0f34fd58
    Reviewed-on: https://go-review.googlesource.com/21381
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7c4d53c2c8d8ce21d3a3fe999800748d91809c79
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 31 12:30:20 2016 -0700

    cmd/compile: stop generating garbage when checking map key types
    
    Change-Id: Ib500ee92ae1a3d15f7c9f3f46d238b75184b4304
    Reviewed-on: https://go-review.googlesource.com/21382
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 00289c296c52eb1a849f28bc6d60fef5898cb7b1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Mar 31 09:29:32 2016 -0700

    cmd/compile: dump stack trace in Fatalf during development
    
    See discussion in #15029.
    
    Change-Id: I5cc8be5737ddb7c1f5e4a6cd92cf557af45e961d
    Reviewed-on: https://go-review.googlesource.com/21347
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 43a274fd67747a70bb7c2f97db219f5d9ee8c07c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Mar 30 11:15:01 2016 -0400

    cmd/compile: include pkgPath on all struct types
    
    Fixes #15026.
    
    Change-Id: I61ed71152b99973270d79264d1e8f466f7343c02
    Reviewed-on: https://go-review.googlesource.com/21286
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e775b8df7a073824e445b64742f3bc4dc4fa6f3d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Mar 31 09:29:39 2016 -0700

    cmd/compile: add sliceBound
    
    Add a constant for the magic -1 for slice bounds.
    Use it.
    Enforce more aggressively that bounds must be
    slice, ddd, or non-negative.
    Remove ad hoc check in plive.go.
    Check bounds before constructing an array type
    when typechecking.
    
    All changes are manual.
    
    Passes toolstash -cmp.
    
    Change-Id: I9fd9cc789d7d4b4eea3b30b24037a254d3788add
    Reviewed-on: https://go-review.googlesource.com/21348
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 4b95575bd4baa683bf1c5b75bd42adf8ab2871af
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 31 10:57:48 2016 -0700

    cmd/compile: fix build
    
    Pushed from an old client by mistake.  These are the
    missing changes.
    
    Change-Id: Ia8d61c5c0bde907369366ea9ea98711823342803
    Reviewed-on: https://go-review.googlesource.com/21349
    Reviewed-by: Todd Neal <todd@tneal.org>

commit af517da2f918835176862aec8690ddc6bb783af1
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 31 09:34:35 2016 -0700

    cmd/compile: Add more idx1 load/store instructions
    
    Helpful for indexed loads and stores when the stride is not equal to
    the size being loaded/stored.
    
    Update #7927
    
    Change-Id: I8714dd4c7b18a96a611bf5647ee21f753d723945
    Reviewed-on: https://go-review.googlesource.com/21346
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit b81f2f106f68b771518f40390a69f834717f17d1
Author: Keith Randall <khr@golang.org>
Date:   Mon Mar 28 21:45:33 2016 -0700

    cmd/compile: place combined loads at the location of the last byte load
    
    We need to make sure all the bounds checks pass before issuing
    a load which combines several others.  We do this by issuing the
    combined load at the last load's block, where "last" = closest to
    the leaf of the dominator tree.
    
    Fixes #15002
    
    Change-Id: I7358116db1e039a072c12c0a73d861f3815d72af
    Reviewed-on: https://go-review.googlesource.com/21246
    Reviewed-by: Todd Neal <todd@tneal.org>

commit b83618f964fe496929fe2ce48a262dbed7e680b1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 30 16:59:53 2016 -0700

    cmd/compile: encapsulate Type.Nname
    
    Generated by eg, manually fixed up.
    
    I’m not thrilled about having a setter,
    but given the variety of contexts in which this
    gets fiddled with, it is the cleanest
    available alternative.
    
    Change-Id: Ibdf23e638fe0bdabded014c9e59d557fab8c955f
    Reviewed-on: https://go-review.googlesource.com/21341
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 139891e81517231647ad48bade57604021b3fd1d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 00:28:10 2016 -0700

    net/http/httptest: clean up unnecessary goroutine
    
    Finishes cleanup which was too late to do when discovered during the
    Go 1.6 cycle.
    
    Fixes #14291
    
    Change-Id: Idc69fadbba10baf246318a22b366709eff088a75
    Reviewed-on: https://go-review.googlesource.com/21360
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit e6066711a0f92824ded94849e4f1085c2ba612c3
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 31 02:04:12 2016 -0700

    cmd/compile, runtime: fix pedantic int->string conversions
    
    Previously, cmd/compile rejected constant int->string conversions if
    the integer value did not fit into an "int" value. Also, runtime
    incorrectly truncated 64-bit values to 32-bit before checking if
    they're a valid Unicode code point. According to the Go spec, both of
    these cases should instead yield "\uFFFD".
    
    Fixes #15039.
    
    Change-Id: I3c8a3ad9a0780c0a8dc1911386a523800fec9764
    Reviewed-on: https://go-review.googlesource.com/21344
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e7538df7011e3767e9350655ea51edb894d61423
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Fri Mar 4 02:54:51 2016 +0900

    net/mail: throw error when multiple addresses are given to ParseAddress
    
    Fixes #14610
    
    Change-Id: I3e57dd60b531c1495ea3bc37ef707a1e4e644baa
    Reviewed-on: https://go-review.googlesource.com/20180
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a62ae9f62fcfca02075b70e6e0aa757f4fd8f5ec
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 30 16:41:18 2016 +1100

    crypto/x509: add SystemCertPool, refactor system cert pool loading
    
    This exports the system cert pool.
    
    The system cert loading was refactored to let it be run multiple times
    (so callers get a copy, and can't mutate global state), and also to
    not discard errors.
    
    SystemCertPool returns an error on Windows. Maybe it's fixable later,
    but so far we haven't used it, since the system verifies TLS.
    
    Fixes #13335
    
    Change-Id: I3dfb4656a373f241bae8529076d24c5f532f113c
    Reviewed-on: https://go-review.googlesource.com/21293
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 71ab3c1ccfebbc065c10531e4846f02d44f4be0d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 30 22:56:00 2016 -0700

    cmd/link: remove -H elf flag
    
    We create appropriate ELF files automatically based on GOOS. There's
    no point in supporting -H elf flag, particularly since we need to emit
    different flavors of ELF depending on GOOS anyway.
    
    If that weren't reason enough, -H elf appears to be broken since at
    least Go 1.4. At least I wasn't able to find a way to make use of it.
    
    As best I can tell digging through commit history, -H elf is just an
    artifact leftover from Plan 9's 6l linker.
    
    Change-Id: I7393caaadbc60107bbd6bc99b976a4f4fe6b5451
    Reviewed-on: https://go-review.googlesource.com/21343
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 758447cdc94e4ae0b5d26a784a930403a633cd03
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 13:51:17 2016 +1100

    test/fixedbugs: add test for divide by zero being optimized away
    
    This only tests amd64 because it's currently broken on non-SSA
    backends.
    
    Fixes #8613
    
    Change-Id: I6bc501c81c395e533bb9c7335789750e0c6b7a8f
    Reviewed-on: https://go-review.googlesource.com/21325
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a6557a05a03490af3b26f97f9a4ce99c7c773fe5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 30 22:11:41 2016 -0700

    net/http: allow Handlers to handle http2 upgrade PRI requests
    
    The http2 spec defines a magic string which initates an http2 session:
    
        "PRI * HTTP/2.0\r\n\r\nSM\r\n\r\n"
    
    It was intentionally chosen to kinda look like an HTTP request, but
    just different enough to break things not ready for it. This change
    makes Go ready for it.
    
    Notably: Go now accepts the request header (the prefix "PRI *
    HTTP/2.0\r\n\r\n") as a valid request, even though it doesn't have a
    Host header. But we now mark it as "Connection: close" and teach the
    Server to never read a second request from the connection once that's
    seen. If the http.Handler wants to deal with the upgrade, it has to
    hijack the request, read out the "body", compare it against
    "SM\r\n\r\n", and then speak http2. One of the new tests demonstrates
    that hijacking.
    
    Fixes #14451
    Updates #14141 (h2c)
    
    Change-Id: Ib46142f31c55be7d00c56fa2624ec8a232e00c43
    Reviewed-on: https://go-review.googlesource.com/21327
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0026cb788b54e3108534992d98b7fec0cf96de17
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 31 14:33:46 2016 +1100

    net/http: validate transmitted header fields
    
    This makes sure the net/http package never attempts to transmit a
    bogus header field key or value and instead fails fast with an error
    to the user, rather than relying on the server to maybe return an
    error.
    
    It's still possible to use x/net/http2.Transport directly to send
    bogus stuff. This change only stops h1 & h2 usage via the net/http
    package. A future change will update x/net/http2.
    
    This change also moves some code from request.go to lex.go, which in a
    separate future change should be moved so it can be shared with http2
    to reduce code bloat.
    
    Updates #14048
    
    Change-Id: I0a44ae1ab357fbfcbe037aa4b5d50669a87f2856
    Reviewed-on: https://go-review.googlesource.com/21326
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b4117995e3e01a669be737c36033c2393858d555
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Mar 23 17:10:18 2016 -0700

    cmd/pprof: use DWARF info to lookup unknown PC addresses
    
    Test to follow in a separate CL that arranges for the runtime package to
    store non-Go addresses in a CPU profile.
    
    Change-Id: I33ce1d66b77340b1e62b54505fc9b1abcec108a9
    Reviewed-on: https://go-review.googlesource.com/21055
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 4b209dbf0bf3e5fd4cffda1e11f11bf45ddf212d
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 29 21:25:33 2016 -0700

    runtime: don't use REP;MOVSB if CPUID doesn't say it is fast
    
    Only use REP;MOVSB if:
     1) The CPUID flag says it is fast, and
     2) The pointers are unaligned
    Otherwise, use REP;MOVSQ.
    
    Update #14630
    
    Change-Id: I946b28b87880c08e5eed1ce2945016466c89db66
    Reviewed-on: https://go-review.googlesource.com/21300
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit 1a9373bc570cf408cecdfab5d531e8041f354a54
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Mar 31 11:58:19 2016 +1100

    cmd/compile/internal/gc: avoid append when building Type fields
    
    As a followup to CL 21296, avoid append operations when constructing the
    fields of a Type if the length is known beforehand
    
    This also includes some small scoping driveby cleanups, and a change to
    tointerface0 to avoid iterating over the field list twice.
    
    compilebench shows a very small reduction in allocations.
    
     name      old time/op    new time/op    delta
    Template     364ms ± 5%     363ms ± 4%    ~     (p=0.945 n=20+19)
    Unicode      182ms ±11%     185ms ±12%    ~     (p=0.445 n=20+20)
    GoTypes      1.14s ± 2%     1.14s ± 3%    ~     (p=0.221 n=20+20)
    Compiler     5.85s ± 2%     5.84s ± 2%    ~     (p=0.369 n=20+20)
    
    name      old alloc/op   new alloc/op   delta
    Template    56.7MB ± 0%    56.7MB ± 0%  -0.04%  (p=0.000 n=20+20)
    Unicode     38.3MB ± 0%    38.3MB ± 0%    ~     (p=0.728 n=20+19)
    GoTypes      180MB ± 0%     180MB ± 0%  -0.02%  (p=0.000 n=20+20)
    Compiler     812MB ± 0%     812MB ± 0%  -0.02%  (p=0.000 n=19+20)
    
    name      old allocs/op  new allocs/op  delta
    Template      482k ± 0%      480k ± 0%  -0.34%  (p=0.000 n=20+20)
    Unicode       377k ± 0%      377k ± 0%  -0.04%  (p=0.010 n=20+20)
    GoTypes      1.36M ± 0%     1.35M ± 0%  -0.24%  (p=0.000 n=20+20)
    Compiler     5.47M ± 0%     5.46M ± 0%  -0.11%  (p=0.000 n=20+18)
    
    Change-Id: Ibb4c40229fa3816acd8de98ba41d1571a2aabacf
    Reviewed-on: https://go-review.googlesource.com/21352
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>

commit ea5091fcd76534565dd76aff593302cd6f5dfcbb
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Mar 30 20:37:51 2016 +1100

    cmd/compile/internal/gc: don't let the argument to Fields.Set escape
    
    Apply Robert's optimisation from CL 21241 to Type.Fields. The results
    are less impressive, possibly because of the makeup of the test data.
    
    name      old time/op    new time/op    delta
    Template     365ms ± 5%     365ms ± 3%    ~     (p=0.888 n=20+16)
    Unicode      182ms ±10%     180ms ± 9%    ~     (p=0.883 n=20+20)
    GoTypes      1.14s ± 2%     1.13s ± 3%    ~     (p=0.096 n=20+20)
    Compiler     5.74s ± 1%     5.76s ± 2%    ~     (p=0.369 n=20+20)
    
    name      old alloc/op   new alloc/op   delta
    Template    56.8MB ± 0%    56.7MB ± 0%  -0.15%  (p=0.000 n=19+20)
    Unicode     38.3MB ± 0%    38.3MB ± 0%  -0.02%  (p=0.006 n=20+19)
    GoTypes      180MB ± 0%     180MB ± 0%  -0.13%  (p=0.000 n=20+20)
    Compiler     805MB ± 0%     804MB ± 0%  -0.05%  (p=0.000 n=20+20)
    
    name      old allocs/op  new allocs/op  delta
    Template      485k ± 0%      482k ± 0%  -0.54%  (p=0.000 n=19+20)
    Unicode       377k ± 0%      377k ± 0%  -0.05%  (p=0.005 n=20+20)
    GoTypes      1.37M ± 0%     1.36M ± 0%  -0.53%  (p=0.000 n=20+19)
    Compiler     5.42M ± 0%     5.41M ± 0%  -0.21%  (p=0.000 n=20+20)
    
    Change-Id: I6782659fadd605ce9931bf5c737c7058b96a29eb
    Reviewed-on: https://go-review.googlesource.com/21296
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 225b223e4790964a04d1de64415b6b40455f9f70
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu Mar 24 15:34:45 2016 +1100

    image/jpeg: reconstruct progressive images even if incomplete.
    
    Fixes #14522.
    
    As I said on that issue:
    
    ----
    This is a progressive JPEG image. There are two dimensions of
    progressivity: spectral selection (variables zs and ze in scan.go,
    ranging in [0, 63]) and successive approximation (variables ah and al in
    scan.go, ranging in [0, 8), from LSB to MSB, although ah=0 implicitly
    means ah=8).
    
    For this particular image, there are three components, and the SOS
    markers contain this progression:
    
    zs, ze, ah, al:  0  0 0 0       components: 0, 1, 2
    zs, ze, ah, al:  1 63 0 0       components: 1
    zs, ze, ah, al:  1 63 0 0       components: 2
    zs, ze, ah, al:  1 63 0 2       components: 0
    zs, ze, ah, al:  1 10 2 1       components: 0
    zs, ze, ah, al: 11 63 2 1       components: 0
    zs, ze, ah, al:  1 10 1 0       components: 0
    
    The combination of all of these is complete (i.e. spectra 0 to 63 and
    bits 8 exclusive to 0) for components 1 and 2, but it is incomplete for
    component 0 (the luma component). In particular, there is no data for
    component 0, spectra 11 to 63 and bits 1 exclusive to 0.
    
    The image/jpeg code, as of Go 1.6, waits until both dimensions are
    complete before performing the de-quantization, IDCT and copy to an
    *image.YCbCr. This is the "if zigEnd != blockSize-1 || al != 0 { ...
    continue }" code and associated commentary in scan.go.
    
    Almost all progressive JPEG images end up complete in both dimensions
    for all components, but this particular image is incomplete for
    component 0, so the Go code never writes anything to the Y values of the
    resultant *image.YCbCr, which is why the broken output is so dark (but
    still looks recognizable in terms of red and blue hues).
    
    My reading of the ITU T.81 JPEG specification (Annex G) doesn't
    explicitly say that this is a valid image, but it also doesn't rule it
    out.
    
    In any case, the fix is, for progressive JPEG images, to always
    reconstruct the decoded blocks (by performing the de-quantization, IDCT
    and copy to an *image.YCbCr), regardless of whether or not they end up
    complete. Note that, in Go, the jpeg.Decode function does not return
    until the entire image is decoded, so we still only want to reconstruct
    each block once, not once per SOS (Start Of Scan) marker.
    ----
    
    A test image was also added, based on video-001.progressive.jpeg. When
    decoding that image, inserting a
    
    println("nComp, zs, ze, ah, al:", nComp, zigStart, zigEnd, ah, al)
    
    into decoder.processSOS in scan.go prints:
    
    nComp, zs, ze, ah, al: 3 0 0 0 1
    nComp, zs, ze, ah, al: 1 1 5 0 2
    nComp, zs, ze, ah, al: 1 1 63 0 1
    nComp, zs, ze, ah, al: 1 1 63 0 1
    nComp, zs, ze, ah, al: 1 6 63 0 2
    nComp, zs, ze, ah, al: 1 1 63 2 1
    nComp, zs, ze, ah, al: 3 0 0 1 0
    nComp, zs, ze, ah, al: 1 1 63 1 0
    nComp, zs, ze, ah, al: 1 1 63 1 0
    nComp, zs, ze, ah, al: 1 1 63 1 0
    
    In other words, video-001.progressive.jpeg contains 10 different scans.
    This little program below drops half of them (remembering to keep the
    "\xff\xd9" End of Image marker):
    
    ----
    package main
    
    import (
            "bytes"
            "io/ioutil"
            "log"
    )
    
    func main() {
            sos := []byte{0xff, 0xda}
            eoi := []byte{0xff, 0xd9}
    
            src, err := ioutil.ReadFile("video-001.progressive.jpeg")
            if err != nil {
                    log.Fatal(err)
            }
            b := bytes.Split(src, sos)
            println(len(b)) // Prints 11.
            dst := bytes.Join(b[:5], sos)
            dst = append(dst, eoi...)
            if err := ioutil.WriteFile("video-001.progressive.truncated.jpeg", dst, 0666); err != nil {
                    log.Fatal(err)
            }
    }
    ----
    
    The video-001.progressive.truncated.jpeg was converted to png via
    libjpeg and ImageMagick:
    
    djpeg -nosmooth video-001.progressive.truncated.jpeg > tmp.tga
    convert tmp.tga video-001.progressive.truncated.png
    rm tmp.tga
    
    Change-Id: I72b20cd4fb6746d36d8d4d587f891fb3bc641f84
    Reviewed-on: https://go-review.googlesource.com/21062
    Reviewed-by: Rob Pike <r@golang.org>

commit 0373128318f0a64ea0c8e1a156d69d2cacbd2591
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Mar 31 10:30:04 2016 +1100

    cmd/compile/internal/gc: don't iterate over field list twice
    
    In tostruct0 and tofunargs we take a list of nodes, transform them into
    a slice of Fields, set the fields on a type, then use the IterFields
    iterator to iterate over the list again to see if any of them are
    broken.
    
    As we know the slice of fielde-we just created it-we can combine these two
    interations into one pass over the fields.
    
    Change-Id: I8b04c90fb32fd6c3b1752cfc607128a634ee06c5
    Reviewed-on: https://go-review.googlesource.com/21350
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e76fc1b921e421bcbed66194946ecca8d49f8aac
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 30 15:09:25 2016 -0700

    cmd/compile: use t.IsFoo() instead of Isfoo[t.Etype]
    
    This allows us to get rid of Isptr and Issigned. Still some code to
    clean up for Isint, Isfloat, and Iscomplex.
    
    CL produced mechanically using gofmt -w -r.
    
    Passes toolstash -cmp.
    
    Change-Id: If4f807bb7f2b357288d2547be2380eb511875786
    Reviewed-on: https://go-review.googlesource.com/21339
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 3efefd9395a14b3abf1f1c59a596d880e78abb73
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 30 14:56:08 2016 -0700

    cmd/compile: use t.IsFoo() instead of t.Etype == TFOO
    
    CL produced mechanically using gofmt -w -r.
    
    Passes toolstash -cmp.
    
    Change-Id: Ib2e8710ebd844e2149125b41c335b71a02fcab53
    Reviewed-on: https://go-review.googlesource.com/21338
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d8f1f8d8568d680be0845379d477264fd09324c3
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Thu Mar 24 22:46:37 2016 +0100

    cmd/compile: generalize strength reduction of mulq
    
    * This is an improved version of an earlier patch.
    * Verified with gcc up to 100.
    * Limited to two instructions based on costs from
    https://gmplib.org/~tege/x86-timing.pdf
    
    Change-Id: Ib7c37de6fd8e0ba554459b15c7409508cbcf6728
    Reviewed-on: https://go-review.googlesource.com/21103
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1624a9c9e79c1c5dd9a4e69c359c98838c3eb6f8
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 30 14:45:47 2016 -0700

    cmd/compile: get rid of redundant Type helper functions
    
    Replace Isfixedarray, Isslice, and Isinter with the IsArray, IsSlice,
    and IsInterface methods added for SSA. Rewrite performed mechanically
    using gofmt -w -r "Isfoo(t) -> t.IsFoo()".
    
    Because the IsFoo methods panic when given a nil pointer, a handful of
    call sites had to be modified to check for nil Type values. These
    aren't strictly necessary, because nil Type values should only occur
    in invalid Go source programs, so it would be okay if we panicked on
    them and gave up type checking the rest of the package. However, there
    are a couple regress tests that expect we continue, so add checks to
    keep those tests passing. (See #15029.)
    
    Passes toolstash -cmp.
    
    Change-Id: I511c6ac4cfdf3f9cbdb3e52a5fa91b6d09d82f80
    Reviewed-on: https://go-review.googlesource.com/21336
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2592e0999ea55ea04f03dde364336975357e9c9c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 30 10:59:29 2016 -0700

    cmd/compile: s/typeX/typX/
    
    Apparently I’m having a hard time following my
    own naming scheme.
    
    Change-Id: I99c801bef09fa65c1f0e8ecc2fba154a495e9c17
    Reviewed-on: https://go-review.googlesource.com/21332
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>

commit 8640b51df896b60e19b7eaec0f4484c17bf5d5cb
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 30 10:57:47 2016 -0700

    cmd/compile: add Type.Elem
    
    This removes almost all direct access to
    Type’s heavily overloaded Type field.
    
    Mostly generated by eg, manually checked.
    
    Significant manual changes:
    
    * reflect.go's typPkg used Type indiscriminately.
      Use it only for specific etypes.
    * gen.go's visitComponents contained a usage of Type
      with structs. Using Type for structs no longer
      occurs, and the Fatal contained therein has not triggered,
      so it has been axed.
    * Scary code in cgen.go's cgen_slice is now explicitly scary.
    
    Passes toolstash -cmp.
    
    Change-Id: I2dbfb3c959da7ae239f964d83898c204affcabc6
    Reviewed-on: https://go-review.googlesource.com/21331
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 76e72691a0c91623f7764a1d34ec1d65b767bce3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 30 10:52:13 2016 -0700

    cmd/compile: add typMap
    
    Also, add two uses of Key and Val that I missed earlier.
    As before, direct writes to Down and Type remain in bimport.
    
    Change-Id: I487aa975926b30092db1ad74ace17994697117c1
    Reviewed-on: https://go-review.googlesource.com/21330
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit dc5a7682f0ec9cc344fcdb61d67b9d37c6ad3cc6
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Mar 30 18:17:45 2016 +0200

    cmd/compile: use inc/dec for bytes, too
    
    Change-Id: Ib2890ab1983cbef7c1c1ee5a10204ba3ace19b53
    Reviewed-on: https://go-review.googlesource.com/21312
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit ca72f5f5df62181cfc8043e9064b4f847527ec2a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 30 15:13:26 2016 +1100

    internal/testenv: prefer to find go binary in GOROOT
    
    Partial revert of https://golang.org/cl/20967 which
    I can't reproduce and actually breaks me more.
    
    Fixes #14901
    
    Change-Id: I8cce443fbd95f5f6f2a5b6a4b9f2faab36167a12
    Reviewed-on: https://go-review.googlesource.com/21292
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 788f11263a0eccb25d9067525d84208058000391
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 28 10:55:44 2016 -0700

    cmd/compile: rename Type.IsPtr to Type.IsPtrShaped
    
    Previously, t.IsPtr() reported whether t was represented with a
    pointer, but some of its callers expected it to report whether t is an
    actual Go pointer. Resolve this by renaming t.IsPtr to t.IsPtrShaped
    and adding a new t.IsPtr method to report Go pointer types.
    
    Updated a couple callers in gc/ssa.go to use IsPtr instead of
    IsPtrShaped.
    
    Passes toolstash -cmp.
    
    Updates #15028.
    
    Change-Id: I0a8154b5822ad8a6ad296419126ad01a3d2a5dc5
    Reviewed-on: https://go-review.googlesource.com/21232
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit fdf6761e01f2f826cc880266a00cc68bea6490fb
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Mar 29 10:18:43 2016 -0700

    cmd/compile: add typPtr
    
    Passes toolstash -cmp.
    
    Change-Id: I721348ed2122b6a9cd87ad2041b6ee3bf6b2bbb5
    Reviewed-on: https://go-review.googlesource.com/21306
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e3c7497327cfa210d5686cccdd2aa3fe2ea62129
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Mar 29 10:15:02 2016 -0700

    cmd/compile: add typWrapper and Type.Wrapped
    
    Passes toolstash -cmp.
    
    Change-Id: I7dffd9bc5bab323590df6fb591bf1e73edf2e465
    Reviewed-on: https://go-review.googlesource.com/21305
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 09c672d50a704a712b64df87796fba4c80a9db8d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Mar 29 10:00:54 2016 -0700

    cmd/compile: add typChan
    
    Passes toolstash -cmp.
    
    Change-Id: I2c71882f957c44047c7ac83c78236dcc3dfa15a1
    Reviewed-on: https://go-review.googlesource.com/21304
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 331f9625087ab0169909012ac9a45b7321b81a37
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Mar 29 09:14:19 2016 -0700

    cmd/compile: use IsSlice and IsArray instead of checking Bound
    
    Changes generated by eg and manually checked.
    
    Isfixedarray, Isslice, and many other
    Type-related functions in subr.go should
    either be deleted or moved to type.go.
    Later, though; the game now is cleanup via encapsulation.
    
    Passes toolstash -cmp.
    
    Change-Id: I83dd8816f6263b74367d23c2719a08c362e330f9
    Reviewed-on: https://go-review.googlesource.com/21303
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d7f7ea6ea894f197928cc728aef257c045e4e916
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Mar 30 16:19:10 2016 +0200

    cmd/compile: ignore dead phis in fuse
    
    Happens occasionally for boolean phis was used as a control.
    
    Change-Id: Ie0f2483e9004c1706751d8dfb25ee2e5106d917e
    Reviewed-on: https://go-review.googlesource.com/21310
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 152a08c531a3219489136df71a8d75ff9ba3bf06
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Mar 29 23:37:59 2016 -0700

    compress/gzip: fix error handling in Read
    
    The Read logic should not assume that only (0, io.EOF) is returned
    instead of (n, io.EOF) where n is positive.
    
    The fix done here is very similar to the fix to compress/zlib
    in CL/20292.
    
    Change-Id: Icb76258cdcf8cfa386a60bab330fefde46fc071d
    Reviewed-on: https://go-review.googlesource.com/21308
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6b97dbf848d1019a9e8195e8914530a2cc518327
Author: kortschak <dan.kortschak@adelaide.edu.au>
Date:   Wed Mar 30 19:37:18 2016 +1030

    cmd/dist: make fortran test conditional on bash existence
    
    Fixes #14929.
    
    Change-Id: I0391acf9f5f65389f73637533306a7c4240320b8
    Reviewed-on: https://go-review.googlesource.com/21295
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 897dcdb5ecc001fac328c53806f8a1dbf2e8c3fd
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Mar 29 23:34:37 2016 -0700

    debug/elf: deflake file_test.go
    
    It is valid for io.Reader to return (n, io.EOF) where n is positive.
    The unit test should not fail if io.EOF is returned when read until
    the end.
    
    Change-Id: I7b918e3cc03db8b90c8aa58f4c0f7806a1d4af7e
    Reviewed-on: https://go-review.googlesource.com/21307
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 354e9778a3327e125ed99e86d7b6e648ed0ccd53
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Mar 29 11:39:33 2016 -0400

    cmd/asm: add s390x support
    
    s390x doesn't introduce any new assembly syntax. There are a few
    instructions which require the operands to be reordered, notably
    the storage-storage instructions that put the length into From3 so
    that the memory operands can be put into From and To.
    
    The assembly test currently covers a subset of instructions but
    tries to hit edge cases as much as possible. Unlike the other ports
    it can be linked as an executable to make disassembling it easy.
    It would be nice to autogenerate it at some point in the future.
    
    Change-Id: I8dd542c34b9e450b8129d46693a5acb0ded791ce
    Reviewed-on: https://go-review.googlesource.com/21253
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 268c31870a05374065965cdbaa56e8320fc33765
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 28 22:59:40 2016 -0700

    cmd/compile: move substAny to type.go
    
    substAny needs access to many internal details
    of gc.Type. substArgTypes comes along for the ride.
    
    Change-Id: I430a4edfd54a1266522f7a9818e5e7b5da72479c
    Reviewed-on: https://go-review.googlesource.com/21250
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 0a85be573c21935f5197404ad8575d9dd4f28f8c
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Mar 30 00:52:22 2016 -0400

    cmd/internal/obj: add copyright header to files
    
    Change-Id: I4ed33f3fdb9ad5f0f8984d3ef282c34e26eb2cde
    Reviewed-on: https://go-review.googlesource.com/21301
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 13f97ea4568b6b1720438347a914618a8bee07be
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 19:23:50 2016 -0400

    cmd/internal/obj/s390x: add s390x support
    
    Based on the ppc64 port.
    
    s390x supports 2, 4 and 6 byte instructions and Go assembly
    instructions sometimes map to several s390x instructions. The
    assembler loops until a fixed point is reached in order to use
    branch instructions that can only handle a short offset in a
    similar way to other ports.
    
    Change-Id: I4278bf46aca35a96ca9cea0857e6229643c9c1e3
    Reviewed-on: https://go-review.googlesource.com/20942
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7fc562199109bec2755b14587ef9c64cc305d5e5
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 29 16:39:53 2016 -0700

    cmd/compile: define high bits of AuxInt
    
    Previously if we were only using the low bits of AuxInt,
    the high bits were ignored and could be junk.  This CL
    changes that behavior to define the high bits to be the
    sign-extended version of the low bits for all cases.
    
    There are 2 main benefits:
    - Deterministic representation.  This helps with CSE.
      (Const8 [0x1]) and (Const8 [0x101]) used to be the same "value"
      but CSE couldn't see them as such.
    - Testability.  We can check that all ops leave AuxInt in a state
      consistent with the new rule.  In the old scheme, it was hard
      to check whether a rule correctly used only the low-order bits.
    Side benefits:
    - ==0 and !=0 tests are easier.
    
    Drawbacks:
    - This differs from the runtime representation in registers,
      where it is important that we allow upper bits to be undefined
      (so we're not sign/zero-extending all the time).
    - Ops that treat AuxInt as unsigned (shifts, mostly) need to be
      a bit more careful.
    
    Change-Id: I9a685ff27e36dc03287c9ab1cecd6c0b4045c819
    Reviewed-on: https://go-review.googlesource.com/21256
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 18072adbca7ee2cb2019704577a8f3f142010ba7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 30 14:27:24 2016 +1100

    net/http: reuse HTTP/1 Transport conns more for gzipped responses
    
    Flip around the composition order of the http.Response.Body's
    gzip.Reader vs. the reader which keeps track of waiting to see the end
    of the HTTP/1 response framing (whether that's a Content-Length or
    HTTP/1.1 chunking).
    
    Previously:
    
    user -> http.Response.Body
         -> bodyEOFSignal
         -> gzipReader
         -> gzip.Reader
         -> bufio.Reader
       [ -> http/1.1 de-chunking reader ]   optional
         -> http1 framing *body
    
    But because bodyEOFSignal was waiting to see an EOF from the
    underlying gzip.Reader before reusing the connection, and gzip.Reader
    (or more specifically: the flate.Reader) wasn't returning an early
    io.EOF with the final chunk, the bodyEOfSignal was never releasing the
    connection, because the EOF from the http1 framing was read by a party
    who didn't care about it yet: the helper bufio.Reader created to do
    byte-at-a-time reading in the flate.Reader.
    
    Flip the read composition around to:
    
    user -> http.Response.Body
         -> gzipReader
         -> gzip.Reader
         -> bufio.Reader
         -> bodyEOFSignal
       [ -> http/1.1 de-chunking reader ]   optional
         -> http1 framing *body
    
    Now when gzip.Reader does its byte-at-a-time reading via the
    bufio.Reader, the bufio.Reader will do its big reads against the
    bodyEOFSignal reader instead, which will then see the underlying http1
    framing EOF, and be able to reuse the connection.
    
    Updates google/go-github#317
    Updates #14867
    And related abandoned fix to flate.Reader: https://golang.org/cl/21290
    
    Change-Id: I3729dfdffe832ad943b84f4734b0f59b0e834749
    Reviewed-on: https://go-review.googlesource.com/21291
    Reviewed-by: David Symonds <dsymonds@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7f067c87d831f329d068fced1b136cd06039303c
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Wed Mar 23 00:44:07 2016 +0200

    cmd/compile, cmd/link: record lengths in object file
    
    Record total number of relocations, pcdata, automatics, funcdata and files in
    object file and use these numbers in the linker to allocate contiguous
    slices to later be filled by the defined symbols.
    
    name       old secs    new secs    delta
    LinkCmdGo   0.52 ± 3%   0.49 ± 3%  -4.21%   (p=0.000 n=91+92)
    LinkJuju    4.48 ± 4%   4.21 ± 7%  -6.08%  (p=0.000 n=96+100)
    
    name       old MaxRSS  new MaxRSS  delta
    LinkCmdGo   122k ± 2%   120k ± 4%  -1.66%   (p=0.000 n=98+93)
    LinkJuju    799k ± 5%   865k ± 8%  +8.29%   (p=0.000 n=89+99)
    
    GOGC=off
    
    name       old secs    new secs    delta
    LinkCmdGo   0.42 ± 2%   0.41 ± 0%  -2.98%    (p=0.000 n=89+70)
    LinkJuju    3.61 ± 0%   3.52 ± 1%  -2.46%    (p=0.000 n=80+89)
    
    name       old MaxRSS  new MaxRSS  delta
    LinkCmdGo   130k ± 1%   128k ± 1%  -1.33%  (p=0.000 n=100+100)
    LinkJuju   1.00M ± 0%  0.99M ± 0%  -1.70%  (p=0.000 n=100+100)
    
    Change-Id: Ie08f6ccd4311bb78d8950548c678230a58635c73
    Reviewed-on: https://go-review.googlesource.com/21026
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 777a77b4d29853e13dc803b2923bf88b498ed306
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Mar 29 07:30:17 2016 -0700

    cmd/compile: don't skip PPARAMOUT in esccall after varargs
    
    Fixes bug I introduced in CL 21202.
    
    Fixes #15013.
    
    Change-Id: I2344d7e22b8273425a0a56f4a77588b5c6e4d8c6
    Reviewed-on: https://go-review.googlesource.com/21270
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 17f6e5396b5ca6fbac11a660df1fcc0ee8d0821d
Author: Austin Clements <austin@google.com>
Date:   Tue Mar 29 10:11:09 2016 -0400

    runtime: print sweep ratio if gcpacertrace>0
    
    Change-Id: I5217bf4b75e110ca2946e1abecac6310ed84dad5
    Reviewed-on: https://go-review.googlesource.com/21205
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 9cc22a7f1fbabfc1b82d198d2ac6d1ec7771e47f
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Tue Mar 29 12:24:18 2016 +1100

    net: skip TestInterfacesWithNetsh if "netsh help" contains no English words
    
    Fixes #14859
    
    Change-Id: I262d634ee22498ec9855d273afdd409149765294
    Reviewed-on: https://go-review.googlesource.com/21195
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c12a0e645a9e5e69bb549d69811c54351f562eae
Author: Philip Hofer <phofer@umich.edu>
Date:   Tue Mar 29 11:29:28 2016 -0700

    cmp/compile: rewrite CMP $0 with TEST
    
    The CMP* family of instructions are longer than their TEST counterparts by one byte.
    
    After this change, my go tool has 13 cmp.*$0x0 instructions, compared to 5612 before.
    
    Change-Id: Ieb87d65657917e494c0e4b711a7ba2918ae27610
    Reviewed-on: https://go-review.googlesource.com/21255
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit aec8e14589edecfd9752255e742b88e15ee651f2
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Mar 20 18:12:32 2016 +0100

    fmt: fix padding for 0 precision 0 integer value formatting
    
    Fixes #14924
    
    Change-Id: I098ef973e2cad76a121704492758c2971a9b55f3
    Reviewed-on: https://go-review.googlesource.com/20920
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit d175a85c5cef41b7f9ad8e7a9e2ebf84546a216e
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Mar 27 11:50:25 2016 +0200

    fmt: improve handling of zero padding
    
    Simplify the handling of zero padding in fmt_integer and
    fmt_float to not require any adjustment of the format flags.
    
    Note that f.zero can only be true when padding to the left
    and f.wid is always greater than or equal to 0.
    
    Change-Id: I204b57d103c0eac13d86995992f2b26209196925
    Reviewed-on: https://go-review.googlesource.com/21185
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 72a1b53b674626551f03c5083dab3882e705afd1
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Mon Mar 28 21:08:15 2016 +0300

    cmd/vet: allow lock types inside built-in new()
    
    Updates #14839
    Fixes #14994
    
    Change-Id: I9bb51bad19105a17c80d690c5486e5dd007ac84a
    Reviewed-on: https://go-review.googlesource.com/21222
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit eb98e515637c9447970ac1c1a2c24c1a9f0a189e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 28 22:57:57 2016 -0700

    cmd/compile: add typArray, typSlice, and typDDDArray
    
    These are the first of several convenience
    constructors for types.
    
    They are part of type field encapsulation.
    This removes most external writes to TARRAY Type and Bound fields.
    
    substAny still directly fiddles with the .Type field.
    substAny generally needs access to Type internals.
    It will be moved to type.go in a future CL.
    
    bimport still directly writes the .Type field.
    This is hard to change.
    
    Also of note:
    
    * inl.go contains an (apparently irrelevant) bug fix:
      as.Right was given the wrong type.
      vararrtype was previously unused.
    * I believe that aindex (subr.go) never creates slices,
      but it is safer to keep existing behavior.
      The removal of -1 as a constant there is part
      of hiding that implementation detail.
      Future CLs will finish that job.
    
    Passes toolstash -cmp.
    
    Change-Id: If09bf001a874d7dba08e9ad0bcd6722860af4b91
    Reviewed-on: https://go-review.googlesource.com/21249
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit f32161daf8b14f49acc4a8e90262817e675c8309
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Mar 17 12:24:11 2016 -0700

    cmd/compile: make only one new Node in defaultlit
    
    defaultlit and friends sometimes create a new
    OLITERAL node, only to have replace it.
    Thread hints when that is unnecessary.
    
    name       old time/op     new time/op     delta
    Template       318ms ± 6%      322ms ± 4%     ~           (p=0.154 n=24+25)
    Unicode        162ms ± 6%      151ms ± 7%   -6.94%        (p=0.000 n=22+23)
    GoTypes        1.04s ± 1%      1.04s ± 3%     ~           (p=0.136 n=20+25)
    Compiler       5.08s ± 2%      5.10s ± 4%     ~           (p=0.788 n=25+25)
    MakeBash       41.4s ± 1%      41.5s ± 1%     ~           (p=0.084 n=25+25)
    
    name       old user-ns/op  new user-ns/op  delta
    Template        438M ±10%       441M ± 9%     ~           (p=0.418 n=25+25)
    Unicode         272M ± 5%       219M ± 5%  -19.33%        (p=0.000 n=24+21)
    GoTypes        1.51G ± 3%      1.51G ± 3%     ~           (p=0.500 n=25+25)
    Compiler       7.31G ± 3%      7.32G ± 3%     ~           (p=0.572 n=25+24)
    
    name       old alloc/op    new alloc/op    delta
    Template      57.3MB ± 0%     57.2MB ± 0%   -0.16%        (p=0.000 n=25+25)
    Unicode       41.1MB ± 0%     38.7MB ± 0%   -5.81%        (p=0.000 n=25+25)
    GoTypes        191MB ± 0%      191MB ± 0%   -0.06%        (p=0.000 n=25+25)
    Compiler       840MB ± 0%      839MB ± 0%   -0.12%        (p=0.000 n=25+25)
    
    name       old allocs/op   new allocs/op   delta
    Template        500k ± 0%       500k ± 0%   -0.12%        (p=0.000 n=24+25)
    Unicode         400k ± 0%       384k ± 0%   -4.16%        (p=0.000 n=25+25)
    GoTypes        1.50M ± 0%      1.49M ± 0%   -0.05%        (p=0.000 n=25+25)
    Compiler       6.04M ± 0%      6.03M ± 0%   -0.11%        (p=0.000 n=25+25)
    
    Change-Id: I2fda5e072db67ba239848bde827c7deb2ad4abae
    Reviewed-on: https://go-review.googlesource.com/20813
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ee1b90ad2c3cc97215c0f38f70e62396856eb0f2
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Tue Mar 22 15:38:21 2016 +0200

    cmd/vet: improve detecting printf-like format argument
    
    Previously format argument was detected via scanning func type args.
    This didn't work when func type couldn't be determined if the func
    is declared in the external package. Fall back to scanning for
    the first string call argument in this case.
    
    Fixes #14754
    
    Change-Id: I571cc29684cc641bc87882002ef474cf1481e9e2
    Reviewed-on: https://go-review.googlesource.com/21023
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 12fb62a57db6a34c4ba0162ac970724d60dbbfbb
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 17:24:18 2016 -0400

    debug/elf: add s390x relocations
    
    Change-Id: I8440f69c7f99d65b2f69035c26b4a62104f22bd3
    Reviewed-on: https://go-review.googlesource.com/20874
    Reviewed-by: Minux Ma <minux@golang.org>

commit d0fb649713e6435cb854fcb202c6979c8a137c0b
Author: Marvin Stenger <marvin.stenger94@gmail.com>
Date:   Tue Mar 29 14:09:22 2016 +0200

    all: use &^ operator if possible
    
    This is a change improving consistency in the source tree.
    The pattern foo &= ^bar, was only used six times in src/ directory.
    The usage of the supported &^ (bit clear / AND NOT) operator is way more
    common, about factor 10x.
    
    Change-Id: If26a2994fd81d23d42189bee00245eb84e672cf3
    Reviewed-on: https://go-review.googlesource.com/21224
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d733cef728e452eb50cc6bcb343cf0f753df57bb
Author: Alexandre Cesaro <alexandre.cesaro@gmail.com>
Date:   Sun Mar 20 17:29:56 2016 +0100

    mime: fix maximum length of encoded-words
    
    RFC 2047 recommends a maximum length of 75 characters for
    encoded-words. Due to a bug, encoded-words were limited to 77
    characters instead of 75.
    
    Change-Id: I2ff9d013ab922df6fd542464ace70b1c46dc7ae7
    Reviewed-on: https://go-review.googlesource.com/20918
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1b6402ea9d760d539c347a94b5ecf7f43b43a4df
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Tue Mar 29 01:10:15 2016 +0300

    cmd/link: remove some more dead fields from Pcln
    
    Change-Id: Ibb98de29d84a605fb1588c7dc11ad66e3965a137
    Reviewed-on: https://go-review.googlesource.com/21223
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 42ad1dc01ef1677131b7a823772faaf40f6109a4
Author: Klaus Post <klauspost@gmail.com>
Date:   Mon Mar 21 14:51:28 2016 +0100

    compress/flate: add pure huffman deflater
    
    Add a "HuffmanOnly" compression level, where the input is
    only entropy encoded.
    
    The output is fully inflate compatible. Typical compression
    is reduction is about 50% of typical level 1 compression, however
    the compression time is very stable, and does not vary as much as
    nearly as much level 1 compression (or Snappy).
    
    This mode is useful for:
     * HTTP compression in a CPU limited environment.
     * Entropy encoding Snappy compressed data, for archiving, etc.
     * Compression where compression time needs to be predictable.
     * Fast network transfer.
    
    Snappy "usually" performs inbetween this and level 1 compression-wise,
    but at the same speed as "Huffman", so this is not a replacement,
    but a good supplement for Snappy, since it usually can compress
    Snappy output further.
    
    This is implemented as level -2, since this would be too much of a
    compression reduction to replace level 1.
    
    >go test -bench=Encode -cpu=1
    BenchmarkEncodeDigitsHuffman1e4            30000             52334 ns/op         191.08 MB/s
    BenchmarkEncodeDigitsHuffman1e5             3000            518343 ns/op         192.92 MB/s
    BenchmarkEncodeDigitsHuffman1e6              300           5356884 ns/op         186.68 MB/s
    BenchmarkEncodeDigitsSpeed1e4               5000            324214 ns/op          30.84 MB/s
    BenchmarkEncodeDigitsSpeed1e5                500           3952614 ns/op          25.30 MB/s
    BenchmarkEncodeDigitsSpeed1e6                 30          40760350 ns/op          24.53 MB/s
    BenchmarkEncodeDigitsDefault1e4             5000            387056 ns/op          25.84 MB/s
    BenchmarkEncodeDigitsDefault1e5              300           5950614 ns/op          16.80 MB/s
    BenchmarkEncodeDigitsDefault1e6               20          63842195 ns/op          15.66 MB/s
    BenchmarkEncodeDigitsCompress1e4            5000            391859 ns/op          25.52 MB/s
    BenchmarkEncodeDigitsCompress1e5             300           5707112 ns/op          17.52 MB/s
    BenchmarkEncodeDigitsCompress1e6              20          59839465 ns/op          16.71 MB/s
    BenchmarkEncodeTwainHuffman1e4             20000             73498 ns/op         136.06 MB/s
    BenchmarkEncodeTwainHuffman1e5              2000            595892 ns/op         167.82 MB/s
    BenchmarkEncodeTwainHuffman1e6               200           6059016 ns/op         165.04 MB/s
    BenchmarkEncodeTwainSpeed1e4                5000            321212 ns/op          31.13 MB/s
    BenchmarkEncodeTwainSpeed1e5                 500           2823873 ns/op          35.41 MB/s
    BenchmarkEncodeTwainSpeed1e6                  50          27237864 ns/op          36.71 MB/s
    BenchmarkEncodeTwainDefault1e4              3000            454634 ns/op          22.00 MB/s
    BenchmarkEncodeTwainDefault1e5               200           6859537 ns/op          14.58 MB/s
    BenchmarkEncodeTwainDefault1e6                20          71547405 ns/op          13.98 MB/s
    BenchmarkEncodeTwainCompress1e4             3000            462307 ns/op          21.63 MB/s
    BenchmarkEncodeTwainCompress1e5              200           7534992 ns/op          13.27 MB/s
    BenchmarkEncodeTwainCompress1e6               20          80353365 ns/op          12.45 MB/s
    PASS
    ok      compress/flate  55.333s
    
    Change-Id: I8e12ad13220e50d4cf7ddba6f292333efad61b0c
    Reviewed-on: https://go-review.googlesource.com/20982
    Reviewed-by: Joe Tsai <joetsai@digital-static.net>
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit 45d334ecf1b2bcbf0f8667d4c772ef3db0e03587
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 29 16:35:33 2016 +1100

    net/http/cgi: allow CGI host to configure where child's stderr goes
    
    Patch originally from Steven Hartland. Tweaked a bit & added a test.
    
    Fixes #7197
    
    Change-Id: I09012b4674e7c641dba31a24e9758cedb898d3ee
    Reviewed-on: https://go-review.googlesource.com/21196
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 093a9a1f5673d71377d4f0ef3f41a5618bf2512c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 28 21:48:47 2016 -0700

    cmd/compile: encapsulate map value type
    
    Passes toolstash -cmp.
    
    Change-Id: I83af544974e1e91e0810e13321afb3e665dcdf12
    Reviewed-on: https://go-review.googlesource.com/21248
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit bf5f24b98e64fe6e6a580c4309a13e0596f3021b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 28 21:28:54 2016 -0700

    cmd/compile: use t.Key() instead of t.Down
    
    This was the only unconverted instance.
    
    Change-Id: Ic0ba75824614fcd1e055316e62e26acd06801dd1
    Reviewed-on: https://go-review.googlesource.com/21247
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 98047376fbecedd42711c5d35ef62899dc249025
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Sun Mar 20 21:12:38 2016 +1100

    path/filepath: use fsutil with TestEvalSymlinksCanonicalNames
    
    TestEvalSymlinksCanonicalNames fails on system where 8dot3 name creation
    is disabled. Add new test that temporarily changes 8dot3 name creation
    file system setting and runs TestEvalSymlinksCanonicalNames under that
    setting. New test requires administrator access and modifies important
    file system setting, so don't run the test unless explicitly requested
    by specifying new test flag.
    
    Updates #13980
    
    Change-Id: I598b5b956e6bd0ed556e79d350cb244808c89c0b
    Reviewed-on: https://go-review.googlesource.com/20863
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit da19a0cff4312bf880363d16d28cffb31defcaa2
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 28 19:10:13 2016 -0700

    cmd/compile: fix plan9-amd64 build
    
    The previous rules to combine indexed loads produced addresses like:
    
        From: obj.Addr{
            Type:   TYPE_MEM,
            Reg:    REG_CX,
            Name:   NAME_AUTO,
            Offset: 121,
            ...
        }
    
    which are erroneous because NAME_AUTO implies a base register of
    REG_SP, and cmd/internal/obj/x86 makes many assumptions to this
    effect.  Note that previously we were also producing an extra "ADDQ
    SP, CX" instruction, so indexing off of SP was already handled.
    
    The approach taken by this CL to address the problem is to instead
    produce addresses like:
    
        From: obj.Addr{
            Type:   TYPE_MEM,
            Reg:    REG_SP,
            Name:   NAME_AUTO,
            Offset: 121,
            Index:  REG_CX,
            Scale:  1,
        }
    
    and to omit the "ADDQ SP, CX" instruction.
    
    Downside to this approach is it requires adding a lot of new
    MOV[WLQ]loadidx1 instructions that nearly duplicate functionality of
    the existing MOV[WLQ]loadidx[248] instructions, but with a different
    Scale.
    
    Fixes #15001.
    
    Change-Id: Iad9a1a41e5e2552f8d22e3ba975e4ea0862dffd2
    Reviewed-on: https://go-review.googlesource.com/21245
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 859b63cc0964d9e6edb0e586b156f85b79fa8dab
Author: Michel Lespinasse <walken@google.com>
Date:   Fri Mar 18 17:21:33 2016 -0700

    cmd/compile: optimize remaining convT2I calls
    
    See #14874
    Updates #6853
    
    This change adds a compiler optimization for non pointer shaped convT2I.
    Since itab symbols are now emitted by the compiler, the itab address can
    be passed directly to convT2I instead of passing the iface type and a
    cache pointer argument.
    
    Compilebench results for the 5-commits series ending here:
    
    name       old time/op     new time/op     delta
    Template       336ms ± 4%      344ms ± 4%   +2.61%          (p=0.027 n=9+8)
    Unicode        165ms ± 6%      173ms ± 7%   +5.11%          (p=0.014 n=9+9)
    GoTypes        1.09s ± 1%      1.06s ± 2%   -3.29%          (p=0.000 n=9+9)
    Compiler       5.09s ±10%      4.75s ±10%   -6.64%        (p=0.011 n=10+10)
    MakeBash       31.1s ± 5%      30.3s ± 3%     ~           (p=0.089 n=10+10)
    
    name       old text-bytes  new text-bytes  delta
    HelloSize       558k ± 0%       558k ± 0%   +0.02%        (p=0.000 n=10+10)
    CmdGoSize      6.24M ± 0%      6.11M ± 0%   -2.11%        (p=0.000 n=10+10)
    
    name       old data-bytes  new data-bytes  delta
    HelloSize      3.66k ± 0%      3.74k ± 0%   +2.41%        (p=0.000 n=10+10)
    CmdGoSize       134k ± 0%       162k ± 0%  +20.76%        (p=0.000 n=10+10)
    
    name       old bss-bytes   new bss-bytes   delta
    HelloSize       126k ± 0%       126k ± 0%     ~     (all samples are equal)
    CmdGoSize       149k ± 0%       146k ± 0%   -2.17%        (p=0.000 n=10+10)
    
    name       old exe-bytes   new exe-bytes   delta
    HelloSize       924k ± 0%       924k ± 0%   +0.05%        (p=0.000 n=10+10)
    CmdGoSize      9.77M ± 0%      9.62M ± 0%   -1.47%        (p=0.000 n=10+10)
    
    Change-Id: Ib230ddc04988824035c32287ae544a965fedd344
    Reviewed-on: https://go-review.googlesource.com/20902
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Michel Lespinasse <walken@google.com>

commit 7427f2c4bdf45fcf2288395d0e70c0c2fbe7ebcf
Author: Michel Lespinasse <walken@google.com>
Date:   Fri Mar 18 16:20:20 2016 -0700

    cmd/compile: optimize convT2I as a two-word copy when T is pointer-shaped
    
    See #14874
    
    This change adds a compiler optimization for pointer shaped convT2I.
    Since itab symbols are now emitted by the compiler, the itab address can
    be directly moved into the iface structure.
    
    Change-Id: I311483af544519ca682c5f872960717ead772f26
    Reviewed-on: https://go-review.googlesource.com/20901
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 79688ca58f59a65eee324694fd8a559dae8af149
Author: Michel Lespinasse <walken@google.com>
Date:   Thu Mar 17 07:00:33 2016 -0700

    cmd/link: collect itablinks as a slice in moduledata
    
    See #14874
    
    This change tells the linker to collect all the itablink symbols and
    collect them so that moduledata can have a slice of all compiler
    generated itabs.
    
    The logic is shamelessly adapted from what is done with typelink symbols.
    
    Change-Id: Ie93b59acf0fcba908a876d506afbf796f222dbac
    Reviewed-on: https://go-review.googlesource.com/20889
    Reviewed-by: Keith Randall <khr@golang.org>

commit f00bbd5f818f0a6b5b2fcf15422ad7fc4594225f
Author: Michel Lespinasse <walken@google.com>
Date:   Thu Mar 17 06:18:13 2016 -0700

    cmd/compile: emit itabs and itablinks
    
    See #14874
    
    This change tells the compiler to emit itab and itablink symbols in
    situations where they could be useful; however the compiled code does
    not actually make use of the new symbols yet.
    
    Change-Id: I0db3e6ec0cb1f3b7cebd4c60229e4a48372fe586
    Reviewed-on: https://go-review.googlesource.com/20888
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Michel Lespinasse <walken@google.com>

commit 7043d2bb5e8275df308abe9a2367fb1622be0313
Author: Michel Lespinasse <walken@google.com>
Date:   Fri Mar 18 15:16:53 2016 -0700

    runtime: insert itabs into hash table during init
    
    See #14874
    
    This change makes the runtime register all compiler generated itabs
    (as obtained from the moduledata) during init.
    
    Change-Id: I9969a0985b99b8bda820a631f7fe4c78f1174cdf
    Reviewed-on: https://go-review.googlesource.com/20900
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Michel Lespinasse <walken@google.com>

commit deb83d0639f9dbe1ae7c9100d6158448d9e2239e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 28 12:15:51 2016 -0700

    cmd/compile: remove unused write barrier helpers
    
    These have been unused since CL 10316.
    
    Passes toolstash -cmp.
    
    Change-Id: Icc19f3fcc7275fbee1c665f704e10a110ecce2a5
    Reviewed-on: https://go-review.googlesource.com/21242
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 361b334cbd68e23427d68580c09e7ff80cd3c82e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 28 14:31:57 2016 -0700

    cmd/compile: encapsulate Type.Argwid
    
    Passes toolstash -cmp.
    
    Change-Id: I72fb271052e449a83adfa9bd3b923d40781d6341
    Reviewed-on: https://go-review.googlesource.com/21243
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1f0bebcc7260480550ad114048a9428cea68e4f1
Author: Richard Miller <miller.research@gmail.com>
Date:   Sat Mar 26 19:35:21 2016 +0000

    syscall: fix accidental close of exec status pipe in StartProcess
    
    In syscall.forkAndExecInChild, blocks of code labelled Pass 1
    and Pass 2 permute the file descriptors (if necessary) which are
    passed to the child process.  If Pass 1 begins with fds = {0,2,1},
    nextfd = 4 and pipe = 4, then the statement labelled "don't stomp
    on pipe" is too late -- the pipe (which will be needed to pass
    exec status back to the parent) will have been closed by the
    preceding DUP call.
    
    Moving the "don't stomp" test earlier ensures that the pipe is
    protected.
    
    Fixes #14979
    
    Change-Id: I890c311527f6aa255be48b3277c1e84e2049ee22
    Reviewed-on: https://go-review.googlesource.com/21184
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 272df158ac431cc253b87a713735df70155ed456
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 27 17:57:42 2016 -0700

    cmd/compile: clean up ... Bound marker
    
    This mostly a mechanical change.
    However, the change in assignop (subr.go) is a bug fix.
    The code didn’t match the comment,
    and the comment was correct.
    Nevertheless, this CL passes toolstash -cmp.
    
    The last direct reference to dddBound outside
    type.go (in typecheck.go) will go away
    in a future CL.
    
    Change-Id: Ifb1691e0a07f906712c18c4a4cd23060807a5da5
    Reviewed-on: https://go-review.googlesource.com/21235
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit fcd2a06ab61e910ef78875a15c01fe140cf853ce
Author: Raul Silvera <rsilvera@google.com>
Date:   Mon Mar 28 13:52:28 2016 -0700

    cmd/pprof/internal: use and accept packed encoding for repeated fields
    
    Packed encoding is the default on the proto3 format. Profiles generated
    in the profile.proto format by third parties cannot be decoded by the
    Go pprof tool, since its proto decoder does not recognize packed
    encoding for repeated fields.
    
    In particular this issue prevents go tool pprof from reading profiles
    generated by the version of pprof in github.com/google/pprof
    
    Profiles generated by go tool pprof after this change will use packed
    repeating fields, so older versions of pprof will not be able to read
    them. pprof will continue to be able to read profiles generated before
    this change.
    
    Change-Id: Ife0b353a535ae1e495515b9bcec588dd967e171b
    Reviewed-on: https://go-review.googlesource.com/21240
    Reviewed-by: David Symonds <dsymonds@golang.org>
    Run-TryBot: David Symonds <dsymonds@golang.org>

commit 621aa713d46c3eebbc03e352436d109f28779e47
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Mar 28 14:12:10 2016 -0700

    cmd/compile: avoid allocation in Nodes.Set in common case
    
    When building make.bash, calling Nodes.Set(s) where len(s) == 0 occurs
    4738678 times vs 1465415 calls where len(s) > 0; i.e., it is over 3x
    more common to set Nodes.slice to nil rather than to s.
    
    Make a copy of slice (header) and take address of that copy instead
    to avoid allocating the argument slice on the heap always even when
    not needed.
    
    Saves 4738678 slice header allocations and slice header value copies.
    
    Change-Id: I88e8e919ea9868ceb2df46173d187af4109bd947
    Reviewed-on: https://go-review.googlesource.com/21241
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 390d1ce686729dea40cee796ce391f9fd8466942
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 28 09:32:10 2016 -0700

    cmd/compile: simplify substAny's TSTRUCT case
    
    Now that structs use a slice to store their fields, this code can be
    simplified somewhat.
    
    Passes toolstash -cmp.
    
    Change-Id: If17b1c89871fa06f34938fa67df0f8c6bcf1a86b
    Reviewed-on: https://go-review.googlesource.com/21219
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7294ccb54eab05c24b04801a4785505ad68c8a15
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 22 16:29:17 2016 -0700

    cmd/compile: join indexed byte loads into larger loads
    
    Fixes #14920
    
    Change-Id: I1535dc529779e26141d92d9e2b6ba7b016590c1a
    Reviewed-on: https://go-review.googlesource.com/21005
    Reviewed-by: Ilya Tocar <ilya.tocar@intel.com>
    Reviewed-by: Ahmed Waheed <oneofone@gmail.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 810799a16d71c6293b7d305fbe22dd85456fe1fd
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 28 20:20:50 2016 +0000

    Revert "cmd/asm: add s390x support"
    
    This reverts commit 85bbabd9c49253846f10d08876f9e15338cfe6b4.
    
    The reverted CL broke all builds, because it depends on other CLs
    that haven't been reviewed or landed yet.
    
    Change-Id: I936f969431e0ac77133e43de2bf63042cef6b777
    Reviewed-on: https://go-review.googlesource.com/21238
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>

commit 1b2fbb49c82eb4d6c418cf26edbfb3dab7c3cd07
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 28 10:35:13 2016 -0700

    cmd/compile: cleanup alg.go for Field slices
    
    Passes toolstash -cmp.
    
    Change-Id: Ie41d7e74847c44a8fd174731374339c6c32b1460
    Reviewed-on: https://go-review.googlesource.com/21231
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 62dddd47705be74869eabbb3296097b2e98a8baf
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 28 09:40:53 2016 -0700

    cmd/compile: rename Field's Width field to Offset
    
    gorename -from '"cmd/compile/internal/gc".Field.Width' -to Offset
    
    Passes toolstash -cmp.
    
    Change-Id: I310538a1f60bbab470a6375e813e9d5eb52c5bbf
    Reviewed-on: https://go-review.googlesource.com/21230
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 85bbabd9c49253846f10d08876f9e15338cfe6b4
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sat Mar 19 00:44:17 2016 -0400

    cmd/asm: add s390x support
    
    s390x doesn't introduce any new assembly syntax. There are a few
    instructions which require the operands to be reordered, notably
    the storage-storage instructions that put the length into From3 so
    that the memory operands can be put into From and To.
    
    The assembly test currently covers a subset of instructions but
    tries to hit edge cases as much as possible. Unlike the other ports
    it can be linked as an executable to make disassembling it easy.
    It would be nice to autogenerate it at some point in the future.
    
    Change-Id: I7615ac6ecf239e3f347fad9ae1f8eede91742859
    Reviewed-on: https://go-review.googlesource.com/20934
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit cabf73ffb8f1d15f0509546dec81fb9069ea57d4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 27 15:31:50 2016 -0700

    cmd/compile: add EType.String and missing EType names
    
    Passes toolstash -cmp.
    
    Change-Id: Icc387eb557d5029e903923a051b565812fd2246b
    Reviewed-on: https://go-review.googlesource.com/21234
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 22972d2207424edc481b7c127788f573a726dfe7
Merge: c67f09a 0f86d1e
Author: Austin Clements <austin@google.com>
Date:   Mon Mar 28 13:33:44 2016 -0400

    [dev.garbage] Merge remote-tracking branch 'origin/master' into dev.garbage
    
    Change-Id: Icb6811a9eb08fbde297d256db9f135a4e85e7cd4

commit 0f86d1edfb87fddb2c7f50d177b67f48219151f3
Author: Shinji Tanaka <shinji.tanaka@gmail.com>
Date:   Sat Mar 26 07:14:15 2016 -0400

    runtime: use set_thread_area instead of modify_ldt on linux/386
    
    linux/386 depends on modify_ldt system call, but recent Linux kernels
    can disable this system call. Any Go programs built as linux/386
    crash with the message 'Trace/breakpoint trap'.
    
    The kernel config CONFIG_MODIFY_LDT_SYSCALL, which control
    enable/disable modify_ldt, is disabled on Amazon Linux 2016.03.
    
    This fixes this problem by using set_thread_area instead of modify_ldt
    on linux/386.
    
    Fixes #14795.
    
    Change-Id: I0cc5139e40e9e5591945164156a77b6bdff2c7f1
    Reviewed-on: https://go-review.googlesource.com/21190
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 2326c24cc722f5093f40ea0964c93addd155ada0
Author: Marvin Stenger <marvin.stenger94@gmail.com>
Date:   Mon Mar 28 11:34:37 2016 +0200

    cmd/internal/obj: convert fields of LSym from uint8 to bool
    
    No performance regression measurable:
    
    name      old time/op    new time/op    delta
    Template     432ms ± 3%     422ms ± 2%  -2.34%   (p=0.010 n=10+9)
    GoTypes      1.46s ± 1%     1.46s ± 1%    ~     (p=0.796 n=10+10)
    Compiler     7.15s ± 1%     7.14s ± 1%    ~      (p=0.447 n=10+9)
    
    Change-Id: I21b93cb989017b6fec2215de2423d87f25cf538c
    Reviewed-on: https://go-review.googlesource.com/21220
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8eec2bbfbc4f209950f677906c6ce67e01d32930
Author: David Chase <drchase@google.com>
Date:   Fri Mar 11 00:10:52 2016 -0500

    cmd/compile: added some intrinsics to SSA back end
    
    One intrinsic was needed to help get the very best
    performance out of a future GC; as long as that one was
    being added, I also added Bswap since that is sometimes
    a handy thing to have.  I had intended to fill out the
    bit-scan intrinsic family, but the mismatch between the
    "scan forward" instruction and "count leading zeroes"
    was large enough to cause me to leave it out -- it poses
    a dilemma that I'd rather dodge right now.
    
    These intrinsics are not exposed for general use.
    That's a separate issue requiring an API proposal change
    ( https://github.com/golang/proposal )
    
    All intrinsics are tested, both that they are substituted
    on the appropriate architecture, and that they produce the
    expected result.
    
    Change-Id: I5848037cfd97de4f75bdc33bdd89bba00af4a8ee
    Reviewed-on: https://go-review.googlesource.com/20564
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2e90192b0e774f44a2d918509e0bd32823ce5c2c
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Sun Mar 27 10:06:12 2016 +0300

    cmd/link: refactor symbol lookup
    
    Calling the read only Linkrlookup will now not cause the name
    string to escape. So a lookup can be performed on a []byte
    casted to a string without allocating. This will help a followup
    cl and it is also much simpler and cleaner.
    Performance not impacted by this.
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.51 ± 6%  0.51 ± 5%   ~     (p=0.192 n=98+98)
    
    Change-Id: I7846ba3160eb845a3a29cbf0be703c47369ece16
    Reviewed-on: https://go-review.googlesource.com/21187
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7e88826a69366bbcb64f2f89dbe02c57f7ebf678
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Mar 27 19:44:06 2016 -0700

    cmd/compile: clear OTFUNC info when converting to OTYPE
    
    I want to get rid of OTFUNC, which serves no useful purpose.  However,
    it turns out that the escape analysis pass looks at the node slices set
    up for OTFUNC, even though by the time escape analysis runs the OTFUNC
    has been converted to OTYPE.  This CL converts the escape analysis code
    to look at the function decls instead, and clears the OTFUNC info when
    converting to OTYPE to ensure that nothing else looks at it.
    
    Change-Id: I3f2f5997ea8ea7a127a858e94b20aabfab84a5bf
    Reviewed-on: https://go-review.googlesource.com/21202
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit aa482f971508d1bfdedf293a85968d80fd80fae2
Author: Dominik Honnef <dominik@honnef.co>
Date:   Mon Mar 28 02:44:43 2016 +0200

    cmd/go: remove code specific to Google Code
    
    Remove all special handling of Google Code, which has shut down.
    
    Commit 4ec2fd3e6ac4f869d39348bf48016687b731d910 suggested that maybe the
    shutdown warning should remain. However, it has been missing from Go 1.6
    already, and by Go 1.7 people will most likely have realised that Google
    Code has shut down.
    
    Updates #10193.
    
    Change-Id: I5749bbbe2fe3b07cff4edd20303bbedaeaa8d77b
    Reviewed-on: https://go-review.googlesource.com/21189
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9149aa10cc2f7d3061303754ab45c55eff42ac89
Author: Martin Möhrmann <martisch@uos.de>
Date:   Tue Mar 15 17:14:03 2016 +0100

    fmt: unify array and slice formatting for bytes and other types
    
    Make verbs b,c,o and U work for any array and slice of integer
    type including byte and uint8.
    
    Fix a bug that triggers badverb for []uint8 and []byte type
    on the slice/array level instead of on each element like for
    any other slice or array type.
    
    Add tests that make sure we do not accidentally alter the
    behavior of printing []byte for []byte and []uint8 type
    if they are used at the top level when formatting with %#v.
    
    name               old time/op  new time/op  delta
    SprintfHexBytes-2   177ns ± 2%   176ns ± 2%   ~     (p=0.066 n=48+49)
    SprintfBytes-2      330ns ± 1%   329ns ± 1%   ~     (p=0.118 n=45+47)
    
    Fixes #13478
    
    Change-Id: I99328a184973ae219bcc0f69c3978cb1ff462888
    Reviewed-on: https://go-review.googlesource.com/20686
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit a637717e7da8a28f0c3dd55ba52d94aab28fa1bb
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 27 12:30:16 2016 -0700

    cmd/compile: rename T_old_DARRAY and update comments
    
    Change-Id: Ifa3b1b1e5458e4f109828a476d37f1caf96fe14b
    Reviewed-on: https://go-review.googlesource.com/21211
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fcca9d265c871863392d821723a9a4ddd29ac2ba
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Mar 26 11:20:20 2016 -0700

    cmd/compile: remove pointless conversions in copytype
    
    Passes toolstash -cmp.
    
    Change-Id: I8b000d4e90e6aa1a0e60bd46fb7cba2ddc1774b5
    Reviewed-on: https://go-review.googlesource.com/21210
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 995fb0319eda217242fac8f2e11b576b7b7f79a9
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 25 21:11:33 2016 -0700

    cmd/compile: fix stringtoslicebytetmp optimization
    
    Fixes #14973.
    
    Change-Id: Iea68c9deca9429bde465c9ae05639209fe0ccf72
    Reviewed-on: https://go-review.googlesource.com/21175
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4ffa5eb8764b9c811bff329e7d2e392dc1e8972c
Author: Dominik Honnef <dominik@honnef.co>
Date:   Sat Mar 26 14:23:56 2016 +0100

    cmd/vet: don't treat fields like variables in rangeloop check
    
    Fixes #13236
    
    Change-Id: If902ac66718e0a0790fab9835921ce4ef980965b
    Reviewed-on: https://go-review.googlesource.com/21183
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit d170d3edd77aa571e65ff51ff382b90e9b00f40b
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Mar 19 08:54:07 2016 +0100

    fmt: cleanup reflect value handling
    
    Merge printReflectValue into printValue. Determine if handleMethods
    was already called in printArg by checking if depth is 0. Do not
    call handleMethods on depth 0 again in printValue to not introduce
    a performance regression. handleMethods is called already in printArg
    to not introduce a performance penalty for top-level Stringer,
    GoStringer, Errors and Formatters by using reflect.ValueOf on them
    just to retrieve them again as interface{} values in printValue.
    
    Clear p.arg in printValue after handleMethods to print the type
    of the value inside the reflect.Value when a bad verb is encountered
    on the top level instead of printing "reflect.Value=" as the type of
    the argument. This also fixes a bug that incorrectly prints the
    whole map instead of just the value for a key if the returned value
    by the map for the key is an invalid reflect value.
    
    name                     old time/op  new time/op  delta
    SprintfPadding-2          229ns ± 2%   227ns ± 1%  -0.50%  (p=0.013 n=20+20)
    SprintfEmpty-2           36.4ns ± 6%  37.2ns ±14%    ~     (p=0.091 n=18+20)
    SprintfString-2           102ns ± 1%   102ns ± 0%    ~     (p=0.751 n=20+20)
    SprintfTruncateString-2   142ns ± 0%   141ns ± 1%  -0.95%  (p=0.000 n=16+20)
    SprintfQuoteString-2      389ns ± 0%   388ns ± 0%  -0.12%  (p=0.019 n=20+20)
    SprintfInt-2              100ns ± 2%   100ns ± 1%    ~     (p=0.188 n=20+15)
    SprintfIntInt-2           155ns ± 3%   154ns ± 2%    ~     (p=0.092 n=20+20)
    SprintfPrefixedInt-2      250ns ± 2%   251ns ± 3%    ~     (p=0.559 n=20+20)
    SprintfFloat-2            177ns ± 2%   175ns ± 1%  -1.30%  (p=0.000 n=20+20)
    SprintfComplex-2          516ns ± 1%   510ns ± 1%  -1.13%  (p=0.000 n=19+16)
    SprintfBoolean-2         90.9ns ± 3%  90.6ns ± 1%    ~     (p=0.193 n=19+19)
    SprintfHexString-2        171ns ± 1%   169ns ± 1%  -1.44%  (p=0.000 n=19+20)
    SprintfHexBytes-2         180ns ± 1%   180ns ± 1%    ~     (p=0.060 n=19+18)
    SprintfBytes-2            330ns ± 1%   329ns ± 1%  -0.42%  (p=0.003 n=20+20)
    SprintfStringer-2         354ns ± 3%   352ns ± 3%    ~     (p=0.525 n=20+19)
    SprintfStructure-2        804ns ± 3%   776ns ± 2%  -3.56%  (p=0.000 n=20+20)
    FprintInt-2               155ns ± 0%   151ns ± 1%  -2.35%  (p=0.000 n=19+20)
    FprintfBytes-2            169ns ± 0%   170ns ± 1%  +0.81%  (p=0.000 n=18+19)
    FprintIntNoAlloc-2        112ns ± 0%   109ns ± 1%  -2.28%  (p=0.000 n=20+20)
    
    Change-Id: Ib9a39082ed1be0f1f7499ee6fb6c9530f043e43a
    Reviewed-on: https://go-review.googlesource.com/20923
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 688840593bf7e5a7de89e4f60e4414bd857dbdbc
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Mar 26 08:17:43 2016 -0700

    cmd/compile: don’t generate a new Node for convas
    
    This removes about 3% of the Nodes allocated
    while compiling std+cmd.
    
    Passes toolstash -cmp.
    
    name       old time/op     new time/op     delta
    Template       320ms ± 3%      316ms ± 5%    ~           (p=0.063 n=21+23)
    Unicode        162ms ± 9%      161ms ± 6%    ~           (p=0.788 n=25+25)
    GoTypes        1.03s ± 4%      1.03s ± 4%    ~           (p=0.929 n=24+25)
    Compiler       4.99s ± 3%      4.95s ± 2%  -0.84%        (p=0.011 n=25+23)
    MakeBash       40.3s ± 1%      40.3s ± 1%    ~           (p=0.468 n=24+24)
    
    name       old alloc/op    new alloc/op    delta
    Template      57.3MB ± 0%     57.0MB ± 0%  -0.51%        (p=0.000 n=25+23)
    Unicode       41.1MB ± 0%     41.0MB ± 0%  -0.27%        (p=0.000 n=25+24)
    GoTypes        191MB ± 0%      190MB ± 0%  -0.46%        (p=0.000 n=25+25)
    Compiler       839MB ± 0%      834MB ± 0%  -0.62%        (p=0.000 n=24+24)
    
    name       old allocs/op   new allocs/op   delta
    Template        500k ± 0%       498k ± 0%  -0.42%        (p=0.000 n=25+25)
    Unicode         400k ± 0%       399k ± 0%  -0.22%        (p=0.000 n=24+25)
    GoTypes        1.50M ± 0%      1.49M ± 0%  -0.41%        (p=0.000 n=23+25)
    Compiler       6.04M ± 0%      6.00M ± 0%  -0.59%        (p=0.000 n=25+25)
    
    Change-Id: I7d3f177d1ab4a75a4c047fa465f2eee38747603f
    Reviewed-on: https://go-review.googlesource.com/21178
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0cd9edf6e8346f63a39328c9361f4b44cee30189
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Fri Mar 25 18:17:37 2016 +0100

    cmd/go: fix proc-count accumulation in benchmark name
    
    Fixes #14964
    
    Change-Id: I5f772426081efaa9315c4ecaf60de850af324f1d
    Reviewed-on: https://go-review.googlesource.com/21139
    Reviewed-by: Ahmed Waheed <oneofone@gmail.com>
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ad391c908b8e4532937ee912caf8ddb8f3891ef8
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Mar 17 23:18:14 2016 +0100

    fmt: split doPrint into two specialized functions
    
    Remove format flag reset from doPrint. Flags will not be set in
    doPrint and printArg will not return with flags modified.
    
    Remove the extra arguments addspace and addnewline and split up
    doPrint into two simpler and specialized functions.
    
    Change-Id: Ib884d027abfbb31c6f01b008f51d6d76fc0c1a17
    Reviewed-on: https://go-review.googlesource.com/21181
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit b9daf0a408acb4099eda268ed80203f83ecd3fa5
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Tue Nov 24 02:57:01 2015 -0700

    net/http: add more audio/video mime sniffing
    
    Following the spec at
      https://mimesniff.spec.whatwg.org/#matching-an-audio-or-video-type-pattern
    
    Adds signatures for:
    + audio/aiff
    + audio/basic
    + audio/midi
    + audio/mpeg
    + video/avi
    
    Updates the signature for:
    + application/ogg
    
    Also updates the pattern matching algorithm in
      https://mimesniff.spec.whatwg.org/#matching-a-mime-type-pattern
    by implementing clause 4 that dictates that the number of bytes in
    the pattern must match the number of bytes in the mask.
    
    Fixes #13383
    
    Change-Id: Ie321f392e6570299c17176adf1c75f62f357e1e8
    Reviewed-on: https://go-review.googlesource.com/17132
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d53287d0c37de1e624648dc9a1b1be356a2acf13
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 25 18:07:19 2016 -0700

    cmd/compile: simplify keydup
    
    Use a type switch instead of calling Val.Ctype (which in turn just
    uses a type switch anyway).
    
    Use continue statements to simplify the control flow.
    
    Change-Id: I65c139d706d4d78e5b4ce09d1b1505a3e424496b
    Reviewed-on: https://go-review.googlesource.com/21173
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c61a55d831d8042e4af48442e3a0db7d80539e5d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 25 15:57:25 2016 -0700

    misc/cgo/testcarchive: more robust TestSignalForwardingExternal
    
    Try to avoid a race condition in the test.  Passed 500 times on my
    laptop.
    
    Fixes #14956.
    
    Change-Id: I5de2e1e3623832f0ab4f180149f7c57ce7cd23c0
    Reviewed-on: https://go-review.googlesource.com/21171
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 080e2d4320adfb63fa9b67e163341733a15f35f6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Mar 25 17:19:59 2016 -0700

    cmd/compile: don’t generate Nodes for PCDATA
    
    We were allocating two Nodes just to help Naddr
    fill in Type and Offset.
    Fill them in directly instead.
    
    Passes toolstash -cmp.
    
    name       old time/op     new time/op     delta
    Template       324ms ± 5%      320ms ± 5%  -1.34%        (p=0.033 n=25+22)
    Unicode        164ms ± 6%      162ms ± 5%    ~           (p=0.152 n=24+23)
    GoTypes        1.05s ± 5%      1.05s ± 6%    ~           (p=0.653 n=23+25)
    Compiler       5.12s ± 4%      5.06s ± 3%  -1.13%        (p=0.006 n=25+23)
    MakeBash       41.8s ± 2%      41.6s ± 3%  -0.65%        (p=0.024 n=24+24)
    
    name       old alloc/op    new alloc/op    delta
    Template      57.8MB ± 0%     57.3MB ± 0%  -0.87%        (p=0.000 n=25+25)
    Unicode       41.2MB ± 0%     41.1MB ± 0%  -0.29%        (p=0.000 n=24+22)
    GoTypes        193MB ± 0%      191MB ± 0%  -0.97%        (p=0.000 n=22+25)
    Compiler       850MB ± 0%      840MB ± 0%  -1.28%        (p=0.000 n=25+25)
    
    name       old allocs/op   new allocs/op   delta
    Template        506k ± 0%       500k ± 0%  -1.15%        (p=0.000 n=25+25)
    Unicode         402k ± 0%       400k ± 0%  -0.37%        (p=0.000 n=24+25)
    GoTypes        1.52M ± 0%      1.50M ± 0%  -1.42%        (p=0.000 n=25+25)
    Compiler       6.16M ± 0%      6.04M ± 0%  -2.05%        (p=0.000 n=24+25)
    
    Change-Id: Ia80d28b32023a620d9ddf99c1252c16fa6477b3c
    Reviewed-on: https://go-review.googlesource.com/21174
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 93c5fbf3905920a8d0cb0618816165f368e9d965
Author: Christopher Nelson <nadiasvertex@gmail.com>
Date:   Thu Mar 24 17:50:21 2016 -0400

    misc/cgo/testcarchive: split main.c into unix and non-unix
    
    This is in support of https://golang.org/cl/18057 which adds
    support for c-archive to the Windows platform.
    
    The signal handling tests do not compile on Windows. This splits
    them out into a separate main_unix.c file, and conditionally
    includes them for non-Windows platforms.
    
    Change-Id: Ic79ce83da7656d6703505e514554748a482b81a1
    Reviewed-on: https://go-review.googlesource.com/21086
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 135109d241da1427461fdb19656a976b3e9c7b22
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 25 15:34:55 2016 -0700

    cmd/compile: reduce slice header allocation when parsing := assignments
    
    The colas function allocates 2 slice headers in each call (via Nodes.Set)
    only to throw away those slice headers in the common case where both the
    lhs and rhs in "lhs := rhs" have length 1.
    
    Avoid the Nodes.Set calls in those cases. For make.bash, this eliminates
    ~63,000 slice header allocations.
    
    Also: Minor cleanups in colasdefn.
    
    Change-Id: Ib114a67c3adeb8821868bd71a5e0f5e2e19fcd4f
    Reviewed-on: https://go-review.googlesource.com/21170
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a7f7a9cca749a676cee73f28e48c6f7bffa64807
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Mar 24 19:35:10 2016 -0400

    runtime, runtime/cgo: save callee-saved FP registers on arm64
    
    For #14876.
    
    Change-Id: I0992859264cbaf9c9b691fad53345bbb01b4cf3b
    Reviewed-on: https://go-review.googlesource.com/21085
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 71916437fb2bd788a9ce491830f4233aee4a9149
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Mar 24 19:12:44 2016 -0400

    runtime/cgo: save callee-saved xmm registers on windows/amd64
    
    For #14876.
    
    Change-Id: I33947f74e8058437a784862f1f064974afc99250
    Reviewed-on: https://go-review.googlesource.com/21084
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit eb033b1d22eaf4dc9dbdb2839c4174d905529eb5
Author: Caleb Spare <cespare@gmail.com>
Date:   Fri Mar 25 10:06:19 2016 -0700

    compress/gzip: clean up zero-mtimes test
    
    - Fix a typo.
    - Skip this test on -short on non-builders.
    
    Change-Id: Id102eceb59451694bf92b618e02ccee6603b6852
    Reviewed-on: https://go-review.googlesource.com/21113
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit b88147c303f7b2b52ca0191a96fa1a3249e46297
Author: David Benjamin <davidben@google.com>
Date:   Mon Feb 15 11:56:18 2016 -0500

    crypto/tls: Update references to draft-ietf-tls-downgrade-scsv-00.
    
    It's RFC 7507 now.
    
    Change-Id: Iccd6c65f9d4b1f4d17ee068dee4576a512ba8405
    Reviewed-on: https://go-review.googlesource.com/21154
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d0801f70b24ca90f2852f59f9f46865e02772545
Author: David Benjamin <davidben@google.com>
Date:   Mon Jan 4 16:11:02 2016 -0800

    encoding/asn1: tags should be encoded in minimal form.
    
    High tag number form may not be used for tag numbers that fit in low tag number
    form.
    
    Change-Id: I93edde0e1f86087047e0b3f2e55d6180b01e78bf
    Reviewed-on: https://go-review.googlesource.com/18224
    Reviewed-by: Adam Langley <agl@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 562e38c0afedc32887eccb093fa710b36eb7588d
Author: Joe Sylve <joe.sylve@gmail.com>
Date:   Fri Mar 25 13:51:56 2016 -0500

    runtime: fix signal handling on Solaris
    
    This fixes the problems with signal handling that were inadvertently
    introduced in https://go-review.googlesource.com/21006.
    
    Fixes #14899
    
    Change-Id: Ia746914dcb3146a52413d32c57b089af763f0810
    Reviewed-on: https://go-review.googlesource.com/21145
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 640164bc1ca8382fc02ab978f7857d01d4262eb7
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Mar 25 14:28:15 2016 -0400

    reflect: test name data is aligned
    
    For #14962.
    
    Change-Id: I3539d882487c99dee99ac953e039b79c6b963cf9
    Reviewed-on: https://go-review.googlesource.com/21150
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit edb19aa1cdc5a712d85c77a76b90f69bd9a2b673
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Thu Mar 24 22:46:10 2016 +0530

    cmd/go: stat the archive file only when executing the commands
    
    Fixes #14944
    
    Change-Id: I73e0997cb6ebaeced1045b0ddadac893319bd78f
    Reviewed-on: https://go-review.googlesource.com/21065
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 8cb74e1d1812caee1705eef94272c959911ee9b3
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Mar 25 11:03:47 2016 -0400

    reflect: name interface type that pins method info
    
    I recently added TestUnexportedMethods which uses an interface type
    to pin type information for an unexported method. But as written,
    the interface type is not accessible to the reflect package.
    
    You can imagine a future compiler optimization realizing that and
    removing the type information for f. In fact, cl/20901 happens to
    do that.
    
    Change-Id: I1ddb67f50cb9b5737253b58f10545f3de652c29d
    Reviewed-on: https://go-review.googlesource.com/21112
    Reviewed-by: Michel Lespinasse <walken@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6b0688f7421aeef904d40a374bae75c37ba0b8b4
Author: Marvin Stenger <marvin.stenger94@gmail.com>
Date:   Thu Mar 24 17:42:01 2016 +0100

    runtime: speed up growslice by avoiding divisions 2
    
    This is a follow-up of https://go-review.googlesource.com/#/c/20653/
    
    Special case computation for slices with elements of byte size or
    pointer size.
    
    name                      old time/op  new time/op  delta
    GrowSliceBytes-4          86.2ns ± 3%  75.4ns ± 2%  -12.50%  (p=0.000 n=20+20)
    GrowSliceInts-4            161ns ± 3%   136ns ± 3%  -15.59%  (p=0.000 n=19+19)
    GrowSlicePtr-4             239ns ± 2%   233ns ± 2%   -2.52%  (p=0.000 n=20+20)
    GrowSliceStruct24Bytes-4   258ns ± 3%   256ns ± 3%     ~     (p=0.134 n=20+20)
    
    Change-Id: Ice5fa648058fe9d7fa89dee97ca359966f671128
    Reviewed-on: https://go-review.googlesource.com/21101
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1664ff96f76e4f2cfdbaabfe286cdeff0426a013
Author: Elias Naur <elias.naur@gmail.com>
Date:   Fri Mar 25 15:40:44 2016 +0100

    misc/ios: fix exec wrapper locking
    
    The exec wrapper lock file was opened, locked and then never used
    again, assuming it would close and unlock at process exit.
    However, the garbage collector could collect and run the *os.File
    finalizer that closes the file prematurely, rendering the lock
    ineffective.
    
    Make the lock global so that the lock is live during the entire
    execution.
    
    (Hopefully) fix the iOS builders.
    
    Change-Id: I62429e92042a0a49c4f1ea553fdb32b6ea53a43e
    Reviewed-on: https://go-review.googlesource.com/21137
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 4d920410d2a61b9df697337faff3944834b55162
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Mar 24 22:32:38 2016 -0400

    cmd/compile: avoid pointers in go.string.* symbols
    
    When creating binaries for dynamic linking, the linker moves
    read-only data symbols that contain pointers into relro sections.
    It is not setup for handling a go.string symbol moving to relro.
    
    Instead of teaching it how (because go.string symbols with pointers
    are unusual anyhow), put the data in a type.. section.
    
    Fixes the android builder.
    
    Change-Id: Ica4722d32241643c060923517b90276ff8ac6b07
    Reviewed-on: https://go-review.googlesource.com/21110
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 41e176fbe09de9487fad9577df8222d2073d6d21
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Mar 25 07:33:39 2016 -0700

    cmd/compile/ssa: generate less garbage in schedule
    
    Passes toolstash -cmp.
    
    name       old alloc/op    new alloc/op    delta
    Template      58.5MB ± 0%     57.8MB ± 0%  -1.15%        (p=0.000 n=10+10)
    Unicode       41.3MB ± 0%     41.2MB ± 0%  -0.17%        (p=0.000 n=10+10)
    GoTypes        196MB ± 0%      193MB ± 0%  -1.26%        (p=0.000 n=10+10)
    Compiler       863MB ± 0%      850MB ± 0%  -1.49%        (p=0.000 n=10+10)
    
    name       old allocs/op   new allocs/op   delta
    Template        522k ± 0%       507k ± 0%  -2.99%        (p=0.000 n=10+10)
    Unicode         403k ± 0%       401k ± 0%  -0.42%        (p=0.000 n=10+10)
    GoTypes        1.58M ± 0%      1.52M ± 0%  -3.61%        (p=0.000 n=10+10)
    Compiler       6.47M ± 0%      6.17M ± 0%  -4.62%        (p=0.000 n=10+10)
    
    Change-Id: Ia7a6242e8d226b41966c344d253814dcce6424a8
    Reviewed-on: https://go-review.googlesource.com/21141
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 967b9940b4695f4d21e1f8484cbc7a5b89cce076
Author: Richard Miller <miller.research@gmail.com>
Date:   Fri Mar 25 12:50:35 2016 +0000

    runtime: avoid fork/exit race in plan9
    
    There's a race between runtime.goexitsall killing all OS processes
    of a go program in order to exit, and runtime.newosproc forking a
    new one.  If the new process has been created but not yet stored
    its pid in m.procid, it will not be killed by goexitsall and
    deadlock results.
    
    This CL prevents the race by making the newly forked process
    check whether the program is exiting.  It also prevents a
    potential "shoot-out" if multiple goroutines call Exit at
    the same time, which could possibly lead to two processes
    killing each other and leaving the rest deadlocked.
    
    Change-Id: I3170b4a62d2461f6b029b3d6aad70373714ed53e
    Reviewed-on: https://go-review.googlesource.com/21135
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Marvin Stenger <marvin.stenger94@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David du Colombier <0intro@gmail.com>

commit ea0386f85f19601ed7befb44299eb8e576a482fd
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Mar 18 12:52:52 2016 +0100

    runtime: improve randomized stealing logic
    
    During random stealing we steal 4*GOMAXPROCS times from random procs.
    One would expect that most of the time we check all procs this way,
    but due to low quality PRNG we actually miss procs with frightening
    probability. Below are modelling experiment results for 1e6 tries:
    
    GOMAXPROCS = 2 : missed 1 procs 7944 times
    
    GOMAXPROCS = 3 : missed 1 procs 101620 times
    GOMAXPROCS = 3 : missed 2 procs 3571 times
    
    GOMAXPROCS = 4 : missed 1 procs 63916 times
    GOMAXPROCS = 4 : missed 2 procs 61 times
    GOMAXPROCS = 4 : missed 3 procs 16 times
    
    GOMAXPROCS = 5 : missed 1 procs 133136 times
    GOMAXPROCS = 5 : missed 2 procs 1025 times
    GOMAXPROCS = 5 : missed 3 procs 101 times
    GOMAXPROCS = 5 : missed 4 procs 15 times
    
    GOMAXPROCS = 8 : missed 1 procs 151765 times
    GOMAXPROCS = 8 : missed 2 procs 5057 times
    GOMAXPROCS = 8 : missed 3 procs 1726 times
    GOMAXPROCS = 8 : missed 4 procs 68 times
    
    GOMAXPROCS = 12 : missed 1 procs 199081 times
    GOMAXPROCS = 12 : missed 2 procs 27489 times
    GOMAXPROCS = 12 : missed 3 procs 3113 times
    GOMAXPROCS = 12 : missed 4 procs 233 times
    GOMAXPROCS = 12 : missed 5 procs 9 times
    
    GOMAXPROCS = 16 : missed 1 procs 237477 times
    GOMAXPROCS = 16 : missed 2 procs 30037 times
    GOMAXPROCS = 16 : missed 3 procs 9466 times
    GOMAXPROCS = 16 : missed 4 procs 1334 times
    GOMAXPROCS = 16 : missed 5 procs 192 times
    GOMAXPROCS = 16 : missed 6 procs 5 times
    GOMAXPROCS = 16 : missed 7 procs 1 times
    GOMAXPROCS = 16 : missed 8 procs 1 times
    
    A missed proc won't lead to underutilization because we check all procs
    again after dropping P. But it can lead to an unpleasant situation
    when we miss a proc, drop P, check all procs, discover work, acquire P,
    miss the proc again, repeat.
    
    Improve stealing logic to cover all procs.
    Also don't enter spinning mode and try to steal when there is nobody around.
    
    Change-Id: Ibb6b122cc7fb836991bad7d0639b77c807aab4c2
    Reviewed-on: https://go-review.googlesource.com/20836
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: Marvin Stenger <marvin.stenger94@gmail.com>

commit 44189299bfd98eff20d1d84c0c7ee2310124fe38
Author: Elias Naur <elias.naur@gmail.com>
Date:   Fri Mar 25 11:14:29 2016 +0100

    compress/gzip: skip mtime test when GOROOT doesn't exist
    
    Fixes the iOS builders
    
    Change-Id: I5097ca19048381ffb5a4c5ea038b7c4aa18ee4b7
    Reviewed-on: https://go-review.googlesource.com/21132
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4e31221bd1ea3e35db4a236f656619dbba13ff6d
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 25 10:16:40 2016 +0100

    cmd/go: remove double space in template
    
    Change-Id: I6113145baa727b9fd103765f74dc5d7af86dfdf8
    Reviewed-on: https://go-review.googlesource.com/21131
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 31e5d83525acbba07b38106952834c9a44b855a7
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed Mar 23 21:24:22 2016 +0100

    testing: probe with N=1
    
    Change control flow to probe with N=1. This calls benchFunc
    the same number of times as the old implementation in the
    absence of subbenchmarks.
    
    To be compatible with existing tools, benchmarking only
    prints a line for "leaf" benchmarks. This means, though, that
    the name of a benchmark can only be printed after the first
    iteration.
    
    Issue #14863
    
    Change-Id: Ic7b9b89b058f8ebb5287755f24f9e47df8c9537c
    Reviewed-on: https://go-review.googlesource.com/21043
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 2e79d7fbee7d635f93940c482cd366ad4ae551a1
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed Mar 23 17:22:09 2016 +0100

    cmd/go: update alldocs.go
    
    Also added go:generate directive.
    
    Change-Id: Ib1f0eddc75e3c47a4d904786a29b964a35b18456
    Reviewed-on: https://go-review.googlesource.com/21042
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>

commit fdba5a7544e54227c910ae3b26511c718df786a1
Author: Dominik Honnef <dominik@honnef.co>
Date:   Mon Mar 21 00:12:18 2016 +0100

    all: delete dead non-test code
    
    This change removes a lot of dead code. Some of the code has never been
    used, not even when it was first commited. The rest shouldn't have
    survived refactors.
    
    This change doesn't remove unused routines helpful for debugging, nor
    does it remove code that's used in commented out blocks of code that are
    only unused temporarily. Furthermore, unused constants weren't removed
    when they were part of a set of constants from specifications.
    
    One noteworthy omission from this CL are about 1000 lines of unused code
    in cmd/fix, 700 lines of which are the typechecker, which hasn't been
    used ever since the pre-Go 1 fixes have been removed. I wasn't sure if
    this code should stick around for future uses of cmd/fix or be culled as
    well.
    
    Change-Id: Ib714bc7e487edc11ad23ba1c3222d1fd02e4a549
    Reviewed-on: https://go-review.googlesource.com/20926
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6a6a0734163567545aed2b558f24f2aafc6c9072
Author: Dmitry Chestnykh <dchest@gmail.com>
Date:   Tue Mar 22 16:41:11 2016 +0100

    crypto/hmac: simplify implementation
    
    Store already padded keys instead of storing key and padding it during
    Reset and Sum. This simplifies code and makes Reset-Write-Sum sequences
    faster, which helps /x/crypto/pbkdf2.
    
    HMAC benchmark:
    
    benchmark                    old ns/op     new ns/op     delta
    BenchmarkHMACSHA256_1K-4     7669          7613          -0.73%
    BenchmarkHMACSHA256_32-4     1880          1737          -7.61%
    
    benchmark                    old MB/s     new MB/s     speedup
    BenchmarkHMACSHA256_1K-4     133.52       134.50       1.01x
    BenchmarkHMACSHA256_32-4     17.02        18.41        1.08x
    
    PBKDF2 benchmark:
    
    benchmark                       old ns/op     new ns/op     delta
    BenchmarkPBKDF2HMACSHA256-4     1943196       1807699       -6.97%
    
    Change-Id: I6697028370c226715ab477b0844951a83eb3488c
    Reviewed-on: https://go-review.googlesource.com/21024
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>

commit 5c8674a497724f509737a3523e7c2ddf94e3a72b
Author: John Jeffery <jjeffery@sp.com.au>
Date:   Sun Mar 20 20:24:12 2016 +1000

    reflect: add method StructTag.Lookup
    
    The Lookup method provides a way to extract a tag value, while
    determining whether the tag key exists in the struct field's tag.
    
    Fixes #14883
    
    Change-Id: I7460cb68f0ca1aaa025935050b9e182efcb64db3
    Reviewed-on: https://go-review.googlesource.com/20864
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 139fad21b937dc0b405d243e3abe33429890947f
Author: Caleb Spare <cespare@gmail.com>
Date:   Wed Mar 23 17:33:32 2016 -0700

    all: zero mtimes in testdata gz files
    
    Fixes #14937.
    
    Change-Id: Iea11a32230d44d5a43f8aec812d25f13bce85895
    Reviewed-on: https://go-review.googlesource.com/21038
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 098b62644f9388a8afba90d3e74ea7d7497def4c
Author: Caleb Spare <cespare@gmail.com>
Date:   Wed Mar 23 23:14:35 2016 -0700

    encoding/json: add (*Encoder).Indent
    
    Fixes #6492.
    
    Change-Id: Ibc633c43a6d134bb140addb59780a5758b35a5c5
    Reviewed-on: https://go-review.googlesource.com/21057
    Run-TryBot: Caleb Spare <cespare@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ba333a3061726b75a8e18fb542f4a43abd1d9999
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Mar 24 20:45:54 2016 +0100

    cmd/go: remove limits on parallel tasks in the Go command for iOS
    
    Ther darwin/arm{,64} exec wrapper now limits the number of concurrent
    executions to 1, so remove the higher level parallel task limit from
    the Go command.
    
    Change-Id: Id84f65c3908305bde0452b3c8db6df8c5a8881bb
    Reviewed-on: https://go-review.googlesource.com/21100
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 95add73abf50dedec79b58ce4c58664eccfcca4d
Author: Elias Naur <elias.naur@gmail.com>
Date:   Fri Mar 25 01:27:34 2016 +0100

    misc/cgo/testcarchive: fix build
    
    I failed to rebase (and re-test) CL 21102 before submit, which meant
    that two extra tests sneaked into testcarchive that still referenced
    runtime.GOOS and runtime.GOARCH.
    
    Convert the new tests.
    
    While we're here, make sure pending tasks are flushed before running
    the host tests. If not, the "##### misc/cgo/testcarchive" banner
    and "PASS" won't show up in the all.bash output.
    
    Change-Id: I41fc4ec9515f9a193fa052f7c31fac452153c897
    Reviewed-on: https://go-review.googlesource.com/21106
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 24ce64d1a967eb9c4f1a42e7371362b09920bd60
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Mar 21 13:21:55 2016 -0400

    cmd/compile, runtime: new static name encoding
    
    Create a byte encoding designed for static Go names.
    
    It is intended to be a compact representation of a name
    and optional tag data that can be turned into a Go string
    without allocating, and describes whether or not it is
    exported without unicode table.
    
    The encoding is described in reflect/type.go:
    
    // The first byte is a bit field containing:
    //
    //      1<<0 the name is exported
    //      1<<1 tag data follows the name
    //      1<<2 pkgPath *string follow the name and tag
    //
    // The next two bytes are the data length:
    //
    //       l := uint16(data[1])<<8 | uint16(data[2])
    //
    // Bytes [3:3+l] are the string data.
    //
    // If tag data follows then bytes 3+l and 3+l+1 are the tag length,
    // with the data following.
    //
    // If the import path follows, then ptrSize bytes at the end of
    // the data form a *string. The import path is only set for concrete
    // methods that are defined in a different package than their type.
    
    Shrinks binary sizes:
    
            cmd/go: 164KB (1.6%)
            jujud:  1.0MB (1.5%)
    
    For #6853.
    
    Change-Id: I46b6591015b17936a443c9efb5009de8dfe8b609
    Reviewed-on: https://go-review.googlesource.com/20968
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 0a82ed5d7c6db2c01a840e2a494cb6ff22a02823
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Mar 24 21:47:02 2016 +0100

    misc/cgo/testcarchive: re-enable c-archive test on iOS and Android
    
    The c-archive test were recently converted from shell script to Go.
    Unfortunately, it also lost the ability to target iOS and Android
    that lack C compilers and require exec wrappers.
    
    Compile the c-archive test for the host and run it with the target
    GOOS/GOARCH environment. Change the test to rely on go env GOOS
    and go env GOARCH instead of runtime.GOOS and runtime.GOARCH.
    
    Fixes #8345
    
    Change-Id: I290ace2f7e96b87c55d99492feb7d660140dcb32
    Reviewed-on: https://go-review.googlesource.com/21102
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0104a31b8fbcbe52728a08867b26415d282c35d2
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 24 16:49:47 2016 +1100

    vendor: move golang.org/x/net/http2/hpack back to vendor
    
    Updates #14047
    
    Change-Id: I7e314e2c7e3e8da18ab023729740fbc9ea3f661e
    Reviewed-on: https://go-review.googlesource.com/21063
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit afafab3b9736345d150445840dbb603c883bfde4
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Thu Mar 24 13:40:11 2016 +0100

    cmd/compile: simplify shifts when the counter fits 6 bits.
    
    In f the extra & 63 is redundant because SHRQ already
    looks at the bottom 6 bits only. This is a trick on AMD64
    to get rid of CMPQ/SBBQ/ANDQ if one knows that the shift
    counter is small.
    
    func f(x uint64, s uint) uint64 {
            return x >> (s & 63)
    }
    
    Change-Id: I4861c902168dabec9a6a14a85750246dde94fc08
    Reviewed-on: https://go-review.googlesource.com/21073
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d8ee180ab2722e92c568e322fbc8690688f992e3
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Thu Mar 24 08:48:41 2016 +0100

    cmd/compile: fold more of CMPQ and ANDQ
    
    g used to produce CMPQ/SBBQ/ANDQ, but f didn't even though
    s&15 is at most s&63.
    
    func f(x uint64, s uint) uint64 {
            return x >> (s & 63)
    }
    func g(x uint64, s uint) uint64 {
            return x >> (s & 15)
    }
    
    Change-Id: Iab4a1a6e10b471dead9f1203e9d894677cf07bb2
    Reviewed-on: https://go-review.googlesource.com/21048
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit df2b2eb63db3f771c41be4d97ac6fb6b0c5f8c48
Author: Joe Sylve <joe.sylve@gmail.com>
Date:   Tue Mar 22 22:11:42 2016 -0500

    runtime: improve last ditch signal forwarding for Unix libraries
    
    The current runtime attempts to forward signals generated by non-Go
    code to the original signal handler.  If it can't call the original
    handler directly, it currently attempts to re-raise the signal after
    resetting the handler.  In this case, the original context is lost.
    
    This fix prevents that problem by simply returning from the go signal
    handler after resetting the original handler.  It only does this when
    the original handler is the system default handler, which in all cases
    is known to not recover.  The signal is not reset, so it is retriggered
    and the original handler takes over with the proper context.
    
    Fixes #14899
    
    Change-Id: Ib1c19dfa4b50d9732d7a453de3784c8141e1cbb3
    Reviewed-on: https://go-review.googlesource.com/21006
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fb49655d7b3a319dfbf48ad55dd7951a91668949
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Mar 24 19:55:40 2016 +0100

    os: skip TestStatStdin on Android
    
    Android doesn't (generally) have /bin/sh.
    
    Change-Id: I343817c342e3473d09c85155761682b5ddb043e4
    Reviewed-on: https://go-review.googlesource.com/21075
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 44532f1a9defb9cc4f48e74a7fa1ffd1dfa67022
Author: Marvin Stenger <marvin.stenger94@gmail.com>
Date:   Thu Mar 24 01:55:42 2016 +0100

    runtime: fix inconsistency in slice.go
    
    Fixes #14938.
    
    Additionally some simplifications along the way.
    
    Change-Id: I2c5fb7e32dcc6fab68fff36a49cb72e715756abe
    Reviewed-on: https://go-review.googlesource.com/21046
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit f045ca8d45c1f06312a022e40677eec3fc2e0ed3
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Mar 24 16:03:07 2016 +0100

    misc/ios: serialize iOS execution
    
    The iOS exec wrapper use complicated machinery to run a iOS binary
    on a device.
    Running several binaries concurrently doesn't work (reliably), which
    can break tests running concurrently. For my setup, the
    runtime:cpu124 and sync_cpu tests can't run reliably without one of them
    crashing.
    
    Add a file lock to the exec wrapper to serialize execution.
    
    Fixes #14318 (for me)
    
    Change-Id: I023610e014b327f8d66f1d2fd2e54dd0e56f2be0
    Reviewed-on: https://go-review.googlesource.com/21074
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit fc4358951a451c18267c4eb9ef0fb941963cc995
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 23 15:27:23 2016 -0700

    cmd/compile: avoid allocating a Nodes for readonly method receivers
    
    We were allocating a Nodes for common method calls
    that did not modify the Nodes.
    Though there is no clear wall time impact,
    this significantly reduces the number of allocations,
    so it seems worth doing.
    
    Passes toolstash -cmp.
    
    name       old alloc/op    new alloc/op    delta
    Template      59.0MB ± 0%     58.6MB ± 0%   -0.81%        (p=0.000 n=25+25)
    Unicode       41.4MB ± 0%     41.3MB ± 0%   -0.18%        (p=0.000 n=25+25)
    GoTypes        198MB ± 0%      197MB ± 0%   -0.80%        (p=0.000 n=24+25)
    Compiler       875MB ± 0%      865MB ± 0%   -1.09%        (p=0.000 n=25+25)
    
    name       old allocs/op   new allocs/op   delta
    Template        581k ± 0%       520k ± 0%  -10.42%        (p=0.000 n=25+25)
    Unicode         413k ± 0%       403k ± 0%   -2.30%        (p=0.000 n=25+25)
    GoTypes        1.78M ± 0%      1.58M ± 0%  -11.18%        (p=0.000 n=25+25)
    Compiler       7.66M ± 0%      6.47M ± 0%  -15.51%        (p=0.000 n=25+25)
    
    Change-Id: I012a9f4b333821bdf61b4f2bdff4ce5c3b5d3057
    Reviewed-on: https://go-review.googlesource.com/21056
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 570a2b0eecc6ae8e398b2f1b56785cc9cacf0dbe
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Mar 24 10:16:46 2016 +0100

    cmd/dist: skip testcarchive test in Android and iOS
    
    CL 20892 converted the misc/cgo/testcarchive test to Go.
    Unfortunately, dist does not (yet) support tests running off the host
    so the testcarchive is disabled for now.
    
    For #14318
    
    Change-Id: Iab3d0a7b5309187a603b48f22a7fa736f089f89d
    Reviewed-on: https://go-review.googlesource.com/21070
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 0bb62299b0a37b68fa3bb40a0fe449858e162809
Author: Elias Naur <elias.naur@gmail.com>
Date:   Wed Mar 23 16:17:44 2016 +0100

    misc/ios: deflake tests on darwin/arm{,arm64}
    
    A retry mechanism is in place to combat the inherent flakiness of
    launching iOS test binaries. Before it covered just the starting of
    lldb; expand it to cover the setup steps as well. Note that the
    running of the binary itself is (still) not retried, to avoid
    covering over genuine bugs.
    
    On my test device (iPhone 5S, iOS 9.3) starting lldb can take longer
    than 10 seconds, so increase the timeout for that.
    Furthermore, some basic steps such as setting breakpoints in lldb
    can take longer than the 1 second timeout. Increase that timeout
    as well, to 2 seconds.
    
    Finally, improve the error message for when ios-deploy is not
    installed.
    
    For #14318
    
    Change-Id: Iba41d1bd9d023575b9454cb577b08f8cae081c2a
    Reviewed-on: https://go-review.googlesource.com/21072
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 5f08e480f447a7f197f41686bf672d39b10c3518
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Mar 24 10:40:34 2016 +0100

    misc/ios: pass through SIGCONT in the exec wrapper
    
    Instruct lldb to pass through SIGCONT unhindered when running iOS
    tests. Fixes the TestSIGCONT test in os/signal.
    
    For #14318
    
    Change-Id: I669264208cc3d6ecae9fbc8790e0b753a93a5e04
    Reviewed-on: https://go-review.googlesource.com/21071
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit be10c515003c22b8b4f0d98d1085687efbcf6955
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Mar 24 08:39:54 2016 +0100

    runtime/cgo: block signals to the iOS mach exception handler
    
    For darwin/arm{,64} a non-Go thread is created to convert
    EXC_BAD_ACCESS to panics. However, the Go signal handler refuse to
    handle signals that would otherwise be ignored if they arrive at
    non-Go threads.
    
    Block all (posix) signals to that thread, making sure that
    no unexpected signals arrive to it. At least one test, TestStop in
    os/signal, depends on signals not arriving on any non-Go threads.
    
    For #14318
    
    Change-Id: I901467fb53bdadb0d03b0f1a537116c7f4754423
    Reviewed-on: https://go-review.googlesource.com/21047
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit b9feb91f32919e44c89205990314c9a6d3a9b2d1
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Mar 24 20:57:53 2016 +1100

    cmd/compile: minor cleanups
    
    Some minor scoping cleanups found by a very old version of grind.
    
    Change-Id: I1d373817586445fc87e38305929097b652696fdd
    Reviewed-on: https://go-review.googlesource.com/21064
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 633e41432c7c617809ddb22c0c3f2fc214a26b99
Author: Tilman Dilo <tilman.dilo@gmail.com>
Date:   Wed Mar 23 22:38:52 2016 +0100

    image/png: ignore trailing IDAT chunks
    
    Ignore superfluous trailing IDAT chunks which were not consumed when decoding
    the image. This change fixes decoding of valid images in which a zero-length
    IDAT chunk appears after the actual image data. It also prevents decoding of
    trailing garbage IDAT chunks or maliciously embedded additional images.
    
    Fixes #14936
    
    Change-Id: I8c76cfa9a03496d9576f72bed2db109271f97c5e
    Reviewed-on: https://go-review.googlesource.com/21045
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit ebd67ba588eabd5bf968b5bd14dff21a1a1b1be4
Author: Yasuhiro Matsumoto <mattn.jp@gmail.com>
Date:   Fri Mar 18 13:00:26 2016 +0900

    os: fix Stdin.Stat() on windows
    
    If name is /dev/{stdin,stdout,stderr}, return fileInfo.
    
    Fixes #14853.
    
    Change-Id: Ibf7d1ae7b9f3dc43f6ed7c905ea2c5102e1971cc
    Reviewed-on: https://go-review.googlesource.com/20845
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit ddcf8d402a0f8b7556dad49005ff578244baa11c
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Thu Mar 3 23:53:39 2016 +0530

    net/http: redirect if the URL path is a dir & doesn't end in a slash
    
    Fixes #13996
    
    Change-Id: I9b2c7fba0705900aca9a70bc6a2687667a9a976c
    Reviewed-on: https://go-review.googlesource.com/20128
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit edca4cda8858c6af5a9236d81b8654cb294054c8
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Mar 23 16:01:15 2016 +1100

    cmd/compile/internal/gc: remove remaining Nod(OXXX, ...)
    
    Remove almost all the remaining Nod(OXXX, ... ) uses. The performance
    change is due entirely to the changes to func temp(*Type). The other
    cleanups have no effect, as expected.
    
    I'll address the remaining Nod(OXXX, ...) uses in a followup CL as they
    are very sensitive to change.
    
    lucky(~/go/src/cmd/compile) % benchstat /tmp/{old,new}.txt
    name      old time/op    new time/op    delta
    Template     391ms ± 6%     385ms ± 6%    ~     (p=0.127 n=19+20)
    GoTypes      1.27s ± 2%     1.27s ± 2%    ~     (p=0.172 n=19+19)
    Compiler     6.17s ± 2%     6.15s ± 2%    ~     (p=0.647 n=19+20)
    
    name      old alloc/op   new alloc/op   delta
    Template    63.7MB ± 0%    63.4MB ± 0%  -0.35%  (p=0.000 n=16+20)
    GoTypes      219MB ± 0%     218MB ± 0%  -0.38%  (p=0.000 n=20+20)
    Compiler     980MB ± 0%     976MB ± 0%  -0.38%  (p=0.000 n=20+20)
    
    name      old allocs/op  new allocs/op  delta
    Template      586k ± 0%      584k ± 0%  -0.30%  (p=0.000 n=20+20)
    GoTypes      1.80M ± 0%     1.79M ± 0%  -0.31%  (p=0.000 n=20+20)
    Compiler     7.74M ± 0%     7.71M ± 0%  -0.34%  (p=0.000 n=20+20)
    
    Change-Id: Ie21a5443c33a23ce30f987bdddec9fe350365d35
    Reviewed-on: https://go-review.googlesource.com/21017
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit babc73547eed0fb75f4b507e02bd8235acdbc8e9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 23 16:43:17 2016 -0700

    cmd/compile: remove redundant parameter from finishcompare
    
    This is follow-up 3 of 3 to CL 20959.
    
    Passes toolstash -cmp.
    
    Change-Id: I06efded21bbc970cbefa10e8f2cac1ebc6942e1b
    Reviewed-on: https://go-review.googlesource.com/21054
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7e8e9abe0a9ef49dfcba0ec5e18232327d581fe9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 23 08:51:38 2016 -0700

    cmd/compile: reduce stutter
    
    This is follow-up 1 of 3 to CL 20959.
    
    Passes toolstash -cmp.
    
    Change-Id: I9bddf7d88333fa4755e03ff8a034a35bd01b7855
    Reviewed-on: https://go-review.googlesource.com/21052
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 694eadcce755e9d8b02a9fed8b79448cc8bbcd5c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 23 16:25:27 2016 +1100

    net/http/httptest: add NewRequest helper for ease of testing handlers
    
    Fixes #14199
    
    Change-Id: Ic9284023b663de3db1ca7b7b1e96eeab82ec0944
    Reviewed-on: https://go-review.googlesource.com/21016
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit bd83cc6dae36399f3c8fd99bd4ceea6570c70f5a
Author: Marvin Stenger <marvin.stenger94@gmail.com>
Date:   Wed Mar 23 16:35:50 2016 +0100

    cmd/compile: prettify loop iterations
    
    This commit replaces some of
    
    for i := len(x) - 1; i >= 0; i-- {...}
    
    style loops, which do not rely on reverse iteration order.
    
    Change-Id: I5542834286562da058200c06e7a173b13760e54d
    Reviewed-on: https://go-review.googlesource.com/21044
    Reviewed-by: Keith Randall <khr@golang.org>

commit ca5417b8e0c859aa5537247aed03316bfd3f5a66
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Mar 21 07:20:01 2016 +1100

    cmd/compile: reduce some SSA garbage
    
    It's pretty hard to get reliable CPU numbers, even with 50 runs on an
    otherwise-idle physical Linux machine, but the garbage reduction
    numbers are nice. To get useful time/op numbers, I modified
    compilebench to report user CPU time instead of wall time:
    
    name       old time/op     new time/op     delta
    Template       547ms ± 6%      557ms ± 5%   +1.80%        (p=0.001 n=49+49)
    Unicode        360ms ± 9%      365ms ± 6%     ~           (p=0.094 n=50+45)
    GoTypes        1.84s ± 3%      1.82s ± 3%   -1.50%        (p=0.000 n=50+49)
    Compiler       9.19s ± 2%      9.02s ± 2%   -1.87%        (p=0.000 n=45+50)
    
    name       old alloc/op    new alloc/op    delta
    Template      63.3MB ± 0%     59.1MB ± 0%   -6.72%        (p=0.000 n=50+50)
    Unicode       43.1MB ± 0%     42.9MB ± 0%   -0.47%        (p=0.000 n=50+49)
    GoTypes        220MB ± 0%      200MB ± 0%   -9.00%        (p=0.000 n=50+50)
    Compiler      1.00GB ± 0%     0.89GB ± 0%  -10.09%        (p=0.000 n=50+49)
    
    name       old allocs/op   new allocs/op   delta
    Template        681k ± 0%       680k ± 0%   -0.16%        (p=0.000 n=50+48)
    Unicode         541k ± 0%       541k ± 0%   -0.02%        (p=0.011 n=48+50)
    GoTypes        2.08M ± 0%      2.08M ± 0%   -0.19%        (p=0.000 n=48+50)
    Compiler       9.24M ± 0%      9.23M ± 0%   -0.11%        (p=0.000 n=50+50)
    
    Change-Id: I1fac4ebf85a1783e3289c3ffb1ed365442837643
    Reviewed-on: https://go-review.googlesource.com/20995
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0659cf691194f30345442d66c94eba632ca6d7ae
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 23 11:07:20 2016 -0700

    cmd/compile: small Mpint method simplifications
    
    Get rid of (*Mpint).Add's "quiet" parameter: it's always set to 0.
    
    Inline (*Mpint).shift into (*Mpint).Lsh and (*Mpint).Rsh. There's no
    need for a common shift method that can handle both left or right
    shifts based on sign when the higher level abstractions only ever do
    one or the other.
    
    Change-Id: Icd3b082413f9193961b6835279e0bd4b6a6a6621
    Reviewed-on: https://go-review.googlesource.com/21050
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 4c9a470d468b6b6fa0520f32e034a1762dba3f9d
Author: Keith Randall <khr@golang.org>
Date:   Mon Mar 21 22:57:26 2016 -0700

    cmd/compile: start on ARM port
    
    Start working on arm port.  Gets close to correct
    code for fibonacci:
        func fib(n int) int {
            if n < 2 {
                return n
            }
            return fib(n-1) + fib(n-2)
        }
    
    Still a lot to do, but this is a good starting point.
    
    Cleaned up some arch-specific dependencies in regalloc.
    
    Change-Id: I4301c6c31a8402168e50dcfee8bcf7aee73ea9d5
    Reviewed-on: https://go-review.googlesource.com/21000
    Reviewed-by: David Chase <drchase@google.com>

commit 44d3f89e99b954d88ab802212182a7c123ac774a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Mar 22 21:25:40 2016 -0400

    cmd/link, reflect: remove some method type data
    
    Remove reflect type information for unexported methods that do not
    satisfy any interface in the program.
    
    Ideally the unexported method would not appear in the method list at
    all, but that is tricky because the slice is built by the compiler.
    
    Reduces binary size:
    
            cmd/go: 81KB (0.8%)
            jujud: 258KB (0.4%)
    
    For #6853.
    
    Change-Id: I25ef8df6907e9ac03b18689d584ea46e7d773043
    Reviewed-on: https://go-review.googlesource.com/21033
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c1892b9c4b321b03973aa4433ec7cd8fe0a307a9
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Mar 23 11:11:34 2016 +0100

    cmd/compile: don't simplify nilchecks in loops
    
    khr: Lifting the nil check out of the loop altogether is an admirable
    goal, and this rewrite is one step on the way. But without lifting it
    out of the loop, the rewrite is just hurting us.
    
    Fixes #14917
    
    Change-Id: Idb917f37d89f50f8e046d5ebd7c092b1e0eb0633
    Reviewed-on: https://go-review.googlesource.com/21040
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit baec148767328b9af7442083108466486781e835
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Mon Mar 7 11:59:16 2016 -0600

    bytes: Equal perf improvements on ppc64le/ppc64
    
    The existing implementation for Equal and similar
    functions in the bytes package operate on one byte at
    at time.  This performs poorly on ppc64/ppc64le especially
    when the byte buffers are large.  This change improves
    those functions by loading and comparing double words where
    possible.  The common code has been moved to a function
    that can be shared by the other functions in this
    file which perform the same type of comparison.
    Further optimizations are done for the case where
    >= 32 bytes are being compared.  The new function
    memeqbody is used by memeq_varlen, Equal, and eqstring.
    
    When running the bytes test with -test.bench=Equal
    
    benchmark                     old MB/s     new MB/s     speedup
    BenchmarkEqual1               164.83       129.49       0.79x
    BenchmarkEqual6               563.51       445.47       0.79x
    BenchmarkEqual9               656.15       1099.00      1.67x
    BenchmarkEqual15              591.93       1024.30      1.73x
    BenchmarkEqual16              613.25       1914.12      3.12x
    BenchmarkEqual20              682.37       1687.04      2.47x
    BenchmarkEqual32              807.96       3843.29      4.76x
    BenchmarkEqual4K              1076.25      23280.51     21.63x
    BenchmarkEqual4M              1079.30      13120.14     12.16x
    BenchmarkEqual64M             1073.28      10876.92     10.13x
    
    It was determined that the degradation in the smaller byte tests
    were due to unfavorable code alignment of the single byte loop.
    
    Fixes #14368
    
    Change-Id: I0dd87382c28887c70f4fbe80877a8ba03c31d7cd
    Reviewed-on: https://go-review.googlesource.com/20249
    Reviewed-by: Minux Ma <minux@golang.org>

commit 516c6b4085aa70552276ba5e15ed6da4497f0664
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Wed Mar 23 14:02:36 2016 +0200

    cmd/link: Clean up Pcln struct
    
    Removes unnecessary fields from Pcln.
    
    Change-Id: I175049ca749b510eedaf65162355bc4d7a93315e
    Reviewed-on: https://go-review.googlesource.com/21041
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 53efe1e121e68feadcce00d1f7b1978dbbd1d1c7
Author: Klaus Post <klauspost@gmail.com>
Date:   Mon Mar 21 10:21:55 2016 +0100

    compress/flate: rework matching algorithm
    
    This changes how matching is done in deflate algorithm.
    
    The major change is that we do not look for matches that are only
    3 bytes in length, matches must be 4 bytes at least.
    Contrary to what you would expect this actually improves the
    compresion ratio, since 3 literal bytes will often be shorter
    than a match after huffman encoding.
    This varies a bit by source, but is most often the case when the
    source is "easy" to compress.
    
    Second of all, a "stronger" hash is used. The hash is similar to
    the hashing function used by Snappy.
    
    Overall, the speed impact is biggest on higher compression levels.
    I intend to replace the "speed" compression level, which can be
    seen in CL 21021.
    
    The built-in benchmark using "digits" is slower at level 1.
    I see this as an exception, since "digits" is a special type
    of data, where you have low entropy (numbers 0->9), but no
    significant matches. Again, CL 20021 fixes that case.
    
    NewWriterDict is also made considerably faster, by not running data
    through the entire encoder. This is not reflected by the benchmark.
    
    Overall, the speed impact is biggest on higher compression levels.
    I intend to replace the "speed" compression level.
    
    COMPARED to tip/master:
    name                       old time/op    new time/op     delta
    EncodeDigitsSpeed1e4-4        401µs ± 1%      345µs ± 2%   -13.95%
    EncodeDigitsSpeed1e5-4       3.19ms ± 1%     4.27ms ± 3%   +33.96%
    EncodeDigitsSpeed1e6-4       27.7ms ± 4%     43.8ms ± 3%   +58.00%
    EncodeDigitsDefault1e4-4      641µs ± 0%      403µs ± 1%   -37.15%
    EncodeDigitsDefault1e5-4     13.8ms ± 1%      6.4ms ± 3%   -53.73%
    EncodeDigitsDefault1e6-4      162ms ± 1%       64ms ± 2%   -60.51%
    EncodeDigitsCompress1e4-4     627µs ± 1%      405µs ± 2%   -35.45%
    EncodeDigitsCompress1e5-4    13.9ms ± 0%      6.3ms ± 2%   -54.46%
    EncodeDigitsCompress1e6-4     159ms ± 1%       64ms ± 0%   -59.91%
    EncodeTwainSpeed1e4-4         433µs ± 4%      331µs ± 1%   -23.53%
    EncodeTwainSpeed1e5-4        2.82ms ± 1%     3.08ms ± 0%    +9.10%
    EncodeTwainSpeed1e6-4        28.1ms ± 2%     28.8ms ± 0%    +2.82%
    EncodeTwainDefault1e4-4       695µs ± 4%      474µs ± 1%   -31.78%
    EncodeTwainDefault1e5-4      11.8ms ± 0%      7.4ms ± 0%   -37.31%
    EncodeTwainDefault1e6-4       128ms ± 0%       75ms ± 0%   -40.93%
    EncodeTwainCompress1e4-4      719µs ± 3%      480µs ± 0%   -33.27%
    EncodeTwainCompress1e5-4     15.0ms ± 3%      8.2ms ± 2%   -45.55%
    EncodeTwainCompress1e6-4      170ms ± 0%       85ms ± 1%   -49.99%
    
    name                       old speed      new speed       delta
    EncodeDigitsSpeed1e4-4     25.0MB/s ± 1%   29.0MB/s ± 2%   +16.24%
    EncodeDigitsSpeed1e5-4     31.4MB/s ± 1%   23.4MB/s ± 3%   -25.34%
    EncodeDigitsSpeed1e6-4     36.1MB/s ± 4%   22.8MB/s ± 3%   -36.74%
    EncodeDigitsDefault1e4-4   15.6MB/s ± 0%   24.8MB/s ± 1%   +59.11%
    EncodeDigitsDefault1e5-4   7.27MB/s ± 1%  15.72MB/s ± 3%  +116.23%
    EncodeDigitsDefault1e6-4   6.16MB/s ± 0%  15.60MB/s ± 2%  +153.25%
    EncodeDigitsCompress1e4-4  15.9MB/s ± 1%   24.7MB/s ± 2%   +54.97%
    EncodeDigitsCompress1e5-4  7.19MB/s ± 0%  15.78MB/s ± 2%  +119.62%
    EncodeDigitsCompress1e6-4  6.27MB/s ± 1%  15.65MB/s ± 0%  +149.52%
    EncodeTwainSpeed1e4-4      23.1MB/s ± 4%   30.2MB/s ± 1%   +30.68%
    EncodeTwainSpeed1e5-4      35.4MB/s ± 1%   32.5MB/s ± 0%    -8.34%
    EncodeTwainSpeed1e6-4      35.6MB/s ± 2%   34.7MB/s ± 0%    -2.77%
    EncodeTwainDefault1e4-4    14.4MB/s ± 4%   21.1MB/s ± 1%   +46.48%
    EncodeTwainDefault1e5-4    8.49MB/s ± 0%  13.55MB/s ± 0%   +59.50%
    EncodeTwainDefault1e6-4    7.83MB/s ± 0%  13.25MB/s ± 0%   +69.19%
    EncodeTwainCompress1e4-4   13.9MB/s ± 3%   20.8MB/s ± 0%   +49.83%
    EncodeTwainCompress1e5-4   6.65MB/s ± 3%  12.20MB/s ± 2%   +83.51%
    EncodeTwainCompress1e6-4   5.88MB/s ± 0%  11.76MB/s ± 1%  +100.06%
    
    Change-Id: I724e33c1dd3e3a6a1b0a68e094baa959352baf32
    Reviewed-on: https://go-review.googlesource.com/20929
    Run-TryBot: Nigel Tao <nigeltao@golang.org>
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit e6beec1fc81ebf8445e23254291dce331b104668
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Mar 18 13:21:53 2016 +1100

    cmd/compile/internal/ssa: avoid string conversion in zcse
    
    Some ssa.Type implementations fell through to gc.Tconv which generated
    garbage to produce a string form of the Type.
    
    name      old time/op    new time/op    delta
    Template     405ms ± 7%     401ms ± 6%    ~     (p=0.478 n=20+20)
    GoTypes      1.32s ± 1%     1.30s ± 2%  -1.27%  (p=0.000 n=19+20)
    Compiler     6.07s ± 2%     6.03s ± 2%    ~     (p=0.121 n=20+20)
    
    name      old alloc/op   new alloc/op   delta
    Template    63.9MB ± 0%    63.7MB ± 0%  -0.21%  (p=0.000 n=19+20)
    GoTypes      220MB ± 0%     219MB ± 0%  -0.21%  (p=0.000 n=20+20)
    Compiler     966MB ± 0%     965MB ± 0%  -0.11%  (p=0.000 n=20+20)
    
    name      old allocs/op  new allocs/op  delta
    Template      708k ± 0%      701k ± 0%  -0.99%  (p=0.000 n=20+20)
    GoTypes      2.20M ± 0%     2.17M ± 0%  -1.43%  (p=0.000 n=17+20)
    Compiler     9.45M ± 0%     9.36M ± 0%  -0.91%  (p=0.000 n=20+20)
    
    Change-Id: I5fcc30e0f76a823d1c301d4980b583d716a75ce3
    Reviewed-on: https://go-review.googlesource.com/20844
    Reviewed-by: Keith Randall <khr@golang.org>

commit a4be24cbe6b10ee66674834d571c196622ff55ed
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Mar 23 13:27:49 2016 +1100

    cmd/compile/internal/gc: remove redundant Nod(OXXX, ...) pattern
    
    The pattern
    
        n := Nod(OXXX, nil, nil)
        Nodconst(n, ...)
    
    was a leftover from the C days where n must be heap allocated.
    
    No change in benchmarks, none expected as n escapes anyway.
    
    name      old time/op    new time/op    delta
    Template     391ms ± 6%     388ms ± 5%    ~     (p=0.659 n=20+20)
    GoTypes      1.27s ± 1%     1.27s ± 2%    ~     (p=0.828 n=18+20)
    Compiler     6.16s ± 2%     6.15s ± 1%    ~     (p=0.947 n=20+20)
    
    name      old alloc/op   new alloc/op   delta
    Template    63.7MB ± 0%    63.7MB ± 0%    ~     (p=0.414 n=20+20)
    GoTypes      219MB ± 0%     219MB ± 0%    ~     (p=0.904 n=20+20)
    Compiler     980MB ± 0%     980MB ± 0%  +0.00%  (p=0.007 n=20+19)
    
    name      old allocs/op  new allocs/op  delta
    Template      586k ± 0%      586k ± 0%    ~     (p=0.564 n=19+20)
    GoTypes      1.80M ± 0%     1.80M ± 0%    ~     (p=0.718 n=20+20)
    Compiler     7.74M ± 0%     7.74M ± 0%    ~     (p=0.358 n=20+20)
    
    The reuse of nc in multiple overlapping scopes in walk.go is the worst.
    
    Change-Id: I4ed6a63f7ffbfff68124ad609f6e3a68d95cbbba
    Reviewed-on: https://go-review.googlesource.com/21015
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1374515a1cf2279c2e47a4ee03a3616781814ad0
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Fri Mar 18 11:25:04 2016 +0200

    cmd/vet: check lock copy in function calls and return statements
    
    Fixes #14529
    
    Change-Id: I6ed059d279ba0fe12d76416859659f28d61781d2
    Reviewed-on: https://go-review.googlesource.com/20832
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 49da931268fe4d1fcee988c05b1d65dad8668506
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Mar 20 15:24:50 2016 +0100

    fmt: cleanup and optimize doPrintf for simple formats
    
    Make a fast path for format strings that do not use
    precision or width specifications or argument indices.
    
    Only check and enforce the restriction to not pad left with zeros
    in code paths that change either f.minus or f.zero.
    
    Consolidate the if chains at the end of the main doPrintf loop
    into a switch statement. Move error printing into extra
    functions to reduce size of this switch statement.
    
    name                             old time/op  new time/op  delta
    SprintfPadding-2                  234ns ± 1%   233ns ± 1%   -0.54%  (p=0.010 n=19+19)
    SprintfEmpty-2                   37.0ns ± 3%  39.1ns ±14%     ~     (p=0.501 n=17+20)
    SprintfString-2                   112ns ± 1%   101ns ± 1%   -9.21%  (p=0.000 n=19+20)
    SprintfTruncateString-2           139ns ± 1%   139ns ± 0%   +0.57%  (p=0.000 n=19+19)
    SprintfQuoteString-2              402ns ± 0%   392ns ± 0%   -2.35%  (p=0.000 n=19+20)
    SprintfInt-2                      114ns ± 1%   102ns ± 2%  -10.92%  (p=0.000 n=20+20)
    SprintfIntInt-2                   177ns ± 2%   155ns ± 2%  -12.67%  (p=0.000 n=18+18)
    SprintfPrefixedInt-2              260ns ± 3%   249ns ± 3%   -4.55%  (p=0.000 n=20+20)
    SprintfFloat-2                    190ns ± 1%   178ns ± 2%   -6.54%  (p=0.000 n=20+20)
    SprintfComplex-2                  533ns ± 1%   517ns ± 3%   -2.95%  (p=0.000 n=20+20)
    SprintfBoolean-2                  102ns ± 1%    93ns ± 2%   -9.30%  (p=0.000 n=20+20)
    SprintfHexString-2                176ns ± 0%   168ns ± 2%   -4.49%  (p=0.000 n=16+19)
    SprintfHexBytes-2                 181ns ± 1%   174ns ± 2%   -4.27%  (p=0.000 n=20+20)
    SprintfBytes-2                    326ns ± 1%   311ns ± 1%   -4.51%  (p=0.000 n=20+20)
    ManyArgs-2                        540ns ± 2%   497ns ± 1%   -8.08%  (p=0.000 n=18+16)
    FprintInt-2                       150ns ± 0%   149ns ± 0%   -0.33%  (p=0.000 n=20+18)
    FprintfBytes-2                    185ns ± 0%   165ns ± 0%  -10.98%  (p=0.000 n=20+18)
    FprintIntNoAlloc-2                113ns ± 0%   112ns ± 0%   -0.88%  (p=0.000 n=20+20)
    
    Change-Id: I9ada8faa1f46aa67ea116a94ab3f4ad3e405c8fe
    Reviewed-on: https://go-review.googlesource.com/20919
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 7162c4d05c1fed9db517c92b9a5232243ec453a2
Author: Tamir Duberstein <tamird@gmail.com>
Date:   Fri Feb 12 00:37:52 2016 -0500

    database/sql/driver: remove string exclusion
    
    The exclusion of string from IsScanValue prevents driver authors from
    writing their drivers in such a way that would allow users to
    distinguish between strings and byte arrays returned from a database.
    Such drivers are possible today, but require their authors to deviate
    from the guidance provided by the standard library.
    
    This exclusion has been in place since the birth of this package in
    https://github.com/golang/go/commit/357f2cb1a385f4d1418e48856f9abe0cce,
    but the fakedb implementation shipped in the same commit violates the
    exclusion!
    
    Strictly speaking this is a breaking change, but it increases the set
    of permissible Scan types, and should not cause breakage in practice.
    
    No test changes are necessary because fakedb already exercises this.
    
    Fixes #6497.
    
    Change-Id: I69dbd3a59d90464bcae8c852d7ec6c97bfd120f8
    Reviewed-on: https://go-review.googlesource.com/19439
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bac0005ec77994b093c51e29f630125130c99b98
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Mar 22 18:17:43 2016 -0700

    misc/cgo/testcarchive: rewrite test from bash to Go
    
    This is to support https://golang.org/cl/18057, which is going to add
    Windows support to this directory.  Better to write the test in Go then
    to have both test.bash and test.bat.
    
    Update #13494.
    
    Change-Id: I4af7004416309e885049ee60b9470926282f210d
    Reviewed-on: https://go-review.googlesource.com/20892
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bafa0275db7cc3adf8b819eaf6fabbda2d783371
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Mar 23 09:14:58 2016 +0900

    cmd/dist: disable misc/cgo/fortran test on dragonfly
    
    Updates #14544.
    
    Change-Id: I24ab8e6f9ad9d290a672216fc2f50f78c3ed8812
    Reviewed-on: https://go-review.googlesource.com/21014
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 68e86e6dfaf22d9295e3dc4d4387710b15224e93
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 22 16:22:21 2016 -0700

    cmd/compile: MOVBload and MOVBQZXload are the same op
    
    No need to have both ops when they do the same thing.
    Just declare MOVBload to zero extend and we can get rid
    of MOVBQZXload.  Same for W and L.
    
    Kind of a followon cleanup for https://go-review.googlesource.com/c/19506/
    Should enable an easier fix for #14920
    
    Change-Id: I7cfac909a8ba387f433a6ae75c050740ebb34d42
    Reviewed-on: https://go-review.googlesource.com/21004
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5cdb3d0321c4615ff271353030e3742912e241ba
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Mar 22 15:08:09 2016 -0400

    syscall: correct spelling/typos in comment
    
    Change-Id: Ib44c6b1ce07aa8fb67033cf21e177a90fd4005dc
    Reviewed-on: https://go-review.googlesource.com/21002
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 90a59d448e152d790c2043a5777d9ee496365bcf
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Wed Mar 9 16:23:25 2016 +0200

    cmd/link: use stdlib sort in dodata
    
    Speeds up linking cmd/go by 1.7%
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.58 ± 4%  0.57 ± 5%  -1.74%  (p=0.000 n=96+97)
    
    Change-Id: I7844cf4e2eeac260318de2b6ddf52ce07a6e00f5
    Reviewed-on: https://go-review.googlesource.com/20915
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 7177cb9fa4c748e45aa4866ee77d648961368c3f
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 22 09:43:28 2016 -0700

    cmd/compile: remove dots from register names
    
    They are kind of useless and are cluttering up
    https://go-review.googlesource.com/c/21000/
    
    Change-Id: Iafdec75ada11c7ebdc40540d251fdc514bb00d3d
    Reviewed-on: https://go-review.googlesource.com/21001
    Reviewed-by: Minux Ma <minux@golang.org>

commit c12e1b0b2ede57de8fcff94bea8333e055245e5e
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 18 13:38:52 2016 -0700

    cmd/compile: update vendored math/big to latest version
    
    This makes the rounding bug fix in math/big for issue 14651 available
    to the compiler.
    
    - changes to cmd/compile/internal/big fully automatic via script
    - added test case for issue
    - updated old test case with correct test data
    
    Fixes #14651.
    
    Change-Id: Iea37a2cd8d3a75f8c96193748b66156a987bbe40
    Reviewed-on: https://go-review.googlesource.com/20818
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7c86263be2ed0967313ec29c4130dccce7105e74
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 18 12:31:37 2016 -0700

    math/big: much simplified and faster Float rounding
    
    Change-Id: Iab0add7aee51a8c72a81f51d980d22d2fd612f5c
    Reviewed-on: https://go-review.googlesource.com/20817
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit e61db3119ca0767b255b784005d2636f8d4b611e
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Mar 22 17:34:36 2016 +0100

    cmd/compile: simplify SliceCap when it equals SliceLen
    
    Shows up occassionally, especially after p = p[:8:len(p)]
    
    Updates #14905
    
    Change-Id: Iab35ef2eac57817e6a10c6aaeeb84709e8021641
    Reviewed-on: https://go-review.googlesource.com/21025
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 23a756d856dabd86e3f83480f31c291cbcd6464a
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Jan 29 17:14:51 2016 +0100

    testing: expose subtest and subbenchmark functionality
    
    Fixes #12166
    
    Change-Id: Ie62cba2c39beb5732447ba3688c93c08ef12abb5
    Reviewed-on: https://go-review.googlesource.com/18898
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>

commit 00a2a94c1eab027bc1ac5bbb9f30329dec14cf87
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Jan 29 16:57:02 2016 +0100

    testing: added name matcher and sanitizer
    
    The matcher is responsible for sanitizing and uniquing the
    test and benchmark names and thus needs to be included before the
    API can be exposed.
    
    Matching currently uses the regexp to only match the top-level
    tests/benchmarks.
    
    Support for subtest matching is for another CL.
    
    Change-Id: I7c8464068faef7ebc179b03a7fe3d01122cc4f0b
    Reviewed-on: https://go-review.googlesource.com/18897
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 34699bc7a81668f3a3d7b0f862e0a9f173926c66
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 20 08:03:31 2016 -0700

    cmd/compile: reduce use of **Node parameters
    
    Escape analysis has a hard time with tree-like
    structures (see #13493 and #14858).
    This is unlikely to change.
    As a result, when invoking a function that accepts
    a **Node parameter, we usually allocate a *Node
    on the heap. This happens a whole lot.
    
    This CL changes functions from taking a **Node
    to acting more like append: It both modifies
    the input and returns a replacement for it.
    
    Because of the cascading nature of escape analysis,
    in order to get the benefits, I had to modify
    almost all such functions. The remaining functions
    are in racewalk and the backend. I would be happy
    to update them as well in a separate CL.
    
    This CL was created by manually updating the
    function signatures and the directly impacted
    bits of code. The callsites were then automatically
    updated using a bespoke script:
    https://gist.github.com/josharian/046b1be7aceae244de39
    
    For ease of reviewing and future understanding,
    this CL is also broken down into four CLs,
    mailed separately, which show the manual
    and the automated changes separately.
    They are CLs 20990, 20991, 20992, and 20993.
    
    Passes toolstash -cmp.
    
    name       old time/op     new time/op     delta
    Template       335ms ± 5%      324ms ± 5%   -3.35%        (p=0.000 n=23+24)
    Unicode        176ms ± 9%      165ms ± 6%   -6.12%        (p=0.000 n=23+24)
    GoTypes        1.10s ± 4%      1.07s ± 2%   -2.77%        (p=0.000 n=24+24)
    Compiler       5.31s ± 3%      5.15s ± 3%   -2.95%        (p=0.000 n=24+24)
    MakeBash       41.6s ± 1%      41.7s ± 2%     ~           (p=0.586 n=23+23)
    
    name       old alloc/op    new alloc/op    delta
    Template      63.3MB ± 0%     62.4MB ± 0%   -1.36%        (p=0.000 n=25+23)
    Unicode       42.4MB ± 0%     41.6MB ± 0%   -1.99%        (p=0.000 n=24+25)
    GoTypes        220MB ± 0%      217MB ± 0%   -1.11%        (p=0.000 n=25+25)
    Compiler       994MB ± 0%      973MB ± 0%   -2.08%        (p=0.000 n=24+25)
    
    name       old allocs/op   new allocs/op   delta
    Template        681k ± 0%       574k ± 0%  -15.71%        (p=0.000 n=24+25)
    Unicode         518k ± 0%       413k ± 0%  -20.34%        (p=0.000 n=25+24)
    GoTypes        2.08M ± 0%      1.78M ± 0%  -14.62%        (p=0.000 n=25+25)
    Compiler       9.26M ± 0%      7.64M ± 0%  -17.48%        (p=0.000 n=25+25)
    
    name       old text-bytes  new text-bytes  delta
    HelloSize       578k ± 0%       578k ± 0%     ~     (all samples are equal)
    CmdGoSize      6.46M ± 0%      6.46M ± 0%     ~     (all samples are equal)
    
    name       old data-bytes  new data-bytes  delta
    HelloSize       128k ± 0%       128k ± 0%     ~     (all samples are equal)
    CmdGoSize       281k ± 0%       281k ± 0%     ~     (all samples are equal)
    
    name       old exe-bytes   new exe-bytes   delta
    HelloSize       921k ± 0%       921k ± 0%     ~     (all samples are equal)
    CmdGoSize      9.86M ± 0%      9.86M ± 0%     ~     (all samples are equal)
    
    Change-Id: I277d95bd56d51c166ef7f560647aeaa092f3f475
    Reviewed-on: https://go-review.googlesource.com/20959
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d1b8871f13203cd99d5e7d686170f0e266760084
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Mar 16 14:15:54 2016 -0700

    debug/dwarf: add Reader.SeekPC and Data.Ranges
    
    These new methods help find the compilation unit to pass to the
    LineReader method in order to find the line information for a PC.
    The Ranges method also helps identify the specific function for a PC,
    needed to determine the function name.
    
    This uses the .debug.ranges section if necessary, and changes the object
    file format packages to pass in the section contents if available.
    
    Change-Id: I5ebc3d27faaf1a126ffb17a1e6027efdf64af836
    Reviewed-on: https://go-review.googlesource.com/20769
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 77f4b773e72b0840a1ce0b314cba44dff9fbaf31
Author: Dominik Honnef <dominik@honnef.co>
Date:   Tue Mar 22 06:37:16 2016 +0100

    encoding/json, internal/testenv: use Fatalf
    
    Change-Id: I64dd09e76d811000a914776fdad47808e3895690
    Reviewed-on: https://go-review.googlesource.com/20989
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit c16a61515fa725b81a6c461c80a32f2f0afad8db
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 22:00:06 2016 -0400

    misc/cgo/test: add RewindAndSetgid implementation for s390x
    
    Required to pass the issue9400 test.
    
    Change-Id: I595223c403b12faade54e2e46510f8537150af39
    Reviewed-on: https://go-review.googlesource.com/20940
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5f0935b7d4df072f4342f603b7d96dfd391a8edf
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 21:56:12 2016 -0400

    internal/syscall/unix: add randomTrap const for s390x
    
    Change-Id: I81376f524e76db25fd52cc5bec2c80fbf618a0c5
    Reviewed-on: https://go-review.googlesource.com/20877
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2a7e85f16242a47625994fa52d1e9668d6c4f9b9
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 16:30:29 2016 -0400

    cmd/internal/obj: add support for s390x
    
    Adds a new R_PCRELDBL relocation for 2-byte aligned relative
    relocations on s390x. Should be removed once #14218 is
    implemented.
    
    Change-Id: I79dd2d8e746ba8cbc26c570faccfdd691e8161e8
    Reviewed-on: https://go-review.googlesource.com/20941
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 69a7c152a72c713032498bfbc6ec7c41d84a4b63
Author: Keith Randall <khr@golang.org>
Date:   Mon Mar 21 15:24:08 2016 -0700

    cmd/compile: change the way SSA does slice zero-cap detection
    
    There is a special case for slicing s[i:j] when the resulting
    slice has zero capacity, to prevent pointing to the next object
    in memory.
    
    Change this special case code from:
      rptr := rcap == 0 ? ptr : ptr+i*elemsize
    to
      rptr := ptr + (rcap == 0 ? 0 : i) * elemsize
    
    This change leads to slightly smaller generated code, replacing
    a load with a register zero.
    
    old:
            0x002e 00046 (slice.go:8)       CMPQ    BX, $0
            0x0032 00050 (slice.go:8)       JEQ     $0, 78
            0x0034 00052 (slice.go:8)       MOVQ    "".a+8(FP), BP
            0x0039 00057 (slice.go:8)       LEAQ    (BP)(CX*8), AX
            0x003e 00062 ... rest of function ...
    
            0x004e 00078 (slice.go:7)       MOVQ    "".a+8(FP), AX
            0x0053 00083 (slice.go:8)       JMP     62
    
    new:
            0x002e 00046 (slice.go:8)       CMPQ    BX, $0
            0x0032 00050 (slice.go:8)       JEQ     $0, 78
            0x0034 00052 (slice.go:8)       MOVQ    "".a+8(FP), BP
            0x0039 00057 (slice.go:8)       LEAQ    (BP)(CX*8), AX
            0x003e 00062 ... rest of function...
    
            0x004e 00078 (slice.go:8)       MOVQ    $0, CX
            0x0050 00080 (slice.go:8)       JMP     52
    
    Change-Id: I2a396616b0d7b090c226a47c92a7ba14b128401f
    Reviewed-on: https://go-review.googlesource.com/20994
    Reviewed-by: David Chase <drchase@google.com>

commit d37d3bdcfc429168adac5bf046172fd9c07bfdc2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Mar 21 14:41:16 2016 -0400

    net/http, internal/testenv: find go binary in PATH
    
    Fixes #14901
    
    Change-Id: Ia32e09767374a341c9a36c5d977d47d7d1a82315
    Reviewed-on: https://go-review.googlesource.com/20967
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>

commit 596949c18a29c51fcfa3ec2596cae72241e256e1
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Mar 21 11:02:55 2016 -0400

    cmd/dist: allow gohostarch to be s390x
    
    Should let the s390x builder progress a little further.
    
    Change-Id: I5eab5f384b0b039f8e246ba69ecfb24de08625d2
    Reviewed-on: https://go-review.googlesource.com/20965
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 259b7edf5c3a9b898d9b250c44d4f2c94bc90ca5
Author: Keith Randall <khr@golang.org>
Date:   Mon Mar 21 16:18:45 2016 -0700

    cmd/compile: allow naming of subexpressions
    
    Allow names to be used for subexpressions of match rules.
    For example:
    
    (OpA x:(OpB y)) -> ..use x here to refer to the OpB value..
    
    This gets rid of the .Args[0].Args[0]... way of naming we
    used to use.
    
    While we're here, give all subexpression matches names instead
    of recomputing them with .Args[i] sequences each time they
    are referenced.  Makes the generated rule code a bit smaller.
    
    Change-Id: Ie42139f6f208933b75bd2ae8bd34e95419bc0e4e
    Reviewed-on: https://go-review.googlesource.com/20997
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit d4663e13536d7d43666e53ae21114008cb65d790
Author: Keith Randall <khr@golang.org>
Date:   Mon Mar 21 10:22:03 2016 -0700

    cmd/compile: don't write back unchanged slice results
    
    Don't write back parts of a slicing operation if they
    are unchanged from the source of the slice.  For example:
    
    x.s = x.s[0:5]         // don't write back pointer or cap
    x.s = x.s[:5]          // don't write back pointer or cap
    x.s = x.s[:5:7]        // don't write back pointer
    
    There is more to be done here, for example:
    
    x.s = x.s[:len(x.s):7] // don't write back ptr or len
    
    This CL can't handle that one yet.
    
    Fixes #14855
    
    Change-Id: Id1e1a4fa7f3076dc1a76924a7f1cd791b81909bb
    Reviewed-on: https://go-review.googlesource.com/20954
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>

commit 9549c06ce6e379de4554a911ffe8470af8d70daa
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Sun Mar 20 22:15:27 2016 +0100

    cmd/compile: fold IsInBounds with small index
    
    For the following example, but there are a few more in the stdlib:
    func histogram(b []byte, h *[256]int32) {
            for _, t := range b {
                    h[t]++
            }
    }
    
    Change-Id: I56615f341ae52e02ef34025588dc6d1c52122295
    Reviewed-on: https://go-review.googlesource.com/20924
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e41f527f4d56a94b33ab73efaae3575760916194
Author: Todd Neal <todd@tneal.org>
Date:   Wed Mar 16 21:29:17 2016 -0500

    cmd/compile: allow inlining of functions with switch statements
    
    Allow inlining of functions with switch statements as long as they don't
    contain a break or type switch.
    
    Fixes #13071
    
    Change-Id: I057be351ea4584def1a744ee87eafa5df47a7f6d
    Reviewed-on: https://go-review.googlesource.com/20824
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a14537816eb960ae24ce13364390ded124f5ebc8
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 18 11:16:35 2016 -0700

    math/big: fix rounding to smallest denormal for Float.Float32/64
    
    Converting a big.Float value x to a float32/64 value did not correctly
    round x up to the smallest denormal float32/64 if x was smaller than the
    smallest denormal float32/64, but larger than 0.5 of a smallest denormal
    float32/64.
    
    Handle this case explicitly and simplify some code in the turn.
    
    For #14651.
    
    Change-Id: I025e24bf8f0e671581a7de0abf7c1cd7e6403a6c
    Reviewed-on: https://go-review.googlesource.com/20816
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 478b594d5117729694deecbcb205bb15b6085f7a
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Mar 21 15:05:54 2016 +0100

    encoding/binary: fix bound check
    
    The inserted early bound checks cause the slice
    to expand beyond the original length of the slice.
    
    Change-Id: Ib38891605f4a9a12d3b9e2071a5f77640b083d2d
    Reviewed-on: https://go-review.googlesource.com/20981
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 6a33f7765f79cf2f00f5ca55832d2cfab8beb289
Author: Keith Randall <khr@golang.org>
Date:   Sun Mar 6 16:58:30 2016 -0800

    runtime: use MOVSB instead of MOVSQ for unaligned moves
    
    MOVSB is quite a bit faster for unaligned moves.
    Possibly we should use MOVSB all of the time, but Intel folks
    say it might be a bit faster to use MOVSQ on some processors
    (but not any I have access to at the moment).
    
    benchmark                              old ns/op     new ns/op     delta
    BenchmarkMemmove4096-8                 93.9          93.2          -0.75%
    BenchmarkMemmoveUnalignedDst4096-8     256           151           -41.02%
    BenchmarkMemmoveUnalignedSrc4096-8     175           90.5          -48.29%
    
    Fixes #14630
    
    Change-Id: I568e6d6590eb3615e6a699fb474020596be665ff
    Reviewed-on: https://go-review.googlesource.com/20293
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b07a214d39814545bbcd1d30f1850a95752dac65
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 21 10:47:24 2016 -0700

    cmd/internal/obj: change linkgetline from C to Go func style
    
    Passes toolstash -cmp.
    
    Change-Id: I8725dee490778be9c1fd31990a6b27df9713c3c9
    Reviewed-on: https://go-review.googlesource.com/20957
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 075d66646c8f8fec90a7c3b9de7bacb2a0eadacf
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 21 10:43:32 2016 -0700

    cmd/compile: remove formatting dreg
    
    Left over from CL 20931.
    
    Change-Id: I3b8dd9ef748bcbf70b5118da28135aaa1e5ba3a8
    Reviewed-on: https://go-review.googlesource.com/20955
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 07749aef988e55aba0c67aeb3607f42b58d4e249
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Mar 21 10:52:03 2016 -0700

    cmd/compile: special-case const comparisons against zero
    
    Constant comparisons against 0 are reasonably common.
    Special-case and avoid allocating a new zero value each time.
    
    Change-Id: I6c526c8ab30ef7f0fef59110133c764b7b90ba05
    Reviewed-on: https://go-review.googlesource.com/20956
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit d3253876f20ea39dbd7694ecaa5022e6cc147ccc
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Mar 20 13:55:42 2016 -0700

    cmd/compile: change Mp{int,flt} functions into methods
    
    Also give them more idiomatic Go names. Adding godocs is outside the
    scope of this CL. (Besides, the method names almost all directly
    parallel an underlying math/big.Int or math/big.Float method.)
    
    CL prepared mechanically with sed (for rewriting mpint.go/mpfloat.go)
    and gofmt (for rewriting call sites).
    
    Passes toolstash -cmp.
    
    Change-Id: Id76f4aee476ba740f48db33162463e7978c2083d
    Reviewed-on: https://go-review.googlesource.com/20909
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 5fb6aa3e096bc61f5a602109ebdb8e3edb0f66ca
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 19:11:19 2016 +0100

    testing: add test for not exceeding maximum parallism
    
    Fixed bug that slipped probably slipped in after rebasing and
    explain why it failed on nacl/netbsd/plan9, which set default
    maxparallelism to 1.
    
    Change-Id: I4d59682fb2843d138b320334189f53fcdda5b2f6
    Reviewed-on: https://go-review.googlesource.com/20980
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit bea2008b83424b9693c0e38940ffd53a5e1e80a3
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Mar 21 09:11:45 2016 -0700

    math/cmplx: added clarifying comment
    
    Fixes #14890.
    
    Change-Id: Ie790276b0e2ef94c92db3a777042d750269f876a
    Reviewed-on: https://go-review.googlesource.com/20953
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit cd187e9102bd6c55bb611a0b0f35fc4a7e0fbc51
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 18:55:26 2016 -0400

    syscall: change clone argument order on s390x
    
    The Linux ABI takes arguments in a different order on s390x.
    
    Change-Id: Ic9cfcc22a5ea3d8ef77d4dd0b915fc266ff3e5f7
    Reviewed-on: https://go-review.googlesource.com/20960
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 254d63baa78741fe415e58361ddc3e10a311458c
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 17:14:23 2016 -0400

    cmd/go: add s390x support
    
    Minimum architecture of z196 required so that GCC can assemble
    gcc_s390x.S in runtime/cgo.
    
    Change-Id: I603ed2edd39f826fb8193740ece5bd11d18c3dc5
    Reviewed-on: https://go-review.googlesource.com/20876
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f226e886c2b3e0fc0cb8fad8401d1ff8d006df58
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Mar 21 18:27:21 2016 +1100

    internal/syscall/unix: document randomTrap
    
    Updates #10848
    
    Change-Id: I8353100ed01cb0e8fc19225157f5709bae388612
    Reviewed-on: https://go-review.googlesource.com/20975
    Reviewed-by: Rob Pike <r@golang.org>

commit 4402ee9fa3fd98e37d123e364209933c2c1685bb
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 19:41:34 2016 -0400

    test: add s390x case to nosplit test
    
    Fixes this test on s390x.
    
    Change-Id: Ie5b70e8191169867765ec9248d827ca12c6405f4
    Reviewed-on: https://go-review.googlesource.com/20964
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cc17d1ba76e208cebe447e1b0c85e8e7702f5057
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 19:17:42 2016 -0400

    runtime/internal/sys: add s390x support
    
    Change-Id: I928532b406a3457d2c5f75f4de7d46a3f795192e
    Reviewed-on: https://go-review.googlesource.com/20939
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 74a3b205eb6d7771057acd85b8b8e1d9b778aa9a
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Mar 21 19:55:04 2016 +1300

    cmd/link: remove Link.Nsymbol
    
    It was just a funny way of saying len(Ctxt.Allsym) by now.
    
    Change-Id: Iff75e73c9f7ec4ba26cfef479bbd05d7dcd172f5
    Reviewed-on: https://go-review.googlesource.com/20973
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b6fe2c2c20327d8f85581de848fe9687d4cc7c79
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Mar 21 17:29:29 2016 +1300

    cmd/link: re-use duplicate symbol object
    
    Nothing cares about it.
    
    I did this after looking at the memprof output, but it helps performance a bit:
    
    name       old s/op    new s/op    delta
    LinkCmdGo   0.44 ± 3%   0.43 ± 3%  -2.20%   (p=0.000 n=94+90)
    LinkJuju    3.98 ± 5%   3.94 ± 5%  -1.19%  (p=0.000 n=100+91)
    
    As well as MaxRSS (i.e. what /usr/bin/time -f '%M' prints):
    
    name       old MaxRSS  new MaxRSS  delta
    LinkCmdGo   130k ± 0%   120k ± 3%  -7.79%   (p=0.000 n=79+90)
    LinkJuju    862k ± 6%   827k ± 8%  -4.01%  (p=0.000 n=100+99)
    
    Change-Id: I6306b7b3369576a688659e2ecdb0815b4152ae96
    Reviewed-on: https://go-review.googlesource.com/20972
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e451c9025dc513cb2235c02c7683531e74e6aac4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Mar 21 18:19:56 2016 +1100

    api: update next.txt
    
    Change-Id: I0ea74dc1b11fad8ded9e649a3c1e4213ea6639b8
    Reviewed-on: https://go-review.googlesource.com/20974
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8bfb3045db81ca43612bcbc3ec929528ab9b43b2
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 23:00:40 2016 -0400

    cmd/dist: enable -shared and external linking tests on s390x
    
    Change-Id: Iedd01ef3a9d2831cb55c53b7a1984e7e932f4249
    Reviewed-on: https://go-review.googlesource.com/20932
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 060a6915d4e3277e8b7d4345c5677a0c02799f5a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Mar 19 18:17:58 2016 -0700

    cmd/compile: remove most of the Lookupf users and garbage
    
    Introduce garbage-free LookupN to replace most users of Lookupf.
    
    Also, remove the string interning from LookupBytes which was hurting
    more than helping.
    
    name       old alloc/op    new alloc/op    delta
    Template      63.0MB ± 0%     62.7MB ± 0%  -0.48%         (p=0.000 n=10+9)
    Unicode       43.0MB ± 0%     43.0MB ± 0%  -0.17%         (p=0.000 n=10+7)
    GoTypes        219MB ± 0%      218MB ± 0%  -0.14%        (p=0.000 n=10+10)
    Compiler       992MB ± 0%      991MB ± 0%  -0.12%        (p=0.000 n=10+10)
    
    name       old allocs/op   new allocs/op   delta
    Template        683k ± 0%       681k ± 0%  -0.38%         (p=0.000 n=10+8)
    Unicode         541k ± 0%       541k ± 0%  -0.11%        (p=0.000 n=10+10)
    GoTypes        2.09M ± 0%      2.08M ± 0%  -0.40%        (p=0.000 n=10+10)
    Compiler       9.28M ± 0%      9.24M ± 0%  -0.36%        (p=0.000 n=10+10)
    
    Size of $GOROOT/pkg/darwin_amd64 drops from 40124 KB to 40100 KB too,
    removing the zero padding as suggested by josharian.
    
    Updates #6853
    
    Change-Id: I3c557266e9325fe29c459cef8e5b8954913e7abb
    Reviewed-on: https://go-review.googlesource.com/20931
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4fbe96adc3908668ec2ae65696941199b7e117f8
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 15:39:25 2016 -0400

    cmd/dist: add "s390x" to okgoarch and cgoEnabled
    
    Allows the compiler to recognise s390x specific files and s390x
    build tags.
    
    Change-Id: I7c62ab7361cf708181b1d9cfbe9b1fcb01be31e0
    Reviewed-on: https://go-review.googlesource.com/20872
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b2cf57104090b0cc148c0608f10f33cdfb48ec11
Author: Dominik Honnef <dominik@honnef.co>
Date:   Mon Mar 21 00:13:36 2016 +0100

    all: delete dead test code
    
    This deletes unused code and helpers from tests.
    
    Change-Id: Ie31d46115f558ceb8da6efbf90c3c204e03b0d7e
    Reviewed-on: https://go-review.googlesource.com/20927
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1a82946ea5a98f5e7a7ec416bc83a7cba701e9b8
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Mar 20 19:25:58 2016 -0400

    test/fixedbugs: add s390x case to issue11656
    
    An instruction consisting of all 0s causes an illegal instruction
    signal on s390x. Since 0s are the default in this test this CL just
    makes it explicit.
    
    Change-Id: Id6e060eed1a588f4b10a4e4861709fcd19b434ac
    Reviewed-on: https://go-review.googlesource.com/20962
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 992320aaa8e30fdd006b5c781b58549a2327d3b6
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 18 16:49:19 2016 -0400

    cmd/internal/objfile: add s390x support
    
    Change-Id: I39aa6569c9a6f327f7aaa01f8b4ace814fd5b766
    Reviewed-on: https://go-review.googlesource.com/20943
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 49be1ebab49c0608a6944c98feebc118432c598e
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Mar 21 19:32:57 2016 +1300

    cmd/link: delete more unreachable code
    
    Debugasm can never be set in cmd/link, so delete it and the code it enables.
    
    Change-Id: If828db0b09f1a9e512dc660ac2750657a769094c
    Reviewed-on: https://go-review.googlesource.com/20971
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 70ef564e795dea06d37e5233fcf3182b231c31f0
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Mar 21 19:27:35 2016 +1300

    cmd/link: delete unreachable hash collision check
    
    This expression in readsym:
    
        dup != nil && len(dup.P) > 0 && strings.HasPrefix(s.Name, "gclocals·")
    
    can never be true: if dup != nil, then s.Name is ".dup" (and this is not new:
    the same broken logic is present in 1.4, at least). Delete the whole block.
    
    Change-Id: I33b14d9a82b292116d6fd79d22b38e3842501317
    Reviewed-on: https://go-review.googlesource.com/20970
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca0f5c97409114f2cd2b30adfca63a4c2bcac0b2
Author: Dave Cheney <dave@cheney.net>
Date:   Mon Mar 21 14:19:57 2016 +1100

    cmd/internal/obj: move Nocache helper to arm back end
    
    The obj.Nocache helper was only used by the arm back end, move it there.
    
    Change-Id: I5c9faf995499991ead1f3d8c8ffc3b6af7346876
    Reviewed-on: https://go-review.googlesource.com/20868
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a4dce128035ebeb61cc3db11bf99d7884839935f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 20 19:41:43 2016 -0700

    cmd/compile: unexport convlit
    
    Add a special helper for its one external use.
    
    This is in preparation for an upcoming CL.
    
    Passes toolstash -cmp / buildall.
    
    Change-Id: I9d3463792afe220cc4bc89269bdecf0279abd281
    Reviewed-on: https://go-review.googlesource.com/20933
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 39af1eb96f37edc96e2bde24fdd877e49223f751
Author: Dave Cheney <dave@cheney.net>
Date:   Mon Mar 21 14:37:57 2016 +1100

    cmd/internal/obj: remove Link.Windows field
    
    This CL addresses a long standing CL by rsc by pushing the use of
    Link.Windows down to its two users.
    
    Link.Window was always initalised with the value of runtime.GOOS so
    this does not affect cross compilation.
    
    Change-Id: Ibbae068f8b5aad06336909691f094384caf12352
    Reviewed-on: https://go-review.googlesource.com/20869
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e28a3929efa9797530c7f74284796825a25d2011
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Mar 20 14:54:13 2016 -0700

    math/big: cleanup documentation for Format methods
    
    'b' is a standard verb for floating point values. The runes like '+'
    and '#' are called "flags" by package fmt's documentation. The flag
    '-' controls left/right justification, not anything related to signs.
    
    Change-Id: Ia9cf81b002df373f274ce635fe09b5bd0066aa1c
    Reviewed-on: https://go-review.googlesource.com/20930
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 36d5650a1c60be5e09abc89774758f525afc7874
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Mar 21 10:55:20 2016 +1300

    cmd/internal/obj, cmd/link: put all symbol data in one contiguous section
    
    Another object file change, gives a reasonable improvement:
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.46 ± 3%  0.44 ± 9%  -3.34%  (p=0.000 n=98+82)
    LinkJuju   4.09 ± 4%  3.92 ± 5%  -4.30%  (p=0.000 n=98+99)
    
    I guess the data section could be mmap-ed instead of read, I haven't tried
    that.
    
    Change-Id: I959eee470a05526ab1579e3f5d3ede41c16c954f
    Reviewed-on: https://go-review.googlesource.com/20928
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 34f0c0b3de8957f247c0bc99a682f622793fd88b
Author: Richard Miller <miller.research@gmail.com>
Date:   Sun Mar 20 19:17:36 2016 +0000

    net/http: adaptive wait time in PersistConnLeak tests
    
    In tests TransportPersistConnLeak and TransportPersistConnLeakShortBody,
    there's a fixed wait time (100ms and 400ms respectively) to allow
    goroutines to exit after CloseIdleConnections is called. This
    is sometimes too short on a slow host running many simultaneous
    tests.
    
    This CL replaces the fixed sleep in each test with a sequence of
    shorter sleeps, testing the number of remaining goroutines until
    it reaches the threshold or an overall time limit of 500ms expires.
    This prevents some failures in the plan9_arm builder, while reducing
    the test time on faster machines.
    
    Fixes #14887
    
    Change-Id: Ia5c871062df139e2667cdfb2ce8283e135435318
    Reviewed-on: https://go-review.googlesource.com/20922
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a7a199947a15d48d405be809278a7ea7c6ebf03a
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Mar 18 10:50:00 2016 +0100

    cmd/compile: add rules to simplify AddPtr
    
    Fixes #14849
    
    Change-Id: I86e2dc27ca73bb6b24261a68cbf0094a63167414
    Reviewed-on: https://go-review.googlesource.com/20833
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a9407b5797c0d4dcbed965462204cdc4e38bb621
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Mar 20 10:25:46 2016 -0700

    cmd/compile: fix varexpr handling of ODOT
    
    For a long time varexpr has handled ODOT incorrectly: it has always
    returned false.  Before https://golang.org/cl/20890 this has been
    because an ODOT had a Right field with an ONAME with no Class, for which
    varexpr returns false.  CL 20890 preserved the behavior of varexpr for
    ODOT, so that the change would pass toolstash -cmp.
    
    This CL fixes varexpr so that ODOT can return true in some cases.  This
    breaks toolstash -cmp.  While the changed compiler allocates temporary
    variables in a different order, I have not been able to find any
    examples where the generated code is different, other than using
    different stack offsets and, in some cases, registers.  It seems that
    other parts of the compiler will force the ODOT into a temporary anyhow.
    
    Still, this change is clearly correct, and is a minor compiler cleanup.
    
    Change-Id: I71506877aa3c13966bb03c281aa16271ee7fe80a
    Reviewed-on: https://go-review.googlesource.com/20907
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 93098de0cc99dc5588477da9f5a9b09d3480677d
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Sun Mar 20 17:22:57 2016 +0200

    cmd/link: patch up symbols only once per object file
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.57 ± 5%  0.55 ± 6%  -2.37%  (p=0.000 n=97+98)
    
    GOGC=off:
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.48 ± 3%  0.47 ± 3%  -2.90%  (p=0.000 n=100+100)
    
    Change-Id: I1a36dbf84914cacb79842bc0ddb1e26b4c5a5828
    Reviewed-on: https://go-review.googlesource.com/20917
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 060038bdd036e98622e22bc4538c7d192fb7217c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 18 18:12:14 2016 -0700

    cmd/compile: don't penalize ODOT and friends when inlining
    
    Historically ODOT and friends have been considered to cost an extra
    budget point when deciding whether they should be inlined, because they
    had an ONAME node that represented the name to the right of the dot.
    This doesn't really make sense, as in general that symbol does not add
    any extra instructions; it just affects the offset of the load or store
    instruction.  And the ONAME node is gone now.  So, remove the extra
    cost.
    
    This does not pass toolstash -cmp, as it changes inlining decisions.
    For example, mspan.init in runtime/mheap.go is now considered to be an
    inlining candidate.
    
    Change-Id: I5ad27f08c66fd5daa4c8472dd0795df989183f5e
    Reviewed-on: https://go-review.googlesource.com/20891
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d6d33f678dfe17e58b1d2f4b4b9d1487cd625c12
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Sun Mar 20 11:52:41 2016 +0200

    cmd/link: use encbuf when writing integers
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.59 ± 6%  0.58 ± 5%  -1.61%  (p=0.000 n=99+99)
    
    GOGC=off:
    name       old s/op   new s/op   delta
    LinkCmdGo  0.50 ± 3%  0.49 ± 3%  -1.28%  (p=0.000 n=98+99)
    
    Change-Id: I737ae056214999441a210c69ec0cf4febc39a715
    Reviewed-on: https://go-review.googlesource.com/20914
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 78fc59ef4235dab10119e77a0297d321ea54ae11
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Sun Mar 20 09:44:18 2016 +0200

    cmd/compile, cmd/link: remove unused fields from relocations
    
    Reduces size of archives in pkg/linux_amd64 by 3% from 41.5MB to 40.2MB
    
    Change-Id: Id64ca7995de8dd84c9e7ce1985730927cf4bfd66
    Reviewed-on: https://go-review.googlesource.com/20912
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 3504945081db0188ce1c7ec72c2ede669ee1b86f
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Sat Mar 19 23:27:41 2016 +0200

    cmd/link: optimize int parsing
    
    Speeds up linking cmd/go by ~1.5%:
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.58 ± 6%  0.57 ± 5%  -1.21%  (p=0.000 n=98+99)
    
    Less noisy benchmark, with garbage collection off:
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.49 ± 2%  0.49 ± 2%  -1.79%  (p=0.000 n=98+99)
    
    Change-Id: I0123bcb66a87cbc4d703356e4c5a4035032012ec
    Reviewed-on: https://go-review.googlesource.com/20916
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8d9ece9dde3a9dfc62f3e4dba0a48ec830cafb09
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Mar 18 08:24:40 2016 +0100

    fmt: unify integer formatting
    
    Deduplicate the verb switch for signed and unsigned integer formatting.
    
    Make names of integer related functions consistent
    with names of other fmt functions.
    
    Consolidate basic integer tests.
    
    Change-Id: I0c19c24f1c2c06a3b1a4d7d377dcdac3b36bb0f5
    Reviewed-on: https://go-review.googlesource.com/20831
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 3eaa3046295b9a5bdff0428060c5ffd46347651a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sat Mar 19 17:51:17 2016 -0700

    cmd/compile: ignore receiver name when checking duplicate methods
    
    In golang.org/cl/20602, I changed the semantics of Eqtype to stop
    checking the receiver parameters for type equality, and pushed this
    responsibility to addmethod (the only Eqtype caller that cared).
    However, I accidentally made the check stricter by making it start
    requiring that receiver names were identical.
    
    In general, this is a non-problem because the receiver names in export
    data will always match the original source. But running
    GO_GCFLAGS=-newexport ./all.bash at one point tries to load both old
    and new format export data for package sync, which reveals the
    problem. (See golang.org/issue/14877 for details.)
    
    Easy fix: just check the receiver type for type equality in addmethod,
    instead of the entire receiver parameter list.
    
    Fixes #14877.
    
    Change-Id: If10b79f66ba58a1b7774622b4fbad1916aba32f1
    Reviewed-on: https://go-review.googlesource.com/20906
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ec7c49453516957280ab8756c5dcd45f7cc11efe
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Mar 19 17:02:01 2016 -0700

    cmd/compile: remove typechecklist
    
    Convert remaining uses to typecheckslice.
    
    Passes toolstash -cmp.
    
    Change-Id: I6ed0877386fb6c0b036e8ee5a228433343855abd
    Reviewed-on: https://go-review.googlesource.com/20905
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ad4c55c0769396fe762de4ce473fc75feb7a8332
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Mar 19 16:34:48 2016 -0700

    cmd/compile: convert fmt.Sprintf to concatenation
    
    There are plenty more, but these cover most of
    the trivial cases, and all the cases that
    showed up in profiling.
    
    name       old time/op     new time/op     delta
    Template       331ms ± 3%      327ms ± 6%    ~           (p=0.143 n=10+10)
    Unicode        183ms ± 4%      180ms ± 2%    ~             (p=0.114 n=9+8)
    GoTypes        1.12s ± 4%      1.07s ± 1%  -4.34%         (p=0.000 n=10+9)
    Compiler       5.16s ± 2%      5.04s ± 2%  -2.24%         (p=0.001 n=10+9)
    MakeBash       41.7s ± 2%      42.3s ± 1%  +1.51%        (p=0.000 n=10+10)
    
    name       old alloc/op    new alloc/op    delta
    Template      63.4MB ± 0%     63.1MB ± 0%  -0.42%        (p=0.000 n=10+10)
    Unicode       43.2MB ± 0%     43.1MB ± 0%  -0.22%         (p=0.000 n=9+10)
    GoTypes        220MB ± 0%      219MB ± 0%  -0.57%         (p=0.000 n=8+10)
    Compiler       978MB ± 0%      975MB ± 0%  -0.30%        (p=0.000 n=10+10)
    
    name       old allocs/op   new allocs/op   delta
    Template        702k ± 0%       686k ± 0%  -2.35%        (p=0.000 n=10+10)
    Unicode         548k ± 0%       542k ± 0%  -1.09%        (p=0.000 n=10+10)
    GoTypes        2.17M ± 0%      2.09M ± 0%  -3.61%        (p=0.000 n=10+10)
    Compiler       9.33M ± 0%      9.15M ± 0%  -1.93%        (p=0.000 n=10+10)
    
    Change-Id: I3a3d7f2d56876427b04cfedc7302d7f496d5bb65
    Reviewed-on: https://go-review.googlesource.com/20904
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8dc04cbedcab9a769bb9f74d897c35ed9bc73ba2
Author: Keith Randall <khr@golang.org>
Date:   Fri Mar 18 10:45:30 2016 -0700

    cmd/compile: enforce 32-bit restrictions on ops
    
    Most 64-bit x86 ops can only take a signed 32-bit constant.
    Clean up our rewrite rules to enforce this restriction.
    
    Modify the assembler to fail if the offset does not fit
    in the instruction.
    
    That last check triggers a few times on weird testing code.
    Suppress those errors if the compiler itself generated errors.
    
    Fixes #14862
    
    Change-Id: I76559af035b38483b1e59621a8029fc66b3a5d1e
    Reviewed-on: https://go-review.googlesource.com/20815
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit d246eedcaa5105450ecfe72b626e955147c383b2
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Mar 10 12:33:33 2016 +0100

    fmt: integer formatting should not permanently change padding
    
    Changes the integer function to restore the original f.zero value
    and therefore padding type before returning.
    
    Change-Id: I456449259a3d39bd6d62e110553120c31ec63f23
    Reviewed-on: https://go-review.googlesource.com/20512
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2f4d4206831b722070fecd7efcd0f1b122aa3760
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Mar 19 13:18:43 2016 +0100

    fmt: remove depth argument from handleMethods and printArg
    
    handleMethods can format Error() and String() directly as its known
    these return strings that can be directly printed using fmtString.
    Remove the obsolete depth argument from handleMethods.
    
    Remove the depth argument from printArg since it is only ever
    called with depth set to 0. Recursion for formatting complex
    arguments is handled only by printValue which keeps track of depth.
    
    Change-Id: I4c4be588751de12ed999e7561a51bc168eb9eb2d
    Reviewed-on: https://go-review.googlesource.com/20911
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 5f525ca60db46a569da302acf3413f62897a04fc
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 18 16:52:30 2016 -0700

    cmd/compile: change ODOT and friends to use Sym, not Right
    
    The Node type ODOT and its variants all represent a selector, with a
    simple name to the right of the dot.  Before this change this was
    represented by using an ONAME Node in the Right field.  This ONAME node
    served no useful purpose.  This CL changes these Node types to store the
    symbol in the Sym field instead, thus not requiring allocating a Node
    for each selector.
    
    When compiling x/tools/go/types this CL eliminates nearly 5000 calls to
    newname and reduces the total number of Nodes allocated by about 6.6%.
    It seems to cut compilation time by 1 to 2 percent.
    
    Getting this right was somewhat subtle, and I added two dubious changes
    to produce the exact same output as before.  One is to ishairy in
    inl.go: the ONAME node increased the cost of ODOT and friends by 1, and
    I retained that, although really ODOT is not more expensive than any
    other node.  The other is to varexpr in walk.go: because the ONAME in
    the Right field of an ODOT has no class, varexpr would always return
    false for an ODOT, although in fact for some ODOT's it seemingly ought
    to return true; I added an && false for now.  I will send separate CLs,
    that will break toolstash -cmp, to clean these up.
    
    This CL passes toolstash -cmp.
    
    Change-Id: I4af8a10cc59078c436130ce472f25abc3a9b2f80
    Reviewed-on: https://go-review.googlesource.com/20890
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fc6bcdee7926925efc1305ad17d8b784e0e071fa
Author: Todd Neal <todd@tneal.org>
Date:   Wed Mar 16 18:44:17 2016 -0500

    cmd/compile: allow inlining of functions that declare a const
    
    Consider functions with an ODCLCONST for inlining and modify exprfmt to
    ignore those nodes when exporting. Don't add symbols to the export list
    if there is no definition.  This occurs when OLITERAL symbols are looked
    up via Pkglookup for non-exported symbols.
    
    Fixes #7655
    
    Change-Id: I1de827850f4c69e58107447314fe7433e378e069
    Reviewed-on: https://go-review.googlesource.com/20773
    Run-TryBot: Todd Neal <todd@tneal.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 3dd4f74e060b02031497ae839e698f3ddce5d73d
Author: Keith Randall <khr@golang.org>
Date:   Fri Mar 18 14:54:18 2016 -0700

    cmd/compile: merge shifts into LEAs
    
    Change-Id: I5a43c354f36184ae64a52268023c3222da3026d8
    Reviewed-on: https://go-review.googlesource.com/20880
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 377eaa749413c1a9e4bbe9466c45980af67bcfd6
Author: Keith Randall <khr@golang.org>
Date:   Fri Mar 18 14:30:00 2016 -0700

    runtime: add space
    
    Missed this in review of 20812
    
    Change-Id: I01e220499dcd58e1a7205e2a577dd9630a8b7174
    Reviewed-on: https://go-review.googlesource.com/20819
    Reviewed-by: Keith Randall <khr@golang.org>

commit e97789f7d9c937810c99f556ae1586e16213b744
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Mar 18 16:56:47 2016 +0100

    fmt: simplify handling of reporting flags to formatters
    
    Remove rewriting of flags before calling formatters.
    Change Flag method to directly take plusV and sharpV flags
    into account when reporting if plus or sharp flag is set.
    
    Change-Id: Ic3423881ad89e5a5f9fff5ab59e842062394ef6d
    Reviewed-on: https://go-review.googlesource.com/20859
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 15ea61146e49b91b84b7b3a3096b13ddfb4cc01f
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 17 13:28:04 2016 -0700

    runtime: use unaligned loads on ppc64
    
    benchmark                      old ns/op     new ns/op     delta
    BenchmarkAlignedLoad-160       8.67          7.42          -14.42%
    BenchmarkUnalignedLoad-160     8.63          7.37          -14.60%
    
    Change-Id: Id4609d7b4038c4d2ec332efc4fe6f1adfb61b82b
    Reviewed-on: https://go-review.googlesource.com/20812
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 982322769c1ca0e038d21a7028359c363acb7b8e
Author: David Chase <drchase@google.com>
Date:   Fri Mar 18 13:35:34 2016 -0400

    cmd/dist: redo flag-passing for bootstrap
    
    This ought to revert the bad effects of
    https://go-review.googlesource.com/#/c/20775/
    If you don't pass BOOT_GO_GCFLAGS, you get the
    old behavior.
    
    Tweaked to allow multiple space-separated flags in
    BOOT_GO_GCFLAGS.
    
    Change-Id: I2a22a04211b4535d1c5a8ec7a8a78cb051161c31
    Reviewed-on: https://go-review.googlesource.com/20871
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 40bd28f0c79b6791c7fd86ce42badde300286864
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Mar 18 12:10:47 2016 +0100

    fmt: remove unused field from printer struct
    
    Change-Id: I0ec775c51f461c6f0cbff88e796a7af55b736fcb
    Reviewed-on: https://go-review.googlesource.com/20838
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f693015be62a6571e053e15040664d01a450c0e0
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 17:16:56 2016 +0100

    sync: don't assume b.N > 0
    
    Change-Id: I6eb91ea73ef887b025e5a8de1dd55f30618e1aa6
    Reviewed-on: https://go-review.googlesource.com/20857
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a5cd53a9fd80800171a9ae27a7fc69f24f7e34ca
Author: Alan Donovan <adonovan@google.com>
Date:   Fri Mar 18 11:13:24 2016 -0400

    cmd/compile/internal/gc: support invalid types/constants in binary export data
    
    (Corresponding x/tools/go/gcimporter change is https://go-review.googlesource.com/#/c/20827/)
    
    Change-Id: I64e7fee2e273d387f1c51b87986294489978d250
    Reviewed-on: https://go-review.googlesource.com/20828
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 2d4c3d2489010527fad20693fc6e162f342a1d0a
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 14:05:54 2016 +0100

    testing: disable tests that cause a hang on some platforms
    
    plan9, nacl, and netbsd to be precise.
    
    Only the first test causes a hang, but just to be sure.
    
    Change-Id: I400bb356ee2a0cf12c8666c95af79c924d1629aa
    Reviewed-on: https://go-review.googlesource.com/20839
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f39d6d961383ab0325ad1ca32372b82e0e667863
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 16:43:43 2016 +0100

    testing: always ignore RunParallel in probe phase
    
    Change-Id: If45410a2d7e48d1c9e6800cd98f81dd89024832c
    Reviewed-on: https://go-review.googlesource.com/20852
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 872ca73cadf589bd4adf76d0fac9b07c52ac75c8
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 16:41:51 2016 +0100

    runtime: don't assume b.N > 0
    
    Change-Id: I2e26717f2563d7633ffd15f4adf63c3d0ee3403f
    Reviewed-on: https://go-review.googlesource.com/20856
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 3e2e80599e112c6cb6ad3fb82aa15660603c4571
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 16:41:38 2016 +0100

    net/url: don't assume b.N > 0
    
    Change-Id: Ie79c16d6e61b3baa274069528cf883b22fd255fe
    Reviewed-on: https://go-review.googlesource.com/20855
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d3ce412fa5da20ad6fc9017460257ce57179bbb7
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 16:41:21 2016 +0100

    net/rpc: don't assume b.N > 0
    
    Change-Id: I58c4a75168fd1f797a25735c4151f501f0475332
    Reviewed-on: https://go-review.googlesource.com/20854
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 6e2deaa1e132d726ef3a73ec63285a1445d3b03a
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 16:40:46 2016 +0100

    encoding/binary: don't assume b.N > 0
    
    Change-Id: I9e887a0b32baf0adc85fa9e4b85b319e8ef333e9
    Reviewed-on: https://go-review.googlesource.com/20853
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 705be76b6fde0f490d089338f06e27569b5abc28
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Mar 18 14:27:29 2016 +0100

    encoding/binary: improve error messages for benchmarks
    
    Change-Id: I0f4b6752ecc8b4945ecfde627cdec13fc4bb6a69
    Reviewed-on: https://go-review.googlesource.com/20850
    Reviewed-by: Russ Cox <rsc@golang.org>

commit b2dc1f82a5b2aa3132cb1fb0135efe1202a1e837
Author: Todd Neal <todd@tneal.org>
Date:   Fri Mar 18 07:05:58 2016 -0500

    cmd/compile: perform minimal phi elimination during critical
    
    Phi splitting sometimes leads to a phi with only a single predecessor.
    This must be replaced with a copy to maintain a valid SSA form.
    
    Fixes #14857
    
    Change-Id: I5ab2423fb6c85a061928e3206b02185ea8c79cd7
    Reviewed-on: https://go-review.googlesource.com/20826
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2330ae8cf80e4fa5e6e2909e0c8562fd3d9beec6
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Mon Jan 25 16:27:23 2016 +0100

    testing: finish implementation of subtests
    
    API not exposed yet.
    
    Change-Id: Iaba0adc0fa1ae8075e6b56796f99ee8db9177a78
    Reviewed-on: https://go-review.googlesource.com/18896
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 1857bfca134261ab2e0fc1adcf6a974f550d430a
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Wed Jan 20 15:47:54 2016 +0100

    testing: implementation of subbenchmarks
    
    API is not exposed yet.
    
    Change-Id: I729360ef2be1d8ea683ca93cdb1763897cc8657c
    Reviewed-on: https://go-review.googlesource.com/18895
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 89cda2db007c8389ba39d292c6372ff0c6a7622f
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Fri Jan 29 16:55:35 2016 +0100

    testing: hoisted chunks of code to prepare for Run method
    
    testing.go:
    - run method will evolve into the Run method.
    - added level field in common
    
    benchmark.go:
    - benchContext will be central to distinguish handling of benchmarks
      between normal Run methods and ones called from within Benchmark
      function.
    - expandCPU will evolve into the processing hook for Run methods
      called within normal processing.
    - runBench will evolve into the Run method.
    
    Change-Id: I1816f9985d5ba94deb0ad062302ea9aee0bb5338
    Reviewed-on: https://go-review.googlesource.com/18894
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 5c83e651adfa78d73634557cfaf2fbc9bde599f0
Author: Marcel van Lohuizen <mpvl@golang.org>
Date:   Tue Jan 19 22:43:52 2016 +0100

    testing: prepare for the introduction of Run methods
    
    The biggest change is that each test is now responsible for managing
    the starting and stopping of its parallel subtests.
    
    The "Main" test could be run as a tRunner as well. This shows that
    the introduction of subtests is merely a generalization of and
    consistent with the current semantics.
    
    Change-Id: Ibf8388c08f85d4b2c0df69c069326762ed36a72e
    Reviewed-on: https://go-review.googlesource.com/18893
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 248c3a3c7b376e128c14fcb13eebf28733553d03
Author: David Symonds <dsymonds@golang.org>
Date:   Fri Mar 18 09:55:18 2016 +1100

    regexp: avoid copying mutex in (*Regexp).Copy.
    
    There's nothing guaranteeing that the *Regexp isn't in active use,
    and so copying the sync.Mutex value is invalid.
    
    Updates #14839.
    
    Change-Id: Iddf52bf69df1b563377922399f64a571f76b95dd
    Reviewed-on: https://go-review.googlesource.com/20841
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 815c9a7f289d172c979261230260c0c5f0d1106e
Author: David Chase <drchase@google.com>
Date:   Thu Mar 10 14:42:52 2016 -0500

    cmd/compile: use loop information in regalloc
    
    This seems to help the problem reported in #14606; this
    change seems to produce about a 4% improvement (mostly
    for the 128-8192 shards).
    
    Fixes #14789.
    
    Change-Id: I1bd52c82d4ca81d9d5e9ab371fdfc860d7e8af50
    Reviewed-on: https://go-review.googlesource.com/20660
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit e4d489a85fd1825ddcc6c1ffda52fb9e75ad01b4
Author: Christopher Nelson <nadiasvertex@gmail.com>
Date:   Tue Mar 15 09:14:22 2016 -0400

    cmd/go: fix TestShadowingLogic fails when GOROOT path has spaces
    
    Improve the test by also translating " " to "_".
    
    Fixes #14671.
    
    Change-Id: Ie5997934b93c7663d7b8432244fad47bb5d3ffbe
    Reviewed-on: https://go-review.googlesource.com/20714
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 09a9ce60c7014ddff97690bf023ac5b2bfc142c7
Author: David Chase <drchase@google.com>
Date:   Thu Mar 17 14:12:12 2016 -0400

    cmd/compile: get gcflags to bootstrap; ssa debug opts for "all"
    
    This is intended to help debug compiler problems that pop
    up in the bootstrap phase of make.bash.  GO_GCFLAGS does not
    normally apply there.  Options-for-all phases is intended
    to allow crude tracing (and full timing) by turning on timing
    for all phases, not just one.
    
    Phase names can also be specified using a regular expression,
    for example
    BOOT_GO_GCFLAGS=-d='ssa/~^.*scc$/off' \
    GO_GCFLAGS='-d=ssa/~^.*scc$/off' ./make.bash
    
    I just added this because it was the fastest way to get
    me to a place where I could easily debug the compiler.
    
    Change-Id: I0781f3e7c19651ae7452fa25c2d54c9a245ef62d
    Reviewed-on: https://go-review.googlesource.com/20775
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2cc42cf2a8a9a3f0fdd2d6169ca2fa3b9cffe48e
Author: Todd Neal <todd@tneal.org>
Date:   Wed Mar 16 21:22:41 2016 -0500

    cmd/compile/test: replace switch{} with go:noinline
    
    Change-Id: Ic40449b2e4b4f18cbe5b5d4c3d51ea7b05ac674d
    Reviewed-on: https://go-review.googlesource.com/20823
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ac2f84d5244172079445b26354d1f3b64ff01838
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Mar 17 05:33:13 2016 +0900

    net: make unexposed methods start with lowercase letters
    
    This change makes unexposed methods start with lowercase letters for
    avoiding unnecessary confusion because the net package uses many
    embedding structures and intrefaces for controlling exposure of APIs.
    
    Note that this change leaves DNS-related methods as they are.
    
    Change-Id: I253758d1659175c5d0af6b2efcd30ce83f46543d
    Reviewed-on: https://go-review.googlesource.com/20784
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 50487b2c8df85006baf8506aad9f18e197fdbff8
Author: Hyang-Ah Hana Kim <hyangah@gmail.com>
Date:   Thu Mar 17 15:32:20 2016 -0400

    cmd/pack,vet: use `go doc` instead of `godoc` in doc
    
    Change-Id: Ic5f62a7d0a5c090da69213d1d0187af0ea48e358
    Reviewed-on: https://go-review.googlesource.com/20820
    Reviewed-by: Rob Pike <r@golang.org>

commit 3a17fdaba037aa0fac9ee06f2cd8636ba61182d0
Author: David Chase <drchase@google.com>
Date:   Thu Mar 17 16:14:41 2016 -0400

    cmd/compile: correct maintain use count when phi args merge
    
    The critical phase did not correctly maintain the use count
    when two predecessors of a new critical block transmit the
    same value.
    
    Change-Id: Iba802c98ebb84e36a410721ec32c867140efb6d4
    Reviewed-on: https://go-review.googlesource.com/20822
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit ebd9f1bd4c39bc2fe3bcf6f0d3c81f70dae495d8
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Sun Mar 13 22:12:03 2016 +0100

    encoding/binary: remove bound checks from conversions.
    
    * This the simplest solution I could came up with
    that doesn't required changing the compiler.
    * The bound checks become constants now
    so they are removed during opt phase.
    
    Updates #14808
    
    Change-Id: If32c33d7ec08bb400321b465015d152f0a5d3001
    Reviewed-on: https://go-review.googlesource.com/20654
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit dbed1c6361f333f7a7aaec1a33a69d0b53956f6b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 17 13:26:08 2016 -0700

    cmd/compile: eliminate NumFields wrapper functions
    
    Change-Id: I3c6035559288cfdc33857216f50241b81932c8a4
    Reviewed-on: https://go-review.googlesource.com/20811
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 15ed37d7b79721ad2077290f844d25e3e42a7821
Author: Keith Randall <khr@golang.org>
Date:   Wed Mar 16 21:51:17 2016 -0700

    cmd/compile: enforce nowritebarrier in SSA compiler
    
    Make sure we don't generate write barriers in runtime
    code that is marked to forbid write barriers.
    
    Implement the optimization that if we're writing a sliced
    slice back to the location it came from, we don't need a
    write barrier.
    
    Fixes #14784
    
    Change-Id: I04b6a3b2ac303c19817e932a36a3b006de103aaa
    Reviewed-on: https://go-review.googlesource.com/20791
    Reviewed-by: Austin Clements <austin@google.com>

commit 16029babe24c516230399205a74becb2c215e11a
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Thu Mar 17 13:18:34 2016 +0200

    cmd/compile: deduplicate symbol references
    
    Reduces size of archives in pkg/linux_amd64 by 1.4MB (3.2%),
    slightly improving link time.
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.52 ± 3%  0.51 ± 2%  -0.65%  (p=0.000 n=98+99)
    
    Change-Id: I7e265f4d4dd08967c5c5d55c1045e533466bbbec
    Reviewed-on: https://go-review.googlesource.com/20802
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2d03b5b572c029a1612c89d76028ead20feed04b
Author: Ingo Oeser <nightlyone@googlemail.com>
Date:   Thu Mar 17 20:40:02 2016 +0100

    cmd/compile: fix comment
    
    Change-Id: I32fd5c36f055fdb1dfe56524085676aa4111089a
    Reviewed-on: https://go-review.googlesource.com/20830
    Reviewed-by: David Chase <drchase@google.com>

commit c837761b522e8d60031dcd282739d6dc89eea414
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 17 01:47:16 2016 -0700

    cmd/compile: get rid of Type's {This,In,Out}tuple fields
    
    Boolean expressions involving t.Thistuple were converted to use
    t.Recv(), because it's a bit clearer and will hopefully reveal cases
    where we could remove redundant calls to t.Recv() (in followup CLs).
    
    The other cases were all converted to use t.Recvs().NumFields(),
    t.Params().NumFields(), or t.Results().NumFields().
    
    Change-Id: I4df91762e7dc4b2ddae35995f8dd604a52c09b09
    Reviewed-on: https://go-review.googlesource.com/20796
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>

commit d44761387516ceaac00f00bc19417495d23cf7e3
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 17 01:39:59 2016 -0700

    cmd/compile: simplify typehash
    
    We never need a type hash for a method type, so skip trying to
    overwrite Thistuple.
    
    Change-Id: I8de6480ba5fd321dfa134facf7661461d298840e
    Reviewed-on: https://go-review.googlesource.com/20795
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f6bca3f32d4cc49eab76e6a16ce8418ae76d1ffc
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 17 01:32:18 2016 -0700

    cmd/compile: eliminate a bunch of IterFields/IterMethods calls
    
    This is an automated rewrite of all the calls of the form:
    
        for f, it := IterFields(t); f != nil; f = it.Next() { ... }
    
    Followup CLs will work on cleaning up the remaining cases.
    
    Change-Id: Ic1005ad45ae0b50c63e815e34e507e2d2644ba1a
    Reviewed-on: https://go-review.googlesource.com/20794
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 517b6131b2f62d7a57851aca44e590da51e7e849
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 17 00:44:07 2016 -0700

    cmd/compile: add and use new Fields type
    
    Analogous to the Nodes type used as a more space efficient []*Node
    representation.
    
    Passes toolstash -cmp.
    
    Change-Id: I8341e45304777d6e4200bd36dadc935b07ccf3ff
    Reviewed-on: https://go-review.googlesource.com/20793
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 857d0b48dbdf8b41dc5fe4823cd81a8a5298c1eb
Author: Austin Clements <austin@google.com>
Date:   Thu Mar 17 14:08:32 2016 -0400

    runtime: document sudog
    
    Change-Id: I85c0bcf02842cc32dbc9bfdcea27efe871173574
    Reviewed-on: https://go-review.googlesource.com/20774
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ac74e5debc884ea4545e23c3248385f0d683524a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 17 04:58:34 2016 -0700

    cmd/compile: stop constructing sudog type
    
    The compiler doesn't care about the runtime's sudog type. Stop
    constructing it.
    
    Change-Id: If1885fe30b2e215a08d17662eab5ea6d81fe58ab
    Reviewed-on: https://go-review.googlesource.com/20797
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 65b4020403aae13676e2f84e868f35d2f72629ad
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Mar 16 22:22:58 2016 -0700

    cmd/compile: don't create 2 Sym's and 2 Node's for every string
    
    For every string constant the compiler was creating 2 Sym's and 2
    Node's.  It would never refer to them again, but would keep them alive
    in gostringpkg.  This changes the code to just use obj.LSym's instead.
    
    When compiling x/tools/go/types, this yields about a 15% reduction in
    the number of calls to newname and a 3% reduction in the total number of
    Node objects.  Unfortunately I couldn't see any change in compile time,
    but reducing memory usage is desirable anyhow.
    
    Passes toolstash -cmp.
    
    Change-Id: I24f1cb1e6cff0a3afba4ca66f7166874917a036b
    Reviewed-on: https://go-review.googlesource.com/20792
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2d56dee61bf76328b3e4289f147076eb88c5582b
Author: David Chase <drchase@google.com>
Date:   Mon Feb 29 10:43:18 2016 -0500

    cmd/compile: escape analysis explanations added to -m -m output
    
    This should probably be considered "experimental" at this stage, but
    what it needs is feedback from adventurous adopters.  I think the data
    structure used for describing escape reasons might be extendable to
    allow a cleanup of the underlying algorithms, which suffers from
    insufficiently separated concerns (the graph does not deal well with
    escape level adjustments, so it is augmented by a second custom-walk
    portion of the "flood" phase. It would be better to put it all,
    including level adjustments, in a single graph structure, and then
    simply flood the graph.
    
    Tweaked to avoid allocations in the no-logging case.
    
    Modified run.go to ignore lines with leading "#" in the output (since
    it can never match a line), and in -update_errors to ignore leading
    tabs in output lines and to normalize embedded filenames.
    
    Currently requires -m -m because otherwise the noise/update
    burden for the other escape tests is considerable.
    
    There is a partial test.  Existing escape analysis tests seem to
    cover all except the panic case and what looks like it might be
    unreachable code in escape analysis.
    
    Fixes #10526.
    
    Change-Id: I2524fdec54facae48b00b2548e25d9e46fcaf832
    Reviewed-on: https://go-review.googlesource.com/18041
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 50bc546d432632ba948efd43927973ea752549ed
Author: Todd Neal <todd@tneal.org>
Date:   Tue Mar 15 21:14:04 2016 -0500

    cmd/compile: reuse blocks in critical pass
    
    If a phi has duplicate arguments, then the new block that is constructed
    to remove the critical edge can be used for all of the duplicate
    arguments.
    
    read-only data = -904 bytes (-0.058308%)
    global text (code) = -2240 bytes (-0.060056%)
    Total difference -3144 bytes (-0.056218%)
    
    Change-Id: Iee3762744d6a8c9d26cdfa880bb23feb62b03c9c
    Reviewed-on: https://go-review.googlesource.com/20746
    Run-TryBot: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f2f2434d47c711dcbe7d3abdee4293ae0f4c0739
Author: Richard Miller <miller.research@gmail.com>
Date:   Thu Mar 17 10:20:54 2016 +0000

    syscall: avoid failure in plan9 StartProcess from fd close race
    
    Between the enumeration of fdsToClose in the parent and the
    closing of fds in the child, it's possible for a file to be
    closed in another thread. If that file descriptor is reused
    when opening the child-parent status pipe, it will be closed
    prematurely in the child and the forkExec gets out of sync.
    This has been observed to cause failures in builder tests
    when the link step of a build is started before the compile
    step has run, with "file does not exist" messages as the
    visible symptom.
    
    The simple workaround is to check against closing the pipe.
    A more comprehensive solution would be to rewrite the fd
    closing code to avoid races, along the lines of the long
    ago proposed https://golang.org/cl/57890043 - but meanwhile
    this correction will prevent some builder failures.
    
    Change-Id: I4ef5eaea70c21d00f4df0e0847a1c5b2966de7da
    Reviewed-on: https://go-review.googlesource.com/20800
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: David du Colombier <0intro@gmail.com>

commit d38275c74a3f694e35efdc5e3586487ed5e7659c
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Mar 11 13:29:23 2016 +0100

    fmt: separate unicode and integer formatting
    
    Separate unicode formatting into its own fmt_unicode function.
    Remove the fmtUnicode wrapper and the f.unicode and f.uniQuote
    flags that are not needed anymore. Remove mangling and restoring
    of the precision and sharp flags.
    
    Removes the buffer copy needed for %#U by moving
    the character encoding before the number encoding.
    
    Changes the behavior of plus and space flag to have
    no effect instead of printing a plus or space before "U+".
    
    Always print at least four digits after "U+"
    even if precision is set to less than 4.
    
    Change-Id: If9a0ee79e9eca2c76f06a4e0fdd75d98393899ac
    Reviewed-on: https://go-review.googlesource.com/20574
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 56e0ecc5ea67c4cd71fe894bf9745f35273bcdea
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 15 20:45:50 2016 -0700

    cmd/compile: keep value use counts in SSA
    
    Keep track of how many uses each Value has.  Each appearance in
    Value.Args and in Block.Control counts once.
    
    The number of uses of a value is generically useful to
    constrain rewrite rules.  For instance, we might want to
    prevent merging index operations into loads if the same
    index expression is used lots of times.
    
    But I have one use in particular for which the use count is required.
    We must make sure we don't combine ops with loads if the load has
    more than one use.  Otherwise, we may split a single load
    into multiple loads and that breaks perceived behavior in
    the presence of races.  In particular, the load of m.state
    in sync/mutex.go:Lock can't be done twice.  (I have a separate
    CL which triggers the mutex failure.  This CL has a test which
    demonstrates a similar failure.)
    
    Change-Id: Icaafa479239f48632a069d0c3f624e6ebc6b1f0e
    Reviewed-on: https://go-review.googlesource.com/20790
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit cb1f2afc99f844be5f78b701adbe0b7b75259a4c
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Mar 17 13:46:43 2016 +1100

    cmd/compile/internal/gc: disable logProgs debug flag
    
    Spotted while splunking in the compiler with GOGC=off.
    
    name       old time/op     new time/op     delta
    Template       407ms ± 5%      402ms ± 6%     ~           (p=0.301 n=20+20)
    GoTypes        1.33s ± 2%      1.29s ± 1%   -3.47%        (p=0.000 n=20+20)
    Compiler       6.21s ± 1%      5.91s ± 2%   -4.83%        (p=0.000 n=20+20)
    
    name       old alloc/op    new alloc/op    delta
    Template      66.8MB ± 0%     63.9MB ± 0%   -4.46%        (p=0.000 n=19+20)
    GoTypes        232MB ± 0%      220MB ± 0%   -5.16%        (p=0.000 n=19+17)
    Compiler      1.02GB ± 0%     0.97GB ± 0%   -5.81%        (p=0.000 n=20+20)
    
    name       old allocs/op   new allocs/op   delta
    Template        789k ± 0%       708k ± 0%  -10.28%        (p=0.000 n=19+20)
    GoTypes        2.49M ± 0%      2.20M ± 0%  -11.57%        (p=0.000 n=20+20)
    Compiler       10.8M ± 0%       9.4M ± 0%  -12.82%        (p=0.000 n=20+20)
    
    Change-Id: I76615cab912dde10595ca6ab9979ff6c5f1aec49
    Reviewed-on: https://go-review.googlesource.com/20782
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 956e9e6c831e9018c2b82fedb9726c1299d421a9
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Thu Mar 17 12:38:51 2016 +1300

    cmd/link: do not add duplicate symbols to Allsym
    
    When building shared libraries, all symbols on Allsym are marked reachable.
    What I didn't realize was that this includes the ".dup" symbols created when
    "dupok" symbols are read from multiple package files. This breaks now because
    deadcode makes some assumptions that fail for these ".dup" symbols, but in any
    case was a bad idea -- I suspect this change makes libstd.so a bunch smaller,
    but creating it was broken before this CL so I can't be sure.
    
    This change simply stops adding these symbols to Allsym, which might make some
    of the many iterations over Allsym the linker does a touch quicker, although
    that's not the motivation here.
    
    Add a test that no symbols called ".dup" makes it into the runtime shared
    library.
    
    Fixes #14841
    
    Change-Id: I65dd6e88d150a770db2d01b75cfe5db5fd4f8d25
    Reviewed-on: https://go-review.googlesource.com/20780
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b2b5e779f51fa37cb241417887decf4be38240d6
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 11 14:38:16 2016 -0800

    cmd/compile: ignore receiver parameters in Eqtype
    
    Receiver parameters generally aren't relevant to the function
    signature type. In particular:
    
      1. When checking whether a type's method implements an interface's
         method, we specifically want to ignore the receiver parameters,
         because they'll be different.
    
      2. When checking interface type equality, interface methods always
         use the same "fakethis" *struct{} type as their receiver.
    
      3. Finally, method expressions and method values degenerate into
         receiver-less function types.
    
    The only case where we care about receiver types matching is in
    addmethod, which is easily handled by adding an extra Eqtype check of
    the receiver parameters. Also, added a test for this, since
    (surprisingly) there weren't any.
    
    As precedence, go/types.Identical ignores receiver parameters when
    comparing go/types.Signature values.
    
    Notably, this allows us to slightly simplify the "implements"
    function, which is used for checking whether type/interface t
    implements interface iface. Currently, cmd/compile actually works
    around Eqtype's receiver parameter checking by creating new throwaway
    TFUNC Types without the receiver parameter.
    
    (Worse, the compiler currently only provides APIs to build TFUNC Types
    from Nod syntax trees, so building those throwaway types also involves
    first building throwaway syntax trees.)
    
    Passes toolstash -cmp.
    
    Change-Id: Ib07289c66feacee284e016bc312e8c5ff674714f
    Reviewed-on: https://go-review.googlesource.com/20602
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit d33e37a7e3fd3e1d6dc697d7ec594068ff26d383
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 14 14:03:57 2016 -0700

    cmd/compile: further sinit.go cleanup
    
    Follow-up to CL 20674.
    
    Passes toolstash -cmp.
    
    Change-Id: I065fd4cd80d996c1e6566773189401ca4630c1ca
    Reviewed-on: https://go-review.googlesource.com/20692
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 826256497100607440b5651a4853b4c6bf816318
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 14 12:49:58 2016 -0700

    cmd/internal/obj/x86: estimate text size
    
    We can’t perfectly predict how large the function
    will be, but we can make a safe overestimate.
    No significant CPU time changes.
    
    name       old alloc/op    new alloc/op    delta
    Template      67.7MB ± 0%     67.5MB ± 0%   -0.24%          (p=0.029 n=4+4)
    Unicode       43.9MB ± 0%     43.8MB ± 0%   -0.13%          (p=0.029 n=4+4)
    GoTypes        244MB ± 0%      244MB ± 0%   -0.28%          (p=0.029 n=4+4)
    Compiler      1.05GB ± 0%     1.05GB ± 0%   -0.38%          (p=0.029 n=4+4)
    
    name       old allocs/op   new allocs/op   delta
    Template        795k ± 0%       794k ± 0%   -0.14%          (p=0.029 n=4+4)
    Unicode         569k ± 0%       569k ± 0%     ~             (p=0.114 n=4+4)
    GoTypes        2.59M ± 0%      2.58M ± 0%   -0.11%          (p=0.029 n=4+4)
    Compiler       11.0M ± 0%      11.0M ± 0%   -0.09%          (p=0.029 n=4+4)
    
    Passes toolstash -cmp.
    
    Change-Id: I0a92ab04cba7520540ec58fe7189666d0e771454
    Reviewed-on: https://go-review.googlesource.com/20771
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>

commit fb950cd7786d28a239c64f0799913eeea10acbc2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 16 14:10:51 2016 -0700

    cmd/internal/obj: convert Symgrow to a method
    
    Passes toolstash -cmp.
    
    Change-Id: I77a415a4e5d8de7eb902fb0866aaf8783259485a
    Reviewed-on: https://go-review.googlesource.com/20770
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5a34472d74637c84752d2c13ace78e4e6ab756b7
Author: James Bardin <j.bardin@gmail.com>
Date:   Wed Mar 16 13:53:53 2016 -0400

    cmd/cgo: add C.CBytes
    
    Add a C.CBytes function to copy a Go byte slice into C memory. This
    returns an unsafe.Pointer, since that is what needs to be passed to
    C.free, and the data is often opaque bytes anyway.
    
    Fixes #14838
    
    Change-Id: Ic7bc29637eb6f1f5ee409b3898c702a59833a85a
    Reviewed-on: https://go-review.googlesource.com/20762
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3e54ca9a4624fda0bcd76192aa529e826ef12b4f
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 16 18:22:58 2016 -0400

    cmd/compile: omit write barrier when assigning global function
    
    Currently we generate write barriers when the right side of an
    assignment is a global function. This doesn't fall into the existing
    case of storing an address of a global because we haven't lowered the
    function to a pointer yet.
    
    This write barrier is unnecessary, so eliminate it.
    
    Fixes #13901.
    
    Change-Id: Ibc10e00a8803db0fd75224b66ab94c3737842a79
    Reviewed-on: https://go-review.googlesource.com/20772
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 4e75932cf7148c6ed10f93bbc07a79a7f89e8bd2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 17:06:10 2016 -0700

    cmd/compile: make sinit consts Go-ish
    
    Passes toolstash -cmp.
    
    Change-Id: Ie11912a16d2cd54500e2f6e84316519b80e7c304
    Reviewed-on: https://go-review.googlesource.com/20672
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e6ed3e8a46c7a066c8ead6429274fa65ba1f42ba
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Mar 15 17:26:28 2016 -0700

    cmd/internal/obj/x86: clean up asm buffer
    
    c2go translated writing and advancing a pointer using slices.
    Switch to something more idiomatic.
    It is also more efficient, but not enough to matter.
    
    Change-Id: I67709632ac53253615a35365824ae97bbe5458d5
    Reviewed-on: https://go-review.googlesource.com/20767
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e248b96d249f040ac13878b9a995367e6354af00
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 14 12:48:24 2016 -0700

    cmd/internal/obj/x86: clean up part of span6
    
    Passes toolstash -cmp.
    
    Change-Id: I38eb507de2e9dc2cf01822e420bf31a91fb1b720
    Reviewed-on: https://go-review.googlesource.com/20766
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c1a4fe8d57d7b9bc85f8dc521bfb0ec039c322fc
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Mar 16 14:02:56 2016 -0700

    cmd/compile: remove dead code handling '~' operator
    
    The parser code was not reachable ever since some of the lexer cleanups.
    We could recognize '~' in the lexer, complain, and return a '^' instead,
    but it's been a few years since Go was new and this may have been a use-
    ful error. The lexer complains with "illegal character U+007E '~'" which
    is good enough.
    
    For #13244.
    
    Change-Id: Ie3283738486eb6f8462d594f2728ac98333c0520
    Reviewed-on: https://go-review.googlesource.com/20768
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8540a1c4dfd6f4950f5a1da6241c76765262ddbd
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 16 20:14:13 2016 +0000

    net/http: remove init func reference to ServeMux
    
    Shrinks cmd/go by 30KB.
    
    Change-Id: Ied31192e85af76ebac743f8cc12bd9ef6ec5048f
    Reviewed-on: https://go-review.googlesource.com/20765
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 826831acf7426f4e5e27198f96dbb07f933551b8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Mar 16 12:41:55 2016 -0700

    cmd/compile: move LSym.RefIdx for better packing
    
    Change-Id: I0516d49ee8381c5e022d77c2fb41515c01c8a631
    Reviewed-on: https://go-review.googlesource.com/20764
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 31a9e505241e22e4b6ee623419db601334158101
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 14 22:28:04 2016 -0700

    cmd/internal/obj: remove LSym.Etext
    
    Use a local variable instead.
    
    Passes toolstash -cmp.
    
    Change-Id: I9623a40ff0d568f11afd1279b6aaa1c33eda644c
    Reviewed-on: https://go-review.googlesource.com/20730
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit dd2ba0c7a78d333da340bcf00995162252febad7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 14 21:51:09 2016 -0700

    cmd/internal/obj: remove LSym.Next
    
    Instead, use a slice.
    
    Passes toolstash -cmp.
    
    Change-Id: I889fdb4ae997416f907522f549b96506be13bec7
    Reviewed-on: https://go-review.googlesource.com/20699
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 61b9315d3797ff9c007952c5096592542e655472
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 14 21:14:15 2016 -0700

    cmd/internal/obj: remove LSym.Value
    
    It is unused.
    
    Passes toolstash -cmp.
    
    Change-Id: I22ae2bb432ce6be377dea43cf018ffccb6e95f37
    Reviewed-on: https://go-review.googlesource.com/20698
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f11e4eb5cc94a64f05204972874ec457c1401b8d
Author: Austin Clements <austin@google.com>
Date:   Mon Feb 15 18:30:48 2016 -0500

    runtime: shrink stacks during concurrent mark
    
    Currently we shrink stacks during STW mark termination because it used
    to be unsafe to shrink them concurrently. For some programs, this
    significantly increases pause time: stack shrinking costs ~5ms/MB
    copied plus 2µs/shrink.
    
    Now that we've made it safe to shrink a stack without the world being
    stopped, shrink them during the concurrent mark phase.
    
    This reduces the STW time in the program from issue #12967 by an order
    of magnitude and brings it from over the 10ms goal to well under:
    
    name           old 95%ile-markTerm-time  new 95%ile-markTerm-time  delta
    Stackshrink-4               23.8ms ±60%               1.80ms ±39%  -92.44%  (p=0.008 n=5+5)
    
    Fixes #12967.
    
    This slows down the go1 and garbage benchmarks overall by < 0.5%.
    
    name              old time/op  new time/op  delta
    XBenchGarbage-12  2.48ms ± 1%  2.49ms ± 1%  +0.45%  (p=0.005 n=25+21)
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.93s ± 2%     2.97s ± 2%  +1.34%  (p=0.002 n=19+20)
    Fannkuch11-12                2.51s ± 1%     2.59s ± 0%  +3.09%  (p=0.000 n=18+18)
    FmtFprintfEmpty-12          51.1ns ± 2%    51.5ns ± 1%    ~     (p=0.280 n=20+17)
    FmtFprintfString-12          175ns ± 1%     169ns ± 1%  -3.01%  (p=0.000 n=20+20)
    FmtFprintfInt-12             160ns ± 1%     160ns ± 0%  +0.53%  (p=0.000 n=20+20)
    FmtFprintfIntInt-12          265ns ± 0%     266ns ± 1%  +0.59%  (p=0.000 n=20+20)
    FmtFprintfPrefixedInt-12     237ns ± 1%     238ns ± 1%  +0.44%  (p=0.000 n=20+20)
    FmtFprintfFloat-12           326ns ± 1%     341ns ± 1%  +4.55%  (p=0.000 n=20+19)
    FmtManyArgs-12              1.01µs ± 0%    1.02µs ± 0%  +0.43%  (p=0.000 n=20+19)
    GobDecode-12                8.41ms ± 1%    8.30ms ± 2%  -1.22%  (p=0.000 n=20+19)
    GobEncode-12                6.66ms ± 1%    6.68ms ± 0%  +0.30%  (p=0.000 n=18+19)
    Gzip-12                      322ms ± 1%     322ms ± 1%    ~     (p=1.000 n=20+20)
    Gunzip-12                   42.8ms ± 0%    42.9ms ± 0%    ~     (p=0.174 n=20+20)
    HTTPClientServer-12         69.7µs ± 1%    70.6µs ± 1%  +1.20%  (p=0.000 n=20+20)
    JSONEncode-12               16.8ms ± 0%    16.8ms ± 1%    ~     (p=0.154 n=19+19)
    JSONDecode-12               65.1ms ± 0%    65.3ms ± 1%  +0.34%  (p=0.003 n=20+20)
    Mandelbrot200-12            3.93ms ± 0%    3.92ms ± 0%    ~     (p=0.396 n=19+20)
    GoParse-12                  3.66ms ± 1%    3.65ms ± 1%    ~     (p=0.117 n=16+18)
    RegexpMatchEasy0_32-12      85.0ns ± 2%    85.5ns ± 2%    ~     (p=0.143 n=20+20)
    RegexpMatchEasy0_1K-12       267ns ± 1%     267ns ± 1%    ~     (p=0.867 n=20+17)
    RegexpMatchEasy1_32-12      83.3ns ± 2%    83.8ns ± 1%    ~     (p=0.068 n=20+20)
    RegexpMatchEasy1_1K-12       432ns ± 1%     432ns ± 1%    ~     (p=0.804 n=20+19)
    RegexpMatchMedium_32-12      133ns ± 0%     133ns ± 0%    ~     (p=1.000 n=20+20)
    RegexpMatchMedium_1K-12     40.3µs ± 1%    40.4µs ± 1%    ~     (p=0.319 n=20+19)
    RegexpMatchHard_32-12       2.10µs ± 1%    2.10µs ± 1%    ~     (p=0.723 n=20+18)
    RegexpMatchHard_1K-12       63.0µs ± 0%    63.0µs ± 0%    ~     (p=0.158 n=19+17)
    Revcomp-12                   461ms ± 1%     476ms ± 8%  +3.29%  (p=0.002 n=20+20)
    Template-12                 80.1ms ± 1%    79.3ms ± 1%  -1.00%  (p=0.000 n=20+20)
    TimeParse-12                 360ns ± 0%     360ns ± 0%    ~     (p=0.802 n=18+19)
    TimeFormat-12                374ns ± 1%     372ns ± 0%  -0.77%  (p=0.000 n=20+19)
    [Geo mean]                  61.8µs         62.0µs       +0.40%
    
    Change-Id: Ib60cd46b7a4987e07670eb271d22f6cee5802842
    Reviewed-on: https://go-review.googlesource.com/20044
    Reviewed-by: Keith Randall <khr@golang.org>

commit c14d25c648c5269c9752708dcb36052de62298fd
Author: Austin Clements <austin@google.com>
Date:   Mon Feb 15 18:24:06 2016 -0500

    runtime: generalize work.finalizersDone to work.markrootDone
    
    We're about to add another root marking job that needs to happen only
    during the first markroot pass (whether that's concurrent or STW),
    just like finalizer scanning. Rather than introducing another flag
    that has the same value as finalizersDone, just rename finalizersDone
    to markrootDone.
    
    Change-Id: I535356c6ea1f3734cb5b6add264cb7bf48de95e8
    Reviewed-on: https://go-review.googlesource.com/20043
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 276b1777717ec5a0a02364a5aee806f8076bb60b
Author: Austin Clements <austin@google.com>
Date:   Mon Feb 15 17:38:06 2016 -0500

    runtime: make shrinkstack concurrent-safe
    
    Currently shinkstack is only safe during STW because it adjusts
    channel-related stack pointers and moves send/receive stack slots
    without synchronizing with the channel code. Make it safe to use when
    the world isn't stopped by:
    
    1) Locking all channels the G is blocked on while adjusting the sudogs
       and copying the area of the stack that may contain send/receive
       slots.
    
    2) For any stack frames that may contain send/receive slot, using an
       atomic CAS to adjust pointers to prevent races between adjusting a
       pointer in a receive slot and a concurrent send writing to that
       receive slot.
    
    In principle, the synchronization could be finer-grained. For example,
    we considered synchronizing around the sudogs, which would allow
    channel operations involving other Gs to continue if the G being
    shrunk was far enough down the send/receive queue. However, using the
    channel lock means no additional locks are necessary in the channel
    code. Furthermore, the stack shrinking code holds the channel lock for
    a very short time (much less than the time required to shrink the
    stack).
    
    This does not yet make stack shrinking concurrent; it merely makes
    doing so safe.
    
    This has negligible effect on the go1 and garbage benchmarks.
    
    For #12967.
    
    Change-Id: Ia49df3a8a7be4b36e365aac4155a2416b94b988c
    Reviewed-on: https://go-review.googlesource.com/20042
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>

commit d45bf7228f742e63a30eef03e5288df332906838
Author: Austin Clements <austin@google.com>
Date:   Sun Feb 21 10:40:39 2016 -0500

    runtime: define lock order between G status and channel lock
    
    Currently, locking a G's stack by setting its status to _Gcopystack or
    _Gscan is unordered with respect to channel locks. However, when we
    make stack shrinking concurrent, stack shrinking will need to lock the
    G and then acquire channel locks, which imposes an order on these.
    
    Document this lock ordering and fix closechan to respect it.
    Everything else already happens to respect it.
    
    For #12967.
    
    Change-Id: I4dd02675efffb3e7daa5285cf75bf24f987d90d4
    Reviewed-on: https://go-review.googlesource.com/20041
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit db72b41bcd67ecb80890d586effbabd8d110952c
Author: Austin Clements <austin@google.com>
Date:   Thu Feb 18 09:34:43 2016 -0500

    runtime: protect sudog.elem with hchan.lock
    
    Currently sudog.elem is never accessed concurrently, so in several
    cases we drop the channel lock just before reading/writing the
    sent/received value from/to sudog.elem. However, concurrent stack
    shrinking is going to have to adjust sudog.elem to point to the new
    stack, which means it needs a way to synchronize with accesses to
    sudog.elem. Hence, add sudog.elem to the fields protected by
    hchan.lock and scoot the unlocks down past the uses of sudog.elem.
    
    While we're here, better document the channel synchronization rules.
    
    For #12967.
    
    Change-Id: I3ad0ca71f0a74b0716c261aef21b2f7f13f74917
    Reviewed-on: https://go-review.googlesource.com/20040
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3c2a21ff13c53b93db50cfb37b186d6200e2ceec
Author: Austin Clements <austin@google.com>
Date:   Thu Feb 25 15:37:40 2016 -0500

    runtime: fix transient _Gwaiting states in newstack
    
    With concurrent stack shrinking, the stack can move the instant after
    a G enters _Gwaiting. There are only two places that put a G into
    _Gwaiting: gopark and newstack. We fixed uses of gopark. This commit
    fixes newstack by simplifying its G transitions and, in particular,
    eliminating or narrowing the transient _Gwaiting states it passes
    through so it's clear nothing in the G is accessed while in _Gwaiting.
    
    For #12967.
    
    Change-Id: I2440ead411d2bc61beb1e2ab020ebe3cb3481af9
    Reviewed-on: https://go-review.googlesource.com/20039
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8fb182d0203c90ca04a04d83d37a24960012a3cc
Author: Austin Clements <austin@google.com>
Date:   Fri Feb 26 10:50:54 2016 -0500

    runtime: never pass stack pointers to gopark
    
    gopark calls the unlock function after setting the G to _Gwaiting.
    This means it's generally unsafe to access the G's stack from the
    unlock function because the G may start running on another P. Once we
    start shrinking stacks concurrently, a stack shrink could also move
    the stack the moment after it enters _Gwaiting and before the unlock
    function is called.
    
    Document this restriction and fix the two places where we currently
    violate it.
    
    This is unlikely to be a problem in practice for these two places
    right now, but they're already skating on thin ice. For example, the
    following sequence could in principle cause corruption, deadlock, or a
    panic in the select code:
    
    On M1/P1:
    1. G1 selects on channels A and B.
    2. selectgoImpl calls gopark.
    3. gopark puts G1 in _Gwaiting.
    4. gopark calls selparkcommit.
    5. selparkcommit releases the lock on channel A.
    
    On M2/P2:
    6. G2 sends to channel A.
    7. The send puts G1 in _Grunnable and puts it on P2's run queue.
    8. The scheduler runs, selects G1, puts it in _Grunning, and resumes G1.
    9. On G1, the sellock immediately following the gopark gets called.
    10. sellock grows and moves the stack.
    
    On M1/P1:
    11. selparkcommit continues to scan the lock order for the next
    channel to unlock, but it's now reading from a freed (and possibly
    reused) stack.
    
    This shouldn't happen in practice because step 10 isn't the first call
    to sellock, so the stack should already be big enough. However, once
    we start shrinking stacks concurrently, this reasoning won't work any
    more.
    
    For #12967.
    
    Change-Id: I3660c5be37e5be9f87433cb8141bdfdf37fadc4c
    Reviewed-on: https://go-review.googlesource.com/20038
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 005140a77e535fa614fbdaa3c6c5d4c7f69f7a91
Author: Austin Clements <austin@google.com>
Date:   Tue Feb 16 11:06:00 2016 -0500

    runtime: put g.waiting list in lock order
    
    Currently the g.waiting list created by a select is in poll order.
    However, nothing depends on this, and we're going to need access to
    the channel lock order in other places shortly, so modify select to
    put the waiting list in channel lock order.
    
    For #12967.
    
    Change-Id: If0d38816216ecbb37a36624d9b25dd96e0a775ec
    Reviewed-on: https://go-review.googlesource.com/20037
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>

commit 26594c3dfd67f1fccb328c02de680bfea7eef013
Author: Austin Clements <austin@google.com>
Date:   Mon Feb 15 23:50:58 2016 -0500

    runtime: use indexes for select lock order
    
    Currently the select lock order is a []*hchan. We're going to need to
    refer to things other than the channel itself in lock order shortly,
    so switch this to a []uint16 of indexes into the select cases. This
    parallels the existing representation for the poll order.
    
    Change-Id: I89262223fe20b4ddf5321592655ba9eac489cda1
    Reviewed-on: https://go-review.googlesource.com/20036
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e4a95b63433cc95c81782713b917b2941e48cb39
Author: Austin Clements <austin@google.com>
Date:   Mon Feb 15 17:37:04 2016 -0500

    runtime: record channel in sudog
    
    Given a G, there's currently no way to find the channel it's blocking
    on. We'll need this information to fix a (probably theoretical) bug in
    select and to implement concurrent stack shrinking, so record the
    channel in the sudog.
    
    For #12967.
    
    Change-Id: If8fb63a140f1d07175818824d08c0ebeec2bdf66
    Reviewed-on: https://go-review.googlesource.com/20035
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d7cedc4b74f902a3a1b429fb27f85380f6955a6f
Author: Austin Clements <austin@google.com>
Date:   Mon Mar 14 13:51:23 2016 -0400

    runtime: perform gcMarkRootCheck during STW in checkmark mode
    
    gcMarkRootCheck is too expensive to do during mark termination.
    However, since it's a useful check and it complements checkmark mode
    nicely, enable it during mark termination is checkmark is enabled.
    
    Change-Id: Icd9039e85e6e9d22747454441b50f1cdd1412202
    Reviewed-on: https://go-review.googlesource.com/20663
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a96884cf6c76a5d409ec4b193b6cc52534b80bad
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 16 18:26:43 2016 +0000

    net/http: use dynamic type assertion to remove HTTP server code from cmd/go
    
    I was wondering why cmd/go includes the HTTP server implementations.
    
    Dumping the linker's deadcode dependency graph into a file and doing
    some graph analysis, I found that the only reason cmd/go included an
    HTTP server was because the maxBytesReader type (used by both the HTTP
    transport & HTTP server) did a static type assertion to an HTTP server
    type.
    
    Changing it to a interface type assertion reduces the size of cmd/go
    by 533KB (5.2%)
    
    On linux/amd64, cmd/go goes from 10549200 to 10002624 bytes.
    
    Add a test too so this doesn't regress. The test uses cmd/go as the
    binary to test (a binary which needs the HTTP client but not the HTTP
    server), but this change and test are equally applicable to any such
    program.
    
    Change-Id: I93865f43ec03b06d09241fbd9ea381817c2909c5
    Reviewed-on: https://go-review.googlesource.com/20763
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bb3b10214d2d3a4403144d2edd420c27ca1a09e4
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Mar 15 19:06:00 2016 -0700

    cmd/compile: faster parameter parsing with no OKEY nodes
    
    Step 2 of stream-lining parameter parsing
    
    - do parameter validity checks in parser
    - two passes instead of multiple (and theoretically quadratic) passes
      when checking parameters
    - removes the need for OKEY and some ONONAME nodes in those passes
    
    This removes allocation of ~123K OKEY (incl. some ONONAME) nodes
    out of a total of ~10M allocated nodes when running make.bash, or
    a reduction of the number of alloacted nodes by ~1.2%.
    
    Change-Id: I4a8ec578d0ee2a7b99892ac6b92e56f8e0415f03
    Reviewed-on: https://go-review.googlesource.com/20748
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>

commit ed73efbb746c9ca361071bdd0cd825b2b9724ec9
Author: Alan Donovan <adonovan@google.com>
Date:   Wed Mar 16 12:57:17 2016 -0400

    runtime/debug: clarify WriteHeapDump STW behavior
    
    Change-Id: I049d2596fe8ce0e93391599f5c224779fd8e316f
    Reviewed-on: https://go-review.googlesource.com/20761
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9f301643bd3111f6a4e64b6fa400fa329ccb5a83
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Mar 15 16:55:48 2016 -0700

    cmd/compile: factor parameter parsing
    
    Step 1 of streamlining parameter parsing.
    
    Change-Id: If9fd38295ccc08aafc7f1d26188d0926dd73058b
    Reviewed-on: https://go-review.googlesource.com/20747
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c8b148e7a57c829c3525ecb30634ab31524ae712
Author: Todd Neal <todd@tneal.org>
Date:   Tue Mar 15 19:26:21 2016 -0500

    cmd/compile: fold constants from lsh/rsh/lsh and rsh/lsh/rsh
    
    Fixes #14825
    
    Change-Id: Ib44d80579a55c15d75ea2ad1ef54efa6ca66a9a6
    Reviewed-on: https://go-review.googlesource.com/20745
    Run-TryBot: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 42cd69f5d1a222a2e794d19e0b287dde2ee9a112
Author: Martin Möhrmann <martisch@uos.de>
Date:   Tue Mar 8 20:13:58 2016 +0100

    fmt: reuse buffer and add range checks for %c and %q
    
    Use The fmt internal buffer for character formatting instead of
    the pp Printer rune decoding buffer.
    
    Uses an uint64 instead of int64 argument to fmt_c and fmt_qc for easier
    range checks since no valid runes are represented by negative numbers or
    are above 0x10ffff.
    
    Add range checks to fmt_c and fmt_qc to guarantee that a RuneError
    character is returned by the functions for any invalid code point
    in range uint64. For invalid code points in range utf8.MaxRune
    the used utf8 and strconv functions already return a RuneError.
    
    Change-Id: I9772f804dfcd79c3826fa7f6c5ebfbf4b5304a51
    Reviewed-on: https://go-review.googlesource.com/20373
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit b8ddcc0a03415786bb6278849530c88bfa5b97e6
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Mar 12 13:53:19 2016 +0100

    fmt: cleanup %p and %T code paths
    
    Remove check for %p and %T in printValue.
    These verbs are not recursive and are handled already in
    printArg which is called on any argument before printValue.
    
    Format the type string for %T directly instead of invoking
    the more complex printArg with %s on the type string.
    
    Decouple the %T tests from variables declared in scan_test.go.
    
    Change-Id: Ibd51566bd4cc1a260ce6d052f36382ed05020b48
    Reviewed-on: https://go-review.googlesource.com/20622
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit fee86e4aa81712596d2e6151dc85821953dde107
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Sun Mar 6 02:21:08 2016 +0200

    cmd/vet: added some missing copylock checks
    
    Fixes #14664
    
    Change-Id: I8bda2435857772f590859808904c48d768b87d46
    Reviewed-on: https://go-review.googlesource.com/20254
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 55567d37e9c0543347239df69888f5f321fc9d08
Author: Rob Pike <r@golang.org>
Date:   Wed Mar 16 13:28:32 2016 +1100

    path: fix up bizarre test
    
    The Join test was doing something remarkable and unnecessary instead of
    just using ... on a slice. Maybe it was an editing relic.
    
    Fix it by deleting the monstrosity.
    
    Change-Id: I5b90c6d539d334a9c27e57d26dacd831721cfcfe
    Reviewed-on: https://go-review.googlesource.com/20727
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cf08eadf9fbde7d992883d3382f4e353eebe53a9
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Mar 11 08:10:55 2016 +0100

    fmt: clear flags before printing extra argument errors
    
    Do a reset of the fmt flags before printing the extra argument
    error message to prevent a malformed printing of extra arguments.
    
    Regroup tests for extra argument error strings.
    
    Change-Id: Ifd97f5ca36f6c97ed5a380d975cf154d17997d3f
    Reviewed-on: https://go-review.googlesource.com/20571
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 790053b25ed384a81dba1af7c8c0646b48018af3
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Mar 15 10:00:12 2016 +0900

    net: filter destination addresses when source address is specified
    
    This change filters out destination addresses by address family when
    source address is specified to avoid running Dial operation with wrong
    addressing scopes.
    
    Fixes #11837.
    
    Change-Id: I10b7a1fa325add2cd8ed58f105d527700a10d342
    Reviewed-on: https://go-review.googlesource.com/20586
    Reviewed-by: Paul Marks <pmarks@google.com>

commit 76b724cc6367309b046a9fc09d81b73f0dcccca4
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Mar 9 18:16:00 2016 +0900

    net: prevent spurious TCP connection setup notification on darwin
    
    On the latest darwin kernels, kevent in runtime-integrated network
    poller sometimes reports SYN-SENT state sockets as ESTABLISHED ones,
    though it's still unclear what's the root cause.
    
    This change prevents such spurious notifications by additional connect
    system calls.
    
    Fixes #14548.
    
    Change-Id: Ie29788e38ca735ca77259befeba3229d6a30ac52
    Reviewed-on: https://go-review.googlesource.com/20468
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5ce0170a26fc60bfde176cb9c09d2a47fac94cd3
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Mar 3 06:22:11 2016 +0900

    net: deduplicate Unix socket code
    
    This change consolidates functions and methods related to UnixAddr,
    UnixConn and UnixListener for maintenance purpose, especially for
    documentation.
    
    The followup changes will update comments and examples.
    
    Updates #10624.
    
    Change-Id: I372d152099ac10956284e6b3863d7e4d9fe5c8e9
    Reviewed-on: https://go-review.googlesource.com/20125
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 028e48c1dae1083ec9d8e55bd890157a44ab4499
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Mar 3 06:22:11 2016 +0900

    net: deduplicate raw IP socket code
    
    This change consolidates functions and methods related to IPAddr and
    IPConn for maintenance purpose, especially for documentation.
    
    The followup changes will update comments and examples.
    
    Updates #10624.
    
    Change-Id: Ia5146f234225704a3c0b6459e1903e56a7b68134
    Reviewed-on: https://go-review.googlesource.com/20124
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 20de705b711778864f285f06e42393c9ea2dad36
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Mar 3 06:22:11 2016 +0900

    net: deduplicate UDP socket code
    
    This change consolidates functions and methods related to UDPAddr and
    UDPConn for maintenance purpose, especially for documentation.
    
    The followup changes will update comments and examples.
    
    Updates #10624.
    
    Change-Id: Idfe9be8ea46ade1111b0ae176862b2048eafc7be
    Reviewed-on: https://go-review.googlesource.com/20120
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1f96c83bf68d63180be654802f00477533bce8a5
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Mar 14 10:02:47 2016 +0900

    net: simplify ipToSockaddr
    
    Change-Id: I5dbcdf0ee0b46b760b2a7decb1d937aac2a6fa8d
    Reviewed-on: https://go-review.googlesource.com/20585
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 763afe13b97dd0e3795a29afc9a43bb1189230db
Author: Todd Neal <todd@tneal.org>
Date:   Tue Mar 15 16:57:20 2016 -0500

    cmd/compile: change logging of spills for regalloc to Warnl format
    
    Change-Id: I01c000ff3f6dc6b0ed691e289eeef0fa61500337
    Reviewed-on: https://go-review.googlesource.com/20744
    Reviewed-by: Keith Randall <khr@golang.org>

commit a9d0244c334c6d8ac99eb59710d49bb85c707b29
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Mar 10 16:11:35 2016 +0100

    fmt: replace variables for type bit sizes with constants
    
    Use constants instead of dynamically computed values to determine
    the bit sizes of types similar to how strconv and other packages
    directly compute these sizes. Move these constants near the code
    that uses them.
    
    Change-Id: I78d113b7e697466097e32653975df5990380c2c1
    Reviewed-on: https://go-review.googlesource.com/20514
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 5630cb7518140e58174db7c0db40f16d982ba647
Author: Dave Day <djd@golang.org>
Date:   Wed Mar 16 10:24:03 2016 +1100

    net: make SplitHostPort return an empty host on error
    
    This change also refactors SplitHostPort to avoid using gotos and
    naked returns.
    
    Fixes #14827
    
    Change-Id: I4dca528936757fd06da76c23af8a0f6175bbedd1
    Reviewed-on: https://go-review.googlesource.com/20726
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8edb72587f500a1afcd0209a3c18310eafe95e08
Author: Todd Neal <todd@tneal.org>
Date:   Mon Mar 14 21:59:20 2016 -0500

    cmd/compile: add logging to critical and phielim
    
    Change-Id: Ieefeceea40bd29657fd519368b0920dad8443844
    Reviewed-on: https://go-review.googlesource.com/20712
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5305a329d8b6656d357d761afdd8067f61b1cad2
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 15 15:00:57 2016 -0700

    cmd/compile: turn off SSA internal consistency checks
    
    They've been on for a few weeks of general use and nothing
    has tripped up on them yet.
    
    Makes the compiler ~18% faster.
    
    Change-Id: I42d7bbc0581597f9cf4fb28989847814c81b08a2
    Reviewed-on: https://go-review.googlesource.com/20741
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7e3344f74eea51433918e29abb925e9f6e037888
Author: Michael Matloob <matloob@golang.org>
Date:   Tue Mar 15 17:45:10 2016 -0400

    runtime: update link to WriteHeapDump format
    
    The new link is https://golang.org/s/go15heapdump.
    
    Change-Id: Ifcaf8572bfe815ffaa78442a1991f6e20e990a50
    Reviewed-on: https://go-review.googlesource.com/20740
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 63142027de3a65de14298c5447a39cefe49ea1e3
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 15 13:06:58 2016 -0700

    cmd: collapse internal/obj/fmt.go into compile/internal/gc/fmt.go
    
    The obj.Fmt* values are only used by gc/fmt.go, so just move them
    there. Also, add comments documenting the correspondance between
    FmtFoo names and their flag characters to make understanding the
    existing documentation slightly less confusing.
    
    While here, add a new FmtFlag named type to represent these values.
    
    Change-Id: I9631214b892557d094823f1ac575d0c43a84007b
    Reviewed-on: https://go-review.googlesource.com/20717
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8e7072ca83f06a0b4afeef6538a4696e1572c5d0
Author: Wedson Almeida Filho <wedsonaf@google.com>
Date:   Sun Jan 24 19:23:48 2016 +0100

    sync: new Cond implementation
    
    Change Cond implementation to use a notification list such that waiters
    can first register for a notification, release the lock, then actually
    wait. Signalers never have to park anymore.
    
    This is intended to address an issue in the previous implementation
    where Broadcast could fail to signal all waiters.
    
    Results of the existing benchmark are below.
    
                                              Original          New  Diff
    BenchmarkCond1-48        2000000               745 ns/op    755 +1.3%
    BenchmarkCond2-48        1000000              1545 ns/op   1532 -0.8%
    BenchmarkCond4-48         300000              3833 ns/op   3896 +1.6%
    BenchmarkCond8-48         200000             10049 ns/op  10257 +2.1%
    BenchmarkCond16-48        100000             21123 ns/op  21236 +0.5%
    BenchmarkCond32-48         30000             40393 ns/op  41097 +1.7%
    
    Fixes #14064
    
    Change-Id: I083466d61593a791a034df61f5305adfb8f1c7f9
    Reviewed-on: https://go-review.googlesource.com/18892
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Caleb Spare <cespare@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 87151c82b68023e4224b016a6a66ead2c4b8ece7
Author: Caleb Spare <cespare@gmail.com>
Date:   Sun Mar 13 17:59:26 2016 -0700

    encoding/base64: correct DecodedLen overestimate for unpadded encodings
    
    While we're at it, add tests for EncodedLen and DecodedLen.
    
    Fixes #14803.
    
    Change-Id: I200c72cf11c51669b8d9f70c6e57ece359f7ae61
    Reviewed-on: https://go-review.googlesource.com/20649
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 95c6c5f36bb04e66d6a9523b3ad590faa6d563dd
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 15 13:34:15 2016 -0700

    math/big: fix comment typos
    
    Change-Id: I34cdc9cb3d32e86ff3a57db0012326c39cd55670
    Reviewed-on: https://go-review.googlesource.com/20718
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit f2772a49353e09e4e00121ca4e538a3b3302a1de
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Mar 14 21:30:43 2016 -0400

    cmd/compile: compute second method type at runtime
    
    The type information for a method includes two variants: a func
    without the receiver, and a func with the receiver as the first
    parameter. The former is used as part of the dynamic interface
    checks, but the latter is only returned as a type in the
    reflect.Method struct.
    
    Instead of computing it at compile time, construct it at run time
    with reflect.FuncOf.
    
    Using cl/20701 as a baseline,
    
            cmd/go: -480KB, (4.4%)
            jujud:  -5.6MB, (7.8%)
    
    For #6853.
    
    Change-Id: I1b8c73f3ab894735f53d00cb9c0b506d84d54e92
    Reviewed-on: https://go-review.googlesource.com/20709
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1b9f168f73c44b2743338a16e8122a13203e8e9b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 14 12:45:18 2016 -0700

    cmd/compile: use int for field index
    
    All of a struct's fields have to fit into memory anyway, so index them
    with int instead of int64.  This also makes it nicer for
    cmd/compile/internal/gc to reuse the same NumFields function.
    
    Change-Id: I210be804a0c33370ec9977414918c02c675b0fbe
    Reviewed-on: https://go-review.googlesource.com/20691
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d06b0db5bd4c898bd162e16ab603081ab62a527c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Mar 14 15:08:22 2016 -0400

    cmd/link: when pruning methods also prune funcType
    
    Remove method type information for pruned methods from any program
    that does not reflect on methods. This can be a significant saving:
    
            addr2line: -310KB (8.8%)
    
    A future update might want to consider a more aggressive variant of
    this: setting the Type and Func fields of reflect.Method to nil for
    unexported methods. That would shrink cmd/go by 2% and jujud by 2.6%
    but could be considered an API change. So this CL sticks to the
    uncontroversial change.
    
    For #6853.
    
    Change-Id: I5d186d9f822dc118ee89dc572c4912a3b3c72577
    Reviewed-on: https://go-review.googlesource.com/20701
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 41f9f6f47118d8c2546a1534240e0eca6baa1829
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 15 11:08:03 2016 -0700

    cmd/compile: fix load-combining
    
    Make sure symbol gets carried along by load-combining rule.
    Add the new load into the right block where we know that
    mem is live.
    
    Use auxInt field to carry i along instead of an explicit ADDQ.
    
    Incorporate LEA ops into MOVBQZX and friends.
    
    Change-Id: I587f7c6120b98fd2a0d48ddd6ddd13345d4421b4
    Reviewed-on: https://go-review.googlesource.com/20732
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit ad4410d40b6479493db4dff6c24a0c907d53c70a
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Tue Mar 15 19:49:50 2016 +0100

    archive/zip: add missing argument to error message
    
    Silence vet.
    
    Change-Id: I987438847389500cf3b5bc545ef918c66917b51a
    Reviewed-on: https://go-review.googlesource.com/20683
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f6fab93a4615ece698745493b368b884a65685f5
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 15 11:06:03 2016 -0700

    cmd/compile: make Type.Field stricter about bounds checking
    
    Turns out there were only two call sites that expected
    t.Field(t.NumFields()) to return nil.
    
    Change-Id: I4679988d38ee9d7c9d89883537a17046717b2a77
    Reviewed-on: https://go-review.googlesource.com/20731
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 80a051712981fb232567813e11899b592ddd51de
Author: Russ Cox <rsc@golang.org>
Date:   Sun Mar 13 21:34:46 2016 -0400

    os/user: allow LookupGroupId to fail during test
    
    On my Mac I am in group 5000 which apparently has no name
    (I suspect because it is an LDAP group and I cannot reach the
    LDAP server). Do not make the test fail in that case.
    
    Fixes #14806
    
    Change-Id: I56b11a8e86b048abfb00812eaad37802fd2adcc5
    Reviewed-on: https://go-review.googlesource.com/20710
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cea5d26aa21ab224b84c59983ffd1f022e65e008
Author: Dave Cheney <dave@cheney.net>
Date:   Tue Mar 15 18:08:22 2016 +1100

    cmd/compile/internal/gc: remove Thearch.Linkarchinit
    
    Change-Id: I8e990204c7a1e65d6b8e4262f6b5b9bd0cb3540c
    Reviewed-on: https://go-review.googlesource.com/20725
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 70090654de737e465df6d9d4c8aaa531285e5c71
Author: Dave Cheney <dave@cheney.net>
Date:   Tue Mar 15 17:03:10 2016 +1100

    cmd/compile/internal/gc: tidy plive.go
    
    Make boolean looking things boolean.
    
    Change-Id: I8d1c0a32b471412b25a72908c7da6458d7bbe65b
    Reviewed-on: https://go-review.googlesource.com/20723
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3648d2d4cd5dfe20fc25ebcf391176e65c056110
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Mon Mar 14 22:57:58 2016 +0200

    cmd/link, cmd/compile: Add symbol references to object file.
    
    Symbols in the object file currently refer to each other using symbol name
    and version. Referring to the same symbol many times in an object file takes
    up space and causes redundant map lookups. Instead write out a list of unique
    symbol references and have symbols refer to each other using indexes into this
    list.
    
    Credit to Michael Hudson-Doyle for kicking this off.
    
    Reduces pkg/linux_amd64 size by 30% from 61MB to 43MB
    
    name       old s/op   new s/op   delta
    LinkCmdGo  0.74 ± 3%  0.63 ± 4%  -15.22%  (p=0.000 n=20+20)
    LinkJuju   6.38 ± 6%  5.73 ± 6%  -10.16%  (p=0.000 n=20+19)
    
    Change-Id: I7e101a0c80b8e673a3ba688295e6f80ea04e1cfb
    Reviewed-on: https://go-review.googlesource.com/20099
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ea4b785ae03a067f4a26adac78213ff6caac5128
Author: Elias Naur <elias.naur@gmail.com>
Date:   Sat Mar 12 12:13:11 2016 +0100

    runtime: preserve darwin/arm{,64} callee-save registers
    
    CL 14603 attempted to preserve the callee-save registers for
    the darwin/arm runtime initialization routine, but I believe it
    wasn't sufficient and resulted in the crash reported in issue
    
    Saving and restoring the registers on the stack the same way
    linux/arm does seems more obvious and fixes #14778, so do that.
    
    Even though #14778 is not reproducible on darwin/arm64, I applied
    a similar change there, and to linux/arm64 which obeys the same
    calling convention.
    
    Finally, this CL is a candidate for a 1.6 minor release for the same
    reason CL 14603 was in a 1.5 minor release (as CL 16968). It is
    small and only touches the iOS platforms and gomobile on darwin/arm
    is currently useless without it.
    
    Fixes #14778
    Fixes #12590 (again)
    
    Change-Id: I7401daf0bbd7c579a7e84761384a7b763651752a
    Reviewed-on: https://go-review.googlesource.com/20621
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ac47f66abcd98cc5f0e121691acd3e8dced09b4b
Author: Dave Cheney <dave@cheney.net>
Date:   Tue Mar 15 15:55:47 2016 +1100

    cmd/compile/internal: clean up galign.go constants
    
    Move the C header style architecture constants to the per arch Main
    methods.
    
    Change-Id: Ie7ff39baa275ceaa6680e7d16441ca9f0aa12597
    Reviewed-on: https://go-review.googlesource.com/20722
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 04f23b64287b14240b11cd1c14e14f19329d428f
Author: Dave Cheney <dave@cheney.net>
Date:   Tue Mar 15 14:02:08 2016 +1100

    cmd/internal/obj: remove dead code
    
    Partial automatic cleanup driven by Dominik Honnef's unused tool.
    
    As _lookup now only has one caller, merge it into the caller and remove
    the conditional create logic.
    
    Change-Id: I2ea354d9d4b32a19905271eca74725231b6d8a93
    Reviewed-on: https://go-review.googlesource.com/20589
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 11a80860ada89b5ce8fc34ee2d91f73dfa89ab7b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 14 21:01:43 2016 -0700

    cmd/compile: move testdclstack out of the xdcl_list loop
    
    This is a band-aid, but it fixes the problem
    until a deeper fix is in place.
    
    Testing with genpkg -n 50000, I see:
    
    Before:
    
          154.67 real       184.66 user         3.15 sys
    
    After:
    
           61.82 real        96.99 user         2.17 sys
    
    
    Fixes #14781.
    
    Change-Id: I24c7822d60c289bdd6a18a7840b984954c95f7d4
    Reviewed-on: https://go-review.googlesource.com/20696
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit c45c51534845121da77ed5e0fbe4e0ecfff8c4bf
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Mar 10 17:36:49 2016 +0100

    fmt: handle %X like %x for byte type arrays and slices
    
    Treat the verb %X in the same special way as %q, %s and %x
    are for arrays and slices with byte type elements.
    
    Modify input for tests so the result of %x and %X is distinct.
    
    Change-Id: I38d227755e98c7fad5e4adc2f603c6873aa910fd
    Reviewed-on: https://go-review.googlesource.com/20516
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 80f2aff9efc494e561552eed11b4fcea44770f83
Author: Jeremy Jackins <jeremyjackins@gmail.com>
Date:   Sun Mar 13 10:23:18 2016 +0900

    cmd/compile: clean up C-style variable declarations in plive.go
    
    Change-Id: I928f51a1fe4830a81d4f5d3eb572785e06a75b77
    Reviewed-on: https://go-review.googlesource.com/20581
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit eb4d1be28586d17bc1e04abaf126c1e414e6446e
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 11 13:40:01 2016 -0800

    cmd/compile: keep variable numbering for inlineable exported functions
    
    Another step towards hooking up exported inlined function bodies.
    
    Change-Id: Ib8094b03ac7970fee0e51b5826b5f8aa232e23fb
    Reviewed-on: https://go-review.googlesource.com/20605
    Reviewed-by: Alan Donovan <adonovan@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>

commit 2e9369067bceab8d9c31346b72d7021b6a34075f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 14 01:20:49 2016 -0700

    cmd/compile: replace TFIELD kind with separate Field type
    
    Allows removing a bunch of unnecessary fields.
    
    Passes toolstash/buildall.
    
    Change-Id: Iec2492920e1c3ef352a9bf4296c74a55d9cc9ad6
    Reviewed-on: https://go-review.googlesource.com/20677
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2a46b08a027a20014d5178c070f759692e59a464
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 14 10:17:03 2016 -0700

    cmd/dist: build bootstrap toolchain with -l
    
    Workaround Go 1.4 compiler bugs.  See discussion at:
    https://groups.google.com/d/msg/golang-dev/Ss7mCKsvk8w/Gsq7VYI0AwAJ
    
    Change-Id: I842335fddffb67a6e21c000fe5bef258ea61c77a
    Reviewed-on: https://go-review.googlesource.com/20690
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f0711b9192ab03b41a42bf5e3e4d49bb3751f236
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Mon Mar 14 03:35:13 2016 -0600

    crypto/tls: minor refactors for readability
    
    Change-Id: I93e73f16474b4b31f7097af2f9479822dfc34c5c
    Reviewed-on: https://go-review.googlesource.com/20678
    Reviewed-by: Adam Langley <agl@golang.org>

commit c278f9302ea14148324941a5cf312ca7d90f6e30
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 14 00:24:43 2016 -0700

    cmd/compile: stop storing TFIELD types in Node.Type
    
    Currently, the only use for this is on the Left side of OKEY nodes
    within struct literals.  esc and fmt only care so they can recognize
    that the ONAME nodes are actually field names, which need special
    handling.
    
    sinit additionally needs to know the field's offset within the struct,
    which we can provide via Xoffset.
    
    Passes toolstash/buildall.
    
    Change-Id: I362d965e161f4d80fcd9c9bae0dfacc657dc0b29
    Reviewed-on: https://go-review.googlesource.com/20676
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9bffcf382b4f484876782a35bdff7297a60ab814
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 21:57:31 2016 -0700

    cmd/compile: minor cleanup in sinit.go
    
    Passes toolstash -cmp.
    
    Change-Id: Id16009ef3ef1173eafe0f0c578dbf325b61aab3c
    Reviewed-on: https://go-review.googlesource.com/20674
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0d2e92c2cadc143f17a375ba2172862d18cdc1ef
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Mar 13 23:02:38 2016 -0700

    cmd/compile: add Fields field to Type
    
    Switch TSTRUCT and TINTER to use Fields instead of Type, which wrings
    out the remaining few direct uses of the latter.
    
    Preparation for converting fields to use a separate "Field" type.
    
    Passes toolstash/buildall.
    
    Change-Id: I5a2ea7e159d0dde1be2c9afafc10a8f739d95743
    Reviewed-on: https://go-review.googlesource.com/20675
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 7971864267e9f6139ef1cd37ce70624e1b1cb92b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 17:48:17 2016 -0700

    cmd/compile: simplify InitPlan
    
    Passes toolstash -cmp.
    
    Change-Id: Iaa0d78c2552efb29e67f6c99c7287f8566027add
    Reviewed-on: https://go-review.googlesource.com/20673
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e59c1729ba35549323c5a2facd12c23ef5c06b16
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 19:28:32 2016 -0700

    cmd/compile: convert data siz to int
    
    Follow-up to CL 20645.
    
    Passes toolstash -cmp.
    
    Change-Id: Idc63c41b2be2d52e3a6ac59b3a12eb41aa2efbed
    Reviewed-on: https://go-review.googlesource.com/20670
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 57faad66772390defb9c708a31eaf5e51a0c18c3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 21:51:07 2016 -0700

    cmd/compile: fix CTNIL static data comments
    
    Change-Id: I434f881c10dec41a802641db8873abf1353beba2
    Reviewed-on: https://go-review.googlesource.com/20671
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a0232ea0dddfcc0827fd4094cbf261d85f0ae8f2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Mar 10 11:14:22 2016 -0800

    cmd/compile: allow deduplication of long strings
    
    String symbols' names used to appear in the final binary.
    Using a string's contents as it's symbol's name
    was a thus a bad idea if the string's name was long.
    Recent improvements by crawshaw have changed that.
    
    Instead of placing long strings behind opaque names
    in local packages, place them in the global string
    package and make them content-addressable.
    Symbol names still occur in the object files,
    so use a hash to avoid needless length there.
    
    Reduces the size of cmd/go by 30k.
    
    Change-Id: Ifdbbaf47bf44352418c90ddd903d5106e48db4f1
    Reviewed-on: https://go-review.googlesource.com/20524
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 13f74db304fdf6dc6241485d6e6f3f6a0327633c
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Mar 14 19:11:19 2016 +0100

    cmd/compile: fix no-opt build after moving decomposing user functions
    
    decompose-builtin pass requires an opt pass, but -N disables
    late-opt, the only opt pass (out of two) that happens
    after decompose-builtin.  This CL enables both 'opt' and 'late opt'
    passes. The extra compile time for 'late opt' in negligible
    since most rewrites were already done in the first 'opt'
    (also measured before). We should put some effort in splitting the
    generic rules into required and optional.
    
    Also update generic.rules comments about lowering
    of StringMake and SliceMake.
    
    Tested with GO_GCFLAGS=-N ./all.bash
    
    Change-Id: I92999681aaa02587b6dc6e32ce997a91f1fc9499
    Reviewed-on: https://go-review.googlesource.com/20682
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a4e31d42ee294c95a1c76cb73d2141485a635886
Author: Michael Pratt <mpratt@google.com>
Date:   Sat Mar 12 14:07:40 2016 -0800

    cmd/compile: remove amd64 code from package gc and the core gen tool
    
    Parts of the SSA compiler in package gc contain amd64-specific code,
    most notably Prog generation. Move this code into package amd64, so that
    other architectures can be added more easily.
    
    In package gc, this change is just moving code. There are no functional
    changes or even any larger structural changes beyond changing function
    names (mostly for export).
    
    In the cmd/compile/internal/ssa/gen tool, more information is included
    in arch to remove the AMD64-specific behavior in the main portion of the
    tool. The generated opGen.go is identical.
    
    Change-Id: I8eb37c6e6df6de1b65fa7dab6f3bc32c29daf643
    Reviewed-on: https://go-review.googlesource.com/20609
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Michael Pratt <mpratt@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b1a6e07919b965c36479fa7595107eb76393839f
Author: Austin Clements <austin@google.com>
Date:   Sat Feb 27 18:44:25 2016 -0500

    runtime: document the G states
    
    In particular, write down the rules for stack ownership because the
    details of this are about to get very important with concurrent stack
    shrinking. (Interestingly, the details don't actually change, but
    anything that's currently skating on thin ice is likely to fall
    through.)
    
    Fox #12967.
    
    Change-Id: I561e2610e864295e9faba07717a934aabefcaab9
    Reviewed-on: https://go-review.googlesource.com/20034
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit da153354b2862c1f7e1a55ad98680386d1fe31ef
Author: Austin Clements <austin@google.com>
Date:   Tue Feb 16 12:23:33 2016 -0500

    runtime: copy stack before adjusting
    
    Currently copystack adjusts pointers in the old stack and then copies
    the adjusted stack to the new stack. In addition to being generally
    confusing, this is going to make concurrent stack shrinking harder.
    
    Switch this around so that we first copy the stack and then adjust
    pointers on the new stack (never writing to the old stack).
    
    This reprises CL 15996, but takes a different and simpler approach. CL
    15996 still walked the old stack while adjusting pointers on the new
    stack. In this CL, we adjust auxiliary structures before walking the
    stack, so we can just walk the new stack.
    
    For #12967.
    
    Change-Id: I94fa86f823ba9ee478e73b2ba509eed3361c43df
    Reviewed-on: https://go-review.googlesource.com/20033
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 5a50e003067672ff13bc2ea0464f0cf83a943b2d
Author: Austin Clements <austin@google.com>
Date:   Wed Feb 17 13:43:19 2016 -0500

    runtime: improve comment on selectgo
    
    In particular, document that *sel is on the stack no matter what.
    
    Change-Id: I1c264215e026c27721b13eedae73ec845066cdec
    Reviewed-on: https://go-review.googlesource.com/20032
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 8a2d6e9f6fd2f9e5b06add7e1c958ee6d3051ca7
Author: Richard Miller <miller.research@gmail.com>
Date:   Mon Mar 14 10:24:19 2016 +0000

    runtime: fix a typo in asssembly macro GO_RESULTS_INITIALIZED
    
    Fixes #14772
    
    Change-Id: I32f2b6b74de28be406b1306364bc07620a453962
    Reviewed-on: https://go-review.googlesource.com/20680
    Reviewed-by: David du Colombier <0intro@gmail.com>
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 98b88de56f50ac67eeafcb326ed6a0b198182f59
Author: Todd Neal <todd@tneal.org>
Date:   Sun Mar 13 23:04:31 2016 -0500

    cmd/compile: change the type of ssa Warnl line number
    
    Line numbers are always int32, so the Warnl function should take the
    line number as an int32 as well.  This matches gc.Warnl and removes
    a cast every place it's used.
    
    Change-Id: I5d6201e640d52ec390eb7174f8fd8c438d4efe58
    Reviewed-on: https://go-review.googlesource.com/20662
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2dcbbbd193bf604570ecdfe4f696f32da95e7ffe
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Mar 13 15:44:00 2016 -0700

    cmd/internal/obj, cmd/asm: get rid of obj.ADATA
    
    Just recognize "DATA" as a special pseudo op word in the assembler
    directly.
    
    Change-Id: I508e111fd71f561efa600ad69567a7089a57adb2
    Reviewed-on: https://go-review.googlesource.com/20648
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit edde955d7fe610c2b0250efff548b89e22493349
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 11 18:54:37 2016 -0800

    cmd/internal/obj: support arbitrarily sized string data
    
    Updates #14786.
    
    Change-Id: I5fe889886f772167386cd10390ac50abc1383937
    Reviewed-on: https://go-review.googlesource.com/20607
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 4f753e77f1cee1aaca5a2166ef38c47a61b142a4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 14:24:22 2016 -0700

    cmd/all: stop generating ADATA Progs
    
    The only remaining place that generated ADATA
    Prog was the assembler. Stop, and delete some
    now-dead code.
    
    Passes toolstash -cmp.
    
    Change-Id: I26578ff1b4868e98562b44f69d909c083e96f8d5
    Reviewed-on: https://go-review.googlesource.com/20646
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7c18f8cdc37600637f05f1e87799cb013ee85772
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 12:16:43 2016 -0700

    cmd/compile: write some static data directly
    
    Instead of generating ADATA instructions for
    static data, write that static data directly
    into the linker sym.
    This is considerably more efficient.
    The assembler still generates
    ADATA instructions, so the ADATA machinery
    cannot be dismantled yet. (Future work.)
    Skipping ADATA has a significant impact
    compiling the unicode package, which has lots
    of static data.
    
    name     old time/op    new time/op    delta
    Unicode     227ms ±10%     192ms ± 4%  -15.61%  (p=0.000 n=29+30)
    
    name     old alloc/op   new alloc/op   delta
    Unicode    51.0MB ± 0%    45.8MB ± 0%  -10.29%  (p=0.000 n=30+30)
    
    name     old allocs/op  new allocs/op  delta
    Unicode      610k ± 0%      578k ± 0%   -5.29%  (p=0.000 n=30+30)
    
    This does not pass toolstash -cmp, because
    this changes the order in which some relocations
    get added, and thus it changes the output from
    the compiler. It is not worth the execution time
    to sort the relocs in the normal case.
    
    However, compiling with -S -v generates identical
    output if (1) you suppress printing of ADATA progs
    in flushplist and (2) you suppress printing of
    cpu timing. It is reasonable to suppress printing
    the ADATA progs, since the data itself is dumped
    later. I am therefore fairly confident that all
    changes are superficial and non-functional.
    
    Fixes #14786, although there's more to do
    in general.
    
    Change-Id: I8dfabe7b423b31a30e516cfdf005b62a2e9ccd82
    Reviewed-on: https://go-review.googlesource.com/20645
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 368507bb6fde52fc60797ced83a25e13b1c6b19d
Author: Dominik Honnef <dominik@honnef.co>
Date:   Mon Mar 14 01:59:22 2016 +0100

    reflect: use SelectDir instead of uintptr in runtimeSelect
    
    And fix the wrong comment.
    
    Initially found this because the comment was wrong about the possible
    values. Then noticed that there doesn't seem to be any reason to use
    uintptr over SelectDir.
    
    Change-Id: I4f9f9640e49d89e558ed00bd99e57dab890785f5
    Reviewed-on: https://go-review.googlesource.com/20655
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 43ed65f869828f8dfc2f860b8ca1f7648e6bb93d
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Mar 13 18:58:17 2016 +0100

    runtime: speed up growslice by avoiding divisions
    
    Only compute the number of maximum allowed elements per slice once.
    Special case newcap computation for slices with byte sized elements.
    
    name              old time/op  new time/op  delta
    GrowSliceBytes-2  61.1ns ± 1%  43.4ns ± 1%  -29.00%  (p=0.000 n=20+20)
    GrowSliceInts-2   85.9ns ± 1%  75.7ns ± 1%  -11.80%  (p=0.000 n=20+20)
    
    Change-Id: I5d9c0d5987cdd108ac29dc32e31912dcefa2324d
    Reviewed-on: https://go-review.googlesource.com/20653
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b55a5dbb8acacf99007d3505c5a763d48c684bb4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Mar 13 12:40:09 2016 -0700

    os/user: fix formatting of error group lookup message
    
    It was failing like "unknown groupid ᎈ|" instead of "unknown groupid
    5000" due to the conversion from int to string.
    
    Updates #14806
    
    Change-Id: I83e4b478ff628ad4053573a9f32b3fadce22e847
    Reviewed-on: https://go-review.googlesource.com/20642
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit d1341d6cf300ea29e4ac50037d950b4d7a110073
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Mar 13 15:22:45 2016 -0700

    cmd/compile, runtime: eliminate growslice_n
    
    Fixes #11419.
    
    Change-Id: I7935a253e3e96191a33f5041bab203ecc5f0c976
    Reviewed-on: https://go-review.googlesource.com/20647
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8ec80176d49d268beb282ec32ee9fe7275ef170b
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Mar 11 01:10:35 2016 +0100

    cmd/compile: move decompose builtin closer to late opt
    
    * Shaves about 10k from pkg/tools/linux_amd64.
    * Was suggested by drchase before
    * Found by looking at ssa output of #14758
    
    Change-Id: If2c4ddf3b2603d4dfd8fb4d9199b9a3dcb05b17d
    Reviewed-on: https://go-review.googlesource.com/20570
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fdc04223c5ed16ba568f6ce1b4859bc06e43df5e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 11:54:14 2016 -0700

    cmd/compile: clean up savedata
    
    Simplify function signature.
    Remove unused Ctxt field Enforce_data_order.
    
    Passes toolstash -cmp.
    
    Change-Id: I5caa270ca9ae725708fe415b2c978b5f40780255
    Reviewed-on: https://go-review.googlesource.com/20644
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e8fab405cb5f7e6f10357ed26720c6b8938a5be3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Mar 12 13:40:30 2016 -0800

    cmd/compile: minor cleanup
    
    Passes toolstash -cmp.
    
    Change-Id: Ib8c76081956e1d4eecef16b82bc8d527d7849d7e
    Reviewed-on: https://go-review.googlesource.com/20643
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 69f49e1cbcc38be1abb4bd8b2bd3376f53cc55c3
Author: Egon Elbre <egonelbre@gmail.com>
Date:   Sat Mar 12 21:09:14 2016 +0200

    cmd/pprof: fix crash with invalid source
    
    pprof crashed when running with:
    
         go tool pprof %INVALID
    
    Change-Id: I47c2a4da7273e3a97a833f320a650b8c6b59d6b9
    Reviewed-on: https://go-review.googlesource.com/20632
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit af1c29c1c1051a26de4cc72454827dd01e578b45
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 13 10:13:03 2016 -0700

    cmd/internal/obj: sort relocs by off when printing
    
    This makes the output of compiling with -S more
    stable in the face of unimportant variation in the
    order in which relocs are generated.
    It is also more pleasant to read the relocs when
    they are sorted.
    
    Also, do some minor cleanup.
    
    For #14786
    
    Change-Id: Id92020b13fd21777dfb5b29c2722c3b2eb27001b
    Reviewed-on: https://go-review.googlesource.com/20641
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a2a48069fee931af943161c9f8a9aace32811b7b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 16:15:44 2016 -0800

    cmd/compile: rework how fieldtrack is implemented
    
    Shrinks gc.Type and gc.Func slightly.
    
    Passes "GOEXPERIMENT=fieldtrack ./all.bash" and "go test -a
    -toolexec='toolstash -cmp' -ldflags=-k=rsc.io/tmp/fieldtrack.tracked
    rsc.io/tmp/fieldtrack".
    
    Change-Id: I785fe8a18eb830d9867d34247e4cd41a6a7921d4
    Reviewed-on: https://go-review.googlesource.com/20557
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f6ceed2cab426403fb823938491accf35ee00d81
Author: Todd Neal <todd@tneal.org>
Date:   Fri Mar 11 19:36:54 2016 -0600

    cmd/compile: const folding for float32/64
    
    Split the auxFloat type into 32/64 bit versions and perform checking for
    exactly representable float32 values.  Perform const folding on
    float32/64.  Comment out some const negation rules that the frontend
    already performs.
    
    Change-Id: Ib3f8d59fa8b30e50fe0267786cfb3c50a06169d2
    Reviewed-on: https://go-review.googlesource.com/20568
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit cd798dcb88c69867d1a09e0d2e9430d8edec0f77
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Mar 7 18:36:16 2016 +0100

    cmd/compile/internal/ssa: generalize prove to all booleans
    
    * Refacts a bit saving and restoring parents restrictions
    * Shaves ~100k from pkg/tools/linux_amd64,
    but most of the savings come from the rewrite rules.
    * Improves on the following artificial test case:
    func f1(a4 bool, a6 bool) bool {
      return a6 || (a6 || (a6 || a4)) || (a6 || (a4 || a6 || (false || a6)))
    }
    
    Change-Id: I714000f75a37a3a6617c6e6834c75bd23674215f
    Reviewed-on: https://go-review.googlesource.com/20306
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6dfcc336c520efc85c5aab06ea9d6c45d0aad214
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sat Mar 12 16:41:08 2016 -0700

    runtime: move testSchedLocalQueue* to export_test
    
    Move functions testSchedLocalQueueLocal and testSchedLocalQueueSteal
    from proc.go to export_test.go, the only site that they are used.
    
    Fixes #14796
    
    Change-Id: I16b6fa4a13835eab33f66a2c2e87a5f5c79b7bd3
    Reviewed-on: https://go-review.googlesource.com/20640
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ab5cbc672b988a1cf656a27c2d5d8182cd660cc6
Author: Dominik Honnef <dominik@honnef.co>
Date:   Sat Mar 12 18:52:08 2016 +0100

    net/http: delete unused type readClose
    
    readClose hasn't been used in years.
    
    Change-Id: Ia963c082e049ef856c2a637fec15204efe48b3b6
    Reviewed-on: https://go-review.googlesource.com/20631
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2a7c446f987494228dc96d96272737568e01cddc
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sat Feb 27 03:14:06 2016 -0700

    net/http: make ParseMultipartForm also populate Request.PostForm
    
    Ensures that after request.ParseMultipartForm has been invoked,
    Request.PostForm and Request.Form are both populated with the
    same formValues read in, instead of only populating Request.Form.
    
    Fixes #9305
    
    Change-Id: I3d4a11b006fc7dffaa35360014fe15b8c74d00a3
    Reviewed-on: https://go-review.googlesource.com/19986
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 40bfec0022c027545f8b3e68050e7778dec7f7ce
Author: Todd Neal <todd@tneal.org>
Date:   Fri Mar 11 20:03:17 2016 -0600

    cmd/compile: reuse auto symbols during ssa construction
    
    Reuse auto symbols so cse can eliminate OpAddrs that refer to
    them.
    
    Change-Id: I69e6a3f77a3a33946459cf8c6eccf223f6125048
    Reviewed-on: https://go-review.googlesource.com/20569
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit eb57a1dd7525595b853963612b277150fa6c50c2
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Wed Mar 9 23:28:05 2016 +0200

    cmd/link: use string map for symbols with single version
    
    Reduces link time by ~3%
    
    Results with gc on:
    name       old s/op   new s/op   delta
    LinkCmdGo  0.82 ± 2%  0.78 ± 2%  -3.90%  (p=0.000 n=17+17)
    LinkJuju   7.11 ± 7%  6.87 ± 6%  -3.41%  (p=0.012 n=20+19)
    
    Less noisy results with gc turned off:
    name       old s/op   new s/op   delta
    LinkCmdGo  0.66 ± 2%  0.64 ± 2%  -3.14%  (p=0.000 n=18+20)
    LinkJuju   5.91 ± 1%  5.72 ± 2%  -3.17%  (p=0.000 n=20+20)
    
    Change-Id: I4cac7933b0b22d0aee18255e1ab54550ad364593
    Reviewed-on: https://go-review.googlesource.com/20478
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>

commit bb48b864b1c79c586b5807f3c78ab15e75e770e2
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri Mar 11 12:19:08 2016 +1100

    cmd/link: rewrite pe symbol table generating code
    
    Every go executable has COFF symbol table appended at the end. The table is
    used by nm and addr2line and contains all symbols present in the executable.
    The table is quite large. For example, my go.exe has 11736 records.
    
    To generate symbol table:
    1) we walk "all symbols" list to count symbols we want for the table;
    2) we allocate large global array of COFFSym structs (32 bytes each)
       to fit our symbols;
    3) we walk "all symbols" list again to fill our array with contents;
    4) we iterate over our global array to write all records to the file.
    
    This CL changes all these steps with single step:
    - walk "all symbols" list and write each COFF symbol table record to
      the file as we go.
    
    I hope new version is faster and uses less garbage, but I don't know
    how to benchmark this.
    
    Change-Id: Ie4870583250131ea4428e0e83a0696c9df1794e0
    Reviewed-on: https://go-review.googlesource.com/20580
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>

commit 77b527e283112d33000990c59e766074c9396292
Author: Keith Randall <khr@golang.org>
Date:   Fri Mar 11 17:39:00 2016 -0800

    cmd/compile: strength reduce *24
    
    We use *24 a lot for pointer arithmetic when accessing slices
    of slices ([][]T).  Rewrite to use an LEA and a shift.
    The shift will likely be free, as it often gets folded into
    an indexed load/store.
    
    Update #14606
    
    Change-Id: Ie0bf6dc1093876efd57e88ce5f62c26a9bf21cec
    Reviewed-on: https://go-review.googlesource.com/20567
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 68c86a00967fb83c4c8fca74498432967c91f778
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 11 17:12:31 2016 -0800

    cmd/compile: remove structpkg global variable
    
    The structpkg global variable was only used to verify internal
    consistency when declaring methods during import. Track the
    value in the parser and binary importer directly and pass it
    to the relevant function as an argument.
    
    Change-Id: I7e5e006f9046d84f9a3959616f073798fda36c97
    Reviewed-on: https://go-review.googlesource.com/20606
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7c546566c35ed682dcd1892d174071cde1014e46
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Mar 11 17:49:07 2016 -0500

    cmd/compile: compute number of arguments correctly
    
    The outCount value includes a flag bit for dotdotdot.
    
    If we have this count incorrect, then the offset for the
    methodset *rtype are in the wrong place.
    
    Fixes #14783
    
    Change-Id: If5acb16af08d4ffe36c8c9ee389c32f2712ce757
    Reviewed-on: https://go-review.googlesource.com/20566
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ae00df128d8434dd37f73123aaea09de786d0275
Author: Tom Bergan <tombergan@google.com>
Date:   Wed Feb 17 18:20:24 2016 -0800

    crypto/tls: implement dynamic record sizing
    
    Currently, if a client of crypto/tls (e.g., net/http, http2) calls
    tls.Conn.Write with a 33KB buffer, that ends up writing three TLS
    records: 16KB, 16KB, and 1KB. Slow clients (such as 2G phones) must
    download the first 16KB record before they can decrypt the first byte.
    To improve latency, it's better to send smaller TLS records. However,
    sending smaller records adds overhead (more overhead bytes and more
    crypto calls), which slightly hurts throughput.
    
    A simple heuristic, implemented in this change, is to send small
    records for new connections, then boost to large records after the
    first 1MB has been written on the connection.
    
    Fixes #14376
    
    Change-Id: Ice0f6279325be6775aa55351809f88e07dd700cd
    Reviewed-on: https://go-review.googlesource.com/19591
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Tom Bergan <tombergan@google.com>
    Reviewed-by: Adam Langley <agl@golang.org>

commit 1220ac27ceb6462a7489b10b3974ae8f742f3f3c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 11 13:04:07 2016 -0800

    cmd/compile: don't copy all type nodes for builtin functions
    
    Only copy the ones that actually change.  Also combine deep and substAny
    functions into one.  The Type.Copyany field is now unused, so remove it.
    
    Passes toolstash -cmp.
    
    Change-Id: Id28a9bf144ecf3e522aad00496f8a21ae2b74680
    Reviewed-on: https://go-review.googlesource.com/20600
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 055dcb75665992454454894e87216a2aa2215e4f
Author: Adam Langley <agl@golang.org>
Date:   Thu Mar 10 15:49:30 2016 -0800

    crypto/tls: document that the cipher suite list is non-exhaustive.
    
    Fixes #14370.
    
    Change-Id: Ieb95ee3494f592fb5fc74aa4b803479671816927
    Reviewed-on: https://go-review.googlesource.com/20551
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ec158cebd9f0115235f0dc836f663e4b8c285ab7
Author: Adam Langley <agl@golang.org>
Date:   Thu Mar 10 15:31:11 2016 -0800

    crypto/x509: correct OID for DSA-with-SHA-256.
    
    I copied this down incorrectly. See
    https://tools.ietf.org/html/rfc5758#section-3.1.
    
    Thankfully it's incredibly obscure.
    
    Fixes #14663.
    
    Change-Id: I4792ee979916cc15aa2e300c8bc989bc4f9c63ac
    Reviewed-on: https://go-review.googlesource.com/20549
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>

commit 88849736b22968d74a5fa9f0654cf29044869739
Author: Adam Langley <agl@golang.org>
Date:   Thu Mar 10 14:52:01 2016 -0800

    crypto/tls: better error for oversized handshake messages.
    
    This change improves the error message when encountering a TLS handshake
    message that is larger than our limit (64KB). Previously the error was
    just “local error: internal error”.
    
    Updates #13401.
    
    Change-Id: I86127112045ae33e51079e3bc047dd7386ddc71a
    Reviewed-on: https://go-review.googlesource.com/20547
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9d7b2b7b10fb30716c852b4dfe7e2c7350e7d0d7
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 11 15:22:21 2016 -0800

    cmd/compile: move universe block code into new universe.go
    
    Move lexinit, typeinit, lexinit1, and lexfini into new universe.go
    file, and give them a more idiomatic and descriptive API. No code
    changes.
    
    Change-Id: I0e9b25dcc86ad10f4b990dc02bd33477b488cc85
    Reviewed-on: https://go-review.googlesource.com/20604
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 76461c93a15c68044543391307bede2eeaa9aa0e
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 11 15:22:24 2016 -0800

    cmd/compile: move lexn and lexname into lex.go (cleanup)
    
    Missed these two declarations in the previous cleanup.
    
    Change-Id: I54ff3accd387dd90e12847daccf4477169797f81
    Reviewed-on: https://go-review.googlesource.com/20603
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 998b6dd75cf205b37a3f145bc93c50e44150af2c
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 11 14:28:16 2016 -0800

    cmd/compile: move lexer into separate file (cleanup)
    
    This is really moving all the non-lexer pieces out of lex.go
    into main.go. It's always been confusing that the top-most
    compiler entry point (Main) is in the same file with the
    lexer. Both files remain of substantial size (> 1000 lines),
    which justifies this even more.
    
    No other changes.
    
    Change-Id: I03895589d5e3cc2340580350bbc1420539893dfc
    Reviewed-on: https://go-review.googlesource.com/20601
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e78ff3823eac5cd79bbfb1e6b722699d592f3c6a
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 11 13:55:53 2016 -0800

    cmd/compile: simplify lexer.ungetr
    
    Change-Id: Id041c1b2d364aecd7a6613a53237f7de2c650a7e
    Reviewed-on: https://go-review.googlesource.com/20599
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e2836935bb95e82432b527b1f6a9f3e566150ff8
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Mar 10 19:32:04 2016 -0500

    cmd/link: treat reflect.Value.Method like Call
    
    Fixes #14740
    
    Change-Id: Iad8d971c21977b0a1f4ef55a08bb180a8125e976
    Reviewed-on: https://go-review.googlesource.com/20562
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5aa5db7593537e43b024d65b07f2a9c3379f100e
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Mar 11 13:39:20 2016 -0500

    cmd/compile: use bufio.Reader directly in lexer
    
    Removes an intermediate layer of functions that was clogging up a
    corner of the compiler's profile graph.
    
    I can't measure a performance improvement running a large build
    like jujud, but the profile reports less total time spent in
    gc.(*lexer).getr.
    
    Change-Id: I3000585cfcb0f9729d3a3859e9023690a6528591
    Reviewed-on: https://go-review.googlesource.com/20565
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cc158403d618eafc476b0727f44e4468c61060f6
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Mar 10 16:15:26 2016 -0500

    cmd/compile: track reflect.Type.Method in deadcode
    
    In addition to reflect.Value.Call, exported methods can be invoked
    by the Func value in the reflect.Method struct. This CL has the
    compiler track what functions get access to a legitimate reflect.Method
    struct by looking for interface calls to either of:
    
            Method(int) reflect.Method
            MethodByName(string) (reflect.Method, bool)
    
    This is a little overly conservative. If a user implements a type
    with one of these methods without using the underlying calls on
    reflect.Type, the linker will assume the worst and include all
    exported methods. But it's cheap.
    
    No change to any of the binary sizes reported in cl/20483.
    
    For #14740
    
    Change-Id: Ie17786395d0453ce0384d8b240ecb043b7726137
    Reviewed-on: https://go-review.googlesource.com/20489
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 4112f0f7e68f1fa75965aa010f52aa64739912a8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Mar 11 11:57:11 2016 -0800

    cmd/compile: improve go.importpath.* docs
    
    While we're here, remove a bit of dead code.
    
    Change-Id: I1344bb41e5d368825ca5748189382f9e7023c59a
    Reviewed-on: https://go-review.googlesource.com/20596
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2ac8555d57f7317590e0b0ff709c2be2674e70cc
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Mar 11 11:58:06 2016 -0800

    cmd/link: tidy up rdsym
    
    Use an early return. Check errors. Deduplicate.
    
    Change-Id: Iabefd563b5ef82a16fab4791277630804fd09003
    Reviewed-on: https://go-review.googlesource.com/20597
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit de4317cbd705b3dc53bc0ca0b5831568d57b621a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 11 03:25:00 2016 -0800

    cmd/compile: eliminate uses of Type.Down in bexport.go
    
    Change-Id: I298b9d389ac33a24365f4c06a122c3af989906c0
    Reviewed-on: https://go-review.googlesource.com/20594
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit d9bb69396034d6e3553018592926fbf0cd75a0cf
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 23:59:59 2016 -0800

    cmd/compile: sort interface methods in tointerface0
    
    Might as well sort them while they're still in a slice.
    
    Change-Id: I40c25ddc5c054dcb4da2aeefa79947967609d599
    Reviewed-on: https://go-review.googlesource.com/20591
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 53984e5be200c40c4cf2ded9a1d002a5906c9e1f
Author: Klaus Post <klauspost@gmail.com>
Date:   Tue Mar 8 15:54:50 2016 +0100

    compress/flate: optimize huffman bit encoder
    
    Part 1 of optimizing the deflater. This optimizes the bitwriter by:
    
    * Removing allocations.
    * Storing compound values for bit codes instead of 2 separate tables.
    * Accumulate 48 bits between writes instead of 24.
    * Inline bit flushing.
    
    This also contains code that will be used in later CL's
    (writeBlockDynamic, writeBlockHuff).
    
    Tests for Huffman bit writer encoding regressions has been added.
    
    name                       old speed      new speed      delta
    EncodeDigitsSpeed1e4-4     19.3MB/s ± 1%  21.6MB/s ± 1%  +11.77%
    EncodeDigitsSpeed1e5-4     25.0MB/s ± 6%  30.7MB/s ± 1%  +22.70%
    EncodeDigitsSpeed1e6-4     28.2MB/s ± 1%  32.3MB/s ± 1%  +14.64%
    EncodeDigitsDefault1e4-4   13.3MB/s ± 0%  14.2MB/s ± 1%   +7.07%
    EncodeDigitsDefault1e5-4   6.43MB/s ± 1%  6.64MB/s ± 1%   +3.27%
    EncodeDigitsDefault1e6-4   5.81MB/s ± 0%  5.85MB/s ± 1%   +0.69%
    EncodeDigitsCompress1e4-4  13.2MB/s ± 0%  14.4MB/s ± 0%   +9.10%
    EncodeDigitsCompress1e5-4  6.40MB/s ± 1%  6.61MB/s ± 0%   +3.20%
    EncodeDigitsCompress1e6-4  5.80MB/s ± 1%  5.90MB/s ± 1%   +1.64%
    EncodeTwainSpeed1e4-4      18.4MB/s ± 1%  20.7MB/s ± 1%  +12.72%
    EncodeTwainSpeed1e5-4      27.7MB/s ± 1%  31.0MB/s ± 1%  +11.78%
    EncodeTwainSpeed1e6-4      29.1MB/s ± 0%  32.9MB/s ± 2%  +13.25%
    EncodeTwainDefault1e4-4    12.4MB/s ± 0%  13.1MB/s ± 1%   +5.88%
    EncodeTwainDefault1e5-4    7.52MB/s ± 1%  7.83MB/s ± 0%   +4.19%
    EncodeTwainDefault1e6-4    7.08MB/s ± 1%  7.26MB/s ± 0%   +2.54%
    EncodeTwainCompress1e4-4   12.0MB/s ± 1%  12.8MB/s ± 1%   +6.70%
    EncodeTwainCompress1e5-4   5.96MB/s ± 1%  6.16MB/s ± 0%   +3.27%
    EncodeTwainCompress1e6-4   5.37MB/s ± 0%  5.39MB/s ± 1%   +0.47%
    
    >Allocations:
    
    benchmark                              old allocs     new allocs     delta
    BenchmarkEncodeDigitsSpeed1e4-4        50             0              -100.00%
    BenchmarkEncodeDigitsSpeed1e5-4        110            0              -100.00%
    BenchmarkEncodeDigitsSpeed1e6-4        1032           0              -100.00%
    BenchmarkEncodeDigitsDefault1e4-4      56             0              -100.00%
    BenchmarkEncodeDigitsDefault1e5-4      120            0              -100.00%
    BenchmarkEncodeDigitsDefault1e6-4      966            0              -100.00%
    BenchmarkEncodeDigitsCompress1e4-4     56             0              -100.00%
    BenchmarkEncodeDigitsCompress1e5-4     120            0              -100.00%
    BenchmarkEncodeDigitsCompress1e6-4     966            0              -100.00%
    BenchmarkEncodeTwainSpeed1e4-4         58             0              -100.00%
    BenchmarkEncodeTwainSpeed1e5-4         132            0              -100.00%
    BenchmarkEncodeTwainSpeed1e6-4         1082           0              -100.00%
    BenchmarkEncodeTwainDefault1e4-4       52             0              -100.00%
    BenchmarkEncodeTwainDefault1e5-4       126            0              -100.00%
    BenchmarkEncodeTwainDefault1e6-4       886            0              -100.00%
    BenchmarkEncodeTwainCompress1e4-4      52             0              -100.00%
    BenchmarkEncodeTwainCompress1e5-4      120            0              -100.00%
    BenchmarkEncodeTwainCompress1e6-4      880            0              -100.00%
    
    benchmark                              old bytes     new bytes     delta
    BenchmarkEncodeDigitsSpeed1e4-4        4288          2             -99.95%
    BenchmarkEncodeDigitsSpeed1e5-4        8896          15            -99.83%
    BenchmarkEncodeDigitsSpeed1e6-4        84098         153           -99.82%
    BenchmarkEncodeDigitsDefault1e4-4      4480          3             -99.93%
    BenchmarkEncodeDigitsDefault1e5-4      9216          76            -99.18%
    BenchmarkEncodeDigitsDefault1e6-4      73920         768           -98.96%
    BenchmarkEncodeDigitsCompress1e4-4     4480          3             -99.93%
    BenchmarkEncodeDigitsCompress1e5-4     9216          76            -99.18%
    BenchmarkEncodeDigitsCompress1e6-4     73920         768           -98.96%
    BenchmarkEncodeTwainSpeed1e4-4         4544          2             -99.96%
    BenchmarkEncodeTwainSpeed1e5-4         9600          15            -99.84%
    BenchmarkEncodeTwainSpeed1e6-4         77633         153           -99.80%
    BenchmarkEncodeTwainDefault1e4-4       4352          3             -99.93%
    BenchmarkEncodeTwainDefault1e5-4       9408          76            -99.19%
    BenchmarkEncodeTwainDefault1e6-4       65984         768           -98.84%
    BenchmarkEncodeTwainCompress1e4-4      4352          3             -99.93%
    BenchmarkEncodeTwainCompress1e5-4      9216          76            -99.18%
    BenchmarkEncodeTwainCompress1e6-4      65792         768           -98.83%
    
    Updates #14258
    
    Change-Id: Ibaa97b9619743ad623094727228eb2ada1ec7f1f
    Reviewed-on: https://go-review.googlesource.com/19336
    Reviewed-by: Nigel Tao <nigeltao@golang.org>
    Reviewed-by: Joe Tsai <joetsai@digital-static.net>
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit afdb8cff3ef267ecddb5ce807b850b8664ca9387
Author: Klaus Post <klauspost@gmail.com>
Date:   Fri Mar 11 12:23:11 2016 +0100

    compress/flate: test if results are deterministic
    
    This will test if deflate output is deterministic between two runs
    of the deflater, when write sizes differ.
    
    The deflater makes no official promises that results are
    deterministic between runs, but this is a good test to determine
    unintentional randomness.
    
    Note that this does not guarantee that results are deterministic
    across platforms nor that results will be deterministic between
    Go versions. This is also not guarantees we should imply.
    
    Change-Id: Id7dd89fe276060fd83a43d0b34ac35d50fcd32d9
    Reviewed-on: https://go-review.googlesource.com/20573
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d05773ce73ae5ed784dc47800992f58790023b4a
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 11 10:21:51 2016 -0500

    cmd/internal/obj: fix nil pointer dereference in Dconv
    
    p can be nil in Dconv so we need to do a check before dereferencing
    it. Fixes a problem I was having running toolstash.
    
    Change-Id: I34d6d278b319583d8454c2342ac88e054fc4b641
    Reviewed-on: https://go-review.googlesource.com/20595
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f973e79d096be18ad4272ad97803b7c08fca4dd0
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 11 00:44:39 2016 -0800

    cmd/compile: move InitPlan and InitEntry into sinit.go
    
    I don't know what they're used for, but that's the only file they're
    referenced in.
    
    Change-Id: Ie39d7d4621e2d5224408243b5789597ca0dc14be
    Reviewed-on: https://go-review.googlesource.com/20593
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 3621600c9207adc9d493e4f60ff74069d58518ca
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 11 00:23:37 2016 -0800

    cmd/compile: give "magic" code its own source file
    
    This code is an eye sore to keep scrolling past in subr.go, so move it
    out of the way.
    
    Change-Id: I8eafc1725d868a4924ee7ca9b7738cce309f9eff
    Reviewed-on: https://go-review.googlesource.com/20592
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit b354f914174f971b26ac813236627b7cccaf3382
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 10 22:01:41 2016 -0800

    runtime: limit TestCgoCCodeSIGPROF test to 1 second
    
    Still fails about 20% of the time on my laptop.
    
    Fixes #14766.
    
    Change-Id: I169ab728c6022dceeb91188f5ad466ed6413c062
    Reviewed-on: https://go-review.googlesource.com/20590
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit def9c0b06d4796364cda3c1e40d75bb0fa0ecddf
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Mar 10 20:35:27 2016 -0800

    cmd/compile: remove Label.Link field and lastlabel global var
    
    Change-Id: If2a174f482ecd56dee43f921d13fef98439872fc
    Reviewed-on: https://go-review.googlesource.com/20559
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 637e1aad5cecbdd12fb5f957e2b28ced5c3261fc
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Fri Feb 26 13:01:56 2016 -0700

    net/http: defer idleMu.Unlock() in tryPutIdleConn + minor typo fixes.
    
    Change-Id: Ia2273c3a9f0001d16b0c767fea91498a9acb0af5
    Reviewed-on: https://go-review.googlesource.com/19963
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c7917de0bb9c280ffb4d80c8551f8b790c30259e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 19:05:45 2016 -0800

    cmd/compile: simplify transformclosure
    
    Use idiomatic slicing operations instead of incrementally building a
    linked list.
    
    Passes toolstash -cmp.
    
    Change-Id: Idb0e40c7b4d7d1110d23828afa8ae1d157ba905f
    Reviewed-on: https://go-review.googlesource.com/20556
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 501b1fc3f211dafea8a3055fa1d575bf2698af33
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 18:23:03 2016 -0800

    cmd/compile: cleanup unsafenmagic
    
    In particular, make Alignof work more like Sizeof. Other idiomatic
    cleanups while here.
    
    Passes toolstash -cmp.
    
    Change-Id: I4def20894f3d95e49ab6a50ddba189be36fdd258
    Reviewed-on: https://go-review.googlesource.com/20555
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d3794f88e9b4e87567cb3fdc0a42159934db65e0
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 20:07:00 2016 -0800

    cmd/compile: eliminate uses of Type.Down in alg.go
    
    This could be done by threading the Iter value down through memrun and
    ispaddedfield, but that ends up a bit clunky. This way is also closer
    to how we'll want the code to look once fields are kept in slices.
    
    Passes toolstash -cmp.
    
    Change-Id: I8a44445c85f921eb18d97199df2026c5ce0f4f67
    Reviewed-on: https://go-review.googlesource.com/20558
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 369f4f5de554b3754a5b0f3140be15bbe2c82615
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 10 13:05:56 2016 -0800

    cmd/compile: regalloc of two address instructions
    
    x86 has a lot of instructions that require the output to be in the same
    register as one of the inputs.  When allocating the output register,
    allocate the same register as the input if it is available.
    
    Improves the performance of golang.org/x/crypto/sha3 by
    10% (from 6% slower than 1.6 to 4% faster).
    
    Fixes #14745
    
    Change-Id: I4d81785240c9368e4dc75107b45c959d200df8e6
    Reviewed-on: https://go-review.googlesource.com/20488
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 157f069873c0fe2310e628ffd679caffa6e68b4e
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Mar 10 15:07:08 2016 -0800

    cmd/compile: call missing popdcl in various genxxx functions
    
    Not calling popdcl doesn't have an impact on generated code but
    the result is a growing (rather than empty) stack of symbols,
    possibly causing more data to remain alive than necessary.
    
    Also: minor cleanups.
    
    Change-Id: Ic4fdbcd8843637d69ab1aa15e896a7e6339bc990
    Reviewed-on: https://go-review.googlesource.com/20554
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>

commit 88a21ebb210a282626b6fccf562957db9bcd9bf4
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 15:50:49 2016 -0800

    cmd/compile: rework checkdupfields
    
    Use a map to detect duplicate symbols. Allows eliminating an otherwise
    unneeded field from Sym and gets rid of a global variable.
    
    Change-Id: Ic004bca7e9130a1261a1cddbc17244529a2a1df4
    Reviewed-on: https://go-review.googlesource.com/20552
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>

commit 6b3d4a53538c091d3d0bf207d12db3ec641b85ea
Author: Todd Neal <todd@tneal.org>
Date:   Thu Mar 10 17:52:57 2016 -0600

    cmd/compile: modify regalloc/stackalloc to use the cmd line debug args
    
    Change the existing flags from compile time consts to be configurable
    from the command line.
    
    Change-Id: I4aab4bf3dfcbdd8e2b5a2ff51af95c2543967769
    Reviewed-on: https://go-review.googlesource.com/20560
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 31d13f479a19ca6e07ad60c441298c6eca04eeb2
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 8 20:09:48 2016 -0800

    cmd/compile: don't use PPARAMOUT names for temps
    
    The location of VARDEFs is incorrect for PPARAMOUT variables
    which are also used as temporary locations.  We put in VARDEFs
    when setting the variable at return time, but when the location
    is also used as a temporary the lifetime values are wrong.
    
    Fix copyelim to update the names map properly.  This is a
    real name bug fix which, as a result, allows me to
    write a reasonable test to trigger the PPARAMOUT bug.
    
    This is kind of a band-aid fix for #14591.  A more pricipled
    fix (which allows values to be stored in the return variable
    earlier than the return point) will be harder.
    
    Fixes #14591
    
    Change-Id: I7df8ae103a982d1f218ed704c080d7b83cdcfdd9
    Reviewed-on: https://go-review.googlesource.com/20457
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit fb9aafac97649a11301b78ee9e2139804c52b528
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 10 14:33:33 2016 -0800

    doc: GCC 6 will have the Go 1.6 user libraries
    
    Fixes #14759.
    
    Change-Id: I6cef0b49ba00ab85b25ce1e7bad80ad85e2d5076
    Reviewed-on: https://go-review.googlesource.com/20545
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 09d40378b946f363c9c351c2fdc8be30a09b238d
Author: Adam Langley <agl@golang.org>
Date:   Thu Mar 10 14:25:50 2016 -0800

    crypto/x509/pkix: make 'v1' the default CRL version.
    
    PKIX versions are off-by-one, so v1 is actually a zero on the wire, v2
    is a one, and so on.
    
    The RFC says that the version in a CRL is optional, but doesn't say what
    the default is. Since v2 is the only accepted version, I had made the
    default v2. However, OpenSSL considers the default to be v1. Also, if
    the default is v2 and the element is optional then we'll never actually
    write v2 on the wire. That's contrary to the RFC which clearly assumes
    that v2 will be expressed on the wire in some cases.
    
    Therefore, this change aligns with OpenSSL and assumes that v1 is the
    default CRL version.
    
    Fixes #13931
    
    [1] https://tools.ietf.org/html/rfc5280#section-5.1
    
    Change-Id: Ic0f638ebdd21981d92a99a882affebf3a77ab71a
    Reviewed-on: https://go-review.googlesource.com/20544
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1b8d4caddb8852829ce7e53d0fe6b153051716aa
Author: Adam Langley <agl@golang.org>
Date:   Thu Mar 10 15:12:19 2016 -0800

    crypto/x509: correct default X.509 version.
    
    The default version of an X.509 certificate is v1, which is encoded on
    the wire as a zero.
    
    Fixes #13382.
    
    Change-Id: I5fd725c3fc8b08fd978ab694a3e2d6d2a495918b
    Reviewed-on: https://go-review.googlesource.com/20548
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1c2bdfb7d9a91d3e9072ab3379cbed5b3364f732
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 05:22:14 2016 -0800

    cmd/compile: add Key, FieldSlice, and SetFields helpers
    
    Allows safely eliminating more direct uses of Type's Type and Down
    fields.
    
    Passes toolstash -cmp.
    
    Change-Id: I5c17fe541a0473c3cd2978d8314c4ab759079a61
    Reviewed-on: https://go-review.googlesource.com/20541
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0b281872e6390eb93c8bb176a20c72fef3d726d3
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 14:35:39 2016 -0800

    cmd/compile: rename ssa.Type's Elem method to ElemType
    
    I would like to add a
    
        func (t *Type) Elem() *Type
    
    method to package gc, but that would collide with the existing
    
        func (t *Type) Elem() ssa.Type
    
    method needed to make *gc.Type implement ssa.Type.  Because the latter
    is much less widely used right now than the former will be, this CL
    renames it to ElemType.
    
    Longer term, hopefully gc and ssa will share a common Type interface,
    and ElemType can go away.
    
    Change-Id: I270008515dc4c01ef531cf715637a924659c4735
    Reviewed-on: https://go-review.googlesource.com/20546
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit e4571d33ac54cac5336a560a1c8ef224b86f3bda
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 14:18:37 2016 -0800

    cmd/compile: simplify parser.compound_stmt
    
    Eliminate "else_clause" parameter and move error messages about bad if
    statements into the if_stmt parsing method.
    
    Passes toolstash -cmp.
    
    Change-Id: Ibc31619bdb2e7e0cf28712b14640f7d9b6124a40
    Reviewed-on: https://go-review.googlesource.com/20543
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit e6ea01685fe8e97af5763753bbd3189c9544ecad
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 10 11:49:20 2016 -0800

    cmd/compile: remove global variables in inl.go
    
    Change-Id: I06dedf4ebfa32b598f5545dc9354c8e4a95610b1
    Reviewed-on: https://go-review.googlesource.com/20525
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7a05fa8a70d0ddc109b246b4a3f0421ce2d64ea6
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Mar 10 02:36:28 2016 -0500

    doc: fix dead links in FAQ
    
    Fixes #14741.
    
    Change-Id: Idb8de8b0c1059c15e4c3df4a60bbd340d4e74aba
    Reviewed-on: https://go-review.googlesource.com/20487
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit ddc6b64444c3914621b3b1ff019e02b5aabdc20c
Author: Keith Randall <khr@golang.org>
Date:   Wed Mar 9 19:27:57 2016 -0800

    cmd/compile: fix defer/deferreturn
    
    Make sure we do any just-before-return cleanup on all paths out of a
    function, including when recovering.  Each exit path should include
    deferreturn (if there are any defers) and then the exit
    code (e.g. copying heap-escaping return values back to the stack).
    
    Introduce a Defer SSA block type which has two outgoing edges - one the
    fallthrough edge (the defer was queued successfully) and one which
    immediately returns (the defer had a successful recover() call and
    normal execution should resume at the return point).
    
    Fixes #14725
    
    Change-Id: Iad035c9fd25ef8b7a74dafbd7461cf04833d981f
    Reviewed-on: https://go-review.googlesource.com/20486
    Reviewed-by: David Chase <drchase@google.com>

commit 9c8f549abbc339fce83f96d80500ab9160a4c84d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Mar 10 12:29:31 2016 -0800

    cmd/compile: continue is the new goto loop
    
    Passes toolstash -cmp.
    
    Change-Id: I014613985005780d1a622c1981b35a94cda798bb
    Reviewed-on: https://go-review.googlesource.com/20530
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ed4a27a8dd9bb12fc32a73b351b5987d2604a5af
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 10 10:42:28 2016 -0800

    cmd/compile: change Func.Inldcl from *[]*Node to Nodes
    
    Change-Id: I055e986c3f27d5c07badcd1684f4fe1d65a917a9
    Reviewed-on: https://go-review.googlesource.com/20523
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fe5b4a65037a52eb588e2ca60359ddd40fa16f32
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 10 01:50:58 2016 -0800

    cmd/compile: more use of IterXXX functions
    
    This CL was mostly produced by a one-off automated rewrite tool
    looking for statements like "for X := T.Type; X != nil; X = X.Down"
    and a few minor variations.
    
    Passes toolstash -cmp.
    
    Change-Id: Ib22705e37d078ef97841ee2e08f60bdbcabb94ad
    Reviewed-on: https://go-review.googlesource.com/20520
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c63dbd87c1defe147f858d599ef49eea2f34a212
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 10 10:13:42 2016 -0800

    cmd/compile: add Nodes.Set1 method and use it where possible
    
    Passes toolstash -cmp.
    
    Change-Id: I05322fb5afd213f13fb247ec1a5f655c17a58774
    Reviewed-on: https://go-review.googlesource.com/20522
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 72655afb4ed84ce7809b3ee6202fd4edcdb25593
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 10 10:00:29 2016 -0800

    cmd/compile: remove NodeList type
    
    That was easy.
    
    Fixes #14473.
    
    Change-Id: I9d1d20a5c5a9b1423e6c72c0460ee4a78130864f
    Reviewed-on: https://go-review.googlesource.com/20521
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1d809c5c1476338af180014e2152b3f5b0fac327
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Feb 28 11:47:04 2016 -0800

    runtime: fix names in SetFinalizer doc comment
    
    Fixes #14554.
    
    Change-Id: I37ab4e4dc1aee84ac448d437314f8eecbbc02994
    Reviewed-on: https://go-review.googlesource.com/20021
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f444b8a80ebe016254e3564526b05aa486c0a1bc
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Mar 9 20:29:21 2016 -0800

    cmd/compile: remove all remaining nodeSeq code
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I2ac5c595d7af7a8da1a7e3945e6a753299446250
    Reviewed-on: https://go-review.googlesource.com/20497
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 53900cea1b0e603b36ed533e012f86e95d2144b5
Author: Klaus Post <klauspost@gmail.com>
Date:   Thu Mar 10 16:46:25 2016 +0100

    compress/flate: forward upstream Writer errors
    
    If the upstream writer has returned an error, it may not
    be returned by subsequent calls.
    
    This makes sure that if an error has been returned, the
    Writer will keep returning an error on all subsequent calls,
    and not silently "swallow" them.
    
    Change-Id: I2c9f614df72e1f4786705bf94e119b66c62abe5e
    Reviewed-on: https://go-review.googlesource.com/20515
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit ac1608a2f96afdc372aeb9553c54347bcd4cb0b6
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Mar 10 12:05:44 2016 +0100

    bytes: correct comment about usage of bytes.Buffer by Printf
    
    The fmt package does not use bytes.Buffer
    anymore as an internal buffer.
    
    Change-Id: I34c7a52506290ccbcb10ea2e85dea49a0a8b8203
    Reviewed-on: https://go-review.googlesource.com/20511
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 92dfc12610853d48b7a67912c771cd813371365f
Author: Paul Marks <pmarks@google.com>
Date:   Wed Mar 9 14:49:39 2016 -0800

    net: slowDialTCP should wait forever if no deadline exists.
    
    This allows TestDialerFallbackDelay to pass again on machines where IPv6
    connections to nowhere fail quickly instead of hanging.
    
    This bug appeared last month, when I deleted the slowTimeout constant.
    
    Updates #11225
    Fixes #14731
    
    Change-Id: I840011eee571aab1041022411541736111c7fad5
    Reviewed-on: https://go-review.googlesource.com/20493
    Run-TryBot: Paul Marks <pmarks@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit b4b2ddb86771753aebd4383847e708cb61e94c73
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Tue Feb 16 12:24:12 2016 -0600

    math: improve sqrt for ppc64le,ppc64
    
    The existing implementation uses code written in Go to
    implement Sqrt; this adds the assembler to use the sqrt
    instruction for Power and makes the necessary changes to
    allow it to be inlined.
    
    The following tests showed this relative improvement:
    
    benchmark                 delta
    BenchmarkSqrt             -97.91%
    BenchmarkSqrtIndirect     -96.65%
    BenchmarkSqrtGo           -35.93%
    BenchmarkSqrtPrime        -96.94%
    
    Fixes #14349
    
    Change-Id: I8074f4dc63486e756587564ceb320aca300bf5fa
    Reviewed-on: https://go-review.googlesource.com/19515
    Reviewed-by: Minux Ma <minux@golang.org>

commit 6cb2e1d015b87f4627f40d7b208b58ecb4e102e1
Author: Todd Neal <todd@tneal.org>
Date:   Tue Mar 8 22:13:20 2016 -0600

    cmd/compile: remove values from const cache upon free
    
    When calling freeValue for possible const values, remove them from the
    cache as well.
    
    Change-Id: I087ed592243e33c58e5db41700ab266fc70196d9
    Reviewed-on: https://go-review.googlesource.com/20481
    Run-TryBot: Todd Neal <tolchz@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit dbe54d23fe2b2751872aaf41d1ef3179729b9960
Author: Dave Cheney <dave@cheney.net>
Date:   Sat Mar 5 14:44:11 2016 +1100

    cmd/compile/internal: peep.go cleanups
    
    More cleanups after CL 20089
    
    - copysub, take a bool rather than an int for the f (force) parameter.
    - copysub returns a bool rather than an int.
    - prevl, reg is now int16, which reduces type conversion in its callers.
    - copy1, reduce the scope of t and p variables.
    - small simplifications in copyau1, copyas, etc.
    - {mips64,ppc64}/regzer returns a bool.
    - apply CL 20181 to x86/peep.go which was missed in the last CL.
    - various comment fixes.
    
    Change-Id: Ib73ffb768c979ce86f1614e5366fd576dea50986
    Reviewed-on: https://go-review.googlesource.com/20281
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 211cc40b11e8dc74243b4ac3c03c63aa06ef49b5
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 25 20:36:02 2016 -0800

    cmd/compile: change ignorecase param types to bool
    
    Change-Id: I93b4821254c9b0a3cebd912f447ed58f20adeb58
    Reviewed-on: https://go-review.googlesource.com/19937
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 49dad0f5716484ec2f3b2e1480801c134933f1ab
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 25 20:29:09 2016 -0800

    cmd/compile: support arbitrarily deep embedded fields
    
    Fixes #13337.
    
    Change-Id: Ie74d00390111796619150287d3f7a147750ab456
    Reviewed-on: https://go-review.googlesource.com/19932
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f91b832ab5324f6a10c3dd18b1b51e590704ede4
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 9 20:54:59 2016 -0800

    cmd/compile: rename Recv->Recvs and Recv0->Recv
    
    Change-Id: Ice3aa807169f4fec85745a3991b1084a9f85c1b5
    Reviewed-on: https://go-review.googlesource.com/20499
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 0cff505871434711804308152679840505e8a824
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 9 20:45:18 2016 -0800

    cmd/compile: add Recv0 and Field helper methods for Type
    
    Accessing the n'th field of a struct is fairly common, and in
    particular accessing the 0'th field of the receiver parameter list is
    very common. Add helper methods for both of these tasks and update
    code to make use of them.
    
    Change-Id: I81f551fecdca306b3800636caebcd0dc106f2ed7
    Reviewed-on: https://go-review.googlesource.com/20498
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit d20b92e07a9462bf7eb43d25389b70528140f7d5
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 9 19:32:10 2016 -0800

    cmd/compile: replace more unnecessary **Type with *Type
    
    Also, more lazy variable declarations, and make Dijkstra happy by
    replacing "goto loop" with a for loop.
    
    Change-Id: Idf2cd779a92eb3f33bd3394e12c9a0be72002ff4
    Reviewed-on: https://go-review.googlesource.com/20496
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9d77ad8d34ce56e182adc30cd21af50a4b00932c
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Mar 10 13:54:02 2016 +1100

    cmd/compile/internal/gc: type.go cleanup
    
    Follow up to CL 20494 addressing Type.Copy and a few other tiny
    cleanups.
    
    Change-Id: I3d0913a9f50a22ac2fd802858b1a94c15c5cb1bc
    Reviewed-on: https://go-review.googlesource.com/20501
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 2339b131d63b397eb4b1bcd2cc09d532df138213
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 9 18:54:26 2016 -0800

    cmd/compile: cleanup paramstoheap and returnsfromheap
    
    Better documentation. Change parameter types from **Type and int to
    just *Type and bool. Make use of short var declarations.
    
    Change-Id: I909846ba0df65cd2bc05ee145b72d60e881588bd
    Reviewed-on: https://go-review.googlesource.com/20495
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit b014b55b82fe8319001f30c7e57e9feab9ebc5f0
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 9 15:32:57 2016 -0800

    cmd/compile: consolidate Type construction and copying code
    
    This should is preparatory cleanup to make it easier to use separate
    types to represent each kind of Go type, rather than a single omnibus
    Type struct with heavily overloaded fields.
    
    Also, add TODO comments marking assignments that change an existing
    Type's kind, as they need to be removed before we can factor Type.
    
    Change-Id: If4b551fdea4ae045b10b1a3de2ee98f5cf32a517
    Reviewed-on: https://go-review.googlesource.com/20494
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c2400e31ad7ab0c87801bb744af2c2b7b41dd702
Author: Andrew Gerrand <adg@golang.org>
Date:   Thu Mar 10 10:25:11 2016 +1100

    doc: add doc.Example.Unordered to go1.7.txt
    
    Change-Id: I142a9f97303e3bfbd9522fd061530c0a91305389
    Reviewed-on: https://go-review.googlesource.com/20500
    Reviewed-by: Minux Ma <minux@golang.org>

commit e0032df81e64ea90d3a68295c4b6e3323df8857f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Feb 28 15:56:21 2016 -0800

    cmd/compile: make alg gen prologue/epilogue match
    
    With this, the start and end of geneq and genhash
    are parallel. This removes a few rare nilchecks
    from generated hash functions, but nothing
    to write home about.
    
    Change-Id: I3b4836111d04daa6f6834a579bbec374a3f42c70
    Reviewed-on: https://go-review.googlesource.com/20456
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit cd6619d2e69162295b42a5952b4316bb80ec2049
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Mar 9 12:39:36 2016 -0800

    cmd/compile: remove remaining nodeSeqIterate calls
    
    Mix in several other minor cleanups, including adding some new methods
    to Nodes: Index, Addr, SetIndex, SetNodes.
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I8bd4ae3fde7c5e20ba66e7dd1654fbc70c3ddeb8
    Reviewed-on: https://go-review.googlesource.com/20491
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 862b9ddda7d5163926ca0ab20f23f261a70cfe80
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Mar 7 23:45:04 2016 -0500

    cmd/link: prune unused methods
    
    Today the linker keeps all methods of reachable types. This is
    necessary if a program uses reflect.Value.Call. But while use of
    reflection is widespread in Go for encoders and decoders, using
    it to call a method is rare.
    
    This CL looks for the use of reflect.Value.Call in a program, and
    if it is absent, adopts a (reasonably conservative) method pruning
    strategy as part of dead code elimination. Any method that is
    directly called is kept, and any method that matches a used
    interface's method signature is kept.
    
    Whether or not a method body is kept is determined by the relocation
    from its receiver's *rtype to its *rtype. A small change in the
    compiler marks these relocations as R_METHOD so they can be easily
    collected and manipulated by the linker.
    
    As a bonus, this technique removes the text segment of methods that
    have been inlined. Looking at the output of building cmd/objdump with
    -ldflags=-v=2 shows that inlined methods like
    runtime.(*traceAllocBlockPtr).ptr are removed from the program.
    
    Relatively little work is necessary to do this. Linking two
    examples, jujud and cmd/objdump show no more than +2% link time.
    
    Binaries that do not use reflect.Call.Value drop 4 - 20% in size:
    
            addr2line: -793KB (18%)
            asm:       -346KB (8%)
            cgo:       -490KB (10%)
            compile:   -564KB (4%)
            dist:      -736KB (17%)
            fix:       -404KB (12%)
            link:      -328KB (7%)
            nm:        -827KB (19%)
            objdump:   -712KB (16%)
            pack:      -327KB (14%)
            yacc:      -350KB (10%)
    
    Binaries that do use reflect.Call.Value see a modest size decrease
    of 2 - 6% thanks to pruning of unexported methods:
    
            api:    -151KB (3%)
            cover:  -222KB (4%)
            doc:    -106KB (2.5%)
            pprof:  -314KB (3%)
            trace:  -357KB (4%)
            vet:    -187KB (2.7%)
            jujud:  -4.4MB (5.8%)
            cmd/go: -384KB (3.4%)
    
    The trivial Hello example program goes from 2MB to 1.68MB:
    
            package main
    
            import "fmt"
    
            func main() {
                    fmt.Println("Hello, 世界")
            }
    
    Method pruning also helps when building small binaries with
    "-ldflags=-s -w". The above program goes from 1.43MB to 1.2MB.
    
    Unfortunately the linker can only tell if reflect.Value.Call has been
    statically linked, not if it is dynamically used. And while use is
    rare, it is linked into a very common standard library package,
    text/template. The result is programs like cmd/go, which don't use
    reflect.Value.Call, see limited benefit from this CL. If binary size
    is important enough it may be possible to address this in future work.
    
    For #6853.
    
    Change-Id: Iabe90e210e813b08c3f8fd605f841f0458973396
    Reviewed-on: https://go-review.googlesource.com/20483
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f02dc513c823eff47b695ba0652ac6f20621beba
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 9 08:36:44 2016 -0800

    doc: fix bogus HTML in contribute.html
    
    Introduced in https://golang.org/cl/20462
    
    Change-Id: I6c55f87228f0980058a10f204b57ead7594e3492
    Reviewed-on: https://go-review.googlesource.com/20490
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 0ac0e22fa767b36e38e6d12fb30e386bf7456509
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 8 23:16:16 2016 +0000

    cmd/compile: shrink tables
    
    Drops cmd/binary size from 14.41 MiB to 11.42 MiB.
    
    Before:
    
       text    data     bss     dec     hex filename
    8121210 3521696  737960 12380866         bceac2 ../pkg/tool/linux_amd64/compile
    
    bradfitz@dev-bradfitz-debian2:~/go/src$ ls -l ../pkg/tool/linux_amd64/compile
    -rwxr-xr-x 1 bradfitz bradfitz 15111272 Mar  8 23:32 ../pkg/tool/linux_amd64/compile
    
      a2afc0      51312 R html.statictmp_0085
      6753f0      56592 T cmd/internal/obj/x86.doasm
      625480      58080 T cmd/compile/internal/gc.typecheck1
      f34c40      65688 D runtime.trace
      be0a20     133552 D cmd/compile/internal/ppc64.varianttable
      c013e0     265856 D cmd/compile/internal/arm.progtable
      c42260     417280 D cmd/compile/internal/amd64.progtable
      ca8060     417280 D cmd/compile/internal/x86.progtable
      f44ce0     500640 D cmd/internal/obj/arm64.oprange
      d0de60     534208 D cmd/compile/internal/ppc64.progtable
      d90520     667520 D cmd/compile/internal/arm64.progtable
      e334a0     790368 D cmd/compile/internal/mips64.progtable
      a3e8c0    1579362 r runtime.pclntab
    
    After:
    
       text    data     bss     dec     hex filename
    8128226  375954  246432 8750612  858614 ../pkg/tool/linux_amd64/compile
    
    -rwxr-xr-x 1 bradfitz bradfitz 11971432 Mar  8 23:35 ../pkg/tool/linux_amd64/compile
    
      6436d0      43936 T cmd/compile/internal/gc.walkexpr
      c13ca0      45056 D cmd/compile/internal/ssa.opcodeTable
      5d8ea0      50256 T cmd/compile/internal/gc.(*state).expr
      818c50      50448 T cmd/compile/internal/ssa.rewriteValueAMD64_OpMove
      a2d0e0      51312 R html.statictmp_0085
      6753d0      56592 T cmd/internal/obj/x86.doasm
      625460      58080 T cmd/compile/internal/gc.typecheck1
      c38fe0      65688 D runtime.trace
      a409e0    1578810 r runtime.pclntab
    
    Fixes #14703
    
    Change-Id: I2177596d5c7fd67db0a3c423cd90801cf52adb12
    Reviewed-on: https://go-review.googlesource.com/20450
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8e2315678667f498f50f0b38dd064e8cc7f6c215
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Mar 6 00:39:37 2016 +0100

    fmt: refactor pointer formatting and improve tests
    
    Uses a switch statement for direct format function selection
    similar to other types verb handling in fmt.
    
    Applies padding also to nil pointers formatted with %v.
    
    Guards against "slice bounds out of range" panic in TestSprintf
    when a pointer test results in a formatted string s
    that is shorter than the index i the pointer should appear in.
    
    Adds more and rearranges tests.
    
    Fixes #14712
    Fixes #14714
    
    Change-Id: Iaf5ae37b7e6ba7d27d528d199f2b2eb9d5829b8c
    Reviewed-on: https://go-review.googlesource.com/20371
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit c67f09ac5cf3c5a6af67d0e302a1985ade44be1f
Merge: 132d7ae bbd3ffb
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 9 13:16:50 2016 -0500

    [dev.garbage] Merge branch 'master' into dev.garbage
    
    Change-Id: Iede021da8fdb7ac87f1e0c495b7401e50a5b0a83

commit bbd3ffbd838a2e172bff7b95a8df7f9e55b35786
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Mar 9 11:00:58 2016 +0100

    cmd/compile: constant fold more of IsInBounds and IsSliceInBounds
    
    Fixes #14721
    
    Change-Id: Id1d5a819e5c242b91a37c4e464ed3f00c691aff5
    Reviewed-on: https://go-review.googlesource.com/20482
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b594b8b0396647cabdda719d20888b1476d5d2c2
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 9 01:15:23 2016 -0800

    cmd/compile: switch Eqtype and (*Type).Compare to use recvParamsResults
    
    Change-Id: I5365b94b815bfb4795db643415c2df51fc815ea1
    Reviewed-on: https://go-review.googlesource.com/20459
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 6b59d618226259801fea6eb820587a449690261a
Author: Richard Miller <miller.research@gmail.com>
Date:   Wed Mar 9 16:16:05 2016 +0000

    runtime: Plan 9 - prevent preemption by GC while exiting
    
    On Plan 9, there's no "kill all threads" system call, so exit is done
    by sending a "go: exit" note to each OS process.  If concurrent GC
    occurs during this loop, deadlock sometimes results.  Prevent this by
    incrementing m.locks before sending notes.
    
    Change-Id: I31aa15134ff6e42d9a82f9f8a308620b3ad1b1b1
    Reviewed-on: https://go-review.googlesource.com/20477
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 87103a1ab75036530bf0757397a212ee1a9822f5
Author: Richard Miller <miller.research@gmail.com>
Date:   Wed Mar 9 15:53:03 2016 +0000

    syscall: add NO_LOCAL_POINTERS to syscall.exit in plan9_arm
    
    This prevents a fatal "missing stackmap" error if garbage collection
    occurs during exit.
    
    Also annotate argument sizes for "go vet".
    
    Change-Id: I2473e0ef6aef8f26d0bbeaee9bd8f8a52eaaf941
    Reviewed-on: https://go-review.googlesource.com/20476
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit dfcb853d9d75116e939b31fa12316fc3e8494845
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Thu Mar 3 11:13:43 2016 +0100

    cmd/compile/internal/ssa: lower builtins much later
    
    * Move lowering into a separate pass.
    * SliceLen/SliceCap is now available to various intermediate passes
    which use useful for bounds checking.
    * Add a second opt pass to handle the new opportunities
    
    Decreases the code size of binaries in pkg/tool/linux_amd64
    by ~45K.
    
    Updates #14564 #14606
    
    Change-Id: I5b2bd6202181c50623a3585fbf15c0d6db6d4685
    Reviewed-on: https://go-review.googlesource.com/20172
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit aa3650f01976524ad80b2aad987e2d4f655cbe65
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 8 17:45:55 2016 -0800

    cmd/compile: eliminate IterParams
    
    It's only used once, so just make the caller responsible for iterating
    both the receiver and input params.
    
    Change-Id: Icb34f3f0cf96e80fbe27f3f49d12eddc26599b92
    Reviewed-on: https://go-review.googlesource.com/20454
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 33fd4535a408aa863e6f0c7196291ae2a583644f
Author: Ingo Oeser <nightlyone@googlemail.com>
Date:   Tue Mar 8 21:53:33 2016 +0100

    cmd/compile: use range construct
    
    so the code is more readable.
    
    Also use n[i] = val instead of n = append(n, val),
    because this avoids a function call to append.
    
    NOTE: compiles, but I had trouble running toolstash -cmp and need sleep
    now.
    
    @Ian this might save you some grunt work :-)
    
    Change-Id: I2a4c70396c58905f7d5aabf83f3020f11dea0e89
    Reviewed-on: https://go-review.googlesource.com/20430
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c52cb1fe9ef1cab19ce8de6c4da93a9d2287cc1e
Author: Nigel Tao <nigeltao@golang.org>
Date:   Wed Mar 9 14:33:28 2016 +1100

    compress/flate: take NewWriter out of the benchmark loop.
    
    This helps follow-up CLs ensure that the encoding's core computation does not
    allocate. It is a separate CL because it has a non-trivial effect on the
    benchmark numbers, even if it's purely an accounting change and not a change to
    the underlying performance:
    
    BenchmarkEncodeDigitsSpeed1e4-4        5.65         19.31        3.42x
    BenchmarkEncodeDigitsSpeed1e5-4        17.23        26.79        1.55x
    BenchmarkEncodeDigitsSpeed1e6-4        26.85        27.51        1.02x
    BenchmarkEncodeDigitsDefault1e4-4      4.41         13.21        3.00x
    BenchmarkEncodeDigitsDefault1e5-4      5.64         6.28         1.11x
    BenchmarkEncodeDigitsDefault1e6-4      5.54         5.65         1.02x
    BenchmarkEncodeDigitsCompress1e4-4     4.31         13.15        3.05x
    BenchmarkEncodeDigitsCompress1e5-4     5.52         5.91         1.07x
    BenchmarkEncodeDigitsCompress1e6-4     5.38         5.63         1.05x
    BenchmarkEncodeTwainSpeed1e4-4         5.45         19.06        3.50x
    BenchmarkEncodeTwainSpeed1e5-4         17.30        29.25        1.69x
    BenchmarkEncodeTwainSpeed1e6-4         28.06        30.86        1.10x
    BenchmarkEncodeTwainDefault1e4-4       4.06         12.36        3.04x
    BenchmarkEncodeTwainDefault1e5-4       6.15         7.62         1.24x
    BenchmarkEncodeTwainDefault1e6-4       6.84         6.99         1.02x
    BenchmarkEncodeTwainCompress1e4-4      4.06         12.27        3.02x
    BenchmarkEncodeTwainCompress1e5-4      5.29         5.92         1.12x
    BenchmarkEncodeTwainCompress1e6-4      5.24         5.29         1.01x
    
    Change-Id: I7d32866b7e2d478b0154332c1edeefe339af9a28
    Reviewed-on: https://go-review.googlesource.com/20467
    Reviewed-by: David Symonds <dsymonds@golang.org>

commit 9323de3da79d240b8223f74bd8ddd0d55dab8070
Author: Brady Catherman <brady@gmail.com>
Date:   Fri Feb 5 14:16:31 2016 -0700

    testing: implement 'Unordered Output' in Examples.
    
    Adds a type of output to Examples that allows tests to have unordered
    output. This is intended to help clarify when the output of a command
    will produce a fixed return, but that return might not be in an constant
    order.
    
    Examples where this is useful would be documenting the rand.Perm()
    call, or perhaps the (os.File).Readdir(), both of which can not guarantee
    order, but can guarantee the elements of the output.
    
    Fixes #10149
    
    Change-Id: Iaf0cf1580b686afebd79718ed67ea744f5ed9fc5
    Reviewed-on: https://go-review.googlesource.com/19280
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit a9c48f3b031c2dc3a3a0aa47987137e1fdf76024
Author: Shenghou Ma <minux@golang.org>
Date:   Sun Feb 21 15:42:38 2016 -0500

    doc: security fixes are prepared for two most recent stable releases
    
    Change-Id: Ia22f681b0e90876ec87363c50c6a284db050f649
    Reviewed-on: https://go-review.googlesource.com/19793
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 903f096992875e1a64fa43d65081dec551bf1950
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Feb 28 14:56:31 2016 -0800

    cmd/compile: superficial cleanup in alg.go
    
    Passes toolstash -cmp.
    
    Change-Id: I6ec2143a30c1f2c15f8ec74422c954ed6b9b1a0f
    Reviewed-on: https://go-review.googlesource.com/20452
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 4db3dde522af4d6217ae152e8ee035b5e178bbbd
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 8 17:30:51 2016 -0800

    cmd/compile: small cleanups for structargs
    
    Suggested by Dave Cheney in golang.org/cl/20405.
    
    Change-Id: I581c11ae80034cb6ebef3de976e8ae9484472322
    Reviewed-on: https://go-review.googlesource.com/20453
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 38921b36ba5b28b49ba36c4f7122ddc19b52bb07
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Mar 8 15:10:26 2016 -0800

    cmd/compile: rewrite code to omit many nodeSeq calls
    
    This CL was automatically generated using a special-purpose AST
    rewriting tool, followed by manual editing to put some comments back in
    the right places and fix some bad line breaks.
    
    The result is not perfect but it's a big step toward getting back to
    sanity, and because it was automatically generated there is a decent
    chance that it is correct.
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I01c09078a6d78e2b008bc304d744b79469a38d3d
    Reviewed-on: https://go-review.googlesource.com/20440
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit db506fe98c0a31b437d15e8b2333fdbae9c6d3d4
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 8 16:31:28 2016 -0800

    cmd/compile: change get{this,inarg,outarg}x? into methods
    
    More idiomatic naming (in particular, matches the naming used for
    go/types.Signature).
    
    Also, convert more code to use these methods and/or IterFields.
    (Still more to go; only made a quick pass for low hanging fruit.)
    
    Passes toolstash -cmp.
    
    Change-Id: I61831bfb1ec2cd50d4c7efc6062bca4e0dcf267b
    Reviewed-on: https://go-review.googlesource.com/20451
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8df733bd2210e086c179ffb898d4e960f8d62df7
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Feb 23 11:31:13 2016 -0500

    cmd/compile: remove slices from rtype.funcType
    
    Alternative to golang.org/cl/19852. This memory layout doesn't have
    an easy type representation, but it is noticeably smaller than the
    current funcType, and saves significant extra space.
    
    Some notes on the layout are in reflect/type.go:
    
    // A *rtype for each in and out parameter is stored in an array that
    // directly follows the funcType (and possibly its uncommonType). So
    // a function type with one method, one input, and one output is:
    //
    //      struct {
    //              funcType
    //              uncommonType
    //              [2]*rtype    // [0] is in, [1] is out
    //              uncommonTypeSliceContents
    //      }
    
    There are three arbitrary limits introduced by this CL:
    
    1. No more than 65535 function input parameters.
    2. No more than 32767 function output parameters.
    3. reflect.FuncOf is limited to 128 parameters.
    
    I don't think these are limits in practice, but are worth noting.
    
    Reduces godoc binary size by 2.4%, 330KB.
    
    For #6853.
    
    Change-Id: I225c0a0516ebdbe92d41dfdf43f716da42dfe347
    Reviewed-on: https://go-review.googlesource.com/19916
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b050adeebddb269cfb57f2c84acef7430326b6d5
Author: Andrew Gerrand <adg@golang.org>
Date:   Wed Mar 9 11:30:24 2016 +1100

    doc: use new Gerrit URL and mention our instance in CONTRIBUTING.md
    
    Fixes #14662
    
    Change-Id: I8f7d5e8d2dd8dc763e940e061b424427359246e7
    Reviewed-on: https://go-review.googlesource.com/20462
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1afacd0e329a08279a6b417a4f92c97967eeed5e
Author: Andrew Gerrand <adg@golang.org>
Date:   Fri Feb 26 14:35:42 2016 +1100

    doc: update issue template
    
    Change-Id: Iaa23d27043e6a050075b40072e466623418ba977
    Reviewed-on: https://go-review.googlesource.com/19878
    Reviewed-by: Rob Pike <r@golang.org>

commit 7758a9405f45970cb545505b9adcaccc6b23e7e7
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 8 15:02:40 2016 -0800

    cmd/compile: simplify Iter
    
    Passes toolstash -cmp.
    
    Change-Id: I325b02dcc8412ded0dc304d43377c0bdf59c66a8
    Reviewed-on: https://go-review.googlesource.com/20405
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5011431295b647c2d1e4ae294c4e2cab626fc1f8
Author: Andrew Gerrand <adg@golang.org>
Date:   Wed Mar 9 11:08:19 2016 +1100

    doc: remove link to empty Go 1.5.3 milestone
    
    Fixes #14687
    
    Change-Id: I51fd8842d35c82db71cc5b28c4c0550871461eb6
    Reviewed-on: https://go-review.googlesource.com/20421
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a24b3ed7538dd2eb013005fb1e153468f486857a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Feb 20 22:54:15 2016 -0500

    cmd/compile: remove rtype *uncommonType field
    
    Instead of a pointer on every rtype, use a bit flag to indicate that
    the contents of uncommonType directly follows the rtype value when it
    is needed.
    
    This requires a bit of juggling in the compiler's rtype encoder. The
    backing arrays for fields in the rtype are presently encoded directly
    after the slice header. This packing requires separating the encoding
    of the uncommonType slice headers from their backing arrays.
    
    Reduces binary size of godoc by ~180KB (1.5%).
    No measurable change in all.bash time.
    For #6853.
    
    Change-Id: I60205948ceb5c0abba76fdf619652da9c465a597
    Reviewed-on: https://go-review.googlesource.com/19790
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0321cabdfacc5472d2bc650de3e36ca10131b60a
Author: David Chase <drchase@google.com>
Date:   Tue Mar 8 15:08:25 2016 -0500

    cmd/compile: guard the &-to-<<>> opt against small constants
    
    Converting an and-K into a pair of shifts for K that will
    fit in a one-byte argument is probably not an optimization,
    and it also interferes with other patterns that we want to
    see fire, like (<< (AND K)) [for small K] and bounds check
    elimination for masked indices.
    
    Turns out that on Intel, even 32-bit signed immediates beat
    the shift pair; the size reduction of tool binaries is 0.09%
    vs 0.07% for only the 8-bit immediates.
    
    RLH found this one working on the new/next GC.
    
    Change-Id: I2414a8de1dd58d680d18587577fbadb7ff4f67d9
    Reviewed-on: https://go-review.googlesource.com/20410
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>

commit 4720f49e189fcfd52d8bc61cbf0fc913f3336542
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 8 14:31:22 2016 -0800

    cmd/compile: relocate a bunch of Type-related code
    
    Some cleaned up documentation, but no code changes.
    
    Change-Id: I145398bb6d118c626ab3873ef75dbb64ebc286e9
    Reviewed-on: https://go-review.googlesource.com/20404
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bf44c4c889935b3ef1db9b7fd0a14ce4e5508cab
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 8 22:10:28 2016 +0000

    crypto/tls: test for timeout error using the net.Error interface
    
    Don't do a substring search to test for a timeout error.
    
    Fixes #14722 (maybe)
    
    Change-Id: I4e18c749d6fd92c084a1b0b83a805119e1ae5ff2
    Reviewed-on: https://go-review.googlesource.com/20403
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fb2f99d5fd9fe651d26de9a9550935897907d27b
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Mar 7 19:29:15 2016 +0100

    cmd/compile/internal/ssa: simplify nil checks in opt.
    
    * Simplify the nilcheck generated by
    for _, e := range a {}
    * No effect on the generated code because these nil checks
    don't end up in the generated code.
    * Useful for other analysis, e.g. it'll remove one dependecy
    on the induction variable.
    
    Change-Id: I6ee66ddfdc010ae22aea8dca48163303d93de7a9
    Reviewed-on: https://go-review.googlesource.com/20307
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit e806cd9f95ccf14163623792425db2b066d4198e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 22:05:49 2016 -0800

    cmd/compile: cleanup compile function
    
    Make more idiomatic with a defer cleanup, which allows declaring
    variables closer to their first use, rather than up front before the
    first goto statement.
    
    Also, split the legacy code generation code path into a separate
    genlegacy function, analogous to the new genssa.
    
    Passes toolstash -cmp.
    
    Change-Id: I86c22838704f6861b75716ae64ba103b0e73b12f
    Reviewed-on: https://go-review.googlesource.com/20353
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4fc02d175b2eb45b89facae9723975fe12acac3c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 20:30:38 2016 -0800

    cmd/internal/obj: more Optab range simplification
    
    Same idea as golang.org/cl/20322.
    
    Passes toolstash/buildall.
    
    Change-Id: Ida5960e57ff6e1e8de75c2720f21aeae56a8e415
    Reviewed-on: https://go-review.googlesource.com/20352
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b3309877114d1953f47f484101a9d2e317e5c6ec
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 8 18:57:19 2016 +0000

    cmd/compile: fix old comment references to go.y
    
    Change-Id: Iec323998133ef20ff962f06a46d15dd342a82f5f
    Reviewed-on: https://go-review.googlesource.com/20390
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f128b5421e4ec7a00d9ff93288ea3f4b38654243
Author: Ross Light <light@google.com>
Date:   Mon Mar 7 16:21:30 2016 -0800

    os/user: make OS-specific getgrouplist calls
    
    getgrouplist is non-standard and has slightly different semantics on
    each platform.  Darwin defines the function in terms of ints instead of
    gid_ts.  Solaris only recently supported the call, so stubbing out for
    now.
    
    Fixes #14696
    Fixes #14709
    
    Change-Id: I5a44538d41594909efb6f3f9610c55d638c36757
    Reviewed-on: https://go-review.googlesource.com/20348
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2350ca5a41b81f9fa8026c511758deafa3038836
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Mar 8 12:37:35 2016 -0800

    cmd/compile: remove useless declaration of llit
    
    Accidentally added in https://golang.org/cl/20242.
    
    This is in preparation for transformation by an automated tool.
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I28c637d220df3ccaa8e368bfbea7282a6e66662e
    Reviewed-on: https://go-review.googlesource.com/20402
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0c7ccbf601976a49ba7db79ad85335ee95d4733e
Author: Russ Cox <rsc@golang.org>
Date:   Thu Jan 28 11:44:07 2016 -0500

    cmd/go: ignore C files when CGO_ENABLED=0
    
    Before, those C files might have been intended for the Plan 9 C compiler,
    but that option was removed in Go 1.5. We can simplify the maintenance
    of cgo packages now if we assume C files (and C++ and M and SWIG files)
    should only be considered when cgo is enabled.
    
    Also remove newly unnecessary build tags in runtime/cgo's C files.
    
    Fixes #14123
    
    Change-Id: Ia5a7fe62b9469965aa7c3547fe43c6c9292b8205
    Reviewed-on: https://go-review.googlesource.com/19613
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit df035a8d866cf4cef339a60d37c6f937d4c6b9f6
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Mar 8 11:16:19 2016 -0800

    cmd/compile: fix bug in vmatch1 list traversal nodeSeq change
    
    Bug accidentally inserted in https://golang.org/cl/20210.  Doesn't seem
    to make a difference, but restore original code anyhow.
    
    Update #14473.
    
    Change-Id: I9cf87987ff158e27c7231027819317cdde8c132c
    Reviewed-on: https://go-review.googlesource.com/20401
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c69e6869c9793872cb0282008ea8ab643a92da65
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Mon Feb 29 17:46:48 2016 -0300

    net/http/httptest: record trailing headers in ResponseRecorder
    
    Trailers() returns the headers that were set by the handler after the
    headers were written "to the wire" (in this case HeaderMap) and that
    were also specified in a proper header called "Trailer".
    
    Neither HeaderMap or trailerMap (used for Trailers()) are manipulated by
    the handler code, instead a third stagingMap is given to the
    handler. This avoid a reference kept by handler to affect the recorded
    results.
    
    If a handler just modify the header but doesn't call any Write or Flush
    method from ResponseWriter (or Flusher) interface, HeaderMap will not be
    updated. In this case, calling Flush in the recorder is enough to get
    the HeaderMap filled.
    
    Fixes #14531.
    Fixes #8857.
    
    Change-Id: I42842341ec3e95c7b87d7e6f178c65cd03d63cc3
    Reviewed-on: https://go-review.googlesource.com/20047
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4c8589c328ea68ddb551abb4696c20016ed57d99
Author: David Chase <drchase@google.com>
Date:   Tue Mar 8 13:26:44 2016 -0500

    cmd/compile: attach correct line number for fallthru-return
    
    Fixes #14646.
    
    Change-Id: I0bb82ed6d3533633cd8369ba37aa467948bbe155
    Reviewed-on: https://go-review.googlesource.com/20381
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 1264f6e2d4c32c60604ff6b9753f1560c9344e92
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 8 19:16:04 2016 +0000

    cmd/compile: gofmt
    
    Change-Id: I754861147838d0f6c184d8deb8a028062a1d3214
    Reviewed-on: https://go-review.googlesource.com/20400
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 21af2d39c25f71a3044c40e7b106b8c47d06a6a0
Author: Russ Cox <rsc@golang.org>
Date:   Mon Mar 7 22:48:07 2016 -0500

    cmd/compile, cmd/link: eliminate string merging pass
    
    Deleting the string merging pass makes the linker 30-35% faster
    but makes jujud (using the github.com/davecheney/benchjuju snapshot) 2.5% larger.
    Two optimizations bring the space overhead down to 0.6%.
    
    First, change the default alignment for string data to 1 byte.
    (It was previously defaulting to larger amounts, usually pointer width.)
    
    Second, write out the type string for T (usually a bigger expression) as "*T"[1:],
    so that the type strings for T and *T share storage.
    
    Combined, these obtain the bulk of the benefit of string merging
    at essentially no cost. The remaining benefit from string merging
    is not worth the excessive cost, so delete it.
    
    As penance for making the jujud binary 0.6% larger,
    the next CL in this sequence trims the reflect functype
    information enough to make the jujud binary overall 0.75% smaller
    (that is, that CL has a net -1.35% effect).
    
    For #6853.
    Fixes #14648.
    
    Change-Id: I3fdd74c85410930c36bb66160ca4174ed540fc6e
    Reviewed-on: https://go-review.googlesource.com/20334
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit fb880b8a03f33b6a1809d76e7673717875c74606
Author: Russ Cox <rsc@golang.org>
Date:   Tue Mar 8 12:47:49 2016 -0500

    cmd/newlink: delete
    
    cmd/link is clearly the way forward.
    The original rationale for cmd/newlink was that it would be a clean Go reimplementation.
    But when push came to shove, cmd/link got converted from C instead,
    and all the work on build modes and the like is in cmd/link now.
    Cleaning up cmd/link is likely a much better plan.
    
    This directory is something to delete from releases and the
    testdata is something that breaks every time the .6 format changes.
    Fix both problems by just deleting it outright.
    
    Change-Id: Ib00fecda258ba685f1752725971182af9d4459eb
    Reviewed-on: https://go-review.googlesource.com/20380
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c4012b6bbb3714c5e47f60e3c6946c8c4bc5abef
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Mar 8 10:26:20 2016 -0800

    cmd/compile: remove nodesOrNodeList outside of syntax.go
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I717ebd948dfc8faf8b9ef5aa02c67484af618d18
    Reviewed-on: https://go-review.googlesource.com/20359
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f3a29f1f81e14682f5415ddb517eefbd610dea1a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 6 21:22:11 2016 -0800

    cmd/compile: preallocate storage for three Value args
    
    benchstat master2 arg3b
    name      old time/op    new time/op    delta
    Template     441ms ± 4%     444ms ± 6%    ~     (p=0.335 n=22+25)
    GoTypes      1.51s ± 2%     1.51s ± 2%    ~     (p=0.129 n=25+21)
    Compiler     5.59s ± 1%     5.56s ± 2%  -0.65%  (p=0.001 n=24+21)
    
    name      old alloc/op   new alloc/op   delta
    Template    85.6MB ± 0%    85.3MB ± 0%  -0.40%  (p=0.000 n=25+24)
    GoTypes      307MB ± 0%     305MB ± 0%  -0.38%  (p=0.000 n=25+25)
    Compiler    1.06GB ± 0%    1.05GB ± 0%  -0.43%  (p=0.000 n=25+25)
    
    name      old allocs/op  new allocs/op  delta
    Template     1.10M ± 0%     1.09M ± 0%  -1.04%  (p=0.000 n=25+25)
    GoTypes      3.36M ± 0%     3.32M ± 0%  -1.13%  (p=0.000 n=25+24)
    Compiler     13.0M ± 0%     12.9M ± 0%  -1.12%  (p=0.000 n=25+25)
    
    Change-Id: I1280b846e895c00b95bb6664958a7765bd819610
    Reviewed-on: https://go-review.googlesource.com/20296
    Reviewed-by: Keith Randall <khr@golang.org>

commit b20187196f2674c736bb89d9dde741c93bec3255
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 8 15:58:20 2016 +0000

    os/user: skip Current test on android
    
    Also, add more failure output to debug why linux/mips64le and
    linux/ppc64 are failing. They should be working. I suspect their
    builder test envs are missing something.
    
    Change-Id: I97273fe72c4e3009db400394636d0da1ef147485
    Reviewed-on: https://go-review.googlesource.com/20358
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b212c68b9007ad328da81b3d589c032ba0de3434
Author: Klaus Post <klauspost@gmail.com>
Date:   Tue Mar 8 15:57:12 2016 +0100

    hash/crc32: use slicing by 8 for Castagnoli and smaller sizes
    
    This adds "slicing by 8" optimization to Castagnoli tables which will
    speed up CRC32 calculation on systems without asssembler,
    which are all but AMD64.
    
    In my tests, it is faster to use "slicing by 8" for sizes all down to
    16 bytes, so the switchover point has been adjusted.
    
    There are no benchmarks for small sizes, so I have added one for 40 bytes,
    as well as one for bigger sizes (32KB).
    
    Castagnoli, No assembler, 40 Byte payload: (before, after)
    BenchmarkCastagnoli40B-4   10000000     161 ns/op         246.94 MB/s
    BenchmarkCastagnoli40B-4   20000000     100 ns/op         398.01 MB/s
    
    Castagnoli, No assembler, 32KB payload: (before, after)
    BenchmarkCastagnoli32KB-4     10000     115426 ns/op      283.89 MB/s
    BenchmarkCastagnoli32KB-4     30000     45171 ns/op       725.41 MB/s
    
    IEEE, No assembler, 1KB payload: (before, after)
    BenchmarkCrc1KB-4       500000     3604 ns/op         284.10 MB/s
    BenchmarkCrc1KB-4      1000000     1463 ns/op         699.79 MB/s
    
    Compared:
    benchmark                     old ns/op     new ns/op     delta
    BenchmarkCastagnoli40B-4      161           100           -37.89%
    BenchmarkCastagnoli32KB-4     115426        45171         -60.87%
    BenchmarkCrc1KB-4             3604          1463          -59.41%
    
    benchmark                     old MB/s     new MB/s     speedup
    BenchmarkCastagnoli40B-4      246.94       398.01       1.61x
    BenchmarkCastagnoli32KB-4     283.89       725.41       2.56x
    BenchmarkCrc1KB-4             284.10       699.79       2.46x
    
    Change-Id: I303e4ec84e8d4dafd057d64c0e43deb2b498e968
    Reviewed-on: https://go-review.googlesource.com/19335
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 39214275d6dd89f91ee2b5162698777a97cd6e72
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 6 18:06:09 2016 -0800

    cmd/compile: cache const nil, iface, slice, and ""
    
    name      old time/op    new time/op    delta
    Template     441ms ± 4%     446ms ± 4%  +1.23%  (p=0.048 n=22+25)
    GoTypes      1.51s ± 2%     1.51s ± 2%    ~     (p=0.224 n=25+25)
    Compiler     5.59s ± 1%     5.57s ± 2%  -0.38%  (p=0.019 n=24+24)
    
    name      old alloc/op   new alloc/op   delta
    Template    85.6MB ± 0%    85.6MB ± 0%  -0.11%  (p=0.000 n=25+24)
    GoTypes      307MB ± 0%     305MB ± 0%  -0.45%  (p=0.000 n=25+25)
    Compiler    1.06GB ± 0%    1.06GB ± 0%  -0.34%  (p=0.000 n=25+25)
    
    name      old allocs/op  new allocs/op  delta
    Template     1.10M ± 0%     1.10M ± 0%  -0.03%  (p=0.001 n=25+24)
    GoTypes      3.36M ± 0%     3.35M ± 0%  -0.13%  (p=0.000 n=25+25)
    Compiler     13.0M ± 0%     13.0M ± 0%  -0.12%  (p=0.000 n=25+24)
    
    Change-Id: I7fc18acbc3b1588aececef9692e24a0bd3dba974
    Reviewed-on: https://go-review.googlesource.com/20295
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7529701d11ace94cb7c1dee105ad36bd7b4f7058
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 8 07:05:31 2016 +0000

    cmd/compile: fix comment accuracy after recent change
    
    Change-Id: Ifa09bccb8482a6141d0aa862cef674fade30e2eb
    Reviewed-on: https://go-review.googlesource.com/20355
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 199cc194acf58008c9d4ea9a106f6302a5503f9c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 8 03:40:50 2016 -0800

    cmd/compile: simplify eq and hash function generation
    
    Passes toolstash -cmp.
    
    Change-Id: Ie4675e6f713c3bbb90556f5347cbd7268a9c1a5d
    Reviewed-on: https://go-review.googlesource.com/20357
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e28a890d5e91dfa5d0eaeed6bb1b18d9398dfe2e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Mar 7 22:54:46 2016 -0800

    cmd/compile: remove nodesOrNodeListPtr outside of syntax.go
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I2620374b79c61b1e48467b98afe2d7d3beef878b
    Reviewed-on: https://go-review.googlesource.com/20354
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit beabd872f430b4048c12bab6102df13e8e10013f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 10:12:19 2016 -0800

    cmd/compile: fix lineno restoration after SSA compilation
    
    Without SSA:
    
    $ go build -a -gcflags='-S -ssa=0' runtime 2>&1 | grep 'TEXT.*""\.init(SB)'
            0x0000 00000 ($GOROOT/src/runtime/write_err.go:14)        TEXT    "".init(SB), $88-0
    
    With SSA, before this CL:
    
    $ go build -a -gcflags='-S -ssa=1' runtime 2>&1 | grep 'TEXT.*""\.init(SB)'
            0x0000 00000 ($GOROOT/src/runtime/traceback.go:608)       TEXT    "".init(SB), $152-0
    
    With SSA, after this CL:
    
    $ go build -a -gcflags='-S -ssa=1' runtime 2>&1 | grep 'TEXT.*""\.init(SB)'
            0x0000 00000 ($GOROOT/src/runtime/write_err.go:14)        TEXT    "".init(SB), $152-0
    
    Change-Id: Ida3541e03a1af6ffc753ee5c3abeb653459edbf6
    Reviewed-on: https://go-review.googlesource.com/20321
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit aea4222f673ee9189ba81548978b091004afe994
Author: Aaron Zinman <aaron@azinman.com>
Date:   Wed Feb 3 17:36:15 2016 -0800

    darwin/amd64: fix text-relocation issues for c-archive libraries 
    
    The existing implementation deals with absolute relocations in __TEXT
    for darwin/amd64 in build-mode c-shared, but it ignores c-archive.
    This results in issues when trying to use a c-archive in an iOS
    app on the 64-bit simulator. This patch adds c-archive to the
    handling of this issue.
    
    Fixes #14217
    
    Change-Id: I2e4d5193caa531171ad22fd0cd420a8bfb4646a6
    Reviewed-on: https://go-review.googlesource.com/19206
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0d9258a830c585c65e7ef614588d9c9a014b6123
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 18:00:08 2016 -0800

    cmd/internal/obj: add As type for assembly opcodes
    
    Passes toolstash/buildall.
    
    Fixes #14692.
    
    Change-Id: I4352678d8251309f2b8b7793674c550fac948006
    Reviewed-on: https://go-review.googlesource.com/20350
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b1785a5065924a4b90d49d835e11b9dc0f18823a
Author: David Chase <drchase@google.com>
Date:   Fri Mar 4 14:19:49 2016 -0500

    cmd/compile: Tinkering with schedule for debug and regalloc
    
    This adds a heap-based proper priority queue to the
    scheduler which made a relatively easy to test quite a few
    heuristics that "ought to work well".  For go tools
    themselves (which may not be representative) the heuristic
    that works best is (1) in line-number-order, then (2) from
    more to fewer args, then (3) in variable ID order.  Trying
    to improve this with information about use at end of
    blocks turned out to be fruitless -- all of my naive
    attempts at using that information turned out worse than
    ignoring it.  I can confirm that the stores-early heuristic
    tends to help; removing it makes the results slightly worse.
    
    My metric is code size reduction, which I take to mean fewer
    spills from register allocation.  It's not uniform.
    Here's the endpoints for "vet" from one set of pretty-good
    heuristics (this is representative at least).
    
    -2208 time.parse 13472 15680 -14.081633%
    -1514 runtime.pclntab 1002058 1003572 -0.150861%
    -352 time.Time.AppendFormat 9952 10304 -3.416149%
    -112 runtime.runGCProg 1984 2096 -5.343511%
    -64 regexp/syntax.(*parser).factor 7264 7328 -0.873362%
    -44 go.string.alldata 238630 238674 -0.018435%
    
    48 math/big.(*Float).round 1376 1328 3.614458%
    48 text/tabwriter.(*Writer).writeLines 1232 1184 4.054054%
    48 math/big.shr 832 784 6.122449%
    88 go.func.* 75174 75086 0.117199%
    96 time.Date 1968 1872 5.128205%
    
    Overall there appears to be an 0.1% decrease in text size.
    No timings yet, and given the distribution of size reductions
    it might make sense to wait on those.
    
    addr2line  text (code) = -4392 bytes (-0.156273%)
    api  text (code) = -5502 bytes (-0.147644%)
    asm  text (code) = -5254 bytes (-0.187810%)
    cgo  text (code) = -4886 bytes (-0.148846%)
    compile  text (code) = -1577 bytes (-0.019346%) * changed
    cover  text (code) = -5236 bytes (-0.137992%)
    dist  text (code) = -5015 bytes (-0.167829%)
    doc  text (code) = -5180 bytes (-0.182121%)
    fix  text (code) = -5000 bytes (-0.215148%)
    link  text (code) = -5092 bytes (-0.152712%)
    newlink  text (code) = -5204 bytes (-0.196986%)
    nm  text (code) = -4398 bytes (-0.156018%)
    objdump  text (code) = -4582 bytes (-0.155046%)
    pack  text (code) = -4503 bytes (-0.294287%)
    pprof  text (code) = -6314 bytes (-0.085177%)
    trace  text (code) = -5856 bytes (-0.097818%)
    vet  text (code) = -5696 bytes (-0.117334%)
    yacc  text (code) = -4971 bytes (-0.213817%)
    
    This leaves me sorely tempted to look into a "real" scheduler
    to try to do a better job, but I think it might make more
    sense to look into getting loop information into the
    register allocator instead.
    
    Fixes #14577.
    
    Change-Id: I5238b83284ce76dea1eb94084a8cd47277db6827
    Reviewed-on: https://go-review.googlesource.com/20240
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 481fe5901232583340159415f3f5c83af28c1fa4
Author: Todd Neal <todd@tneal.org>
Date:   Mon Mar 7 18:43:05 2016 -0600

    cmd/compile: fix load combining from a non-zero pointer offset
    
    When the pointer offset is non-zero in the small loads, we need to add the offset
    when converting to the larger load.
    
    Fixes #14694
    
    Change-Id: I5ba8bcb3b9ce26c7fae0c4951500b9ef0fed54cd
    Reviewed-on: https://go-review.googlesource.com/20333
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6df80387689a69a5b9e3ac073ba8ce4d8498ba66
Author: Burcu Dogan <jbd@google.com>
Date:   Mon Mar 7 13:41:27 2016 -0800

    runtime: listen 127.0.0.1 instead of localhost on android
    
    Fixes #14486.
    Related to #14485.
    
    Change-Id: I2dd77b0337aebfe885ae828483deeaacb500b12a
    Reviewed-on: https://go-review.googlesource.com/20340
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e853131699680c875d2d4e6cf82d959272dacd00
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 15:15:57 2016 -0800

    cmd/internal/obj: stop using as+ALAST as an opcode
    
    Currently, package obj reserves a range of 1<<12 opcodes for each
    target architecture.  E.g., mips64 has [6<<12, 7<<12).
    
    However, because mips.ABEQ and mips.ALAST are both within that range,
    the expression mips.ABEQ+mips.ALAST in turn falls (far) outside that
    range around 12<<12, meaning it could theoretically collide with
    another arch's opcodes.
    
    More practically, it's a problem because 12<<12 overflows an int16,
    which hampers fixing #14692.  (We could also just switch to uint16 to
    avoid the overflow, but that still leaves the first problem.)
    
    As a workaround, use Michael Hudson-Doyle's solution from
    https://golang.org/cl/20182 and use negative values for these variant
    instructions.
    
    Passes toolstash -cmp for GOARCH=arm and GOARCH=mips64.
    
    Updates #14692.
    
    Change-Id: Iad797d10652360109fa4db19d4d1edb6529fc2c0
    Reviewed-on: https://go-review.googlesource.com/20345
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 399f0f5fe8029e31e742e0341c7ddfd2097f3926
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Mar 7 23:11:37 2016 +0000

    go/build: introduce go1.7 build tag
    
    This is needed now for subrepos to be able to conditionally use
    API symbols found only after Go 1.6.
    
    Change-Id: Ie7d9301332aa1739b585d93f8025424ae72a2430
    Reviewed-on: https://go-review.googlesource.com/20344
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bd68b8abc2e3ceaa3b9bde98568a4a9af8bde40f
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Mon Feb 29 12:06:57 2016 -0300

    net/http: TimeoutHandler should start timer when serving request
    
    TimeoutHandler was starting the Timer when the handler was created,
    instead of when serving a request. It also was sharing it between
    multiple requests, which is incorrect, as the requests might start
    at different times.
    
    Store the timeout duration and create the Timer when ServeHTTP is
    called. Different requests will have different timers.
    
    The testing plumbing was simplified to store the channel used to
    control when timeout happens. It overrides the regular timer.
    
    Fixes #14568.
    
    Change-Id: I4bd51a83f412396f208682d3ae5e382db5f8dc81
    Reviewed-on: https://go-review.googlesource.com/20046
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6c4e90a99edaf50a6825e04816756cd10808583c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Mar 7 14:32:18 2016 -0800

    cmd/compile: change Node fields from *NodeList to Nodes
    
    Compile time is about the same.  Getting rid of the nodeSeq interfaces,
    particularly nodeSeqIterate, should produce some improvements.
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I678abafdd9129c6cccb0ec980511932eaed496a0
    Reviewed-on: https://go-review.googlesource.com/20343
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a81283d5d9a6a68db47c2298bbf3a70a753deb5c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Mar 5 16:25:58 2016 -0800

    cmd/compile: inline list storage stealing
    
    It is only necessary in a few places, and this inlining will
    simplify the transition away from NodeLists.
    
    Passes toolstash -cmp.
    
    Change-Id: I4ee9b4bf56ffa04df23e20a0a83b302d36b33510
    Reviewed-on: https://go-review.googlesource.com/20290
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b8a2e25f55de3ab42a846c08c0002b8d88248bca
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Tue Mar 1 22:55:06 2016 +0800

    cmd/vet: remove -test flag
    
    -test flag is a testing only flag that enables all vet checks. It was needed
    because there was no way to run all vet checks in a single command
    invocation. However it is possible to do this now by combining -all and -shadow
    flags.
    
    Also a recently added -tests flag is similarly named, having both -test and
    -tests can be confusing.
    
    Change-Id: Ie5bacbe0bef5c8409eeace46f16141fa4e782c32
    Reviewed-on: https://go-review.googlesource.com/20006
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bcce5bdabd0c8fba61b700aab15813800b9e9c07
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 10 15:31:53 2015 -0700

    cmd/compile: remove NodeList != NodeList comparisons
    
    Opt for replacements that avoid any assumptions
    about the representations in use.
    
    Passes toolstash -cmp.
    
    Change-Id: Ia858a33abcae344e03fc1862fc9b0e192fde80c1
    Reviewed-on: https://go-review.googlesource.com/20279
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8969ab89b8b1c7b617b3418c5b122baa43bcd563
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Mar 6 18:05:41 2016 -0800

    cmd/compile: add sizeof test for ssa types
    
    Fix some test output while we're here.
    
    Change-Id: I265cedc222e078eff120f268b92451e12b0400b2
    Reviewed-on: https://go-review.googlesource.com/20294
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 40e60e7c13d53f63d323c0a2fe380dd3eb24bf3c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Mar 7 22:11:48 2016 +0000

    os, syscall: skip tests when environment doesn't permit testing
    
    Fixes #14693
    
    Change-Id: Id0a6a80b4c37c0b0f1c2755667b7233ed8964e40
    Reviewed-on: https://go-review.googlesource.com/20342
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2b19b6e3f109a7a7392d4628ae700833623aa26e
Author: Austin Clements <austin@google.com>
Date:   Mon Mar 7 17:10:19 2016 -0500

    runtime: fix checkmark scanning of finalizers
    
    Currently work.finalizersDone is reset only at the beginning of
    gcStart. As a result, it will be set when checkmark runs, so checkmark
    will skip scanning finalizers. Hence, if there are any bugs that cause
    the regular scan of finalizers to miss pointers, checkmark will also
    miss them and fail to detect the missed pointer.
    
    Fix this by resetting finalizersDone in gcResetMarkState. This way it
    gets reset before any full mark, which is exactly what we want.
    
    Change-Id: I4ddb5eba5b3b97e52aaf3e08fd9aa692bda32b20
    Reviewed-on: https://go-review.googlesource.com/20332
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b4c66b176e4ae155565c6e9ad07041540081c792
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 13:45:52 2016 -0800

    cmd/internal/obj/mips: add ALUI const
    
    Instead of abusing ALAST.
    
    Passes GOARCH=mips64 toolstash -cmp.
    
    Updates #14692.
    
    Change-Id: Ie85e99cf76508c1d0f5847a4157056b614fd5cc6
    Reviewed-on: https://go-review.googlesource.com/20341
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 133c26b158b7764dd128f02e2d64de798c198582
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Sat Mar 5 15:57:17 2016 -0300

    go/types: don't emit conversion error in non-numeric increment/decrement
    
    In increment and decrement statements, explicit check that the type
    of operand is numeric. This avoids a related but less clear error
    about converting "1" to be emitted.
    
    So, when checking
    
            package main
    
            func main() {
                    var x bool
                    x++
            }
    
    instead of emitting the error
    
            prog.go:5:2: cannot convert 1 (untyped int constant) to bool
    
    emits
    
            prog.go:5:2: invalid operation: x++ (non-numeric type bool).
    
    Updates #12525.
    
    Change-Id: I00aa6bd0bb23267a2fe10ea3f5a0b20bbf3552bc
    Reviewed-on: https://go-review.googlesource.com/20244
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a03bdc3e6bea34abd5077205371e6fb9ef354481
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Feb 29 15:01:00 2016 -0800

    runtime: eliminate unnecessary type conversions
    
    Automated refactoring produced using github.com/mdempsky/unconvert.
    
    Change-Id: Iacf871a4f221ef17f48999a464ab2858b2bbaa90
    Reviewed-on: https://go-review.googlesource.com/20071
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1ec4f227f45f669dfcc017b1eb1d147aca5ac620
Author: Dave Cheney <dave@cheney.net>
Date:   Sun Mar 6 18:40:43 2016 +1100

    cmd/compile/internal/ppc64: clean up table initalisation
    
    Move initproginfo and initvariants to ppc64.Main to avoid checking that
    the tables are initialised every time.
    
    Change-Id: I95ff4146a7abc18c42a20bfad716cc80ea8367e5
    Reviewed-on: https://go-review.googlesource.com/20286
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 795e712b72802ad49b7c077964046f79c4f6586e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 3 20:54:24 2016 +0000

    os/user: make Current work without cgo
    
    Fixes #14626
    
    Change-Id: I91c40407dc35355e5c5046f24111a126f99260d9
    Reviewed-on: https://go-review.googlesource.com/20192
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 7893442011c680a549b50673ec59e8dbf6f4fe95
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 11:36:05 2016 -0800

    cmd/internal/obj: simplify Optab range handling code
    
    Use slices as slices, instead of as clumsy pointers.
    
    Passes toolstash/buildall.
    
    Change-Id: If09eacc2d8805d7d5eaa5566f9b6305541074371
    Reviewed-on: https://go-review.googlesource.com/20322
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 42f07ff2679d38a03522db3ccd488f4cc230c8c2
Author: Ross Light <light@google.com>
Date:   Thu Feb 4 15:39:00 2016 -0800

    os/user: add LookupGroup, LookupGroupId, and User.GroupIds functions
    
    As part of local testing with a large group member list, I discovered
    that the lookup functions don't resize their buffer if they receive
    ERANGE.  I fixed this as a side-effect of this CL.
    
    Thanks to @andrenth for the original CL.
    
    Fixes #2617
    
    Change-Id: Ie6aae2fe0a89eae5cce85786869a8acaa665ffe9
    Reviewed-on: https://go-review.googlesource.com/19235
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ff555f1159040e644332872c221daa308a7b9b82
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Mar 7 08:35:45 2016 -0800

    mime/multipart: don't call Read on io.Reader after an error is seen
    
    The io.Reader contract makes no promises about how a Reader should
    behave after it returns its first error. Usually the errors are
    sticky, but they don't have to be. A regression in zlib.Reader (bug
    accidentally relied on sticky errors.
    
    Minimal fix: wrap the user's provided Reader in a Reader which
    guarantees stickiness. The minimal fix is less scary than touching
    the multipart state machine.
    
    Fixes #14676
    
    Change-Id: I8dd8814b13ae5530824ae0e68529f788974264a5
    Reviewed-on: https://go-review.googlesource.com/20297
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c876a1b11ee8d22b50df2b9b615f8199675f0470
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 10:44:05 2016 -0800

    cmd/internal/obj: remove unused ar.go
    
    Change-Id: I3eab54cd27c43bab38641fbead4adb6442481356
    Reviewed-on: https://go-review.googlesource.com/20248
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5a966cf2da1f054d92c36b0f7f407d3ee467ef34
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sun Mar 6 15:51:57 2016 -0800

    compress/zlib: make errors persistent
    
    Ensure that all errors (including io.EOF) are persistent across method
    calls on zlib.Reader. Furthermore, ensure that these persistent errors
    are properly cleared when Reset is called.
    
    Fixes #14675
    
    Change-Id: I15a20c7e25dc38219e7e0ff255d1ba775a86bb47
    Reviewed-on: https://go-review.googlesource.com/20292
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2a68c6c27c447321842cb89d89c47059a15ff5ff
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Mar 7 09:36:24 2016 -0800

    cmd/compile: more nodeSeq conversions
    
    Found by temporarily flipping fields from *NodeList to Nodes and fixing
    all the compilation errors.  This CL does not actually change any
    fields.
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: Ib98fa37e8752f96358224c973a743618a6a0e736
    Reviewed-on: https://go-review.googlesource.com/20320
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c3dfad5df990432cddc06d6e018b5b4f29ebb7bf
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Mar 7 08:23:55 2016 -0800

    cmd/compile: change Oconv to take an Op parameter
    
    Eliminates type conversions in a bunch of Oconv(int(n.Op), ...) calls.
    
    Notably, this identified a misuse of Oconv in amd64/gsubr.go to try to
    print an assembly instruction op instead of a compiler node op.
    
    Change-Id: I93b5aa49fe14a5eaf868b05426d3b8cd8ab52bc5
    Reviewed-on: https://go-review.googlesource.com/20298
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0de0cafb9f5b20058741c68c8dddf79ffc8492d7
Author: Richard Miller <miller.research@gmail.com>
Date:   Wed Jan 27 16:31:24 2016 +0000

    runtime: new files for plan9_arm support
    
    Implementation more or less follows plan9_386 version.
    Revised 7 March to correct a bug in runtime.seek and
    tidy whitespace for 8-column tabs.
    
    Change-Id: I2e921558b5816502e8aafe330530c5a48a6c7537
    Reviewed-on: https://go-review.googlesource.com/18966
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d145456b168029188ffc654ce2e9f1bbc62f8b99
Author: Richard Miller <miller.research@gmail.com>
Date:   Wed Jan 27 18:43:36 2016 +0000

    runtime: signal handling support for plan9_arm
    
    Plan 9 trap/signal handling differs on ARM from other architectures
    because ARM has a link register.  Also trap message syntax varies
    between different architectures (historical accident?).
    Revised 7 March to clarify a comment.
    
    Change-Id: Ib6485f82857a2f9a0d6b2c375cf0aaa230b83656
    Reviewed-on: https://go-review.googlesource.com/18969
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c97ddf9c108adf0ca9c1aa2043a417885db411c2
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Sat Mar 5 17:36:56 2016 -0300

    cmd/compile: don't emit conversion error in non-numeric increment/decrement
    
    In increment and decrement statements, explicit check that the type
    of operand is numeric earlier. This avoids a related but less clear
    error about converting "1" to be emitted.
    
    So, when compiling
    
            package main
    
            func main() {
                    var x bool
                    x++
            }
    
    instead of emitting two errors
    
            prog.go:5: cannot convert 1 to type bool
            prog.go:5: invalid operation: x++ (non-numeric type bool)
    
    just emits the second error.
    
    Fixes #12525.
    
    Change-Id: I6e81330703765bef0d6eb6c57098c1336af7c799
    Reviewed-on: https://go-review.googlesource.com/20245
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ed8116989d84ba50f16cf7a88b5c0a44aa650087
Author: Nigel Tao <nigeltao@golang.org>
Date:   Sat Mar 5 11:14:51 2016 +1100

    compress/flate: remove unused woffset field.
    
    Change-Id: Id0a12c76b0a6925f2926d38a1931157f9ef5f650
    Reviewed-on: https://go-review.googlesource.com/20280
    Reviewed-by: Joe Tsai <joetsai@digital-static.net>
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6ed10382f7c81369e69f6c9e406f1df325a85984
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Mar 4 18:55:09 2016 -0800

    cmd/compile: soup up isSamePtr
    
    This increases the number of matches in make.bash
    from 853 to 984.
    
    Change-Id: I12697697a50ecd86d49698200144a4c80dd3e5a4
    Reviewed-on: https://go-review.googlesource.com/20274
    Reviewed-by: Todd Neal <todd@tneal.org>

commit ff71ed86b6f7d39368a9a276087477c9cb3f9ff7
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 2 17:27:59 2016 -0500

    runtime: merge {bgMark,assist}StartTime
    
    We used to start background mark workers and assists at different
    times, so we needed to keep track of these separately. They're now set
    to exactly the same time, so clean things up by merging them in to one
    value, markStartTime.
    
    Change-Id: I17c9843c3ed2d6f07b4c8cd0b2c438fc6de23b53
    Reviewed-on: https://go-review.googlesource.com/20143
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit da1802f1df178b0e06366a0589237d924b7c6c4e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Mar 4 12:34:43 2016 -0800

    cmd/compile: use OffPtr when possible
    
    OffPtr allocates less and is easier to optimize.
    
    With this change, the OffPtr collapsing opt
    rule matches increase from 160k to 263k,
    and the Load-after-Store opt rule matches
    increase from 217 to 853.
    
    Change-Id: I763426a3196900f22a367f7f6d8e8047b279653d
    Reviewed-on: https://go-review.googlesource.com/20273
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3294014ae119f34c40547ed253bf4c5d25dc5f17
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Mar 4 14:12:44 2016 -0800

    cmd/compile: collapse OffPtr sequences
    
    This triggers an astonishing 160k times
    during make.bash. The second biggest
    generic rewrite triggers 100k times.
    
    However, this is really just moving
    rewrites that were happening at the
    architecture level to the generic level.
    
    Change-Id: Ife06fe5234f31433328460cb2e0741c071deda41
    Reviewed-on: https://go-review.googlesource.com/20235
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 12e60452e9f7c21933aad1a864e1433736de807e
Author: Keith Randall <khr@golang.org>
Date:   Fri Mar 4 10:26:57 2016 -0800

    cmd/compile: Combine smaller loads into a larger load
    
    This only deals with the loads themselves.  The bounds checks
    are a separate issue.  Also doesn't handle stores, those are
    harder because we need to make sure intermediate memory states
    aren't observed (which is hard to do with rewrite rules).
    
    Use one byte shorter instructions for zero-extending loads.
    
    Update #14267
    
    Change-Id: I40af25ab5208488151ba7db32bf96081878fa7d9
    Reviewed-on: https://go-review.googlesource.com/20218
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9f4a359fc2d914c275bccc187ae5216787a85146
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Mar 7 09:47:02 2016 +1300

    cmd/compile, cmd/link, cmd/newlink: remove support for weak symbols
    
    They were only used for rtype.ptrToThis which David Crawshaw removed a couple
    of weeks ago. Removes two traversals of Ctxt.Allsym from the linker but it
    doesn't seem to make much difference to performance.
    
    Change-Id: I5c305e0180186f643221d57822d301de4aa18827
    Reviewed-on: https://go-review.googlesource.com/20287
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6bd63ca3468290003609ba3244f2aa3bede4e36a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jun 9 18:37:26 2015 -0700

    cmd/compile: hide NodeList details in evconst
    
    The new code is a bit less efficient,
    but it does not involve altering the structure
    of any linked lists.
    This will make it easier to replace NodeLists
    with Node slices.
    We can return to a more efficient algorithm
    when NodeLists have been replaced.
    
    Passes toolstash -cmp.
    
    Change-Id: I0bb5ee75e7c0646e6d37fe558c8f0548729d8aa1
    Reviewed-on: https://go-review.googlesource.com/20277
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1d40e2b14b67f74681d71255ae833c6748d47b3f
Author: Muhammed Uluyol <uluyol0@gmail.com>
Date:   Sat Mar 5 23:51:25 2016 -0500

    Rewrite leftover references to plan9.bell-labs.com to 9p.io.
    
    Change-Id: Iadb4aa016a7b361d01827787dbc59164d5d147f2
    Reviewed-on: https://go-review.googlesource.com/20291
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 786a2ef380f662ecdd7e089b59f9ce075a24ef42
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu May 14 20:11:28 2015 -0700

    cmd/compile: use a uint8-sized named type for Addr.Type
    
    No immediate reduction in the size of Addr.
    
    Passes toolstash -cmp.
    
    Change-Id: I78ea4c6e181b6e571ce70a5f1ae8158844eb197d
    Reviewed-on: https://go-review.googlesource.com/20276
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8f5fb95db6573f132bcfd0b3f9541faa84058fa0
Author: Dave Cheney <dave@cheney.net>
Date:   Sun Mar 6 13:04:52 2016 +1100

    cmd/compile/internal/gc: assert size of important types
    
    Add tests to ensure that the size of important types don't change
    unexpectedly.
    
    Skip the test on nacl platforms because of their unusual padding
    requirements.
    
    Change-Id: Iddb127a99499e089a309b721f5073356c0da8b24
    Reviewed-on: https://go-review.googlesource.com/20285
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bd6d84282a441a35b4629eaa958d3ce24d396a6f
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Feb 27 14:37:10 2016 +0100

    fmt: refactor and unify float and complex formatting
    
    Removes specialized functions for each verb and float/complex size
    and replaces them with generic variants fmtFloat and
    fmtComplex similar to other generic fmt functions.
    
    Simplifies the complex formatting by relying on fmtFloat
    to handle the verb and default precision selection.
    
    Complex imaginary formatting does not need to clear the f.space flag
    because the set f.plus flag will force a sign instead of a space.
    
    Sets default precision for %b to -1 (same as %g and %G)
    since precision for %b has no affect in strconv.AppendFloat.
    
    Add more tests and group them a bit better.
    Use local copies of +Inf,-Inf and NaN instead
    of math package functions for testing.
    
    Saves around 8kb in the go binary.
    
    name              old time/op  new time/op  delta
    SprintfFloat-2     200ns ± 4%   196ns ± 4%  -1.55%  (p=0.007 n=20+20)
    SprintfComplex-2   569ns ± 4%   570ns ± 3%    ~     (p=0.804 n=20+20)
    
    Change-Id: I36d35dab6f835fc2bd2c042ac97705868eb2446f
    Reviewed-on: https://go-review.googlesource.com/20252
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Rob Pike <r@golang.org>

commit 5763476f739ad4d6b122c2a7ae26a845ea020a7e
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Mar 5 11:33:13 2016 +0100

    fmt: use fewer allocations for %q string formatting
    
    Reuse the internal buffer and use append versions of
    the strconv quote functions to avoid some allocations.
    
    Add more tests.
    
    name                  old time/op    new time/op    delta
    SprintfQuoteString-2     486ns ± 2%     416ns ± 2%  -14.42%  (p=0.000 n=20+20)
    
    name                  old allocs/op  new allocs/op  delta
    SprintfQuoteString-2      4.00 ± 0%      2.00 ± 0%  -50.00%  (p=0.000 n=20+20)
    
    Change-Id: I63795b51fd95c53c5993ec8e6e99b659941f9f54
    Reviewed-on: https://go-review.googlesource.com/20251
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 00da3a6ec30bbad224d483a8d23a3b8a516c8e97
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Mar 3 17:06:43 2016 +0100

    fmt: optimize byte slice and array formatting for %v and %d
    
    Instead of calling printArg in fmtBytes to format each byte call
    the byte formatting functions directly since it is known each
    element is of type byte.
    
    Add more tests for byte slice and array formatting.
    
    name            old time/op  new time/op  delta
    SprintfBytes-2   843ns ±16%   417ns ±11%  -50.58%  (p=0.000 n=20+20)
    
    Change-Id: I5b907dbf52091e3de9710b09d67649c76f4c17e9
    Reviewed-on: https://go-review.googlesource.com/20176
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 8c838192b84c062ccf208809320cab68d762a973
Author: Hitoshi Mitake <mitake.hitoshi@gmail.com>
Date:   Wed Jan 13 23:06:27 2016 +0900

    runtime: don't print EnableGC flag in WriteHeapProfile()
    
    Current runtime.WriteHeapProfile() doesn't print correct
    EnableGC. Even if GOGC=off, the result file has below line:
     # EnableGC = true
    
    It is hard to print correct status of the variable because of corner
    cases e.g. initialization. For avoiding confusion, this commit removes
    the print.
    
    Change-Id: Ia792454a6c650bdc50a06fbaff4df7b6330ae08a
    Reviewed-on: https://go-review.googlesource.com/18600
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 4ab1793a781462d61f19abc1c6060704a8ed01c3
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 4 19:04:50 2016 -0800

    cmd/compile: convert asmlist to []*Node
    
    Updates #14473.
    
    Change-Id: I88745c2a6119dea3b81b57299e70a2a7e4c584a8
    Reviewed-on: https://go-review.googlesource.com/20272
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 783741844b48ebbe6b575369c915bfc1c6e53972
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Mar 4 15:52:35 2016 +0100

    fmt: float formatting should not permanently change width
    
    formatFloat should restore the original f.wid value before
    returning. Callers should not have to save and restore f.wid.
    
    Fixes: #14642
    
    Change-Id: I531dae15c7997fe8909e2ad1ef7c376654afb030
    Reviewed-on: https://go-review.googlesource.com/20179
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 72d90d8238c00daf8893fa6b849e43a9e917e10e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 4 15:26:38 2016 -0800

    cmd/compile: change parser, racewalk, range to use nodeSeq
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I0809c6b88643f04c7fc503f866ffe25e69f29910
    Reviewed-on: https://go-review.googlesource.com/20260
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 65c4b55aba2ccbc26fcd143c29f6014b91616897
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 4 17:28:07 2016 -0800

    cmd/compile: convert subr, swt, typecheck to nodeSeq
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I836197810405cde72cbb49fef7e163a517601f9c
    Reviewed-on: https://go-review.googlesource.com/20242
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 3da1a26fba32fe65f43ac5226d079224255ada68
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 4 16:39:07 2016 -0800

    cmd/compile: stop leaking 'any' type into user package
    
    The new check corresponds to the (etype != TANY || Debug['A'] != 0)
    that was lost in golang.org/cl/19936.
    
    Fixes #14652.
    
    Change-Id: Iec3788ff02529b3b0f0d4dd92ec9f3ef20aec849
    Reviewed-on: https://go-review.googlesource.com/20271
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit dafbcf6df743f5c79931328cbc4d744b6781d100
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 4 15:19:06 2016 -0800

    cmd/compile: remove syslook's copy parameter
    
    Instead make substArgTypes responsible for cloning the function
    definition Node and the function signature Type tree.
    
    Passes toolstash -cmp.
    
    Change-Id: I9ec84c90a7ae83d164d3f578e84a91cf1490d8ab
    Reviewed-on: https://go-review.googlesource.com/20239
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8b51ee831518584ebe063ac972b3b2ab28637853
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Tue Feb 16 16:05:56 2016 -0600

    crypto/cipher: xorBytes performance ppc64le/ppc64
    
    Update supportsUnaligned in xor.go to be true for
    GOARCH values ppc64le and ppc64.  This allows the
    xor of long buffers to be done on double words
    (8 bytes) instead of a single byte at a time, which
    significantly improves performance.
    
    Fixes #14350
    
    Change-Id: Iccc6b9d3df2e604a55f4c1e4890bdd3bb0d77ab0
    Reviewed-on: https://go-review.googlesource.com/19519
    Reviewed-by: Minux Ma <minux@golang.org>

commit eb6ee75add2c9eaffd52fe572230a3fa08080f50
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 4 16:13:17 2016 -0800

    cmd/compile: convert select, sinit, ssa to nodeSeq
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I1b50fe981e7a266d4b14f31d849eb91afccdfda3
    Reviewed-on: https://go-review.googlesource.com/20270
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e3a9dca7cc61d956656d443753545d5ff03a575f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Mar 4 22:02:27 2016 +0000

    cmd/compile: don't allocate convX2X or assertX2X func names before syslook
    
    Change-Id: Ib632ee7ac893750bec4cfe223745bca5f31900ab
    Reviewed-on: https://go-review.googlesource.com/20234
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 80e5b5256679ec1a8d4082a216a171a60e71ca3c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 4 14:29:24 2016 -0800

    cmd/compile: change order.go to use nodeSeq
    
    Passes toolstash -cmp
    
    Update #14473.
    
    Change-Id: I15b35d40a5ec1f4355ee38bc6d131920933ac95c
    Reviewed-on: https://go-review.googlesource.com/20237
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 16e2e95dd92bb2cf8b04be611685521adb9ea85a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 4 14:52:28 2016 -0800

    cmd/compile/internal/ssa: chmod -x likelyadjust.go
    
    Change-Id: I01ec7d08884a1e0fbce94ea77281c1ee4a2cfd56
    Reviewed-on: https://go-review.googlesource.com/20238
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 55c65d4a97bb578418c39f74a42e3748e075e0e4
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 4 13:16:48 2016 -0800

    cmd/compile: change export.go and fmt.go to use nodeSeq
    
    Also fix some uses of nodeSeqIterator.Len, and fix the implementation in
    nodesIterator.
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I228871470234b7f1314ffd2aae8a4c0624c35f98
    Reviewed-on: https://go-review.googlesource.com/20231
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3375974e0d64f2d8105cb5f6ca4a44790506f8ad
Author: Rhys Hiltner <rhys@justin.tv>
Date:   Thu Mar 3 22:37:14 2016 -0800

    cmd/link/internal/ld: don't panic on short buildid
    
    When the linker was written in C, command line arguments were passed
    around as null-terminated byte arrays which encouraged checking
    characters one at a time. In Go, that can easily lead to
    out-of-bounds panics.
    
    Use the more idiomatic strings.HasPrefix when checking cmd/link's -B
    argument to avoid the panic, and replace the manual hex decode with
    use of the encoding/hex package.
    
    Fixes #14636
    
    Change-Id: I45f765bbd8cf796fee1a9a3496178bf76b117827
    Reviewed-on: https://go-review.googlesource.com/20211
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b5481dd0a635780e8ff35cb274a9b3d85fc7f608
Author: Austin Clements <austin@google.com>
Date:   Tue Mar 1 21:30:26 2016 -0500

    runtime: disable gcMarkRootCheck debugging check during STW
    
    gcMarkRootCheck takes ~10ns per goroutine. This is just a debugging
    check, so disable it (plus, if something is going to go wrong, it's
    more likely to go wrong during concurrent mark).
    
    We may be able to re-enable this later, or move it to after we've
    started the world again. (But not for 1.6.x.)
    
    For 1.6.x.
    
    Fixes #14419.
    
    name / 95%ile-time/markTerm          old          new  delta
    500kIdleGs-12                24.0ms ± 0%  18.9ms ± 6%  -21.46%  (p=0.000 n=15+20)
    
    Change-Id: Idb2a2b1771449de772c159ef95920d6df1090666
    Reviewed-on: https://go-review.googlesource.com/20148
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9ab9053344598598913ba6f93c7f2945182be8d1
Author: Austin Clements <austin@google.com>
Date:   Tue Mar 1 15:09:24 2016 -0500

    runtime: reset mark state before stopping the world
    
    Currently we reset the mark state during STW sweep termination. This
    involves looping over all of the goroutines. Each iteration of this
    loop takes ~25ns, so at around 400k goroutines, we'll exceed our 10ms
    pause goal.
    
    However, it's safe to do this before we stop the world for sweep
    termination because nothing is consuming this state yet. Hence, move
    the reset to just before STW.
    
    This isn't perfect: a long reset can still delay allocating goroutines
    that block on GC starting. But it's certainly better to block some
    things eventually than to block everything immediately.
    
    For 1.6.x.
    
    Fixes #14420.
    
    name \ 95%ile-time/sweepTerm           old          new  delta
    500kIdleGs-12                 11312µs ± 6%  18.9µs ± 6%  -99.83%  (p=0.000 n=16+20)
    
    Change-Id: I9815c4d8d9b0d3c3e94dfdab78049cefe0dcc93c
    Reviewed-on: https://go-review.googlesource.com/20147
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1716162a9a17873448427b7aca28efd151b5af07
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 4 11:29:55 2016 -0800

    runtime: fix off-by-one error finding module for PC
    
    Also fix compiler-invoked panics to avoid a confusing "malloc deadlock"
    crash if they are invoked while executing the runtime.
    
    Fixes #14599.
    
    Change-Id: I89436abcbf3587901909abbdca1973301654a76e
    Reviewed-on: https://go-review.googlesource.com/20219
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit afd835434c34178eb8b8b8a89a7a41f5ec35c47c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Feb 27 08:33:14 2016 -0900

    cmd/link: deduplicate read-only string data
    
    Many read-only strings in Go binaries are substrings of other read-only
    strings. A common source is the text form of type information, which
    will include both "struct { X int }" and "*struct { X int }" or
    "*bytes.Reader" and "func(*bytes.Reader)" in the same binary.
    
    Because this character data is referred to by separate string headers,
    we can skip writing the smaller string and modify the pointer
    relocation to point to the larger string. This CL does this
    deduplication in the linker after the reachable set of strings has
    been determined.
    
    This removes 765KB from juju (1.4% without DWARF).
    
    Link time goes at tip goes form 4.6s to 6.3s, but note that this CL
    is part of a series that recently reduced link time from 9.6s.
    
    For #6853.
    
    Change-Id: Ib2087cf627c9f1e9a1181f9b4c8f81d1a3f42191
    Reviewed-on: https://go-review.googlesource.com/19987
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 69285a8b46c1d7588d0542d4f9d00f03cbfcbca9
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Mar 4 14:53:26 2016 -0500

    reflect: recognize unnamed directional channels
    
    go test github.com/onsi/gomega/gbytes now passes at tip, and tests
    added to the reflect package.
    
    Fixes #14645
    
    Change-Id: I16216c1a86211a1103d913237fe6bca5000cf885
    Reviewed-on: https://go-review.googlesource.com/20221
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4c69e92f51645c291dc4c74aed5c56ecb0dcd57f
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Mar 4 10:14:03 2016 -0500

    cmd/link: align string data to Minalign when merging strings
    
    Minalign > 1 implies that relocations inserted by the linker cannot
    target arbitrary bytes.
    
    Related to #14604
    
    Change-Id: Ie68d14887bc4047d9b29b0cb1149a8d14b6c62e2
    Reviewed-on: https://go-review.googlesource.com/20214
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 99b6b77e22428781218f9da572741027fba61e93
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Mar 4 09:37:58 2016 -0800

    cmd/compile: convert inl.go to use nodeSeq
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I60ef7cac553b346ca6b8cc7152cd184e59994b66
    Reviewed-on: https://go-review.googlesource.com/20216
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c0740fed377109526e61955af612efba8ec3f3dc
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 3 22:06:57 2016 -0800

    cmd/compile: more ssa config flags
    
    To turn ssa compilation on or off altogether, use
    -ssa=1 or -ssa=0.  Default is on.
    
    To turn on or off consistency checks, do
    -d=ssa/check/on or -d=ssa/check/off.  Default is on for now.
    
    Change-Id: I277e0311f538981c8b9c62e7b7382a0c8755ce4c
    Reviewed-on: https://go-review.googlesource.com/20217
    Reviewed-by: David Chase <drchase@google.com>

commit 7f13fbf76656790187c53c05d1b3d00c68d844a6
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 4 07:55:39 2016 -0800

    cmd/compile: small cleanup to syslook calls
    
    Passing copy==1 to syslook is only necessary to support subsequent
    calls to substArgTypes.  typ2Itab and concatstring* don't have "any"
    parameters, so no point in deep copying their function signatures at
    every call site.
    
    For a couple other syslook calls (makemap and conv[IET]2[IET]), move
    them closer to their corresponding substArgTypes calls so it's easier
    to see that all syslook(fn, 1) calls are necessary.
    
    Change-Id: I4a0588ab2b8b5b8ce7a0a44b24c8cf8fda489af6
    Reviewed-on: https://go-review.googlesource.com/20215
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 646939c0e3b68c24908692696356a0b048a6ba69
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Mar 3 18:26:36 2016 -0800

    cmd/compile: re-vendor math/big to pick up bug fix
    
    The changes to internal/big are completely automatic
    by running vendor.bash in that directory.
    
    Also added respective test case.
    
    For #14553.
    
    Change-Id: I98b124bcc9ad9e9bd987943719be27864423cb5d
    Reviewed-on: https://go-review.googlesource.com/20199
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3858efcc586914634c5a64b8ef289abe7d4d28b3
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Mar 3 17:39:55 2016 -0800

    math/big: use correct precision in Float.Float32/64 for denormals
    
    When a big.Float is converted to a denormal float32/64, the rounding
    precision depends on the size of the denormal. Rounding may round up
    and thus change the size (exponent) of the denormal. Recompute the
    correct precision again for correct placement of the mantissa.
    
    Fixes #14553.
    
    Change-Id: Iedab5810a2d2a405cc5da28c6de7be34cb035b86
    Reviewed-on: https://go-review.googlesource.com/20198
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 08c2cd84699e0aa0e9dbcfbd5f4ca89df40484f5
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Feb 18 11:08:25 2016 -0500

    cmd/compile: remove NUL-terminator from string data
    
    Makes godoc 37KB smaller.
    For #6853.
    
    Change-Id: I0bd6e40f2b4da193768a9fc2ce494cacf7e83c32
    Reviewed-on: https://go-review.googlesource.com/19697
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 62e26e75117c55dfd67226460669010959b4b23d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 4 01:53:54 2016 -0800

    cmd/compile: simplify Eqtype
    
    Change-Id: I443f997ed53f965ef5b33734351ab8a07a09746b
    Reviewed-on: https://go-review.googlesource.com/20213
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 132ebeac3f865e14955b27caf12f641e80734577
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 3 20:48:00 2016 -0800

    cmd/compile: convert walk.go and friends to use nodeSeq
    
    Pases toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I450d9f51fd280da91952008cd917b749d88960a3
    Reviewed-on: https://go-review.googlesource.com/20210
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1765863e577634e5e0502f7a783979a5fd480618
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 4 01:30:31 2016 -0800

    cmd/compile: replace TypeList with []*Type
    
    Good riddance to another one-off linked list type.
    
    Change-Id: Idf9926a701ab4da8a022be1d61f1257020d58fc5
    Reviewed-on: https://go-review.googlesource.com/20212
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 060a2bacb7a8f5d75cfba16719eabb25b1b91fd7
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Mar 4 15:21:49 2016 +1300

    cmd/internal/obj/ppc64: eliminate ~700 conversions by tweaking signatures
    
    This is mostly changing the opXXX helpers to take an int16 (matching Prog.As)
    argument and return a uint32. The only bit that's not completely trivial is
    passing -p.As to opirr to signal operating on a shifted constant, because AADD
    + ALAST overflows int16.
    
    Change-Id: I69133800bbe41c38fa4a89bbbf49823043b3419c
    Reviewed-on: https://go-review.googlesource.com/20182
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a162d11540365fc54ab0db7ad8e449e7094a7beb
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Mar 4 13:15:40 2016 +1100

    cmd/compile: post CL 20089 cleanups
    
    This CL addresses some issues noted during CL 20089.
    
    Change-Id: I4e91a8077c07a571ccc9c004278672eb951c5104
    Reviewed-on: https://go-review.googlesource.com/20181
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 14bf9c8c07f82c4eac22a3e0f15da5cfbc30fe61
Author: djherbis <djherbis@gmail.com>
Date:   Fri Jan 29 00:32:00 2016 -0800

    bufio: Reader.Peek returns partial results on ErrBufferFull
    
    The existing implementation returns nil, ErrBufferFull when n > len(b.buf),
    now it will return any data in the buffer and ErrBufferFull.
    
    Fixes #14121
    
    Change-Id: Ie52d32ccd80e4078ebfae6e75393c89675959ead
    Reviewed-on: https://go-review.googlesource.com/19091
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 7047742f125053438b81fb3c8d33e8ad462e981e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 3 17:38:14 2016 -0800

    cmd/compile: change esc.go to use nodeSeq
    
    Move a few local fields all the way to []*Node while I'm at it.
    
    Update #14473.
    
    Change-Id: Ib18360879839ac592f778cf1042f111bdf14add3
    Reviewed-on: https://go-review.googlesource.com/20197
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit def1e7276a7636c1eafafdee7e32f2bcbd27d685
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Mar 3 15:49:04 2016 -0800

    cmd/compile: remove unnecessary conversions
    
    Automated CL prepared by github.com/mdempsky/unconvert, except for
    reverting changes to ssa/rewritegeneric.go (generated file) and
    package big (vendored copy of math/big).
    
    Change-Id: I64dc4199f14077c7b6a2f334b12249d4a785eadd
    Reviewed-on: https://go-review.googlesource.com/20089
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 2aa2da295f47826032f3fd7b262d9ec00e919422
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 3 16:27:05 2016 -0800

    cmd/compile: convert dcl.go to nodeSeq
    
    Add new functions setNodeSeqNode, appendNodeSeq, appendNodeSeqNode.
    
    Passes toolstash -cmp.
    
    Change-Id: I6c1745b1108dea45a2c0d029b9de1917ae17a962
    Reviewed-on: https://go-review.googlesource.com/20196
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 867910ea170cad67ef929ae472f1e19052da7d7c
Author: Spencer Nelson <s@spenczar.com>
Date:   Wed Mar 2 15:29:30 2016 -0500

    cmd/vet: Use function signature to find format string index.
    
    cmd/vet's printf checker currently uses a hardcoded map of function
    names to expected positions of format strings. We can be a bit more
    precise than this by looking up the signature of the function, which
    helps when libraries implement functions like Errorf or Logf with
    extra arguments like log levels or error codes.
    
    Specifically, the format string param is assumed to be the last string
    parameter of the called function.
    
    Fixes #12294.
    
    Change-Id: Icf10ebb819bba91fa1c4109301417042901e34c7
    Reviewed-on: https://go-review.googlesource.com/20163
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit bf3909824ccf0c03e372d1a341792a8f783f03f7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 3 15:08:25 2016 -0800

    cmd/compile: convert cgen/gen/pgen and friends to nodeListSeq
    
    Added Seq method to nodeListIterator. Added new functions nodeSeqLen,
    nodeSeqFirst, nodeSeqSecond. Allow nil as source argument to setNodeSeq.
    
    Change-Id: Ifc1cd4d7207b7a125b3830c92c4d6d6f00eedd54
    Reviewed-on: https://go-review.googlesource.com/20195
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca56c590d4dfaa655d2355b382d6a950911f3263
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 3 14:11:17 2016 -0800

    cmd/compile: add setNodeSeq, and use it in bimport.go
    
    Also rewrite bexport.go to use nodeSeqIterate.
    
    The new setNodeSeq is a transitional generic function to set either a
    NodeList or a slice to either a NodeList or a slice.  This should permit
    us to flip fields from *NodeList to []*Node, or Nodes, without changing
    other code.
    
    Passes toolstash -cmp.
    
    Change-Id: I872cbfe45bc5f432595737c1f6da641c502b1ab6
    Reviewed-on: https://go-review.googlesource.com/20194
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d55a099e220ae2d1d9cee861e9750b9f92fcb4fe
Author: David du Colombier <0intro@gmail.com>
Date:   Thu Mar 3 19:45:24 2016 +0100

    cmd/compile: don't use duffcopy and duffzero on Plan 9
    
    The ssa compiler uses the duffcopy and duffzero functions,
    which rely on the MOVUPS instructions.
    
    However, this doesn't work on Plan 9, since floating point
    operations are not allowed in the note handler.
    
    This change disables the use of duffcopy and duffzero
    on Plan 9 in the ssa compiler.
    
    Updates #14605.
    
    Change-Id: I017f8ff83de00eabaf7e146b4344a863db1dfddc
    Reviewed-on: https://go-review.googlesource.com/20171
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 466c948b558cb2eca089577fda2995133531d4ef
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Mar 3 11:30:17 2016 -0800

    cmd/compile: add nodeSeqIterator interface
    
    I tried to write a program to convert *NodeList to Node, but ran into
    too many problem cases.  I'm backing off and trying a more iterative
    approach using interfaces.
    
    This CL adds an interface for iteration over either a *NodeList or a
    Nodes.  I changed typechecklist to use it, to show how it works.  After
    NodeList is eliminated, we can change the typechecklist parameter type
    to Nodes.
    
    Passes toolstash -cmp.
    
    Change-Id: I5c7593714b020d20868b99151b1e7cadbbdbc397
    Reviewed-on: https://go-review.googlesource.com/20190
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0c84c4f19cedd13445c64fcdc409b4821ff9a7d2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Mar 3 10:51:30 2016 -0500

    cmd/link: combine all string data into one symbol
    
    This CL introduces a mergestrings pass after the reachability
    analysis to combine all reachable go.string."..." character data
    symbols into a single symbol.
    
    Shrinks juju by 1.2mb (1.5%).
    Shrinks cmd/go by 0.5% when building without DWARF.
    No noticable effect on linker speed.
    
    Change-Id: I2ba3e60bf418f65766bda257f6ca9eea26d895b6
    Reviewed-on: https://go-review.googlesource.com/20165
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7e92c86df25b70f486b99ed6a10b623b9fd20de4
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Feb 26 13:03:11 2016 -0800

    cmd/compile: remove listsort
    
    The listsort function is no longer used, except in a test.  Change the
    test to use sort.Sort instead.
    
    Change-Id: Ib634705cc1bc3b1d8fc3795bd4ed2894e6abc284
    Reviewed-on: https://go-review.googlesource.com/19964
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 686fbdb3b0c228f4c990dbb6b2f2dbe1df4c7cfd
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 3 09:53:03 2016 -0800

    cmd/compile: make compilation deterministic, fixes toolstash
    
    Make sure we don't depend on map iterator order.
    
    Fixes #14600
    
    Change-Id: Iac0e0c8689f3ace7a4dc8e2127e2fd3c8545bd29
    Reviewed-on: https://go-review.googlesource.com/20158
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c03ed491fe8d11622a2ecac6bfc87da91879dfa8
Author: Keith Randall <khr@golang.org>
Date:   Wed Mar 2 15:18:40 2016 -0800

    cmd/compile: load some live values into registers before loop
    
    If we're about to enter a loop, load values which are live
    and will soon be used in the loop into registers.
    
    name                     old time/op    new time/op    delta
    BinaryTree17-8              2.80s ± 4%     2.62s ± 2%   -6.43%          (p=0.008 n=5+5)
    Fannkuch11-8                2.45s ± 2%     2.14s ± 1%  -12.43%          (p=0.008 n=5+5)
    FmtFprintfEmpty-8          49.0ns ± 1%    48.4ns ± 1%   -1.35%          (p=0.032 n=5+5)
    FmtFprintfString-8          160ns ± 1%     153ns ± 0%   -4.63%          (p=0.008 n=5+5)
    FmtFprintfInt-8             152ns ± 0%     150ns ± 0%   -1.57%          (p=0.000 n=5+4)
    FmtFprintfIntInt-8          252ns ± 2%     244ns ± 1%   -3.02%          (p=0.008 n=5+5)
    FmtFprintfPrefixedInt-8     223ns ± 0%     223ns ± 0%     ~     (all samples are equal)
    FmtFprintfFloat-8           293ns ± 2%     291ns ± 2%     ~             (p=0.389 n=5+5)
    FmtManyArgs-8               956ns ± 0%     936ns ± 0%   -2.05%          (p=0.008 n=5+5)
    GobDecode-8                7.18ms ± 0%    7.11ms ± 0%   -1.02%          (p=0.008 n=5+5)
    GobEncode-8                6.12ms ± 3%    6.07ms ± 1%     ~             (p=0.690 n=5+5)
    Gzip-8                      284ms ± 1%     284ms ± 0%     ~             (p=1.000 n=5+5)
    Gunzip-8                   40.8ms ± 1%    40.6ms ± 1%     ~             (p=0.310 n=5+5)
    HTTPClientServer-8         69.8µs ± 1%    72.2µs ± 4%     ~             (p=0.056 n=5+5)
    JSONEncode-8               16.1ms ± 2%    16.2ms ± 1%     ~             (p=0.151 n=5+5)
    JSONDecode-8               54.9ms ± 0%    57.0ms ± 1%   +3.79%          (p=0.008 n=5+5)
    Mandelbrot200-8            4.35ms ± 0%    4.39ms ± 0%   +0.85%          (p=0.008 n=5+5)
    GoParse-8                  3.56ms ± 1%    3.42ms ± 1%   -4.03%          (p=0.008 n=5+5)
    RegexpMatchEasy0_32-8      75.6ns ± 1%    75.0ns ± 0%   -0.83%          (p=0.016 n=5+4)
    RegexpMatchEasy0_1K-8       250ns ± 0%     252ns ± 1%   +0.80%          (p=0.016 n=4+5)
    RegexpMatchEasy1_32-8      75.0ns ± 0%    75.4ns ± 2%     ~             (p=0.206 n=5+5)
    RegexpMatchEasy1_1K-8       401ns ± 0%     398ns ± 1%     ~             (p=0.056 n=5+5)
    RegexpMatchMedium_32-8      119ns ± 0%     118ns ± 0%   -0.84%          (p=0.008 n=5+5)
    RegexpMatchMedium_1K-8     36.6µs ± 0%    36.9µs ± 0%   +0.91%          (p=0.008 n=5+5)
    RegexpMatchHard_32-8       1.95µs ± 1%    1.92µs ± 0%   -1.23%          (p=0.032 n=5+5)
    RegexpMatchHard_1K-8       58.3µs ± 1%    58.1µs ± 1%     ~             (p=0.548 n=5+5)
    Revcomp-8                   425ms ± 1%     389ms ± 1%   -8.39%          (p=0.008 n=5+5)
    Template-8                 65.5ms ± 1%    63.6ms ± 1%   -2.86%          (p=0.008 n=5+5)
    TimeParse-8                 363ns ± 0%     354ns ± 1%   -2.59%          (p=0.008 n=5+5)
    TimeFormat-8                363ns ± 0%     364ns ± 1%     ~             (p=0.159 n=5+5)
    
    Fixes #14511
    
    Change-Id: I1b79d2545271fa90d5b04712cc25573bdc94f2ce
    Reviewed-on: https://go-review.googlesource.com/20151
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 5be961a3521fe7f9cb345206337368351b645d5c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Mar 2 22:38:42 2016 -0500

    cmd/link: replace Autom linked list with slice
    
    Change-Id: I939129da0e71a7ccc61bec79515a34f0b1e59502
    Reviewed-on: https://go-review.googlesource.com/20162
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1661493c7394c694406c7c91fc2655b0599ad987
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Mar 2 22:28:05 2016 -0500

    cmd/link: replace LSym.Queue with a slice
    
    Change-Id: Idc95452088d23be8e18522209d98f789dfca070b
    Reviewed-on: https://go-review.googlesource.com/20161
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 596df2424d1304442dbb5f5aa4eab153013d4d50
Author: Caleb Spare <cespare@gmail.com>
Date:   Sun Feb 28 01:11:23 2016 -0800

    cmd/go: set GOPATH in list's Context
    
    Fixes #14547.
    
    Change-Id: Ic175ee8f7e65b9b99f1f47fbf267a2aba7c8fec7
    Reviewed-on: https://go-review.googlesource.com/20010
    Run-TryBot: Caleb Spare <cespare@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 033e3e106e6132b530759bf97f7b359b9897ae25
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Feb 27 19:47:43 2016 +0100

    fmt: optimize %x and %X formatting for byte slices and strings
    
    No extra buffering is needed to save the encoding
    since the left padding can be computed and written out
    before the encoding is generated.
    
    Add extra tests to both string and byte slice formatting.
    
    name                old time/op  new time/op  delta
    SprintfHexString-2   410ns ± 3%   194ns ± 3%  -52.60%  (p=0.000 n=20+19)
    SprintfHexBytes-2    431ns ± 3%   202ns ± 2%  -53.13%  (p=0.000 n=18+20)
    
    Change-Id: Ibca4316427c89f834e4faee61614493c7eedb42b
    Reviewed-on: https://go-review.googlesource.com/20097
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 71d13a8c01706c0196a843116d403fe8eb446130
Author: Keith Randall <khr@golang.org>
Date:   Wed Mar 2 20:54:41 2016 -0800

    cmd/compile: fix fieldtrack experiment
    
    The ODOTPTRs introduced in CL #19814 don't have field names,
    just offsets.  The fieldtrack experiment crashes when
    examining them.  Instead, just ignore them.  We'll never track
    these fields anyway.
    
    It would be nice to have the runtime type struct build in the
    compiler (like we do sudog, for example) so we could use its
    fieldnames.  Doesn't seem worth it just for this CL.
    
    Change-Id: I5e75024f5a8333eb7439543b3f466ea40213a1b9
    Reviewed-on: https://go-review.googlesource.com/20157
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 868fb9ff1d95f3f2f344c076ff2fafbb483e0631
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 2 20:32:40 2016 -0800

    cmd/compile: more lineno type conversions
    
    Change-Id: Ib0a116a78f61eafe88a0ea5dc6733750ae755fdf
    Reviewed-on: https://go-review.googlesource.com/20156
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 90cb1fdaf2eb0d1a7154b494fb3ea8b1c0177bdf
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Mar 2 21:24:04 2016 -0500

    cmd/link: add Minalign field to ld.Arch
    
    The new Minalign field sets the minimum alignment for all symbols.
    This is required for the upcoming s390x port which requires symbols
    be 2-byte aligned for efficient relative addressing.
    
    All preexisting architectures have Minalign set to 1 which means
    that this commit should have no effect.
    
    I tested values of 2, 4 and 8 on linux amd64 and the tests appear to
    pass. Increasing Minalign to 16 appears to break the runtime. I
    think this is due to assumptions made about the layout of module
    data.
    
    toolstash -cmp on linux amd64 shows no changes due to this commit.
    
    Resolves #14604
    
    Change-Id: I0fe042d52c4e4732eba5fabcd0c31102a2408764
    Reviewed-on: https://go-review.googlesource.com/20149
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b0f4ee533a875c258ac1030ee382f0ffe2de304b
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Mar 2 20:08:18 2016 +0900

    net: deduplicate TCP socket code
    
    This change consolidates functions and methods related to TCPAddr,
    TCPConn and TCPListener for maintenance purpose, especially for
    documentation. Also refactors Dial error code paths.
    
    The followup changes will update comments and examples.
    
    Updates #10624.
    
    Change-Id: I3333ee218ebcd08928f9e2826cd1984d15ea153e
    Reviewed-on: https://go-review.googlesource.com/20009
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 533f30b924ce150eddf0bea6746bc88631e4dde8
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Mar 2 17:40:18 2016 -0800

    cmd/compile: exit early if oldname doesn't find a name
    
    Change-Id: I59ce1b40bc3472cc92a9a0a9fbd32342e0b945ad
    Reviewed-on: https://go-review.googlesource.com/20152
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c41608f4ac868047dcab0de73cb96e831db264be
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Mar 2 17:34:42 2016 -0800

    cmd/compile: remove more superfluous int(lineno) conversions
    
    Change-Id: Ia3e5d62b9d38a6c356baec8eb88b2bdabff5820f
    Reviewed-on: https://go-review.googlesource.com/20150
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>

commit 8a83d36b8e4aeed56f85e6b26832b6a7ed8951a5
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Mar 2 12:21:53 2016 -0800

    compress/bzip2: refactor unit tests
    
    Over the years as more bugs were discovered with the bzip2 library,
    new Tests were appended the unit tests and the tests became gnarly.
    
    Clean up the tests to be more consistent with modern Go style in
    addition to coalescing common tests into a general version that
    iterates over a list of input/output pairs. This has the advantage that
    the input, output, and test code are all in the same area, rather than
    being sprawled around the test file.
    
    There is no loss of test coverage.
    
    Change-Id: I377ed89378f0b89763d4a56ffc37b22d9c2a369e
    Reviewed-on: https://go-review.googlesource.com/20133
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit fcb23249b2ac65a882fdbbeeb907fdbb5dffdb79
Author: Burcu Dogan <jbd@google.com>
Date:   Wed Mar 2 18:12:30 2016 -0800

    net: skip TestLookupPort on android with netgo
    
    /etc/services is not available on Android. The pure Go implementation
    of LookupPort will never succeed on Android. Skipping the test.
    
    Updates #14576.
    
    Change-Id: I707ac24aea3f988656b95b1816ee5c9690106985
    Reviewed-on: https://go-review.googlesource.com/20154
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0f9cc465fa88c41fc8bf3c36d4016f6fa1e97bf2
Author: Rob Pike <r@golang.org>
Date:   Thu Mar 3 13:01:09 2016 +1100

    math: delete unused function sqrtC
    
    It appears to be a trivial dreg. Unreferenced. Gone.
    
    Change-Id: I4a5ceed48e84254bc8a07fdb04487a18a0edf965
    Reviewed-on: https://go-review.googlesource.com/20122
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit a40b27e304fc2cbfed84c8c253128d470be0b8c8
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Mar 2 18:03:50 2016 -0800

    cmd/compile: eliminate arch-specific typedefs
    
    Arch backends already provide us Widthint and Widthptr, which is ample
    information to figure out how to define the universal "int", "uint",
    and "uintptr" types.  No need for providing a generic typedef
    mechanism beyond that.
    
    Change-Id: I35c0c17a67c80605a9208b93d77d6960b2cbb17d
    Reviewed-on: https://go-review.googlesource.com/20153
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0024101b2d4e2f3f6b78b6494235c159bc0873ef
Author: Chris Broadfoot <cbro@golang.org>
Date:   Wed Mar 2 16:16:29 2016 -0800

    doc: add link to 1.6 release notes on golang.org/project page
    
    Fixes #14378.
    
    Change-Id: I680b523c01576e42f1dbda9131d1f6bb99b3668b
    Reviewed-on: https://go-review.googlesource.com/20138
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a3c258a56763c9d697ab3b95e81b8df68599014a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Mar 2 07:59:49 2016 -0500

    cmd/link: pack LSym boolean attributes
    
    No performance improvement, but possibly more readable.
    
    Linking juju:
            tip:  real 0m5.470s user 0m6.131s
            this: real 0m5.392s user 0m6.087s
    
    Change-Id: I578e94fbe6c11b19d79034c33b3db31d9689d439
    Reviewed-on: https://go-review.googlesource.com/20108
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>

commit d7cdf66978935664d783ff02d06c6c0856ef4bec
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 2 14:29:44 2016 -0800

    cmd/link: stop generating garbage in elfhash
    
    All callers already had strings. No need to generate byte slice copies
    to work on bytes.
    
    Performance not measured, but probably helps at least a bit.
    
    Change-Id: Iec3230b69724fac68caae7aad46f2ce1504e82e5
    Reviewed-on: https://go-review.googlesource.com/20136
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 03f3bfc4600321ff5bd15cfc555dbe322ae85b9f
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed Mar 2 16:58:40 2016 +1100

    misc/cgo/test: rewrite windows version of mysleep
    
    Latest version of gcc (tdm-1) 5.1.0 refuses to compile our code
    on windows/386 (see issue for details). Rewrite the code.
    
    Fixes #14328
    
    Change-Id: I70f4f063282bd2958cd2175f3974369dd49dd8dc
    Reviewed-on: https://go-review.googlesource.com/20008
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4b92cd4ec101e8d69e01e9ed5f3a6db12e2a55a0
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Mar 2 15:59:38 2016 -0500

    cmd/link: make Allsym a slice
    
    Looks a tiny bit faster, which is a surprise. Probably noise.
    Motivation is making the LSym structure a little easier to understand.
    
    Linking juju, best of 10:
    
    before: real 0m4.811s user 0m5.582s
    after:  real 0m4.611s user 0m5.267s
    
    Change-Id: Idbedaf4a6e6e199036a1bbb6760e98c94ed2c282
    Reviewed-on: https://go-review.googlesource.com/20142
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 45983827248f399426839b1789710120086dd4f1
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Oct 22 18:56:45 2015 -0700

    cmd/compile/internal/gc: export & import function bodies, but don't hook up
    
    Function bodies are not yet hooked up because the node structure is not
    100% correct. This commit establishes that we can correctly write bodies
    out and read them in again.
    
    - export and import all exported inlined function bodies:
      (export GO_GCFLAGS="-newexport"; sh all.bash) working
    - inlined functions are not yet hooked up (just dropped on the floor)
    - improved tracing output and error messages
    - make mkbuiltin.go work for both textual and binary export data
      so we can run tests with the new format
    
    Change-Id: I70dc4de419df1b604389c3747041d6dba8730b0b
    Reviewed-on: https://go-review.googlesource.com/16284
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c0f7195d626a8391da969d9fab4e77cd2614826e
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Mar 2 15:14:02 2016 -0500

    cmd/link: replace custom hashmap in DWARF writer
    
    Also stop creating a map for each symbol, as it does not seem to help.
    
    Linking juju:
            tip:  real 0m5.470s user 0m6.131s
            this: real 0m4.811s user 0m5.582s
    
    Change-Id: Ib3d931c996396a00942581770ff32df1eb8d6615
    Reviewed-on: https://go-review.googlesource.com/20140
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 97b2295f06174f7cd3e8ad121f13110a4e866f77
Author: David Chase <drchase@google.com>
Date:   Wed Mar 2 15:49:55 2016 -0500

    cmd/compile: trunc(and(x,K)) rewrite to trunc(x) for some K
    
    uint8(s.b & 0xff) ought to produce same code as uint8(s.b)
    but it did not.  RLH found this one looking for moles to
    whack in the GC code.
    
    Change-Id: I883d68ec7a5746d652712be84a274a11256b3b33
    Reviewed-on: https://go-review.googlesource.com/20141
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3a880bae918b0f86989aaaecb4d51fdf9459f53e
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Mar 2 12:49:37 2016 -0800

    cmd/compile: remove missed int(lineno) conversions
    
    Follow-up to https://go-review.googlesource.com/20131 .
    
    Change-Id: Id8351fa39f24e6ea488cdbfcb855b69a31ffff31
    Reviewed-on: https://go-review.googlesource.com/20134
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 83765d135fd0e06b8871123df8151d7970b32f29
Author: Martin Möhrmann <martisch@uos.de>
Date:   Wed Mar 2 20:31:20 2016 +0100

    fmt: optimize string truncation
    
    Count only the runes up to the requested precision
    to decide where to truncate a string.
    
    Change the loop within truncate to need fewer jumps.
    
    name                     old time/op  new time/op  delta
    SprintfTruncateString-2   188ns ± 3%   155ns ± 3%  -17.43%  (p=0.000 n=20+20)
    
    Change-Id: I17ca9fc0bb8bf7648599df48e4785251bbc31e99
    Reviewed-on: https://go-review.googlesource.com/20098
    Reviewed-by: Rob Pike <r@golang.org>

commit 2faf5bca2e23be26fd0fc3a373bee7a354813861
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Mar 2 11:30:29 2016 -0800

    cmd/compile: introduce linestr helper to simplify line reporting
    
    Change-Id: Ic9ca792b55cc4ebd0ac6cfa2fbdb58030893bacd
    Reviewed-on: https://go-review.googlesource.com/20132
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6969d9bf038deebefa556b90e7467b8636c16e91
Author: Russ Cox <rsc@golang.org>
Date:   Wed Mar 2 12:32:38 2016 -0500

    runtime/pprof: sort counted profiles by count
    
    This is especially helpful in programs with very large numbers of goroutines:
    the bulk of the goroutines will show up at the top.
    
    Before:
            1 @ 0x86ab8 0x86893 0x82164 0x8e7ce 0x7b798 0x5b871
            #       0x86ab8 runtime/pprof.writeRuntimeProfile+0xb8          /Users/rsc/go/src/runtime/pprof/pprof.go:545
            #       0x86893 runtime/pprof.writeGoroutine+0x93               /Users/rsc/go/src/runtime/pprof/pprof.go:507
            #       0x82164 runtime/pprof.(*Profile).WriteTo+0xd4           /Users/rsc/go/src/runtime/pprof/pprof.go:236
            #       0x8e7ce runtime/pprof_test.TestGoroutineCounts+0x15e    /Users/rsc/go/src/runtime/pprof/pprof_test.go:603
            #       0x7b798 testing.tRunner+0x98                            /Users/rsc/go/src/testing/testing.go:473
    
            1 @ 0x2d373 0x2d434 0x560f 0x516b 0x7cd42 0x7b861 0x2297 0x2cf90 0x5b871
            #       0x7cd42 testing.RunTests+0x8d2  /Users/rsc/go/src/testing/testing.go:583
            #       0x7b861 testing.(*M).Run+0x81   /Users/rsc/go/src/testing/testing.go:515
            #       0x2297  main.main+0x117         runtime/pprof/_test/_testmain.go:72
            #       0x2cf90 runtime.main+0x2b0      /Users/rsc/go/src/runtime/proc.go:188
    
            10 @ 0x2d373 0x2d434 0x560f 0x516b 0x8e5b6 0x5b871
            #       0x8e5b6 runtime/pprof_test.func1+0x36   /Users/rsc/go/src/runtime/pprof/pprof_test.go:582
    
            50 @ 0x2d373 0x2d434 0x560f 0x516b 0x8e656 0x5b871
            #       0x8e656 runtime/pprof_test.func3+0x36   /Users/rsc/go/src/runtime/pprof/pprof_test.go:584
    
            40 @ 0x2d373 0x2d434 0x560f 0x516b 0x8e606 0x5b871
            #       0x8e606 runtime/pprof_test.func2+0x36   /Users/rsc/go/src/runtime/pprof/pprof_test.go:583
    
    After:
    
            50 @ 0x2d373 0x2d434 0x560f 0x516b 0x8ecc6 0x5b871
            #       0x8ecc6 runtime/pprof_test.func3+0x36   /Users/rsc/go/src/runtime/pprof/pprof_test.go:584
    
            40 @ 0x2d373 0x2d434 0x560f 0x516b 0x8ec76 0x5b871
            #       0x8ec76 runtime/pprof_test.func2+0x36   /Users/rsc/go/src/runtime/pprof/pprof_test.go:583
    
            10 @ 0x2d373 0x2d434 0x560f 0x516b 0x8ec26 0x5b871
            #       0x8ec26 runtime/pprof_test.func1+0x36   /Users/rsc/go/src/runtime/pprof/pprof_test.go:582
    
            1 @ 0x2d373 0x2d434 0x560f 0x516b 0x7cd42 0x7b861 0x2297 0x2cf90 0x5b871
            #       0x7cd42 testing.RunTests+0x8d2  /Users/rsc/go/src/testing/testing.go:583
            #       0x7b861 testing.(*M).Run+0x81   /Users/rsc/go/src/testing/testing.go:515
            #       0x2297  main.main+0x117         runtime/pprof/_test/_testmain.go:72
            #       0x2cf90 runtime.main+0x2b0      /Users/rsc/go/src/runtime/proc.go:188
    
            1 @ 0x87128 0x86f03 0x82164 0x8ee30 0x7b798 0x5b871
            #       0x87128 runtime/pprof.writeRuntimeProfile+0xb8          /Users/rsc/go/src/runtime/pprof/pprof.go:566
            #       0x86f03 runtime/pprof.writeGoroutine+0x93               /Users/rsc/go/src/runtime/pprof/pprof.go:528
            #       0x82164 runtime/pprof.(*Profile).WriteTo+0xd4           /Users/rsc/go/src/runtime/pprof/pprof.go:236
            #       0x8ee30 runtime/pprof_test.TestGoroutineCounts+0x150    /Users/rsc/go/src/runtime/pprof/pprof_test.go:603
            #       0x7b798 testing.tRunner+0x98                            /Users/rsc/go/src/testing/testing.go:473
    
    Change-Id: I43de9eee2d96f9c46f7b0fbe099a0571164324f5
    Reviewed-on: https://go-review.googlesource.com/20107
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b83f3972fe9e6ac0fdaadce1fd536e2bc9a16e80
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Mar 2 11:01:25 2016 -0800

    cmd/compile: use int32 for line numbers consistently
    
    - removed lots of unnecessary int(x) casts
    - removed parserline() - was inconsistently used anyway
    - minor simplifications in dcl.go
    
    Change-Id: Ibf7de679eea528a31c9692ef1c76a1d9b3239211
    Reviewed-on: https://go-review.googlesource.com/20131
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 053aef4f1bcaf118210fca7d72f141cb8d260aeb
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Mar 2 09:20:38 2016 -0800

    go/ast: fix typo in comment
    
    Change-Id: I719231466286b3c0135314388a7c560ef44d7c35
    Reviewed-on: https://go-review.googlesource.com/20130
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 37c28759ca46cf381a466e32168a793165d9c9e9
Author: Tamir Duberstein <tamird@gmail.com>
Date:   Fri Feb 26 14:17:29 2016 -0500

    crypto/tls: check errors from (*Conn).writeRecord
    
    This promotes a connection hang during TLS handshake to a proper error.
    This doesn't fully address #14539 because the error reported in that
    case is a write-on-socket-not-connected error, which implies that an
    earlier error during connection setup is not being checked, but it is
    an improvement over the current behaviour.
    
    Updates #14539.
    
    Change-Id: I0571a752d32d5303db48149ab448226868b19495
    Reviewed-on: https://go-review.googlesource.com/19990
    Reviewed-by: Adam Langley <agl@golang.org>

commit 1012892f1e6329d5581ad82a20ababa5548d8dc2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Mar 2 10:01:01 2016 -0500

    cmd/link: C is gone, remove check for Go calling C
    
    It looks like the compiler still uses the Cfunc flag for functions
    marked as //go:systemstack, but if I'm reading this right, that
    doesn't apply here and the linker no longer needs Cfunc.
    
    Change-Id: I63b9192c2f52f41401263c29dc8dfd8be8a901a1
    Reviewed-on: https://go-review.googlesource.com/20105
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 8b360d5fdaa2508dd37b1e0098ad16c9486c3617
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Mar 2 03:22:00 2016 -0800

    compress/bzip2: prevent zero-length Huffman codes
    
    Unlike RFC 1951 (DEFLATE), bzip2 does not use zero-length Huffman codes
    to indicate that the symbol is missing. Instead, bzip2 uses a sparse
    bitmap to indicate which symbols are present. Thus, it is undefined what
    happens when a length of zero is used. Thus, fix the parsing logic so that
    the length cannot ever go below 1-bit similar to how the C logic does things.
    
    To confirm that the C bzip2 utility chokes on this data:
            $ echo "425a6836314159265359b1f7404b000000400040002000217d184682ee48
            a70a12163ee80960" | xxd -r -p | bzip2 -d
    
            bzip2: Data integrity error when decompressing
    
    For reference see:
            bzip2-1.0.6/decompress.c:320
    
    Change-Id: Ic1568f8e7f80cdea51d887b4d712cc239c2fe85e
    Reviewed-on: https://go-review.googlesource.com/20119
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 1c94e7276e0d5e573d5ce7071a2b9d667e19f9f4
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Tue Mar 1 12:41:52 2016 +0530

    net: fix vet warnings
    
    Updates #11041
    
    Change-Id: I12c20beab75d7981efe470eb418e4b58dc8eb066
    Reviewed-on: https://go-review.googlesource.com/20002
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 132d7ae99e2996349515a41832194a0d5c15725f
Merge: 29257f5 0d1a98e
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 2 11:05:13 2016 -0500

    [dev.garbage] Merge branch 'master' into dev.garbage
    
    Change-Id: I8327de2ac5eeb56d7f0371776a0d9131e3204f12

commit 0d1a98e21080f7471b8a9306e1ad0ef55d2727ca
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Feb 29 17:50:00 2016 -0900

    cmd/link: rename Hide to Hidden and make a bool
    
    Change-Id: Ic99bd63c96b1eba5cc2b5cd2be3a575890a02996
    Reviewed-on: https://go-review.googlesource.com/20103
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3601a1e77d7fdd4c98c3dbd6f1bfa0028bc24fdd
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Feb 29 13:07:50 2016 -0900

    cmd/link: write DWARF PC table without seeking
    
    This per-symbol table was written with the strategy:
    
            1. record offset and write fake header
            2. write body
            3. seek back to fake header
            4. write real header
    
    This CL collects the per-symbol body into a []byte, then writes the
    real header followed by the body to the output file. This saves two
    seeks per-symbol and overwriting the fake header.
    
    Small performance improvement (3.5%) in best-of-ten links of godoc:
    
    tip:  real 0m1.132s user 0m1.256s
    this: real 0m1.090s user 0m1.210s
    
    I'm not sure if the performance measured here alone justifies it,
    but I think this is an easier to read style of code.
    
    Change-Id: I1663901eb7c2ee330591b8b6550cdff0402ed5dc
    Reviewed-on: https://go-review.googlesource.com/20074
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 021e0c5f1fa3e67912f4084ec7ad2381c5bd71d5
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Feb 29 12:40:23 2016 -0900

    cmd/link: add array append version of methods
    
    Used by DWARF writer changes in a followup CL.
    
    Change-Id: I6ec40dcfeaba909d9b8f6cf2603bc5b85c1fa873
    Reviewed-on: https://go-review.googlesource.com/20073
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 62ac107a34823a692957c53662650a208cbe3151
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 1 15:59:15 2016 -0800

    cmd/compile: some SSA cleanup
    
    Do some easy TODOs.
    Move a bunch of other TODOs into bugs.
    
    Change-Id: Iaba9dad6221a2af11b3cbcc512875f4a85842873
    Reviewed-on: https://go-review.googlesource.com/20114
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 3afbb690d5dd87949c87a8dd8d88cb4f3489f644
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Mar 2 00:46:36 2016 +0000

    net/url: fix parsing of URLs ending in question mark
    
    Fixes parsing regression from https://golang.org/cl/19931 which
    added the URL.ForceQuery field.
    
    Fixes #14573
    
    Change-Id: I89575cab3f778b1bf78b2389623c866450b26943
    Reviewed-on: https://go-review.googlesource.com/20116
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 37c2972772e3e62c9822afb34c80ff2bc2c29c22
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Mar 1 16:37:20 2016 -0800

    cmd/compile: give SymFlags type to Sym flags
    
    Change-Id: Ifa65a35418c2b5a2c517c0d9bbe37f472091e759
    Reviewed-on: https://go-review.googlesource.com/20115
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a8d4463e50fb67448981a5c36a8fd6cb0da5c86f
Author: Marvin Stenger <marvin.stenger94@gmail.com>
Date:   Tue Mar 1 21:18:56 2016 +0100

    cmd/vet: polish output of shadow test
    
    This commit modifies the style of a error message in case of -shadow.
    
    Previously such a message would look like:
    foo.go:42: declaration of err shadows declaration at shadow.go:13:
    
    Changes of the commit include highlighting the variable name and
    removing the ": "(space intended) at the end of the line:
    foo.go:42: declaration of "err" shadows declaration at shadow.go:13
    
    Fixes #14585.
    
    Change-Id: Ia6a6bf396668dcba9a24f025a08d8826db31f434
    Reviewed-on: https://go-review.googlesource.com/20093
    Reviewed-by: Rob Pike <r@golang.org>

commit 5fea2ccc77eb50a9704fa04b7c61755fe34e1d95
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 1 23:21:55 2016 +0000

    all: single space after period.
    
    The tree's pretty inconsistent about single space vs double space
    after a period in documentation. Make it consistently a single space,
    per earlier decisions. This means contributors won't be confused by
    misleading precedence.
    
    This CL doesn't use go/doc to parse. It only addresses // comments.
    It was generated with:
    
    $ perl -i -npe 's,^(\s*// .+[a-z]\.)  +([A-Z]),$1 $2,' $(git grep -l -E '^\s*//(.+\.)  +([A-Z])')
    $ go test go/doc -update
    
    Change-Id: Iccdb99c37c797ef1f804a94b22ba5ee4b500c4f7
    Reviewed-on: https://go-review.googlesource.com/20022
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Dave Day <djd@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8b4deb448e587802f67930b765c9598fc8cd36e5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Mar 1 14:52:18 2016 -0800

    cmd/compile: fix OADDSTR buffer size calculation
    
    The size calculation has been wrong since this code was first committed
    in https://golang.org/cl/3120.  The effect was that the compiler always
    allocated a temporary buffer on the stack for a non-escaping string
    concatenation.  This turns out to make no practical difference, as the
    compiler always allocates a buffer of the same size (32 bytes) and the
    runtime only uses the temporary buffer if the concatenated strings
    fit (check is in rawstringtmp in runtime/string.go).
    
    The effect of this change is to avoid generating a temporary buffer on
    the stack that will not be used.
    
    Change-Id: Id632bfe3d6c113c9934c018a2dd4bcbf1784a63d
    Reviewed-on: https://go-review.googlesource.com/20112
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 88e18032bd76656afcf246c1a252e04cf462b41e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Mar 1 15:17:34 2016 -0800

    cmd/compile: s/flag_race/instrumenting/ in OCONVNOP check
    
    This check seems to apply to all code instrumentation, not just -race.
    
    Fixes #14589.
    
    Change-Id: I16ae07749ede7c1e6ed06f472711638d195034ac
    Reviewed-on: https://go-review.googlesource.com/20113
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Marvin Stenger <marvin.stenger94@gmail.com>

commit 519474451a44b861e54466998a893a173bd54c4b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Mar 1 22:57:46 2016 +0000

    all: make copyright headers consistent with one space after period
    
    This is a subset of https://golang.org/cl/20022 with only the copyright
    header lines, so the next CL will be smaller and more reviewable.
    
    Go policy has been single space after periods in comments for some time.
    
    The copyright header template at:
    
        https://golang.org/doc/contribute.html#copyright
    
    also uses a single space.
    
    Make them all consistent.
    
    Change-Id: Icc26c6b8495c3820da6b171ca96a74701b4a01b0
    Reviewed-on: https://go-review.googlesource.com/20111
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8fd7c11d594c28d359839e4e6d2727aab5609c80
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Mar 1 14:47:26 2016 -0800

    cmd/compile: delete unused lexer tokens, replace with LOPER
    
    Also: Use same ordering of tokens in the various tables/maps.
    
    Change-Id: Ief84c6ca3da36213ace6b2c10b513e2ca16318ab
    Reviewed-on: https://go-review.googlesource.com/20110
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 59681802ad3af66f86b9526e0e1c985e1485d1f5
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 1 13:47:48 2016 -0800

    cmd/compile: remove _ssa print trigger
    
    SSA is a real compiler now, don't trigger on function names.
    
    Change-Id: Iaf6dd78248c1b6ca2630275bd59f7ea7b7576497
    Reviewed-on: https://go-review.googlesource.com/20088
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a6fb2aede7c8d47b4d913eb83fa45bbeca76c433
Merge: 998aaf8 9d854fd
Author: Gerrit Code Review <noreply-gerritcodereview@google.com>
Date:   Tue Mar 1 21:36:45 2016 +0000

    Merge "Merge branch 'dev.ssa' into mergebranch"

commit 9d854fd44ae669f60c15133a4d2ce407ea2bccc4
Merge: dd0a128 6b3462c
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 1 12:50:17 2016 -0800

    Merge branch 'dev.ssa' into mergebranch
    
    Merge dev.ssa branch back into master.
    
    Change-Id: Ie6fac3f8d355ab164f934415fe4fc7fcb8c3db16

commit 998aaf8a64b7d90269815a2ae9d778da519d0a87
Author: Rob Pike <r@golang.org>
Date:   Tue Mar 1 20:54:58 2016 +1100

    cmd/vet: add a README explaining the criteria for new checks
    
    Correctness, Frequency, Precision.
    
    Change-Id: I7f202c220aef8512d611dc04a4370b4a237f217c
    Reviewed-on: https://go-review.googlesource.com/20003
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 6b3462c784df961f22eea0c39490b38093086b83
Author: David Chase <drchase@google.com>
Date:   Sat Feb 27 11:54:52 2016 -0500

    [dev.ssa] cmd/compile: adjust branch likeliness for calls/loops
    
    Static branch predictions (which guide block ordering) are
    adjusted based on:
    
    loop/not-loop     (favor looping)
    abnormal-exit/not (avoid panic)
    call/not-call     (avoid call)
    ret/default       (treat returns as rare)
    
    This appears to make no difference in performance of real
    code, meaning the compiler itself.  The earlier version of
    this has been stripped down to help make the cost of this
    only-aesthetic-on-Intel phase be as cheap as possible (we
    probably want information about inner loops for improving
    register allocation, but because register allocation follows
    close behind this pass, conceivably the information could be
    reused -- so we might do this anyway just to normalize
    output).
    
    For a ./make.bash that takes 200 user seconds, about .75
    second is reported in likelyadjust (summing nanoseconds
    reported with -d=ssa/likelyadjust/time ).
    
    Upstream predictions are respected.
    Includes test, limited to build on amd64 only.
    Did several iterations on the debugging output to allow
    some rough checks on behavior.
    Debug=1 logging notes agree/disagree with earlier passes,
    allowing analysis like the following:
    
    Run on make.bash:
    GO_GCFLAGS=-d=ssa/likelyadjust/debug \
       ./make.bash >& lkly5.log
    
    grep 'ranch prediction' lkly5.log | wc -l
       78242 // 78k predictions
    
    grep 'ranch predi' lkly5.log | egrep -v 'agrees with' | wc -l
       29633 // 29k NEW predictions
    
    grep 'disagrees' lkly5.log | wc -l
         444 // contradicted 444 times
    
    grep '< exit' lkly5.log | wc -l
       10212 // 10k exit predictions
    
    grep '< exit' lkly5.log | egrep 'disagrees' | wc -l
           5 // 5 contradicted by previous prediction
    
    grep '< exit' lkly5.log | egrep -v 'agrees' | wc -l
         702 // 702-5 redundant with previous prediction
    
    grep '< call' lkly5.log | egrep -v 'agrees' | wc -l
       16699 // 16k new call predictions
    
    grep 'stay in loop' lkly5.log | egrep -v 'agrees' | wc -l
        3951 // 4k new "remain in loop" predictions
    
    Fixes #11451.
    
    Change-Id: Iafb0504f7030d304ef4b6dc1aba9a5789151a593
    Reviewed-on: https://go-review.googlesource.com/19995
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9ace455e78d7c00925f35877e432dfa3768f13f3
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 1 10:58:06 2016 -0800

    cmd/compile/internal/ssa: cleanup godocs
    
    Add a blank line before the "package ssa" lines so the "autogenerated
    don't edit" comments don't end up in godoc output.
    
    Change-Id: I82bf90d52d426ce1a8e21483fc8f47b3689259c7
    Reviewed-on: https://go-review.googlesource.com/20086
    Reviewed-by: Keith Randall <khr@golang.org>

commit dd0a128a02c4894f2c17ab886852d6bd10c6c721
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Feb 29 10:41:45 2016 -0900

    cmd/link: make rddataBufMax a const
    
    Change-Id: I1ece7463d35efba0e8d2b1e61727dd25283ff720
    Reviewed-on: https://go-review.googlesource.com/20059
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e197f467d51318305439610d44af0e20dae7062f
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Feb 29 19:29:04 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: simplify boolean phis
    
    * Decreases the generated code slightly.
    * Similar to phiopt pass from gcc, except it only handles
    booleans. Handling Eq/Neq had no impact on the generated code.
    
    name       old time/op     new time/op     delta
    Template       453ms ± 4%      451ms ± 4%    ~           (p=0.468 n=24+24)
    GoTypes        1.55s ± 1%      1.55s ± 2%    ~           (p=0.287 n=24+25)
    Compiler       6.53s ± 2%      6.56s ± 1%  +0.46%        (p=0.050 n=23+23)
    MakeBash       45.8s ± 2%      45.7s ± 2%    ~           (p=0.866 n=24+25)
    
    name       old text-bytes  new text-bytes  delta
    HelloSize       676k ± 0%       676k ± 0%    ~     (all samples are equal)
    CmdGoSize      8.07M ± 0%      8.07M ± 0%  -0.03%        (p=0.000 n=25+25)
    
    Change-Id: Ia62477b7554127958a14cb27f85849b095d63663
    Reviewed-on: https://go-review.googlesource.com/20090
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1f6e9e36b0aba3d2459c80b2c8e905d9cc57f7ce
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Mar 1 13:39:47 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: distribute multiplication into addition
    
    * This is a very basic form of straight line strength reduction.
    * Removes one multiplication from a[b].c++; a[b+1].c++
    * It increases pressure on the register allocator because
    CSE creates more copies of the multiplication sizeof(a[0])*b.
    
    Change-Id: I686a18e9c24cc6f8bdfa925713afed034f7d36d0
    Reviewed-on: https://go-review.googlesource.com/20091
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit e96b232993fa8edb478f32041e08e5cf5c74395d
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Mon Feb 15 17:01:26 2016 +0300

    [dev.ssa] cmd/compile: promote byte/word operation
    
    Writing to low 8/16 bits of register creates false dependency
    Generate 32-bit operations when possible.
    
    Change-Id: I8eb6c1c43a66424eec6baa91a660bceb6b80d1d3
    Reviewed-on: https://go-review.googlesource.com/19506
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ac006ad1034b6552e97fcc5f3400810380e245c8
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Mar 1 00:15:27 2016 -0800

    cmd/compile: change defaultlit2's force param to bool
    
    Change-Id: I5546c4e8092ef61648cdae9c04288bb7d6f32476
    Reviewed-on: https://go-review.googlesource.com/20084
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 33c0ef2de3ba30a70b20433b14c45ccb06d02222
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Feb 27 20:55:50 2016 +0100

    fmt: make identification of string arguments consistent
    
    Use only reflect.TypeOf to detect if argument is a string.
    
    The wasString return is only needed in doPrint with the 'v' verb.
    This type of string detection is handled correctly by reflect.TypeOf
    which is used already in doPrint for identifying a string argument.
    
    Remove now obsolete wasString computations and return values.
    
    Change-Id: Iea2de7ac0f5c536a53eec63f7e679d628f5af8dc
    Reviewed-on: https://go-review.googlesource.com/19976
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 8ad027c0c401a5b2d58679f8dac2b4c4f68c8ba0
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Feb 29 21:48:15 2016 -0800

    go/types: nicer shift error message
    
    Updates #13940.
    
    Change-Id: I41974c292dd981d82ac03b9b8b406713445362c3
    Reviewed-on: https://go-review.googlesource.com/20081
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 86235d5dd7b2dbbe3ec94f48276af96c7ed78a5a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Feb 29 22:01:38 2016 -0800

    go/constant: fix typos in MakeFromLiteral docs
    
    Change-Id: I99c737415a082df883a9c12cdb43bdd5a1b9a8ad
    Reviewed-on: https://go-review.googlesource.com/20082
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 35dd2ed58d281df6542fa0fb5a884b9c48cdaac9
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Feb 29 20:20:13 2016 -0800

    cmd/compile: give mparith{2,3}.go files more meaningful names
    
    Also, relocate related const and type definitions from go.go.
    
    Change-Id: Ieb9b672da8dd510ca67022b4f7ae49a778a56579
    Reviewed-on: https://go-review.googlesource.com/20080
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Keith Randall <khr@golang.org>

commit a6c95ae1df496acd05ef4302b23555baf228f137
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Feb 29 20:07:09 2016 -0800

    cmd/compile: remove some unnecessary EType/int conversions
    
    Change-Id: I2d8efef333f2441da6742e125e23ff57c9853ebd
    Reviewed-on: https://go-review.googlesource.com/20078
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 55e7636f9c251f2dbff3daa1924071bc11df28a8
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Feb 29 20:11:33 2016 -0800

    cmd/compile: remove some unused consts from the old yacc parser
    
    Change-Id: I42f370b987fcc85201f7aaa055b9e58ee9b9a99e
    Reviewed-on: https://go-review.googlesource.com/20079
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 50674532719cad7bbdbcce5027f3510633eeed73
Author: nwidger <niels.widger@gmail.com>
Date:   Sun Feb 28 08:51:06 2016 -0500

    doc: update release tag in source directions to go1.6
    
    Fixes #14371
    
    Change-Id: I8e9e4b2b89083f5a947e791c011912fdf365a11e
    Reviewed-on: https://go-review.googlesource.com/19996
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 6a8a9da572883d7aae7e4618ef2713c716e4edd7
Author: Keith Randall <khr@golang.org>
Date:   Sat Feb 27 17:49:31 2016 -0800

    [dev.ssa] cmd/compile: Make PPARAMOUT variables SSAable
    
    Add writeback code to each return location which copies
    the final result back to the correct stack location.
    
    Cgo plays tricky games by taking the address of a
    in f(a int) (b int) and then using that address to
    modify b.  So for cgo-generated Go code, disable the
    SSAing of output args.
    
    Update #14511
    
    Change-Id: I95cba727d53699d31124eef41db0e03935862be9
    Reviewed-on: https://go-review.googlesource.com/19988
    Reviewed-by: Todd Neal <todd@tneal.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit eaf5235f984080d592dbc88d6e4ad4e246e2f3b2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Feb 29 10:05:46 2016 -0800

    misc/cgo/testsanitizers: don't run tsan tests on old clang
    
    Fixes #14570.
    
    Change-Id: Ief84a14585bfc209e38cdf15702c2f54ba759714
    Reviewed-on: https://go-review.googlesource.com/20057
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit d3b00a8cc463267b24ade4cf57aafdd02440e19c
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Mon Feb 29 11:49:49 2016 +0200

    cmd/link: batch writing of bytes
    
    In best of 10, linking cmd/go shows a ~10% improvement.
    
    tip:              real  0m1.152s user  0m1.005s
    this:             real  0m1.065s user  0m0.924s
    
    Change-Id: I303a20b94332feaedc1033c453247a0e4c05c843
    Reviewed-on: https://go-review.googlesource.com/19978
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit acdb0da47da15cf78ed971e7aaf6b67a563dd0da
Merge: 194c79c 4fffd45
Author: Gerrit Code Review <noreply-gerritcodereview@google.com>
Date:   Mon Feb 29 23:19:17 2016 +0000

    Merge "[dev.ssa] Merge remote-tracking branch 'origin/master' into ssamerge" into dev.ssa

commit 194c79c16390187624f648e4af279a11c67b99ce
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Feb 28 15:51:11 2016 -0800

    [dev.ssa] cmd/compile: add constant cache
    
    The cache gets a 62% hit rate while compiling
    the standard library.
    
    
    name      old time/op    new time/op    delta
    Template     449ms ± 2%     443ms ± 4%  -1.40%  (p=0.006 n=23+25)
    GoTypes      1.54s ± 1%     1.50s ± 2%  -2.53%  (p=0.000 n=22+22)
    Compiler     5.51s ± 1%     5.39s ± 1%  -2.29%  (p=0.000 n=23+25)
    
    name      old alloc/op   new alloc/op   delta
    Template    90.4MB ± 0%    90.0MB ± 0%  -0.45%  (p=0.000 n=25+25)
    GoTypes      334MB ± 0%     331MB ± 0%  -1.05%  (p=0.000 n=25+25)
    Compiler    1.12GB ± 0%    1.10GB ± 0%  -1.57%  (p=0.000 n=25+24)
    
    name      old allocs/op  new allocs/op  delta
    Template      681k ± 0%      682k ± 0%  +0.26%  (p=0.000 n=25+25)
    GoTypes      2.23M ± 0%     2.23M ± 0%  +0.05%  (p=0.000 n=23+24)
    Compiler     6.46M ± 0%     6.46M ± 0%  +0.02%  (p=0.000 n=24+25)
    
    
    Change-Id: I2629c291892827493d7b55ec4d83f6973a2ab133
    Reviewed-on: https://go-review.googlesource.com/20026
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4fffd4569d321feeceb1daf73595155e049bc1c4
Merge: 4e95dfe 71cc445
Author: Keith Randall <khr@golang.org>
Date:   Mon Feb 29 13:31:48 2016 -0800

    [dev.ssa] Merge remote-tracking branch 'origin/master' into ssamerge
    
    (Last?) Semi-regular merge from tip to dev.ssa.
    
    Conflicts:
            src/cmd/compile/internal/gc/closure.go
            src/cmd/compile/internal/gc/gsubr.go
            src/cmd/compile/internal/gc/lex.go
            src/cmd/compile/internal/gc/pgen.go
            src/cmd/compile/internal/gc/syntax.go
            src/cmd/compile/internal/gc/walk.go
            src/cmd/internal/obj/pass.go
    
    Change-Id: Ib5ea8bf74d420f4902a9c6208761be9f22371ae7

commit f1f366c1e70cb2628ad948d03ef5049763d98451
Author: Keith Randall <khr@golang.org>
Date:   Mon Feb 29 11:10:08 2016 -0800

    [dev.ssa] cmd/compile: MOVBconst might also clobber flags
    
    It gets rewritten to an xor by the linker also.
    
    Change-Id: Iae35130325d41bd1a09b7e971190cae6f4e17fac
    Reviewed-on: https://go-review.googlesource.com/20058
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 07ccc21295e45732e70bc0e81fe8739681c6c34b
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sun Feb 28 15:59:33 2016 -0900

    cmd/link: skip allocation when reading symbol name
    
    The object file reader in cmd/link reads the symbol name into a scratch
    []byte, converts it to a string, and then does a substring replacement.
    Instead, this CL does the replacement on the []byte into the scratch
    space and then creates the final string.
    
    Linking godoc without DWARF, best of ten, shows a ~10% improvement.
    
    tip:           real 0m1.099s user 0m1.541s
    this:          real 0m0.990s user 0m1.280s
    
    This is part of an attempt to make suffixarray string deduping
    come out as a wash, but it's not there yet:
    
    cl/19987:      real 0m1.335s user 0m1.794s
    cl/19987+this: real 0m1.225s user 0m1.540s
    
    Change-Id: Idf061fdfbd7f08aa3a1f5933d3f111fdd1659210
    Reviewed-on: https://go-review.googlesource.com/20025
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6d0b55193104357255dacc9b3270c944374eed97
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Feb 29 08:00:46 2016 -0900

    cmd/link: track offset instead of using seek
    
    The Cpos function is used frequently (at least once per symbol) and
    it is implemented with the seek syscall. Instead, track current
    output offset and use it.
    
    Building the godoc binary with DWARF, best of ten:
    
    tip:  real 0m1.287s user 0m1.573s
    this: real 0m1.208s user 0m1.555s
    
    Change-Id: I068148695cd6b4d32cd145db25e59e6f6bae6945
    Reviewed-on: https://go-review.googlesource.com/20055
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ed1a5e5da6fc904a612dac710f546bce779186fd
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Feb 24 12:53:28 2016 -0800

    cmd/compile: cleanup number lexing
    
    Change-Id: Ib0dd458d4ab1c58a2baf36491e288ac32e2ff99e
    Reviewed-on: https://go-review.googlesource.com/19962
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 36f25a7e7ba3d5527cee8f4ef645827085243e59
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sun Feb 28 17:58:57 2016 -0900

    cmd/link: allocate small []byte reads together
    
    Reduces number of memory allocations by 12%:
    
    Before: 1816664
    After:  1581591
    
    Small speed improvement.
    
    Change-Id: I61281fb852e8e31851a350e3ae756676705024a4
    Reviewed-on: https://go-review.googlesource.com/20027
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f4717a902e54d1e532fd21f1676a225523c67649
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Feb 29 09:31:12 2016 -0800

    misc/cgo/testsanitizers: test that tsan links
    
    Update #14559.
    
    Change-Id: I92603602e5d0a5fcae43f3084f234ff606447190
    Reviewed-on: https://go-review.googlesource.com/20056
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8096881927ecad4acb195ccca8404c5eaa1b24d7
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Mon Feb 29 16:46:18 2016 +0200

    cmd/link: batch allocations of Lsym
    
    Reduces best of 10 linking of cmd/go by ~5%
    
    Change-Id: If673b877ee12595dae517d7eb48430451e5cadba
    Reviewed-on: https://go-review.googlesource.com/20060
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e0b04fa508d6117f217a25e1868740a6a39d5605
Author: Shahar Kohanim <skohanim@gmail.com>
Date:   Mon Feb 29 12:19:26 2016 +0200

    cmd/link: Preallocate Lsym map
    
    Preallocate ~2MB for Lsym map (size calculation from http://play.golang.org/p/9L7F5naXRr).
    Reduces best of 10 link time of cmd/go by ~4%.
    On cmd/go max resident size unaffected, on println hello world max resident size grows by 4mb from 18mb->22mb. Performance improves in both cases.
    
    tip:  real  0m1.283s user  0m1.502s sys 0m0.144s
    this: real  0m1.341s user  0m1.598s sys 0m0.136s
    
    Change-Id: I4a95e45fe552f1f64f53e868421b9f45a34f8b96
    Reviewed-on: https://go-review.googlesource.com/19979
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 21f2cb60eaf6636f66062585cce575af3e11edb5
Author: Benoit Sigoure <tsunanet@gmail.com>
Date:   Sun Feb 28 21:30:32 2016 -0800

    syscall: Fix generator for Linux syscalls.
    
    In golang.org/cl/14449 the `getdents' system call got changed to use
    _SYS_getdents as a layer of indirection instead of SYS_GETDENTS64 for
    compatibility with mips64, but this broke mksyscall.pl, which then
    died with with:
      syscall_linux.go:840: malformed //sys declaration
    
    Change-Id: Icb61965d8730f6e81f9fb0fa28c7bab635470f09
    Reviewed-on: https://go-review.googlesource.com/20051
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1df5183f4c6f90ab3ea6fc4a928d2e7d7f55ce3d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Feb 28 22:06:11 2016 -0800

    misc/cgo/testsanitizers: report stderr if go run tsan*.go fails
    
    Update #14559.
    
    Change-Id: I8894f8e16902685f55a21d902199fbe0905f0558
    Reviewed-on: https://go-review.googlesource.com/20050
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 5c5fa3628ca58dce7cc19bc3939b8a55a6c3eefd
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Fri Feb 26 17:23:44 2016 +0300

    [dev.ssa] cmd/compile/internal/ssa: replace load of store with a copy
    
    This is a AMD64 version of CL19743.
    Saves additional 1574 bytes in go binary.
    This also speeds up bzip2 by 1-4%
    
    Change-Id: I031ba423663c4e83fdefe44e5296f24143e303da
    Reviewed-on: https://go-review.googlesource.com/19939
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 1b1d0a9a802deadf8e21517575eed4e6f02d3995
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Fri Feb 26 16:48:16 2016 +0300

    [dev.ssa] cmd/compile: Use movups for xmm->xmm mov
    
    Movups is 1 byte smaller than movapd that we currently use.
    
    Change-Id: I22f771f066529352722a28543535ec43497cb9c5
    Reviewed-on: https://go-review.googlesource.com/19938
    Reviewed-by: David Chase <drchase@google.com>

commit 351c15f1cee364a91ef606ef9114d55247a6a0c2
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Feb 28 15:52:49 2016 -0800

    all: remove public named return values when useless
    
    Named returned values should only be used on public funcs and methods
    when it contributes to the documentation.
    
    Named return values should not be used if they're only saving the
    programmer a few lines of code inside the body of the function,
    especially if that means there's stutter in the documentation or it
    was only there so the programmer could use a naked return
    statement. (Naked returns should not be used except in very small
    functions)
    
    This change is a manual audit & cleanup of public func signatures.
    
    Signatures were not changed if:
    
    * the func was private (wouldn't be in public godoc)
    * the documentation referenced it
    * the named return value was an interesting name. (i.e. it wasn't
      simply stutter, repeating the name of the type)
    
    There should be no changes in behavior. (At least: none intended)
    
    Change-Id: I3472ef49619678fe786e5e0994bdf2d9de76d109
    Reviewed-on: https://go-review.googlesource.com/20024
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 28ce6f3600fd87a1ae39c492ee56307f0be3c32f
Author: Shenghou Ma <minux@golang.org>
Date:   Sun Feb 28 19:32:29 2016 -0500

    time: document Tick will return nil if d <= 0
    
    Fixes #14557.
    
    Change-Id: I9610b79aafe9c15f9c998739b586fd0b41b90d70
    Reviewed-on: https://go-review.googlesource.com/20031
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1b417e20ffe052d51835ec84dcc5df08717cb8a3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Feb 28 14:39:38 2016 -0800

    cmd/compile: superficial cleanup in maplit
    
    Mostly renaming variables for clarity.
    
    Passes toolstash -cmp.
    
    Change-Id: I9867137c34c14985cbbbdb2d34fbbe4cc65cb6fb
    Reviewed-on: https://go-review.googlesource.com/20023
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1d5001afef65bdb48db751f474efab624b14c362
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sat Feb 27 14:31:33 2016 -0800

    cmd/compile: change Node.Nbody, Func.Inl from *NodeList to Nodes
    
    Passes toolstash -cmp.
    
    Casual timings show about a 3% improvement in compile times.
    
    Update #14473.
    
    Change-Id: I584add2e8f1a52486ba418b25ba6122b7347b643
    Reviewed-on: https://go-review.googlesource.com/19989
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 75cc05fa557b26336bc8e3f0a6c9f03b904a85eb
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Feb 27 12:19:49 2016 +0100

    fmt: fix formatting of numbers with f.space and f.plus specified
    
    Do not replace the sign in front of a number with a space if both
    f.space and f.plus are both specified for number formatting.
    This was already the case for integers but not for floats
    and complex numbers.
    
    Updates: #14543.
    
    Change-Id: I07ddeb505003db84a8a7d2c743dc19fc427a00bd
    Reviewed-on: https://go-review.googlesource.com/19974
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit f5ab890c189fae6f149a5621adf1cdd8016216b0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Feb 9 06:18:43 2016 -0800

    cmd/go: only check SWIG intsize once per build
    
    Besides being more efficient in a large build, this avoids a possible
    race when creating the input file.
    
    Change-Id: Ifc2cb055925a76be9c90eac56d84ebd9e14f2bbc
    Reviewed-on: https://go-review.googlesource.com/19392
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 8107b0012f1d5f808e33f812c456e20554c383c8
Author: David Chase <drchase@google.com>
Date:   Sun Feb 28 11:15:22 2016 -0500

    [dev.ssa] cmd/compile: use 32-bit load to read writebarrier
    
    Avoid targeting a partial register with load;
    ensure source of load (writebarrier) is aligned.
    
    Better yet would be "CMPB $1,writebarrier" but that requires
    wrestling with flagalloc (mem operand complicates moving
    instruction around).
    
    Didn't see a change in time for
       benchcmd -n 10 Build go build net/http
    
    Verified that we clean the code up properly:
       0x20a8 <main.main+104>:      mov    0xc30a2(%rip),%eax
                                # 0xc5150 <runtime.writeBarrier>
       0x20ae <main.main+110>:      test   %al,%al
    
    Change-Id: Id5fb8c260eaec27bd727cb0ae1476c60343b0986
    Reviewed-on: https://go-review.googlesource.com/19998
    Reviewed-by: Keith Randall <khr@golang.org>

commit 34f048c9d9cfd839703f96834ec6bd0a500e4b00
Author: David Chase <drchase@google.com>
Date:   Sun Feb 28 15:58:17 2016 -0500

    [dev.ssa] cmd/compile: small optimization to prove using sdom tweak
    
    Exposed data already in sdom to avoid recreating it in prove.
    
    Change-Id: I834c9c03ed8faeaee013e5a1b3f955908f0e0915
    Reviewed-on: https://go-review.googlesource.com/19999
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>

commit 622780b1c1ba73a5e61d26949bbdcc33851d7709
Author: Tamir Duberstein <tamird@gmail.com>
Date:   Fri Feb 26 18:26:04 2016 -0500

    crypto/tls: don't log expected errors in test
    
    This is minor cleanup that reduces test output noise.
    
    Change-Id: Ib6db4daf8cb67b7784b2d5b222fa37c7f78a6a04
    Reviewed-on: https://go-review.googlesource.com/19997
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bdea1d58cfc55a5156c8df392cfc3133589389db
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Feb 19 12:14:42 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: remove proven redundant controls.
    
    * It does very simple bounds checking elimination. E.g.
    removes the second check in for i := range a { a[i]++; a[i++]; }
    * Improves on the following redundant expression:
    return a6 || (a6 || (a6 || a4)) || (a6 || (a4 || a6 || (false || a6)))
    * Linear in the number of block edges.
    
    I patched in CL 12960 that does bounds, nil and constant propagation
    to make sure this CL is not just redundant. Size of pkg/tool/linux_amd64/*
    (excluding compile which is affected by this change):
    
    With IsInBounds and IsSliceInBounds
    -this -12960 92285080
    +this -12960 91947416
    -this +12960 91978976
    +this +12960 91923088
    
    Gain is ~110% of 12960.
    
    Without IsInBounds and IsSliceInBounds (older run)
    -this -12960 95515512
    +this -12960 95492536
    -this +12960 95216920
    +this +12960 95204440
    
    Shaves 22k on its own.
    
    * Can we handle IsInBounds better with this? In
    for i := range a { a[i]++; } the bounds checking at a[i]
    is not eliminated.
    
    Change-Id: I98957427399145fb33693173fd4d5a8d71c7cc20
    Reviewed-on: https://go-review.googlesource.com/19710
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 186d3e30bee0fc2b4e4e90fd3f3e023f25c7e390
Author: Tamir Duberstein <tamird@gmail.com>
Date:   Fri Feb 26 18:26:04 2016 -0500

    crypto/tls: tests prefer constants to opaque literals
    
    This is minor cleanup that makes the tests more readable.
    
    Change-Id: I9f1f98f0f035096c284bdf3501e7520517a3e4d9
    Reviewed-on: https://go-review.googlesource.com/19993
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 92408107dccbf4627ba8c88c62f84a7261c55ce3
Author: Justin Nuß <nuss.justin@gmail.com>
Date:   Sun Feb 28 17:48:49 2016 +0100

    mime: Fix BenchmarkQDecodeHeader to call DecodeHeader
    
    Found this while reading through the code. The benchmark
    accidently called the wrong function.
    
    Change-Id: Idb88aa71e7098a4e29e7f5f39e64f8c5f8936a2a
    Reviewed-on: https://go-review.googlesource.com/19977
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4e95dfed0197ee6fdf96dc1aa632297a28a1cd95
Author: Todd Neal <todd@tneal.org>
Date:   Sat Feb 27 08:04:48 2016 -0600

    [dev.ssa] cmd/compile: add max arg length to opcodes
    
    Add the max arg length to opcodes and use it in zcse.  Doesn't affect
    speed, but allows better checking in checkFunc and removes the need
    to keep a list of zero arg opcodes up to date.
    
    Change-Id: I157c6587154604119720ec6228b767b6e52bb5c7
    Reviewed-on: https://go-review.googlesource.com/19994
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ff274210674e407ab7c44585a097259cd029dced
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Dec 8 18:26:22 2015 -0800

    compress/bzip2: fix benchmark to actually measure decompression rate
    
    Motivation:
    * Previously, the size of the compressed data was used for metrics,
    rather than the uncompressed size. This causes the library to appear
    to perform poorly relative to C or other implementation. Switch it
    to use the uncompressed size so that it matches how decompression
    benchmarks are usually done (like in compress/flate). This also makes
    it easier to compare bzip2 rates to other algorithms since they measure
    performance in this way.
    * Also, reset the timer after doing initialization work.
    
    Change-Id: I32112c2ee8e7391e658c9cf31039f70a689d9b9d
    Reviewed-on: https://go-review.googlesource.com/17611
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 47379929f1cf38665066cb2b6ade76e865643dd3
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sun Feb 28 01:47:59 2016 -0800

    compress/bzip2: use correct block size
    
    The bzip2 block size is a multiple of 100*1000 not 100*1024.
    Thus, the bzip2 decoder would incorrectly decode files with larger
    block sizes when it should have otherwise failed.
    Fortunately, we can correct this in a backwards compatible way since
    Go has no implementation of a bzip2 encoder to produce bad blocks :)
    
    To confirm that the C bzip2 utlity chokes on this data:
            $ echo "425a683131415926535936dc55330063ffc0006000200020a40830008b00
            08b8bb9229c28481b6e2a998" | xxd -r -p | bzip2 -d
    
            bzip2: Data integrity error when decompressing.
    
    Fixes #13941
    
    Change-Id: I2402e8829a8027ef94dd4fac050b200440a3d4e4
    Reviewed-on: https://go-review.googlesource.com/20011
    Run-TryBot: Joe Tsai <joetsai@digital-static.net>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5fc4decd10aa5583f4485164e572720d0d564cac
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Oct 31 11:22:42 2015 -0700

    compress/flate: extract LZ77 dictionary logic into seperate struct
    
    The LZ77 portion of DEFLATE is relatively self-contained. For the
    decompression side of things, we extract this logic out for the
    following reasons:
    * It is easier to test just the LZ77 portion of the logic.
    * It reduces the noise in the inflate.go
    
    Also, we adjust the way that callbacks are handled in the inflate.
    Instead of using functions to abstract the logical componets of
    huffmanBlock(), use goto statements to jump between the necessary
    sections. This is faster since it avoids a function call and is
    arguably more readable.
    
    benchmark                              old MB/s     new MB/s     speedup
    BenchmarkDecodeDigitsSpeed1e4-4        53.62        60.11        1.12x
    BenchmarkDecodeDigitsSpeed1e5-4        61.90        69.07        1.12x
    BenchmarkDecodeDigitsSpeed1e6-4        63.24        70.58        1.12x
    BenchmarkDecodeDigitsDefault1e4-4      54.10        59.00        1.09x
    BenchmarkDecodeDigitsDefault1e5-4      69.50        74.07        1.07x
    BenchmarkDecodeDigitsDefault1e6-4      71.54        75.85        1.06x
    BenchmarkDecodeDigitsCompress1e4-4     54.39        58.94        1.08x
    BenchmarkDecodeDigitsCompress1e5-4     69.21        73.96        1.07x
    BenchmarkDecodeDigitsCompress1e6-4     71.14        75.75        1.06x
    BenchmarkDecodeTwainSpeed1e4-4         53.15        58.13        1.09x
    BenchmarkDecodeTwainSpeed1e5-4         66.56        72.29        1.09x
    BenchmarkDecodeTwainSpeed1e6-4         69.13        75.11        1.09x
    BenchmarkDecodeTwainDefault1e4-4       56.00        60.23        1.08x
    BenchmarkDecodeTwainDefault1e5-4       77.84        82.27        1.06x
    BenchmarkDecodeTwainDefault1e6-4       82.07        86.85        1.06x
    BenchmarkDecodeTwainCompress1e4-4      56.13        60.38        1.08x
    BenchmarkDecodeTwainCompress1e5-4      78.23        82.62        1.06x
    BenchmarkDecodeTwainCompress1e6-4      82.38        86.73        1.05x
    
    Change-Id: I8c6ae0e6bed652dd0570fc113c999977f5e71636
    Reviewed-on: https://go-review.googlesource.com/16528
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3cb870d47b5611465c46c6a6512b7f059584c66f
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Fri Feb 26 16:36:50 2016 -0300

    testing: make failure in benchmark cause non-zero exit status
    
    Moves the implementation of RunBenchmarks to a non-exported function
    that returns whether the execution was OK, and uses that to identify
    failure in benchmarks.The exported function is kept for compatibility.
    
    Like before, benchmarks will only be executed if tests and examples
    pass. The PASS message will not be printed if there was a failure in
    a benchmark.
    
    Example output
    
            BenchmarkThatCallsFatal-8       --- FAIL: BenchmarkThatCallsFatal-8
                    x_test.go:6: called by benchmark
            FAIL
            exit status 1
            FAIL    _/.../src/cmd/go/testdata/src/benchfatal        0.009s
    
    Fixes #14307.
    
    Change-Id: I6f3ddadc7da8a250763168cc099ae8b325a79602
    Reviewed-on: https://go-review.googlesource.com/19889
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c8ef0df06cbab367ab943825ab0677e03d019c3d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 3 19:17:21 2015 -0800

    cmd/cgo: add hooks for thread sanitizer
    
    When Go code is used with C code compiled with -fsanitize=thread, adds
    thread sanitizer calls so that correctly synchronized Go code does not
    cause spurious failure reports from the thread sanitizer.  This may
    cause some false negatives, but for the thread sanitizer what is most
    important is avoiding false positives.
    
    Change-Id: If670e4a6f2874c7a2be2ff7db8728c6036340a52
    Reviewed-on: https://go-review.googlesource.com/17421
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit c86dbbe1b989a05381d2635c97566d3e7b06eb62
Author: kortschak <dan.kortschak@adelaide.edu.au>
Date:   Sun Feb 28 14:55:29 2016 +1030

    misc/cgo/fortran: clean up after successful helloworld.90 build
    
    Change-Id: If03185a21e088c9b383a82c14d649805f00c8042
    Reviewed-on: https://go-review.googlesource.com/20000
    Reviewed-by: Minux Ma <minux@golang.org>

commit d62d8318826e17fff09fb2188dcb22fbb121fb19
Author: Austin Clements <austin@google.com>
Date:   Mon Nov 23 11:34:16 2015 -0500

    runtime: clean up adjustpointer and eliminate write barrier
    
    Commit a5c3bbe modified adjustpointers to use *uintptrs instead of
    *unsafe.Pointers for manipulating stack pointers for clarity and to
    eliminate the unnecessary write barrier when writing the updated stack
    pointer.
    
    This commit makes the equivalent change to adjustpointer.
    
    Change-Id: I6dc309590b298bdd86ecdc9737db848d6786c3f7
    Reviewed-on: https://go-review.googlesource.com/17148
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 71cc445cf92dd3014e8b382809ed1b9c077e7973
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Feb 23 16:11:46 2016 -0800

    cmd/cgo: recognize known C typedefs as types
    
    Fixes #14483.
    
    Change-Id: I0cddfe27fd8d00ba85659d0b618410e39ebf45cb
    Reviewed-on: https://go-review.googlesource.com/19860
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 922ce58de0181c114c09e6fbd6ab28f1d477898d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Feb 26 17:03:58 2016 -0800

    cmd/compile: change Func.Cvars to the new Nodes type
    
    Update #14473.
    
    Change-Id: Iba1ecf42d9ab5a93144941439d5cc6b0b4f4a3ac
    Reviewed-on: https://go-review.googlesource.com/19992
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7da4ceddd020a0f1de0b9a0af56a931f70a8bb08
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Feb 21 16:05:44 2016 +0100

    fmt: simplify buffer write methods and adjust calls to them
    
    Once upon a time fmt did use bytes.Buffer for its buffer.
    The buffer write methods still mimic the bytes.Buffer signatures.
    The current code depends on manipulating the buffer []bytes array directly
    which makes going back to bytes.Buffer by only changing the type of buffer
    impossible. Since type buffer is not exported the methods can be simplified
    to the needs of fmt. This saves space and avoids unnecessary overhead.
    
    Use WriteString instead of Write for known inputs since
    WriteString is faster than Write to append the same data.
    This also saves space in the binary.
    
    Remove the add method from Printer and depending on the data to be written
    use WriteRune or WriteByte directly instead.
    
    In total makes the go binary around 4 kilobyte smaller.
    
    name                  old time/op  new time/op  delta
    SprintfEmpty-2        24.1ns ± 3%  23.8ns ± 1%  -1.14%  (p=0.000 n=20+20)
    SprintfString-2        114ns ± 2%   114ns ± 4%    ~     (p=0.558 n=20+19)
    SprintfInt-2           116ns ± 9%   118ns ± 7%    ~     (p=0.086 n=20+20)
    SprintfIntInt-2        195ns ± 6%   193ns ± 5%    ~     (p=0.345 n=20+19)
    SprintfPrefixedInt-2   251ns ±16%   241ns ± 9%  -3.69%  (p=0.024 n=20+19)
    SprintfFloat-2         203ns ± 4%   205ns ± 5%    ~     (p=0.153 n=20+20)
    SprintfBoolean-2       101ns ± 7%    96ns ±11%  -5.23%  (p=0.005 n=19+20)
    ManyArgs-2             651ns ± 7%   628ns ± 7%  -3.44%  (p=0.002 n=20+20)
    FprintInt-2            164ns ± 2%   158ns ± 2%  -3.62%  (p=0.000 n=20+18)
    FprintfBytes-2         215ns ± 1%   216ns ± 1%  +0.58%  (p=0.000 n=20+20)
    FprintIntNoAlloc-2     115ns ± 0%   112ns ± 0%  -2.61%  (p=0.000 n=20+20)
    ScanInts-2             700µs ± 0%   702µs ± 1%  +0.38%  (p=0.000 n=18+20)
    ScanRecursiveInt-2    82.7ms ± 0%  82.7ms ± 0%    ~     (p=0.820 n=20+20)
    
    Change-Id: I0409eb170b8a26d9f4eb271f6292e5d39faf2d8b
    Reviewed-on: https://go-review.googlesource.com/19955
    Reviewed-by: Rob Pike <r@golang.org>

commit 9d73a6dcad11238dfd31a39a4d5a9e63bbc1d207
Author: Justin Nuß <nuss.justin@gmail.com>
Date:   Tue Jan 26 21:14:35 2016 +0100

    strconv: Avoid allocation in AppendQuote*
    
    The current implementations of the AppendQuote functions use quoteWith
    (through Quote) for quoting the given value and appends the returned
    string to the dst byte slice. quoteWith internally creates a byte slice
    on each call which gets converted to a string in Quote.
    
    This means the AppendQuote functions always allocates a new byte slice
    and a string only to append them to an existing byte slice. In the case
    of (Append)QuoteRune the string passed to quoteWith will also needs to
    be allocated from a rune first.
    
    Split quoteWith into two functions (quoteWith and appendQuotedWith) and
    replace the call to Quote inside AppendQuote with appendQuotedWith,
    which appends directly to the byte slice passed to AppendQuote and also
    avoids the []byte->string conversion.
    
    Also introduce the 2 functions quoteRuneWith and appendQuotedRuneWith
    that work the same way as quoteWith and appendQuotedWith, but take a
    single rune instead of a string, to avoid allocating a new string when
    appending a single rune, and use them in (Append)QuoteRune.
    
    Also update the ToASCII and ToGraphic variants to use the new functions.
    
    Benchmark results:
    
    benchmark                      old ns/op     new ns/op     delta
    BenchmarkQuote-8               428           503           +17.52%
    BenchmarkQuoteRune-8           148           105           -29.05%
    BenchmarkAppendQuote-8         435           307           -29.43%
    BenchmarkAppendQuoteRune-8     158           23.5          -85.13%
    
    benchmark                      old allocs     new allocs     delta
    BenchmarkQuote-8               3              3              +0.00%
    BenchmarkQuoteRune-8           3              2              -33.33%
    BenchmarkAppendQuote-8         3              0              -100.00%
    BenchmarkAppendQuoteRune-8     3              0              -100.00%
    
    benchmark                      old bytes     new bytes     delta
    BenchmarkQuote-8               144           144           +0.00%
    BenchmarkQuoteRune-8           16            16            +0.00%
    BenchmarkAppendQuote-8         144           0             -100.00%
    BenchmarkAppendQuoteRune-8     16            0             -100.00%
    
    Change-Id: I77c148d5c7242f1b0edbbeeea184878abb51a522
    Reviewed-on: https://go-review.googlesource.com/18962
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f3f920ff8d69a639de05ce5af52ba1916878055a
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Feb 19 16:25:52 2016 +0900

    crypto/tls: don't send IPv6 literals and absolute FQDNs as SNI values
    
    This is a followup change to #13111 for filtering out IPv6 literals and
    absolute FQDNs from being as the SNI values.
    
    Updates #13111.
    Fixes #14404.
    
    Change-Id: I09ab8d2a9153d9a92147e57ca141f2e97ddcef6e
    Reviewed-on: https://go-review.googlesource.com/19704
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit abcad1e59de42e6275c735ba4303cbe1eb3adac7
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Feb 20 01:51:32 2016 +0100

    fmt: change padding functions to avoid package init
    
    Move the decision if zero padding is allowed to doPrintf
    where the other formatting decisions are made.
    
    Removes some dead code for negative f.wid that was never used
    due to f.wid always being positive and f.minus deciding if left
    or right padding should be used.
    
    New padding code writes directly into the buffer and is as fast
    as the old version but avoids the cost of needing package init.
    
    name              old time/op  new time/op  delta
    SprintfPadding-2   246ns ± 5%   245ns ± 4%   ~     (p=0.345 n=50+47)
    
    Change-Id: I7dfddbac8e328f4ef0cdee8fafc0d06c784b2711
    Reviewed-on: https://go-review.googlesource.com/19957
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 8b96bc6818ca673b4d6b832190f7e823c80804ca
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Feb 26 21:50:44 2016 -0800

    cmd/compile: remove unneeded test binary
    
    Accidentally added in https://golang.org/cl/19968.
    
    Change-Id: Id70917c4d1f69db149688d797c90a19557d16f72
    Reviewed-on: https://go-review.googlesource.com/19985
    Reviewed-by: Minux Ma <minux@golang.org>

commit ccf39a23b17f5b5ed301c0016d520e44310fced3
Author: David du Colombier <0intro@gmail.com>
Date:   Sat Feb 27 00:49:08 2016 +0100

    debug/gosym: fix TestPCLine on Plan 9
    
    Plan 9 doesn't define main, so the INITENTRY
    symbol remains with the SXREF type, which leads
    Entryvalue to fail on "entry not text: main".
    
    Fixes #14536.
    
    Change-Id: Id9b7d61e5c2202aba3ec9cd52f5b56e0a38f7c47
    Reviewed-on: https://go-review.googlesource.com/19973
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 91f69c675de947e169ebec60b68a752e3ccc6912
Author: Keith Randall <khr@golang.org>
Date:   Fri Feb 26 16:32:01 2016 -0800

    [dev.ssa] cmd/compile: with -N, don't put JMPs after calls
    
    plive doesn't like the fact that we put JMPs right
    after CALL ops to select{send,recv}.
    
    Fixes SSA -N build.
    
    Change-Id: I9b3c9e5293196094fd5a6206dd2f99784951f7a9
    Reviewed-on: https://go-review.googlesource.com/19982
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 31f2ed2cae4df04d9180574f75ec94a80578f8ed
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Feb 27 01:22:53 2016 +0000

    doc: go1.7.txt updates
    
    Change-Id: I6ac3d11ee8896f636235fe10c2556f93584019b5
    Reviewed-on: https://go-review.googlesource.com/19984
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 52f099c4263f2ffd1cda777d7f6ed9689bb481a5
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Feb 26 02:10:29 2016 -0800

    cmd/compile: simplify lexinit and lexfini
    
    Split the syms array into separate basicTypes and builtinFuncs arrays.
    
    Also, in lexfini, instead of duplicating the code from lexinit to
    declare the builtin identifiers in the user package, just import them
    from builtinpkg like how importdot works.
    
    Change-Id: Ic3b3b454627a46f7bd5f290d0e31443e659d431f
    Reviewed-on: https://go-review.googlesource.com/19936
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 188e3d251507adb1b2910b49a091c7ba594819b6
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Feb 26 14:28:48 2016 -0800

    cmd/compile: change Func.{Enter,Exit} from NodeList to slice
    
    Introduces a new types Nodes that can be used to replace NodeList.
    
    Update #14473.
    
    Change-Id: Id77c5dcae0cbeb898ba12dd46bd400aad408871c
    Reviewed-on: https://go-review.googlesource.com/19969
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6520da6ed5241b0383d50a286b4be0da70dc352b
Author: Martin Möhrmann <martisch@uos.de>
Date:   Wed Feb 24 23:22:40 2016 +0100

    fmt: use public io.RuneScanner interface for ScanState reader
    
    All io.Reader that are passed to newScanState in all the standard
    library tests that implement io.RuneReader also implement io.RuneScanner.
    
    Do not check on each call ScanState's UnreadRune that the used RuneReader
    also implements the UnreadRune method by using a private interface.
    Instead require the used Reader to implement the public RuneScanner
    interface.
    
    The extra implementation logic for UnreadRune is removed from ScanState.
    Instead the readRune wrapper is extended to implement UnreadRune for the
    RuneScanner interface. If the Reader passed to newScanstate does not
    implement RuneScanner the readRune wrapper is used to implement the
    missing functionality.
    
    Note that a RuneReader that does not implement RuneScanner will also
    be wrapped by runeRead which was not the case before.
    Performance with the readRune wrapper is better than without before.
    
    Add benchmark to compare performance with and without using the
    readRune wrapper.
    
    name                             old time/op  new time/op  delta
    ScanInts-2                        704µs ± 0%   615µs ± 1%  -12.73%  (p=0.000 n=20+20)
    ScanRecursiveInt-2               82.6ms ± 0%  51.4ms ± 0%  -37.71%  (p=0.000 n=20+20)
    ScanRecursiveIntReaderWrapper-2  85.1ms ± 0%  52.4ms ± 0%  -38.36%  (p=0.000 n=20+20)
    
    Change-Id: I8c6e85db9b87a8171caab12f020b6e256b498e81
    Reviewed-on: https://go-review.googlesource.com/19895
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit b30e1d728ce99bcf12877ef7e1010e53c8766e2b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Feb 26 14:56:31 2016 -0800

    cmd/compile: consolidate alg code
    
    Pull all alg-related code into its own file.
    subr.go is a Hobbesian Leviathan.
    
    100% code movement. Cleanup and improvements to follow.
    
    Change-Id: Ib9c8f66563fdda90c6e8cf646d366a9487a4648d
    Reviewed-on: https://go-review.googlesource.com/19980
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f5f8b38462983a06ec07d6c394834af50eef6698
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 25 17:27:10 2016 -0800

    cmd/compile: eliminate prectab
    
    While here, merge LINC and LDEC into LINCOP.
    
    Fixes #13244.
    
    Change-Id: I8ea426f986d60d35c3b1a80c056a7aa49d22d802
    Reviewed-on: https://go-review.googlesource.com/19928
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 6abc8c9a88d01d933d7388933f10120fc48aacca
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Feb 26 13:48:24 2016 -0800

    cmd/compile: change Func.Inldcl from []*Node to *[]*Node
    
    Save a few bytes in Func.
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I824fa7d5cb2d93f6f59938ccd86114abcbea0043
    Reviewed-on: https://go-review.googlesource.com/19968
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 52d9479e3be6cc94256f3ad07a0bd71df2aa4f60
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Feb 26 13:33:48 2016 -0800

    cmd/compile: convert Func.Cvars from *NodeList to *[]*Node
    
    Passes toolstash -cmp.
    
    Update #14473.
    
    Change-Id: I7285175b1992a29033fdc9e81d6f30545e5cc30d
    Reviewed-on: https://go-review.googlesource.com/19967
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 92bf58c2381acac3929d495cee596df61491af48
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Feb 21 21:12:36 2016 -0800

    cmd/compile: recognize more memory runs in generated algs
    
    The old implementation assumed that all memory runs
    were terminated by non-memory fields.
    This isn't necessarily so.
    They might be terminated by padding or blank fields.
    
    For example, given
    
    type T struct {
            a int64
            b byte
            c, d, e int64
    }
    
    the old implementation did a memory comparison on a+b, on c, and on d+e.
    
    Instead, check for memory runs at the beginning of every round.
    This now generates a memory comparison on a+b and on c+d+e.
    
    Also, delete some now-dead code.
    
    Change-Id: I66bffb111420adf6919bd708e4fb3a1e1f07fadd
    Reviewed-on: https://go-review.googlesource.com/19841
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 0f5d78f6784a728c3544282faebdcf5689d478ef
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Feb 21 15:49:52 2016 -0800

    cmd/compile: factor shared code from geneq and genhash
    
    Passes toolstash -cmp.
    
    Change-Id: Ifae69e5ba673f01da3dfc1fd30cdc51873481623
    Reviewed-on: https://go-review.googlesource.com/19840
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 3c0fae53062d80678d8f79877143b46ee787569c
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Feb 26 13:32:28 2016 -0800

    cmd/compile: track pragmas in lexer rather than global variables
    
    By using a Pragma bit set (8 bits) rather than 8 booleans, also
    reduce Func type size by 8 bytes (208B -> 200B on 64bit platforms,
    116B -> 108B on 32bit platforms).
    
    Change-Id: Ibb7e1f8c418a0b5bc6ff813cbdde7bc6f0013b5a
    Reviewed-on: https://go-review.googlesource.com/19966
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 071e43a95809030d3a74b3d526da1497d02d17e4
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Feb 26 01:37:28 2016 -0800

    cmd/compile: stop representing keywords as Syms
    
    Instead add a dedicated keywords map for use in lexer.ident and drop
    Sym's Lexical field.
    
    Change-Id: Ia668e65499035ff7167fabbbd0cd027102b21231
    Reviewed-on: https://go-review.googlesource.com/19935
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit af558acc470dc1590788bbd695b0727e382cb74c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 25 22:10:48 2016 -0800

    cmd/compile: fix contrived line number errors
    
    If a general comment contains multiple newline characters, we can't
    simply unread one and then re-lex it via the general whitespace lexing
    phase, because then we'll reset lineno to the line before the "*/"
    marker, rather than keeping it where we found the "/*" marker.
    
    Also, for processing imports, call importfile before advancing the
    lexer with p.next(), so that lineno reflects the line where we found
    the import path, and not the token afterwards.
    
    Fixes #14520.
    
    Change-Id: I785a2d83d632280113d4b757de0d57c88ba2caf4
    Reviewed-on: https://go-review.googlesource.com/19934
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a131a66e63d805db05bb320146815ee053a1c258
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Feb 26 13:05:35 2016 -0800

    cmd/compile: create test binary in temp directory
    
    The new TestDashS was leaving a dreg "test" file in
    cmd/compile/internal/gc.  Create it in the temporary directory instead.
    
    Also change path.Join to filepath.Join throughout global_test.go.
    
    Change-Id: Ib7707fada2b3ab5e8abc2ba74e4c402821c1408b
    Reviewed-on: https://go-review.googlesource.com/19965
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit b66a892358d2ca5ee7008ceeeda050d9f64ce5a2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Feb 25 10:35:19 2016 -0800

    cmd/compile: change Func.{Dcl,Inldcl} from NodeList to slice
    
    A slice uses less memory than a NodeList, and has better memory locality
    when walking the list.
    
    This uncovered a tricky case involving closures: the escape analysis
    pass when run on a closure was appending to the Dcl list of the OCLOSURE
    rather than the ODCLFUNC.  This happened to work because they shared the
    same NodeList.  Fixed with a change to addrescapes, and a check to
    Tempname to catch any recurrences.
    
    This removes the last use of the listsort function outside of tests.
    I'll send a separate CL to remove it.
    
    Unfortunately, while this passes all tests, it does not pass toolstash
    -cmp.  The problem is that cmpstackvarlt does not fully determine the
    sort order, and the change from listsort to sort.Sort, while generally
    desirable, produces a different ordering.  I could stage this by first
    making cmpstackvarlt fully determined, but no matter what toolstash -cmp
    is going to break at some point.
    
    In my casual testing the compiler is 2.2% faster.
    
    Update #14473.
    
    Change-Id: I367d66daa4ec73ed95c14c66ccda3a2133ad95d5
    Reviewed-on: https://go-review.googlesource.com/19919
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 67dbde0d7197b2fe6c9e08bda9fa4656c1f75ce4
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 25 14:58:03 2016 -0800

    cmd: stop looking for __.(GO)?SYMDEF entries in archives
    
    The Go toolchain stopped creating them before Go 1.3, so no point in
    worrying about them today.
    
    History:
    
    - Git commit 250a091 added cmd/ar, which wrote Plan 9 __.SYMDEF
    entries into archive files.
    
    - golang.org/cl/6500117 renamed __.SYMDEF to __.GOSYMDEF.  (Notably,
    the commit message suggests users need to use Go nm to read symbols,
    but even back then the toolchain did nothing with __.(GO)?SYMDEF files
    except skip over them.)
    
    - golang.org/cl/42880043 added the -pack flag to cmd/gc to directly
    produce archives by the Go compiler, and did not write __.GOSYMDEF
    entries.
    
    - golang.org/cl/52310044 rewrote cmd/pack in Go, and removed support
    for producing __.GOSYMDEF entries.
    
    Change-Id: I255edf40d0d3690e3447e488039fcdef73c6d6b1
    Reviewed-on: https://go-review.googlesource.com/19924
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5c613e9162aad2ea171d401754d97ea2be1442ce
Author: Richard Miller <miller.research@gmail.com>
Date:   Wed Jan 27 16:18:34 2016 +0000

    sync/atomic: new file for plan9_arm support
    
    Atomic load/store/add/swap routines, as for other ARM platforms, but with DMB inserted
    for load/store (assuming that "atomic" also implies acquire/release memory ordering).
    
    Change-Id: I70a283d8f0ae61a66432998ce59eac76fd940c67
    Reviewed-on: https://go-review.googlesource.com/18965
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5c72c6f889ad854ba16e4ed560e6ad10ebb6dcc4
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Fri Feb 26 16:09:54 2016 -0300

    cmd/go: show position in error for wrong signature in test functions
    
    Change-Id: Ie915dc2fc32a31d31f566ac931ccecb506559645
    Reviewed-on: https://go-review.googlesource.com/19888
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0ccabe2e0b42a2602e0f37ce28d5368aa811f530
Author: Matt T. Proud <matt.proud@gmail.com>
Date:   Thu Oct 29 11:14:05 2015 +0100

    testing/quick: generate more map and slice states
    
    This change adds support in testing/quick to generate maps and slices
    in additional states:
    
      (1.) nil maps
    
      (2.) nil slices
    
      (3.) empty slice occupancy: `len(s) == 0 && s != nil`
    
      (4.) partial slice occupancy: `len(s) < cap(s) && s != nil`
    
      (5.) full slice occupancy: `len(s) == cap(s) && s != nil`
    
    Prior to this, only #5 was ever generated, thereby not sufficiently
    exercising all of the fuzzable code path outcomes.
    
    This change depends on https://go-review.googlesource.com/#/c/17499/.
    
    Change-Id: I9343c475cefbd72ffc5237281826465c25872206
    Reviewed-on: https://go-review.googlesource.com/16470
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 763e8fcc8931b44db77f7bcbc7b6943a2a8fb747
Author: Richard Miller <miller.research@gmail.com>
Date:   Wed Jan 27 16:36:31 2016 +0000

    syscall: new files for plan_arm support
    
    Implementation closely follows plan9_386 version.
    
    Change-Id: Ifb76e001fb5664e6a23541cf4768d7f11b2be68b
    Reviewed-on: https://go-review.googlesource.com/18967
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ddfe7b3dc00291862f33224b68ffdad0ef4001ab
Author: Michael McConville <momcconville@gmail.com>
Date:   Sat Jan 2 20:50:57 2016 -0500

    crypto/rand: use the getentropy syscall on OpenBSD
    
    Go already supports Linux's getrandom, which is a slightly modified
    version of getentropy.
    
    getentropy was added in OpenBSD 5.6. All supported versions of OpenBSD
    include it so, unlike with Linux and getrandom, we don't need to test
    for its presence.
    
    Fixes #13785.
    
    Change-Id: Ib536b96675f257cd8c5de1e3a36165e15c9abac9
    Reviewed-on: https://go-review.googlesource.com/18219
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ee177279a00398d7a986fbaa1db527845c6a888b
Author: Jeff R. Allen <jra@nella.org>
Date:   Sun Aug 16 14:59:23 2015 +0200

    misc/cgo: fix wrong quote character
    
    Single quotes to not expand variables inside of them.
    
    Change-Id: I4a0622c0aebfc1c3f9d299f93f7a8253893b5858
    Reviewed-on: https://go-review.googlesource.com/13661
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c747fce242ec46316db17df14e65b0fe23e2c1f1
Author: Keith Randall <khr@golang.org>
Date:   Thu Feb 25 19:17:55 2016 -0800

    cmd/internal/obj: Fix generation of assembly with -S
    
    We can't drop Prog entries when we want to print disassembly.
    
    Added a test for -S.
    
    Fixes #14515
    
    Change-Id: I44c72f70f7a3919acc01c559d30335d26669e76f
    Reviewed-on: https://go-review.googlesource.com/19930
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8d94b9b820b093a32b7eb83d6481bc3da7ca276e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Feb 25 21:16:45 2016 -0800

    runtime: more deflaking of TestCgoCheckBytes
    
    Fixes #14519.
    
    Change-Id: I8f78f67a463e6467e09df90446f7ebd28789d6c9
    Reviewed-on: https://go-review.googlesource.com/19933
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit b462744e7088bd899ff14170146e31db5edd867e
Author: Keith Randall <khr@golang.org>
Date:   Fri Feb 26 11:01:14 2016 -0800

    [dev.ssa] test: remove extra tests from non-SSA builds
    
    non-SSA backends are all over the map as to whether nil checks
    get removed or not.  amd64, 386, 386/387, arm are all subtly different.
    Remove these extra checks for now, they are in nilptr3_ssa.go so they
    won't get lost.
    
    Change-Id: I2e0051f488fb2cb7278c6fdd44cb9d68b5778345
    Reviewed-on: https://go-review.googlesource.com/19961
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 90fea9d09ac9876147c7223884a09357c3418ed2
Author: Derek Shockey <derek.shockey@gmail.com>
Date:   Tue Feb 23 21:17:25 2016 -0800

    misc/git: Fix non-literal period in pre-commit grep
    
    Looks like this was intended to match a literal period to restrict
    this to `.go` files, but in POSIX grep, the unescaped period matches
    any character.
    
    Change-Id: I20e00323baa9e9631792eff5035966297665bbee
    Reviewed-on: https://go-review.googlesource.com/19880
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c2d3e1123c2f49aab02260f125a940ed723e42a0
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Sat Feb 20 18:36:03 2016 -0200

    cmd/go: better error for test functions with wrong signature
    
    Check the function types before compiling the tests. Extend the same
    approach taken by the type check used for TestMain function.
    
    To keep existing behavior, wrong arguments for TestMain are ignored
    instead of causing an error.
    
    Fixes #14226.
    
    Change-Id: I488a2555cddb273d35c1a8c4645bb5435c9eb91d
    Reviewed-on: https://go-review.googlesource.com/19763
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e1035c5e878c0aae938f4ee933055d4333c5cbe5
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Feb 26 16:14:31 2016 +0100

    sync/atomic: reduce test in short mode
    
    In normal mode the test runs for 9+ seconds on my machine (48 cores).
    But the real problem is race mode, in race mode it hits 10m test timeout.
    Reduce test size in short mode. Now it runs for 100ms without race.
    
    Change-Id: I9493a0e84f630b930af8f958e2920025df37c268
    Reviewed-on: https://go-review.googlesource.com/19956
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9f26170a02327c7e03dff148faf278866a79f8b4
Author: Rick Arnold <rickarnoldjr@gmail.com>
Date:   Thu Feb 25 22:24:07 2016 -0500

    net/url: support query string without values
    
    Previously, RawQuery was used to indicate the presence of a query
    string in url.URL. However, this approach was not able to differentiate
    between URLs that have no query string at all (http://foo.bar/) and
    those that have a query with no values (http://foo.bar/?).
    
    Add a ForceQuery field to indicate the latter form of URL and use it
    in URL.String to create a matching URL with a trailing '?'.
    
    Fixes #13488
    
    Change-Id: Ifac663c73d35759bc6c33a00f84ab116b9b81684
    Reviewed-on: https://go-review.googlesource.com/19931
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bdc14698f8b79e9629a8321d4f904c3275f8ffed
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Feb 26 10:43:09 2016 +0100

    runtime: unwire g/m in dropg always
    
    Currently dropg does not unwire locked g/m.
    This is unnecessary distiction between locked and non-locked g/m.
    We always restart goroutines with execute which re-wires g/m.
    
    First, this produces false sense that this distinction is necessary.
    Second, it can confuse some sanity and cross checks. For example,
    if we check that g/m are unwired before we wire them in execute,
    the check will fail for locked g/m. I've hit this while doing some
    race detector changes, When we deschedule a goroutine and run
    scheduler code, m.curg is generally nil, but not for locked ms.
    
    Remove the distinction.
    
    Change-Id: I3b87a28ff343baa1d564aab1f821b582a84dee07
    Reviewed-on: https://go-review.googlesource.com/19950
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3b3d58e1190f19e31bded9ab7166a736048bc24b
Author: Austin Clements <austin@google.com>
Date:   Thu Feb 25 21:01:16 2016 -0500

    runtime: remove workbuf logging
    
    Early in Go 1.5 we had bugs with ownership of workbufs, so we added a
    system for tracing their ownership to help debug these issues.
    However, this system has both CPU and space overhead even when
    disabled, it clutters up the workbuf API, the higher level gcWork
    abstraction makes it very difficult to mess up the ownership of
    workbufs in practice, and the tracing hasn't been enabled or needed
    since 5b66e5d nine months ago. Hence, remove it.
    
    Benchmarks show the usual noise from changes at this level, but little
    overall movement.
    
    name              old time/op  new time/op  delta
    XBenchGarbage-12  2.48ms ± 1%  2.47ms ± 0%  -0.68%  (p=0.000 n=21+21)
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.98s ± 7%     2.98s ± 6%    ~     (p=0.799 n=20+20)
    Fannkuch11-12                2.61s ± 3%     2.55s ± 5%  -2.55%  (p=0.003 n=20+20)
    FmtFprintfEmpty-12          52.8ns ± 6%    53.6ns ± 6%    ~     (p=0.228 n=20+20)
    FmtFprintfString-12          177ns ± 4%     177ns ± 4%    ~     (p=0.280 n=20+20)
    FmtFprintfInt-12             162ns ± 5%     162ns ± 3%    ~     (p=0.347 n=20+20)
    FmtFprintfIntInt-12          277ns ± 7%     273ns ± 4%  -1.62%  (p=0.005 n=20+20)
    FmtFprintfPrefixedInt-12     237ns ± 4%     242ns ± 4%  +2.13%  (p=0.005 n=20+20)
    FmtFprintfFloat-12           315ns ± 4%     312ns ± 4%  -0.97%  (p=0.001 n=20+20)
    FmtManyArgs-12              1.11µs ± 3%    1.15µs ± 4%  +3.41%  (p=0.004 n=20+20)
    GobDecode-12                8.50ms ± 7%    8.53ms ± 7%    ~     (p=0.429 n=20+20)
    GobEncode-12                6.86ms ± 9%    6.93ms ± 7%  +0.93%  (p=0.030 n=20+20)
    Gzip-12                      326ms ± 4%     329ms ± 4%  +0.98%  (p=0.020 n=20+20)
    Gunzip-12                   43.3ms ± 3%    43.8ms ± 9%  +1.25%  (p=0.003 n=20+20)
    HTTPClientServer-12         72.0µs ± 3%    71.5µs ± 3%    ~     (p=0.053 n=20+20)
    JSONEncode-12               17.0ms ± 6%    17.3ms ± 7%  +1.32%  (p=0.006 n=20+20)
    JSONDecode-12               64.2ms ± 4%    63.5ms ± 3%  -1.05%  (p=0.005 n=20+20)
    Mandelbrot200-12            4.00ms ± 3%    3.99ms ± 3%    ~     (p=0.121 n=20+20)
    GoParse-12                  3.74ms ± 5%    3.75ms ± 9%    ~     (p=0.383 n=20+20)
    RegexpMatchEasy0_32-12       104ns ± 4%     104ns ± 6%    ~     (p=0.392 n=20+20)
    RegexpMatchEasy0_1K-12       358ns ± 3%     361ns ± 4%  +0.95%  (p=0.003 n=20+20)
    RegexpMatchEasy1_32-12      86.3ns ± 5%    86.1ns ± 6%    ~     (p=0.614 n=20+20)
    RegexpMatchEasy1_1K-12       523ns ± 4%     518ns ± 3%  -1.14%  (p=0.008 n=20+20)
    RegexpMatchMedium_32-12      137ns ± 3%     134ns ± 4%  -1.90%  (p=0.005 n=20+20)
    RegexpMatchMedium_1K-12     41.0µs ± 3%    40.6µs ± 4%  -1.11%  (p=0.004 n=20+20)
    RegexpMatchHard_32-12       2.13µs ± 4%    2.11µs ± 5%  -1.31%  (p=0.014 n=20+20)
    RegexpMatchHard_1K-12       64.1µs ± 3%    63.2µs ± 5%  -1.38%  (p=0.005 n=20+20)
    Revcomp-12                   555ms ±10%     548ms ± 7%  -1.17%  (p=0.011 n=20+20)
    Template-12                 84.2ms ± 5%    88.2ms ± 4%  +4.73%  (p=0.000 n=20+20)
    TimeParse-12                 365ns ± 4%     371ns ± 5%  +1.77%  (p=0.002 n=20+20)
    TimeFormat-12                361ns ± 4%     365ns ± 3%  +1.08%  (p=0.002 n=20+20)
    [Geo mean]                  64.7µs         64.8µs       +0.19%
    
    Change-Id: Ib043a7a0d18b588b298873d60913d44cd19f3b44
    Reviewed-on: https://go-review.googlesource.com/19887
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 0231f5420f22c40ce9c15ef4d3f51ce0bafa7fef
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Feb 17 13:03:21 2016 -0500

    cmd/compile: remove uncommonType.name
    
    Reduces binary size of cmd/go by 0.5%.
    For #6853.
    
    Change-Id: I5a4b814049580ab5098ad252d979f80b70d8a5f9
    Reviewed-on: https://go-review.googlesource.com/19694
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c8ae2e82c7262df1fa902b847e09f0aa776e7ccd
Author: Datong Sun <dndx@idndx.com>
Date:   Sat Feb 20 02:39:07 2016 -0600

    crypto/x509: better documentation for ParsePKIXPublicKey
    
    The existing documentation for ParsePKIXPublicKey is difficult to understand
    and the return type of the parsed public key are not mentioned explicitly.
    
    Descriptions about types of public key supported, as well as an example on
    how to use type assertions to determine return type of a parsed public key
    has been added.
    
    Fixes #14355
    
    Change-Id: Ib9561efb34255292735742c0b3e835c4b97ac589
    Reviewed-on: https://go-review.googlesource.com/19757
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 49d1e307108c4a52e65112926ce5f1acb04fd8d7
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 25 17:16:42 2016 -0800

    cmd/compile, go/parser: simpler binary expression parsing
    
    The existing nested loops are too tricky for me to grok and don't seem
    necessary.
    
    Change-Id: I75c65c8470b799d6f4cfb05bb1b4796c5d7d32e7
    Reviewed-on: https://go-review.googlesource.com/19927
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 4a346e7489038a0913f590da98a12f6e660b683a
Author: Keith Randall <khr@golang.org>
Date:   Thu Feb 25 13:45:22 2016 -0800

    [dev.ssa] cmd/compile: get rid of nil checks before float loads/stores
    
    Just like we do for integer loads/stores.
    
    Update #14511
    
    Change-Id: Ic6ca6b54301438a5701ea5fb0be755451cb24d45
    Reviewed-on: https://go-review.googlesource.com/19923
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Keith Randall <khr@golang.org>

commit c8579e57cb1f1c32a99dd57314c5ced1a457dde3
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Feb 25 00:52:16 2016 -0500

    build: use go tool dist list
    
    Change-Id: I9b79bd301d0b75ca1f16d4a05e3cb687a8428c14
    Reviewed-on: https://go-review.googlesource.com/19884
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7b74921d561fa3e8df4242cef692987f1f5975b4
Author: Andrew Gerrand <adg@golang.org>
Date:   Fri Feb 26 14:05:16 2016 +1100

    doc: add issue and pull request templates
    
    Fixes #14365
    
    Change-Id: I082329fe7a1e06c774a32e0e24e5c8736bb5a037
    Reviewed-on: https://go-review.googlesource.com/19877
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a5b7a8d6dd143b5b0b9631b0281559938d542c78
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 25 18:17:31 2016 -0800

    cmd/compile: simplify error sorting
    
    Errors have unique seq values (their index within the errors slice),
    so errcmp never needs to fallback to sorting by message text.
    Moreover, comparing by original index is exactly the purpose of using
    a stable sort algorithm (and sort.Stable was added in Go 1.2), so we
    really only need to compare by lineno.
    
    Change-Id: I7f534b72a05d899ae9788dc7ef0541dd92a8b578
    Reviewed-on: https://go-review.googlesource.com/19929
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e0fa809f4cd219c04efb5b4d78250ab937589dca
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 25 16:07:04 2016 -0800

    cmd/compile: rationalize (lex)?lineno handling
    
    Previously, many error messages inconsistantly used either lexlineno
    and lineno.  In general this works out okay because they're almost
    always the same.  The only exceptional case is after lexing a
    multi-line raw string literal, where lineno will be the line number of
    the opening quote and lexlineno is the line number of the closing
    quote.
    
    This CL makes the compiler's error message more consistent:
    
    - Lexer error messages related to invalid byte sequences (i.e., NUL
    bytes, bad UTF-8 sequences, and non-initial BOMs) are emitted at
    lexlineno (i.e., the source line that contains the invalid byte
    sequence).
    
    - All other error messages (notably the parser's "syntax errors") now
    use lineno.  The minor change from this is that bogus input like:
    
        package `
        bogus`
    
    will emit "syntax error: unexpected string literal, expecting name"
    error at line 1, instead of line 2.
    
    - Instead of maintaining prevlineno all the time, just record it
    when/where actually needed and not already available elsewhere (which
    turns out to be just one function).
    
    - Lastly, we remove the legacy "syntax error near ..." fallback in
    Yerror, now that the parser always emits more detailed syntax error
    messages.
    
    Change-Id: Iaf5f784223d0385fa3a5b09ef2b2ad447feab02f
    Reviewed-on: https://go-review.googlesource.com/19925
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 687abca1ea828dd4745d50c351f3b73ccd4d09be
Author: Keith Randall <khr@golang.org>
Date:   Fri Jan 15 18:17:09 2016 -0800

    runtime: avoid using REP prefix for IndexByte
    
    REP-prefixed instructions have a large startup cost.
    Avoid them like the plague.
    
    benchmark                  old ns/op     new ns/op     delta
    BenchmarkIndexByte10-8     22.4          5.34          -76.16%
    
    Fixes #13983
    
    Change-Id: I857e956e240fc9681d053f2584ccf24c1b272bb3
    Reviewed-on: https://go-review.googlesource.com/18703
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a337e30620ca8557943190a988f53487ced68f05
Author: kortschak <dan.kortschak@adelaide.edu.au>
Date:   Thu Feb 25 17:39:45 2016 +1030

    cmd/dist: don't run fortran test if fortran compilation fails
    
    Fixes #14498.
    
    Change-Id: I4cfab3e45898466179cefbd31c6f7f796da82363
    Reviewed-on: https://go-review.googlesource.com/19874
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cbe849fc38a63d55d74738276baab2fbc33e0c0d
Author: Austin Clements <austin@google.com>
Date:   Thu Feb 18 09:38:49 2016 -0500

    runtime: eliminate unused _Genqueue state
    
    _Genqueue and _Gscanenqueue were introduced as part of the GC quiesce
    code. The quiesce code was removed by 197aa9e, but these states and
    some associated code stuck around. Remove them.
    
    Change-Id: I69df81881602d4a431556513dac2959668d27c20
    Reviewed-on: https://go-review.googlesource.com/19638
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4eb33f6b8d6d1de70d7c08ab1258dd2852ecebe4
Author: Austin Clements <austin@google.com>
Date:   Thu Jan 21 13:44:16 2016 -0500

    runtime: eliminate a conditional branch from heapBits.bits
    
    Change-Id: I1fa5e629b2890a8509559ce4ea17b74f47d71925
    Reviewed-on: https://go-review.googlesource.com/19637
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0168c2676f73071331cd385cb3d174313c857738
Author: Austin Clements <austin@google.com>
Date:   Mon Nov 23 18:45:18 2015 -0500

    runtime: use only per-P gcWork
    
    Currently most uses of gcWork use the per-P gcWork, but there are two
    places that still use a stack-based gcWork. Simplify things by making
    these instead use the per-P gcWork.
    
    Change-Id: I712d012cce9dd5757c8541824e9641ac1c2a329c
    Reviewed-on: https://go-review.googlesource.com/19636
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7b229001e710f48134a51b2f5abebda4b35d9de4
Author: Austin Clements <austin@google.com>
Date:   Mon Nov 23 18:44:03 2015 -0500

    runtime: pass gcWork to markroot
    
    Currently markroot uses a gcWork on the stack and disposes of it
    immediately after marking one root. This used to be necessary because
    markroot was called from the depths of parfor, but now that we call it
    directly and have ready access to a gcWork at the call site, pass the
    gcWork in, use it directly in markroot, and share it across calls to
    markroot from the same P.
    
    Change-Id: Id7c3b811bfb944153760e01873c07c8d18909be1
    Reviewed-on: https://go-review.googlesource.com/19635
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>

commit 98130b39f50f51ac966201461b96a20f923c7d64
Author: Austin Clements <austin@google.com>
Date:   Tue Feb 9 18:37:41 2016 -0500

    runtime: remove noescape hacks from gcWork
    
    When gcWork was first introduced, the compiler's escape analysis
    wasn't good enough to detect that that method receiver didn't escape,
    so we had to hack around this.
    
    Now that the compiler can figure out this for itself, remove these
    hacks.
    
    Change-Id: I9f73fab721e272410b8b6905b564e7abc03c0dfe
    Reviewed-on: https://go-review.googlesource.com/19634
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0d26efb12ae255d0f4cbf9484c1fedc2596ff09c
Author: Austin Clements <austin@google.com>
Date:   Tue Feb 9 18:30:38 2016 -0500

    runtime: remove unnecessary clears of the heap bitmap
    
    Currently we clear the heap bitmap of a span both when we allocate
    that span *and* when we free it. There's no point in doing both, and
    we definitely have to write the heap bitmap when we allocate a span
    for pointer-sized objects, so switch to clearing only when we allocate
    a span.
    
    This results in a slight overall performance improvement; however,
    most of the benchmarks that get slower are very short, while the
    longer benchmarks generally got faster.
    
    name              old time/op  new time/op  delta
    XBenchGarbage-12  2.48ms ± 1%  2.47ms ± 1%  -0.58%  (p=0.000 n=91+91)
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.85s ± 2%     2.85s ± 2%    ~     (p=0.550 n=20+19)
    Fannkuch11-12                2.54s ± 0%     2.47s ± 1%  -2.72%  (p=0.000 n=19+18)
    FmtFprintfEmpty-12          51.3ns ± 4%    51.0ns ± 3%    ~     (p=0.223 n=20+20)
    FmtFprintfString-12          169ns ± 0%     167ns ± 0%  -1.18%  (p=0.000 n=17+16)
    FmtFprintfInt-12             160ns ± 0%     161ns ± 0%  +0.63%  (p=0.000 n=16+15)
    FmtFprintfIntInt-12          267ns ± 0%     269ns ± 1%  +0.62%  (p=0.000 n=17+20)
    FmtFprintfPrefixedInt-12     234ns ± 1%     240ns ± 0%  +2.80%  (p=0.000 n=20+20)
    FmtFprintfFloat-12           316ns ± 0%     313ns ± 0%  -0.76%  (p=0.000 n=20+19)
    FmtManyArgs-12              1.04µs ± 0%    1.05µs ± 0%  +0.45%  (p=0.000 n=19+16)
    GobDecode-12                7.90ms ± 1%    7.81ms ± 0%  -1.10%  (p=0.000 n=18+18)
    GobEncode-12                6.61ms ± 1%    6.58ms ± 0%  -0.46%  (p=0.000 n=20+15)
    Gzip-12                      320ms ± 1%     322ms ± 1%  +0.47%  (p=0.030 n=20+20)
    Gunzip-12                   42.4ms ± 1%    42.6ms ± 0%  +0.37%  (p=0.000 n=20+20)
    HTTPClientServer-12         70.7µs ± 1%    70.6µs ± 2%    ~     (p=0.784 n=18+20)
    JSONEncode-12               16.9ms ± 1%    16.8ms ± 0%  -0.64%  (p=0.000 n=20+20)
    JSONDecode-12               60.8ms ± 0%    58.6ms ± 1%  -3.50%  (p=0.000 n=17+18)
    Mandelbrot200-12            3.92ms ± 0%    3.91ms ± 0%  -0.25%  (p=0.000 n=19+19)
    GoParse-12                  3.65ms ± 0%    3.68ms ± 1%  +0.67%  (p=0.000 n=17+16)
    RegexpMatchEasy0_32-12       102ns ± 1%     102ns ± 2%  +0.67%  (p=0.009 n=19+19)
    RegexpMatchEasy0_1K-12       350ns ± 0%     351ns ± 1%  +0.34%  (p=0.002 n=20+20)
    RegexpMatchEasy1_32-12      84.1ns ± 2%    84.2ns ± 2%    ~     (p=0.799 n=20+18)
    RegexpMatchEasy1_1K-12       510ns ± 1%     508ns ± 1%  -0.45%  (p=0.000 n=20+17)
    RegexpMatchMedium_32-12      132ns ± 1%     134ns ± 1%  +0.85%  (p=0.000 n=20+19)
    RegexpMatchMedium_1K-12     40.0µs ± 1%    39.9µs ± 1%  -0.29%  (p=0.014 n=19+18)
    RegexpMatchHard_32-12       2.09µs ± 1%    2.05µs ± 0%  -1.76%  (p=0.000 n=20+18)
    RegexpMatchHard_1K-12       62.7µs ± 1%    61.8µs ± 1%  -1.39%  (p=0.000 n=20+19)
    Revcomp-12                   541ms ± 1%     534ms ± 0%  -1.16%  (p=0.000 n=19+20)
    Template-12                 71.1ms ± 0%    69.1ms ± 0%  -2.83%  (p=0.000 n=18+19)
    TimeParse-12                 356ns ± 0%     357ns ± 0%  +0.36%  (p=0.000 n=17+19)
    TimeFormat-12                358ns ± 0%     372ns ± 1%  +3.74%  (p=0.000 n=15+18)
    [Geo mean]                  62.6µs         62.5µs       -0.25%
    
    Change-Id: Ied190b77c7a4d91ec7b2218c592fc31cf7acf362
    Reviewed-on: https://go-review.googlesource.com/19633
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1e91e2a25a0058cc25b3836b59a0954c6c75a62c
Author: Austin Clements <austin@google.com>
Date:   Mon Feb 15 16:50:12 2016 -0500

    runtime: document non-obvious requirement on sudog.elem
    
    The channel code must not allow stack splits between when it assigns a
    potential stack pointer to sudog.elem (or sudog.selectdone) and when
    it makes the sudog visible to copystack by putting it on the g.waiting
    list. We do get this right everywhere, but add a comment about this
    subtlety for future eyes.
    
    Change-Id: I941da150437167acff37b0e56983c793f40fcf79
    Reviewed-on: https://go-review.googlesource.com/19632
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 39f2bd737bb0b9446b4d241aa76fcb87d7e77278
Author: Austin Clements <austin@google.com>
Date:   Tue Feb 9 17:34:14 2016 -0500

    runtime: improve initSpan documentation
    
    Change-Id: I9c45aad1c35a99da4c3b8990649dcd962fd23b81
    Reviewed-on: https://go-review.googlesource.com/19631
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e1024b6030e181f3994d93cac6099d3d0f341260
Author: Austin Clements <austin@google.com>
Date:   Tue Feb 9 17:24:26 2016 -0500

    runtime: fix heapBitsSweepSpan comment
    
    Currently the heapBitsSweepSpan comment claims that heapBitsSweepSpan
    sets the heap bitmap for the first two words to dead. In fact, it sets
    the first *four* words to scalar/dead. This is important because first
    two words don't actually have a dead bit, so for objects larger than
    two words it *must* set a dead bit in third word to reset the object
    to a "noscan" state. For example, we use this in heapBits.hasPointers
    to detect that an object larger than two words is noscan.
    
    Change-Id: Ie166a628bed5060851db083475c7377adb349d6c
    Reviewed-on: https://go-review.googlesource.com/19630
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d3f15ff6bc353d94b7249f33bb030ee1f7ee887e
Author: Keith Randall <khr@golang.org>
Date:   Thu Feb 25 11:40:51 2016 -0800

    [dev.ssa] cmd/compile: shrink stack guard
    
    Our stack frame sizes look pretty good now.  Lower the stack
    guard from 1024 to 720.
    Tip is currently using 720.
    We could go lower (to 640 at least) except PPC doesn't like that.
    
    Change-Id: Ie5f96c0e822435638223f1e8a2bd1a1eed68e6aa
    Reviewed-on: https://go-review.googlesource.com/19922
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit ca42f1f50e4cc26b896275673218d7376fab501d
Author: Dmitriy Dudkin <dudkin.dmitriy@gmail.com>
Date:   Thu Feb 25 21:48:57 2016 +0200

    cmd/go: clear cmd cache to avoid duplicate loads errors
    
    go get -u all command updates all packages including standard
    commands. We need to get commands evicted from their cache to
    avoid loading old versions of the packages evicted from the
    packages cache.
    
    Fixes #14444
    
    Change-Id: Icd581a26e1db34ca634aba595fed62b097094c2f
    Reviewed-on: https://go-review.googlesource.com/19899
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b24c6fbfb3303f994ea8adfdf68436d95d2f841b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jan 20 06:19:38 2016 +0000

    net/textproto: permit all valid token chars in CanonicalMIMEHeaderKey input
    
    Fixes #13767
    
    Change-Id: Ib743db7d9d72022ea911bc5ac535243489425642
    Reviewed-on: https://go-review.googlesource.com/18725
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 378a86368279ffdfecc50e91c4bcb61e72957d21
Author: David Chase <drchase@google.com>
Date:   Thu Feb 25 13:10:51 2016 -0500

    [dev.ssa] cmd/compile: enhance command line option processing for SSA
    
    The -d compiler flag can also specify ssa phase and flag,
    for example -d=ssa/generic_cse/time,ssa/generic_cse/stats
    
    Spaces in the phase names can be specified with an
    underscore.  Flags currently parsed (not necessarily
    recognized by the phases yet) are:
    
       on, off, mem, time, debug, stats, and test
    
    On, off and time are handled in the harness,
    debug, stats, and test are interpreted by the phase itself.
    
    The pass is now attached to the Func being compiled, and a
    new method logStats(key, ...value) on *Func to encourage a
    semi-standardized format for that output.  Output fields
    are separated by tabs to ease digestion by awk and
    spreadsheets.  For example,
            if f.pass.stats > 0 {
                    f.logStat("CSE REWRITES", rewrites)
            }
    
    Change-Id: I16db2b5af64c50ca9a47efeb51d961147a903abc
    Reviewed-on: https://go-review.googlesource.com/19885
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 13d6414e9dd070e6479d3244ca376cbb891c8751
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Feb 25 11:43:45 2016 -0800

    doc/go1.7: mention CallersFrames and Frames
    
    Change-Id: I73ae6a6837a6dcf75b3b8f431d97a18348e01a42
    Reviewed-on: https://go-review.googlesource.com/19921
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ad03af66ebfb368fe0f87262092094e1793a9ef5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Feb 21 12:50:35 2016 -0800

    runtime, runtime/pprof: add Frames to get file/line for Callers
    
    This indirectly implements a small fix for runtime/pprof: it used to
    look for runtime.gopanic when it should have been looking for
    runtime.sigpanic.
    
    Update #11432.
    
    Change-Id: I5e3f5203b2ac5463efd85adf6636e64174aacb1d
    Reviewed-on: https://go-review.googlesource.com/19869
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 14113b3a89624ee6d97a7847b68361158ad43822
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Feb 25 10:44:31 2016 -0800

    cmd/internal/obj: don't crash on nil in Prog.String
    
    I can't remember just how this happened to me, but I got an unfortunate
    crash with some set of cmd/compile debug options and source code.
    
    Change-Id: Ibef6129c50b68dad0594ac439466bfbc4b32a095
    Reviewed-on: https://go-review.googlesource.com/19920
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d44088f173efab62a25be9cf1f26c29982fc2617
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Fri Feb 19 02:10:56 2016 -0800

    net/http: refactored internal shouldClose for readability
    
    Change-Id: Ie89c0945a4cc3aebfa9f7ad7f107bc7ab59ab61c
    Reviewed-on: https://go-review.googlesource.com/19685
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit db44223fde80485132f477a51b690d5d54dad56e
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Thu Feb 25 19:16:18 2016 +0100

    runtime: fix getcallerpc args
    
    Change-Id: I6b14b8eecf125dd74bd40f4e7fff6b49de150e42
    Reviewed-on: https://go-review.googlesource.com/19897
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 30f93f09944c54147bec9e5c39631f17addd94c7
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Feb 18 06:31:57 2016 -0500

    cmd/compile: remove rtype.ptrToThis
    
    Simplifies some code as ptrToThis was unreliable under dynamic
    linking. Now the same type lookup is used regardless of execution
    mode.
    
    A synthetic relocation, R_USETYPE, is introduced to make sure the
    linker includes *T on use of T, if *T is carrying methods.
    
    Changes the heap dump format. Anything reading the format needs to
    look at the last bool of a type of an interface value to determine
    if the type should be the pointer-to type.
    
    Reduces binary size of cmd/go by 0.2%.
    For #6853.
    
    Change-Id: I79fcb19a97402bdb0193f3c7f6d94ddf061ee7b2
    Reviewed-on: https://go-review.googlesource.com/19695
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5abd327d0069af3abc353ba8ee77dd7d1c0c3e75
Author: Rick Arnold <rickarnoldjr@gmail.com>
Date:   Wed Feb 24 19:25:38 2016 -0500

    expvar: document that Get returns nil for non-existent vars
    
    Also added a test to ensure the behavior.
    
    Fixes #14150
    
    Change-Id: Ib3ee9fdae59826fa594ce1be3c49b51d740b56eb
    Reviewed-on: https://go-review.googlesource.com/19915
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fb54e0305fe209dd7ef36b901d28e7ee9b649442
Author: Keith Randall <khr@golang.org>
Date:   Wed Feb 24 16:19:20 2016 -0800

    [dev.ssa] cmd/compile: small improvements
    
    Found looking at mapaccess1_faststr.
    
    runtime.throw never returns.
    Do x+y+c with an LEA.
    
    Change-Id: I27ea6669324242a6302397cbdc73230891d97591
    Reviewed-on: https://go-review.googlesource.com/19911
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 4accfe1be5d6324a31543a6bfd9eadfa00d90342
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Feb 19 17:39:27 2016 +0900

    net: re-enable TestDualStack{TCP,UDP}Listener on dragonfly
    
    It looks like the latest DragonFly BSD kernels, at least 4.4 and above,
    have finished working on handling of shared IP control blocks. Let's
    re-enbale test cases referring to IP control blocks and see what
    happens.
    
    Updates #13146.
    
    Change-Id: Icbe2250e788f6a445a648541272c99b598c3013d
    Reviewed-on: https://go-review.googlesource.com/19406
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b48120ca3a5e8767ef1dea46c6231538f374a640
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Feb 24 11:59:49 2016 +0900

    net: make TestGoLookupIPWithResolverConfig robust
    
    It crashes when the node under the test is shaken up.
    
    -- FAIL: TestGoLookupIPWithResolverConfig (11.73s)
    panic: interface conversion: error is nil, not *net.DNSError [recovered]
            panic: interface conversion: error is nil, not *net.DNSError
    
    goroutine 23 [running]:
    panic(0x2e2620, 0xc820181440)
            /go/src/runtime/panic.go:483 +0x3f3
    testing.tRunner.func1(0xc820136d80)
            /go/src/testing/testing.go:467 +0x192
    panic(0x2e2620, 0xc820181440)
            /go/src/runtime/panic.go:441 +0x4f6
    net.TestGoLookupIPWithResolverConfig(0xc820136d80)
            /go/src/net/dnsclient_unix_test.go:358 +0x7ca
    testing.tRunner(0xc820136d80, 0x49ddc0)
            /go/src/testing/testing.go:473 +0x98
    created by testing.RunTests
            /go/src/testing/testing.go:582 +0x892
    exit status 2
    
    Change-Id: I9631f41a3c73f3269c7e30d679c025ae64d71a98
    Reviewed-on: https://go-review.googlesource.com/19870
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7c90abe2062436d0e583184f1f38f97b7aab3c14
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Feb 25 09:55:40 2016 +0900

    net: fix typo
    
    Change-Id: Ic828256efe0f50a3e11a25d85092d7531b342d2e
    Reviewed-on: https://go-review.googlesource.com/19873
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d2e1dae3fec6953a37702710a3a7d7998c41bb69
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Feb 24 16:17:49 2016 -0800

    cmd/compile: adjust starting token value
    
    The actual values assigned to tokens was inherited from the yacc-based
    grammar. With the most recent cleanups, all single-char tokens such as
    commas, semis, parens, etc., that get returned from lexer.next simply
    as their Unicode values are below utf8.RuneSelf (i.e., 7bit ASCII).
    Lower the initial starting value for named token constants accordingly.
    
    Change-Id: I7eb8e584dbb3bc7f9dab849d1b68a91320cffebd
    Reviewed-on: https://go-review.googlesource.com/19913
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 772cea817d075c496091f4c735800f14159c5051
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Feb 24 16:20:59 2016 -0800

    cmd/compile: fix off-by-1 in getr
    
    Introduced by (and missed during code review of) golang.org/cl/19847.
    
    Change-Id: I03b76f36e5da69c31730380592dfa1c32570e17f
    Reviewed-on: https://go-review.googlesource.com/19912
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9e173f9db97b98b25efd708b72108012a8b5d7f6
Author: Burcu Dogan <jbd@google.com>
Date:   Wed Feb 24 15:06:03 2016 -0800

    doc: add android/arm as a valid GOOS/GOARCH combination
    
    Fixes #14497.
    
    Change-Id: Ibdd55acf9e416873c64f8751c2f65f7ccdb1d500
    Reviewed-on: https://go-review.googlesource.com/19914
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 45c4ebec5bdd387842868d38dbe495e2992302e1
Author: Tal Shprecher <tshprecher@gmail.com>
Date:   Fri Feb 19 16:02:54 2016 -0800

    cmd/asm: fix EOF message on operand parsing errors.
    
    If the parsing of an operand completes but the parser thinks there
    is more to read, return an "expected end of operand" error message
    instead of "expected EOF." This also removes extra "asm: " prefixes
    in error strings since "asm: " is already set as the global log
    prefix.
    
    Fixes #14071
    
    Change-Id: I7d621c1aea529a0eca3bcba032359bd25b3e1080
    Reviewed-on: https://go-review.googlesource.com/19731
    Reviewed-by: Rob Pike <r@golang.org>

commit d17727bdb4b925427dd03d6b235b586418e47f89
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Feb 24 11:49:31 2016 -0800

    cmd/compile: cleanup escape sequence lexing
    
    Change-Id: I7fe4d0cdcc284d5319c130ee3c351f23489af273
    Reviewed-on: https://go-review.googlesource.com/19902
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 588876342876ca18e350638a73d0f1a12abf7856
Author: Damien Neil <dneil@google.com>
Date:   Wed Feb 24 15:18:41 2016 -0800

    cmd/go: skip consistent cgo build test on Solaris.
    
    See #13247.
    
    Change-Id: I06636157028d98430eb29277c822270592907856
    Reviewed-on: https://go-review.googlesource.com/19910
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0625fc8e8229f64a98c45c652fe35119048925cc
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jun 8 10:17:38 2015 -0700

    cmd/compile: clean up getlinepragma
    
    Passes toolstash -cmp.
    
    Change-Id: Ia497b51c74a9c760a873e1ed690e4408fd0fe596
    Reviewed-on: https://go-review.googlesource.com/19844
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a5325761cd42f2a10566fd421f8c8b0189bedc18
Author: Keith Randall <khr@golang.org>
Date:   Wed Feb 24 12:58:47 2016 -0800

    [dev.ssa] cmd/compile: identical values are the same pointer
    
    Forgot the obvious case.  Allows us to remove the load in:
    
    func f(p *int, x int) int {
            *p = x + 5
            return *p
    }
    
    Change-Id: I93686d8240bab3a1d166b88e224cf71e3d947aef
    Reviewed-on: https://go-review.googlesource.com/19905
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ed737fd8cdc1a668027bb5f5dac8879afabcca3b
Author: Keith Randall <khr@golang.org>
Date:   Wed Feb 24 10:29:27 2016 -0800

    [dev.ssa] cmd/compile: fix @ rewrite rules
    
    The @ directive used to read the target block after some value
    structure had already changed.  I don't think it was ever really
    a bug, but it's confusing.
    
    It might fail like this:
    
    (Foo x y) -> @v.Args[0].Block (Bar y (Baz ...))
    
    v.Op = Bar
    v.Args[0] = y
    v.Args[1] = v.Args[0].Block.NewValue(Baz, ...)
    
    That new value is allocated in the block of y, not the
    block of x.
    
    Anyway, read the destination block first so this
    potential bug can't happen.
    
    Change-Id: Ie41d2fc349b35cefaa319fa9327808bcb781b4e2
    Reviewed-on: https://go-review.googlesource.com/19900
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit e173ab14345b1f205a8f14e25a81184752a9d43b
Author: Keith Randall <khr@golang.org>
Date:   Wed Feb 24 13:08:00 2016 -0800

    [dev.ssa] cmd/compile: update TODO
    
    Remove the stuff that's already done.
    
    Change-Id: I3b4fc827240d45dd051dc36897883532d8900a0c
    Reviewed-on: https://go-review.googlesource.com/19906
    Reviewed-by: David Chase <drchase@google.com>

commit 9c269e6a46fce4ee19e1603eaa9f5bb78dec78fd
Author: Keith Randall <khr@golang.org>
Date:   Wed Feb 24 14:07:25 2016 -0800

    cmd/compile: don't free the Prog list if we look at it after flush
    
    Only tests do this, provide them a hook to disable freeing
    after flush.
    
    Change-Id: I810c6c51414a93f476a18ba07b807e16092bf8cf
    Reviewed-on: https://go-review.googlesource.com/19907
    Reviewed-by: Keith Randall <khr@golang.org>

commit a9581e2e7abfa0dd7033ee75ef6a64ce0a89bee2
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Tue Feb 23 22:54:38 2016 +0100

    unicode/utf16: speed up and clean up Encode and EncodeRune
    
    name                        old time/op  new time/op  delta
    EncodeValidASCII-4          74.1ns ± 1%  70.1ns ± 1%   -5.46%  (p=0.000 n=10+10)
    EncodeValidJapaneseChars-4  61.3ns ± 0%  58.9ns ± 0%   -3.82%  (p=0.000 n=10+10)
    EncodeRune-4                13.1ns ± 1%   9.8ns ± 0%  -25.24%   (p=0.000 n=10+9)
    
    Fixes #6957
    
    Change-Id: I9dde6d77420c34c6e2ef3e6213bb6be9b58a3074
    Reviewed-on: https://go-review.googlesource.com/19891
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 47b04228858e9a4a767acd12a029e59d582f3ba1
Author: Burcu Dogan <jbd@google.com>
Date:   Wed Feb 24 11:58:57 2016 -0800

    os: fix tests on brillo
    
    Not every Android contains the /system/framework directory, e.g. Brillo.
    Test against other Android-only system files.
    
    Fixes #14489.
    
    Change-Id: I6d9ec1c4d4ceba3803798015e6917d59cf515de8
    Reviewed-on: https://go-review.googlesource.com/19904
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Burcu Dogan <jbd@google.com>
    Run-TryBot: Burcu Dogan <jbd@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f388b58540c2cc401dfa79e3d7b6a1846ac9a59f
Author: Keith Randall <khr@golang.org>
Date:   Wed Feb 24 09:53:27 2016 -0800

    cmd/compile: reuseable cache of Prog structs
    
    Reuseable cache of Prog entries.
    
    Improves compiler speed by ~10%.
    
    Update #13646
    
    Change-Id: I01bd8606540d989ea8b8ba5131d1275ba380d976
    Reviewed-on: https://go-review.googlesource.com/19868
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 45c2e38b37e40c3b6bdc508065edce0643f79110
Author: Keith Randall <khr@golang.org>
Date:   Wed Feb 24 09:12:51 2016 -0800

    cmd/compile: Drop references to Prog structs after each function
    
    Don't accumulate a massive list of Prog structs during
    compilation and write them all out at the end of compilation.
    Instead, convert them to code+relocs (or data+relocs) after each
    function is compiled.
    
    Track down a few other places that were keeping Progs alive
    and nil them out so the Progs get GCd promptly.
    
    Saves ~20% in peak memory usage for the compiler.  Surprisingly not much
    help speed-wise (only because we end up doing more GCs.  With a
    compensating GOGC=120, it does help a bit), but this provides a base for
    more changes (e.g. reusing a cache of Progs).
    
    Change-Id: I838e01017c228995a687a8110d0cd67bf8596407
    Reviewed-on: https://go-review.googlesource.com/19867
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fdd0179bb1fdd70d405929b78c7d2fb6b61369b0
Author: Martin Möhrmann <martisch@uos.de>
Date:   Wed Feb 24 11:55:20 2016 +0100

    all: fix typos and spelling
    
    Change-Id: Icd06d99c42b8299fd931c7da821e1f418684d913
    Reviewed-on: https://go-review.googlesource.com/19829
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4feb47bc765d2cd7d774b0a28b06e8d81a1affe7
Author: Eric Lagergren <ericscottlagergren@gmail.com>
Date:   Tue Feb 23 18:19:52 2016 -0800

    encoding/csv: clarify that TrimLeadingSpace can trim the delimiter
    
    Fixes #14464
    
    Change-Id: Iafc21641cca7d35b7a5631cfc94742ee8e7d5042
    Reviewed-on: https://go-review.googlesource.com/19861
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 039d455f9d3d5d5109424f15d86b7f9b63768b42
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Feb 24 19:00:10 2016 +0100

    cmd/compile: don't use duffzero on Plan 9
    
    In CL 14408, the implementation of duffzero on amd64
    was changed to replace the use of the MOVQ instructions
    by MOVUPS.
    
    However, it broke the build on plan9/amd64, since
    Plan 9 doesn't allow floating point in note handler.
    
    This change disables the use of duffzero on Plan 9.
    We also take care to not use the MOVUPS instruction.
    
    Fixes #14471.
    
    Change-Id: I8277b485dfe65a68d7d8338e52a048c5d45069bf
    Reviewed-on: https://go-review.googlesource.com/19890
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a8589312004157de09677e182c3c77399f2d628d
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Feb 16 22:23:14 2016 -0500

    cmd/compile: embed type string header in rtype
    
    Reduces binary size of cmd/go by 1%.
    
    For #6853.
    
    Change-Id: I6f2992a4dd3699db1b532ab08683e82741b9c2e4
    Reviewed-on: https://go-review.googlesource.com/19692
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 288817b05a0ea1671c87b7c3ed021fed874d0caa
Author: David Chase <drchase@google.com>
Date:   Tue Feb 23 21:09:39 2016 -0500

    [dev.ssa] cmd/compile: reduce line number churn in generated code
    
    In regalloc, make LoadReg instructions use the line number
    of their *use*, not their *source*.  This reduces the
    tendency of debugger stepping to "jump around" the program.
    
    Change-Id: I59e2eeac4dca9168d8af3a93effbc5bdacac2881
    Reviewed-on: https://go-review.googlesource.com/19836
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit b96189d1a046f7a70a632bd02106bd15e096dfa1
Author: Todd Neal <todd@tneal.org>
Date:   Tue Feb 23 17:52:17 2016 -0600

    [dev.ssa] cmd/compile: speed up cse
    
    Construct better initial partitions by recursively comparing values and
    their arguments.  This saves one second on compile of arithConst_ssa.go
    (4.3s to 3.3s) and shows a 3-5% increase with compilebench.
    
    name       old time/op     new time/op     delta
    Template       266ms ± 3%      253ms ± 4%  -5.08%          (p=0.032 n=5+5)
    GoTypes        927ms ± 3%      885ms ± 2%  -4.55%          (p=0.016 n=5+5)
    Compiler       3.91s ± 3%      3.73s ± 2%  -4.49%          (p=0.008 n=5+5)
    MakeBash       31.6s ± 1%      30.5s ± 3%  -3.51%          (p=0.016 n=5+5)
    
    Change-Id: I6ede31ff459131ccfed69531acfbd06b19837700
    Reviewed-on: https://go-review.googlesource.com/19838
    Reviewed-by: David Chase <drchase@google.com>

commit 8dd2ce2b980d341a4c88e4f3c95e4eca396b6a07
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Feb 23 22:04:20 2016 -0800

    cmd/compile: factor our literal lexing from main lexer function
    
    Further reduces complexity of lexer.next which is now readable.
    Also removes the need to initialize various local variables in
    each next call even if they are not used for the current token.
    
    No measurable performance change for `time go build -a net/http`
    (best of 5 runs): difference < 0.3% (in the noise).
    
    Change-Id: I0d74caa2768920af1ceee027e0f46595119d4210
    Reviewed-on: https://go-review.googlesource.com/19865
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8906d2a171153ab337a88d4e9f59a7626ac55019
Author: Keith Randall <khr@golang.org>
Date:   Mon Feb 22 23:19:00 2016 -0800

    [dev.ssa] cmd/compile: leave JMPs in when using -N
    
    Helps keep line numbers around for debugging, particularly
    for break and continue statements (which often compile
    down to nothing).
    
    Update #14379
    
    Change-Id: I6ea06aa887b0450d9ba4f11e319e5c263f5a98ba
    Reviewed-on: https://go-review.googlesource.com/19848
    Reviewed-by: David Chase <drchase@google.com>

commit 38d4511b104ad61d949d91652985bcdef8cbea5a
Author: Jure Ham <jure.ham@zemanta.com>
Date:   Tue Feb 23 11:41:27 2016 +0100

    sort: fix for nondeterministic less function in quicksort pivot
    
    Fixes #14377
    
    Change-Id: I130a6e1b8bc827db44efd0a74e759b894ecc4977
    Reviewed-on: https://go-review.googlesource.com/19823
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 50c38d46e870435c17ac86957e2eb469ce41dd6d
Author: kortschak <dan.kortschak@adelaide.edu.au>
Date:   Thu Feb 18 21:19:03 2016 +1030

    cmd/go, go/build: add support for Fortran
    
    This change adds support for Fortran files (.f, .F, .for, .f90) to the
    go tool, in a similar fashion to Objective-C/C++. Only gfortran is
    supported out of the box so far but leaves other Fortran compiler
    toolchains the ability to pass the correct link options via CGO_LDFLAGS.
    A simple test (misc/cgo/fortran) has been added and plugged into the
    general test infrastructure. This test is only enabled when the $FC
    environment variable is defined (or if 'gfortran' was found in $PATH.)
    
    Derived from CL 4114.
    
    Change-Id: Ifc855091942f95c6e9b17d91c17ceb4eee376408
    Reviewed-on: https://go-review.googlesource.com/19670
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6e6637bdb478e98d32dd10659ea1975a00aeda0a
Author: Catalin Nicutar <cnicutar@google.com>
Date:   Sun Feb 21 18:32:25 2016 +0000

    cmd/vet: add a check for tests with malformed names
    
    According to golang.org/pkg/testing the first character after Test has
    to be non-lowercase. Functions that don't conform to this are not
    considered tests and are not loaded which can cause surprises.
    
    This change adds a check to warn about Test-like functions in a _test
    file that are not actually run by go test.
    
    Moved over from https://go-review.googlesource.com/#/c/19466/
    
    Change-Id: I2f89676058b27a0e35f721bdabc9fa8a9d34430d
    Reviewed-on: https://go-review.googlesource.com/19724
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit d337e55672c0ea6c29af2615e5fa345941f822c4
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Feb 23 21:48:33 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: simplify convert in more cases
    
    Saves about 2k for binaries in pkg/tool/linux_amd64.
    Also useful when opt runs after cse (as in 12960) which reorders
    arguments for commutative operations such as Add64.
    
    Change-Id: I49ad53afa53db9736bd35c425f4fb35fb511fd63
    Reviewed-on: https://go-review.googlesource.com/19827
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit c3ecded729214abf8a146902741cd6f9d257f68c
Author: Shenghou Ma <minux@golang.org>
Date:   Wed Feb 24 12:34:56 2016 -0500

    cmd/dist: introduce list subcommand to list all supported platforms
    
    Fixes #12270.
    
    Change-Id: Ie3dcbd0403d270b4b7f5c39049e12315eee159ed
    Reviewed-on: https://go-review.googlesource.com/19837
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 539aa05a643e1e53d050ee94b1e6d2e8607ea7ac
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Feb 22 23:07:30 2016 -0800

    cmd/compile: towards simpler and faster lexing: always use getr
    
    Always reading runes (rather than bytes) has negligible overhead
    (a simple if at the moment - it can be eliminated eventually) but
    simplifies the lexer logic and opens up the door for speedups.
    In the process remove many int conversions that are now not needed
    anymore.
    
    Also, because identifiers are now more easily recognized, remove
    talph label and move identifier lexing "in place".
    
    Also, instead of accepting all chars < 0x80 and then check for
    "frogs", only permit valid characters in the first place. Removes
    an extra call for common simple tokens and leads to simpler logic.
    
    `time go build -a net/http` (best of 5 runs) seems 1% faster.
    Assuming this is in the noise, there is no noticeable performance
    degradation with this change.
    
    Change-Id: I3454c9bf8b91808188cf7a5f559341749da9a1eb
    Reviewed-on: https://go-review.googlesource.com/19847
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 814978a013e0a11512b5f9fc103e522e506db113
Author: Shenghou Ma <minux@golang.org>
Date:   Tue Feb 23 23:15:57 2016 -0500

    .gitignore: ignore src/go/build/zcgo.go
    
    Change-Id: I6d5db2781d05d6e7e49f5059db1fd84ad6ec328e
    Reviewed-on: https://go-review.googlesource.com/19839
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 08f1a778c90b572716c6333c792e5f9bacef81c2
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Feb 23 18:06:31 2016 +0900

    net: rename test files
    
    This change renames {ipraw,tcp,udp,unix}_test.go to
    {ipraw,tcp,udp,unix}sock_test.go for clarification. Also moves
    NSS-related system configuration test helpers into main_conf_test.go and
    main_noconf_test.go.
    
    Change-Id: I28ba1e8ceda7b182ee3aa85f0ca3321388ba45e2
    Reviewed-on: https://go-review.googlesource.com/19787
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1439158120742e5f41825de90a76b680da64bf76
Author: Shenghou Ma <minux@golang.org>
Date:   Tue Feb 23 01:26:50 2016 -0500

    runtime, syscall: switch linux/386 to use int 0x80
    
    Like bionic, musl also doesn't provide vsyscall helper in %gs:0x10,
    and as int $0x80 is as fast as calling %gs:0x10, just use int $0x80
    always.
    
    Because we're no longer using vsyscall in VDSO, get rid of VDSO code
    for linux/386 too.
    
    Fixes #14476.
    
    Change-Id: I00ec8652060700e0a3c9b524bfe3c16a810263f6
    Reviewed-on: https://go-review.googlesource.com/19833
    Run-TryBot: Minux Ma <minux@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5c096cc092013331022c33c5e3d31228edd17dab
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Feb 23 17:16:21 2016 -0800

    runtime: deflake TestCgoCheckBytes
    
    Bump up the multiplier to 20.  Also run the fast version first, so that
    the slow version is likely to start up faster.
    
    Change-Id: Ia0654cc1212ab03a45da1904d3e4b57d6a8d02a0
    Reviewed-on: https://go-review.googlesource.com/19835
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 7606e4a032616f2321754311731aea528d04088e
Author: Shenghou Ma <minux@golang.org>
Date:   Tue Feb 23 19:20:41 2016 -0500

    cmd/compile/internal/gc: update comment after c2go
    
    Change-Id: I02c60f6c767e917a8ed3772c2773fe266f781e44
    Reviewed-on: https://go-review.googlesource.com/19834
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 733cae6acdbf191af673498fd23df46dfefd6d04
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Sep 3 20:27:12 2015 -0400

    cmd/dist, go/build: make cmd/dist generate cgoEnabled map for go/build
    
    This reduces the amount of duplication. Now there is only one list
    of platforms supporting cgo.
    
    Update #12270.
    
    Change-Id: I5dcd55cb6be7c5bb6ce560383c71d90ab1189dc9
    Reviewed-on: https://go-review.googlesource.com/14278
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1e4e09612c9b48abc32bd4b75700440a7eeaa318
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Feb 23 15:29:19 2016 -0800

    cmd/compile: remove parser lineno hack for issue #13267
    
    After golang.org/cl/19652 removed the bizarre lexlineno{++,--}
    statements for parsing canned imports, this hack for #13267 is no
    longer necessary:
    
        $ echo -n 0 > /tmp/0.go
        $ go tool compile /tmp/0.go
        /tmp/0.go:1: syntax error: package statement must be first
    
    Apparently setting lexlineno to 2 while parsing the canned imports
    caused prevlineno and lineno to also be set to 2.  After we finished
    parsing imports and restored lexlineno to 1, since "package" is the
    first token in a source file, we'll have fixed lineno = 1, but
    prevlineno was still set to 2.
    
    Change-Id: Ibcc49fe3402264819b9abb53505631f7a0ad4a36
    Reviewed-on: https://go-review.googlesource.com/19859
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit e360f7c4dbb5695fc4cadb3d400e36ec09327732
Author: Keith Randall <khr@golang.org>
Date:   Tue Feb 23 10:54:36 2016 -0800

    cmd/compile: keep JMPs around with -N
    
    When -N, make sure we don't drop every instruction from
    a block, even ones which would otherwise be empty.
    Helps keep line numbers around for debugging, particularly
    for break and continue statements (which often compile
    down to nothing).
    
    Fixes #14379
    
    Change-Id: I33722c4f0dcd502f146fa48af262ba3a477c959a
    Reviewed-on: https://go-review.googlesource.com/19854
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit c4cb365ea23f4e3bd571f63a16d59ad6c01df145
Author: Prashant Varanasi <prashant@prashantv.com>
Date:   Sat Feb 20 09:43:15 2016 -0800

    net: fix for DialTimeout errors with large timeout
    
    The existing implementation converts the deadline time to an int64,
    but does not handle overflow. If the calculated deadline is negative
    but the user specified deadline is in the future, then we can assume
    the calculation overflowed, and set the deadline to math.MaxInt64.
    
    Fixes #14431
    
    Change-Id: I54dbb4f02bc7ffb9cae8cf62e4e967e9c6541ec6
    Reviewed-on: https://go-review.googlesource.com/19758
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 80bc512449e80f514f559d1d43d7e6f4943457a0
Merge: 40f2b57 7786f97
Author: Keith Randall <khr@golang.org>
Date:   Tue Feb 23 14:32:55 2016 -0800

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge from tip to dev.ssa.
    
    Change-Id: If7d2269f267bcbc0ecd3a483d349951044470e3f

commit d1cc7f70cdd4c99e821165b0e773e748a438f5b8
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Feb 23 13:35:12 2016 -0800

    cmd/compile: give informative error instead of "stupid shift"
    
    Fixes #13940.
    
    Change-Id: I00fe377c949e5be4cbc035f6ca18e547e326bfba
    Reviewed-on: https://go-review.googlesource.com/19856
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ef3c45adfcd91375765e662d875b71f65d455016
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Feb 23 11:15:56 2016 -0800

    text/tabwriter: clarify documentation
    
    More clearly distinguish between tab-terminated cells
    which are part of an (aligned) column, and non-tab terminated
    cells which are not part of a column. Added additional examples.
    
    For #14412.
    
    Change-Id: If72607385752e221eaa2518238b11f48fbcb8a90
    Reviewed-on: https://go-review.googlesource.com/19855
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 7786f9790561ceda98e9883256ed50d26fa136d6
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Tue Feb 23 18:45:38 2016 +0100

    unicode/utf16: speed up and clean up Decode
    
    name                        old time/op  new time/op  delta
    DecodeValidASCII-4          94.7ns ± 1%  87.4ns ± 1%  -7.71%  (p=0.000 n=10+9)
    DecodeValidJapaneseChars-4  91.0ns ± 2%  84.8ns ± 0%  -6.77%  (p=0.000 n=9+10)
    DecodeRune-4                16.5ns ± 0%  16.6ns ± 2%    ~     (p=0.108 n=9+10)
    
    For #6957
    
    Change-Id: I618c15c2a42ef7ec6a5cd163b7c3f1a65ca4ad01
    Reviewed-on: https://go-review.googlesource.com/19826
    Reviewed-by: Rob Pike <r@golang.org>

commit 9877900c8c9c21704c0052c65e39216c6f400706
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Feb 23 07:46:01 2016 +0000

    Revert "cmd/compile: move hiter, hmap, and scase definitions into builtin.go"
    
    This reverts commit f28bbb776a050cc3edca2bbe1241d81217a7a251.
    
    Change-Id: I82fb81dcff3ddcaefef72949f1ef3a41bcd22301
    Reviewed-on: https://go-review.googlesource.com/19849
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 676550d040fcd91d080df5df85b61b3f32393e6f
Author: Paul Marks <pmarks@google.com>
Date:   Mon Feb 8 20:25:38 2016 -0800

    net: use dialTCP cancelation for DualStack dialing.
    
    The previous Happy Eyeballs implementation would intentionally leak
    connections, because dialTCP could not be reliably terminated upon
    losing the race.
    
    Now that dialTCP supports cancelation (plan9 excluded), dialParallel can
    wait for responses from both the primary and fallback racers, strictly
    before returning control to the caller.
    
    In dial_test.go, we no longer need Sleep to avoid leaks.
    Also, fix a typo in the Benchmark IPv4 address.
    
    Updates #11225
    Fixes #14279
    
    Change-Id: Ibf3fe5c7ac2f7a438c1ab2cdb57032beb8bc27b5
    Reviewed-on: https://go-review.googlesource.com/19390
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5583e8a4213467d3401710873f67403cb2de22f7
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Feb 23 10:42:06 2016 -0800

    spec: fix EBNF for slice syntax
    
    The () parentheses grouped wrongly. Removed them completely in
    favor of separate 2- and 3-index slice alternatives which is
    clearer.
    
    Fixes #14477.
    
    Change-Id: I0b7521ac912130d9ea8740b8793b3b88e2609418
    Reviewed-on: https://go-review.googlesource.com/19853
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 40f2b57e0b007aaabe2b6ec5650223d047cd1452
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Feb 22 17:14:53 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: eliminate phis during deadcode removal
    
    While investigating the differences between 19710 (remove
    tautological controls) and 12960 (bounds and nil propagation)
    I observed that part of the wins of 19710 come from missed
    opportunities for deadcode elimination due to phis.
    See for example runtime.stackcacherelease. 19710 happens much
    later than 12960 and has more chances to eliminate bounds.
    
    Size of pkg/tool/linux_amd64/* excluding compile:
    
    -this -12960 95882248
    +this -12960 95880120
    -this +12960 95581512
    +this +12960 95555224
    
    This change saves about 25k.
    
    Change-Id: Id2f4e55fc92b71595842ce493c3ed527d424fe0e
    Reviewed-on: https://go-review.googlesource.com/19728
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 735e5a483c428d6e99e7f62f7b40b3369afb3591
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Feb 18 11:02:39 2016 -0500

    cmd/compile: stop aligning string data
    
    Makes godoc 10KB smaller.
    For #6853.
    
    Change-Id: Id54bd8c82cb2a1ba11d2d724e3107f73024b19d9
    Reviewed-on: https://go-review.googlesource.com/19696
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cd41db34bcd1776a783fb7507b68705a7de4e54a
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sat Jan 30 22:01:00 2016 +0100

    regexp: remove unreachable code
    
    Found running go vet on the package. It barks that
            regexp/backtrack.go:257: unreachable code
            regexp/backtrack.go:302: unreachable code
    
    For #11041
    
    Change-Id: I0f5ba0d6183108fba3d144991b826273db0ffb09
    Reviewed-on: https://go-review.googlesource.com/19824
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4ded58bd5a00f9f751bfc02cc1b7dd5970632a02
Author: Harshavardhana <hrshvardhana@gmail.com>
Date:   Wed Jan 13 15:52:54 2016 -0800

    net/http/httputil: Keep response headers when response ContentLength is 0.
    
    Current code does not print any response headers from httputil.DumpResponse().
    
       PUT /miniocloud/new-file HTTP/1.1
       Host: s3.amazonaws.com
       User-Agent: Go-http-client/1.1
       Content-Length: 11
       Accept-Encoding: gzip
    
       HTTP/1.1 200 OK
    
    With this fix we get an appropriate output for httputil.DumpResponse().
    
       PUT /miniocloud/new-file HTTP/1.1
       Host: s3.amazonaws.com
       User-Agent: Go-http-client/1.1
       Content-Length: 11
       Accept-Encoding: gzip
    
       HTTP/1.1 200 OK
       Content-Length: 0
       Date: Thu, 14 Jan 2016 03:04:42 GMT
       Etag: "3e25960a79dbc69b674cd4ec67a72c62"
       Server: AmazonS3
       X-Amz-Id-2: qnXyH6sknlovV0Myy3emFAXTNtI/sQIcu1ZXNq/6wd17K32tQ7WNGB1qb3nzCpW2DhfeZ/MbWfw=
       X-Amz-Request-Id: 8422EACB0CC492BD
    
    Fixes #13942
    
    Change-Id: Ida063cc3524a96170d8a837893f7c9f49b6cf98e
    Reviewed-on: https://go-review.googlesource.com/18624
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 58ec5839cd9c210dc7ad727a6b1f743ea6233ddf
Author: Shawn Smith <shawnpsmith@gmail.com>
Date:   Sat Feb 6 20:35:29 2016 +0900

    all: fix typos
    
    Change-Id: I6035941df8b0de6aeaf6c05df7257bcf6e9191fe
    Reviewed-on: https://go-review.googlesource.com/19320
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit abf4696ede52ebd980605b10034f39af32ac5d90
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Fri Jan 29 21:22:11 2016 +0100

    unicode/utf16: add benchmarks
    
    For #6957
    
    Change-Id: Ic497c12f33efc933e9fe81f6cd1b2a0a01abbabf
    Reviewed-on: https://go-review.googlesource.com/19820
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3ec0651539d481100b6e735d54072627276f48d3
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Feb 23 02:19:25 2016 -0800

    cmd/compile: add copyright notice to util.go
    
    util.go was originally added in golang.org/cl/4851, and later moved to
    its current location in golang.org/cl/10287.
    
    Change-Id: I10b4941d42ae1ff2e78990c497c1347bbbae4e3d
    Reviewed-on: https://go-review.googlesource.com/19851
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit e34295e64782d61725377e8d0979114bd790b47f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Feb 23 02:14:32 2016 -0800

    cmd/compile: use path.Join in importfile
    
    Change-Id: Ib413b0cb16405965455d7764a8c4a22bf431389b
    Reviewed-on: https://go-review.googlesource.com/19850
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit c17b6b488cbf448da374d576be0f921e655b00b1
Author: Todd Neal <todd@tneal.org>
Date:   Fri Feb 19 16:58:21 2016 -0600

    [dev.ssa] cmd/compile: truncate auxint when constructing Prog
    
    The upper bits of 8/16/32 bit constants are undefined.  We need to
    truncate in order to prevent x86.oclass misidentifying the size of the
    constant.
    
    Fixes #14389
    
    Change-Id: I3e5ff79cd904376572a93f489ba7e152a5cb6e60
    Reviewed-on: https://go-review.googlesource.com/19740
    Reviewed-by: Keith Randall <khr@golang.org>

commit e7524d51fdf64b48a4ec2fbc13596a5c8a80cc05
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Feb 22 11:53:20 2016 -0800

    cmd/compile: move Io state into lexer and remove Io type
    
    Pass lexer around so state is accessible and dependency is explicit.
    In the process remove EOF -> '\n' conversion that has to be corrected
    for when reporting errors.
    
    Change-Id: If95564b70e7484dedc1f5348e585cd19acbc1243
    Reviewed-on: https://go-review.googlesource.com/19819
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 0784e6918e931e8bc6e28252ae11a65664ecbaaa
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Feb 22 19:41:17 2016 -0800

    net/http: fix typo in doc string
    
    Fixes #14475.
    
    Change-Id: I1b5b0a9793a417572ec55f313185d03ad5ae9d01
    Reviewed-on: https://go-review.googlesource.com/19846
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 9dc1334cc76eda231bd776e78d678649e630563b
Author: Todd Neal <todd@tneal.org>
Date:   Sat Feb 13 17:37:19 2016 -0600

    [dev.ssa] cmd/compile : replace load of store with a copy
    
    Loads of stores from the same pointer with compatible types
    can be replaced with a copy.
    
    Change-Id: I514b3ed8e5b6a9c432946880eac67a51b1607932
    Reviewed-on: https://go-review.googlesource.com/19743
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit bd70bd9cb2f458b23222083a3a11190f080af7fd
Author: Keith Randall <khr@golang.org>
Date:   Mon Feb 22 13:20:38 2016 -0800

    runtime: unify memeq and memequal
    
    They do the same thing, except memequal also has the short-circuit
    check if the two pointers are equal.
    
    A) We might as well always do the short-circuit check, it is only 2 instructions.
    B) The extra function call (memequal->memeq) is expensive.
    
    benchmark                 old ns/op     new ns/op     delta
    BenchmarkArrayEqual-8     8.56          5.31          -37.97%
    
    No noticeable affect on the former memeq user (maps).
    
    Fixes #14302
    
    Change-Id: I85d1ada59ed11e64dd6c54667f79d32cc5f81948
    Reviewed-on: https://go-review.googlesource.com/19843
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1e00cc1647916b705682f8721b8a9e9e095bf4ee
Author: Brady Sullivan <brady@bsull.com>
Date:   Mon Feb 22 15:19:18 2016 -0800

    crypto/tls: Improve ambiguous comment in cipher_suites.go
    
    A comment existed referencing RC4 coming before AES because of it's
    vulnerability to the Lucky 13 attack. This clarifies that the Lucky 13 attack
    only effects AES-CBC, and not AES-GCM.
    
    Fixes #14474
    
    Change-Id: Idcb07b5e0cdb0f9257cf75abea60129ba495b5f5
    Reviewed-on: https://go-review.googlesource.com/19845
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 108218453a2cd26920f9be899b4a5102e80007a8
Author: Rob Pike <r@golang.org>
Date:   Fri Feb 19 16:36:03 2016 +1100

    cmd/doc: handle embedded fields properly
    
    The structure of the code meant that an embedded field was never
    checked for export status. We need to check the name of the type,
    which is either of type T or type *T, and T might be unexported.
    
    Fixes #14356.
    
    Change-Id: I56f468e9b8ae67e9ed7509ed0b91d860507baed2
    Reviewed-on: https://go-review.googlesource.com/19701
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit a4b833940da77449afd95dc95f8596bae4fa1621
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Feb 22 11:32:56 2016 -0800

    runtime: move machport into darwin's mOS
    
    It's not needed on other OSes.
    
    Change-Id: Ia6b13510585392a7062374806527d33876beba2a
    Reviewed-on: https://go-review.googlesource.com/19818
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 756ea30eb05357b02af1ac512920ed647d4ee350
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Feb 22 11:27:32 2016 -0800

    runtime: simplify stack copying in ThreadCreateProfile
    
    Change-Id: I7414d2fab18ae6e7e7c50f8697ec64d38290f409
    Reviewed-on: https://go-review.googlesource.com/19817
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 36694064e52c721b337f882473280b7da8282d1f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 4 18:16:50 2015 -0700

    cmd/compile: disable checknils during alg eq generation
    
    Cuts 20k off cmd/go and 32k off golang.org/x/tools/cmd/godoc, approx 0.15% each.
    
    For #6853 and #9930
    
    Change-Id: Ic510b76b80a9153b1ede7b3533d2dbc16caa5c63
    Reviewed-on: https://go-review.googlesource.com/19768
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit e7f6d8b2d7baf2aa299c8bce778e2b0dab3a3798
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Sat Feb 20 23:23:01 2016 -0300

    cmd/cover: don't overskip children nodes when adding counters
    
    When visiting the AST to add counters, there are special cases in which
    the code calls cuts the walking short by returning nil. In some cases
    certain nodes are ignored, e.g. Init and Cond inside IfStmt.
    
    The fix is to explicitly walk all the children nodes (not only
    Body and Else) when cutting the current walk. Similar approach
    was taken with SwitchStmt and TypeSwitchStmt.
    
    While the existing test code doesn't handle different counters in the
    same line, the generated HTML report does it correctly (because it takes
    column into account).
    
    The previous behavior caused lines in function literals to not be
    tracked when those literals were inside Init or Cond of an IfStmt for
    example.
    
    Fixes #14039.
    
    Change-Id: Iad591363330843ad833bd79a0388d709c8d0c8aa
    Reviewed-on: https://go-review.googlesource.com/19775
    Reviewed-by: Rob Pike <r@golang.org>

commit f39cca94af880253be22cdbb30d0a7d385f6b516
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Feb 2 10:14:36 2016 -0800

    cmd/compile: bring vendored copy of math/big up-to-date
    
    These files were not added to the repo. They contain conversion
    routines and corresponding tests not used by the compiler and
    thus are technically not needed.
    
    However, future changes to math/big (and corresponding updates
    of this vendored version) may require these files to exist.
    Add them to avoid unnecessary confusion.
    
    Change-Id: Ie390fb54f499463b2bba2fdc084967539afbeeb3
    Reviewed-on: https://go-review.googlesource.com/19730
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 028247d2cd82243b44b00c5da477f971112e5ff9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jun 11 13:56:28 2015 -0700

    cmd/compile: reuse []Flow
    
    Benchmarked using compilebench on a quiet
    but rather old OS X laptop.
    
    Benchmarks from others would be welcome,
    since the numbers look too good to be true.
    
    name      old time/op    new time/op    delta
    Template     331ms ± 9%     303ms ± 4%   -8.25%  (p=0.000 n=24+24)
    GoTypes      946ms ± 4%     888ms ± 3%   -6.17%  (p=0.000 n=24+25)
    Compiler     3.20s ± 1%     3.10s ± 2%   -3.07%  (p=0.000 n=24+25)
    
    name      old alloc/op   new alloc/op   delta
    Template    72.5MB ± 0%    61.8MB ± 0%  -14.76%  (p=0.000 n=25+24)
    GoTypes      224MB ± 0%     189MB ± 0%  -15.65%  (p=0.000 n=25+25)
    Compiler     695MB ± 0%     561MB ± 0%  -19.26%  (p=0.000 n=25+25)
    
    name      old allocs/op  new allocs/op  delta
    Template      498k ± 0%      497k ± 0%   -0.21%  (p=0.000 n=25+23)
    GoTypes      1.47M ± 0%     1.47M ± 0%   -0.25%  (p=0.000 n=25+25)
    Compiler     4.09M ± 0%     4.08M ± 0%   -0.18%  (p=0.000 n=25+23)
    
    Change-Id: I2394bc748128d721863453257fa5756c410f7898
    Reviewed-on: https://go-review.googlesource.com/19771
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c3db6c95b6f933e1489565aa65a94edc880a3f3d
Author: David Chase <drchase@google.com>
Date:   Thu Feb 11 15:09:43 2016 -0500

    [dev.ssa] cmd/compile: double speed of CSE phase
    
    Replaced comparison based on (*Type).String() with an
    allocation-free structural comparison.  Roughly doubles
    speed of CSE, also reduces allocations.
    
    Checked that roughly the same number of CSEs were detected
    during make.bash (about a million) and that "new" CSEs
    were caused by the effect described above.
    
    Change-Id: Id205a9f6986efd518043e12d651f0b01206aeb1b
    Reviewed-on: https://go-review.googlesource.com/19471
    Reviewed-by: Keith Randall <khr@golang.org>

commit 88c1ef5b450a9cb50ee412b0240e135a74e64517
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Feb 22 11:19:15 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: handle commutative operations in cse
    
    * If a operation is commutative order the parameters
    in a canonical way.
    
    Size of pkg/tool/linux_amd64/* excluding compile:
    before: 95882288
     after: 95868152
    change: 14136 ~0.015%
    
    I tried something similar with Leq and Geq, but the results were
    not great because it confuses the 'lowered cse' pass too much
    which can no longer remove redundant comparisons from IsInBounds.
    
    Change-Id: I2f928663a11320bfc51c7fa47e384b7411c420ba
    Reviewed-on: https://go-review.googlesource.com/19727
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b86cafc7dced537165a7cda61b90feae44796055
Author: David Chase <drchase@google.com>
Date:   Wed Feb 10 17:43:31 2016 -0500

    [dev.ssa] cmd/compile: memory allocation tweaks to regalloc and dom
    
    Spotted a minor source of excess allocation in the register
    allocator.  Rearranged the dominator tree code to pull its
    scratch memory from a reused buffer attached to Config.
    
    Change-Id: I6da6e7b112f7d3eb1fd00c58faa8214cdea44e38
    Reviewed-on: https://go-review.googlesource.com/19450
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 94f02451148755b31cc4dd455c9e215d5f898898
Author: Todd Neal <todd@tneal.org>
Date:   Wed Feb 10 19:39:32 2016 -0600

    [dev.ssa] cmd/compile: add a zero arg cse pass
    
    Add an initial cse pass that only operates on zero argument
    values.  This removes the need for a special case in cse for removing
    OpSB and speeds up arithConst_ssa.go compilation by 9% while slowing
    "test -c net/http" by 1.5%.
    
    Change-Id: Id1500482485426f66c6c2eba75eeaf4f19c8a889
    Reviewed-on: https://go-review.googlesource.com/19454
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit f28bbb776a050cc3edca2bbe1241d81217a7a251
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Nov 2 10:46:58 2015 -0800

    cmd/compile: move hiter, hmap, and scase definitions into builtin.go
    
    Also eliminates per-maptype hiter and hmap types, since they're not
    really needed anyway.  Update packages reflect and runtime
    accordingly.
    
    Reduces golang.org/x/tools/cmd/godoc's text segment by ~170kB:
    
       text    data     bss     dec     hex filename
    13085702         140640  151520 13377862         cc2146 godoc.before
    12915382         140640  151520 13207542         c987f6 godoc.after
    
    Updates #6853.
    
    Change-Id: I948b2bc1f22d477c1756204996b4e3e1fb568d81
    Reviewed-on: https://go-review.googlesource.com/16610
    Reviewed-by: Keith Randall <khr@golang.org>

commit d0c11577b9c6d584959aceddf97266b9cbc336d0
Author: Keith Randall <khr@golang.org>
Date:   Sun Feb 21 20:43:14 2016 -0800

    cmd/compile: inline {i,e}facethash
    
    These functions are really simple, the overhead of calling
    them (in both time and code size) is larger than the inlined versions.
    
    Reorganize how the nil case in a type switch is handled, as we have
    to check for nil explicitly now anyway.
    
    Saves about 0.8% in the binary size of the go tool.
    
    Change-Id: I8501b62d72fde43650b79f52b5f699f1fbd0e7e7
    Reviewed-on: https://go-review.googlesource.com/19814
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 4827c6d0778d93afeaee658a330d97b8f1b510a6
Author: Todd Neal <todd@tneal.org>
Date:   Sun Feb 21 20:21:23 2016 -0600

    [dev.ssa] test: add test of pointer aliasing
    
    This adds a test case with aliased pointers to ensure modifications to
    dse don't remove valid stores.
    
    Change-Id: I143653250f46a403835218ec685bcd336d5087ef
    Reviewed-on: https://go-review.googlesource.com/19795
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5609a48931593a0ba88cab4a54ea5c426b292c3e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sat Feb 20 21:36:12 2016 -0800

    cmd/compile: make cmpstackvarlt properly asymmetric
    
    Previously, given two Nodes n1 and n2 of different non-PAUTO classes
    (e.g., PPARAM and PPARAMOUT), cmpstackvarlt(n1, n2) and
    cmpstackvarlt(n2, n1) both returned true, which is nonsense.
    
    This doesn't seem to cause any visible miscompilation problems, but
    notably fixing it does cause toolstash/buildall to fail.
    
    Change-Id: I33b2c66e902c5eced875d8fbf18b7cfdc81e8aed
    Reviewed-on: https://go-review.googlesource.com/19778
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8847a5913a5970b5f5c062f767c369da683648d6
Author: Austin Clements <austin@google.com>
Date:   Thu Feb 18 17:28:04 2016 -0500

    runtime: remove unused parfor code
    
    Change-Id: Ibbfae20cab48163f22d661604ef730705f2b97ba
    Reviewed-on: https://go-review.googlesource.com/19661
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 89cfdda44dec9f1e4e7f9ac360638fecee2482c6
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sat Feb 20 18:49:22 2016 -0800

    cmd/compile: replace Order's use of NodeLists with slices
    
    Order's "temp" and "free" fields use NodeLists in a rather
    non-idiomatic way.  Instead of using the "list" or "concat" functions,
    it manipulates them directly and without the normal invariants (e.g.,
    it doesn't maintain the "End" field).
    
    Rather than convert it to more typical usage, just replace with a
    slice, which ends up much simpler anyway.
    
    Passes toolstash/buildall.
    
    Change-Id: Ibd0f24324bd674c0d5bb1bc40d073b01e7824ad5
    Reviewed-on: https://go-review.googlesource.com/19776
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d70c04cf08683e2b0a26fb13808f8cacb1bcdd38
Author: Shenghou Ma <minux@golang.org>
Date:   Sat Feb 20 23:24:27 2016 -0500

    runtime: fix missing word in comment
    
    Change-Id: I6cb8ac7b59812e82111ab3b0f8303ab8194a5129
    Reviewed-on: https://go-review.googlesource.com/19791
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a4b143bc22ff471a96c42458833998151df70cc0
Author: Shenghou Ma <minux@golang.org>
Date:   Sat Sep 19 06:59:06 2015 -0400

    go/types: skip $GOROOT/src/*.go in TestStdlib
    
    Change-Id: I4a75d98a48675e2beb5b4843fb2c6ff5d4c8d2a2
    Reviewed-on: https://go-review.googlesource.com/14769
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 8caf19c46f9d7cc9011d7acdc464768b5fb15d7e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sat Feb 20 20:33:34 2016 -0800

    net: fix TestUpdateResolvConf after CL 18860
    
    When writing a fake dnsConfig to conf.dnsConfig, set lastChecked to an
    hour into the future.  This causes dnsclient_unix.go's
    tryUpdate("/etc/resolv.conf") calls to short-circuit and ignore that
    /etc/resolv.conf's mtime differs from the test's fake resolv.conf
    file.  We only need to zero out lastChecked in teardown.
    
    While here, this makes two other tryUpdate(conf.path) test calls
    pointless, since they'll now short circuit too.
    
    Fixes #14437.
    
    Change-Id: Ieb520388e319b9826dfa49f134907f4927608a53
    Reviewed-on: https://go-review.googlesource.com/19777
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 8ffe496ae792a1cdc845c1c019323cf6c05fbb32
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sat Feb 20 22:52:15 2016 -0800

    cmd/compile, runtime: eliminate unnecessary algorithm types
    
    There's no need for 8 different ways to represent that a type is
    non-comparable.
    
    While here, move AMEM out of the runtime-known algorithm values since
    it's not needed at run-time, and get rid of the unused AUNK constant.
    
    Change-Id: Ie23972b692c6f27fc5f1a908561b3e26ef5a50e9
    Reviewed-on: https://go-review.googlesource.com/19779
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit e960302410fafaf595c1ad92c28c61da3a254d63
Author: Shenghou Ma <minux@golang.org>
Date:   Sun Feb 21 13:56:08 2016 -0500

    runtime: when crash with panic, call user Error/String methods before freezing the world
    
    Fixes #14432.
    
    Change-Id: I0a92ef86de95de39217df9a664d8034ef685a906
    Reviewed-on: https://go-review.googlesource.com/19792
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bc8458ab02878ae64af860f1cade78b6fa97e994
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 4 16:12:52 2015 -0700

    cmd/compile: use && in generated eq algs
    
    This allows the compiler to generate better code
    containing fewer jumps and only a single return value.
    
    Cuts 12k off cmd/go and 16k off golang.org/x/tools/cmd/godoc, approx 0.1% each.
    
    For #6853 and #9930
    
    Change-Id: I009616df797760b01e09f06357a2d6fd6ebcf307
    Reviewed-on: https://go-review.googlesource.com/19767
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4cef0e980a5d4fca2b7d26ec26eb1de954cecc21
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 4 15:02:09 2015 -0700

    cmd/compile: don't generate algs for [0]T and [1]T
    
    All [0]T values are equal.
    [1]T values are equal iff their sole components are.
    
    This types show up most frequently as a by-product of variadic
    function calls, such as fmt.Printf("abc") or fmt.Printf("%v", x).
    
    Cuts 12k off cmd/go and 22k off golang.org/x/tools/cmd/godoc, approx 0.1% each.
    
    For #6853 and #9930
    
    Change-Id: Ic9b7aeb8cc945804246340f6f5e67bbf6008773e
    Reviewed-on: https://go-review.googlesource.com/19766
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9ad41f6243e7947ce1569140382f8847cc2a80dd
Author: Suharsh Sivakumar <suharshs@google.com>
Date:   Wed Feb 3 13:22:40 2016 -0800

    net: ensure lookupStatic* returns copy of slice to disallow cache corruption.
    
    Fixes #14212
    
    Change-Id: I74325dfaa1fb48f4b281c2d42157b563f1e42a94
    Reviewed-on: https://go-review.googlesource.com/19201
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit e43c74a0d8848d58814e1a8302d8f115d7f0b874
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jan 27 12:49:13 2016 -0800

    all: use cannot instead of can not
    
    You can not use cannot, but you cannot spell cannot can not.
    
    Change-Id: I2f0971481a460804de96fd8c9e46a9cc62a3fc5b
    Reviewed-on: https://go-review.googlesource.com/19772
    Reviewed-by: Rob Pike <r@golang.org>

commit 5dc053b9dec4dc25fac195065ad32462ac28a543
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Feb 21 10:46:59 2016 +0100

    fmt: fix zero padding for NaN
    
    Makes zero padding of NaN and infinities consistent
    by using spaces instead of zeroes to pad NaN.
    Adds more tests for NaN formatting.
    
    Fixes #14421
    
    Change-Id: Ia20f8e878cc81ac72a744ec10d65e84b94e09c6a
    Reviewed-on: https://go-review.googlesource.com/19723
    Reviewed-by: Rob Pike <r@golang.org>

commit aa5b44aeabccd25a320d6ea609c41781bdbf5ce0
Author: Robert Griesemer <gri@golang.org>
Date:   Sat Feb 20 12:53:34 2016 -0800

    cmd/compile: set lexer nlsemi state directly
    
    The old code used an extra function call and switch to inspect the
    current token and determine the new state of curio.nlsemi. However,
    the lexer knows the token w/o the need of an extra test and thus
    can set curio.nlsemi directly:
    
    - removed need for extra function call in next
    - renamed _yylex to next
    - set nlsemi at the point a token is identified
    - moved nlsemi from curio to lexer - it's really part of the lexer state
    
    This change makes the lexer call sequence less convoluted and should
    also speed up the lexing a bit.
    
    Change-Id: Iaf2683081f04231cb62c94e1400d455f98f6f82a
    Reviewed-on: https://go-review.googlesource.com/19765
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 20ee67acc920807d19d336b1cc1614d2ad529953
Author: Robert Griesemer <gri@golang.org>
Date:   Sat Feb 20 11:16:21 2016 -0800

    cmd/compile: test for lower-case letters first in isAlpha
    
    Lower-case letters are more common in identifiers.
    
    Change-Id: I49c39e3ac810eea57d15c1433608daec212c9792
    Reviewed-on: https://go-review.googlesource.com/19760
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 11e51ed4bc3d901c4272ba57bde4771bb7d8f6f6
Author: Robert Griesemer <gri@golang.org>
Date:   Sat Feb 20 11:06:35 2016 -0800

    cmd/compile: remove gratuituous copying of lexer token data
    
    Rename yySymType to lexer; should eventually capture all lexer state.
    Embed lexer in parser and access lexer token data directly.
    
    Change-Id: I246194705d594f80426f3ba77d8580af9185daf7
    Reviewed-on: https://go-review.googlesource.com/19759
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 5621b09dadca86202e3c921b3a1e323ec60b2742
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Feb 19 23:01:10 2016 -0800

    cmd/compile: simplify import path handling
    
    Change-Id: I64c9b4c4978520a9bc989b7fd7d5708d364dc88a
    Reviewed-on: https://go-review.googlesource.com/19755
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 5fc43c94bf3ba6158d970488bff715e60f37e33f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue May 26 15:41:42 2015 -0700

    net/url: simplify value lookup
    
    Change-Id: Ic998c189003d4dee758fca3b5ac954d5b54d3d36
    Reviewed-on: https://go-review.googlesource.com/19764
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1dbba1a2b7c5d04bc7ad560010a887b441feb0f4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 4 14:56:52 2015 -0700

    encoding/hex: minor cleanup
    
    Change-Id: I404fd946dd0607fa41e2abe0d1d8081d4433ff0a
    Reviewed-on: https://go-review.googlesource.com/19762
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit de6a5881bbf85113186d9cfdbe51fd3165ba7e4c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 2 17:56:13 2015 -0700

    bytes: make Buffer comment more accurate
    
    Change-Id: Ief22b3dbba9616dd40bf3ea8e2633d3c5e7d1886
    Reviewed-on: https://go-review.googlesource.com/19761
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 92b74d0940cd46e3a480137844d9d61986f7d895
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Feb 19 17:45:22 2016 +0900

    net: add missing aborted connection handling on accept test
    
    This change adds TestAcceptIgnoreAbortedConnRequest to test accepting
    aborted connection requests on all supported platforms except Plan 9.
    
    Change-Id: I5936b04085184ff348539962289b1167ec4ac619
    Reviewed-on: https://go-review.googlesource.com/19707
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 64d2a88105d503d1a0275388823b8112a870d13b
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Feb 19 17:34:54 2016 +0900

    net/internal/socktest: add missing support for AcceptEx
    
    Change-Id: I37faedc6fa316fffac80093b01e15429995b0f5b
    Reviewed-on: https://go-review.googlesource.com/19705
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6716a54e368be250b3840fcdef3c2437886e02e6
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Feb 19 17:37:04 2016 +0900

    net: make newLocalListener handle network argument correcly
    
    Change-Id: I8987e705af069846e6668e2f2104e0254e695139
    Reviewed-on: https://go-review.googlesource.com/19706
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9194421eedfd64d2d71e66cbf060d19502610c30
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Feb 19 17:41:44 2016 +0900

    net: deflake TestDialerDualStackFDLeak
    
    We need to stop the mock listener certainly for preventing it from
    pulling up pending connections during measurement.
    
    Fixes #14223.
    
    Change-Id: Ia40db01d1262963697b83ca867563dec77d772e3
    Reviewed-on: https://go-review.googlesource.com/19246
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e6d6ad47f52fa40dd07bb74b2df349321fad1eeb
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Feb 16 15:30:32 2016 -0500

    cmd/compile: update some type names in comments
    
    Change-Id: I741a1205bc6256c08b36efed43652bfbb75e4401
    Reviewed-on: https://go-review.googlesource.com/19691
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 41eb5ca089be5495ab2299e2b6778fb8ceb8010a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Feb 17 09:41:12 2016 -0500

    cmd/link: typo in error message
    
    Change-Id: Ideeef320d6a01a10c89524b6d895a64210a60f64
    Reviewed-on: https://go-review.googlesource.com/19693
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3a11c8d3190210c510c152471ddb85eb36a15e76
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sat Feb 20 00:00:53 2016 -0800

    cmd/compile: simplify if statement parsing
    
    Somewhat notably, this means long if statement chains are now parsed
    recursively, rather than iteratively.  This shouldn't be a concern
    though, as several other functions (e.g., gen, typecheck, walk)
    already use recursion to process the parsed if statement Node trees.
    
    Change-Id: Ic8c12ace9021c870d60c06f5db86a48c4ec57084
    Reviewed-on: https://go-review.googlesource.com/19756
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5efbdd9d10908206d4e0351cb4724c5fefdfa2be
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Jan 22 13:31:57 2016 -0800

    net: fix race in (*resolverConfig).tryUpdate
    
    Fixes #14072.
    
    Change-Id: Ie31caa06690ac621906fc5acd34da2efa4e2049f
    Reviewed-on: https://go-review.googlesource.com/18860
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>

commit 315f4c70f123cfbf061d097543af555547acd9c7
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Feb 18 16:29:39 2016 -0500

    runtime: use correct psABI SP alignment before calling libc mmap
    
    Fixes #14384.
    
    Change-Id: Ib025cf2d20754b4c2db52f0a8a4717fd303371d6
    Reviewed-on: https://go-review.googlesource.com/19660
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 3e40f13cf3bf3f23f3f2f60dec174a1bdad57f16
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Feb 19 18:51:24 2016 -0800

    cmd/compile: eliminate global fileparser
    
    Change-Id: I9b8b13731ccc2ba33d21642b12cc614dde0804b1
    Reviewed-on: https://go-review.googlesource.com/19752
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>

commit 338a891e79444de97d6f485b1632d42899c47c6d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Feb 19 18:47:01 2016 -0800

    cmd/compile: eliminate pushedio and savedstate
    
    While here, get drop the lexlineno{++,--} hacks for canned imports.
    They were added in commit d3237f9, but don't seem to serve any
    purpose.
    
    Change-Id: I00f9e6be0ae9f217f2fa113b85e041dfd0303757
    Reviewed-on: https://go-review.googlesource.com/19652
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>

commit 4e6e8e8c582bcd7d74378be31f070eecf0f1d5e4
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Feb 19 18:39:25 2016 -0800

    cmd/compile: change two pushedio.bin tests to use importpkg instead
    
    pushedio.bin and importpkg are both non-nil iff we're parsing an
    package's export data, so "pushedio.bin == nil" and "importpkg == nil"
    are equivalent tests.
    
    Change-Id: I571ee908fef867117ef72c5da1eb24fe9b3fd12d
    Reviewed-on: https://go-review.googlesource.com/19751
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit f8e41f6f5907ce832cc263bdce749117d4d0b342
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Dec 2 11:30:34 2015 -0800

    cmd/compile: eliminate Io.infile and Io.cp
    
    infile is never read and cp is never written.  Both are unneeded.
    
    Change-Id: I0a90bb772a53a580ea4be8e5f0f770da7c1acf3a
    Reviewed-on: https://go-review.googlesource.com/19651
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 699a2ba137fec09371da431907431ec2020a58af
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Feb 19 18:36:02 2016 -0800

    cmd/compile: switch cannedimports to use a Biobuf
    
    Allows eliminating the separate lexer code paths for reading from cp
    in the next CL.
    
    Change-Id: I49098ecef32b735c4a01374443c2f847235ff964
    Reviewed-on: https://go-review.googlesource.com/19750
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 7d3a40978aaa69c3cf08068a83252927b4514e9d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Dec 1 12:19:36 2015 -0800

    cmd/compile: refactor export data parsing
    
    Merge push_parser and pop_parser into a single parse_import function
    and inline unimportfile. Shake out function boundaries a little bit so
    that the symmetry is readily visible.
    
    Move the import_package call into parse_import (and inline
    import_there into import_package).  This means importfile no longer
    needs to provide fake import data to be needlessly lexed/parsed every
    time it's called.
    
    Also, instead of indicating import success/failure by whether the next
    token is "package", import_spec can just check whether importpkg is
    non-nil.
    
    Tangentially, this somehow alters the diagnostics produced for
    test/fixedbugs/issue11610.go.  However, the new diagnostics are more
    consistent with those produced when the empty import statement is
    absent, which seems more desirable than maintaining the previous
    errors.
    
    Change-Id: I5cd1c22aa14da8a743ef569ff084711d137279d5
    Reviewed-on: https://go-review.googlesource.com/19650
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 0d5e6a3f07414ecf6a14bc601532aa305296f562
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Feb 19 11:42:34 2016 -0800

    cmd/api: fix benchmark to ignore internal packages
    
    Change-Id: I8ee46287ae0744efa83ad343997ad6835520fa5c
    Reviewed-on: https://go-review.googlesource.com/19688
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5a9c128a0313df72973259bea946262cb8973d86
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Feb 19 22:45:38 2016 +0100

    fmt: remove math package dependency and avoid float operations
    
    Remove floating point comparisons and rely only on the information
    directly provided by appendFloat.
    Make restoring the zero padding flag explicit instead of using a defer.
    Rearrange some case distinctions to remove duplicated code.
    Add more test cases for zero padded floating point numbers with sign.
    
    benchmark                   old ns/op     new ns/op     delta
    BenchmarkSprintfFloat-4     187           180           -3.74%
    
    Change-Id: Ifa2ae85257909f40b1b18118c92b516933271729
    Reviewed-on: https://go-review.googlesource.com/19721
    Reviewed-by: Rob Pike <r@golang.org>

commit 113c4d25818e67599d3ff647480e4e68d6857f82
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Dec 1 12:15:25 2015 -0800

    cmd/compile: refactor import statement parsing
    
    Combine parser's import_stmt and import_here methods as a single new
    importdcl method, and cleanup conditional logic slightly to make the
    code easier to follow.
    
    Also, eliminate importfile's unused line parameter, and get rid of all
    of its duplicate type assertions.
    
    Change-Id: Ic37ae8490afedc533f98ead9feef383e3599bc01
    Reviewed-on: https://go-review.googlesource.com/19629
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5949524fc48aa514154cfb939ae28af58aaf6540
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Feb 17 17:21:53 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: handle phis in fuse.
    
    Change-Id: Idd880cc6c1e5dc34dddbdea0841a7a718d2fa836
    Reviewed-on: https://go-review.googlesource.com/19544
    Reviewed-by: David Chase <drchase@google.com>

commit e4bee4be9276dc5a7ba5e06aa9d287cbf39d8758
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Feb 17 12:17:11 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: constant fold truncates and bool comparisons
    
    Change-Id: I731722eb77f373ff7d6101f93830ab0a50497e2c
    Reviewed-on: https://go-review.googlesource.com/19542
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit d930d69fd95e410107e84231f57ff629d1ef7f21
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Dec 1 12:05:30 2015 -0800

    cmd/compile: make -A and -newexport compatible
    
    Packages compiled with -A may reference the builtin "any" type, so it
    needs to be included in the list of predeclared types for binary
    import/export.
    
    Also, when -A is used, mark all symbols as SymExport instead of
    SymPackage in importsym.  This parallels the logic in autoexport and
    is necessary to prevent a "export/package mismatch" errors in
    exportsym during dumpexport's verifyExport pass.
    
    Change-Id: Iff5ec5fbfe2219525ec9d1a975307fa8936af9b9
    Reviewed-on: https://go-review.googlesource.com/19627
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1402e522c6e372d055748d8437bd2a127acacdca
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Dec 1 12:02:42 2015 -0800

    cmd/compile: load builtin export data only once
    
    Previously, the builtin runtime export data was reparsed before every
    Go source file, and the unsafe export data was reparsed for every
    import of package unsafe.  Now, we parse both of them just once ahead
    of time.
    
    This does mean package unsafe's export data will be loaded even when
    compiling packages that don't import it, but it's tiny anyway.
    
    Change-Id: Ic6931bc58f6d62f664348bfa932f92d4ccacc3ef
    Reviewed-on: https://go-review.googlesource.com/19626
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit fb2af2b35b8d2ad832f2398e981ea78c64b0663b
Author: David Chase <drchase@google.com>
Date:   Fri Feb 19 12:06:31 2016 -0500

    cmd/compile: don't walk field-name syntax in esc.go
    
    Walking the field name as if it were an expression
    caused a called to haspointers with a TFIELD, which panics.
    Trigger was a field at a large offset within a large struct,
    combined with a struct literal expression mentioning that
    field.
    
    Fixes #14405
    
    Change-Id: I4589badae27cf3d7cf365f3a66c13447512f41f9
    Reviewed-on: https://go-review.googlesource.com/19699
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0e34737c9aea6680b0a2a135cdf80557d61b83ce
Author: Damien Neil <dneil@google.com>
Date:   Fri Feb 19 09:58:22 2016 -0800

    cmd/go: don't assume cc supports -gno-record-gcc-switches
    
    NetBSD's C compiler appears to support -fdebug-prefix-map but
    not -gno-record-gcc-switches. Remove assumption that support
    for the former implies the latter.
    
    Change-Id: Iecad9e4f497ea4edc1ce440010e6fe19dc3e0566
    Reviewed-on: https://go-review.googlesource.com/19686
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9a184b22eef79ac0570330a17cf81a15a58bbf76
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Feb 18 16:44:06 2016 -0800

    cmd/compile: refresh builtin.go
    
    The export data format was augmented with a new "unsafe-uintptr" tag
    in https://golang.org/cl/18584, but builtin.go was not regenerated.
    
    While here, add a test to make sure builtin.go stays up to date in the
    future.
    
    Change-Id: I4ae17da29f0855bef6ec0fcc10e7082c8427d39c
    Reviewed-on: https://go-review.googlesource.com/19681
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 5c5e8d41054940ccf9e1c025bf21c86e85f33bde
Author: Tal Shprecher <tshprecher@gmail.com>
Date:   Sat Feb 13 22:39:16 2016 -0800

    cmd/compile: avoid leak of dottype expression if type does not contain pointers.
    
    Fixes #13805
    
    Change-Id: Ica9aae2e054b74f67d28ab27f72c52a3f03eeb59
    Reviewed-on: https://go-review.googlesource.com/19489
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit c8e7b34b599c9e3c6747b3e8182e65a2145fd06f
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Feb 18 11:04:05 2016 -0800

    runtime: skip cgo check for non-pointer slice elements
    
    Fixes #14387.
    
    Change-Id: Icc98be80f549c5e1f55c5e693bfea97b456a6c41
    Reviewed-on: https://go-review.googlesource.com/19621
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 277024bd6f3ecc9f34729cbeb95e226f70004733
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Fri Feb 19 19:35:46 2016 +0530

    cmd/go: don't set GO15VENDOREXPERIMENT in TestSymlinksVendor
    
    Change-Id: I14947b64bdafd975bf3915eceb07f98897304a85
    Reviewed-on: https://go-review.googlesource.com/19708
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9aa630faa868fde13af74e5b22ddba89a635d837
Author: Russ Cox <rsc@golang.org>
Date:   Mon Feb 8 07:08:14 2016 -0500

    cmd/dist: accept "//+build" with no spaces, like go/build
    
    The go/build parser accepts "//+build", with no spaces.
    Make the cmd/dist bootstrap parser do the same.
    While in theory we should always use the space form,
    I copied some code that did not into the standard tree,
    and I was very confused that 'go test' had had no problem
    but then make.bash died.
    
    (As a reminder, cmd/dist does not use go/build because
    cmd/dist must build against earlier versions of Go.)
    
    Change-Id: I90a18014bd878247b8811487e5c1a7589260cbfc
    Reviewed-on: https://go-review.googlesource.com/19618
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fe5eac63c4b8d8f9d541d40f9055c3e4d4454d67
Author: Russ Cox <rsc@golang.org>
Date:   Thu Feb 4 14:16:58 2016 -0500

    cmd/internal/obj: hoist fieldtrack code out of x86 back end
    
    Change-Id: I38e59088c37426d914ce2b4dfc79f3d476e06f49
    Reviewed-on: https://go-review.googlesource.com/19617
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 53ebde225e0ecaff8c3b71356a4726fad753d47c
Author: Russ Cox <rsc@golang.org>
Date:   Mon Feb 1 12:22:39 2016 -0500

    cmd/cgo: do not use gcc -xc - to compile standard input
    
    We have private reports of compilers that mishandle that.
    Write to a temporary file instead.
    
    Change-Id: I92e3cf4274b1a8048741e07fb52b8900c93b915e
    Reviewed-on: https://go-review.googlesource.com/19616
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3e23442518d9c66def2ae48f83026e29c5f26609
Author: Russ Cox <rsc@golang.org>
Date:   Thu Jan 28 22:51:50 2016 -0500

    cmd/go: remove GO15VENDOREXPERIMENT variable
    
    The Go 1.6 release notes say that Go 1.7 will remove support
    for the GO15VENDOREXPERIMENT environment variable,
    making vendoring always on. Do that.
    
    Change-Id: Iba8b79532455828869c1a8076a82edce84259468
    Reviewed-on: https://go-review.googlesource.com/19615
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 51b624e6a29b135ce0fadb22b678acf4998ff16f
Author: Russ Cox <rsc@golang.org>
Date:   Thu Jan 28 22:50:03 2016 -0500

    cmd/link: remove alternate -X flag spelling
    
    The Go 1.6 release notes say we'll remove the “-X name value” form
    (in favor of the “-X name=value” form) in Go 1.7.
    Do that.
    
    Also establish the doc/go1.7.txt file.
    
    Change-Id: Ie4565a6bc5dbcf155181754d8d92bfbb23c75338
    Reviewed-on: https://go-review.googlesource.com/19614
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 0b4f5782664b1e5ff6006cc3a66de520ed1c7c79
Author: Russ Cox <rsc@golang.org>
Date:   Mon Jan 25 15:21:10 2016 -0500

    cmd/asm: remove nonexistent amd64 instructions
    
    These have no accepted input syntax and,
    as far as I can tell, do not actually exist.
    
    Change-Id: Iafdfb71adccad76230191d922eb7ddf78b7d5898
    Reviewed-on: https://go-review.googlesource.com/19612
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 76f272d71746fec4cc91f6772e81d8745aa65384
Author: Russ Cox <rsc@golang.org>
Date:   Sun Jan 24 11:14:46 2016 -0500

    cmd/asm: remove support for amd64 3DNow! instructions
    
    3DNotAnymore!
    
    These only ever existed on AMD (not Intel) processors,
    and AMD cancelled support for them in August 2010.
    
    Change-Id: Ia362259add9d4f5788fd151fb373f91288677407
    Reviewed-on: https://go-review.googlesource.com/19611
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b04f3b06ec347543b0eafe82dcfb0e05885d3feb
Author: Nathan VanBenschoten <nvanbenschoten@gmail.com>
Date:   Tue Dec 22 02:40:47 2015 -0500

    all: replace strings.Index with strings.Contains where possible
    
    Change-Id: Ia613f1c37bfce800ece0533a5326fca91d99a66a
    Reviewed-on: https://go-review.googlesource.com/18120
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>

commit 952c2fd606fad19b930937ca0d5c5571d7f5d4cb
Author: Ian Gudger <igudger@google.com>
Date:   Thu Feb 18 11:29:05 2016 -0800

    net: fix packDomainName encoding of root and invalid names
    
    Fixes #14372
    
    Change-Id: I40d594582639e87ef2574d37ac868e37ffaa17dc
    Reviewed-on: https://go-review.googlesource.com/19623
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 3ddfaa5653cfc5c8663319d017a5fb4de97814f4
Author: Benoit Sigoure <tsunanet@gmail.com>
Date:   Fri Feb 5 17:18:46 2016 -0800

    cmd/gofmt: Ignore file not found errors.
    
    gofmt prints an error to stderr when a file is deleted during its
    `filepath.Walk()', which can happen in builds that change the tree
    concurrently with gofmt running.
    
    Change-Id: Ia1aa4804f6bc2172baf061c093e16fe56a3ee50c
    Reviewed-on: https://go-review.googlesource.com/19301
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 2eeaaaae7530337c23b0d4d76ac519e677c125dd
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Feb 19 04:29:13 2016 +0530

    net/http: fix bug where http2 wasn't enabled on DefaultTransport
    
    I had accidentally disabled a headline feature at the last second. :(
    
    Fixes #14391
    
    Change-Id: I1992c9b801072b7538b95c55242be174075ff932
    Reviewed-on: https://go-review.googlesource.com/19672
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ae276d8c2342aff7b9bdf6563ffac5d21da70db6
Author: David Chase <drchase@google.com>
Date:   Thu Feb 18 17:49:45 2016 -0500

    [dev.ssa] cmd/compile: reenable TestStackBarrierProfiling
    
    Tested it 1000x on OS X and Linux amd64, no failures.
    Updated TODO.
    
    Change-Id: Ia60c8d90962f6e5f7c3ed1ded6ba1b25eee983e1
    Reviewed-on: https://go-review.googlesource.com/19662
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 98cc8b4cf219384792e19dec9bc17a0e49c466f6
Author: Rhys Hiltner <rhys@justin.tv>
Date:   Thu Feb 18 13:35:49 2016 -0800

    cmd/link/internal/ld: remove unused call to os.Getwd
    
    This call to os.Getwd (or getwd) has been part of the linker since the C
    implementation in 7d507dc6e6. It stopped being used in 26438d4d80, and
    survived the conversion to Go in 1f9dbb60ef.
    
    Its return value goes unused (the linker gets the value for AT_comp_dir in
    dwarf.go), remove it.
    
    Change-Id: I3d4594813bb4ee0a6af31a36e19d99ec4b863677
    Reviewed-on: https://go-review.googlesource.com/19655
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7555f7f2bf1636443b6013c90e45698894af75e1
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Dec 1 11:52:32 2015 -0800

    cmd/compile: cleanup mkbuiltin.go
    
    Changes largely in preparation for eventually switching the builtin
    export data to use the new binary format.
    
    Replace fancy incremental line-by-line scanning with simply reading
    the entire object file into memory, finding the export data section,
    and processing it that way.
    
    Just use "package runtime" and "package unsafe" in the builtin Go
    source files so we don't need to rewrite references to "PACKAGE".
    
    Stop looking for init_PACKAGE_function; it doesn't exist anyway.
    
    Compile package runtime with -u so that its export data marks it as a
    "safe" package.
    
    Eliminate requirement to pass "runtime" and "unsafe" as command-line
    arguments so that just "go run mkbuiltin.go" works.
    
    Only rewrite builtin.go when successful.
    
    Change-Id: I4addfde9e0cfb30607c7a83de686bde0ad1f035a
    Reviewed-on: https://go-review.googlesource.com/19624
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7d80291c4c8bce8754b6e1aeb962aed1ceef64dc
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Dec 1 11:58:41 2015 -0800

    cmd/compile: eliminate Io.importsafe
    
    It was only really necessary for ensuring that package runtime should
    be treated as safe even without a "safe" marker, but mkbuiltin.go now
    compiles it with -u.
    
    Change-Id: Ifbcc62436ce40ab732ece667141afd82c1d3b64b
    Reviewed-on: https://go-review.googlesource.com/19625
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5bbb98df0960f57dca73cb7640456608d4cc0917
Author: Damien Neil <dneil@google.com>
Date:   Mon Feb 8 17:20:59 2016 -0800

    cmd/go, cmd/link: make builds deterministic
    
    Add the following flags when supported by the compiler:
      -gno-record-gcc-switches
      -fdebug-prefix-map=$WORK=/tmp/go-build
    
    Add an empty NAME symbol to the ELF .symtab. GNU ld will add a NAME
    symbol when one is not present; including one of our own prevents it
    from adding a reference to the link tempdir.
    
    Fixes #13247 for compilers that support -fdebug-prefix-map. (gcc, clang
    in the near future.)
    
    Change-Id: I221c71fc59cd23ee8c99bcc038793ff4623c9ffc
    Reviewed-on: https://go-review.googlesource.com/19363
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Damien Neil <dneil@google.com>

commit 1a94431a78c4de5182dd43b438701cca80455746
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Jan 13 15:51:16 2016 -0800

    cmd/cgo: support multiple-value special form in VarDecl
    
    Fixes #13930.
    
    Change-Id: I124b7d31d1f2be05b7f23dafd1e52d9f3f02f3f0
    Reviewed-on: https://go-review.googlesource.com/18623
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a576e9883cd1a79ddcf1c258b4e72ef164e9a1c8
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Feb 18 11:43:52 2016 -0800

    text/scanner: mention package when reporting errors to stderr
    
    Fixes #14166.
    
    Change-Id: I325b283a1d53e73a6d862611c446820ab94a161c
    Reviewed-on: https://go-review.googlesource.com/19622
    Reviewed-by: Damien Neil <dneil@google.com>

commit 8fd1634f443cebcb176c7a95104b61240733e420
Author: Matt Bostock <matt@mattbostock.com>
Date:   Tue Feb 16 18:53:46 2016 +0000

    sort: Fix typo in stable sort comment
    
    Fix `reverences`, which I believe should read as `references`.
    
    Change-Id: I450efcbeee0f8861a84b209f2e6636764034232a
    Reviewed-on: https://go-review.googlesource.com/19469
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 3e91e8aa356328c5a7c2ab0f6291f99c69145cdc
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sat Jan 30 21:50:07 2016 +0100

    go/internal/gcimporter: add missing argument to error message
    
    Change-Id: I3071f0e876506c6dc283e97bc15f157bf2ff011e
    Reviewed-on: https://go-review.googlesource.com/19641
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit c51f9173ad2711f5b1a5af9d95dae9e711e13ebb
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Feb 18 09:42:28 2016 -0800

    go/constant: fix doc strings
    
    Fixes #14357.
    
    Change-Id: I91acff0b0cc7be2bcbad68925a19a437dbd4c83d
    Reviewed-on: https://go-review.googlesource.com/19620
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 6b9a0fa356de3c733c14951e42ca31cfafe7ff79
Author: Rahul Chaudhry <rahulchaudhry@chromium.org>
Date:   Wed Feb 17 14:55:16 2016 -0800

    doc: fix typo in go1.6 release date.
    
    Change-Id: If15fdcd3cd49394a0c1dffd39fbbeede11081ccb
    Reviewed-on: https://go-review.googlesource.com/19528
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 6030c7531539619003e651e8836f451ea6b832b0
Author: Chris Broadfoot <cbro@golang.org>
Date:   Wed Feb 17 14:02:26 2016 -0800

    doc: document Go 1.6
    
    Change-Id: I4910105d48ed650289ecb1490d556929db05bc38
    Reviewed-on: https://go-review.googlesource.com/19526
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-on: https://go-review.googlesource.com/19527

commit bc1fb32e9d4e5dd239907839f5ffcbe524ac7e25
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Feb 17 14:08:36 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: fix the type of constant shift folding.
    
    Also throw in a few more shift constant folding.
    
    Change-Id: Iabe00596987f594e0686fbac3d76376d94612340
    Reviewed-on: https://go-review.googlesource.com/19543
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit c67cac07035c6b4d0f48df4c1f19641589f50e74
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Feb 10 00:27:33 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: transform degenerate control blocks
    
    * In cases where we end up with empty branches like in
    if a then jmp b else jmp b;
    the flow can be replaced by a; jmp b.
    
    The following functions is optimized as follows:
    func f(a bool, x int) int {
            v := 0
            if a {
                    v = -1
            } else {
                    v = -1
            }
            return x | v
    }
    
    Before this change:
    02819 (arith_ssa.go:362)  VARDEF "".~r2+16(FP)
    02820 (arith_ssa.go:362)  MOVQ  $0, "".~r2+16(FP)
    02821 (arith_ssa.go:362)  MOVB  "".a(FP), AX
    02822 (arith_ssa.go:362)  TESTB AX, AX
    02823 (arith_ssa.go:364)  JEQ 2824
    02824 (arith_ssa.go:369)  VARDEF "".~r2+16(FP)
    02825 (arith_ssa.go:369)  MOVQ  $-1, "".~r2+16(FP)
    02826 (arith_ssa.go:369)  RET
    
    After this change:
    02819 (arith_ssa.go:362)  VARDEF "".~r2+16(FP)
    02820 (arith_ssa.go:369)  VARDEF "".~r2+16(FP)
    02821 (arith_ssa.go:369)  MOVQ  $-1, "".~r2+16(FP)
    02822 (arith_ssa.go:369)  RET
    
    Updates #14277
    
    Change-Id: Ibe7d284f43406c704903632a4fcf2a4a64059686
    Reviewed-on: https://go-review.googlesource.com/19464
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 65855cf64022905c9b66abc26adc175e337193c9
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Thu Feb 11 20:46:43 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: factor out copyelimValue and phielimValue
    
    * Merge copyelim into phielim.
    * Add phielimValue to rewrite. cgoIsGoPointer is, for example, 2
    instructions smaller now.
    
    Change-Id: I8baeb206d1b3ef8aba4a6e3bcdc432959bcae2d5
    Reviewed-on: https://go-review.googlesource.com/19462
    Reviewed-by: David Chase <drchase@google.com>

commit adc8d491c2318b4b9e3b60ea868bd65c82ca13df
Author: Todd Neal <todd@tneal.org>
Date:   Thu Feb 11 20:43:15 2016 -0600

    [dev.ssa] cmd/compiler: rewrite AND x const as a shift if possible
    
    ANDs of constants whose only set bits are leading or trailing can be
    rewritten as two shifts instead.  This is slightly faster for 32 or
    64 bit operands.
    
    Change-Id: Id5c1ff27e5a4df22fac67b03b9bddb944871145d
    Reviewed-on: https://go-review.googlesource.com/19485
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit e49c91090000f22969e819326ed7e1c74f13bde3
Author: Todd Neal <todd@tneal.org>
Date:   Thu Feb 11 18:13:17 2016 -0600

    [dev.ssa] cmd/compile: print aux value also
    
    When printing a value with just an aux, print the aux as well. Debugging
    cse is easier when the aux values are visible.
    
    Change-Id: Ifaf96bdb25462c9df7ba01fdfdbf0d379631f555
    Reviewed-on: https://go-review.googlesource.com/19476
    Reviewed-by: Keith Randall <khr@golang.org>

commit d509788d9742b905f7fae7923e07976c88a7424e
Merge: 6d40c62 eb0cff9
Author: Gerrit Code Review <noreply-gerritcodereview@google.com>
Date:   Thu Feb 11 21:32:48 2016 +0000

    Merge "[dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch" into dev.ssa

commit 6d40c62732ac76333426bdd6a67f8c1457ac8334
Author: Keith Randall <khr@golang.org>
Date:   Thu Feb 4 18:02:03 2016 -0800

    [dev.ssa] cmd/compile: remove redundant compare ops
    
    Flagalloc was recalculating flags is some situations
    when it didn't need to.  Fixed by using the same name
    for the original flag calculation instruction throughout.
    
    Change-Id: Ic0bf58f728a8d87748434dd25a67b0708755e1f8
    Reviewed-on: https://go-review.googlesource.com/19237
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit eb0cff9a768373d97dd9b43f8022db9fd61d3b6c
Merge: 7f7f7cd 6a208ef
Author: Keith Randall <khr@golang.org>
Date:   Tue Feb 9 12:28:02 2016 -0800

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge from tip to dev.ssa.
    
    Two fixes:
    1) Mark selectgo as not returning.  This caused problems
       because there are no VARKILL ops on the selectgo path,
       causing things to be marked live that shouldn't be.
    2) Tell the amd64 assembler that addressing modes like
       name(SP)(AX*4) are ok.
    
    Change-Id: I9ca81c76391b1a65cc47edc8610c70ff1a621913

commit fd458ba49991fbdd65acaa83c970b9d6c63ec87e
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Feb 9 19:13:43 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: more simplifications and normalization
    
    Found by inspecting random generated code.
    
    Change-Id: I57d0fed7c3a8dc91fd13cdccb4819101f9976ec9
    Reviewed-on: https://go-review.googlesource.com/19413
    Reviewed-by: Keith Randall <khr@golang.org>

commit d0d04d2d6cdd79428f2c3b97d33b65638c1cdd71
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Feb 9 19:46:26 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: handle rewrite of Phis.
    
    * Phis can have variable number of arguments, but rulegen assumed that
    each operation has fixed number of arguments.
    * Rewriting Phis is necessary to handle the following case:
    
    func f1_ssa(a bool, x int) int {
            v := 0
            if a {
                    v = -1
            } else {
                    v = -1
            }
            return x|v
    }
    
    Change-Id: Iff6bd411b854f3d1d6d3ce21934bf566757094f2
    Reviewed-on: https://go-review.googlesource.com/19412
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7f7f7cddec65b48b35845c5fb537bb59bb7ecca6
Author: Keith Randall <khr@golang.org>
Date:   Mon Feb 8 11:00:43 2016 -0800

    [dev.ssa] cmd/compile: split decompose pass in two
    
    A first pass to decompose user types (structs, maybe
    arrays someday), and a second pass to decompose builtin
    types (strings, interfaces, slices, complex).  David wants
    this for value range analysis so he can have structs decomposed
    but slices and friends will still be intact and he can deduce
    things like the length of a slice is >= 0.
    
    Change-Id: Ia2300d07663329b51ed6270cfed21d31980daa7c
    Reviewed-on: https://go-review.googlesource.com/19340
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 9763f6f8cf6c62d19fd108e023dd759e457d0389
Author: Todd Neal <todd@tneal.org>
Date:   Mon Feb 8 18:06:12 2016 -0600

    [dev.ssa] cmd/compile: add test to detect cse bug
    
    Adds a test to detect the bug that slipped in earlier when partioning
    by the Aux value, but not sorting by it.
    
    Change-Id: I56d0ba76383bbc1514b3dabd295e369771c26645
    Reviewed-on: https://go-review.googlesource.com/19382
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit e93410d3e51064e3ec119c9ec47766f8467a3a4c
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Fri Feb 5 19:24:53 2016 +0300

    [dev.ssa] cmd/compile: use INC/DEC instead of add when we can
    
    INC/DEC produces slightly faster and smaller code.
    
    Change-Id: I329d9bdb01b90041be45e053d9df640818bf0c2d
    Reviewed-on: https://go-review.googlesource.com/19238
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 964dda9bf1a5ddff5f258d0a0ad07d3a01d5a952
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Mon Feb 8 18:55:56 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa/gen: constant fold Neg*.
    
    Change-Id: Id51e5c97e9653b764b809bf3424f1a6d31b6ffea
    Reviewed-on: https://go-review.googlesource.com/19338
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 58cfa40419f2ef1c58f58015eb8421a5a1b94129
Author: David Chase <drchase@google.com>
Date:   Mon Feb 8 12:07:39 2016 -0500

    [dev.ssa] cmd/compile: fix for bug in cse speed improvements
    
    Problem was caused by use of Args[].Aux differences
    in early partitioning.  This artificially separated
    two equivalent expressions because sort ignores the
    Aux field, hence things can end with equal things
    separated by unequal things and thus the equal things
    are split into more than one partition.  For example:
    SliceLen(a), SliceLen(b), SliceLen(a).
    
    Fix: don't use Args[].Aux in initial partitioning.
    
    Left in a debugging flag and some debugging Fprintf's;
    not sure if that is house style or not.  We'll probably
    want to be more systematic in our naming conventions,
    e.g. ssa.cse, ssa.scc, etc.
    
    Change-Id: Ib1412539cc30d91ea542c0ac7b2f9b504108ca7f
    Reviewed-on: https://go-review.googlesource.com/19316
    Reviewed-by: Keith Randall <khr@golang.org>

commit bc0792284306ade896db24002a52d00901ce5f69
Author: Todd Neal <todd@tneal.org>
Date:   Sat Feb 6 20:56:50 2016 -0600

    [dev.ssa] cmd/compile: speed up cse
    
    Examine both Aux and AuxInt to form more precise initial partitions.
    Restructure loop to avoid repeated type.Equal() call.  Speeds up
    compilation of testdata/gen/arithConst_ssa by 25%.
    
    Change-Id: I3cfb1d254adf0601ee69239e1885b0cf2a23575b
    Reviewed-on: https://go-review.googlesource.com/19313
    Run-TryBot: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit faf1bdb42b81f75b49307667e170754621b6653f
Author: Keith Randall <khr@golang.org>
Date:   Sat Feb 6 22:35:34 2016 -0800

    [dev.ssa] cmd/compile: panic doesn't return
    
    Panic doesn't return, so record that we immediately exit after a panic
    call.  This will help code analysis.
    
    Change-Id: I4d1f67494f97b6aee130c43ff4e44307b2b0f149
    Reviewed-on: https://go-review.googlesource.com/19303
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit a3055af45e655cce1070f6f346a3ed76e01039e2
Author: Keith Randall <khr@golang.org>
Date:   Fri Feb 5 20:26:18 2016 -0800

    [dev.ssa] cmd/compile: strength-reduce 64-bit constant divides
    
    The frontend does this for 32 bits and below, but SSA needs
    to do it for 64 bits.  The algorithms are all copied from
    cgen.go:cgen_div.
    
    Speeds up TimeFormat substantially: ~40% slower to ~10% slower.
    
    Change-Id: I023ea2eb6040df98ccd9105e15ca6ea695610a7a
    Reviewed-on: https://go-review.googlesource.com/19302
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit aebf6611dfba195d15c5119e14d6f5b708adbdfb
Author: Keith Randall <khr@golang.org>
Date:   Fri Jan 29 21:57:57 2016 -0800

    [dev.ssa] cmd/compile: reorg write barriers a bit
    
    Use just a single write barrier flag test, even if there
    are multiple pointer fields in a struct.
    
    This helps move more of the wb-specific code (like the LEA
    needed to materialize the write address) into the unlikely path.
    
    Change-Id: Ic7a67145904369c4ff031e464d51267d71281c8f
    Reviewed-on: https://go-review.googlesource.com/19085
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit a6fb514bf8dd43cff37185eb02b448d8244af9da
Author: Keith Randall <khr@golang.org>
Date:   Thu Feb 4 15:53:33 2016 -0800

    [dev.ssa] cmd/compile: add store constant indexed operations
    
    Change-Id: Ifb8eba1929c79ee7a8cae2191613c55a3b8f74e5
    Reviewed-on: https://go-review.googlesource.com/19236
    Reviewed-by: Todd Neal <todd@tneal.org>

commit a0da2d242c0830daf9de469f2db7f1b85523bf05
Author: Keith Randall <khr@golang.org>
Date:   Thu Feb 4 15:08:47 2016 -0800

    [dev.ssa] cmd/compile: Use ADD instead of LEA when we can
    
    If the output register is one of the input registers,
    we can use a real add instead of LEA.
    
    Change-Id: Ide58f1536afb077c0b939d3a8c7555807fd1c5e3
    Reviewed-on: https://go-review.googlesource.com/19234
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>

commit 0543447597d54de911bd1e02369a0b191849b4bd
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Thu Feb 4 19:52:10 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa/gen: enclose rules' code in a for loop
    
    * Enclose each rule's code in a for with no condition
    * The loop is ran at most once because it's always terminated by a return.
    * Use break when matching condition fails
    * Drop rule hashes
    * Shaves about 3 lines of code per rule
    
    The binary size is not afected.
    
    Change-Id: I27c3e40dc8cae98dcd50739342dc38db2ef9c247
    Reviewed-on: https://go-review.googlesource.com/19220
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9278a04a8fca27cdfb556313c82c052f28504b9f
Author: Keith Randall <khr@golang.org>
Date:   Tue Feb 2 11:13:50 2016 -0800

    [dev.ssa] cmd/compile: more combining of ops into instructions
    
    Mostly indexed loads.  A few more LEA cases.
    
    Change-Id: Idc1d447ed0dd6e906cd48e70307a95e77f61cf5f
    Reviewed-on: https://go-review.googlesource.com/19172
    Reviewed-by: Todd Neal <todd@tneal.org>
    Run-TryBot: Keith Randall <khr@golang.org>

commit 7de8cfdf9ce3942a255172e03c8f2ad380a30aca
Author: Keith Randall <khr@golang.org>
Date:   Thu Feb 4 11:21:31 2016 -0800

    [dev.ssa] cmd/internal/obj/x86: don't clobber flags with dynlink rewrite
    
    LEAQ symbol+100(SB), AX
    
    Under dynamic link, rewrites to
    
    MOVQ symbol@GOT(SB), AX
    ADDQ $100, AX
    
    but ADDQ clobbers flags, whereas the original LEAQ (when not dynamic
    linking) doesn't.
    
    Use LEAQ instead of ADDQ to add that constant in so we preserve flags.
    
    Change-Id: Ibb055403d94a4c5163e1c7d2f45da633ffd0b6a3
    Reviewed-on: https://go-review.googlesource.com/19230
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2df4b9c265f4d2552141ad42cd537b28495a9c81
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Thu Feb 4 17:21:57 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa/gen: move variable reset code into a function
    
    Shaves about 3 lines per generated rule.
    
    Change-Id: I94adc94ab79f90ac5fd033f896ece3b1eddf0f3d
    Reviewed-on: https://go-review.googlesource.com/19197
    Reviewed-by: Keith Randall <khr@golang.org>

commit 93a0b0f315a1b37e59449740dc5e5bb692b0d9f5
Author: Todd Neal <todd@tneal.org>
Date:   Wed Feb 3 06:21:24 2016 -0500

    [dev.ssa] cmd/compile: rewrites for constant shifts
    
    Add rewrite rules to optimize constant shifts.
    
    Fixes #10637
    
    Change-Id: I74b724d3e81aeb7098c696d02c050f7fdfd5b523
    Reviewed-on: https://go-review.googlesource.com/19106
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 606a11f46432f62edb759c1d1b86d536b08d0d96
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Feb 3 20:50:12 2016 +0100

    [dev.ssa] src/cmd/compile/internal/ssa/gen: detect type earlier when generating rules.
    
    Removes approx. one assignment per rule.
    
    Change-Id: Ie9f0a7082ae12c4447ff6b4d40678cd92bdbb6f2
    Reviewed-on: https://go-review.googlesource.com/19194
    Reviewed-by: Keith Randall <khr@golang.org>

commit d4a95e78fa176e02a19cd94c9c273743f3a983c1
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Feb 3 19:43:46 2016 +0100

    [dev.ssa] cmd/compile/internal/ssa: simplify comparisons with constants
    
    * Simplify comparisons of form a + const1 == const2 or a + const1 != const2.
    * Canonicalize Eq, Neq, Add, Sub to have a constant as first argument.
    Needed for the above new rules and helps constant folding.
    
    Change-Id: I8078702a5daa706da57106073a3e9f640a67f486
    Reviewed-on: https://go-review.googlesource.com/19192
    Reviewed-by: Keith Randall <khr@golang.org>

commit c58c20f30f5b34af6b36b21b1348a5d8011612ac
Author: Todd Neal <todd@tneal.org>
Date:   Wed Feb 3 21:06:21 2016 -0500

    [dev.ssa] cmd/compile: use sparsetree in checkFunc
    
    Modify the simple domCheck to use the sparse tree code.  This
    speeds up compilation of one of the generated test cases from
    1m48s to 17s.
    
    Change-Id: If577410ee77b54918147a66917a8e3721297ee0a
    Reviewed-on: https://go-review.googlesource.com/19187
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 955749c45f7bcff039adbe54d11c7c24782d6941
Author: Todd Neal <todd@tneal.org>
Date:   Wed Feb 3 19:27:43 2016 -0500

    [dev.ssa] cmd/compile: remove dead code
    
    Change-Id: I1738e3af7de0972c54d74325d80781059d0796d8
    Reviewed-on: https://go-review.googlesource.com/19186
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 29257f5effa30a8a0cc2d79df8ff25593a861b2b
Merge: 830ce3f 91911e3
Author: Rick Hudson <rlh@golang.org>
Date:   Wed Feb 3 18:14:46 2016 -0500

    Merge remote-tracking branch 'origin/master' into toc
    
    Change-Id: Iba5d3ce5955b5e95c3c40b4408727e28ade67c61

commit 3297a4f5f320ca8262ba5d222d3571020a9460bc
Author: Todd Neal <todd@tneal.org>
Date:   Tue Feb 2 06:35:34 2016 -0500

    [dev.ssa] cmd/compile: cache sparse sets in Config
    
    Move the cached sparse sets to the Config.  I tested make.bash with
    pre-allocating sets of size 150 and not caching very small sets, but the
    difference between this implementation (no min size, no preallocation)
    and a min size with preallocation was fairly negligible:
    
    Number of sparse sets allocated:
    Cached in Config w/none preallocated no min size    3684 *this CL*
    Cached in Config w/three preallocated no min size   3370
    Cached in Config w/three preallocated min size=150  3370
    Cached in Config w/none preallocated min size=150  15947
    Cached in Func,  w/no min                          96996 *previous code*
    
    Change-Id: I7f9de8a7cae192648a7413bfb18a6690fad34375
    Reviewed-on: https://go-review.googlesource.com/19152
    Reviewed-by: Keith Randall <khr@golang.org>

commit 16b1fce9217886797940247f6ffce57e119c3e47
Author: Keith Randall <khr@golang.org>
Date:   Sun Jan 31 11:39:39 2016 -0800

    [dev.ssa] cmd/compile: add aux typing, flags to ops
    
    Add the aux type to opcodes.
    Add rematerializeable as a flag.
    
    Change-Id: I906e19281498f3ee51bb136299bf26e13a54b2ec
    Reviewed-on: https://go-review.googlesource.com/19088
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit c87a62f32bc5080c6656d3f80e2da8d5c63ed55b
Author: David Chase <drchase@google.com>
Date:   Sat Jan 30 17:37:38 2016 -0500

    [dev.ssa] cmd/compile: reducing alloc footprint of dominator calc
    
    Converted working slices of pointer into slices of pointer
    index.  Half the size (on 64-bit machine) and no pointers
    to trace if GC occurs while they're live.
    
    TODO - could expose slice mapping ID->*Block; some dom
    clients also construct these.
    
    Minor optimization in regalloc that cuts allocation count.
    
    Minor optimization in compile.go that cuts calls to Sprintf.
    
    Change-Id: I28f0bfed422b7344af333dc52ea272441e28e463
    Reviewed-on: https://go-review.googlesource.com/19104
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 25abe96214911fed68c5a66562bf524768e2a92a
Author: Todd Neal <todd@tneal.org>
Date:   Sun Jan 31 21:18:55 2016 -0600

    [dev.ssa] cmd/compile: regenerate code
    
    These changes were left out of the 1cc5789df9 commit.
    
    Change-Id: Id7f49973da281a567b69228dbaea31846b82b4af
    Reviewed-on: https://go-review.googlesource.com/19105
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 1cc5789df9eb8c88e0d7248a9a16b3d4ca854962
Author: Keith Randall <khr@golang.org>
Date:   Sat Jan 30 11:25:38 2016 -0800

    [dev.ssa] cmd/compile: lots of small rewrite optimizations
    
    Small optimizations I noticed while looking at Giovanni's test cases.
    
    More shifts by constants.
    Indexed stores for smaller types.
    Fold LEA into loads/stores.
    More extending loads.
    CMP $0 of AND -> TEST
    
    Fix order of TEST ops.
    
    Giovanni's test cases at https://gist.github.com/rasky/62fba94e3a20d1b05b2a
    
    Change-Id: I7077bc0b5319bf05767eeb39f401f4bb4b39f635
    Reviewed-on: https://go-review.googlesource.com/19086
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>
    Reviewed-by: David Chase <drchase@google.com>

commit f962f33035bccd67c08fa3e0002659d6b9978bbc
Author: Todd Neal <todd@tneal.org>
Date:   Thu Jan 28 22:19:46 2016 -0600

    [dev.ssa] cmd/compile: reuse sparse sets across compiler passes
    
    Cache sparse sets in the function so they can be reused by subsequent
    compiler passes.
    
    benchmark                        old ns/op     new ns/op     delta
    BenchmarkDSEPass-8               206945        180022        -13.01%
    BenchmarkDSEPassBlock-8          5286103       2614054       -50.55%
    BenchmarkCSEPass-8               1790277       1790655       +0.02%
    BenchmarkCSEPassBlock-8          18083588      18112771      +0.16%
    BenchmarkDeadcodePass-8          59837         41375         -30.85%
    BenchmarkDeadcodePassBlock-8     1651575       511169        -69.05%
    BenchmarkMultiPass-8             531529        427506        -19.57%
    BenchmarkMultiPassBlock-8        7033496       4487814       -36.19%
    
    benchmark                        old allocs     new allocs     delta
    BenchmarkDSEPass-8               11             4              -63.64%
    BenchmarkDSEPassBlock-8          599            120            -79.97%
    BenchmarkCSEPass-8               18             18             +0.00%
    BenchmarkCSEPassBlock-8          2700           2700           +0.00%
    BenchmarkDeadcodePass-8          4              3              -25.00%
    BenchmarkDeadcodePassBlock-8     30             9              -70.00%
    BenchmarkMultiPass-8             24             20             -16.67%
    BenchmarkMultiPassBlock-8        1800           1000           -44.44%
    
    benchmark                        old bytes     new bytes     delta
    BenchmarkDSEPass-8               221367        142           -99.94%
    BenchmarkDSEPassBlock-8          3695207       3846          -99.90%
    BenchmarkCSEPass-8               303328        303328        +0.00%
    BenchmarkCSEPassBlock-8          5006400       5006400       +0.00%
    BenchmarkDeadcodePass-8          84232         10506         -87.53%
    BenchmarkDeadcodePassBlock-8     1274940       163680        -87.16%
    BenchmarkMultiPass-8             608674        313834        -48.44%
    BenchmarkMultiPassBlock-8        9906001       5003450       -49.49%
    
    Change-Id: Ib1fa58c7f494b374d1a4bb9cffbc2c48377b59d3
    Reviewed-on: https://go-review.googlesource.com/19100
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 88b230eaa69647405e7c278044550640fc098111
Author: David Chase <drchase@google.com>
Date:   Fri Jan 29 14:44:15 2016 -0500

    [dev.ssa] cmd/compile: exposed do-log boolean to reduce allocations
    
    From memory profiling, about 3% reduction in allocation count.
    
    Change-Id: I4b662d55b8a94fe724759a2b22f05a08d0bf40f8
    Reviewed-on: https://go-review.googlesource.com/19103
    Reviewed-by: Keith Randall <khr@golang.org>

commit f3575a9561319d2398ab01dd0375e0909e2f2aa8
Author: Keith Randall <khr@golang.org>
Date:   Tue Jan 26 15:55:05 2016 -0800

    [dev.ssa] cmd/compile: tweak init function prologue
    
    We used to compare the init state with == to 0 and 2, which
    requires 2 comparisons.  Instead, compare with 1 and use
    <, ==.  That requires only one comparison.
    
    This isn't a big deal performance-wise, as it is just init
    code.  But there is a fair amount of init code, so this
    should help a bit with code size.
    
    Change-Id: I4a2765f1005776f0edce28ac143f4b7596d95a68
    Reviewed-on: https://go-review.googlesource.com/18948
    Reviewed-by: David Chase <drchase@google.com>

commit f94e0745b3dc922ca7f3d15507e33ed6d3a65ee6
Author: Keith Randall <khr@golang.org>
Date:   Tue Jan 26 15:47:08 2016 -0800

    [dev.ssa] cmd/compile: prepare for some load+op combining
    
    Rename StoreConst to ValAndOff so we can use it for other ops.
    Make ValAndOff print nicely.
    
    Add some notes & checks related to my aborted attempt to
    implement combined CMP+load ops.
    
    Change-Id: I2f901d12d42bc5a82879af0334806aa184a97e27
    Reviewed-on: https://go-review.googlesource.com/18947
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 5ba31940dc2934dc76a47f0e614d441225ea3a95
Author: Keith Randall <khr@golang.org>
Date:   Mon Jan 25 17:06:54 2016 -0800

    [dev.ssa] cmd/compile: fix write barriers for SSA
    
    The old write barriers used _nostore versions, which
    don't work for Ian's cgo checker.  Instead, we adopt the
    same write barrier pattern as the default compiler.
    
    It's a bit trickier to code up but should be more efficient.
    
    Change-Id: I6696c3656cf179e28f800b0e096b7259bd5f3bb7
    Reviewed-on: https://go-review.googlesource.com/18941
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit d8a65672f8605d9d51fd90996162ab8d79a4aa32
Author: Keith Randall <khr@golang.org>
Date:   Mon Jan 25 09:21:17 2016 -0800

    [dev.ssa] cmd/compile: optimization for && and || expressions
    
    Compiling && and || expressions often leads to control
    flow of the following form:
    
    p:
      If a goto b else c
    b: <- p ...
      x = phi(a, ...)
      If x goto t else u
    
    Note that if we take the edge p->b, then we are guaranteed
    to take the edge b->t also.  So in this situation, we might
    as well go directly from p to t.
    
    Change-Id: I6974f1e6367119a2ddf2014f9741fdb490edcc12
    Reviewed-on: https://go-review.googlesource.com/18910
    Reviewed-by: David Chase <drchase@google.com>

commit 9d6e605cf7c2b8b9c279e687d06bc92a8ade6fcc
Author: Keith Randall <khr@golang.org>
Date:   Mon Jan 18 20:00:15 2016 -0800

    [dev.ssa] cmd/compile: simple forward-looking register allocation tweak
    
    For each value that needs to be in a fixed register at the end of the
    block, and try to pick that fixed register when the instruction
    generating that value is scheduled (or restored from a spill).
    
    Just used for end-of-block register requirements for now.
    Fixed-register instruction requirements (e.g. shift in ecx) can be
    added later.  Also two-instruction constraints (input reg == output
    reg) might be recorded in a similar manner.
    
    Change-Id: I59916e2e7f73657bb4fc3e3b65389749d7a23fa8
    Reviewed-on: https://go-review.googlesource.com/18774
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 8a961aee286cc7c891d5e0a49ed362fe500f81f4
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 28 17:43:45 2016 -0800

    [dev.ssa] cmd/compile: fix -N build
    
    The OpSB hack didn't quite work.  We need to really
    CSE these ops to make regalloc happy.
    
    Change-Id: I9f4d7bfb0929407c84ee60c9e25ff0c0fbea84af
    Reviewed-on: https://go-review.googlesource.com/19083
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 056c09bb88008f683904e88cea582722eeac2f27
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 28 15:54:45 2016 -0800

    [dev.ssa] cmd/compile: add backing store buffers for block.{Preds,Succs,Values}
    
    Speeds up compilation by 6%.
    
    Change-Id: Ibaad95710323ddbe13c1b0351843fe43a48d776e
    Reviewed-on: https://go-review.googlesource.com/19080
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4c5459da2b5d0c80d48f3bb61e194ded5d413c31
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 28 16:11:56 2016 -0800

    [dev.ssa] cmd/compile: fix build
    
    Some tests make multiple Funcs per Config at once.
    With value & block caching, we can't do that any more.
    
    Change-Id: Ibdb60aa2fcf478f1726b3be0fcaa06b04433eb67
    Reviewed-on: https://go-review.googlesource.com/19081
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2f57d0fe024c19b1b7a86084d72e7267863415a6
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 28 13:46:30 2016 -0800

    [dev.ssa] cmd/compile: preallocate small-numbered values and blocks
    
    Speeds up the compiler ~5%.
    
    Change-Id: Ia5cf0bcd58701fd14018ec77d01f03d5c7d6385b
    Reviewed-on: https://go-review.googlesource.com/19060
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6a96a2fe5a95375e2f8cccca6d848728fef0e09f
Author: Keith Randall <khr@golang.org>
Date:   Wed Jan 27 16:47:23 2016 -0800

    [dev.ssa] cmd/compile: make cse faster
    
    It is one of the slowest compiler phases right now, and we
    run two of them.
    
    Instead of using a map to make the initial partition, use a sort.
    It is much less memory intensive.
    
    Do a few optimizations to avoid work for size-1 equivalence classes.
    
    Implement -N.
    
    Change-Id: I1d2d85d3771abc918db4dd7cc30b0b2d854b15e1
    Reviewed-on: https://go-review.googlesource.com/19024
    Reviewed-by: David Chase <drchase@google.com>

commit 7b773946c09e075ed50c49e76e08f61c16616ee4
Author: Keith Randall <khr@golang.org>
Date:   Fri Jan 22 13:44:58 2016 -0800

    [dev.ssa] cmd/compile: disable xor clearing when flags must be preserved
    
    The x86 backend automatically rewrites MOV $0, AX to
    XOR AX, AX.  That rewrite isn't ok when the flags register
    is live across the MOV.  Keep track of which moves care
    about preserving flags, then disable this rewrite for them.
    
    On x86, Prog.Mark was being used to hold the length of the
    instruction.  We already store that in Prog.Isize, so no
    need to store it in Prog.Mark also.  This frees up Prog.Mark
    to hold a bitmask on x86 just like all the other architectures.
    
    Update #12405
    
    Change-Id: Ibad8a8f41fc6222bec1e4904221887d3cc3ca029
    Reviewed-on: https://go-review.googlesource.com/18861
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 733bf6ef67013b8410c51a72697c6fbff53ad30d
Author: Keith Randall <khr@golang.org>
Date:   Mon Jan 25 20:26:06 2016 -0800

    [dev.ssa] cmd/compile: get rid of +0.0 hack
    
    The conversion from -0.0 to +0.0 happens inside mpgetflt now.
    The SSA code doesn't need this fix any more.
    
    Change-Id: I6cd4f4a4e75b13cf284ebbb95b08af050ed9891c
    Reviewed-on: https://go-review.googlesource.com/18942
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>

commit 3c26c0db3923451f1340e10524e985597da5bba2
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 21 13:27:01 2016 -0800

    [dev.ssa] cmd/compile: short-circuit empty blocks
    
    Empty blocks are introduced to remove critical edges.
    After regalloc, we can remove any of the added blocks
    that are still empty.
    
    Change-Id: I0b40e95ac3a6cc1e632a479443479532b6c5ccd9
    Reviewed-on: https://go-review.googlesource.com/18833
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 7730880f7ceda51c025a3c6bd296e1fa2de52318
Author: Keith Randall <khr@golang.org>
Date:   Wed Jan 20 14:06:17 2016 -0800

    [dev.ssa] cmd/compile: update SSA TODOs
    
    Change-Id: I78743987dcb45d821212caf95a00ae15b7a6cfd8
    Reviewed-on: https://go-review.googlesource.com/18773
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit a734bbc95349a487c78ff02eda07e3f219808be3
Author: Keith Randall <khr@golang.org>
Date:   Mon Jan 11 21:05:33 2016 -0800

    [dev.ssa] cmd/compile: Allow structs to be SSAd
    
    Break small structs up into their components so they
    can be registerized.
    
    Change StructSelect to use field indexes instead of
    field offsets, as field offsets aren't unique in the
    presence of zero-sized fields.
    
    Change-Id: I2f1dc89f7fa58e1cf58aa1a32b238959d53f62e4
    Reviewed-on: https://go-review.googlesource.com/18570
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit b5c5efd5de4c4668b149d1dba4d9b00c88dd0b80
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 14 16:02:23 2016 -0800

    [dev.ssa] cmd/compile: optimize phi ops
    
    Redo how we keep track of forward references when building SSA.
    When the forward reference is resolved, update the Value node
    in place.
    
    Improve the phi elimination pass so it can simplify phis of phis.
    
    Give SSA package access to decoded line numbers.  Fix line numbers
    for constant booleans.
    
    Change-Id: I3dc9896148d260be2f3dd14cbe5db639ec9fa6b7
    Reviewed-on: https://go-review.googlesource.com/18674
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>

commit 23d5810c8fd2dc079f06c6052f404d81896d74f0
Merge: 90065ea c7754c8
Author: Keith Randall <khr@golang.org>
Date:   Tue Jan 19 09:59:21 2016 -0800

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge from tip to dev.ssa.
    
    Conflicts:
            src/runtime/sys_windows_amd64.s
    
    Change-Id: I5f733130049c810e6ceacd46dad85faebca52b29

commit 90065eaba42c044af0a35cfc2abda76e9c58ccd3
Author: Keith Randall <khr@golang.org>
Date:   Fri Jan 15 08:45:47 2016 -0800

    [dev.ssa] cmd/compile: use wider move instruction for floats
    
    Distinguish move/load/store ops.  Unify some of this code a bit.
    
    Reduces Mandelbrot slowdown with SSA from 58% to 12%.
    
    Change-Id: I3276eaebcbcdd9de3f8299c79b5f25c0429194c4
    Reviewed-on: https://go-review.googlesource.com/18677
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit da8af47710818617d765a25f0ff487fe8d633250
Author: Keith Randall <khr@golang.org>
Date:   Wed Jan 13 11:14:57 2016 -0800

    [dev.ssa] cmd/compile: report better line numbers for Unimplemented/Fatal
    
    If a failure occurs in SSA processing, we always report the
    last line of the function we're compiling.  Modify the callbacks
    from SSA to the GC compiler so we can pass a line number back
    and use it in Fatalf.
    
    Change-Id: Ifbfad50d5e167e997e0a96f0775bcc369f5c397e
    Reviewed-on: https://go-review.googlesource.com/18599
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 594c3aa063befecb6bd51a191781e44d1cd1b566
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 14 15:28:26 2016 -0800

    [dev.ssa] runtime: fix windows build
    
    Pull the relevant part of https://go-review.googlesource.com/#/c/18304/
    into the SSA branch.  This fixes the windows SSA build.
    
    Change-Id: Iee3834d8e7019cd90307e32029f3d1032ceb46c1
    Reviewed-on: https://go-review.googlesource.com/18673
    Reviewed-by: Austin Clements <austin@google.com>

commit 3425295e915bc16236f2c021317705aca34319af
Author: Keith Randall <khr@golang.org>
Date:   Tue Jan 5 14:56:26 2016 -0800

    [dev.ssa] cmd/compile: clean up comparisons
    
    Add new constant-flags opcodes.  These can be generated from
    comparisons that we know the result of, like x&31 < 32.
    
    Constant-fold the constant-flags opcodes into all flag users.
    
    Reorder some CMPxconst args so they read in the comparison direction.
    
    Reorg deadcode removal a bit - it needs to remove the OpCopy ops it
    generates when strength-reducing Phi ops.  So it needs to splice out all
    the dead blocks and do a copy elimination before it computes live
    values.
    
    Change-Id: Ie922602033592ad8212efe4345394973d3b94d9f
    Reviewed-on: https://go-review.googlesource.com/18267
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 9094e3ada2de3cc8129b70730c2c0782a4040201
Author: Keith Randall <khr@golang.org>
Date:   Mon Jan 4 13:34:54 2016 -0800

    [dev.ssa] cmd/compile: fix spill sizes
    
    In code that does:
    
        var x, z int32
        var y int64
        z = phi(x, int32(y))
    
    We silently drop the int32 cast because truncation is a no-op.
    The phi operation needs to make sure it uses the size of the
    phi, not the size of its arguments, when generating spills.
    
    Change-Id: I1f7baf44f019256977a46fdd3dad1972be209042
    Reviewed-on: https://go-review.googlesource.com/18390
    Reviewed-by: David Chase <drchase@google.com>

commit 830ce3f1ed2771a94ed768816304ce2dd1017da0
Author: Russ Cox <rsc@golang.org>
Date:   Mon Jan 11 21:10:46 2016 -0500

    [dev.garbage] dev.garbage: create new dev.garbage branch
    
    This is for a GC experiment that may or may not go anywhere.
    
    Change-Id: I46a4535cc768ce8bbe33c72961f1fa87658493f7
    Reviewed-on: https://go-review.googlesource.com/18534
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 035fcc0c4d0354adb1a8c837035f4ef3426bb5ed
Author: Keith Randall <khr@golang.org>
Date:   Tue Jan 5 16:30:08 2016 -0800

    [dev.ssa] cmd/compile: add some more TODOs
    
    Change-Id: If8b6b85d2165d6222b36f101adb95b7ee40371c1
    Reviewed-on: https://go-review.googlesource.com/18300
    Reviewed-by: David Chase <drchase@google.com>

commit b386c34ef9c5552fe0f31c7765879c5f60b07bd1
Merge: d7ad7b9 305b4ba
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 7 10:00:16 2016 -0800

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge from tip into dev.ssa.
    
    Change-Id: I1627d7c7e6892cd4f1f5da5f3e07389ff1d677ce

commit d7ad7b9efecf034e2d95fe48b455a8dbb2204f2e
Author: Keith Randall <khr@golang.org>
Date:   Mon Jan 4 13:34:54 2016 -0800

    [dev.ssa] cmd/compile: zero register masks for each edge
    
    Forgot to reset these masks before each merge edge is processed.
    
    Change-Id: I2f593189b63f50a1cd12b2dd4645ca7b9614f1f3
    Reviewed-on: https://go-review.googlesource.com/18223
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 7d9f1067d1c8a2d0252fa2a115f1d016f94f7087
Author: Keith Randall <khr@golang.org>
Date:   Thu Dec 17 10:01:24 2015 -0800

    [dev.ssa] cmd/compile: better register allocator
    
    Reorder how register & stack allocation is done.  We used to allocate
    registers, then fix up merge edges, then allocate stack slots.  This
    lead to lots of unnecessary copies on merge edges:
    
    v2 = LoadReg v1
    v3 = StoreReg v2
    
    If v1 and v3 are allocated to the same stack slot, then this code is
    unnecessary.  But at regalloc time we didn't know the homes of v1 and
    v3.
    
    To fix this problem, allocate all the stack slots before fixing up the
    merge edges.  That way, we know what stack slots values use so we know
    what copies are required.
    
    Use a good technique for shuffling values around on merge edges.
    
    Improves performance of the go1 TimeParse benchmark by ~12%
    
    Change-Id: I731f43e4ff1a7e0dc4cd4aa428fcdb97812b86fa
    Reviewed-on: https://go-review.googlesource.com/17915
    Reviewed-by: David Chase <drchase@google.com>

commit 5b355a7907550d6fe457fdf6a92fc320d5a764d5
Author: Keith Randall <khr@golang.org>
Date:   Fri Dec 11 20:41:52 2015 -0800

    [dev.ssa] cmd/compile: change ssa compilation trigger
    
    We used to compile everything with SSA and then decide whether
    to use the result or not.  It was useful when we were working
    on coverage without much regard for correctness, but not so much now.
    
    Instead, let's decide what we're going to compile and go through
    the SSA compiler for only those functions.
    
    TODO: next CL: get rid of all the UnimplementedF stuff.
    
    Change-Id: If629addd8b62cd38ef553fd5d835114137885ce0
    Reviewed-on: https://go-review.googlesource.com/17763
    Reviewed-by: David Chase <drchase@google.com>

commit 498933719287fbba1015c97d177a9bd4cfb9aada
Author: Keith Randall <khr@golang.org>
Date:   Fri Dec 11 14:59:01 2015 -0800

    [dev.ssa] cmd/compile: allow control values to be CSEd
    
    With the separate flagalloc pass, it should be fine to
    allow CSE of control values.  The worst that can happen
    is that the comparison gets un-CSEd by flagalloc.
    
    Fix bug in flagalloc where flag restores were getting
    clobbered by rematerialization during register allocation.
    
    Change-Id: If476cf98b69973e8f1a8eb29441136dd12fab8ad
    Reviewed-on: https://go-review.googlesource.com/17760
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>

commit c140df03267ab2e73ffd076002811aaa00fdc80e
Author: Keith Randall <khr@golang.org>
Date:   Wed Dec 9 15:58:18 2015 -0800

    [dev.ssa] cmd/compile: allocate the flag register in a separate pass
    
    Spilling/restoring flag values is a pain to do during regalloc.
    Instead, allocate the flag register in a separate pass.  Regalloc then
    operates normally on any flag recomputation instructions.
    
    Change-Id: Ia1c3d9e6eff678861193093c0b48a00f90e4156b
    Reviewed-on: https://go-review.googlesource.com/17694
    Reviewed-by: David Chase <drchase@google.com>

commit 09ffa0c4c772ff119d42820a8d90aba8b481397c
Author: Todd Neal <todd@tneal.org>
Date:   Sun Dec 6 21:25:24 2015 -0600

    [dev.ssa] test: use new go:noinline feature
    
    Replace old mechanisms for preventing inlining with go:noinline.
    
    Change-Id: I021a6450e6d644ec1042594730a9c64d695949a1
    Reviewed-on: https://go-review.googlesource.com/17500
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4304fbc4d0e024d948ef637d19d89b0b6359788f
Merge: 75102af 2c11164
Author: Keith Randall <khr@golang.org>
Date:   Mon Nov 16 13:20:16 2015 -0800

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Conflicts:
            src/cmd/compile/internal/gc/racewalk.go
            src/cmd/internal/obj/stack.go
            src/cmd/internal/obj/x86/obj6.go
            src/runtime/stack.go
            test/nilptr3.go
            test/nosplit.go
    
    Change-Id: Ie6053eb1577fd73e8243651f25c0f1fc765ae660

commit 75102afce77f1376b0aab3f1d5fee9b881d0f68a
Author: Keith Randall <khr@golang.org>
Date:   Thu Nov 5 14:59:47 2015 -0800

    [dev.ssa] cmd/compile: better register allocation
    
    Use a more precise computation of next use.  It properly
    detects lifetime holes and deallocates values during those holes.
    It also uses a more precise version of distance to next use which
    affects which values get spilled.
    
    Change-Id: I49eb3ebe2d2cb64842ecdaa7fb4f3792f8afb90b
    Reviewed-on: https://go-review.googlesource.com/16760
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 7807bda91d4038241b857a8bd341e6b9baf3a264
Author: Keith Randall <khr@golang.org>
Date:   Tue Nov 10 15:35:36 2015 -0800

    [dev.ssa] cmd/compile: be safer about uintptr/unsafe.Pointer conversions
    
    Make sure that when a pointer value is live across a function
    call, we save it as a pointer.  (And similarly a uintptr
    live across a function call should not be saved as a pointer.)
    
    Add a nasty test case.
    
    This is probably what is preventing the merge from master
    to dev.ssa.  Signs point to something like this bug happening
    in mallocgc.
    
    Change-Id: Ib23fa1251b8d1c50d82c6a448cb4a4fc28219029
    Reviewed-on: https://go-review.googlesource.com/16830
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 74e568f43a8dc5a2d52fe4b761ae256dadded8ce
Author: Keith Randall <khr@golang.org>
Date:   Mon Nov 9 21:35:40 2015 -0800

    [dev.ssa] cmd/compile: Deduplicate panic{index,slice,divide} calls
    
    Panics are only distinguished by their type and line number, so
    if we can trigger two of those panics in the same line, use the
    same panic call.  For example, in a[i]+b[j] we need only one
    panicindex call that both bounds checks can use.
    
    Change-Id: Ia2b6d3b1a67f2775df05fb72b8a1b149833572b7
    Reviewed-on: https://go-review.googlesource.com/16772
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 170589ee1ce4ef87e6a91ad05ea03422cf3f0908
Author: Keith Randall <khr@golang.org>
Date:   Mon Nov 9 20:54:34 2015 -0800

    [dev.ssa] cmd/compile: some SSA optimizations
    
    Some optimizations of things I've seen looking at generated code.
      (x+y)-x == y
      x-0 == x
    The ptr portion of the constant string "" can be nil.
    
    Also update TODO with recent changes.
    
    Change-Id: I02c41ca2f9e9e178bf889058d3e083b446672dbe
    Reviewed-on: https://go-review.googlesource.com/16771
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit d19bfc3b681029da32c1ac661b27764a532aa0fc
Author: Keith Randall <khr@golang.org>
Date:   Tue Nov 3 09:30:17 2015 -0800

    [dev.ssa] cmd/compile: Handle ONOT in conditionals as well
    
    Might as well, for a && !(b && c) and the like.
    
    Change-Id: I2548b6e6ee5870e074bcef6edd56a7db6e81d70f
    Reviewed-on: https://go-review.googlesource.com/16600
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 02f4d0a130ba95d7a03418c3ef308d7d21b34af3
Author: Keith Randall <khr@golang.org>
Date:   Mon Nov 2 08:10:26 2015 -0800

    [dev.ssa] cmd/compile: start arguments as spilled
    
    Declare a function's arguments as having already been
    spilled so their use just requires a restore.
    
    Allow spill locations to be portions of larger objects the stack.
    Required to load portions of compound input arguments.
    
    Rename the memory input to InputMem.  Use Arg for the
    pre-spilled argument values.
    
    Change-Id: I8fe2a03ffbba1022d98bfae2052b376b96d32dda
    Reviewed-on: https://go-review.googlesource.com/16536
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 582baae22a108e0b5f09da52c20f5ced83fe6084
Author: Keith Randall <khr@golang.org>
Date:   Mon Nov 2 21:28:13 2015 -0800

    [dev.ssa] cmd/compile: Do pointer arithmetic with int, not uintptr
    
    Be more consistent about this.  There's no reason to do the
    pointer arithmetic on a different type, as sizeof(int) >=
    sizeof(ptr) on all of our platforms.  It simplifies our
    rewrite rules also, except for a few that need duplication.
    
    Add some more constant folding to get constant indexing and
    slicing to fold down to nothing.
    
    Change-Id: I3e56cdb14b3dc1a6a0514f0333e883f92c19e3c7
    Reviewed-on: https://go-review.googlesource.com/16586
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 991873116e316f334f41343bb9bbd97720b0ee29
Author: Keith Randall <khr@golang.org>
Date:   Mon Nov 2 16:56:53 2015 -0800

    [dev.ssa] cmd/compile: better ANDAND and OROR in IF and FOR
    
    For the statement
    
        if a && b { target }
    
    the old code allocated a new variable v and did:
    
        v = a
        if a {
           v = b
        }
        if v { goto target }
    
    The new code does:
    
        if a {
          if b { goto target }
        }
    
    The new arrangement tends to generate much more efficient code.  In
    particular, there is no temporary variable and there is only one join
    point instead of two.
    
    The old code is still used for ANDAND and OROR which are not
    direct descendents of IF or FOR statements.
    
    Change-Id: I082f246d27c823c6f32d1287300e4b0911607507
    Reviewed-on: https://go-review.googlesource.com/16584
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 729abfa35ca19a3ec9bd11a8c25eecac5eba6cc9
Author: David Chase <drchase@google.com>
Date:   Mon Oct 26 17:34:06 2015 -0400

    [dev.ssa] cmd/compile: default compile+test with SSA
    
    Some tests disabled, some bifurcated into _ssa and not,
    with appropriate logging added to compiler.
    
    "tests/live.go" in particular needs attention.
    
    SSA-specific testing removed, since it's all SSA now.
    
    Added "-run_skips" option to tests/run.go to simplify
    checking whether a test still fails (or how it fails)
    on a skipped platform.
    
    The compiler now compiles with SSA by default.
    If you don't want SSA, specify GOSSAHASH=n (or N) as
    an environment variable.  Function names ending in "_ssa"
    are always SSA-compiled.
    
    GOSSAFUNC=fname retains its "SSA for fname, log to ssa.html"
    GOSSAPKG=pkg only has an effect when GOSSAHASH=n
    GOSSAHASH=10101 etc retains its name-hash-matching behavior
    for purposes of debugging.
    
    See #13068
    
    Change-Id: I8217bfeb34173533eaeb391b5f6935483c7d6b43
    Reviewed-on: https://go-review.googlesource.com/16299
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>

commit cdc36252fe38cef9afa1fa1efa61897fae8a21a2
Author: Todd Neal <todd@tneal.org>
Date:   Tue Oct 27 17:46:53 2015 -0500

    [dev.ssa] cmd/compile/internal/ssa: rewrite rules for const comparisons
    
    Shaves ~8k off the go binary on darwin x64.
    
    Change-Id: I73396af44ae28cd4cfc675290d6858f304d45b76
    Reviewed-on: https://go-review.googlesource.com/16456
    Run-TryBot: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d04f38e3ee7b7948c4fd18a0a26ad351d2b88670
Author: Keith Randall <khr@golang.org>
Date:   Thu Oct 29 13:41:02 2015 -0700

    [dev.ssa] cmd/compile: flag recomputing: find original values correctly
    
    We "spill" flag values by recomputing them from their original
    inputs.  The "find original inputs" part of the algorithm was
    a hack.  It was broken by rematerialization.  This change does
    the real job of keeping track of original values for each
    spill/restore/flagrecompute/rematerialization we issue.
    
    Change-Id: I95088326a4ee4958c98148b063e518c80e863e4c
    Reviewed-on: https://go-review.googlesource.com/16500
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 74180dd7dad42b800f2408340ad17cb62c6c11fb
Author: Todd Neal <todd@tneal.org>
Date:   Tue Oct 27 21:35:48 2015 -0500

    [dev.ssa] cmd/compile/internal/ssa: reuse Aux values for PEXTERN
    
    This improves cse and works correctly now that divide by zero is checked
    explicitly.
    
    Change-Id: If54fbe403ed5230b897afc5def644ba9f0056dfd
    Reviewed-on: https://go-review.googlesource.com/16454
    Run-TryBot: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a347ab7cd160cfc7a58d7c074d4fdc2806f83e9d
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 26 21:49:31 2015 -0700

    [dev.ssa] cmd/compile: split op rewrites into separate functions
    
    The single value rewrite function is too big.  Some compilers
    fail on it (out of memory, branch offset too large).  Break it
    up into a rewrite function per op.
    
    Change-Id: Iede697c8a1a3a22b485cd0dc85d3e233160c89c2
    Reviewed-on: https://go-review.googlesource.com/16347
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit e514021153f81c30b4a483079379c343916bcb0f
Author: Keith Randall <khr@golang.org>
Date:   Wed Oct 28 10:40:47 2015 -0700

    [dev.ssa] cmd/compile: fix printing of live information
    
    SSA generates ACALL assembly with the target in a *Sym.
    The old compiler generates both that *Sym and a *Node.
    Use the *Sym to print the live info so it works with both compilers.
    
    Change-Id: I0b12a161f83e76638604358c21b9f5abb31ce950
    Reviewed-on: https://go-review.googlesource.com/16432
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 18559e2da7a2698ad9e35072cbcba1a05ed73836
Author: David Chase <drchase@google.com>
Date:   Wed Oct 28 13:55:46 2015 -0400

    [dev.ssa] cmd/compile: make zero-divide panic from div/mod explicit
    
    Added an explicit compare-zero and branch-to-panic for
    integer division and mod so that other optimizations will
    not be fooled by their implicit panics.
    
    Change-Id: Ibf96f636b541c0088861907c537a6beb4b99fa4c
    Reviewed-on: https://go-review.googlesource.com/16450
    Reviewed-by: Keith Randall <khr@golang.org>

commit c24681ae2e1c96bd67c149cffa8f5ed394e68453
Author: Keith Randall <khr@golang.org>
Date:   Thu Oct 22 14:22:38 2015 -0700

    [dev.ssa] cmd/compile: remember names of values
    
    For debugging, spill values to named variables instead of autotmp_
    variables if possible.  We do this by keeping a name -> value map
    for each function, keep it up-to-date during deadcode elim, and use
    it to override spill decisions in stackalloc.
    
    It might even make stack frames a bit smaller, as it makes it easy
    to identify a set of spills which are likely not to interfere.
    
    This just works for one-word variables for now.  Strings/slices
    will be a separate CL.
    
    Change-Id: Ie89eba8cab16bcd41b311c479ec46dd7e64cdb67
    Reviewed-on: https://go-review.googlesource.com/16336
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit d43f2e37edf4115e31a0c9218d87182d0aa1c4f0
Author: Keith Randall <khr@golang.org>
Date:   Wed Oct 21 13:13:56 2015 -0700

    [dev.ssa] cmd/compile: introduce storeconst ops
    
    Introduce opcodes that store a constant value.
    AuxInt now needs to hold both the value to be stored and the
    constant offset at which to store it.  Introduce a StoreConst
    type to help encode/decode these parts to/from an AuxInt.
    
    Change-Id: I1631883abe035cff4b16368683e1eb3d2ccb674d
    Reviewed-on: https://go-review.googlesource.com/16170
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit cd01c0be267da70abe8bd6f53109fa2c70e581dc
Author: Todd Neal <todd@tneal.org>
Date:   Mon Oct 26 20:57:53 2015 -0500

    [dev.ssa] cmd/compile/internal/ssa: reorder fuse and dse
    
    deadstore elimination currently works in a block, fusing before
    performing dse eliminates ~1% more stores for make.bash
    
    Change-Id: If5bbddac76bf42616938a8e8e84cb7441fa02f73
    Reviewed-on: https://go-review.googlesource.com/16350
    Reviewed-by: Keith Randall <khr@golang.org>

commit 129261ae834fa27307f0ed0363b5f719147f2378
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 27 10:15:02 2015 -0700

    [dev.ssa] cmd/compile: give GetClosurePtr pointer type
    
    If the closure pointer gets spilled, we need to spill it with
    pointer type to make stack copy and GC happy.
    
    Change-Id: Ic108748e6b9caecd45522141f02c9422567376e3
    Reviewed-on: https://go-review.googlesource.com/16363
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 10462eb30f60c140bd3ab524272488f9e349335d
Author: Keith Randall <khr@golang.org>
Date:   Wed Oct 21 17:18:07 2015 -0700

    [dev.ssa] cmd/compile: better copying
    
    Replace REP MOVSB with all the copying techniques used by the
    old compiler.  Copy in chunks, DUFFCOPY, etc.
    
    Introduces MOVO opcodes and an Int128 type to move around
    16 bytes at a time.
    
    Change-Id: I1e73e68ca1d8b3dd58bb4af2f4c9e5d9bf13a502
    Reviewed-on: https://go-review.googlesource.com/16174
    Reviewed-by: Todd Neal <todd@tneal.org>
    Run-TryBot: Keith Randall <khr@golang.org>

commit 31115a5c98935b5dee2de73b991bc391141dfb9d
Author: Keith Randall <khr@golang.org>
Date:   Fri Oct 23 19:12:49 2015 -0700

    [dev.ssa] cmd/compile: optimize nil checks
    
    Use faulting loads instead of test/jeq to do nil checks.
    Fold nil checks into a following load/store if possible.
    
    Makes binaries about 2% smaller.
    
    Change-Id: I54af0f0a93c853f37e34e0ce7e3f01dd2ac87f64
    Reviewed-on: https://go-review.googlesource.com/16287
    Reviewed-by: David Chase <drchase@google.com>

commit a3180d8b1daff3e0238a3ff08dd9a4213a9e1266
Author: Keith Randall <khr@golang.org>
Date:   Fri Oct 23 14:08:50 2015 -0700

    [dev.ssa] cmd/compile: get rid of converts in unsafe.Pointer arithmetic
    
    unsafe.Pointer->uintptr, add, then uintptr->unsafe.Pointer.
    Do the add directly on the pointer type instead.
    
    Change-Id: I5a3a32691d0a000e16975857974ed9a1039c6d28
    Reviewed-on: https://go-review.googlesource.com/16281
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit e99dd520665000dfeb848fb4ecd381314b8fe61b
Author: David Chase <drchase@google.com>
Date:   Mon Oct 19 11:36:07 2015 -0400

    [dev.ssa] cmd/compile: enhance SSA filtering, add OpConvert
    
    Modified GOSSA{HASH.PKG} environment variable filters to
    make it easier to make/run with all SSA for testing.
    Disable attempts at SSA for architectures that are not
    amd64 (avoid spurious errors/unimplementeds.)
    
    Removed easy out for unimplemented features.
    
    Add convert op for proper liveness in presence of uintptr
    to/from unsafe.Pointer conversions.
    
    Tweaked stack sizes to get a pass on windows;
    1024 instead 768, was observed to pass at least once.
    
    Change-Id: Ida3800afcda67d529e3b1cf48ca4a3f0fa48b2c5
    Reviewed-on: https://go-review.googlesource.com/16201
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>

commit 3abb8441087dbc1f08320c40a750ac1a7209b9fe
Author: David Chase <drchase@google.com>
Date:   Fri Oct 23 12:34:03 2015 -0400

    [dev.ssa] cmd/compile: repair ssa testing build and test
    
    Calls to NewConfig required an extra parameter that
    sometimes could not be nil.
    
    Change-Id: I806dd53c045056a0c2d30d641a20fe27fb790539
    Reviewed-on: https://go-review.googlesource.com/16272
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7d6124697223ecf9d5ce21221377da2b9c7fd9f3
Author: Keith Randall <khr@golang.org>
Date:   Thu Oct 22 13:07:38 2015 -0700

    [dev.ssa] cmd/compile: implement reserved registers
    
    BP for framepointer experiment
    R15 for dynamic linking
    
    Change-Id: I28e48be461d04a4d5c9b013f48fce5c0e58d6a08
    Reviewed-on: https://go-review.googlesource.com/16231
    Run-TryBot: Todd Neal <todd@tneal.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit f206b16ff735015d4ca6b9d3ffafcee353fafa82
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 19 12:24:22 2015 -0700

    [dev.ssa] cmd/compile: assign unused registers to phi ops
    
    Register phis are better than stack phis.  If we have
    unused registers available, use them for phis.
    
    Change-Id: I3045711c65caa1b6d0be29131b87b57466320cc2
    Reviewed-on: https://go-review.googlesource.com/16080
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit fbfc18c52281a4ac6dd812274e9a3b4774f77f76
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 20 13:56:16 2015 -0700

    [dev.ssa] cmd/compile: don't issue nops for static data
    
    It confuses live variable analysis to have a bunch of unreachable
    no-ops at the end of a function.  Symptom is:
        gc/plive.go:483 panic: interface conversion: interface {} is nil, not *gc.BasicBlock
    
    I don't see any reason why the old compiler needs these no-ops either.
    all.bash passes with the equivalent code removed on master.
    
    Change-Id: Ifcd2c3e139aa16314f08aebc9079b2fb7aa60556
    Reviewed-on: https://go-review.googlesource.com/16132
    Reviewed-by: David Chase <drchase@google.com>

commit 97728b6575624ba5f1d0c060930fc07aad2b5517
Merge: d694f83 7c4fbb6
Author: Gerrit Code Review <noreply-gerritcodereview@google.com>
Date:   Tue Oct 20 15:46:15 2015 +0000

    Merge "[dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch" into dev.ssa

commit d694f83c2138dbb85b0fd99e1ed96e0d719c41cc
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 19 18:54:40 2015 -0700

    [dev.ssa] cmd/compile: getg needs a memory arg
    
    getg reads from memory, so it should really have a
    memory arg.  It is critical in functions which call setg
    to make sure getg gets ordered correctly with setg.
    
    Change-Id: Ief4875421f741fc49c07b0e1f065ce2535232341
    Reviewed-on: https://go-review.googlesource.com/16100
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 65df9c4c2b6750f207b71e65a01b2b16de7d3b61
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 19 18:44:50 2015 -0700

    [dev.ssa] cmd/compile: don't move mem-using values in tighten pass
    
    It isn't safe, the place where we're moving the value to
    might have a different live memory.  Moving will introduce
    two simultaneously live memories.
    
    Change-Id: I07e61a6db8ef285088c530dc2e5d5768d27871ff
    Reviewed-on: https://go-review.googlesource.com/16099
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 2dc88eead8d28c6d84f60e30746d90a76f920be6
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 19 16:13:58 2015 -0700

    [dev.ssa] cmd/compile: Don't rematerialize getg
    
    It isn't safe in functions that also call setg.
    
    Change-Id: I76a7bf0401b4b6c8a129c245b15a2d6f06080e94
    Reviewed-on: https://go-review.googlesource.com/16095
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 7c4fbb650c3448a19dfcfe39ac46f8a25e0d2314
Merge: c64a6f6 996c540
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 19 13:56:55 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    The only major fixup is that duffzero changed from
    8-byte writes to 16-byte writes.
    
    Change-Id: I1762b74ce67a8e4b81c11568027cdb3572f7f87c

commit c64a6f636282e1db66e6bda681be9b76069b1918
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 19 10:57:03 2015 -0700

    [dev.ssa] cmd/compile: Rematerialize in regalloc
    
    Rematerialize constants instead of spilling and loading them.
    "Constants" includes constant offsets from SP and SB.
    
    Should help somewhat with stack frame sizes.  I'm not sure
    exactly how much yet.
    
    Change-Id: I44dbad97aae870cf31cb6e89c92fe4f6a2b9586f
    Reviewed-on: https://go-review.googlesource.com/16029
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit d076ef749b8628c9743f6544eb30e8fde5d7f289
Author: Todd Neal <todd@tneal.org>
Date:   Thu Oct 15 20:25:32 2015 -0500

    [dev.ssa] cmd/compile/internal/ssa: reuse symbols
    
    Reuse the ArgSymbol for nodes so that the Aux values will be equal for cse.
    
    Change-Id: Iaae80bd19ff2d3f51b6c9049fd860e04baa6f175
    Reviewed-on: https://go-review.googlesource.com/15930
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Todd Neal <todd@tneal.org>

commit 366dcc4529d09c31f7b0df65003792022bc5ec09
Author: Keith Randall <khr@golang.org>
Date:   Sat Oct 17 21:14:56 2015 -0700

    [dev.ssa] cmd/compile: Reuse stack slots for spill locations
    
    For each type, maintain a list of stack slots used to spill
    SSA values to the stack.  Reuse those stack slots for noninterfering
    spills.
    
    Lowers frame sizes.  As an example, runtime.mSpan_Sweep goes from
    584 bytes to 392 bytes.  heapBitsSetType goes from 576 bytes to 152 bytes.
    
    Change-Id: I0e9afe80c2fd84aff9eb368318685de293c363d0
    Reviewed-on: https://go-review.googlesource.com/16022
    Reviewed-by: David Chase <drchase@google.com>

commit 57670ad8b29fb62dc87e970fde95e3263f6948ff
Author: David Chase <drchase@google.com>
Date:   Fri Oct 9 16:48:30 2015 -0400

    [dev.ssa] cmd/compile: fill remaining SSA gaps
    
    Changed racewalk/race detector to use FP in a more
    sensible way.
    
    Relaxed checks for CONVNOP when race detecting.
    
    Modified tighten to ensure that GetClosurePtr cannot float
    out of entry block (turns out this cannot be relaxed, DX is
    sometimes stomped by other code accompanying race detection).
    
    Added case for addr(CONVNOP)
    
    Modified addr to take "bounded" flag to suppress nilchecks
    where it is set (usually, by race detector).
    
    Cannot leave unimplemented-complainer enabled because it
    turns out we are optimistically running SSA on every platform.
    
    Change-Id: Ife021654ee4065b3ffac62326d09b4b317b9f2e0
    Reviewed-on: https://go-review.googlesource.com/15710
    Reviewed-by: Keith Randall <khr@golang.org>

commit 177b697ba534431a266c9882af53fb776eb9b505
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 13 11:08:08 2015 -0700

    [dev.ssa] cmd/compile: allow rewrite rules to specify a target block
    
    Some rewrite rules need to make sure the rewrite target ends up
    in a specific block.  For example:
    
    (MOVBQSX (MOVBload [off] {sym} ptr mem)) ->
       @v.Args[0].Block (MOVBQSXload <v.Type> [off] {sym} ptr mem)
    
    The MOVBQSXload op needs to be in the same block as the MOVBload
    (to ensure exactly one memory is live at basic block boundaries).
    
    Change-Id: Ibe49a4183ca91f6c859cba8135927f01d176e064
    Reviewed-on: https://go-review.googlesource.com/15804
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9703564c9aaa037b95b6dcbdefe0fa505710c4ff
Author: Keith Randall <khr@golang.org>
Date:   Fri Oct 9 09:33:29 2015 -0700

    [dev.ssa] cmd/compile: make sure we don't move loads between blocks
    
    This can lead to multiple stores being live at once.
    
    Do OINDEX and ODOT using addresses & loads instead of specific ops.
    This keeps SSA values from containing unSSAable types.
    
    Change-Id: I79567e9d43cdee09084eb89ea0bd7aa3aad48ada
    Reviewed-on: https://go-review.googlesource.com/15654
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 32ffbf7e0f1e79b28eb7da7bc21ab7ce478ef3ef
Author: David Chase <drchase@google.com>
Date:   Thu Oct 8 17:14:12 2015 -0400

    [dev.ssa] cmd/compile: handle addr of PARAM nodes
    
    Turns out that these do occur after all, so did the obvious
    refactoring into the addr method.
    
    Also added better debugging for the case of unhandled
    closure args.
    
    Change-Id: I1cd8ac58f78848bae0b995736f1c744fd20a6c95
    Reviewed-on: https://go-review.googlesource.com/15640
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>

commit 8824dccc282884919e6747396d7ff704825b5076
Author: David Chase <drchase@google.com>
Date:   Thu Oct 8 12:39:56 2015 -0400

    [dev.ssa] cmd/compile: fixed heap-escaped-paramout
    
    Changed tree generation to correctly use PARAMOUT instead
    of PARAM.
    
    Emit Func.Exit before any returns.
    
    Change-Id: I2fa53cc7fad05fb4eea21081ba33d1f66db4ed49
    Reviewed-on: https://go-review.googlesource.com/15610
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>

commit 808d7c70d5d5107697e4bfacbf66a80cb1d1e06d
Author: Keith Randall <khr@golang.org>
Date:   Wed Oct 7 14:35:25 2015 -0700

    [dev.ssa] cmd/compile: fix failed lowerings
    
    One was OAPPEND of large types.  We need to mem-mem copy them
    instead of storing them.
    
    Another was pointer-like struct and array types being put in the
    data field of an eface.  We need to use the underlying pointer
    type for the load that fills in the eface.data field.
    
    Change-Id: Id8278c0381904e52d59011a66ce46386b41b5521
    Reviewed-on: https://go-review.googlesource.com/15552
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 9aba7e76f605f7c4fad49886e710152730c34b69
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 5 13:48:40 2015 -0700

    [dev.ssa] cmd/compile: Eval append args after growslice
    
    For appending large types, we want to evaluate the
    values being appended after the growslice call, not before.
    Evaluating them before leads to phi operations on large types
    which confuses the lowering pass.
    
    The order pass has already removed any side-effects from the
    values being appended, so it doesn't matter if we do this
    last eval before or after the growslice call.
    
    This change fixes a bunch (but not all) of our failed lowerings.
    
    Change-Id: I7c697d4d5275d71b7ef4677b830fd86c52ba03a4
    Reviewed-on: https://go-review.googlesource.com/15430
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 579ccd831fc9c0e4ed05a904bb0ff61e5124c70c
Author: David Chase <drchase@google.com>
Date:   Wed Sep 23 09:59:39 2015 -0400

    [dev.ssa] cmd/compile: remove done items from TODO
    
    Change-Id: I5ee2953f7d387ef5bc70f6958763f775f0ae72dc
    Reviewed-on: https://go-review.googlesource.com/14880
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 956f3199a397ef05a4a34b2059d15c033556517a
Author: David Chase <drchase@google.com>
Date:   Fri Sep 11 16:40:05 2015 -0400

    [dev.ssa] cmd/compile: addressed vars and closures
    
    Cleaned up first-block-in-function code.
    Added cases for |PHEAP for PPARAM and PAUTO.
    Made PPARAMOUT act more like PAUTO for purposes
    of address generation and vardef placement.
    Added cases for OCLOSUREVAR and Ops for getting closure
    pointer.  Closure ops are scheduled at top of entry block
    to capture DX.
    
    Wrote test that seems to show proper behavior for addressed
    parameters, locals, and returns.
    
    Change-Id: Iee93ebf9e3d9f74cfb4d1c1da8038eb278d8a857
    Reviewed-on: https://go-review.googlesource.com/14650
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>

commit 04d6edc36debf5e3ec5420f2522f7ef4341bb65e
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 18 18:23:34 2015 -0700

    [dev.ssa] cmd/compile: clean up zeroing.  Use duffzero when appropriate.
    
    Change-Id: I4deb03340e87f43179d5e22bf81843c17b5581fc
    Reviewed-on: https://go-review.googlesource.com/14756
    Reviewed-by: David Chase <drchase@google.com>

commit 3a70bf9c0c7d6035788df0801129f44ea410aff5
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 17 16:54:15 2015 -0700

    [dev.ssa] cmd/compile: use function calls instead of special ops for panics
    
    There's no need for special ops for panicindex and panicslice.
    Just use regular runtime calls.
    
    Change-Id: I71b9b73f4f1ebce1220fdc1e7b7f65cfcf4b7bae
    Reviewed-on: https://go-review.googlesource.com/14726
    Reviewed-by: David Chase <drchase@google.com>

commit 8c5bfcc52ba9aced772935cdf45a99cf3d465f1e
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 18 15:11:30 2015 -0700

    [dev.ssa] cmd/compile: Move runtime call gen to its own function
    
    Change-Id: I5de36244de4dcc4a9827ee0fa04526e3e3578e7f
    Reviewed-on: https://go-review.googlesource.com/14755
    Reviewed-by: David Chase <drchase@google.com>

commit d29e92be523efd8270c0e7ca0eaa6afa86bbedca
Author: Keith Randall <khr@golang.org>
Date:   Sat Sep 19 12:01:39 2015 -0700

    [dev.ssa] cmd/compile: Use varkill only for non-SSAable vars
    
    For variables which get SSA'd, SSA keeps track of all the def/kill.
    It is only for on-stack variables that we need them.
    
    This reduces stack frame sizes significantly because often the
    only use of a variable was a varkill, and without that last use
    the variable doesn't get allocated in the frame at all.
    
    Fixes #12602
    
    Change-Id: I3f00a768aa5ddd8d7772f375b25f846086a3e689
    Reviewed-on: https://go-review.googlesource.com/14758
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 37590bddc417c2675f4979a9467edc1961f88b61
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 18 22:58:10 2015 -0700

    [dev.ssa] cmd/compile: move un-SSAable objects
    
    We need to move any objects whose types are not SSA-able.
    
    Fixes the "not lowered: Load ARRAY PTR64 mem" errors.
    
    Change-Id: I7a0b609f917d7fb34bc9215fee4da15f9961cf6c
    Reviewed-on: https://go-review.googlesource.com/14753
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d3886906b18d292643117b55c987ec9b35b226b3
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 18 22:12:38 2015 -0700

    [dev.ssa] cmd/compile: implement OSTRUCTLIT and OARRAYLIT
    
    The frontend rewrites most literals, so we see only zero
    ones during SSA construction.  We can implement those
    using the existing zeroing behavior.
    
    Change-Id: I390ad1be0a4b6729baf0c8936c7610aae2aef049
    Reviewed-on: https://go-review.googlesource.com/14754
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b32217a2730b322f4bdc2a00ff9159bae853b939
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 17 16:45:10 2015 -0700

    [dev.ssa] cmd/compile: consistent naming of temporary vars
    
    ptrvar -> ptrVar, etc.
    
    Change-Id: Id38bed0e145711dfe3bdc9541ab4741da6a570a2
    Reviewed-on: https://go-review.googlesource.com/14725
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 269baa981e327caea3adb4722f17b4b02d5c834c
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 17 10:31:16 2015 -0700

    [dev.ssa] cmd/compile: implement ODOTTYPE and OAS2DOTTYPE
    
    Taken over and completed from Josh's change
    https://go-review.googlesource.com/#/c/14524/
    
    Change-Id: If5d4f732843cc3e99bd5edda54458f0a8be73e91
    Reviewed-on: https://go-review.googlesource.com/14690
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 5f10573e6005f1ad34710335af94c1ba6d1a6157
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 17 15:19:23 2015 -0700

    [dev.ssa] cmd/compile: Generate AUNDEF at the end of BlockExit blocks
    
    Generate AUNDEF for every exit block, not just for certain
    control values.
    
    Change-Id: Ife500ac5159ee790bc1e70c0e9b0b1f854bc4c47
    Reviewed-on: https://go-review.googlesource.com/14721
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit d24768e14df109fb04a89ba0037dc6069fa60810
Author: Keith Randall <khr@golang.org>
Date:   Wed Sep 9 23:56:59 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: complete call ops
    
    OCALLINTER, as well as ODEFER/OPROC with OCALLMETH/OCALLINTER.
    
    Move all the call logic to its own routine, a lot of the
    code is shared.
    
    Change-Id: Ieac59596165e434cc6d1d7b5e46b78957e9c5ed3
    Reviewed-on: https://go-review.googlesource.com/14464
    Reviewed-by: Todd Neal <todd@tneal.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 1e4ebfdda59f9e5df4bfb5edf3827a9393c1c4de
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 10 13:53:27 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: fix iface and slice comparisons
    
    A simpler way to do iface/slice comparisons.  Fixes some
    cases of failed lowerings.
    
    Change-Id: Ia252bc8648293a2d460f63c41f1591785543a1e9
    Reviewed-on: https://go-review.googlesource.com/14493
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9d22c101f58dd8f65410fb352562b91de5fbcb7a
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 11 11:02:57 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: implement OAPPEND
    
    Change-Id: I1fbce8c421c48074a964b4d9481c92fbc3524f80
    Reviewed-on: https://go-review.googlesource.com/14525
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 6793cb755c01c4e5fa074518281ccb6abda61b54
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 15 15:39:47 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: turn off runtime ssa tests
    
    Fixes build.  Not great, but it will let others make progress.
    
    Change-Id: If9cf2bbb5016e40aa91cf1c8bb62982ae2aed5e4
    Reviewed-on: https://go-review.googlesource.com/14621
    Reviewed-by: Keith Randall <khr@golang.org>

commit cde977c23cbf5fb29f12bcbca5164530d0256019
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 15 09:02:07 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: fix sign extension + load combo
    
    Load-and-sign-extend opcodes were being generated in the
    wrong block, leading to having more than one memory variable
    live at once.  Fix the rules + add a test.
    
    Change-Id: Iadf80e55ea901549c15c628ae295c2d0f1f64525
    Reviewed-on: https://go-review.googlesource.com/14591
    Reviewed-by: Todd Neal <todd@tneal.org>
    Run-TryBot: Todd Neal <todd@tneal.org>

commit e3869a6b65bb0f95dac7eca3d86055160b12589f
Author: Keith Randall <khr@golang.org>
Date:   Mon Sep 7 23:18:02 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement write barriers
    
    For now, we only use typedmemmove.  This can be optimized
    in future CLs.
    
    Also add a feature to help with binary searching bad compilations.
    Together with GOSSAPKG, GOSSAHASH specifies the last few binary digits
    of the hash of function names that should be compiled.  So
    GOSSAHASH=0110 means compile only those functions whose last 4 bits
    of hash are 0110.  By adding digits to the front we can binary search
    for the function whose SSA-generated code is causing a test to fail.
    
    Change-Id: I5a8b6b70c6f034f59e5753965234cd42ea36d524
    Reviewed-on: https://go-review.googlesource.com/14530
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5505e8ccc74e8e4cbacace0143730a309b1a7655
Author: Keith Randall <khr@golang.org>
Date:   Sat Sep 12 23:27:26 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement slice opcodes
    
    Implement OSLICE, OSLICEARR, OSLICESTR, OSLICE3, OSLICE3ARR.
    
    reviewer: Ignore the code in OINDEX, that's from CL 14466.
    
    Change-Id: I00cc8aecd4c6f40ea5517cd660bb0ce759d91171
    Reviewed-on: https://go-review.googlesource.com/14538
    Reviewed-by: Todd Neal <todd@tneal.org>

commit c7081409bb58edc0fcbccbba230b1667845e94a6
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 10 10:01:15 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: fix string index
    
    Change-Id: I984d3e0410ac38c4e42ae8e3670ea47e2140de76
    Reviewed-on: https://go-review.googlesource.com/14466
    Reviewed-by: Alexandru Moșoi <alexandru@mosoi.ro>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit fda72e03751ab876ced9351611e42ad019090ec8
Author: Keith Randall <khr@golang.org>
Date:   Sat Sep 12 14:45:58 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: don't treat vardef/varkill as reads
    
    This makes deadstore elimination work reasonably again.
    
    Change-Id: I3a8caced71f12dfb6c1d0c68b7a7d8d7a736ea23
    Reviewed-on: https://go-review.googlesource.com/14536
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 46ffb026b4ffc5a872a74a4ec3892b8ddad8bd8e
Author: Keith Randall <khr@golang.org>
Date:   Sat Sep 12 14:06:44 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: OCHECKNIL is a statement, not an expression
    
    Change-Id: I5a683f532a5a0b2bc862d80c871e8dc6721016fc
    Reviewed-on: https://go-review.googlesource.com/14534
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7e390724d275363c335d7c6980f1131d13b9d192
Author: Keith Randall <khr@golang.org>
Date:   Sat Sep 12 14:14:02 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement OCOMPLEX
    
    Change-Id: I1e5993e0e56481ce838c0e3979b1a3052e72dba5
    Reviewed-on: https://go-review.googlesource.com/14535
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a329e21ccdc0a3df9630ccab2096ea658e17201b
Author: Keith Randall <khr@golang.org>
Date:   Sat Sep 12 13:26:57 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement OSQRT
    
    Change-Id: Iec61ca1bdc064c29ceca6d47f600d5643d0a64dd
    Reviewed-on: https://go-review.googlesource.com/14533
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0726931c10b7e021a5d01f210bdad66f39a4321e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Aug 29 14:54:45 2015 -0700

    [dev.ssa] cmd/compile: refactor assign
    
    Move the AST to SSA conversion to the caller.
    This enables it to be used in contexts in which
    the RHS is already an *ssa.Value.
    
    Change-Id: Ibb87210fb9fda095a9b7c7f4ad1264a7cbd269bf
    Reviewed-on: https://go-review.googlesource.com/14521
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9552295833ddec28f1e4dffc8f3e80b6448e6f83
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Sep 11 10:28:33 2015 -0700

    [dev.ssa] cmd/compile: minor CSE cleanup
    
    Remove unnecessary local var split.
    
    Change-Id: I907ef682b5fd9b3a67771edd1fe90c558f8937ea
    Reviewed-on: https://go-review.googlesource.com/14523
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit cea441427e7a007ea5e35a4baa9cc2cb5d000f64
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Sep 8 16:52:25 2015 -0700

    [dev.ssa] cmd/compile: add constBool helpers
    
    Change-Id: I1f93ea65bbdc895cd4eff7545e1688a64d85aae5
    Reviewed-on: https://go-review.googlesource.com/14520
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f5c53e0deb37b6f108e73bdb8b9a5955b2db5315
Author: Keith Randall <khr@golang.org>
Date:   Wed Sep 9 18:03:41 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: simplify how exit blocks are used
    
    Move to implicit (mostly) instead of explicit exit blocks.
    RET and RETJMP have no outgoing edges - they implicitly exit.
    CALL only has one outgoing edge, as its exception edge is
    implicit as well.
    Exit blocks are only used for unconditionally panicking code,
    like the failed branches of nil and bounds checks.
    
    There may now be more than one exit block.  No merges happen
    at exit blocks.
    
    The only downside is it is harder to find all the places code
    can exit the method.  See the reverse dominator code for an
    example.
    
    Change-Id: I42e2fd809a4bf81301ab993e29ad9f203ce48eb0
    Reviewed-on: https://go-review.googlesource.com/14462
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit c244ce097c1d75b4fd178683f74bfd9318a81ebe
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 10 14:59:00 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: fix complex compares
    
    It was using 64-bit float comparison ops for complex64.
    It should use 32-bit float comparison.
    
    Fixes build.
    
    Change-Id: I6452b227257fecc09e04cd092ccf328d1fc9917f
    Reviewed-on: https://go-review.googlesource.com/14497
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit db380bf44bcd8bcfdcbb68d18855111090282a63
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 10 11:05:42 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: add == and != for complex
    
    Change-Id: Iefabce4eb0dbc313dd1863513b45307cc76c545a
    Reviewed-on: https://go-review.googlesource.com/14468
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f518071577d177c5ec5b4c0c9e9dcd14e9cd32a
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 10 11:37:09 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: fix real/imag ops
    
    They were using the result type to look up the op, not the arg type.
    
    Change-Id: I0641cba363fa6e7a66ad0860aa340106c10c2cea
    Reviewed-on: https://go-review.googlesource.com/14469
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 545c9662031330ea3f92c51986d8ef1c29684bcb
Author: Todd Neal <todd@tneal.org>
Date:   Wed Sep 9 20:39:31 2015 -0400

    [dev.ssa] test: fix build
    
    Add line that was inadvertently removed.
    
    Change-Id: I99ebc1041e984e408ae5825836c28b9891d6043b
    Reviewed-on: https://go-review.googlesource.com/14470
    Run-TryBot: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit def7c65b7062f5c087c4e348768ee4c464b79b91
Author: Todd Neal <todd@tneal.org>
Date:   Mon Sep 7 19:07:02 2015 -0500

    [dev.ssa] cmd/compile/internal/ssa: implement OCFUNC
    
    Change-Id: Ieb9cddf8876bf8cd5ee1705d9210d22c3959e8cc
    Reviewed-on: https://go-review.googlesource.com/14329
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Todd Neal <todd@tneal.org>

commit adba6c4fdf8c9d2078a88a016924e80fd23cb39c
Author: Todd Neal <todd@tneal.org>
Date:   Tue Sep 8 07:50:25 2015 -0400

    [dev.ssa] cmd/compile/internal/ssa: treat -0.0 literal as 0.0
    
    This matches existing behavior, see issue #2196
    
    Change-Id: Ifa9359b7c821115389f337a57de355c5ec23be8f
    Reviewed-on: https://go-review.googlesource.com/14261
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2a2957656270cf409d11eb2df1d316e97cef2b62
Author: David Chase <drchase@google.com>
Date:   Sun Sep 6 21:32:24 2015 -0400

    [dev.ssa] cmd/compile: fix N^2 dominator queries in CSE
    
    Added tree numbering data structure.
    Changed dominator query in CSE.
    Removed skip-for-too-big patch in CSE.
    Passes all.bash.
    
    Change-Id: I98d7c61b6015c81f5edab553615db17bc7a58d68
    Reviewed-on: https://go-review.googlesource.com/14326
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8a1f6217c57316808e8f23f5f2fa251de3c18a26
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 8 21:28:44 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement ORETJMP
    
    Change-Id: I352c7b9aab053959bc74c15861339e1dbe545ddc
    Reviewed-on: https://go-review.googlesource.com/14404
    Reviewed-by: David Chase <drchase@google.com>

commit fd8c71be865386b5545571c9ff3b5c604809e133
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 8 21:37:37 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: eval defer args before setting argsize and func
    
    Evaluating args can overwrite arg area, so we can't write argsize and func
    until args are evaluated.
    
    Fixes test/recover.go, test/recover1.go, and test/fixedbugs/issue4066.go
    
    Change-Id: I862e4934ccdb8661431bcc3e1e93817ea834ea3f
    Reviewed-on: https://go-review.googlesource.com/14405
    Reviewed-by: David Chase <drchase@google.com>

commit a7cfc759f2b03cb1155477d99384578f2910139c
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 8 16:04:37 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: handle returns correctly
    
    Make sure that return blocks take a store as their control.  Without
    this, code was getting inserted between the return and exit blocks.
    
    Use AEND to mark the end of code.  The live variable analysis gets
    confused when routines end like:
        JMP earlier
        RET
    because the RET is unreachable.  The RET was incorrectly added to the
    last basic block, rendering the JMP invisible to the CFG builder.
    
    Change-Id: I91b32c8b37075347243ff039b4e4385856fba7cd
    Reviewed-on: https://go-review.googlesource.com/14398
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 1c2975c305b2b2c32f2673c93ab51204c5a5bff5
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 8 16:23:50 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: avoid generating test binary file
    
    Using the main package causes a binary to be generated.  That binary
    clutters up git listings.
    
    Use a non-main package instead, so the results of a successful
    compilation are thrown away.
    
    Change-Id: I3ac91fd69ad297a5c0fe035c22fdef290b7dfbc4
    Reviewed-on: https://go-review.googlesource.com/14399
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0ec72b6b9dcf0ffee1eca400deb4867010c45c6e
Merge: c684d4d 14f9195
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 8 15:42:53 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge of master into dev.ssa.
    
    Change-Id: I48aa17700096a14f2a20ad07491ebfcd7529f6d5

commit c684d4d26c3197039ac2c2f53a862f25dc7d1112
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Sep 8 18:18:59 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa: fix string slice types.
    
    Change-Id: I28bc6373bb42d9abf4f179664dbaab8d514a6ab9
    Reviewed-on: https://go-review.googlesource.com/14376
    Reviewed-by: Keith Randall <khr@golang.org>

commit ca9e450bed8e0884e88731526adfb2b4080b548e
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 8 08:59:57 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: fix defer in functions with no return
    
    The after-defer test jumps to a deferreturn site.  Some functions
    (those with infinite loops) have no deferreturn site.  Add one
    so we have one to jump to.
    
    Change-Id: I505e7f3f888f5e7d03ca49a3477b41cf1f78eb8a
    Reviewed-on: https://go-review.googlesource.com/14349
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 8d081679d5e72637ec724df7d6ec5f9e1f6a78e6
Author: Todd Neal <todd@tneal.org>
Date:   Mon Sep 7 19:29:26 2015 -0500

    [dev.ssa] test: ensure that all current tests run
    
    Some of the test files were missing, so add them.
    
    Change-Id: Ifac248edf33e1e4ccd82355f596d74eab4ff01a2
    Reviewed-on: https://go-review.googlesource.com/14328
    Run-TryBot: Todd Neal <todd@tneal.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 3fa0a75a02f8c54fe4b3436a343271ce1d6682f4
Author: Keith Randall <khr@golang.org>
Date:   Mon Sep 7 13:55:49 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: large object load/store vs. vardef
    
    VarDef declarations are getting in the way of rewriting load/store
    pairs into moves.  This change fixes that, albeit in a really hacky way.
    Better options would be appreciated.
    
    Increases coverage during make.bash from 67% to 71%.
    
    Change-Id: I336e967687e2238c7d0d64e3b37132a731ad15c3
    Reviewed-on: https://go-review.googlesource.com/14347
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 6bf383c7b31c990231c2a6c148b98e035b3b1b53
Author: Todd Neal <todd@tneal.org>
Date:   Sun Sep 6 16:00:01 2015 -0400

    [dev.ssa] cmd/compile: clean up nilcheck logic
    
    Be more clear about the two conditions that we care about:
    1) a block that performs a nil check (OpIsNonNil), which may be removed
    2) a block that is the non-nil sucessor for an OpIsNonNil block
    
    Now we only care about removing nilchecks for two scenarios:
    - a type 1 block is dominated by a type 2 block for the same value
    - a block is both type 1 and type 2 for the same value
    
    Fixes math/big.
    
    Change-Id: I50018a4014830461ddfe2a2daf588468e4a8f0b4
    Reviewed-on: https://go-review.googlesource.com/14325
    Reviewed-by: Keith Randall <khr@golang.org>

commit 1fc52b61f24c210514d4b14e9cc2f8e0aa3f3d9b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 6 19:39:07 2015 -0700

    [dev.ssa] test: use SSA codegen for runnable tests
    
    Now that the standard library tests
    are all passing, add the
    test directory tests.
    
    These contain a number of edge case tests
    that are of particular interest for compilers.
    
    Some kinds of tests are not well-suited
    for a new backend, such as errorcheck tests.
    To start, use SSA only for run and runoutput.
    
    There are three failing tests now.
    Just mark them as such for now,
    so that we can prevent regressions.
    
    This code will all be unwound once SSA
    codegen matures and becomes the default.
    
    Change-Id: Ic51e6d0cc1cd48ef1e2fe2c9a743bf0cce275200
    Reviewed-on: https://go-review.googlesource.com/14344
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ad5ceafa2cc71380e2b1d4ecd9ddd5ff458c3010
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Sep 7 09:03:58 2015 -0700

    [dev.ssa] cmd/compile: update SSA todos
    
    Change-Id: I1271c015e602cd7ec92bf24f019dd8839b3180fc
    Reviewed-on: https://go-review.googlesource.com/14346
    Reviewed-by: Keith Randall <khr@golang.org>

commit fa5fe191371e87596637000a99e5b281b49e8f3f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 6 19:24:59 2015 -0700

    [dev.ssa] cmd/compile: implement OIMAG and OREAL
    
    Change-Id: I17c83f6552367d42d48c1ec62fbb494f010fd866
    Reviewed-on: https://go-review.googlesource.com/14343
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1792b363101143efadc71f75c6f27056ab03b0f4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 5 19:28:27 2015 -0700

    [dev.ssa] cmd/compile: implement OEFACE
    
    Change-Id: I32953c4e1d82795bacba9eb94d65cd2e26bfeb87
    Reviewed-on: https://go-review.googlesource.com/14339
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>

commit e22ae879d391e8814b697c79ec7ba2bdc825f25f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 5 19:28:15 2015 -0700

    [dev.ssa] cmd/compile: implement OCHECKNIL
    
    Change-Id: Ifb6b2ad6078ad084b73c0e785e748e92139684e2
    Reviewed-on: https://go-review.googlesource.com/14338
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c3eb1a7e8a191c0d0be3a3cc3e835010560e4b5a
Author: Keith Randall <khr@golang.org>
Date:   Sun Sep 6 13:42:26 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: handle local function declarations
    
    They are already handled by the frontend, we just need to
    skip them when we see them in ssa.
    
    Change-Id: I309d91552f96a761f8d429a2cab3a47d200ca9e5
    Reviewed-on: https://go-review.googlesource.com/14341
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 95bb89f6dd4d92747bed1fe451379cd2b99ec5b7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 6 15:04:46 2015 -0700

    [dev.ssa] cmd/compile: fix build
    
    CL 14337 made SSA support fixedbugs/issue9604b.go.
    That test contains > 40k blocks.
    This made the O(n^2) dom algorithm fail to terminate
    in a reasonable length of time, breaking the build.
    
    For the moment, cap the number of blocks
    to fix the build.
    
    This will be reverted when a more efficient
    dom algorithm is put in place,
    which will be soon.
    
    Change-Id: Ia66c2629481d29d06655ec54d1deff076b0422c6
    Reviewed-on: https://go-review.googlesource.com/14342
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 4178f207763374c798c56a868b04d1aeacc21cd9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 5 19:28:00 2015 -0700

    [dev.ssa] cmd/compile: implement OPLUS
    
    Change-Id: Iaf282211a717e38b05e5d2661d400d465decad50
    Reviewed-on: https://go-review.googlesource.com/14337
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9569b957cba47310bbdaf6f19732dcb0ebbb373b
Author: Keith Randall <khr@golang.org>
Date:   Fri Aug 28 22:51:01 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: implement go and defer
    
    TODO: for now, just function calls.  Do method and interface calls.
    
    Change-Id: Ib262dfa31cb753996cde899beaad4dc2e66705ac
    Reviewed-on: https://go-review.googlesource.com/14035
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 6b9b618787156dea53d14dde924b71639548da33
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Sep 4 08:50:28 2015 -0700

    [dev.ssa] cmd/compile: run std tests with SSA codegen as part of all.bash
    
    Todd Neal has made all the stdlib tests pass.
    Now the trybots and build dashboard can
    help us keep them passing.
    
    All of this code will be unwound bit by bit
    as SSA matures and then becomes the default.
    
    Change-Id: I52ac7e72a87d329ccce974d6671c054374828d11
    Reviewed-on: https://go-review.googlesource.com/14294
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d2107fc98724662c7aa343d8004ed9d391fdeb59
Author: Keith Randall <khr@golang.org>
Date:   Mon Aug 24 02:16:19 2015 -0700

    [dev.ssa] cmd/runtime: generate gc bitmaps for SSA-compiled code
    
    This change is all about leveraging the gc bitmap generation
    that is already done by the current compiler.  We rearrange how
    stack allocation is done so that we generate a variable declaration
    for each spill.  We also reorganize how args/locals are recorded
    during SSA.  Then we can use the existing allocauto/defframe to
    allocate the stack frame and liveness to make the gc bitmaps.
    
    With this change, stack copying works correctly and we no longer
    need hacks in runtime/stack*.go to make tests work.  GC is close
    to working, it just needs write barriers.
    
    Change-Id: I990fb4e3fbe98850c6be35c3185a1c85d9e1a6ba
    Reviewed-on: https://go-review.googlesource.com/13894
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit d052bbd051a76dcfcbc0a0f471072166a9d07d20
Author: David Chase <drchase@google.com>
Date:   Tue Sep 1 17:09:00 2015 -0400

    [dev.ssa] cmd/compile: cleanup fp conversions in ssa.go
    
    Change to table-driven instead of branchy code; leads to
    net reduction in lines, easier to understand what happens,
    easier to modify code if we want option to exclude generation
    of branchy cases.
    
    Doesn't appear to scale for 8x8 case of integer types.
    
    Change-Id: Ib40104b149d30bb329c5782f6cac45c75743e768
    Reviewed-on: https://go-review.googlesource.com/14163
    Reviewed-by: Keith Randall <khr@golang.org>

commit a3f72956f1f8fde81930c0f8261cfa19bc114345
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Sep 4 17:33:56 2015 -0700

    [dev.ssa] cmd/compile: add allocs to pass stats
    
    Also, improve HTML formatting.
    
    Change-Id: I07e2482a30862e2091707f260a2c43d6e9a85d97
    Reviewed-on: https://go-review.googlesource.com/14333
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 1b5ffda01e94a44ec8a4dee02db024f1959e7f01
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Sep 4 17:33:32 2015 -0700

    [dev.ssa] cmd/compile: minor code cleanup
    
    Change-Id: I9c84f5ca18745fb2358494c6944bf7ddd05cf8f0
    Reviewed-on: https://go-review.googlesource.com/14332
    Reviewed-by: Todd Neal <todd@tneal.org>

commit ec8a597cd24e72d9213f439f7c9ee51567c0621d
Author: Todd Neal <todd@tneal.org>
Date:   Sun Aug 30 21:19:20 2015 -0500

    [dev.ssa] cmd/compile: rewrite user nil check as OpIsNonNil
    
    Rewite user nil checks as OpIsNonNil so our nil check elimination pass
    can take advantage and remove redundant checks.
    
    With make.bash this removes 10% more nilchecks (34110 vs 31088).
    
    Change-Id: Ifb01d1b6d2d759f5e2a5aaa0470e1d5a2a680212
    Reviewed-on: https://go-review.googlesource.com/14321
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 617e892b87fd2f74317a9ebf5d8b90bb9144957b
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 4 13:16:07 2015 -0700

    [dev.ssa] cmd/compile: teach live variable analysis about LEAW
    
    SSA uses this opcode, the old compiler doesn't.
    
    Change-Id: Ic3dde6216496b4b89d570584d34cb0971fdf379d
    Reviewed-on: https://go-review.googlesource.com/14330
    Reviewed-by: Minux Ma <minux@golang.org>

commit 24dcede1c0c0338a06da4d0b4b3d2996b90bf7d6
Author: Todd Neal <todd@tneal.org>
Date:   Mon Aug 10 19:00:34 2015 -0500

    [dev.ssa] cmd/compile/ssa: add timing to compiler passes
    
    Add timing/allocation information to each compiler pass for both the
    console and html output.
    
    Change-Id: I75833003b806a09b4fb1bbf63983258612cdb7b0
    Reviewed-on: https://go-review.googlesource.com/14277
    Reviewed-by: Keith Randall <khr@golang.org>

commit 19447a66d663cf51f5c02c4d9d0c74894714067a
Author: Todd Neal <todd@tneal.org>
Date:   Fri Sep 4 06:33:56 2015 -0500

    [dev.ssa] cmd/compile: store floats in AuxInt
    
    Store floats in AuxInt to reduce allocations.
    
    Change-Id: I101e6322530b4a0b2ea3591593ad022c992e8df8
    Reviewed-on: https://go-review.googlesource.com/14320
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 991036aef38cea57c2a7ef02220754d93799c489
Author: Todd Neal <todd@tneal.org>
Date:   Thu Sep 3 18:24:22 2015 -0500

    [dev.ssa] cmd/compile: store bools in AuxInt
    
    Store bools in AuxInt to reduce allocations.
    
    Change-Id: Ibd26db67fca5e1e2803f53d7ef094897968b704b
    Reviewed-on: https://go-review.googlesource.com/14276
    Reviewed-by: Keith Randall <khr@golang.org>

commit d9f2cafb5050fd264777f175ceb2576d734b7360
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 3 14:28:52 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: fix fallthrough return
    
    Fallthrough return needs to be a return block before jumping
    to the exit block.
    
    Change-Id: I994de2064da5c326c9cade2c33cbb15bdbce5acb
    Reviewed-on: https://go-review.googlesource.com/14256
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 10f38f51ef51467b5df1fb8f744a5597f87efb1e
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 3 09:09:59 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: distinguish exit and return blocks
    
    It is confusing to have exceptional edges jump back into
    real code.  Distinguish return blocks, which execute acutal
    code, and the exit block, which is a merge point for the regular
    and exceptional return flow.
    
    Prevent critical edge insertion from adding blocks on edges
    into the exit block.  These added blocks serve no purpose and
    add a bunch of dead jumps to the assembly output.  Furthermore,
    live variable analysis is confused by these jumps.
    
    Change-Id: Ifd69e6c00e90338ed147e7cb351b5100dc0364df
    Reviewed-on: https://go-review.googlesource.com/14254
    Reviewed-by: David Chase <drchase@google.com>

commit 73024083b08509414e98061d894239386ddd8ba0
Author: Keith Randall <khr@golang.org>
Date:   Wed Sep 2 20:36:47 2015 -0700

    [dev.ssa] cmd/compile: add pxor to list of instructions analyzeable by liveness analysis
    
    Change-Id: I6ea0a3482d8813b8555b16fe6c377cad33554619
    Reviewed-on: https://go-review.googlesource.com/14247
    Reviewed-by: David Chase <drchase@google.com>

commit ce4317266c160953aacf46cbe9d8341f86158776
Author: Todd Neal <todd@tneal.org>
Date:   Wed Sep 2 20:17:47 2015 -0500

    [dev.ssa] cmd/compile: cse should treat -0.0 and 0.0 as different
    
    cse was incorrectly classifying -0.0 and 0.0 as equivalent. This lead
    to invalid code as ssa uses PXOR -0.0, reg to negate a floating point.
    
    Fixes math.
    
    Change-Id: Id7eb10c71749eaed897f29b02c33891cf5820acf
    Reviewed-on: https://go-review.googlesource.com/14205
    Reviewed-by: Keith Randall <khr@golang.org>

commit 19285efaed7b08535e1b3ba921f584ed8bde6e49
Author: Todd Neal <todd@tneal.org>
Date:   Wed Sep 2 21:11:32 2015 -0500

    [dev.ssa] cmd/compile: fix complex128
    
    complex128 was being treated as a complex64
    
    Fixes math/cmplx.
    
    Change-Id: I2996915b4cb6b94198d41cf08a30bd8531b9fec5
    Reviewed-on: https://go-review.googlesource.com/14206
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5cb352edeba36e862995dd82fe7312368e6e8571
Author: Todd Neal <todd@tneal.org>
Date:   Tue Sep 1 21:25:24 2015 -0500

    [dev.ssa] cmd/compile: fix liblink rewrite of -0.0
    
    liblink was rewriting xor by a negative zero (used by SSA
    for negation) as XORPS reg,reg.
    
    Fixes strconv.
    
    Change-Id: I627a0a7366618e6b07ba8f0ad0db0e102340c5e3
    Reviewed-on: https://go-review.googlesource.com/14200
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 634b50c6e138669d5518c0c02d3bfba79e1278ab
Author: Todd Neal <todd@tneal.org>
Date:   Tue Sep 1 19:05:44 2015 -0500

    [dev.ssa] cmd/compile: truncate when converting floats to ints
    
    Modified to use the truncating conversion.
    
    Fixes reflect.
    
    Change-Id: I47bf3200abc2d2c662939a2a2351e2ff84168f4a
    Reviewed-on: https://go-review.googlesource.com/14167
    Reviewed-by: David Chase <drchase@google.com>

commit 4219aba5dbbc94d82a4b80c1f6ecc97d7eb3a62d
Author: Todd Neal <todd@tneal.org>
Date:   Tue Sep 1 17:56:37 2015 -0500

    [dev.ssa] cmd/compile: make REPSTOSQ clobber flags
    
    It does a XOR internally and clobbers flags.
    
    Change-Id: Id6ef9219c4e6c3a2b5fc79c8d52bcfa30c148617
    Reviewed-on: https://go-review.googlesource.com/14165
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2511cf03b9c2d5c0e9dcf78533f24f2baaf97d74
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 1 15:18:01 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: make SETEQF and SETNEF clobber flags
    
    They do an AND or an OR internally, so they clobber flags.
    
    Fixes #12441
    
    Change-Id: I6c843bd268496bc13fc7e3c561d76619e961e8ad
    Reviewed-on: https://go-review.googlesource.com/14180
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 6411533ebf98d898a888b0195e8c4d4039864896
Author: Todd Neal <todd@tneal.org>
Date:   Sat Aug 29 15:41:57 2015 -0500

    [dev.ssa] cmd/compile: fix rare issue caused by liblink rewrite
    
    liblink rewrites MOV $0, reg into XOR reg, reg. Make MOVxconst clobber
    flags so we don't generate invalid code in the unlikely case that it
    matters.  In testing, this change leads to no additional regenerated
    flags due to a scheduling fix in CL14042.
    
    Change-Id: I7bc1cfee94ef83beb2f97c31ec6a97e19872fb89
    Reviewed-on: https://go-review.googlesource.com/14043
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3a9d0ac3c807de9c6b91a91fa1e37f75da1941a8
Author: David Chase <drchase@google.com>
Date:   Fri Aug 28 14:24:10 2015 -0400

    [dev.ssa] cmd/compile: add complex arithmetic
    
    Still to do:
    details, more testing corner cases. (e.g. negative zero)
    Includes small cleanups for previous CL.
    
    Note: complex division is currently done in the runtime,
    so the division code here is apparently not yet necessary
    and also not tested.  Seems likely better to open code
    division and expose the widening/narrowing to optimization.
    
    Complex64 multiplication and division is done in wide
    format to avoid cancellation errors; for division, this
    also happens to be compatible with pre-SSA practice
    (which uses a single complex128 division function).
    
    It would-be-nice to widen for complex128 multiplication
    intermediates as well, but that is trickier to implement
    without a handy wider-precision format.
    
    Change-Id: I595a4300f68868fb7641852a54674c6b2b78855e
    Reviewed-on: https://go-review.googlesource.com/14028
    Reviewed-by: Keith Randall <khr@golang.org>

commit 65677cabfd3a348e1a5b8deca556cf80b998efca
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 1 09:16:58 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: allow ops to have a default type
    
    Specifying types in rewrites for all subexpressions gets verbose
    quickly.  Allow opcodes to specify a default type which is used when
    none is supplied explicitly.
    
    Provide default types for a few easy opcodes.  There are probably more
    we can do, but this is a good start.
    
    Change-Id: Iedc2a1a423cc3e2d4472640433982f9aa76a9f18
    Reviewed-on: https://go-review.googlesource.com/14128
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit a0022d9b8ced73368e76b20b3fcbf93ead30952b
Author: Todd Neal <todd@tneal.org>
Date:   Mon Aug 31 20:42:04 2015 -0500

    [dev.ssa] cmd/compile: add more specific regalloc logging
    
    Change-Id: Ib0ea4b9c245f3d551e0f703826caa6b444b56a2d
    Reviewed-on: https://go-review.googlesource.com/14136
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 21e6a055c125022d1a10a6d57f5910cef5d2cb6d
Author: Todd Neal <todd@tneal.org>
Date:   Sat Aug 29 12:51:04 2015 -0500

    [dev.ssa] cmd/compile: schedule values dependent on the control later
    
    To reduce the number of spills, give any non-phi values whose argument
    is the control the same priority as the control.
    
    With mask.bash, this reduces regenerated flags from 603 to 240.
    
    Change-Id: I26883d69e80357c56b343428fb528102b3f26e7a
    Reviewed-on: https://go-review.googlesource.com/14042
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3b7f0c9cba109cb629d023918520f916fcbb1343
Author: Todd Neal <todd@tneal.org>
Date:   Sun Aug 30 22:04:38 2015 -0500

    [dev.ssa] cmd/compile: fix typo in log
    
    Change-Id: Ic7be8fa3a89e46a93df181df3163ec1bf7e96a23
    Reviewed-on: https://go-review.googlesource.com/14076
    Reviewed-by: Minux Ma <minux@golang.org>

commit cff0c6ad0f353fcd484b25c525d0aa92cdf5d85c
Author: Todd Neal <todd@tneal.org>
Date:   Sun Aug 30 21:39:25 2015 -0500

    [dev.ssa] cmd/compile: add instrumentation to regalloc
    
    Change-Id: Ice206f7e94af4a148d9dd9a7570f5ed21722bedc
    Reviewed-on: https://go-review.googlesource.com/14075
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 451eca2293d7c84f5892b27462f3bab7840b11ce
Author: Todd Neal <todd@tneal.org>
Date:   Sun Aug 30 21:21:44 2015 -0500

    [dev.ssa] cmd/compile: make test panic on failure
    
    Change-Id: Ia5483d23fe0b5dd0b6cfe2099e9b475184742716
    Reviewed-on: https://go-review.googlesource.com/14074
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 5fdd4fea905923084affaeb5d2427f226db076e1
Author: Todd Neal <todd@tneal.org>
Date:   Sun Aug 30 20:47:26 2015 -0500

    [dev.ssa] cmd/compile: map EQ/NE intptr to OpEqPtr/OpNeqPtr
    
    Change-Id: I8fd3727763c812297967c8069847833fc8516ff2
    Reviewed-on: https://go-review.googlesource.com/14073
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 186cf1b9ba1358344b8ce6f2fb4a62302b98ba90
Author: Keith Randall <khr@golang.org>
Date:   Fri Aug 28 16:45:17 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: handle dead code a different way
    
    Instead of trying to delete dead code as soon as we find it, just
    mark it as dead using a PlainAndDead block kind.  The deadcode pass
    will do the real removal.
    
    This way is somewhat more efficient because we don't need to mess
    with successor and predecessor lists of all the dead blocks.
    
    Fixes #12347
    
    Change-Id: Ia42d6b5f9cdb3215a51737b3eb117c00bd439b13
    Reviewed-on: https://go-review.googlesource.com/14033
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9654873a76f3234e55951b80f085e86b1ba9d754
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Aug 28 13:35:32 2015 -0700

    [dev.ssa] cmd/compile: implement PPARAMREF
    
    This also fixes the encoding/gob TestTopLevelNilPointer failure.
    
    Change-Id: I9b29a6fddffd51af305c685f3a8e2a0594bfeeab
    Reviewed-on: https://go-review.googlesource.com/14032
    Reviewed-by: Keith Randall <khr@golang.org>

commit 47d6799b0f1d51f8f749eeebfe5769ea555b5228
Author: Todd Neal <todd@tneal.org>
Date:   Fri Aug 28 21:36:29 2015 -0500

    [dev.ssa] cmd/compile: move addEdge function to ssa
    
    addEdge had two identical implementations so make it an exported method
    on Block.
    
    Change-Id: I8c21655a9dc5074fefd7f63b2f5b51897571e608
    Reviewed-on: https://go-review.googlesource.com/14040
    Reviewed-by: Keith Randall <khr@golang.org>

commit 67e43c1e3b3e2470b870a9d5b5e6eedceeded5f1
Author: Todd Neal <todd@tneal.org>
Date:   Fri Aug 28 21:19:40 2015 -0500

    [dev.ssa] cmd/compile: implement OFALL
    
    Frontend has already rewriten fallthrough statements, we just need to
    ignore them.
    
    Change-Id: Iadf89b06a9f8f9e6e2e1e87c934f31add77a19a1
    Reviewed-on: https://go-review.googlesource.com/14029
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 707af252d9041a5a618e15d2f3683f7d57b4d34c
Author: Todd Neal <todd@tneal.org>
Date:   Fri Aug 28 15:56:43 2015 -0500

    [dev.ssa] cmd/compile: implement len/cap(chan)
    
    Change-Id: I1453ba226376ccd4d79780fc0686876d6dde01ee
    Reviewed-on: https://go-review.googlesource.com/14027
    Reviewed-by: Keith Randall <khr@golang.org>

commit 73151067bc7b58c56825a4cc59282aef09aaaed8
Author: David Chase <drchase@google.com>
Date:   Wed Aug 26 14:25:40 2015 -0400

    [dev.ssa] cmd/compile: added floating point to [u]int conversions
    
    Change-Id: I8dee400aef07165f911750de2615b8757f826000
    Reviewed-on: https://go-review.googlesource.com/13945
    Reviewed-by: Keith Randall <khr@golang.org>

commit a5cffb6182801f6e164089ce872a4fb622c0f0d9
Author: Keith Randall <khr@golang.org>
Date:   Fri Aug 28 13:52:26 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: allocate complex zero in the entry block
    
    Fixes build.  There may be no current block.
    
    Change-Id: I0da8bab133dc207124556927698e7cd682e64ef5
    Reviewed-on: https://go-review.googlesource.com/13989
    Reviewed-by: Keith Randall <khr@golang.org>

commit 67ac8a3b22d07e9655f3909ddeffb310d12e50db
Author: Todd Neal <todd@tneal.org>
Date:   Fri Aug 28 15:20:54 2015 -0500

    [dev.ssa] cmd/compile: fix type of nil ptr in check
    
    Change-Id: If7a6ab6b1336dbacb006f562be7f153eb93e7253
    Reviewed-on: https://go-review.googlesource.com/14025
    Reviewed-by: Keith Randall <khr@golang.org>

commit f8093b8f2491171c996c4820fe7b9a2796ac1084
Author: Keith Randall <khr@golang.org>
Date:   Fri Aug 28 12:53:41 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: add arg-dominating check, fix phielim
    
    Add a check to make sure value arguments dominate the value.
    
    Phi elim output used to fail this test.  When eliminating
    redundant phis, phi elim was using one of the args and not
    the ultimate source.  For example:
    
              b1: x = ...
              -> b2 b3
    
    b2: y = Copy x        b3: z = Copy x
    -> b4                 -> b4
    
              b4: w = phi y z
    
    Phi elim eliminates w, but it used to replace w with (Copy y).
    That's bad as b2 does not dominate b4.  Instead we should
    replace w with (Copy x).
    
    Fixes #12347
    
    Change-Id: I9f340cdabcda8e2e90359fb4f9250877b1fffe98
    Reviewed-on: https://go-review.googlesource.com/13986
    Reviewed-by: David Chase <drchase@google.com>

commit 525785885e42b26e6936e5d91386518218cff4d7
Author: David Chase <drchase@google.com>
Date:   Fri Aug 28 14:24:10 2015 -0400

    [dev.ssa] cmd/compile: add compose/decompose for complex, phi, constants
    
    Still to do: arithmetic
    
    Change-Id: I31fd23b34980c9ed4b4e304b8597134b2ba6ca5c
    Reviewed-on: https://go-review.googlesource.com/14024
    Reviewed-by: Keith Randall <khr@golang.org>

commit e0e4068c6e6cebb586bbffa36962c7fc6cb595e0
Author: Todd Neal <todd@tneal.org>
Date:   Wed Aug 26 18:40:52 2015 -0500

    [dev.ssa] cmd/compile: implement len(map)
    
    Implement len(map) values.
    
    Change-Id: If92be96ec9a7a86aeb3ce566d6758aab01c2fa7d
    Reviewed-on: https://go-review.googlesource.com/13961
    Reviewed-by: Keith Randall <khr@golang.org>

commit 44d87035b65e9fb8fccfe9f8121276614112f629
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Aug 27 10:29:01 2015 -0700

    [dev.ssa] cmd/compile: make block kinds clickable in html
    
    Change-Id: I113c07caf504cee66a81730da8830de6de098e49
    Reviewed-on: https://go-review.googlesource.com/13981
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 35ad1fcb11c64ebd7e54f8eebf065ba118045357
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Aug 27 10:11:08 2015 -0700

    [dev.ssa] cmd/compile: fix OANDAND and OOROR type
    
    The old backend doesn't like ideal types,
    and we want to reuse its stackmap generation.
    
    OOROR and OANDAND expressions have ideal type.
    The old backend didn't care,
    because those expressions got rewritten away into
    jumps before stackmap generation.
    
    Fix the type during conversion.
    
    Change-Id: I488e7499298d9aec71da39c202f6a7235935bc8d
    Reviewed-on: https://go-review.googlesource.com/13980
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7cadf23afb3c54f36758d09710b87a0a9db4b4b9
Author: Todd Neal <todd@tneal.org>
Date:   Tue Aug 25 22:49:59 2015 -0500

    [dev.ssa] cmd/compile: fix phi floats
    
    The code previously always used AX causing errors.  For now, just
    switch off the type in order to at least generate valid code.
    
    Change-Id: Iaf13120a24b62456b9b33c04ab31f2d5104b381b
    Reviewed-on: https://go-review.googlesource.com/13943
    Reviewed-by: David Chase <drchase@google.com>

commit 752fe4dcb5c033c56dc3ab76ba912efa82df4d9e
Author: Todd Neal <todd@tneal.org>
Date:   Tue Aug 25 19:21:45 2015 -0500

    [dev.ssa] cmd/compile: support float zeroing
    
    Change-Id: Iacd302350cf0a8a8164d937e5c4ac55e6a07d380
    Reviewed-on: https://go-review.googlesource.com/13942
    Reviewed-by: David Chase <drchase@google.com>

commit ee50cb20611bd59b889ba0698e1236a992ea7579
Merge: a2f8b0d 6ec1809
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 25 14:45:41 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge of master into dev.ssa.
    
    Change-Id: Ia7f2e29dfdea7618141efcfcf6f6c7c8b5553dfa

commit a2f8b0d0e4f0dea41ff8dad29c249d8b204140f1
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 25 14:02:30 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: add more critical edges
    
    Add blocks to remove critical edges, even when it looks like
    there's no phi that requires it.  Regalloc still likes to have
    critical-edge-free graphs for other reasons.
    
    Change-Id: I69f8eaecbc5d79ab9f2a257c2e289d60b18e43c8
    Reviewed-on: https://go-review.googlesource.com/13933
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit ec39d78ddd2168d617e52086a1f5841a6cc03959
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 25 10:39:23 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: update TODO and comments
    
    Change-Id: I3c598faff8af18530ae863b9e72f0cef379b4a1f
    Reviewed-on: https://go-review.googlesource.com/13909
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3526cf586be92cb4c741aed54ccfd37cf00ddfc5
Author: Keith Randall <khr@golang.org>
Date:   Mon Aug 24 23:52:03 2015 -0700

    [dev.ssa] cmd/compile: implement OSLICESTR
    
    Add a new function and generic operation to handle
    bounds checking for slices. Unlike the index
    bounds checking the index can be equal to the upper
    bound.
    
    Do gc-friendly slicing that generates proper code for
    0-length result slices.
    
    This is a takeover of Alexandru's original change,
    (https://go-review.googlesource.com/#/c/12764/)
    submittable now that the decompose phase is in.
    
    Change-Id: I17d164cf42ed7839f84ca949c6ad3289269c9160
    Reviewed-on: https://go-review.googlesource.com/13903
    Reviewed-by: David Chase <drchase@google.com>

commit 8e601b23cd77f687407a358d2baba672f5a8e4d6
Author: David Chase <drchase@google.com>
Date:   Tue Aug 18 14:39:26 2015 -0400

    [dev.ssa] cmd/compile: add FP comparison ops
    
    Basic ops, no particular optimization in the pattern
    matching yet (e.g. x!=x for Nan detection, x cmp constant,
    etc.)
    
    Change-Id: I0043564081d6dc0eede876c4a9eb3c33cbd1521c
    Reviewed-on: https://go-review.googlesource.com/13704
    Reviewed-by: Keith Randall <khr@golang.org>

commit 4282588694de58b86df17af7366a5f00903af24b
Author: David Chase <drchase@google.com>
Date:   Thu Aug 20 15:14:20 2015 -0400

    [dev.ssa] cmd/compile: add [u]int and FP to FP conversions
    
    Change-Id: I8c17f706a3e0f1fa2d754bfb4ccd1f7a027cb3db
    Reviewed-on: https://go-review.googlesource.com/13744
    Reviewed-by: Keith Randall <khr@golang.org>

commit 01490eb96cb0ff15d6b749fc11db99f53891be61
Author: Keith Randall <khr@golang.org>
Date:   Sun Aug 23 21:14:25 2015 -0700

    [dev.ssa] cmd/compile: make sure to keep offset and sym of MOV opcodes.
    
    MOVXload and MOVXstore opcodes have both an auxint offset
    and an aux offset (a symbol name, like a local or arg or global).
    Make sure we keep those values during rewrites.
    
    Change-Id: Ic9fd61bf295b5d1457784c281079a4fb38f7ad3b
    Reviewed-on: https://go-review.googlesource.com/13849
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 5844603f143a859902386a8d70ac6abb732f4ccd
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 23 20:29:43 2015 -0700

    [dev.ssa] cmd/compile: streamline unimplemented strings
    
    This aids in making sense of the aggregate set of work outstanding.
    Interest in the details of any particular implementation failure
    is better handled locally anyway.
    
    In my local tree, running make.bash after this CL yields:
    
     14.85%  1811 SSA unimplemented: unhandled expr SLICEARR
     13.84%  1687 SSA unimplemented: unhandled expr CALLINTER
     11.84%  1444 SSA unimplemented: unhandled stmt RETJMP
     10.24%  1249 SSA unimplemented: unhandled expr EFACE
      8.52%  1039 SSA unimplemented: unhandled expr SLICE
      4.92%   600 SSA unimplemented: local variable with class PAUTO,heap unimplemented
      4.90%   598 SSA unimplemented: unhandled expr SLICESTR
      3.91%   477 SSA unimplemented: local variable with class PFUNC unimplemented
      3.45%   421 SSA unimplemented: not lowered: IMake INTER PTR64 PTR64
      3.42%   417 SSA unimplemented: unhandled expr APPEND
      3.21%   391 SSA unimplemented: unhandled expr CLOSUREVAR
      3.06%   373 SSA unimplemented: unhandled stmt DEFER
      3.04%   371 SSA unimplemented: unhandled stmt AS2DOTTYPE
      1.61%   196 SSA unimplemented: unhandled expr DOTTYPE
      1.56%   190 SSA unimplemented: not lowered: Load STRUCT PTR64 mem
      0.79%    96 SSA unimplemented: not lowered: StringMake STRING PTR64 UINTPTR
      0.69%    84 SSA unimplemented: unhandled binary op NE FLOAT64
      0.53%    65 SSA unimplemented: unhandled expr STRUCTLIT
      0.50%    61 SSA unimplemented: not lowered: SliceMake ARRAY PTR64 UINTPTR UINTPTR
      0.45%    55 SSA unimplemented: zero for type float64 not implemented
      0.44%    54 SSA unimplemented: unhandled addr CLOSUREVAR
      0.38%    46 SSA unimplemented: unhandled binary op EQ FLOAT64
      0.35%    43 SSA unimplemented: unhandled binary op LT FLOAT64
      0.34%    42 SSA unimplemented: unhandled len(map)
      0.33%    40 SSA unimplemented: unhandled stmt FALL
      0.23%    28 SSA unimplemented: CONVNOP closure
      0.21%    25 SSA unimplemented: local variable with class PPARAM,heap unimplemented
      0.21%    25 SSA unimplemented: unhandled binary op GT FLOAT64
      0.18%    22 SSA unimplemented: unhandled OCONV FLOAT32 -> FLOAT64
      0.18%    22 SSA unimplemented: unhandled expr REAL
      0.16%    20 SSA unimplemented: unhandled stmt PROC
      0.16%    19 SSA unimplemented: unhandled closure arg
      0.15%    18 SSA unimplemented: unhandled OCONV INT64 -> FLOAT64
      0.12%    15 SSA unimplemented: unhandled expr CFUNC
      0.10%    12 SSA unimplemented: unhandled OCONV UINT64 -> FLOAT64
      0.09%    11 SSA unimplemented: unhandled OLITERAL 4
      0.09%    11 SSA unimplemented: unhandled expr IMAG
      0.07%     9 SSA unimplemented: unhandled binary op GE FLOAT64
      0.07%     9 SSA unimplemented: unhandled binary op MINUS FLOAT64
      0.06%     7 SSA unimplemented: unhandled OCONV FLOAT64 -> FLOAT32
      0.06%     7 SSA unimplemented: unhandled binary op NE FLOAT32
      0.06%     7 SSA unimplemented: variable address class 5 not implemented
      0.05%     6 SSA unimplemented: not lowered: Load COMPLEX128 PTR64 mem
      0.05%     6 SSA unimplemented: unhandled expr SLICE3ARR
      0.04%     5 SSA unimplemented: unhandled binary op LE FLOAT64
      0.03%     4 SSA unimplemented: unhandled OCONV UINTPTR -> FLOAT64
      0.03%     4 SSA unimplemented: unhandled binary op EQ COMPLEX128
      0.03%     4 SSA unimplemented: unhandled binary op EQ FLOAT32
      0.03%     4 SSA unimplemented: unhandled expr COMPLEX
      0.02%     3 SSA unimplemented: local variable with class PPARAMOUT,heap unimplemented
      0.02%     3 SSA unimplemented: not lowered: Load ARRAY PTR64 mem
      0.02%     3 SSA unimplemented: unhandled OCONV INT32 -> FLOAT64
      0.02%     3 SSA unimplemented: unhandled OCONV INT64 -> FLOAT32
      0.02%     3 SSA unimplemented: unhandled expr SLICE3
      0.02%     2 SSA unimplemented: unhandled OCONV COMPLEX64 -> COMPLEX128
      0.02%     2 SSA unimplemented: unhandled OCONV FLOAT64 -> INT64
      0.02%     2 SSA unimplemented: unhandled OCONV FLOAT64 -> UINT64
      0.02%     2 SSA unimplemented: unhandled OCONV INT -> FLOAT64
      0.02%     2 SSA unimplemented: unhandled OCONV UINT64 -> FLOAT32
      0.02%     2 SSA unimplemented: unhandled binary op EQ COMPLEX64
      0.02%     2 SSA unimplemented: unhandled binary op MINUS FLOAT32
      0.02%     2 SSA unimplemented: zero for type complex128 not implemented
      0.02%     2 SSA unimplemented: zero for type complex64 not implemented
      0.02%     2 SSA unimplemented: zero for type float32 not implemented
      0.01%     1 SSA unimplemented: not lowered: EqFat BOOL INTER INTER
      0.01%     1 SSA unimplemented: not lowered: Store mem UINTPTR COMPLEX128 mem
      0.01%     1 SSA unimplemented: unhandled OCONV UINT32 -> FLOAT64
      0.01%     1 SSA unimplemented: unhandled cap(chan)
      0.01%     1 SSA unimplemented: unhandled expr ARRAYLIT
      0.01%     1 SSA unimplemented: unhandled expr PLUS
      0.01%     1 SSA unimplemented: unhandled stmt CHECKNIL
    
    Change-Id: I43474fe6d6ec22a9f57239090136f6e97eebfdf2
    Reviewed-on: https://go-review.googlesource.com/13848
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9f8f8c27dca1b27e9567df4f3aa4e7d8c31f3ec2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Aug 22 19:38:12 2015 -0700

    [dev.ssa] cmd/compile: support spilling and loading flags
    
    This CL takes a simple approach to spilling and loading flags.
    We never spill. When a load is needed, we recalculate,
    loading the arguments as needed.
    
    This is simple and architecture-independent.
    It is not very efficient, but as of this CL,
    there are fewer than 200 flag spills during make.bash.
    
    This was tested by manually reverting CLs 13813 and 13843,
    causing SETcc, MOV, and LEA instructions to clobber flags,
    which dramatically increases the number of flags spills.
    With that done, all stdlib tests that used to pass
    still pass.
    
    For future reference, here are some other, more efficient
    amd64-only schemes that we could adapt in the future if needed.
    
    (1) Spill exactly the flags needed.
    
    For example, if we know that the flags will be needed
    by a SETcc or Jcc op later, we could use SETcc to
    extract just the relevant flag. When needed,
    we could use TESTB and change the op to JNE/SETNE.
    (Alternatively, we could leave the op unaltered
    and prepare an appropriate CMPB instruction
    to produce the desired flag.)
    
    However, this requires separate handling for every
    instruction that uses the flags register,
    including (say) SBBQcarrymask.
    
    We could enable this on an ad hoc basis for common cases
    and fall back to recalculation for other cases.
    
    (2) Spill all flags with PUSHF and POPF
    
    This modifies SP, which the runtime won't like.
    It also requires coordination with stackalloc to
    make sure that we have a stack slot ready for use.
    
    (3) Spill almost all flags with LAHF, SETO, and SAHF
    
    See http://blog.freearrow.com/archives/396
    for details. This would handle all the flags we currently
    use. However, LAHF and SAHF are not universally available
    and it requires arranging for AX to be free.
    
    Change-Id: Ie36600fd8e807ef2bee83e2e2ae3685112a7f276
    Reviewed-on: https://go-review.googlesource.com/13844
    Reviewed-by: Keith Randall <khr@golang.org>

commit f3171994e92a7cf70ddb52aff557d22559de9b18
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Aug 22 09:52:36 2015 -0700

    [dev.ssa] cmd/compile: mark LEA and MOV instructions as not clobbering flags
    
    This further reduces the number of flags spills
    during make.bash by about 50%.
    
    Note that GetG is implemented by one or two MOVs,
    which is why it does not clobber flags.
    
    Change-Id: I6fede8c027b7dc340e00d1e15df1b87bf2b2d9ec
    Reviewed-on: https://go-review.googlesource.com/13843
    Reviewed-by: Keith Randall <khr@golang.org>

commit 220e70540445c26463238ff094b6254055ac2b31
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Aug 22 13:30:45 2015 -0700

    [dev.ssa] cmd/compile: make "*Value".String more robust
    
    Change-Id: I4ae38440a33574421c9e3e350701e86e8a224b92
    Reviewed-on: https://go-review.googlesource.com/13842
    Reviewed-by: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0ffd9c8cadae38a9334dcbb9dc7876f499deb474
Author: Todd Neal <todd@tneal.org>
Date:   Fri Aug 21 21:38:41 2015 -0500

    [dev.ssa] cmd/compile/internal: mark len(map), len/cap(chan) unimplemented
    
    Mark these as unimplemented so we don't generate bad code.
    
    Change-Id: I101190c40a753faaa82193ac37e2978b20a96e4e
    Reviewed-on: https://go-review.googlesource.com/13748
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 57d9e7e3c4553ae9b6e59cabe95659cc8014efa9
Author: Todd Neal <todd@tneal.org>
Date:   Tue Aug 18 19:51:44 2015 -0500

    [dev.ssa] cmd/compile/internal/ssa: implement OMOD
    
    Change-Id: Iec954c4daefef4ab3fa2c98bfb2c70b2dea8dffb
    Reviewed-on: https://go-review.googlesource.com/13743
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7393c24877407ff2d3d1fad761e5aebbf6671ac3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Aug 21 10:15:15 2015 -0700

    [dev.ssa] cmd/compile: everything is live and reachable after regalloc
    
    This CL makes function printing and HTML generation
    accurate after regalloc.
    
    Prior to this CL, text and HTML function outputs
    showed live values and blocks as dead.
    
    Change-Id: I70669cd8641af841447fc5d2ecbd754b281356f0
    Reviewed-on: https://go-review.googlesource.com/13812
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8f51ae8ba5acbd4e91bd7c1c59b375513c395a22
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Aug 21 10:16:35 2015 -0700

    [dev.ssa] cmd/compile: SETcc instructions do not clobber flags
    
    This reduces the number of flags spilled during
    make.bash by > 90%.
    
    I am working (slowly) on the rest.
    
    Change-Id: I3c08ae228c33e2f726f615962996f0350c8d592b
    Reviewed-on: https://go-review.googlesource.com/13813
    Reviewed-by: David Chase <drchase@google.com>

commit 9f954db170dff18a33fbd333082cd8758851f936
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 18 10:26:28 2015 -0700

    [dev.ssa] cmd/compile: add decompose pass
    
    Decompose breaks compound objects up into pieces that can be
    operated on by the target architecture.  The decompose pass only
    does phi ops, the rest is done by the rewrite rules in generic.rules.
    
    Compound objects include strings,slices,interfaces,structs,arrays.
    
    Arrays aren't decomposed because of indexing (we could support
    constant indexes, but dynamic indexes can't be handled using SSA).
    Structs will come in a subsequent CL.
    
    TODO: after this pass we have lost the association between, e.g.,
    a string's pointer and its size.  It would be nice if we could keep
    that information around for debugging info somehow.
    
    Change-Id: I6379ab962a7beef62297d0f68c421f22aa0a0901
    Reviewed-on: https://go-review.googlesource.com/13683
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 8d23681cc836db6ed233564781747592f1c41225
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 18 15:25:40 2015 -0700

    [dev.ssa] cmd/compile: implement more panic stuff
    
    Implement index check panics (and slice check panics, for when
    we need those).
    
    Clean up nil check.  Now that the new regalloc is in we can use
    the register we just tested as the address 0 destination.
    
    Remove jumps after panic calls, they are unreachable.
    
    Change-Id: Ifee6e510cdea49cc7c7056887e4f06c67488d491
    Reviewed-on: https://go-review.googlesource.com/13687
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 46e62f873a34b06348bdaf231f1b72367950732e
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 18 14:17:30 2015 -0700

    [dev.ssa] cmd/compile: used Bounded field to fix empty range loops
    
        for i, v := range a {
        }
    
    Walk converts this to a regular for loop, like this:
    
        for i := 0, p := &a[0]; i < len(a); i++, p++ {
            v := *p
        }
    
    Unfortunately, &a[0] fails its bounds check when a is
    the empty slice (or string).  The old compiler gets around this
    by marking &a[0] as Bounded, meaning "don't emit bounds checks
    for this index op".  This change makes SSA honor that same mark.
    
    The SSA compiler hasn't implemented bounds check panics yet,
    so the failed bounds check just causes the current routine
    to return immediately.
    
    Fixes bytes package tests.
    
    Change-Id: Ibe838853ef4046c92f76adbded8cca3b1e449e0b
    Reviewed-on: https://go-review.googlesource.com/13685
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 67cbd5b51d3700fc1976f71a711882bfdd7e8304
Author: Todd Neal <todd@tneal.org>
Date:   Tue Aug 18 19:14:47 2015 -0500

    [dev.ssa] cmd/compile/internal/ssa: implement OHMUL
    
    Adds support for high multiply which is used by the frontend when
    rewriting const division.  The frontend currently only does this for 8,
    16, and 32 bit integer arithmetic.
    
    Change-Id: I9b6c6018f3be827a50ee6c185454ebc79b3094c8
    Reviewed-on: https://go-review.googlesource.com/13696
    Reviewed-by: Keith Randall <khr@golang.org>

commit a45f2d8f2898d23804de473841d42670fcdda5dc
Author: Todd Neal <todd@tneal.org>
Date:   Mon Aug 17 17:46:06 2015 -0500

    [dev.ssa] cmd/compile/internal/ssa: implement ODIV
    
    Implement integer division for non-consts.
    
    Change-Id: If40cbde20e5f0ebb9993064def7be468e4eca076
    Reviewed-on: https://go-review.googlesource.com/13644
    Reviewed-by: Keith Randall <khr@golang.org>

commit d9dc2f22302d1e0b6cfc01522939a37dd2d8a4e6
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 18 10:28:58 2015 -0700

    [dev.ssa] cmd/compile: fix string store rewrite
    
    Store ops now need their size in the auxint field.  I missed this one.
    
    Change-Id: I050fd6b5b00579883731702c426edafa3a5f7561
    Reviewed-on: https://go-review.googlesource.com/13682
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 0b46b42943ee9d7ad4e9a19772d22468718173c9
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 11 12:51:33 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: New register allocator
    
    Implement a global (whole function) register allocator.
    This replaces the local (per basic block) register allocator.
    
    Clobbering of registers by instructions is handled properly.
    A separate change will add the correct clobbers to all the instructions.
    
    Change-Id: I38ce4dc7dccb8303c1c0e0295fe70247b0a3f2ea
    Reviewed-on: https://go-review.googlesource.com/13622
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 759b9c3b80da47a8db59f015bfca551a2a15ae18
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Aug 17 00:29:56 2015 -0700

    [dev.ssa] cmd/compile: add likely annotations to blocks in html
    
    This was missing from CL 13472
    due to a badly synced client.
    
    Change-Id: If59fc669125dd1caa335dacfbf0f8dbd7b074312
    Reviewed-on: https://go-review.googlesource.com/13639
    Reviewed-by: Keith Randall <khr@golang.org>

commit 997a9f32b01eb73ee3086e8c9141c1ed30c7ac8d
Author: David Chase <drchase@google.com>
Date:   Wed Aug 12 16:38:11 2015 -0400

    [dev.ssa] cmd/compile: first unoptimized cut at adding FP support
    
    Added F32 and F64 load, store, and addition.
    Added F32 and F64 multiply.
    Added F32 and F64 subtraction and division.
    Added X15 to "clobber" for FP sub/div
    Added FP constants
    Added separate FP test in gc/testdata
    
    Change-Id: Ifa60dbad948a40011b478d9605862c4b0cc9134c
    Reviewed-on: https://go-review.googlesource.com/13612
    Reviewed-by: Keith Randall <khr@golang.org>

commit 270e2152c4645a72ac3263fcc92ce878e8035d71
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Aug 17 00:18:31 2015 -0700

    [dev.ssa] cmd/compile: fix dev.ssa build
    
    Broken by CL 13472.
    
    Change-Id: Ib65331b291c8fab4238ca91e085779bb954d70e8
    Reviewed-on: https://go-review.googlesource.com/13638
    Reviewed-by: David Chase <drchase@google.com>

commit d4cc51d4118027464f61034179908abd0005fab6
Author: Keith Randall <khr@golang.org>
Date:   Fri Aug 14 21:47:20 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Use explicit size for store ops
    
    Using the type of the store argument is not safe, it may change
    during rewriting, giving us the wrong store width.
    
    (Store ptr (Trunc32to16 val) mem)
    
    This should be a 2-byte store.  But we have the rule:
    
    (Trunc32to16 x) -> x
    
    So if the Trunc rewrite happens before the Store -> MOVW rewrite,
    then the Store thinks that the value it is storing is 4 bytes
    in size and uses a MOVL.  Bad things ensue.
    
    Fix this by encoding the store width explicitly in the auxint field.
    
    In general, we can't rely on the type of arguments, as they may
    change during rewrites.  The type of the op itself (as used by
    the Load rules) is still ok to use.
    
    Change-Id: I9e2359e4f657bb0ea0e40038969628bf0f84e584
    Reviewed-on: https://go-review.googlesource.com/13636
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 198fc9a9eb7104d459bb5fea0aba5f2ff2c6f8d4
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Aug 14 12:59:33 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: more simplifications and foldings.
    
    Change-Id: I74d1267dbfced2663072b4f091732c0fb328690f
    Reviewed-on: https://go-review.googlesource.com/13641
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7a6de6d5f2e1e8e8908022789cf129581c90a4c3
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Aug 14 13:23:11 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: fold Mul8 properly.
    
    Mul8 is lowered to MULW, but the rules for constant
    folding do not handle the fact that the operands
    are int8.
    
    Change-Id: I2c336686d86249393a8079a471c6ff74e6228f3d
    Reviewed-on: https://go-review.googlesource.com/13642
    Reviewed-by: Keith Randall <khr@golang.org>

commit c55870a5412fb374c9c392a06c3949b291c48e15
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Aug 7 12:19:03 2015 +0200

    [dev.ssa] cmd/compile/internal/gc: handle all inputs for shifts.
    
    Disable CX as output for shift operations.
    
    Change-Id: I85e6b22d09009b38847082dc375b6108c2dee80a
    Reviewed-on: https://go-review.googlesource.com/13370
    Reviewed-by: Keith Randall <khr@golang.org>

commit 35fb514596b970a73be972fa917fa23ca74f7be6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Aug 10 12:15:52 2015 -0700

    [dev.ssa] cmd/compile: add HTML SSA printer
    
    This is an initial implementation.
    There are many rough edges and TODOs,
    which will hopefully be polished out
    with use.
    
    Fixes #12071.
    
    Change-Id: I1d6fd5a343063b5200623bceef2c2cfcc885794e
    Reviewed-on: https://go-review.googlesource.com/13472
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3e7904b648791e8d9df4930aed645ae7bbda5f94
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 12 13:48:36 2015 -0700

    [dev.ssa] cmd/compile: improve inBounds rewrite rules
    
    Change-Id: Ia238187a89f820cd1620ab5acdbf1c8f003569b1
    Reviewed-on: https://go-review.googlesource.com/13587
    Reviewed-by: Keith Randall <khr@golang.org>

commit bc1f5768ce4dbe0f8647172f7e8964054bccbb22
Author: Keith Randall <khr@golang.org>
Date:   Thu Aug 13 13:12:17 2015 -0700

    [dev.ssa] cmd/compile: add register spec to getg
    
    This omission was causing the new regalloc to fail.
    
    Change-Id: If7ba7be38a436dbd0dd443828ddd7ebf6e35be0e
    Reviewed-on: https://go-review.googlesource.com/13632
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 3b705824ce6cf4827732eb32923835a327c5f963
Author: Keith Randall <khr@golang.org>
Date:   Thu Aug 13 12:47:50 2015 -0700

    [dev.ssa] cmd/compile: fix constant subtraction rules
    
    (SUBQconst [x] y) computes y-x, not x-y.
    
    Fixes #12137
    
    Change-Id: Idbd0554eee051102f562240d1756647843666ee6
    Reviewed-on: https://go-review.googlesource.com/13631
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit f85faefa67cb33a053d281a2c3f0907629d1c581
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 12 15:39:16 2015 -0700

    [dev.ssa] cmd/compile: move rewrite logging behind codegen flag
    
    Generating logging code every time causes large
    diffs for small changes.
    
    Since the intent is to use this for debugging only,
    generate logging code only when requested.
    Committed generated code will be logging free.
    
    Change-Id: I9ef9e29c88b76c2557bad4c6b424b9db1255ec8b
    Reviewed-on: https://go-review.googlesource.com/13623
    Reviewed-by: Keith Randall <khr@golang.org>

commit 867662da6ae5d8e29180c951b0184b241b780502
Author: Keith Randall <khr@golang.org>
Date:   Wed Aug 12 14:51:24 2015 -0700

    [dev.ssa] cmd/compile: make sure entry block has no predecessors
    
    Fix one test that build a violating CFG.
    
    Change-Id: Ie0296ced602984d914a70461c76559c507ce2510
    Reviewed-on: https://go-review.googlesource.com/13621
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 514ab7c385116564d005c592e7473ba46c3fac87
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 12 13:54:04 2015 -0700

    [dev.ssa] cmd/compile: log line numbers in generated rewrite rules
    
    This makes it easier to investigate and
    understand rewrite behavior.
    
    Change-Id: I790e8964922caf98362ce8a6d6972f52d83eefa8
    Reviewed-on: https://go-review.googlesource.com/13588
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3d23afb9133c151404635f2476bf895028b972bc
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 12 11:22:16 2015 -0700

    [dev.ssa] cmd/compile: implement OGETG
    
    Change-Id: I7ecf62cf399c710b4a617803c43e83fce09b8a7d
    Reviewed-on: https://go-review.googlesource.com/13585
    Reviewed-by: Keith Randall <khr@golang.org>

commit bbf8c5ce2ffc7085bc63e2edf0117adaccada53e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 11 17:28:56 2015 -0700

    [dev.ssa] cmd/compile: initial implementation of likely direction
    
    Change-Id: Id8457b18c07bf717d13c9423d8f314f253eee64f
    Reviewed-on: https://go-review.googlesource.com/13580
    Reviewed-by: Keith Randall <khr@golang.org>

commit 212a1763fc7d0cf17ae9e27680dcb3e346d1c71b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 12 10:21:41 2015 -0700

    [dev.ssa] cmd/compile: update opnames
    
    This claims to be autogenerated from go tool dist,
    but I don't see where.
    
    In any case, the update is trivial.
    
    Change-Id: I58daaba755f3d34a0396005046b89411a02ada7e
    Reviewed-on: https://go-review.googlesource.com/13584
    Reviewed-by: Keith Randall <khr@golang.org>

commit a2d1580fdb3fcac97391ba6574452b4dbe3f13f9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 12 10:12:14 2015 -0700

    [dev.ssa] cmd/compile: implement OSPTR
    
    Change-Id: Iaa40f14a1e3e4393af3c446953ffc315e79a3762
    Reviewed-on: https://go-review.googlesource.com/13581
    Reviewed-by: Keith Randall <khr@golang.org>

commit d56d2fa20611bd30fce294c2523b859600b8dc18
Author: Keith Randall <khr@golang.org>
Date:   Wed Aug 12 12:54:47 2015 -0700

    [dev.ssa] cmd/compile: fix function call memory
    
    We need to move the memory variable update back to before endBlock
    so that all successors use the right memory value.
    
    See https://go-review.googlesource.com/13560
    
    Change-Id: Id72e5526c56e5e070b933d3b28dc503a5a2978dc
    Reviewed-on: https://go-review.googlesource.com/13586
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit ce9778891400e0c6b9ad245e1e9b4bca2a08a3c9
Author: Todd Neal <todd@tneal.org>
Date:   Tue Aug 11 19:31:53 2015 -0500

    [dev.ssa] cmd/compile/ssa: fix test for dse
    
    Fix the test broken with dee1f2 by implementing Elem()
    
    Change-Id: I7a4a487885267c24fdc52d79fb7d450231328812
    Reviewed-on: https://go-review.googlesource.com/13551
    Reviewed-by: Keith Randall <khr@golang.org>

commit dee1f2750b544dc2dd109231d5f8347beb142b8d
Author: Todd Neal <todd@tneal.org>
Date:   Mon Aug 10 21:05:35 2015 -0500

    [dev.ssa] cmd/compile/ssa: eliminate Zero with dse
    
    Consider OpZero to be a store so it can be eliminated by dse.
    
    Change-Id: Idebb6a190657b76966f0c5b20f2ec9f52fe47499
    Reviewed-on: https://go-review.googlesource.com/13447
    Reviewed-by: Keith Randall <khr@golang.org>

commit 463858e6ff8cacd3bf2dafebe56272f8a863d959
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 11 09:47:45 2015 -0700

    [dev.ssa] cmd/compile: make failed nil checks panic
    
    Introduce pseudo-ops PanicMem and LoweredPanicMem.
    PanicMem could be rewritten directly into MOVL
    during lowering, but then we couldn't log nil checks.
    
    With this change, runnable nil check tests pass:
    
    GOSSAPKG=main go run run.go -- nil*.go
    
    Compiler output nil check tests fail:
    
    GOSSAPKG=p go run run.go -- nil*.go
    
    This is due to several factors:
    
    * SSA has improved elimination of unnecessary nil checks.
    * SSA is missing elimination of implicit nil checks.
    * SSA is missing extra logging about why nil checks were removed.
    
    I'm not sure how best to resolve these failures,
    particularly in a world in which the two backends
    will live side by side for some time.
    For now, punt on the problem.
    
    Change-Id: Ib2ca6824551671f92e0e1800b036f5ca0905e2a3
    Reviewed-on: https://go-review.googlesource.com/13474
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2af06480140dd48a4dc54257c2da46a73ca3ebb5
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 11 14:23:08 2015 -0700

    [dev.ssa] cmd/compile: fix function call memory accounting
    
    We were not recording function calls as
    changing the state of memory.
    
    As a result, the scheduler was not aware that
    storing values to the stack in order to make a
    function call must happen *after* retrieving
    results from the stack from a just-completed
    function call.
    
    This fixes the container/ring tests.
    
    This was my first experience debugging an issue
    using the HTML output. I'm feeling quite
    pleased with it.
    
    Change-Id: I9e8276846be9fd7a60422911b11816c5175e3d0a
    Reviewed-on: https://go-review.googlesource.com/13560
    Reviewed-by: Keith Randall <khr@golang.org>

commit 40aba8c4e7ac5babf9901d1948ff56c117e3bcf9
Author: David Chase <drchase@google.com>
Date:   Wed Aug 5 22:11:14 2015 -0400

    [dev.ssa] cmd/compile: add support for LROT, and tests
    
    Hardcoded the limit on constants only allowed.
    
    Change-Id: Idb9b07b4871db7a752a79e492671e9b41207b956
    Reviewed-on: https://go-review.googlesource.com/13257
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit e0e556620aaf9861c422191fc1efb8020c2f1507
Author: Todd Neal <todd@tneal.org>
Date:   Thu Aug 6 20:13:27 2015 -0500

    [dev.ssa] cmd/compile/ssa: don't nil check phis with non-nil arguments
    
    Move the known-non-nil scan outside the work loop to resolve an issue
    with values that were declared outside the block being operated on.
    Also consider phis whose arguments are all non-nil, as non-nil.
    
    Change-Id: I4d5b840042de9eb181f2cb918f36913fb5d517a2
    Reviewed-on: https://go-review.googlesource.com/13441
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9787ba43eeaebe2d61c701f27a5b50d095533b9b
Author: Keith Randall <khr@golang.org>
Date:   Mon Aug 10 13:40:28 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Update TODO list
    
    Change-Id: Ibcd4c6984c8728fd9ab76e0c7df555984deaf281
    Reviewed-on: https://go-review.googlesource.com/13471
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit baf2c3ec4ade20b3a56022983d20373ea9ea49b7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Aug 10 14:01:04 2015 -0700

    [dev.ssa] cmd/compile: detect rewrite loops of length > 1
    
    Use a version of Floyd's cycle finding algorithm,
    but advance by 1 and 1/2 steps per cycle rather
    than by 1 and 2. It is simpler and should be cheaper
    in the normal, acyclic case.
    
    This should fix the 386 and arm builds,
    which are currently hung.
    
    Change-Id: If8bd443011b28a5ecb004a549239991d3dfc862b
    Reviewed-on: https://go-review.googlesource.com/13473
    Reviewed-by: Keith Randall <khr@golang.org>

commit e98edc88c9d8453a22bfe3753d0f49510de0cf83
Author: Keith Randall <khr@golang.org>
Date:   Mon Aug 10 11:10:53 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: enforce load-store ordering in scheduler
    
    We must make sure that all loads that use a store are scheduled
    before the next store.  Add additional dependency edges to the
    value graph to enforce this constraint.
    
    Change-Id: Iab83644f68bc4c30637085b82ca7467b9d5513a5
    Reviewed-on: https://go-review.googlesource.com/13470
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 0d91018082bb078f6c84388327375f40f231a8d4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Aug 7 10:24:57 2015 -0700

    [dev.ssa] cmd/compile: add simplifying block rewrite rules
    
    Change-Id: Ia946c259628f84dc7031171456563975d2ad5ea9
    Reviewed-on: https://go-review.googlesource.com/13381
    Reviewed-by: Keith Randall <khr@golang.org>

commit b14b8d6bc7d55fdde87aa5de74d7c906ca53bfd0
Author: Todd Neal <todd@tneal.org>
Date:   Mon Aug 3 18:08:22 2015 -0500

    [dev.ssa] cmd/compile/ssa: don't perform nilcheck on OpAddr/OpAddPtr values
    
    Don't nilcheck values that were constructed as a result of OpAddr or
    OpAddPtr.
    
    Change-Id: I38053e905d1b76a2a64e77f84e444d38a5217108
    Reviewed-on: https://go-review.googlesource.com/13256
    Reviewed-by: David Chase <drchase@google.com>

commit 0fb818a424889a1f12c386fa5fb29814957678cd
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 5 10:33:09 2015 -0700

    [dev.ssa] cmd/compile: copy values during rewrites
    
    Rather than require an explicit Copy on the RHS of rewrite rules,
    use rulegen magic to add it.
    
    The advantages to handling this in rulegen are:
    
    * simpler rules
    * harder to accidentally miss a Copy
    
    Change-Id: I46853bade83bdf517eee9495bf5a553175277b53
    Reviewed-on: https://go-review.googlesource.com/13242
    Reviewed-by: Keith Randall <khr@golang.org>

commit d2150c83284c06ef3d7e106ca52160a8d1caeca2
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Thu Aug 6 18:33:49 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: generate better code when right-shifting with a constant.
    
    The lowering rules were missing the non-64 bit case.
    
    SBBLcarrymask can be folded to a int32 integer whose
    type has a smaller bit size. Without the new AND rules
    the following would be generated:
    
        v19 = MOVLconst <uint8> [-1] : SI
        v20 = ANDB <uint8> v18 v19 : DI
    
    which is obviously a NOP.
    
    Fixes #12022
    
    Change-Id: I5f4209f78edc0f118e5b9b2908739f09cefebca4
    Reviewed-on: https://go-review.googlesource.com/13301
    Reviewed-by: Keith Randall <khr@golang.org>

commit ca088cf4e59a1e9ef97dbbf16f035a152a8ddda8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 5 15:56:31 2015 -0700

    [dev.ssa] cmd/compile: handle phi control values
    
    Tests courtesy of Todd Neal.
    
    Change-Id: If657c7c7d3cd1ce01e9d9ad79eb6b2110230c0f9
    Reviewed-on: https://go-review.googlesource.com/13267
    Reviewed-by: Todd Neal <todd@tneal.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit cfd8dfaa10ab387c6b9c9e620aadab5852a4c76e
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 4 21:59:15 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: more checks on ssa structure
    
    Make sure all referenced Blocks and Values are really there.
    Fix deadcode to generate SSA graphs that pass this new test.
    
    Change-Id: Ib002ce20e33490eb8c919bd189d209f769d61517
    Reviewed-on: https://go-review.googlesource.com/13147
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit ddeee0eed33a675faa4eee289aabfdb25055cbef
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 5 11:01:59 2015 -0700

    [dev.ssa] cmd/compile: enforce that all phis are first during regalloc
    
    Change-Id: I035708f5d0659b3deef00808d35e1cc8a80215e0
    Reviewed-on: https://go-review.googlesource.com/13243
    Reviewed-by: Keith Randall <khr@golang.org>

commit f1401f1a1084327c4f24a4403dbc7003867ee009
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 5 16:07:13 2015 -0700

    [dev.ssa] cmd/compile: schedule phi control values first
    
    Change-Id: I684440dc316625d5572cc12179adbc206e306429
    Reviewed-on: https://go-review.googlesource.com/13263
    Reviewed-by: Keith Randall <khr@golang.org>

commit cd0cb0a9d6e7c5594e2870239290ff5704de0ef3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Aug 6 09:34:54 2015 -0700

    [dev.ssa] cmd/compile: tidy up register setup
    
    No functional changes.
    The intent is just to make this
    easier to read and maintain.
    
    Change-Id: Iec207546482cd62bcb22eaae8efe5be6c4f15378
    Reviewed-on: https://go-review.googlesource.com/13284
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5584523224dba203aab2e984ef6343db56bae249
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 5 16:43:49 2015 -0700

    [dev.ssa] cmd/compile: improve error message for phi location mismatch
    
    Change-Id: I402841743fcdc287631646039eb149f5cfdf886c
    Reviewed-on: https://go-review.googlesource.com/13269
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6548b63d6b5151a5063c92d4cffc7d861dfa0ed9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 5 16:11:57 2015 -0700

    [dev.ssa] cmd/compile: don't move OpSP and OpSB values
    
    regalloc expects to find all OpSP and OpSB values
    in the entry block.
    
    There is no value to moving them; don't.
    
    Change-Id: I775198f03ce7420348721ffc5e7d2bab065465b1
    Reviewed-on: https://go-review.googlesource.com/13266
    Reviewed-by: Keith Randall <khr@golang.org>

commit e13954981e6f6575f6813f00a2119550c682d1b5
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 5 16:06:39 2015 -0700

    [dev.ssa] cmd/compile: provide better errors for regnum and localOffset failures
    
    Change-Id: I2667b0923e17df7cbf08e34ebec1b69a0f2f02b2
    Reviewed-on: https://go-review.googlesource.com/13265
    Reviewed-by: Keith Randall <khr@golang.org>

commit e5fe33e546589d57616cf9603781299a3c5751dc
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 5 15:51:05 2015 -0700

    [dev.ssa] cmd/compile: respect phi values in tighten
    
    Given (say)
    
    b1: <- b2 b3
      v1 = Phi <t> v2 v3
    b2:
      v2 = ...
    b3:
      ...
    
    tighten will move v2 to b1, since it is only used in b1.
    
    This is wrong; v2 needs to be evaluated before entering b1.
    Fix it.
    
    Change-Id: I2cc3b30e3ffd221cf594e36cec534dfd9cf3c6a7
    Reviewed-on: https://go-review.googlesource.com/13264
    Reviewed-by: Keith Randall <khr@golang.org>

commit f91ff1a509c41ba0d14c3018f486fb64b3b54425
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 4 14:55:35 2015 -0700

    [dev.ssa] cmd/compile: add SSA pass to move values closer to uses
    
    Even this very simple, restricted initial implementation helps.
    
    While running make.bash, it moves 84437 values
    to new, closer homes.
    
    As a concrete example:
    
    func f_ssa(i, j int, b bool) int {
            if !b {
                    return 0
            }
            return i + j
    }
    
    It cuts off one stack slot and two instructions:
    
    Before:
    
    "".f_ssa t=1 size=96 value=0 args=0x20 locals=0x18
            0x0000 00000 (x.go:3)   TEXT    "".f_ssa(SB), $24-32
            0x0000 00000 (x.go:3)   SUBQ    $24, SP
            0x0004 00004 (x.go:3)   FUNCDATA        $0, "".gcargs·0(SB)
            0x0004 00004 (x.go:3)   FUNCDATA        $1, "".gclocals·1(SB)
            0x0004 00004 (x.go:5)   MOVQ    $0, AX
            0x0006 00006 (x.go:3)   MOVQ    32(SP), CX
            0x000b 00011 (x.go:3)   MOVQ    40(SP), DX
            0x0010 00016 (x.go:3)   LEAQ    48(SP), BX
            0x0015 00021 (x.go:3)   MOVB    (BX), BPB
            0x0018 00024 (x.go:3)   MOVQ    $0, SI
            0x001a 00026 (x.go:3)   MOVQ    SI, 56(SP)
            0x001f 00031 (x.go:3)   TESTB   BPB, BPB
            0x0022 00034 (x.go:5)   MOVQ    AX, (SP)
            0x0026 00038 (x.go:3)   MOVQ    CX, 8(SP)
            0x002b 00043 (x.go:3)   MOVQ    DX, 16(SP)
            0x0030 00048 (x.go:4)   JEQ     74
            0x0032 00050 (x.go:3)   MOVQ    8(SP), AX
            0x0037 00055 (x.go:3)   MOVQ    16(SP), CX
            0x003c 00060 (x.go:7)   LEAQ    (AX)(CX*1), DX
            0x0040 00064 (x.go:7)   MOVQ    DX, 56(SP)
            0x0045 00069 (x.go:3)   ADDQ    $24, SP
            0x0049 00073 (x.go:3)   RET
            0x004a 00074 (x.go:5)   MOVQ    (SP), AX
            0x004e 00078 (x.go:5)   MOVQ    AX, 56(SP)
            0x0053 00083 (x.go:3)   JMP     69
    
    After:
    
    "".f_ssa t=1 size=80 value=0 args=0x20 locals=0x10
            0x0000 00000 (x.go:3)   TEXT    "".f_ssa(SB), $16-32
            0x0000 00000 (x.go:3)   SUBQ    $16, SP
            0x0004 00004 (x.go:3)   FUNCDATA        $0, "".gcargs·0(SB)
            0x0004 00004 (x.go:3)   FUNCDATA        $1, "".gclocals·1(SB)
            0x0004 00004 (x.go:3)   MOVQ    32(SP), AX
            0x0009 00009 (x.go:3)   MOVQ    24(SP), CX
            0x000e 00014 (x.go:3)   LEAQ    40(SP), DX
            0x0013 00019 (x.go:3)   MOVB    (DX), BL
            0x0015 00021 (x.go:3)   MOVQ    $0, BP
            0x0017 00023 (x.go:3)   MOVQ    BP, 48(SP)
            0x001c 00028 (x.go:3)   TESTB   BL, BL
            0x001e 00030 (x.go:3)   MOVQ    AX, (SP)
            0x0022 00034 (x.go:3)   MOVQ    CX, 8(SP)
            0x0027 00039 (x.go:4)   JEQ     64
            0x0029 00041 (x.go:3)   MOVQ    8(SP), AX
            0x002e 00046 (x.go:3)   MOVQ    (SP), CX
            0x0032 00050 (x.go:7)   LEAQ    (AX)(CX*1), DX
            0x0036 00054 (x.go:7)   MOVQ    DX, 48(SP)
            0x003b 00059 (x.go:3)   ADDQ    $16, SP
            0x003f 00063 (x.go:3)   RET
            0x0040 00064 (x.go:5)   MOVQ    $0, AX
            0x0042 00066 (x.go:5)   MOVQ    AX, 48(SP)
            0x0047 00071 (x.go:3)   JMP     59
    
    Of course, the old backend is still well ahead:
    
    "".f_ssa t=1 size=48 value=0 args=0x20 locals=0x0
            0x0000 00000 (x.go:3)   TEXT    "".f_ssa(SB), $0-32
            0x0000 00000 (x.go:3)   NOP
            0x0000 00000 (x.go:3)   NOP
            0x0000 00000 (x.go:3)   FUNCDATA        $0, gclocals·a8eabfc4a4514ed6b3b0c61e9680e440(SB)
            0x0000 00000 (x.go:3)   FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0000 00000 (x.go:4)   CMPB    "".b+24(FP), $0
            0x0005 00005 (x.go:4)   JNE     17
            0x0007 00007 (x.go:5)   MOVQ    $0, "".~r3+32(FP)
            0x0010 00016 (x.go:5)   RET
            0x0011 00017 (x.go:7)   MOVQ    "".i+8(FP), BX
            0x0016 00022 (x.go:7)   MOVQ    "".j+16(FP), BP
            0x001b 00027 (x.go:7)   ADDQ    BP, BX
            0x001e 00030 (x.go:7)   MOVQ    BX, "".~r3+32(FP)
            0x0023 00035 (x.go:7)   RET
    
    Some regalloc improvements should help considerably.
    
    Change-Id: I95bb5dd83e56afd70ae4e983f1d32dffd0c3d46a
    Reviewed-on: https://go-review.googlesource.com/13142
    Reviewed-by: Keith Randall <khr@golang.org>

commit d1c15a0e3ed1ba9c846a35d637c92525f07258a8
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 4 15:47:22 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement ITAB
    
    Implement ITAB, selecting the itable field of an interface.
    
    Soften the lowering check to allow lowerings that leave
    generic but dead ops behind.  (The ITAB lowering does this.)
    
    Change-Id: Icc84961dd4060d143602f001311aa1d8be0d7fc0
    Reviewed-on: https://go-review.googlesource.com/13144
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9495e45c8077fe2f562a57da8e3593b1779b2d2f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 4 11:13:56 2015 -0700

    [dev.ssa] cmd/compile: make GOSSAFUNC trigger logging
    
    I find myself always adding this in temporarily.
    Make it permanent.
    
    Change-Id: I1646b3930a07d0ea01840736ccd449b7fd24f06e
    Reviewed-on: https://go-review.googlesource.com/13141
    Reviewed-by: Keith Randall <khr@golang.org>

commit 573c791e81f4356698e604bb2fdba13518edc736
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 4 14:22:29 2015 -0700

    [dev.ssa] cmd/compile: treat control ops as live at end of block
    
    Failure to treat control ops as live can lead
    to them being eliminated when they live in
    other blocks.
    
    Change-Id: I604a1977a3d3884b1f4516bea4e15885ce38272d
    Reviewed-on: https://go-review.googlesource.com/13138
    Reviewed-by: Keith Randall <khr@golang.org>

commit 54dca047dd646cfd071fe24cafb57c91a6262992
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 4 12:53:05 2015 -0700

    [dev.ssa] cmd/compile: always print block control values
    
    They were being omitted after scheduling.
    
    Change-Id: Ia20e2dcb61fde9ec854918b958c3897bafd282a6
    Reviewed-on: https://go-review.googlesource.com/13140
    Reviewed-by: Keith Randall <khr@golang.org>

commit 683f5d7bdba38754caf0b45434f8081537799971
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 4 12:24:23 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: put new values for block rewrites in rewritten block
    
    Don't put them in the control value's block.
    That may be many blocks up the dominator tree.
    
    Change-Id: Iab3ea36a890ffe0e355dadec7aeb676901c4f070
    Reviewed-on: https://go-review.googlesource.com/13134
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit b8efee0d8ae06b3d2f0057d26d9927b86792a9a6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 31 14:37:15 2015 -0700

    [dev.ssa] cmd/compile: log progs during ssa codegen
    
    This is helpful when debugging generated code.
    
    Change-Id: I268efa3593a03bb2c4e9f07d9034c004cd40df41
    Reviewed-on: https://go-review.googlesource.com/13099
    Reviewed-by: Keith Randall <khr@golang.org>

commit 38ed6c10eb056419256beb03eefe289faa7d545b
Author: Todd Neal <todd@tneal.org>
Date:   Thu Jul 30 16:02:24 2015 -0400

    [dev.ssa] cmd/compile: simplify repeated OCOM
    
    Rewrite ^{n}x to be ^{n % 2}x.  This will eventually resolve a fuzz
    issue that breaks v1.5.
    
    Updates #11352
    
    Change-Id: I1b3f93872d06222f9ff5f6fd5580178ebaf4c003
    Reviewed-on: https://go-review.googlesource.com/13110
    Reviewed-by: Keith Randall <khr@golang.org>

commit faee392814f118d0d1c8103bb46965267e8619f7
Author: Todd Neal <todd@tneal.org>
Date:   Mon Aug 3 19:28:48 2015 -0500

    [dev.ssa] cmd/compile/ssa : fix typo in error message
    
    Change-Id: Ibb5169aade15190773ff7dd11b303c1f1345a0c2
    Reviewed-on: https://go-review.googlesource.com/13100
    Reviewed-by: Keith Randall <khr@golang.org>

commit a678a5c7a59de585a09d7bde2505b8234cc4422e
Author: Keith Randall <khr@golang.org>
Date:   Mon Aug 3 12:33:03 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Fix scheduler
    
    The DFS scheduler doesn't do the right thing.  If a Value x is used by
    more than one other Value, then x is put into the DFS queue when
    its first user (call it y) is visited.  It is not removed and reinserted
    when the second user of x (call it z) is visited, so the dependency
    between x and z is not respected.  There is no easy way to fix this with
    the DFS queue because we'd have to rip values out of the middle of the
    DFS queue.
    
    The new scheduler works from the end of the block backwards, scheduling
    instructions which have had all of their uses already scheduled.
    A simple priority scheme breaks ties between multiple instructions that
    are ready to schedule simultaneously.
    
    Keep track of whether we've scheduled or not, and make print() use
    the scheduled order if we have.
    
    Fix some shift tests that this change tickles.  Add unsigned right shift tests.
    
    Change-Id: I44164c10bb92ae8ab8f76d7a5180cbafab826ea1
    Reviewed-on: https://go-review.googlesource.com/13069
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 4dcf8ea1a44cd1c566cb492560ee44b9e81a6d9e
Author: Todd Neal <todd@tneal.org>
Date:   Tue Jul 14 16:26:38 2015 -0500

    [dev.ssa] cmd/compile/ssa: speed up nilcheck
    
    Reworks nilcheck to be performed by a depth first traversal of the
    dominator tree, keeping an updated map of the values that have been
    nil-checked during the traversal.
    
    benchmark                           old ns/op     new ns/op     delta
    BenchmarkNilCheckDeep1-8            1242          1825          +46.94%
    BenchmarkNilCheckDeep10-8           2397          3942          +64.46%
    BenchmarkNilCheckDeep100-8          29105         24873         -14.54%
    BenchmarkNilCheckDeep1000-8         2742563       265760        -90.31%
    BenchmarkNilCheckDeep10000-8        335690119     3157995       -99.06%
    
    benchmark                           old MB/s     new MB/s     speedup
    BenchmarkNilCheckDeep1-8            0.81         0.55         0.68x
    BenchmarkNilCheckDeep10-8           4.17         2.54         0.61x
    BenchmarkNilCheckDeep100-8          3.44         4.02         1.17x
    BenchmarkNilCheckDeep1000-8         0.36         3.76         10.44x
    BenchmarkNilCheckDeep10000-8        0.03         3.17         105.67x
    
    benchmark                        old allocs     new allocs     delta
    BenchmarkNilCheckDeep1-8         9              14             +55.56%
    BenchmarkNilCheckDeep10-8        9              23             +155.56%
    BenchmarkNilCheckDeep100-8       9              113            +1155.56%
    BenchmarkNilCheckDeep1000-8      9              1015
    +11177.78%
    BenchmarkNilCheckDeep10000-8     9              10024
    +111277.78%
    
    benchmark                        old bytes     new bytes     delta
    BenchmarkNilCheckDeep1-8         432           608           +40.74%
    BenchmarkNilCheckDeep10-8        1008          1496          +48.41%
    BenchmarkNilCheckDeep100-8       8064          11656         +44.54%
    BenchmarkNilCheckDeep1000-8      73728         145240        +96.99%
    BenchmarkNilCheckDeep10000-8     737280        2144411       +190.85%
    
    Change-Id: I0f86010e9823aec04aac744fdb589b65ec8acefc
    Reviewed-on: https://go-review.googlesource.com/12332
    Reviewed-by: David Chase <drchase@google.com>

commit 4ac823eeb8aa08e8fbae01c70d185ec7501f55b7
Author: Todd Neal <todd@tneal.org>
Date:   Sun Aug 2 20:28:31 2015 -0500

    [dev.ssa] cmd/compile/ssa: test against known values
    
    Modify tests to use a known value instead of comparing the backends
    directly.
    
    Change-Id: I32e804e12515885bd94c4f83644cbca03b018fea
    Reviewed-on: https://go-review.googlesource.com/13042
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9b25da732b62d294bc0762d45c77d1a0095d81fa
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Jul 31 12:32:22 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: add more simplifications rules
    
    This is a follow up on https://go-review.googlesource.com/#/c/12420/
    with some rules moved to AMD64 closer to the existing rules.
    
    Change-Id: Id346bb0fc4459b3c49b826a59cc74308a590310e
    Reviewed-on: https://go-review.googlesource.com/12906
    Reviewed-by: Keith Randall <khr@golang.org>

commit 93c354b6cca23ba8ac5866c874493575e3e57510
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 30 17:15:16 2015 -0700

    [dev.ssa] cmd/compile: handle non-in-place NEG and NOT
    
    This fixes the crypto/subtle tests.
    
    Change-Id: Ie6e721eec3481f67f13de1bfbd7988e227793148
    Reviewed-on: https://go-review.googlesource.com/13000
    Reviewed-by: Keith Randall <khr@golang.org>

commit 85e0329fbc03df4165550611f3724d9ebcaa34a8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 30 11:03:05 2015 -0700

    [dev.ssa] cmd/compile: move most types outside SSA
    
    The only types that remain in the ssa package
    are special compiler-only types.
    
    Change-Id: If957abf128ec0778910d67666c297f97f183b7ee
    Reviewed-on: https://go-review.googlesource.com/12933
    Reviewed-by: Keith Randall <khr@golang.org>

commit 165c1c16d1e94ddd961e5b99eab6610d95af6fa6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 30 10:28:57 2015 -0700

    [dev.ssa] cmd/compile: provide stack trace for caught panics
    
    Change-Id: I9cbb6d53a8c2302222b13d2f33b081b704208b8a
    Reviewed-on: https://go-review.googlesource.com/12932
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Todd Neal <todd@tneal.org>

commit 6d9362a1f79a916a1a8de0a6bde8a3a94dc89944
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Thu Jul 30 12:33:36 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: implement OXOR.
    
    From compiling go there were 260 functions where XOR was needed.
    
    Much of the required changes for implementing XOR were already
    done in 12813.
    
    Change-Id: I5a68aa028f5ed597bc1d62cedbef3620753dfe82
    Reviewed-on: https://go-review.googlesource.com/12901
    Reviewed-by: Keith Randall <khr@golang.org>

commit 95aff4db54cd79461c85c7547860be7458e26ec3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 28 14:31:25 2015 -0700

    [dev.ssa] cmd/compile: use Copy instead of ConvNop
    
    The existing backend simply elides OCONVNOP.
    There's no reason for us to do any differently.
    Rather than insert ConvNops and then rewrite them
    away, stop creating them in the first place.
    
    Change-Id: I4bcbe2229fcebd189ae18df24f2c612feb6e215e
    Reviewed-on: https://go-review.googlesource.com/12810
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9271ecc8c62930e4cac73f9dfe8ef0b1bb97cee6
Author: Todd Neal <todd@tneal.org>
Date:   Thu Jul 30 13:57:43 2015 -0400

    [dev.ssa] cmd/compile: fix SUBQ generation error
    
    Fix code generation error that resulted in a multi-argument NEGQ
    
    doasm: notfound ft=13 tt=13 00134 NEGQ  AX, AX 13 13
    
    Change-Id: I8b712d21a5523eccbae1f33ccea417844c27073e
    Reviewed-on: https://go-review.googlesource.com/12869
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 359747da15b0a933bab2d049ad00f1c4663701ee
Merge: 4b80315 e0c180c
Author: Keith Randall <khr@golang.org>
Date:   Thu Jul 30 12:22:02 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge from tip into ssa branch
    
    Change-Id: Ida553b5c504058347c0bdcb1a987727bdcea456b

commit 4b803151ce02aa8372488dd6e50f26f5bc0b2120
Author: Keith Randall <khr@golang.org>
Date:   Wed Jul 29 17:07:09 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: fix shift operations
    
    Convert shift ops to also encode the size of the shift amount.
    
    Change signed right shift from using CMOV to using bit twiddles.
    It is a little bit better (5 instructions instead of 4, but fewer
    bytes and slightly faster code).  It's also a bit faster than
    the 4-instruction branch version, even with a very predictable
    branch.  As tested on my machine, YMMV.
    
    Implement OCOM while we are here.
    
    Change-Id: I8ca12dd62fae5d626dc0e6da5d4bbd34fd9640d2
    Reviewed-on: https://go-review.googlesource.com/12867
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit bdb2d2810de66864cd77fbe95a602d53c851d889
Author: Keith Randall <khr@golang.org>
Date:   Thu Jul 30 10:36:37 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: update generated code
    
    Missed somehow in #12813
    
    Change-Id: I28f2789e33822a4ff884d8a3f474522747f61c73
    Reviewed-on: https://go-review.googlesource.com/12868
    Reviewed-by: Keith Randall <khr@golang.org>

commit 20550cbaf1ebbb51227cb09b6890edd864026f06
Author: Keith Randall <khr@golang.org>
Date:   Tue Jul 28 16:04:50 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement lots of small (<8byte) ops.
    
    Lots and lots of ops!
    Also XOR for good measure.
    
    Add a pass to the compiler generator to check that all of the
    architecture-specific opcodes are handled by genValue.  We will
    catch any missing ones if we come across them during compilation,
    but probably better to catch them statically.
    
    Change-Id: Ic4adfbec55c8257f88117bc732fa664486262868
    Reviewed-on: https://go-review.googlesource.com/12813
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 7402416a8b0dd30c7a245ca053561a87d4021be6
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Wed Jul 29 17:52:25 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: implement OOR.
    
    From compiling go there were 761 functions where OR was needed.
    
    Change-Id: Ied8bf59cec50a3175273387bc7416bd042def6d8
    Reviewed-on: https://go-review.googlesource.com/12766
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9f8a677eabe573c3640605e4c541e968367cc02e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 28 14:36:14 2015 -0700

    [dev.ssa] cmd/compile: lower all integer comparisons
    
    Change-Id: I683281e1293d3df3c39772e7b08f0b55a3b61404
    Reviewed-on: https://go-review.googlesource.com/12811
    Reviewed-by: Keith Randall <khr@golang.org>

commit 1bab5b9b414a6c4290c9118a85fb316aacea7cf3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 28 14:14:25 2015 -0700

    [dev.ssa] cmd/compile: add a few more binary ops
    
    With this, all non-float, non-complex
    binary ops found in the standard library
    are implemented.
    
    Change-Id: I6087f115229888c0dce10ab35db3fd36a0e0a8b1
    Reviewed-on: https://go-review.googlesource.com/12799
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9cb332efd445a7e0672b96f9bc703c93f02879a5
Author: Keith Randall <khr@golang.org>
Date:   Tue Jul 28 14:19:20 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Split OpConst into an OpConst8, OpConst16, ...
    
    Convert the polymorphic OpConst into monomorphic variants.
    
    Change-Id: I90bb8894fbac04ca5e5484ea260c131ef8b506fb
    Reviewed-on: https://go-review.googlesource.com/12798
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 25d1916816c7fae4049b47efdc5fde37ce4a9be1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 28 12:37:46 2015 -0700

    [dev.ssa] cmd/compile: implement OINDREG in expr context
    
    Change-Id: I1922656c99773255e5bc15b5a2bd79f19a2fe82c
    Reviewed-on: https://go-review.googlesource.com/12796
    Reviewed-by: Keith Randall <khr@golang.org>

commit 71a4c4bb8d20e2ea7f4aa9f34b2a3c833de372f8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 27 16:37:22 2015 -0700

    [dev.ssa] cmd/compile: finish InvertFlags rewrites
    
    Change-Id: I61b2d2be18f905a17e8ee765a4494b763a425c55
    Reviewed-on: https://go-review.googlesource.com/12794
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3e3d162f50e4677f08a44c3955090c27998224e6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 27 16:36:36 2015 -0700

    [dev.ssa] cmd/compile: implement genValue for MOVQstoreidx8
    
    Change-Id: I6b13a26e01ef8739ed60e6fd5f5c1ea045bea581
    Reviewed-on: https://go-review.googlesource.com/12793
    Reviewed-by: Keith Randall <khr@golang.org>

commit 67df7934cc9f11a31395e2ade1d6c332aab67e23
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 28 11:08:44 2015 -0700

    [dev.ssa] cmd/compile: respect Xoffset of static data
    
    Together with teaching SSA to generate static data,
    this fixes the encoding/pem and hash/adler32 tests.
    
    Change-Id: I75f81f6c995dcb9c6d99bd3acda94a4feea8b87b
    Reviewed-on: https://go-review.googlesource.com/12791
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6b41665039e278a83823051b44628e25415b0205
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 28 10:56:39 2015 -0700

    [dev.ssa] cmd/compile: implement static data generation
    
    The existing backend recognizes special
    assignment statements as being implementable
    with static data rather than code.
    Unfortunately, it assumes that it is in the middle
    of codegen; it emits data and modifies the AST.
    
    This does not play well with SSA's two-phase
    bootstrapping approach, in which we attempt to
    compile code but fall back to the existing backend
    if something goes wrong.
    
    To work around this:
    
    * Add the ability to inquire about static data
    without side-effects.
    * Save the static data required for a function.
    * Emit that static data during SSA codegen.
    
    Change-Id: I2e8a506c866ea3e27dffb597095833c87f62d87e
    Reviewed-on: https://go-review.googlesource.com/12790
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2a5e6c47bc2e56296204aa721dec90804bee1501
Author: Keith Randall <khr@golang.org>
Date:   Thu Jul 23 14:35:02 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: redo how sign extension is handled
    
    For integer types less than a machine register, we have to decide
    what the invariants are for the high bits of the register.  We used
    to set the high bits to the correct extension (sign or zero, as
    determined by the type) of the low bits.
    
    This CL makes the compiler ignore the high bits of the register
    altogether (they are junk).
    
    On this plus side, this means ops that generate subword results don't
    have to worry about correctly extending them.  On the minus side,
    ops that consume subword arguments have to deal with the input
    registers not being correctly extended.
    
    For x86, this tradeoff is probably worth it.  Almost all opcodes
    have versions that use only the correct subword piece of their
    inputs.  (The one big exception is array indexing.)  Not many opcodes
    can correctly sign extend on output.
    
    For other architectures, the tradeoff is probably not so clear, as
    they don't have many subword-safe opcodes (e.g. 16-bit compare,
    ignoring the high 16/48 bits).  Fortunately we can decide whether
    we do this per-architecture.
    
    For the machine-independent opcodes, we pretend that the "register"
    size is equal to the type width, so sign extension is immaterial.
    Opcodes that care about the signedness of the input (e.g. compare,
    right shift) have two different variants.
    
    Change-Id: I465484c5734545ee697afe83bc8bf4b53bd9df8d
    Reviewed-on: https://go-review.googlesource.com/12600
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9ca24fcda88398cc39e9b6e43bc1de51610a3b01
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 27 13:17:45 2015 -0700

    [dev.ssa] cmd/compile: implement non-numeric comparisons
    
    The only slice/interface comparisons that reach
    the backend are comparisons to nil.
    
    Funcs, maps, and channels are references types,
    so pointer equality is enough.
    
    Change-Id: I60a71da46a36202e9bd62ed370ab7d7f2e2800e7
    Reviewed-on: https://go-review.googlesource.com/12715
    Reviewed-by: Keith Randall <khr@golang.org>

commit edff881ce5ca9c2ee209bcd7a2cd92b63ffe4179
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Jul 28 14:58:49 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: implement OAND.
    
    Before this patch there was only partial support for ANDQconst
    which was not lowered. This patch added support for AND operations
    for all bit sizes and signs.
    
    Change-Id: I3a6b2cddfac5361b27e85fcd97f7f3537ebfbcb6
    Reviewed-on: https://go-review.googlesource.com/12761
    Reviewed-by: Keith Randall <khr@golang.org>

commit c15b0e83d2e5d00d9b19a5ba191aff26831458d8
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Jul 21 18:06:15 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: implement all bit sizes for Eq and Neq
    
    Change-Id: I2c5c75153493b5dd3f1a743e5edf04403e83b31b
    Reviewed-on: https://go-review.googlesource.com/12474
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 1807d54d8594c52cdf79c8a9ad60607d2796fec6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 27 12:45:56 2015 -0700

    [dev.ssa] cmd/compile: detect unbalanced rules
    
    Rules may span multiple lines,
    but if we're still unbalanced at the
    end of the file, something is wrong.
    
    I write unbalanced rules depressingly often.
    
    Change-Id: Ibd04aa06539e2a0ffef73bb665febf3542fd11f1
    Reviewed-on: https://go-review.googlesource.com/12710
    Reviewed-by: Keith Randall <khr@golang.org>

commit 15dcdfba0fd1c0949c094b4c07c7d10be565ccf3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 21 07:37:47 2015 -0700

    [dev.ssa] cmd/compile: implement OCALLMETH
    
    This mimics the way the old backend
    compiles OCALLMETH.
    
    Change-Id: I635c8e7a48c8b5619bd837f78fa6eeba83a57b2f
    Reviewed-on: https://go-review.googlesource.com/12549
    Reviewed-by: Keith Randall <khr@golang.org>

commit c9a38ce758e3de93e73842bf42a6e84f182d183a
Author: Todd Neal <todd@tneal.org>
Date:   Sun Jul 26 09:48:20 2015 -0500

    [dev.ssa] cmd/compile: don't flush a value derived from the current value
    
    If flushing a value from a register that might be used by the current
    old-schedule value, save it to the home location.
    
    This resolves the error that was changed from panic to unimplemented in
    CL 12655.
    
    Change-Id: If864be34abcd6e11d6117a061376e048a3e29b3a
    Reviewed-on: https://go-review.googlesource.com/12682
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit b61f8c8df3247945ef723a22df0327264adfa3f9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 24 20:09:39 2015 -0700

    [dev.ssa] cmd/compile: fix registers for in-place instructions
    
    Some of these were right; others weren't.
    
    Fixes 'GOGC=off GOSSAPKG=mime go test -a mime'.
    
    The right long term fix is probably to teach the
    register allocator about in-place instructions.
    In the meantime, all the tests that we can run
    now pass.
    
    Change-Id: I8e37b00a5f5e14f241b427d45d5f5cc1064883a2
    Reviewed-on: https://go-review.googlesource.com/12664
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0bb2a50a55b15b7a9ea63cfa55a29e13ef29b542
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 24 14:51:51 2015 -0700

    [dev.ssa] cmd/compile: respect stack slot width when storing/loading registers
    
    Prior to this, we were smashing our own stack,
    which caused the crypto/sha256 tests to fail.
    
    Change-Id: I7dd94cf466d175b3be0cd65f9c4fe8b1223081fe
    Reviewed-on: https://go-review.googlesource.com/12660
    Reviewed-by: Daniel Morsing <daniel.morsing@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit db5232620a1722ae1bcdf5f0d8cd15ba0bac2077
Author: Todd Neal <todd@tneal.org>
Date:   Sat Jul 25 12:53:58 2015 -0500

    [dev.ssa] cmd/compile: only fold 32 bit integers for add/multiply
    
    Fix an issue where doasm fails if trying to multiply by a larger
    than 32 bit const (doasm: notfound ft=9 tt=14 00008 IMULQ
    $34359738369, CX 9 14).  Fix truncation of 64 to 32 bit integer
    when generating LEA causing incorrect values to be computed.
    
    Change-Id: I1e65b63cc32ac673a9bb5a297b578b44c2f1ac8f
    Reviewed-on: https://go-review.googlesource.com/12678
    Reviewed-by: Keith Randall <khr@golang.org>

commit 52d76f7a6a02cf5834251a4ceadc686a9f83ac81
Author: Todd Neal <todd@tneal.org>
Date:   Thu Jul 23 18:44:09 2015 -0500

    [dev.ssa] cmd/compile: rewrite if not
    
    Rewrite if !cond by swapping the branches and removing the not.
    
    Change-Id: If3af1bac02bfc566faba872a8c7f7e5ce38e9f58
    Reviewed-on: https://go-review.googlesource.com/12610
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 7e74e43366d58844cb30f382374e6447b93ac706
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 24 11:55:52 2015 -0700

    [dev.ssa] cmd/compile: minor cleanup
    
    Cull dead code. Add TODOs.
    
    Change-Id: I81d24371de47f5a27d3a3a0ec0ef5baaf6814c06
    Reviewed-on: https://go-review.googlesource.com/12659
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 71b570774da4c42139a9e16735a353209f0f8def
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 24 12:47:00 2015 -0700

    [dev.ssa] cmd/compile: finish implementing comparisons
    
    Change-Id: I4e496c7c7239111133631f76ca25e14be64800c6
    Reviewed-on: https://go-review.googlesource.com/12656
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5c5f2a731ccfb9dec12967ed2da8f530b8c23a61
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 24 11:43:25 2015 -0700

    [dev.ssa] cmd/compile: convert localOffset panic to unimplemented
    
    This prevents panics while attempting to generate code
    for the runtime package. Now:
    
    <unknown line number>: internal compiler error: localOffset of non-LocalSlot value: v10 = ADDQconst <*m> [256] v22
    
    Change-Id: I20ed6ec6aae2c91183b8c826b8ebcc98e8ceebff
    Reviewed-on: https://go-review.googlesource.com/12655
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8d31df18afd682b8440f3ea82033c01b144c65c8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 24 11:28:12 2015 -0700

    [dev.ssa] cmd/compile: use string contents instead of offset from string header
    
    This generates more efficient code.
    
    Before:
    
            0x003a 00058 (rr.go:7)  LEAQ    go.string.hdr."="(SB), BX
            0x0041 00065 (rr.go:7)  LEAQ    16(BX), BP
            0x0045 00069 (rr.go:7)  MOVQ    BP, 16(SP)
    
    After:
    
            0x003a 00058 (rr.go:7)  LEAQ    go.string."="(SB), BX
            0x0041 00065 (rr.go:7)  MOVQ    BX, 16(SP)
    
    It also matches the existing backend
    and is more robust to other changes,
    such as CL 11698, which I believe broke
    the current code.
    
    This CL fixes the encoding/base64 tests, as run with:
    
            GOGC=off GOSSAPKG=base64 go test -a encoding/base64
    
    Change-Id: I3c475bed1dd3335cc14e13309e11d23f0ed32c17
    Reviewed-on: https://go-review.googlesource.com/12654
    Reviewed-by: Keith Randall <khr@golang.org>

commit d90e0481bf0c2f5ba13ed0ae1872b223f0c5ce9c
Author: Todd Neal <todd@tneal.org>
Date:   Thu Jul 23 20:01:40 2015 -0500

    [dev.ssa] cmd/compile: implement LEAQ2/LEAQ4/LEAQ8 opcodes
    
    Change-Id: I8da76b9a4c5c80e8515e69e105d6349fe3ad9281
    Reviewed-on: https://go-review.googlesource.com/12611
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 851ceebcebb2ae9352a2be958c86f63e70d344b1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jul 22 21:21:50 2015 -0700

    [dev.ssa] cmd/compile: don't alloc new CSE classes
    
    This reduces the time to compile
    test/slice3.go on my laptop from ~12s to ~3.8s.
    It reduces the max memory use from ~4.8gb to
    ~450mb.
    
    This is still considerably worse than tip,
    at 1s and 300mb respectively, but it's
    getting closer.
    
    Hopefully this will fix the build at long last.
    
    Change-Id: Iac26b52023f408438cba3ea1b81dcd82ca402b90
    Reviewed-on: https://go-review.googlesource.com/12566
    Reviewed-by: Keith Randall <khr@golang.org>

commit 317226e61c7269b97dafe8fd7524559ed64c64a2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jul 22 21:04:25 2015 -0700

    [dev.ssa] cmd/compile: use v.Args[x].Op in CSE key
    
    Experimentally, the Ops of v.Args do a good job
    of differentiating values that will end up in
    different partitions.
    
    Most values have at most two args, so use them.
    
    This reduces the wall time to run test/slice3.go
    on my laptop from ~20s to ~12s.
    
    Credit to Todd Neal for the idea.
    
    Change-Id: I55d08f09eb678bbe8366924ca2fabcd32526bf41
    Reviewed-on: https://go-review.googlesource.com/12565
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5254be3a9c2d6427c081999309e836951210a69e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jul 22 19:18:35 2015 -0700

    [dev.ssa] cmd/compile: make etypes readable
    
    Change-Id: Id89ea3b458597dd93d269b9fe5475e9cccc6d992
    Reviewed-on: https://go-review.googlesource.com/12562
    Reviewed-by: Keith Randall <khr@golang.org>

commit d298209b1c22e970adb19761c924f3301ca7e252
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jul 22 13:13:53 2015 -0700

    [dev.ssa] cmd/compile: add GOSSAFUNC and GOSSAPKG
    
    These temporary environment variables make it
    possible to enable using SSA-generated code
    for a particular function or package without
    having to rebuild the compiler.
    
    This makes it possible to start bulk testing
    SSA generated code.
    
    First, bump up the default stack size
    (_StackMin in runtime/stack2.go) to something
    large like 32768, because without stackmaps
    we can't grow stacks.
    
    Then run something like:
    
    for pkg in `go list std`
    do
      GOGC=off GOSSAPKG=`basename $pkg` go test -a $pkg
    done
    
    When a test fails, you can re-run those tests,
    selectively enabling one function after another,
    until you find the one that is causing trouble.
    
    Doing this right now yields some interesting results:
    
    * There are several packages for which we generate
      some code and whose tests pass. Yay!
    
    * We can generate code for encoding/base64, but
      tests there fail, so there's a bug to fix.
    
    * Attempting to build the runtime yields a panic during codegen:
      panic: interface conversion: ssa.Location is nil, not *ssa.LocalSlot
    
    * The top unimplemented codegen items are (simplified):
      59 genValue not implemented: REPMOVSB
      18 genValue not implemented: REPSTOSQ
      14 genValue not implemented: SUBQ
       9 branch not implemented: If v -> b b. Control: XORQconst <bool> [1]
       8 genValue not implemented: MOVQstoreidx8
       4 branch not implemented: If v -> b b. Control: SETG <bool>
       3 branch not implemented: If v -> b b. Control: SETLE <bool>
       2 load flags not implemented: LoadReg8 <flags>
       2 genValue not implemented: InvertFlags <flags>
       1 store flags not implemented: StoreReg8 <flags>
       1 branch not implemented: If v -> b b. Control: SETGE <bool>
    
    Change-Id: Ib64809ac0c917e25bcae27829ae634c70d290c7f
    Reviewed-on: https://go-review.googlesource.com/12547
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8c954d57801d8ea855003425fbbbf78de8733e6a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jul 15 14:38:19 2015 -0600

    [dev.ssa] cmd/compile: speed up cse
    
    By walking only the current set of partitions
    at any given point, the cse pass ended up doing
    lots of extraneous, effectively O(n^2) work.
    
    Using a regular for loop allows each cse pass to
    make as much progress as possible by processing
    each new class as it is introduced.
    
    This can and should be optimized further,
    but it already reduces by 75% cse time on test/slice3.go.
    
    The overall time to compile test/slice3.go is still
    dominated by the O(n^2) work in the liveness pass.
    However, Keith is rewriting regalloc anyway.
    
    Change-Id: I8be020b2f69352234587eeadeba923481bf43fcc
    Reviewed-on: https://go-review.googlesource.com/12244
    Reviewed-by: Keith Randall <khr@golang.org>

commit 00437ebe73944854d58ddb6710a185677317ee6e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 18:50:17 2015 -0700

    [dev.ssa] cmd/compile: don't combine phi vars from different blocks in CSE
    
    Here is a concrete case in which this goes wrong.
    
    func f_ssa() int {
            var n int
    Next:
            for j := 0; j < 3; j++ {
                    for i := 0; i < 10; i++ {
                            if i == 6 {
                                    continue Next
                            }
                            n = i
                    }
                    n += j + j + j + j + j + j + j + j + j + j // j * 10
            }
            return n
    }
    
    What follows is the function printout before and after CSE.
    
    Note blocks b8 and b10 in the before case.
    
    b8 is the inner loop's condition: i < 10.
    b10 is the inner loop's increment: i++.
    v82 is i. On entry to b8, it is either 0 (v19) the first time,
    or the result of incrementing v82, by way of v29.
    
    The CSE pass considered v82 and v49 to be common subexpressions,
    and eliminated v82 in favor of v49.
    
    In the after case, v82 is now dead and will shortly be eliminated.
    As a result, v29 is also dead, and we have lost the increment.
    The loop runs forever.
    
    BEFORE CSE
    
    f_ssa <nil>
      b1:
        v1 = Arg <mem>
        v2 = SP <uint64>
        v4 = Addr <*int> {~r0} v2
        v13 = Zero <mem> [8] v4 v1
        v14 = Const <int>
        v15 = Const <int>
        v17 = Const <int> [3]
        v19 = Const <int>
        v21 = Const <int> [10]
        v24 = Const <int> [6]
        v28 = Const <int> [1]
        v43 = Const <int> [1]
        Plain -> b3
      b2: <- b7
        Exit v47
      b3: <- b1
        Plain -> b4
      b4: <- b3 b6
        v49 = Phi <int> v15 v44
        v68 = Phi <int> v14 v67
        v81 = Phi <mem> v13 v81
        v18 = Less <bool> v49 v17
        If v18 -> b5 b7
      b5: <- b4
        Plain -> b8
      b6: <- b12 b11
        v67 = Phi <int> v66 v41
        v44 = Add <int> v49 v43
        Plain -> b4
      b7: <- b4
        v47 = Store <mem> v4 v68 v81
        Plain -> b2
      b8: <- b5 b10
        v66 = Phi <int> v68 v82
        v82 = Phi <int> v19 v29
        v22 = Less <bool> v82 v21
        If v22 -> b9 b11
      b9: <- b8
        v25 = Eq <bool> v82 v24
        If v25 -> b12 b13
      b10: <- b13
        v29 = Add <int> v82 v28
        Plain -> b8
      b11: <- b8
        v32 = Add <int> v49 v49
        v33 = Add <int> v32 v49
        v34 = Add <int> v33 v49
        v35 = Add <int> v34 v49
        v36 = Add <int> v35 v49
        v37 = Add <int> v36 v49
        v38 = Add <int> v37 v49
        v39 = Add <int> v38 v49
        v40 = Add <int> v39 v49
        v41 = Add <int> v66 v40
        Plain -> b6
      b12: <- b9
        Plain -> b6
      b13: <- b9
        Plain -> b10
    
    AFTER CSE
    
    f_ssa <nil>
      b1:
        v1 = Arg <mem>
        v2 = SP <uint64>
        v4 = Addr <*int> {~r0} v2
        v13 = Zero <mem> [8] v4 v1
        v14 = Const <int>
        v15 = Const <int>
        v17 = Const <int> [3]
        v19 = Const <int>
        v21 = Const <int> [10]
        v24 = Const <int> [6]
        v28 = Const <int> [1]
        v43 = Const <int> [1]
        Plain -> b3
      b2: <- b7
        Exit v47
      b3: <- b1
        Plain -> b4
      b4: <- b3 b6
        v49 = Phi <int> v19 v44
        v68 = Phi <int> v19 v67
        v81 = Phi <mem> v13 v81
        v18 = Less <bool> v49 v17
        If v18 -> b5 b7
      b5: <- b4
        Plain -> b8
      b6: <- b12 b11
        v67 = Phi <int> v66 v41
        v44 = Add <int> v49 v43
        Plain -> b4
      b7: <- b4
        v47 = Store <mem> v4 v68 v81
        Plain -> b2
      b8: <- b5 b10
        v66 = Phi <int> v68 v49
        v82 = Phi <int> v19 v29
        v22 = Less <bool> v49 v21
        If v22 -> b9 b11
      b9: <- b8
        v25 = Eq <bool> v49 v24
        If v25 -> b12 b13
      b10: <- b13
        v29 = Add <int> v49 v43
        Plain -> b8
      b11: <- b8
        v32 = Add <int> v49 v49
        v33 = Add <int> v32 v49
        v34 = Add <int> v33 v49
        v35 = Add <int> v34 v49
        v36 = Add <int> v35 v49
        v37 = Add <int> v36 v49
        v38 = Add <int> v37 v49
        v39 = Add <int> v38 v49
        v40 = Add <int> v39 v49
        v41 = Add <int> v66 v40
        Plain -> b6
      b12: <- b9
        Plain -> b6
      b13: <- b9
        Plain -> b10
    
    Change-Id: I16fc4ec527ec63f24f7d0d79d1a4a59bf37269de
    Reviewed-on: https://go-review.googlesource.com/12444
    Reviewed-by: Keith Randall <khr@golang.org>

commit be1eb57a8b4f4728b1bfae18d7847ff111e2f46f
Author: Keith Randall <khr@golang.org>
Date:   Wed Jul 22 13:46:15 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement multiplies
    
    Use width-and-signed-specific multiply opcodes.
    Implement OMUL.
    A few other cleanups.
    
    Fixes #11467
    
    Change-Id: Ib0fe80a1a9b7208dbb8a2b6b652a478847f5d244
    Reviewed-on: https://go-review.googlesource.com/12540
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit d5297f726199fd6ef27db82d5d663db83d74e2b1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jul 22 20:40:18 2015 -0700

    [dev.ssa] cmd/compile: speed up liveness analysis
    
    This reduces the wall time to run test/slice3.go
    on my laptop from >10m to ~20s.
    
    This could perhaps be further reduced by using
    a worklist of blocks and/or implementing the
    suggestion in the comment in this CL, but at this
    point, it's fast enough that there is no need.
    
    Change-Id: I741119e0c8310051d7185459f78be8b89237b85b
    Reviewed-on: https://go-review.googlesource.com/12564
    Reviewed-by: Keith Randall <khr@golang.org>

commit e61e7c96f7d96b7da60769a0cfb3c86814284c80
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jul 22 19:19:40 2015 -0700

    [dev.ssa] cmd/compile: add some common binary ops
    
    Change-Id: I1af486a69960b9b66d5c2c9bbfcf7db6ef075d8c
    Reviewed-on: https://go-review.googlesource.com/12563
    Reviewed-by: Keith Randall <khr@golang.org>

commit e0ac5c53377a0145494a051330ea00e2995f9ed8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 18:42:45 2015 -0700

    [dev.ssa] cmd/compile: minor cleanup
    
    Change-Id: Ib33f3b1cfa09f410675d275e214d8ddc246c53c3
    Reviewed-on: https://go-review.googlesource.com/12548
    Reviewed-by: Keith Randall <khr@golang.org>

commit 61aa0953e542eb047f22905f84c7d627a35b8607
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 15:39:14 2015 -0700

    [dev.ssa] cmd/compile: implement control flow handling
    
    Add label and goto checks and improve test coverage.
    
    Implement OSWITCH and OSELECT.
    
    Implement OBREAK and OCONTINUE.
    
    Allow generation of code in dead blocks.
    
    Change-Id: Ibebb7c98b4b2344f46d38db7c9dce058c56beaac
    Reviewed-on: https://go-review.googlesource.com/12445
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3e7e519c367f4ab5b2d9f863302cd0946fe74800
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Fri Jul 17 12:26:35 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: generalize strength reduction.
    
    Handle multiplication with -1, 0, 3, 5, 9 and all powers of two.
    
    Change-Id: I8e87e7670dae389aebf6f446d7a56950cacb59e0
    Reviewed-on: https://go-review.googlesource.com/12350
    Reviewed-by: Keith Randall <khr@golang.org>

commit 954d5ada291a969b2933f43d9a8f53c28fcb0982
Author: Alexandru Moșoi <mosoi@google.com>
Date:   Tue Jul 21 16:58:18 2015 +0200

    [dev.ssa] cmd/compile/internal/ssa/gen: implement OMINUS
    
    Change-Id: Ibc645d6cf229ecc18af3549dd3750be9d7451abe
    Reviewed-on: https://go-review.googlesource.com/12472
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8fb635815355fe74fa0df1f096e8169504bd4f3e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 21 07:10:56 2015 -0700

    [dev.ssa] cmd/compile: don't generate zero values for ssa ops
    
    Shorter code, easier to read, no pointless empty slices.
    
    Change-Id: Id410364b4f6924b5665188af3373a5e914117c38
    Reviewed-on: https://go-review.googlesource.com/12480
    Reviewed-by: Keith Randall <khr@golang.org>

commit ac1935b3a7f1873a389e77586ed6e62e9ed5339e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 21 06:58:32 2015 -0700

    [dev.ssa] cmd/compile: fix build
    
    Bad rebase in CL 12439.
    
    Change-Id: I7ad359519c6274be37456b655f19bf0ca6ac6692
    Reviewed-on: https://go-review.googlesource.com/12449
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit a402b58e51e211bd6abdf2fd2f502ffa8facd1f4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 15:53:33 2015 -0700

    [dev.ssa] cmd/compile: implement "if SETEQ" branches
    
    Change-Id: I814fd0c2f1a622cca7dfd1b771f81de309a1904c
    Reviewed-on: https://go-review.googlesource.com/12441
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2574e4ac1cb4c78023801d355b1204cbc2a71f11
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 16 13:25:36 2015 -0600

    [dev.ssa] cmd/compile: call through to expr for expression statements
    
    Change-Id: I8625eff33f5a49dbaaec060c3fa067d7531193c4
    Reviewed-on: https://go-review.googlesource.com/12313
    Reviewed-by: Keith Randall <khr@golang.org>

commit 67bfd6956494173a0e2fa6b20bf61bf7b57589e6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 15:24:51 2015 -0700

    [dev.ssa] cmd/compile: fix stackalloc handling of zero-aligned variables
    
    Prior to this fix, a zero-aligned variable such as a flags
    variable would reset n to 0.
    
    While we're here, log the stack layout so that debugging
    and reading the generated assembly is easier.
    
    Change-Id: I18ef83ea95b6ea877c83f2e595e14c48c9ad7d84
    Reviewed-on: https://go-review.googlesource.com/12439
    Reviewed-by: Keith Randall <khr@golang.org>

commit 26f135d7c1a55cb7acaec1eac20e97b0f3b2cf10
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 15:22:34 2015 -0700

    [dev.ssa] cmd/compile: mark LoadReg8 and StoreReg8 of flags as unimplemented
    
    It is not clear to me what the right implementation is.
    LoadReg8 and StoreReg8 are introduced during regalloc,
    so after the amd64 rewrites. But implementing them
    in genValue seems silly.
    
    Change-Id: Ia708209c4604867bddcc0e5d75ecd17cf32f52c3
    Reviewed-on: https://go-review.googlesource.com/12437
    Reviewed-by: Keith Randall <khr@golang.org>

commit a794074da0800fda3cb204b20b3f73af2175383b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 15:21:49 2015 -0700

    [dev.ssa] cmd/compile: implement genValue for AMD64SETxx
    
    Change-Id: I591f2c0465263dcdeef46920aabf1bbb8e7ac5c0
    Reviewed-on: https://go-review.googlesource.com/12436
    Reviewed-by: Keith Randall <khr@golang.org>

commit 983bc8d1a2d7be649f921a69b2d8e72a5ec032f4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 17 16:47:43 2015 +0000

    Revert "[dev.ssa] cmd/compile: don't Compile if Unimplemented"
    
    This reverts commit 766bcc92a5b693f336deffc347be52fe68af884a.
    
    Change-Id: I55413c1aa80d82c856a3ea89b4ffccf80fb58013
    Reviewed-on: https://go-review.googlesource.com/12361
    Reviewed-by: Keith Randall <khr@golang.org>

commit 67fdb0de8656f7c7b76afe8eff614da7bc13b221
Author: Keith Randall <khr@golang.org>
Date:   Sun Jul 19 15:48:20 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: use width and sign specific opcodes
    
    Bake the bit width and signedness into opcodes.
    Pro: Rewrite rules become easier.  Less chance for confusion.
    Con: Lots more opcodes.
    
    Let me know what you think.  I'm leaning towards this, but I could be
    convinced otherwise if people think this is too ugly.
    
    Update #11467
    
    Change-Id: Icf1b894268cdf73515877bb123839800d97b9df9
    Reviewed-on: https://go-review.googlesource.com/12362
    Reviewed-by: Alan Donovan <adonovan@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 8043f450c170a90de9a04bd801b4f3189ea613ea
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 15:24:03 2015 -0700

    [dev.ssa] cmd/compile: fix test verb
    
    The verb doesn't do anything, but if/when we move
    these to the test directory, having it be right
    will be one fewer thing to remember.
    
    Change-Id: Ibf0280d7cc14bf48927e25215de6b91c111983d9
    Reviewed-on: https://go-review.googlesource.com/12438
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 21bd483c4ad244b53d4c2d9585787c81f2ce3107
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 15:30:52 2015 -0700

    [dev.ssa] cmd/compile: refactor out zero value creation
    
    This will be used in a subsequent commit.
    
    Change-Id: I43eca21f4692d99e164c9f6be0760597c46e6a26
    Reviewed-on: https://go-review.googlesource.com/12440
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ffbf209a7c733ef519abbe9a5c47a8b1c73814af
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 20 13:00:28 2015 -0700

    [dev.ssa] test: gofmt {goto,label,label1}.go
    
    Change-Id: I971d0c93632e39aad4e2ba1862f085df820baf8b
    Reviewed-on: https://go-review.googlesource.com/12431
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f421735bb4a139ecd59afc78b2b98df6327464cf
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 17 10:45:48 2015 -0600

    [dev.ssa] cmd/compile: handle OpCopy loops in rewrite
    
    Change-Id: Icbaad6e5cbfc5430a651538fe90c0a9ee664faf4
    Reviewed-on: https://go-review.googlesource.com/12360
    Reviewed-by: Keith Randall <khr@golang.org>

commit c1593da817c3a557b5ce8ef41def903a619f6daa
Author: Keith Randall <khr@golang.org>
Date:   Thu Jul 16 14:20:40 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa/gen: Fix *64 strength reduction
    
    *64 is <<6, not <<5.
    
    Change-Id: I2eb7e113d5003b2c77fbd3abc3defc4d98976a5e
    Reviewed-on: https://go-review.googlesource.com/12323
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3dcc424be70b9d1824f756ab81f97508ae1a7738
Author: Keith Randall <khr@golang.org>
Date:   Tue Jul 14 13:20:08 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: compute outarg size correctly
    
    Keep track of the outargs size needed at each call.
    Compute the size of the outargs section of the stack frame.  It's just
    the max of the outargs size at all the callsites in the function.
    
    Change-Id: I3d0640f654f01307633b1a5f75bab16e211ea6c0
    Reviewed-on: https://go-review.googlesource.com/12178
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 8adc905a10ffe26204547c95b6d3abe5bf6f9053
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 16 13:12:57 2015 -0600

    [dev.ssa] cmd/compile: implement lowering of constant bools
    
    Change-Id: Ia56ee9798eefe123d4da04138a6a559d2c25ddf3
    Reviewed-on: https://go-review.googlesource.com/12312
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 766bcc92a5b693f336deffc347be52fe68af884a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 16 12:45:22 2015 -0600

    [dev.ssa] cmd/compile: don't Compile if Unimplemented
    
    If we've already hit an Unimplemented, there may be important
    SSA invariants that do not hold and which could cause
    ssa.Compile to hang or spin.
    
    While we're here, make detected dependency cycles stop execution.
    
    Change-Id: Ic7d4eea659e1fe3f2c9b3e8a4eee5567494f46ad
    Reviewed-on: https://go-review.googlesource.com/12310
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cd7e0594963fdd77c9baba60677c68c6e218dad6
Author: Keith Randall <khr@golang.org>
Date:   Wed Jul 15 21:33:49 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: implement ODOT
    
    Implement ODOT.  Similar to ArrayIndex, StructSelect selects a field
    out of a larger Value.
    
    We may need more ways to rewrite StructSelect, but StructSelect/Load
    is the typical way it is used.
    
    Change-Id: Ida7b8aab3298f4754eaf9fee733974cf8736e45d
    Reviewed-on: https://go-review.googlesource.com/12265
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 078ba138d370d1752e78c558e795ea9d01d6d1db
Author: Todd Neal <todd@tneal.org>
Date:   Sun Jul 5 18:23:25 2015 -0500

    [dev.ssa] cmd/compile/internal : Implement Lengauer-Tarjan for dominators
    
    Implements the simple Lengauer-Tarjan algorithm for dominator
    and post-dominator calculation.
    
    benchmark                           old ns/op     new ns/op     delta
    BenchmarkDominatorsLinear-8         1403862       1292741       -7.92%
    BenchmarkDominatorsFwdBack-8        1270633       1428285       +12.41%
    BenchmarkDominatorsManyPred-8       225932354     1530886       -99.32%
    BenchmarkDominatorsMaxPred-8        445994225     1393612       -99.69%
    BenchmarkDominatorsMaxPredVal-8     447235248     1246899       -99.72%
    BenchmarkNilCheckDeep1-8            829           1259          +51.87%
    BenchmarkNilCheckDeep10-8           2199          2397          +9.00%
    BenchmarkNilCheckDeep100-8          57325         29405         -48.70%
    BenchmarkNilCheckDeep1000-8         6625837       2933151       -55.73%
    BenchmarkNilCheckDeep10000-8        763559787     319105541     -58.21%
    
    benchmark                           old MB/s     new MB/s     speedup
    BenchmarkDominatorsLinear-8         7.12         7.74         1.09x
    BenchmarkDominatorsFwdBack-8        7.87         7.00         0.89x
    BenchmarkDominatorsManyPred-8       0.04         6.53         163.25x
    BenchmarkDominatorsMaxPred-8        0.02         7.18         359.00x
    BenchmarkDominatorsMaxPredVal-8     0.02         8.02         401.00x
    BenchmarkNilCheckDeep1-8            1.21         0.79         0.65x
    BenchmarkNilCheckDeep10-8           4.55         4.17         0.92x
    BenchmarkNilCheckDeep100-8          1.74         3.40         1.95x
    BenchmarkNilCheckDeep1000-8         0.15         0.34         2.27x
    BenchmarkNilCheckDeep10000-8        0.01         0.03         3.00x
    
    Change-Id: Icec3d774422a9bc64914779804c8c0ab73aa72bf
    Reviewed-on: https://go-review.googlesource.com/11971
    Reviewed-by: Keith Randall <khr@golang.org>

commit b383de2ef9d08882c331b4877ce9d5a69f8f97b2
Author: Todd Neal <todd@tneal.org>
Date:   Mon Jul 13 21:22:16 2015 -0500

    [dev.ssa] cmd/compile: implement OIND
    
    Change-Id: I15aee8095e6388822e2222f1995fe2278ac956ca
    Reviewed-on: https://go-review.googlesource.com/12129
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 4e204b42f5b66ea36f0421098a42addc7c2ba6c7
Author: Keith Randall <khr@golang.org>
Date:   Mon Jul 13 23:52:59 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: ensure Phi ops are scheduled first
    
    Phi ops should always be scheduled first.  They have the semantics
    of all happening simultaneously at the start of the block.  The regalloc
    phase assumes all the phis will appear first.
    
    Change-Id: I30291e1fa384a0819205218f1d1ec3aef6d538dd
    Reviewed-on: https://go-review.googlesource.com/12154
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 337b7e7e3bb3a6a141d4aa10f8ed79ee33b6f7e9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jul 13 17:30:42 2015 -0600

    [dev.ssa] cmd/compile: handle OLITERAL nil expressions
    
    Change-Id: I02b8fb277b486eaf0916ddcd8f28c062d4022d4b
    Reviewed-on: https://go-review.googlesource.com/12150
    Reviewed-by: Keith Randall <khr@golang.org>

commit c3c84a254483523e686d4b9a3bc30521a9937238
Author: Keith Randall <khr@golang.org>
Date:   Mon Jul 13 15:55:37 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: Implement ODOT and ODOTPTR in addr.
    
    Change-Id: If8a9d5901fa2141d16b1c8d001761ea62bc23207
    Reviewed-on: https://go-review.googlesource.com/12141
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b06961b4f0f4786fb6b92e472d4a056bed650c66
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jul 13 15:46:53 2015 -0600

    [dev.ssa] cmd/compile: treat unsafe.Pointer as a pointer
    
    Change-Id: I3f3ac3055c93858894b8852603d79592bbc1696b
    Reviewed-on: https://go-review.googlesource.com/12140
    Reviewed-by: Keith Randall <khr@golang.org>

commit a92bd662829384203ec70df8c93bb542b0921553
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jul 13 14:01:08 2015 -0600

    [dev.ssa] cmd/compile: support zero type for *T
    
    Change-Id: I4c9bcea01e2c4333c2a3592b66f1da9f424747a4
    Reviewed-on: https://go-review.googlesource.com/12130
    Reviewed-by: Keith Randall <khr@golang.org>

commit 50e59bb9c8c8cdb0febc224e2c2c6716ea11bd9b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jul 13 14:57:16 2015 -0600

    [dev.ssa] cmd/compile/internal/gc: fix tests on non-amd64
    
    Change-Id: Ibd6a59db2d5feea41a21fbea5c1a7fdd49238aa8
    Reviewed-on: https://go-review.googlesource.com/12131
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit e81671115c0857d3286e9331870ec9993e81a1a7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Jul 10 12:58:53 2015 -0600

    [dev.ssa] cmd/compile: OANDAND, OOROR
    
    Joint hacking with josharian. Hints from matloob and Todd Neal.
    
    Now with tests, and OROR.
    
    Change-Id: Iff8826fde475691fb72a3eea7396a640b6274af9
    Reviewed-on: https://go-review.googlesource.com/12041
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7e4c06dad065d1440fe8fcfa8e97702c88e1374e
Author: Keith Randall <khr@golang.org>
Date:   Sun Jul 12 11:52:09 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: handle _ label correctly
    
    An empty label statement can just be ignored, as it cannot
    be the target of any gotos.
    
    Tests are already in test/fixedbugs/issue7538*.go
    
    Fixes #11589
    Fixes #11593
    
    Change-Id: Iadcd639e7200ce16aa40fd7fa3eaf82522513e82
    Reviewed-on: https://go-review.googlesource.com/12093
    Reviewed-by: Daniel Morsing <daniel.morsing@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4c521ac8f23e98898a2e1603a6e7a23648be27eb
Author: Daniel Morsing <daniel.morsing@gmail.com>
Date:   Sun Jul 12 14:37:01 2015 +0100

    [dev.ssa] cmd/compile/internal/gc: implement more no-op statements
    
    Change-Id: I26c268f46dcffe39912b8c92ce9abb875310934f
    Reviewed-on: https://go-review.googlesource.com/12100
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit accf9b5951f14a7a62cfe9ec5c59d6dc880c1bba
Author: Keith Randall <khr@golang.org>
Date:   Sat Jul 11 15:43:35 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: comment why replacing phi with copy is ok
    
    Change-Id: I3e2e8862f2fde4349923016b97e8330b0d494e0e
    Reviewed-on: https://go-review.googlesource.com/12092
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit d9c72d739c87538b0854e26e6d73470784f6ea3e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Jul 10 11:25:48 2015 -0600

    [dev.ssa] cmd/compile: implement ONOT
    
    Co-hacking with josharian at Gophercon.
    
    Change-Id: Ia59dfab676c6ed598c2c25483439cd1395a4ea87
    Reviewed-on: https://go-review.googlesource.com/12029
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 7af53d98cf720b97f9f941b6747405c5a924eb55
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Jul 10 10:47:28 2015 -0600

    [dev.ssa] cmd/compile: implement OCAP
    
    And dependent fixes and misc cleanup.
    
    Co-hacking with josharian at Gophercon.
    
    Change-Id: Ib85dc13b303929017eb0a4d2fc2f603485f7479b
    Reviewed-on: https://go-review.googlesource.com/12027
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 050ce4390aa16b03e7272e22e79de165589319b5
Author: Keith Randall <khr@golang.org>
Date:   Sat Jul 11 14:41:22 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Phi inputs from dead blocks are not live
    
    Fixes #11676
    
    Change-Id: I941f951633c89bb1454ce6d1d1b4124d46a7d9dd
    Reviewed-on: https://go-review.googlesource.com/12091
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7a982e3c49c4fc16c2d51bf6e892cb2dd19405be
Author: ALTree <alb.donizetti@gmail.com>
Date:   Sat Jul 11 16:30:24 2015 +0200

    [dev.ssa] cmd/compile/ssa: Replace less-or-equal with equal in len comparison with zero
    
    Since the spec guarantees than 0 <= len always:
    
    https://golang.org/ref/spec#Length_and_capacity
    
    replace len(...) <= 0 check with len(...) == 0 check
    
    Change-Id: I5517a9cb6b190f0b1ee314a67487477435f3b409
    Reviewed-on: https://go-review.googlesource.com/12034
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 06f329220f63dab5f09cdef8bfd42bd6dc6c3a68
Author: Keith Randall <khr@golang.org>
Date:   Sat Jul 11 11:39:12 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Use Ninit from expressions
    
    If an expression has an Ninit list, generate code for it.
    Required for (at least) OANDAND.
    
    Change-Id: I94c9e22e2a76955736f4a8e574d92711419c5e5c
    Reviewed-on: https://go-review.googlesource.com/12072
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9b048527db4122732795211291a02357d995c898
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 9 21:24:12 2015 -0600

    [dev.ssa] cmd/compile/ssa: handle nested dead blocks
    
    removePredecessor can change which blocks are live.
    However, it cannot remove dead blocks from the function's
    slice of blocks because removePredecessor may have been
    called from within a function doing a walk of the blocks.
    
    CL 11879 did not handle this correctly and broke the build.
    
    To fix this, mark the block as dead but leave its actual
    removal for a deadcode pass. Blocks that are dead must have
    no successors, predecessors, values, or control values,
    so they will generally be ignored by other passes.
    To be safe, we add a deadcode pass after the opt pass,
    which is the only other pass that calls removePredecessor.
    
    Two alternatives that I considered and discarded:
    
    (1) Make all call sites aware of the fact that removePrecessor
    might make arbitrary changes to the list of blocks. This
    will needlessly complicate callers.
    
    (2) Handle the things that can go wrong in practice when
    we encounter a dead-but-not-removed block. CL 11930 takes
    this approach (and the tests are stolen from that CL).
    However, this is just patching over the problem.
    
    Change-Id: Icf0687b0a8148ce5e96b2988b668804411b05bd8
    Reviewed-on: https://go-review.googlesource.com/12004
    Reviewed-by: Todd Neal <todd@tneal.org>
    Reviewed-by: Michael Matloob <michaelmatloob@gmail.com>

commit 9201c86b57b9dcbf3da09028a17be00263762967
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 10 09:31:28 2015 -0600

    [dev.ssa] cmd/compile/ssa: print lazily
    
    Reduces 'go run run.go 64bit.go' from 23s to 8s on my machine.
    
    Change-Id: Ie5b642d0abb56e8eb3899d69472bc88a85a1c985
    Reviewed-on: https://go-review.googlesource.com/12023
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 517386832582a54e6b4170252e52f1a13c001e83
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 6 15:29:39 2015 -0700

    [dev.ssa] cmd/compile/ssa: place for loop incr in a separate block
    
    This is a prerequisite for implementing break and continue;
    blocks ending in break or continue need to have
    the increment block as a successor.
    
    While we're here, implement for loops with no condition.
    
    Change-Id: I85d8ba020628d805bfd0bd583dfd16e1be6f6fae
    Reviewed-on: https://go-review.googlesource.com/11941
    Reviewed-by: Keith Randall <khr@golang.org>

commit 41dafe6ecc358f294e0e91b739b352858d0c01b4
Author: Todd Neal <todd@tneal.org>
Date:   Thu Jun 25 23:13:57 2015 -0500

    [dev.ssa] cmd/compile/ssa: dominator tests and benchmarks
    
    This change has some tests verifying functionality and an assortment of
    benchmarks of various block lists. It modifies NewBlock to allocate in
    contiguous blocks improving the performance of intersect() for extremely
    large graphs by 30-40%.
    
    benchmark                           old ns/op      new ns/op     delta
    BenchmarkDominatorsLinear-8         1185619        901154        -23.99%
    BenchmarkDominatorsFwdBack-8        1302138        863537        -33.68%
    BenchmarkDominatorsManyPred-8       404670521      247450911     -38.85%
    BenchmarkDominatorsMaxPred-8        455809002      471675119     +3.48%
    BenchmarkDominatorsMaxPredVal-8     819315864      468257300     -42.85%
    
    BenchmarkNilCheckDeep1-8            766            706           -7.83%
    BenchmarkNilCheckDeep10-8           2553           2209          -13.47%
    BenchmarkNilCheckDeep100-8          58606          57545         -1.81%
    BenchmarkNilCheckDeep1000-8         7753012        8025750       +3.52%
    BenchmarkNilCheckDeep10000-8        1224165946     789995184     -35.47%
    
    Change-Id: Id3d6bc9cb1138e8177934441073ac7873ddf7ade
    Reviewed-on: https://go-review.googlesource.com/11716
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7d10a2c04a28ac09448a3a890141a56870f86232
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 6 14:13:17 2015 -0700

    [dev.ssa] cmd/compile/ssa: implement constant booleans
    
    The removal of if false { ... } blocks in the opt
    pass exposed that removePredecessor needed
    to do more cleaning, on pain of failing later
    consistency checks.
    
    Change-Id: I45d4ff7e1f7f1486fdd99f867867ce6ea006a288
    Reviewed-on: https://go-review.googlesource.com/11879
    Reviewed-by: Keith Randall <khr@golang.org>

commit cc3f031a319195928e2dbf2b65bff59e8d9226ca
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 3 18:41:28 2015 -0700

    [dev.ssa] cmd/compile/ssa: implement OLEN
    
    Change-Id: Ie23b13142fd820d7071a348a8370175e58b76d64
    Reviewed-on: https://go-review.googlesource.com/11878
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6c14059e65b180e3aaf34774b67ddffa461cf3c2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jul 4 09:07:54 2015 -0700

    [dev.ssa] cmd/compile/ssa: handle loops that don't loop
    
    Loops such as
    
    func f(c chan int) int {
            for x := range c {
                    return x
            }
            return 0
    }
    
    don't loop. Remove the assumption that they must.
    
    Partly fixes the build.
    
    Change-Id: I766cebeec8e36d14512bea26f54c06c8eaf95e23
    Reviewed-on: https://go-review.googlesource.com/11876
    Reviewed-by: Keith Randall <khr@golang.org>

commit d465f049cd364c3e445fe189ae0fac0dffda2a67
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jul 4 13:01:04 2015 -0700

    [dev.ssa] cmd/compile/ssa: stop compilation immediately on leading goto
    
    There is clearly work to do to fix labels and gotos.
    The compiler currently hangs on ken/label.go.
    
    For the moment, stop the bleeding.
    
    Fixes the build.
    
    Change-Id: Ib68360d583cf53e1a8ca4acff50644b570382728
    Reviewed-on: https://go-review.googlesource.com/11877
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0a133cddd5f74760dac2171788cee29bada83ca7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 3 20:28:56 2015 -0700

    [dev.ssa] cmd/compile/ssa: mark race/nodfp as unimplemented
    
    Partly fixes the build, by punting.
    Other things have broken in the meantime.
    
    Change-Id: I1e2b8310057cbbbd9ffc501ef51e744690e00726
    Reviewed-on: https://go-review.googlesource.com/11875
    Reviewed-by: Keith Randall <khr@golang.org>

commit 1edf4897df1000c240682ffa92fc4649c1c4bfb3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 3 20:29:11 2015 -0700

    [dev.ssa] cmd/compile/ssa: add Logf state helper
    
    Change-Id: I4e4200b0fa847a1ff8a8b7d1e318bbc1c5e26b5b
    Reviewed-on: https://go-review.googlesource.com/11874
    Reviewed-by: Keith Randall <khr@golang.org>

commit be2a3e2ac9de4a5f3587c3a4e150e700f0216347
Author: Daniel Morsing <daniel.morsing@gmail.com>
Date:   Wed Jul 1 20:37:25 2015 +0100

    [dev.ssa] cmd/compile/internal/gc: mark unimplemented variable classes as such
    
    Doesn't fix the build entirely, but does make it get to the race
    detector tests.
    
    Change-Id: Ie986d52374936855b7ee975dc68742306527eb15
    Reviewed-on: https://go-review.googlesource.com/11835
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 596ddf4368bcaac06d80a282bc968bc986d6bd7c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jun 29 11:56:28 2015 -0700

    [dev.ssa] cmd/compile/ssa: add checks for nil args in values
    
    These additional checks were useful in
    tracking down the broken build (CL 11238).
    
    This CL does not fix the build, sadly.
    
    Change-Id: I34de3bed223f450aaa97c1cadaba2e4e5850050b
    Reviewed-on: https://go-review.googlesource.com/11681
    Reviewed-by: Keith Randall <khr@golang.org>

commit 66b47812eb2753eb874a622d8820dee351c4ffeb
Author: Daniel Morsing <daniel.morsing@gmail.com>
Date:   Sat Jun 27 15:45:20 2015 +0100

    [dev.ssa] cmd/compile/internal/ssa: Initial implementation of memory zeroing
    
    This will make it possible for us to start implementing interfaces
    and other stack allocated types which are more than one machine word.
    
    Change-Id: I52b187a791cf1919cb70ed6dabdc9f57b317ea83
    Reviewed-on: https://go-review.googlesource.com/11631
    Reviewed-by: Keith Randall <khr@golang.org>

commit c9372619f2b6cfc7edff790b20b67e2ce5d8e044
Author: Keith Randall <khr@golang.org>
Date:   Tue Jun 30 21:16:51 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: fix stringsym call
    
    Forgot to add this in the tip merge.
    
    Change-Id: I0e5a2681133f4ae7a7c360ae2c2d71d46420c693
    Reviewed-on: https://go-review.googlesource.com/11793
    Reviewed-by: Keith Randall <khr@golang.org>

commit 90b0a932441163a7c20005a8640cd3ed1155a4ca
Merge: 46815b9 6fe9c4a
Author: Keith Randall <khr@golang.org>
Date:   Tue Jun 30 20:51:17 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into ssamerge
    
    Semi-regular merge from tip into ssa branch.
    
    Change-Id: I9cbe23f566410496d4ceb97c1435e2df7f2b56ec

commit 46815b9f6236771b85f85e3105e37e65937d03aa
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 24 17:48:22 2015 -0700

    [dev.ssa] cmd/compile/ssa: add comparison ops
    
    Increase SSA coverage of functions in the
    standard library from 20.79% to 27.81%.
    
    The most significant unimplemented items are now:
    
     10.16%  2597 SSA unimplemented: zero for type error not implemented
      8.44%  2157 SSA unimplemented: addr: bad op DOTPTR
      7.98%  2039 SSA unimplemented: unhandled OLITERAL 7
      6.29%  1607 SSA unimplemented: unhandled expr OROR
      4.73%  1209 SSA unimplemented: unhandled expr LEN
      4.55%  1163 SSA unimplemented: unhandled expr LROT
      3.42%   874 SSA unimplemented: unhandled OLITERAL 6
      2.46%   629 SSA unimplemented: unhandled expr DOT
      2.41%   615 SSA unimplemented: zero for type []byte not implemented
      2.02%   516 SSA unimplemented: unhandled stmt CALLMETH
      1.90%   486 SSA unimplemented: unhandled expr ANDAND
      1.79%   458 SSA unimplemented: unhandled expr CALLINTER
      1.69%   433 SSA unimplemented: unhandled stmt SWITCH
      1.67%   428 SSA unimplemented: unhandled expr CALLMETH
      1.67%   426 SSA unimplemented: unhandled expr CLOSUREVAR
    
    Change-Id: I40959b22993c4f70784b4eca472cae752347879c
    Reviewed-on: https://go-review.googlesource.com/11452
    Reviewed-by: Keith Randall <khr@golang.org>

commit 1746e711ad7429248af4d17a57413aeaab0c2095
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jun 25 14:04:55 2015 -0700

    [dev.ssa] cmd/compile/ssa: add nilcheckelim benchmarks
    
    These benchmarks demonstrate that
    the nilcheckelim pass is roughly O(n^2):
    
    BenchmarkNilCheckDeep1           2000000               741 ns/op           1.35 MB/s
    BenchmarkNilCheckDeep10          1000000              2237 ns/op           4.47 MB/s
    BenchmarkNilCheckDeep100           20000             60713 ns/op           1.65 MB/s
    BenchmarkNilCheckDeep1000            200           7925198 ns/op           0.13 MB/s
    BenchmarkNilCheckDeep10000             1        1220104252 ns/op           0.01 MB/s
    
    Profiling suggests that building the
    dominator tree is also O(n^2),
    and before size factors take over,
    considerably more expensive than nilcheckelim.
    
    Change-Id: If966b38ec52243a25f355dab871300d29db02e16
    Reviewed-on: https://go-review.googlesource.com/11520
    Reviewed-by: Keith Randall <khr@golang.org>

commit d9a704cd40e8d248b473a831f099d8d4ca4c409b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 24 14:34:28 2015 -0700

    [dev.ssa] cmd/compile/ssa: refine type equality in cse
    
    The correct way to compare gc.Types is Eqtype,
    rather than pointer equality.
    Introduce an Equal method for ssa.Type to allow
    us to use it.
    
    In the cse pass, use a type's string to build
    the coarse partition, and then use Type.Equal
    during refinement.
    
    This lets the cse pass do a better job.
    In the ~20% of the standard library that SSA
    can compile, the number of common subexpressions
    recognized by the cse pass increases from
    27,550 to 32,199 (+17%). The number of nil checks
    eliminated increases from 75 to 115 (+50%).
    
    Change-Id: I0bdbfcf613ca6bc2ec987eb19b6b1217b51f3008
    Reviewed-on: https://go-review.googlesource.com/11451
    Reviewed-by: Keith Randall <khr@golang.org>

commit dbd83c4464ed37b350deae313eddf7babc3e4c41
Author: Keith Randall <khr@golang.org>
Date:   Sun Jun 28 06:08:50 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: Fix constant shift generation
    
    Change-Id: Ib142185de3f6e4d2f4983511c063492529d8fb8a
    Reviewed-on: https://go-review.googlesource.com/11656
    Reviewed-by: Michael Matloob <michaelmatloob@gmail.com>

commit 7b858018b396b9a4d491ba112122605c0122a2e0
Author: Keith Randall <khr@golang.org>
Date:   Thu Jun 25 20:01:45 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: Interpret init list of OFOR conditions
    
    Fixes build.  Some variables are initialized in this list.
    
    Q: How do we tell that we've included all the required Ninit lists?
    
    Change-Id: I96b3f03c291440130303a2b95a651e97e4d8113c
    Reviewed-on: https://go-review.googlesource.com/11542
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 929c2aa2aec07ec774683da56758d885176cff81
Author: Todd Neal <todd@tneal.org>
Date:   Thu Jun 25 18:03:50 2015 -0500

    [dev.ssa] cmd/compile/ssa: fix unit tests
    
    Fix out of bounds array panic due to CL 11238.
    
    Change-Id: Id8a46f1ee20cb1f46775d0c04cc4944d729dfceb
    Reviewed-on: https://go-review.googlesource.com/11540
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8c46aa54817063a39dc25bad343d6322e65f8598
Author: Keith Randall <khr@golang.org>
Date:   Fri Jun 19 21:02:28 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Handle variables correctly
    
    Use *Node of type ONAME instead of string as the key for variable maps.
    This will prevent aliasing between two identically named but
    differently scoped variables.
    
    Introduce an Aux value that encodes the offset of a variable
    from a base pointer (either global base pointer or stack pointer).
    
    Allow LEAQ and derivatives (MOVQ, etc.) to also have such an Aux field.
    
    Allocate space for AUTO variables in stackalloc.
    
    Change-Id: Ibdccdaea4bbc63a1f4882959ac374f2b467e3acd
    Reviewed-on: https://go-review.googlesource.com/11238
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 37ddc270ca5360ccde000fd373d49b3450ee8e6e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 24 14:03:39 2015 -0700

    [dev.ssa] cmd/compile/ssa: add -f suffix to logging methods
    
    Requested in CL 11380.
    
    Change-Id: Icf0d23fb8d383c76272401e363cc9b2169d11403
    Reviewed-on: https://go-review.googlesource.com/11450
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit d779b20cd2f435709cfbbbfa8af88f5e556866d8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jun 23 16:44:06 2015 -0700

    [dev.ssa] cmd/compile/ssa: improve comments, logging, and debug output
    
    Change-Id: Id949db82ddaf802c1aa245a337081d4d46fd914f
    Reviewed-on: https://go-review.googlesource.com/11380
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 44be0e9c601cbb40a2ac8cf74cb0c57b1292825d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 24 13:29:05 2015 -0700

    [dev.ssa] cmd/compile/ssa: fix build
    
    Somehow I missed this in CL 11160.
    Without it, all.bash fails on fixedbugs/bug303.go.
    
    The right fix is probably to discard the variable
    and keep going, even though the code is dead.
    
    For now, defer the decision by declaring
    such situations unimplemented and get the build
    fixed.
    
    Change-Id: I679197f780c7a3d3eb7d05e91c86a4cdc3b70131
    Reviewed-on: https://go-review.googlesource.com/11440
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2a846d2bd36a74d971ad6d009a05d2ca64bba8a9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 3 12:31:47 2015 -0700

    [dev.ssa] cmd/compile/ssa: add nilcheckelim pass
    
    The nilcheckelim pass eliminates unnecessary nil checks.
    The initial implementation removes redundant nil checks.
    See the comments in nilcheck.go for ideas for future
    improvements.
    
    The efficacy of the cse pass has a significant impact
    on this efficacy of this pass.
    
    There are 886 nil checks in the parts of the standard
    library that SSA can currently compile (~20%).
    
    This pass eliminates 75 (~8.5%) of them.
    
    As a data point, with a more aggressive but unsound
    cse pass that treats many more types as identical,
    this pass eliminates 115 (~13%) of the nil checks.
    
    Change-Id: I13e567a39f5f6909fc33434d55c17a7e3884a704
    Reviewed-on: https://go-review.googlesource.com/11430
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 8c6abfeacb27f1bcce8fb01f7da95950590943e3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jun 12 11:01:13 2015 -0700

    [dev.ssa] cmd/compile/ssa: separate logging, work in progress, and fatal errors
    
    The SSA implementation logs for three purposes:
    
            * debug logging
            * fatal errors
            * unimplemented features
    
    Separating these three uses lets us attempt an SSA
    implementation for all functions, not just
    _ssa functions. This turns the entire standard
    library into a compilation test, and makes it
    easy to figure out things like
    "how much coverage does SSA have now" and
    "what should we do next to get more coverage?".
    
    Functions called _ssa are still special.
    They log profusely by default and
    the output of the SSA implementation
    is used. For all other functions,
    logging is off, and the implementation
    is built and discarded, due to lack of
    support for the runtime.
    
    While we're here, fix a few minor bugs and
    add some extra Unimplementeds to allow
    all.bash to pass.
    
    As of now, SSA handles 20.79% of the functions
    in the standard library (689 of 3314).
    
    The top missing features are:
    
     10.03%  2597 SSA unimplemented: zero for type error not implemented
      7.79%  2016 SSA unimplemented: addr: bad op DOTPTR
      7.33%  1898 SSA unimplemented: unhandled expr EQ
      6.10%  1579 SSA unimplemented: unhandled expr OROR
      4.91%  1271 SSA unimplemented: unhandled expr NE
      4.49%  1163 SSA unimplemented: unhandled expr LROT
      4.00%  1036 SSA unimplemented: unhandled expr LEN
      3.56%   923 SSA unimplemented: unhandled stmt CALLFUNC
      2.37%   615 SSA unimplemented: zero for type []byte not implemented
      1.90%   492 SSA unimplemented: unhandled stmt CALLMETH
      1.74%   450 SSA unimplemented: unhandled expr CALLINTER
      1.74%   450 SSA unimplemented: unhandled expr DOT
      1.71%   444 SSA unimplemented: unhandled expr ANDAND
      1.65%   426 SSA unimplemented: unhandled expr CLOSUREVAR
      1.54%   400 SSA unimplemented: unhandled expr CALLMETH
      1.51%   390 SSA unimplemented: unhandled stmt SWITCH
      1.47%   380 SSA unimplemented: unhandled expr CONV
      1.33%   345 SSA unimplemented: addr: bad op *
      1.30%   336 SSA unimplemented: unhandled OLITERAL 6
    
    Change-Id: I4ca07951e276714dc13c31de28640aead17a1be7
    Reviewed-on: https://go-review.googlesource.com/11160
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2aabacdb5aa4176f3c2916a096d8ac6934113562
Author: Michael Matloob <matloob@google.com>
Date:   Tue Jun 16 17:58:03 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: support CALLFUNC as statement
    
    I don't have strong understanding of the AST structure, so I'm
    not sure if this is the right way to handle function call statements.
    
    Change-Id: Ib526f667ab483b32d9fd17da800b5d6f4b26c4c9
    Reviewed-on: https://go-review.googlesource.com/11139
    Reviewed-by: Keith Randall <khr@golang.org>

commit 73054f572940c8d4c905f2ba996a3c6aaeeb28df
Author: Michael Matloob <matloob@google.com>
Date:   Sun Jun 14 11:38:46 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: adds for 8,16,32 bit ints
    
    Change-Id: I33025a4a41fd91f6ee317d33a6eebf27fa00ab51
    Reviewed-on: https://go-review.googlesource.com/11115
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0991ec454b8a53bf11c4c01f75dd2fa7a34362cc
Author: Michael Matloob <matloob@google.com>
Date:   Sun Jun 14 09:52:13 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: set line in newValue variants
    
    This CL sets line numbers on Values in the newValue variants
    introduced in cl/10929.
    
    Change-Id: Ibd15bc90631a1e948177878ea4191d995e8bb19b
    Reviewed-on: https://go-review.googlesource.com/11090
    Reviewed-by: Keith Randall <khr@golang.org>

commit a5c3b6642bb01a96b59db1e55a3479549fbcca08
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jun 16 16:16:23 2015 -0700

    [dev.ssa] cmd/compile/ssa: fix string compilation
    
    Compilation of f_ssa was broken by CL 10929.
    
    This CL does not include tests because
    I have a work in progress CL that will catch
    this and much more.
    
    package p
    
    func f_ssa() string {
            return "ABC"
    }
    
    Change-Id: I0ce0e905e4d30ec206cce808da406b9b7f0f38e9
    Reviewed-on: https://go-review.googlesource.com/11136
    Reviewed-by: Keith Randall <khr@golang.org>

commit 50ceef26e6517a5785433cd73b9eda30159d03bb
Author: Keith Randall <khr@golang.org>
Date:   Tue Jun 16 13:33:32 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Fix bootstrap of ssa codegen
    
    The cmd/compile/internal/ssa/gen directory can't depend on cmd/internal/gc
    because that package doesn't exist in go1.4.  Use strings instead of
    constants from that package.
    
    The asm fields seem somewhat redundant to the opcode names we
    conventionally use.  Maybe we can just trim the lowercase from the end
    of the op name?  At least by default?
    
    Change-Id: I96e8cda44833763951709e2721588fbd34580989
    Reviewed-on: https://go-review.googlesource.com/11129
    Reviewed-by: Michael Matloob <michaelmatloob@gmail.com>

commit 703ef06039c031d99b7420d984fded0bef11b14d
Author: Michael Matloob <matloob@google.com>
Date:   Tue Jun 16 11:11:16 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: reduce genValue redundancy
    
    Add an asm field to opcodeTable containing the Prog's as field.
    Then instructions that fill the Prog the same way can be collapsed
    into a single switch case.
    
    I'm still thinking of a better way to reduce redundancy, but
    I think this might be a good temporary solution to prevent duplication
    from getting out of control. What do you think?
    
    Change-Id: I0c4a0992741f908bd357ee2707edb82e76e4ce61
    Reviewed-on: https://go-review.googlesource.com/11130
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3b817ef8f8e377e741ffa94ff3a5154bebe206cd
Author: Daniel Morsing <daniel.morsing@gmail.com>
Date:   Sun Jun 14 23:06:39 2015 +0100

    [dev.ssa] fix equivalence class after aux/auxint refactor.
    
    This caused the following code snippet to be miscompiled
    
            var f int
            x := g(&f)
            f = 10
    
    Moving the store of 10 above the function call.
    
    Change-Id: Ic6951f5e7781b122cd881df324a38e519d6d66f0
    Reviewed-on: https://go-review.googlesource.com/11073
    Reviewed-by: Keith Randall <khr@golang.org>

commit c31b6dd0be202698a142568d8a8762db74b4516d
Author: Daniel Morsing <daniel.morsing@gmail.com>
Date:   Fri Jun 12 14:23:29 2015 +0100

    [dev.ssa] initial implementation of PAUTO|PHEAP variables
    
    Call to the runtime to generate escaping variables and use the returned
    address when accessing these variables.
    
    Fix a couple of errors on the way. The rule for CALLstatic was missed
    during the Aux refactor and OCONVNOP wasn't converted.
    
    Change-Id: I2096beff92cca92d648bfb6e8ec0b120f02f44af
    Reviewed-on: https://go-review.googlesource.com/11072
    Reviewed-by: Keith Randall <khr@golang.org>

commit ea5cd68646102e5de58eb6c5917cb1f4a6c04a84
Author: Michael Matloob <matloob@google.com>
Date:   Sun Jun 14 10:27:50 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: fix call to newValue1
    
    Change-Id: I235a759e4688358adc088cf5a80f8ce7ad12d2f2
    Reviewed-on: https://go-review.googlesource.com/11093
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3a0df1f82a8f16c3ffca51bd0b6fbee9dfc62961
Author: Michael Matloob <matloob@google.com>
Date:   Sat Jun 13 11:01:16 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: set Line in NewValue funcs
    
    In the previous line number CL the NewValue\d? functions took
    a line number argument but neglected to set the Line field on
    the value struct. Fix that.
    
    Change-Id: I53c79ff93703f66f5f0266178c94803719ae2074
    Reviewed-on: https://go-review.googlesource.com/11054
    Reviewed-by: Keith Randall <khr@golang.org>

commit 47791c1a1826aeada54987d7259de536f211fb22
Author: Michael Matloob <matloob@google.com>
Date:   Sat Jun 13 10:22:21 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: generate TESTQ instruction
    
    TESTQ is produced by the IsNonNil lowering.
    
    Change-Id: I9df8f17e6def7e34d07e3ddf2dd5dd8f0406aa04
    Reviewed-on: https://go-review.googlesource.com/11053
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2efdaefdb034d463185b674eb3aa8dad5d1a907d
Author: Daniel Morsing <daniel.morsing@gmail.com>
Date:   Sat Jun 13 19:27:26 2015 +0100

    [dev.ssa] Protect control value from being moved away from end of block
    
    If there isn't a value dependency between the control value of a
    block and some other value, the schedule pass might move the control
    value to a spot that is not EOB. Fix by handling the control value
    specially like phis.
    
    Change-Id: Iddaf0924d98c5b3d9515c3ced927b0c85722818c
    Reviewed-on: https://go-review.googlesource.com/11071
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8f22b5292ffc01ea66bd92fa833d0ec25390173b
Author: Keith Randall <khr@golang.org>
Date:   Thu Jun 11 21:29:25 2015 -0700

    [dev.ssa] cmd/compiler/internal/ssa: Add auxint field
    
    Add an additional int64 auxiliary field to Value.
    
    There are two main reasons for doing this:
    1) Ints in interfaces require allocation, and we store ints in Aux a lot.
    2) I'd like to have both *gc.Sym and int offsets included in lots
       of operations (e.g. MOVQloadidx8).  It will be more efficient to
       store them as separate fields instead of a pointer to a sym/int pair.
    
    It also simplifies a bunch of code.
    
    This is just the refactoring.  I'll start using this some more in a
    subsequent changelist.
    
    Change-Id: I1ca797ff572553986cf90cab3ac0a0c1d01ad241
    Reviewed-on: https://go-review.googlesource.com/10929
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 0ad9c8c720324b6c4e483ac7fe0e20f36274e2eb
Author: Keith Randall <khr@golang.org>
Date:   Fri Jun 12 16:24:33 2015 -0700

    [dev.ssa] cmd/compile/internal/gc: Small fixes
    
    Allow labels to be unreachable via fallthrough from above.
    Implement OCONVNOP.
    
    Change-Id: I6869993cad8a27ad134dd637de89a40117daf47b
    Reviewed-on: https://go-review.googlesource.com/11001
    Reviewed-by: Daniel Morsing <daniel.morsing@gmail.com>

commit d5ad9ced1c82d4a1cb63d92f33552a064d7e8162
Author: Daniel Morsing <daniel.morsing@gmail.com>
Date:   Thu Jun 11 20:37:01 2015 +0100

    [dev.ssa] clarify ODCL todo, remove irrelevant colas todo
    
    ODCL nodes are used as the point where the variable is allocated in
    the old pass. colas is irrelevant at this point of the compile. All
    the checks on it happen at parse time and an ODCL node will have been
    inserted right before it.
    
    Change-Id: I1aca053aaa4363bacd12e1156de86fa7b6190a55
    Reviewed-on: https://go-review.googlesource.com/10901
    Reviewed-by: Keith Randall <khr@golang.org>

commit ba8a146af443205876b087a8adb499aa7d4dd455
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jun 11 15:52:08 2015 -0700

    [dev.ssa] cmd/compile/ssa: print reg names in generated code
    
    Change-Id: I6c6196449dd3d5e036d420fa7ae90feb0cf8d417
    Reviewed-on: https://go-review.googlesource.com/10928
    Reviewed-by: Keith Randall <khr@golang.org>

commit e707fbe1d77043bff2cf0de8ab7e930e1d1e20f1
Merge: 6f18847 a788c91
Author: Keith Randall <khr@golang.org>
Date:   Thu Jun 11 10:20:39 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mbranch
    
    Semi-regular merge of tip into dev.ssa.
    
    Change-Id: Iec8e4266426bed233892e7dbe4448d16c8b89018

commit 6f1884757f26f4906d71e2465a2238c80245c323
Author: Keith Randall <khr@golang.org>
Date:   Wed Jun 10 10:39:57 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Complete 64-bit shifts
    
    Implement correct Go shifts.
    
    Allow multi-line rewrite rules.
    
    Fix offset & alignment in stack alloc.
    
    Change-Id: I0ae9e522c83df9205bbe4ab94bc0e43d16dace58
    Reviewed-on: https://go-review.googlesource.com/10891
    Reviewed-by: Keith Randall <khr@golang.org>

commit 290d8fc14a755a970e8f2bb441676e183dcd0c26
Author: Keith Randall <khr@golang.org>
Date:   Wed Jun 10 15:03:06 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: add call opcodes
    
    Add calls, particularly closure calls.
    
    Reorg SSAable variable test for converting to SSA.
    
    Change-Id: Ia75c04295e6b0b040122f97e2381836a393b7f42
    Reviewed-on: https://go-review.googlesource.com/10912
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 81ccf508aa4080d997bbb86a7cf3da710abbd969
Author: Michael Matloob <matloob@google.com>
Date:   Sat May 30 01:03:06 2015 -0400

    [dev.ssa] cmd/compile/internal/ssa: add line numbers to Values
    
    Change-Id: I1dfffd75cc1f49307c654f910f7133c03da6c84f
    Reviewed-on: https://go-review.googlesource.com/10559
    Reviewed-by: Keith Randall <khr@golang.org>

commit 43a2676ff091d403b62ea59c72f4686fbfd546fc
Author: Michael Matloob <matloob@google.com>
Date:   Mon Jun 8 22:46:36 2015 -0400

    [dev.ssa] cmd/compile/internal/ssa: delete lowergeneric.go
    
    It's been replaced by rewritegeneric.go
    
    Change-Id: I2658abbc6201ecfedae4513c6da04ea3cac8bb9c
    Reviewed-on: https://go-review.googlesource.com/10846
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0dca7351e9d51bdaf980e1256ec41af8cb1b9747
Author: Keith Randall <khr@golang.org>
Date:   Sat Jun 6 16:03:33 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: autogenerate opcodes
    
    Revamp autogeneration.  Get rid of gogenerate commands, they are more
    trouble than they are worth.  (If the code won't compile, gogenerate
    doesn't work.)
    
    Generate opcode enums & tables.  This means we only have to specify
    opcodes in one place instead of two.
    
    Add arch prefixes to opcodes so they will be globally unique.
    
    Change-Id: I175d0a89b701b2377bbe699f3756731b7c9f5a9f
    Reviewed-on: https://go-review.googlesource.com/10812
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 6241a41e33fb1dcfb36f86b0578592219a36d443
Author: Michael Matloob <matloob@google.com>
Date:   Sat May 30 01:03:40 2015 -0400

    [dev.ssa] cmd/compile/internal/ssa: enforce single live mem
    
    Change-Id: I21edff280a283895e4f0cbf91a3b4406f2f86788
    Reviewed-on: https://go-review.googlesource.com/10558
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit c8285bb501eb9581af930a9ccd0ad8f791ea2ab2
Author: Michael Matloob <matloob@google.com>
Date:   Fri Jun 5 13:04:29 2015 -0400

    [dev.ssa] cmd/compile/internal/ssa: add missing copyright notices
    
    Change-Id: I9d4e0f3e9afc9920ee0d77b0073ac8597c7c048f
    Reviewed-on: https://go-review.googlesource.com/10756
    Reviewed-by: Keith Randall <khr@golang.org>

commit e00d60901a225b2b08bb52126704cb3422a569f4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jun 2 09:16:22 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: minor fixes
    
    * Improve some docs and logging.
    * Set correct type and len for indexing into strings.
    
    Fixes #11029.
    
    Change-Id: Ib22c45908e41ba3752010d2f5759e37e3921a48e
    Reviewed-on: https://go-review.googlesource.com/10635
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8d32360bddaafb4e8eafe0e57065b4883b4ec55f
Author: Keith Randall <khr@golang.org>
Date:   Tue May 26 14:43:25 2015 -0700

    [dev.ssa] cmd/internal/ssa: add deadstore pass
    
    Eliminate dead stores.  Dead stores are those which are
    unconditionally followed by another store to the same location, with
    no intervening load.
    
    Just a simple intra-block implementation for now.
    
    Change-Id: I2bf54e3a342608fc4e01edbe1b429e83f24764ab
    Reviewed-on: https://go-review.googlesource.com/10386
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 1114a76ae6081242c38614aeb4ff9c37b8be75c4
Author: Keith Randall <khr@golang.org>
Date:   Thu Jun 4 15:18:27 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Add dummy frontend for testing.
    
    Change-Id: Ica26c0297ac7afeb0b5b668cf5f5cd1667c6cc43
    Reviewed-on: https://go-review.googlesource.com/10699
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit f7f604e28459ac993b86832b769438c4a35f06c2
Author: Keith Randall <khr@golang.org>
Date:   Wed May 27 14:52:22 2015 -0700

    [dev.ssa] cmd/internal/ssa: add string operations
    
    Add ops to load, store, select ptr & len, and build constant strings.
    A few other minor cleanups.
    
    Change-Id: I6f0f7419d641b119b613ed44561cd308a466051c
    Reviewed-on: https://go-review.googlesource.com/10449
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit bd95412d23e80d779062abe0798b8e7d85fcc138
Author: Michael Matloob <matloob@google.com>
Date:   Sat May 30 13:17:12 2015 -0400

    [dev.ssa] cmd/compile/internal/ssa: add a String() method to Func
    
    The string method has the same output as printFunc.
    
    Change-Id: Iab2ebc17a3d6418edfeb7b585e4f251e7a11f399
    Reviewed-on: https://go-review.googlesource.com/10552
    Reviewed-by: Keith Randall <khr@golang.org>

commit a9cec30fdcc549282e0a5d520edb2eaf60f3061a
Author: Keith Randall <khr@golang.org>
Date:   Thu May 28 16:45:33 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Implement block rewriting rules
    
    Change-Id: I47e5349e34fc18118c4d35bf433f875b958cc3e5
    Reviewed-on: https://go-review.googlesource.com/10495
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit b0da62903d045f6d3e832ba1181387a1e9ad33f1
Author: Keith Randall <khr@golang.org>
Date:   Fri May 29 16:20:33 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Add code to test generated opcode counts
    
    Add test handler to count and check generated opcodes.  This will be
    useful for testing that certain optimizations don't regress.
    
    Also pass a *Config to the Fun constructor so that compile() works.
    
    Change-Id: Iee679e87cf0bc635ddcbe433fc1bd4c1d9c953cc
    Reviewed-on: https://go-review.googlesource.com/10502
    Reviewed-by: Michael Matloob <michaelmatloob@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7bdecbf840978e618665c284d273f81ce639a293
Author: Michael Matloob <matloob@google.com>
Date:   Fri May 29 13:47:38 2015 -0400

    [dev.ssa] cmd/compile/internal/ssa: remove cgen pass
    
    Code generation is now done in genssa.
    Also remove the asm field in opInfo. It's no longer used.
    
    Change-Id: I65fffac267e138fd424b2ef8aa7ed79f0ebb63d5
    Reviewed-on: https://go-review.googlesource.com/10539
    Reviewed-by: Keith Randall <khr@golang.org>

commit 067e8dfd82163ddcbde248dbe5a1187a417e5d36
Merge: 247786c ccc0376
Author: Keith Randall <khr@golang.org>
Date:   Thu May 28 13:49:20 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge of tip to dev.ssa.
    
    Complicated a bit by the move of cmd/internal/* to cmd/compile/internal/*.
    
    Change-Id: I1c66d3c29bb95cce4a53c5a3476373aa5245303d

commit 247786c1745abc0c7185f7c15ca256edf68ed6d6
Author: Keith Randall <khr@golang.org>
Date:   Thu May 28 10:47:24 2015 -0700

    [dev.ssa] B[dev.ssa] cmd/internal/ssa: Cleanup & reorg
    
    Rename ops like ADDCQ to ADDQconst, so it is clear what the base opcode is and what
    the modifiers are.
    
    Convert FP references to SP references once we know the frame size.  Related, compute
    the frame size in the ssa package.
    
    Do a bunch of small fixes.
    
    Add a TODO list for people to peruse.
    
    Change-Id: Ia6a3fe2bf57e5a2e5e883032e2a2a3fdd566c038
    Reviewed-on: https://go-review.googlesource.com/10465
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit cfc2aa56b0bf6b7dfb8f38cd2cfbe8799fc5a31a
Author: Keith Randall <khr@golang.org>
Date:   Mon May 18 16:44:20 2015 -0700

    [dev.ssa] cmd/internal/ssa: Handle more instructions + some cleanup
    
    Add & as an input op.  Add several output ops (loads & stores, TESTB,
    LEAQglobal, branches, memcopy)
    
    Some other small things:
    - Add exprAddr to builder to generate addresses of expressions.  Use it in
      various places that had ad-hoc code.
    - Separate out nil & bounds check generation to separate functions.
    - Add explicit FP and SP ops so we dont need specialized *FP and *SP opcodes.
    - Fix fallthrough at end of functions with no return values.
    - rematerialization of more opcodes.
    
    Change-Id: I781decfcef9770fb15f0cd6b061547f7824a2d5e
    Reviewed-on: https://go-review.googlesource.com/10213
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 083a646f63055427c203d5600ef65f05f55783bf
Author: Keith Randall <khr@golang.org>
Date:   Tue May 12 11:06:44 2015 -0700

    [dev.ssa] cmd/internal/gc: Generate code from ssa form
    
    After the ssa compiler finishes, extract a cmd/internal/obj program
    from the result.
    
    Can compile and run iterative Fibonacci.  The code is awful, but it runs.
    
    Change-Id: I19fa27ffe69863950a8cb594f33a5e9a671a7663
    Reviewed-on: https://go-review.googlesource.com/9971
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 310d09bf73c2063626cd824b8df809595d6f0392
Author: Michael Matloob <matloob@google.com>
Date:   Tue May 12 12:06:45 2015 -0400

    cmd/internal/ssa: utility functions to make Funcs
    
    Adds a more convenient way to define Funcs for testing.
    For instance,
    
      b1:
        v1 = Arg <mem> [.mem]
        Plain -> b2
      b2:
        Exit v1
      b3:
        v2 = Const <bool> [true]
        If v2 -> b3 b2
    
    can be defined as
    
             fun :=Fun("entry",
                    Bloc("entry",
                            Valu("mem", OpArg, TypeMem, ".mem"),
                            Goto("exit")),
                    Bloc("exit",
                            Exit("mem")),
                    Bloc("deadblock",
                            Valu("deadval", OpConst, TypeBool, true),
                            If("deadval", "deadblock", "exit")))
    
    Also add an Equiv function to test two Funcs for equivalence.
    
    Change-Id: If1633865aeefb8e765e772b6dad19250d93a413a
    Reviewed-on: https://go-review.googlesource.com/9992
    Reviewed-by: Keith Randall <khr@golang.org>

commit b3137966db7c000d2edd8d2f9d6fd10ebbb4da9c
Author: Keith Randall <khr@golang.org>
Date:   Wed May 13 14:11:39 2015 -0700

    [dev.ssa] cmd/internal/ssa: reorganize opcode tables
    
    Separate out opcode tables into separate ranges for each architecture.
    Put architecture-specific opcodes into separate files.
    
    Comment each opcode in a consistent format.
    
    Change-Id: Iddf03c062bc8a88ad2bcebbf6528088c01a75779
    Reviewed-on: https://go-review.googlesource.com/10033
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 12f980bc85c1ded76ba8b861b5ec4a50146f868f
Author: Keith Randall <khr@golang.org>
Date:   Wed May 13 14:18:12 2015 -0700

    [dev.ssa] cmd/internal/ssa: delete ssac
    
    We don't need this standalone tool any more.  We can now feed the
    ssa compiler directly from the Go frontend.
    
    Change-Id: I922f1e061c2d3db6bf77acc137d4d1fc7dc86c0d
    Reviewed-on: https://go-review.googlesource.com/10034
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 23df95b9b509c80a2ebef2fe91a90c32d242005a
Author: Keith Randall <khr@golang.org>
Date:   Tue May 12 15:16:52 2015 -0700

    [dev.ssa] cmd/internal/ssa: implement global variables
    
    Fix a few compilation errors due to previous merge from tip.
    
    Change-Id: I826ad5a9d602a8f8be2762ad00b030dea6f41bcc
    Reviewed-on: https://go-review.googlesource.com/9967
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 0767461ecf8e643643b871cf5728fb7ebc5edf71
Merge: a9a37da 0211d7d
Author: Keith Randall <khr@golang.org>
Date:   Thu May 7 16:15:18 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into dev.ssa
    
    Change-Id: I0f9b6777fd1cb121ad21bce0f2c52f142be2eb6f

commit a9a37dab4ac3b16cfeb865bd1ced940bc1d2004b
Author: Keith Randall <khr@golang.org>
Date:   Tue May 5 16:19:12 2015 -0700

    [dev.ssa] cmd/internal/ssa: Add register allocation
    
    Add a simple register allocator.  It does only intra-basicblock
    allocation.  It uses a greedy one-pass allocation treating the
    register file as a cache.
    
    Change-Id: Ib6b52f48270e08dfda98f2dd842b05afc3ab01ce
    Reviewed-on: https://go-review.googlesource.com/9761
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit d2fd43aa770094e579bc394946e2ce9c75a44417
Author: Keith Randall <khr@golang.org>
Date:   Wed Apr 15 15:51:25 2015 -0700

    [dev.ssa] cmd/internal/gc: convert standard IR into SSA.
    
    Hook into the current compiler to convert the existing
    IR (after walk) into SSA.  Any function ending in "_ssa"
    will take this path.  The resulting assembly is printed
    and then discarded.
    
    Use gc.Type directly in ssa instead of a wrapper for go types.
    It makes the IR->SSA rewrite a lot simpler.
    
    Only a few opcodes are implemented in this change.  It is
    enough to compile simple examples like
        func f(p *int) int { return *p }
        func g(a []int, i int) int { return a[i] }
    
    Change-Id: I5e18841b752a83ca0519aa1b2d36ef02ce1de6f9
    Reviewed-on: https://go-review.googlesource.com/8971
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 2f09b599c31428720f23f284d56dbb9a3d4b1afa
Merge: 4129444 919a6fb
Author: Keith Randall <khr@golang.org>
Date:   Wed Apr 1 13:51:08 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into merge
    
    Semi-regular merge of tip into dev.ssa.
    
    Change-Id: I6f96b3b2b1b52e0e2ae5451767051fbd42ae0dbe

commit 412944484c775d86d677e1dce38b923e27b437b0
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 31 15:37:25 2015 -0700

    [dev.ssa] cmd/internal/ssa: fix typo
    
    Change-Id: I2209da94f1fd76267847d8d599e17f9d9a296ed3
    Reviewed-on: https://go-review.googlesource.com/8320
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 149671dfc30889b72254a7a43ba515783b4c5bf7
Author: Keith Randall <khr@golang.org>
Date:   Fri Mar 27 13:41:30 2015 -0700

    [dev.ssa] cmd/internal/ssa: add CSE pass
    
    Implement a simple common-subexpression elimination.
    It uses value numbering & a dominator tree to detect redundant computation.
    
    Change-Id: Id0ff775e439c22f4d41bdd5976176017dd2a2086
    Reviewed-on: https://go-review.googlesource.com/8172
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 2c9b491e01dbc5e06d7cf98deaf1b4f1779f5da9
Author: Keith Randall <khr@golang.org>
Date:   Thu Mar 26 10:49:03 2015 -0700

    [dev.ssa] cmd/internal/ssa: SSA cleanups
    
    Mostly suggested by Alan.
    Convert Const* ops to just one Const op.
    Use more of go/types.
    Get rid of typers, all types must be specified explicitly.
    
    Change-Id: Id4758f2b887d8a6888e88a7e047d97af55e34b62
    Reviewed-on: https://go-review.googlesource.com/8110
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 7b9628429553b2bce59cd292c0894a2276c54245
Author: Keith Randall <khr@golang.org>
Date:   Mon Mar 23 17:02:11 2015 -0700

    [dev.ssa] cmd/internal/ssa: implement more compiler passes
    
    opt:      machine-independent optimization
    fuse:     join basic blocks
    lower:    convert to machine-dependent opcodes
    critical: remove critical edges for register alloc
    layout:   order basic blocks
    schedule: order values in basic blocks
    cgen:     generate assembly output
    
    opt and lower use machine-generated matching rules using
    the rule generator in rulegen/
    
    cgen will probably change in the real compiler, as we want to
    generate binary directly instead of ascii assembly.
    
    Change-Id: Iedd7ca70f6f55a4cde30e27cfad6a7fa05691b83
    Reviewed-on: https://go-review.googlesource.com/7981
    Reviewed-by: Alan Donovan <adonovan@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7c2c0b4e533d3d75df8993eb87f6948c49c04cc8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Mar 16 16:31:13 2015 -0700

    [dev.ssa] cmd/internal/ssa: minor cleanup
    
    These were review comments for CL 6681 that didn't get sent in time.
    
    Change-Id: If161af3655770487f3ba34535d3fb55dbfde7917
    Reviewed-on: https://go-review.googlesource.com/7644
    Reviewed-by: Keith Randall <khr@golang.org>

commit f52b234579abb8045da366c8fd5f24e0cf2c7ed2
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 3 13:38:14 2015 -0800

    [dev.ssa] cmd/internal/ssa: SSA backend compiler skeleton
    
    First pass adding code for SSA backend.  It is standalone for now.
    I've included just a few passes to make the review size manageable -
    I have more passes coming.
    
    cmd/internal/ssa is the library containing the ssa compiler proper.
    
    cmd/internal/ssa/ssac is a driver that loads an sexpr-based IR,
    converts it to SSA form, and calls the above library.  It is essentially
    throwaway code - it will disappear once the Go compiler calls
    cmd/internal/ssa itself.  The .goir files in ssac/ are dumps of fibonacci
    programs I made from a hacked-up compiler.  They are just for testing.
    
    Change-Id: I5ee89356ec12c87cd916681097cd3c2cd591040c
    Reviewed-on: https://go-review.googlesource.com/6681
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit de7f6c77bcf5fe7de77ce5eae2d2846e963906cc
Author: Russ Cox <rsc@golang.org>
Date:   Sun Mar 1 21:45:08 2015 -0500

    [dev.ssa] remove dummy file
    
    The CL that created this branch (not code reviewed,
    since the branch did not yet exist) created this file,
    in order to have a change to make. Remove it.
    
    Change-Id: I7498f1cdf6cbfba895a18c457c30e3e4ee95f7d3
    Reviewed-on: https://go-review.googlesource.com/6406
    Reviewed-by: Keith Randall <khr@golang.org>

commit ba71f6baa1f9c41ba6f23a48765cbc995ce4cead
Author: Russ Cox <rsc@golang.org>
Date:   Sun Mar 1 21:39:29 2015 -0500

    [dev.ssa] create branch for khr's compiler ssa pass work
    
    Change-Id: I99ca195ed35defb1a59d3e1189a060485c47ebd5
```
