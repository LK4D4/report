# February 16, 2017 Report (Release 1.8)

Number of commits: 2301

## Compilation time

* github.com/boltdb/bolt/cmd/bolt: from 608.221933ms to 607.683564ms, ~
* github.com/coreos/etcd/cmd/etcd: from 14.493261174s to 12.574284838s, -13.24%
* github.com/grafana/grafana/pkg/cmd/grafana-server: from 36.757500578s to 36.256616348s, -1.36%
* github.com/junegunn/fzf/src/fzf: from 1.024158847s to 1.087723734s, +6.21%
* github.com/monochromegane/the_platinum_searcher/cmd/pt: from 1.422330519s to 1.2497697s, -12.13%
* github.com/nsqio/nsq/apps/nsqd: from 2.096109458s to 1.960299521s, -6.48%
* github.com/prometheus/prometheus/cmd/prometheus: from 47.221796519s to 41.124079111s, -12.91%
* github.com/spf13/hugo: from 7.479409536s to 6.44479598s, -13.83%
* golang.org/x/tools/cmd/guru: from 2.883006747s to 2.658148815s, -7.80%

## Binary size:

* github.com/boltdb/bolt/cmd/bolt: from 2696808 to 3188113, +18.22%
* github.com/coreos/etcd/cmd/etcd: from 27756416 to 26987880, -2.77%
* github.com/grafana/grafana/pkg/cmd/grafana-server: from 35954896 to 34414776, -4.28%
* github.com/junegunn/fzf/src/fzf: from 3362675 to 3208398, -4.59%
* github.com/monochromegane/the_platinum_searcher/cmd/pt: from 4615986 to 4362805, -5.48%
* github.com/nsqio/nsq/apps/nsqd: from 9982014 to 10345037, +3.64%
* github.com/prometheus/prometheus/cmd/prometheus: from 67052893 to 62571775, -6.68%
* github.com/spf13/hugo: from 17062116 to 16789673, -1.60%
* golang.org/x/tools/cmd/guru: from 8279573 to 8234173, -0.55%

## Bechmarks:

```
benchmark                            old ns/op     new ns/op     delta
BenchmarkMsgpMarshal-4               193           189           -2.07%
BenchmarkMsgpUnmarshal-4             408           368           -9.80%
BenchmarkEasyJsonMarshal-4           1601          1436          -10.31%
BenchmarkEasyJsonUnmarshal-4         1926          1987          +3.17%
BenchmarkFlatBuffersMarshal-4        539           371           -31.17%
BenchmarkFlatBuffersUnmarshal-4      295           293           -0.68%
BenchmarkGogoprotobufMarshal-4       163           156           -4.29%
BenchmarkGogoprotobufUnmarshal-4     261           253           -3.07%

benchmark                            old allocs     new allocs     delta
BenchmarkMsgpMarshal-4               1              1              +0.00%
BenchmarkMsgpUnmarshal-4             3              3              +0.00%
BenchmarkEasyJsonMarshal-4           5              5              +0.00%
BenchmarkEasyJsonUnmarshal-4         4              4              +0.00%
BenchmarkFlatBuffersMarshal-4        0              0              +0.00%
BenchmarkFlatBuffersUnmarshal-4      3              3              +0.00%
BenchmarkGogoprotobufMarshal-4       1              1              +0.00%
BenchmarkGogoprotobufUnmarshal-4     3              3              +0.00%

benchmark                            old bytes     new bytes     delta
BenchmarkMsgpMarshal-4               128           128           +0.00%
BenchmarkMsgpUnmarshal-4             112           112           +0.00%
BenchmarkEasyJsonMarshal-4           784           784           +0.00%
BenchmarkEasyJsonUnmarshal-4         160           160           +0.00%
BenchmarkFlatBuffersMarshal-4        0             0             +0.00%
BenchmarkFlatBuffersUnmarshal-4      112           112           +0.00%
BenchmarkGogoprotobufMarshal-4       64            64            +0.00%
BenchmarkGogoprotobufUnmarshal-4     96            96            +0.00%
```
## Highlights: 

* [release notes](https://golang.org/doc/go1.8)


## GIT Log

```
commit cd6b6202dd1559b3ac63179b45f1833fcfbe7eca
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Feb 16 08:41:18 2017 -0800

    [release-branch.go1.8] go1.8
    
    Change-Id: If1e38f02db86449abd4c8a57988d9825b1cf2511
    Reviewed-on: https://go-review.googlesource.com/37132
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 606eb9b0c118815dcbc68f224ec4485faf322c96
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Feb 16 08:29:46 2017 -0800

    [release-branch.go1.8] doc: document go1.8
    
    Change-Id: Ie2144d001c6b4b2293d07b2acf62d7e3cd0b46a7
    Reviewed-on: https://go-review.googlesource.com/37130
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-on: https://go-review.googlesource.com/37131

commit bcda91c18d8b4f6ed67897eba2b62a2c21b584a9
Author: Russ Cox <rsc@golang.org>
Date:   Wed Feb 15 15:41:50 2017 -0500

    [release-branch.go1.8] runtime: do not call wakep from enlistWorker, to avoid possible deadlock
    
    We have seen one instance of a production job suddenly spinning to
    100% CPU and becoming unresponsive. In that one instance, a SIGQUIT
    was sent after 328 minutes of spinning, and the stacks showed a single
    goroutine in "IO wait (scan)" state.
    
    Looking for things that might get stuck if a goroutine got stuck in
    scanning a stack, we found that injectglist does:
    
            lock(&sched.lock)
            var n int
            for n = 0; glist != nil; n++ {
                    gp := glist
                    glist = gp.schedlink.ptr()
                    casgstatus(gp, _Gwaiting, _Grunnable)
                    globrunqput(gp)
            }
            unlock(&sched.lock)
    
    and that casgstatus spins on gp.atomicstatus until the _Gscan bit goes
    away. Essentially, this code locks sched.lock and then while holding
    sched.lock, waits to lock gp.atomicstatus.
    
    The code that is doing the scan is:
    
            if castogscanstatus(gp, s, s|_Gscan) {
                    if !gp.gcscandone {
                            scanstack(gp, gcw)
                            gp.gcscandone = true
                    }
                    restartg(gp)
                    break loop
            }
    
    More analysis showed that scanstack can, in a rare case, end up
    calling back into code that acquires sched.lock. For example:
    
            runtime.scanstack at proc.go:866
            calls runtime.gentraceback at mgcmark.go:842
            calls runtime.scanstack$1 at traceback.go:378
            calls runtime.scanframeworker at mgcmark.go:819
            calls runtime.scanblock at mgcmark.go:904
            calls runtime.greyobject at mgcmark.go:1221
            calls (*runtime.gcWork).put at mgcmark.go:1412
            calls (*runtime.gcControllerState).enlistWorker at mgcwork.go:127
            calls runtime.wakep at mgc.go:632
            calls runtime.startm at proc.go:1779
            acquires runtime.sched.lock at proc.go:1675
    
    This path was found with an automated deadlock-detecting tool.
    There are many such paths but they all go through enlistWorker -> wakep.
    
    The evidence strongly suggests that one of these paths is what caused
    the deadlock we observed. We're running those jobs with
    GOTRACEBACK=crash now to try to get more information if it happens
    again.
    
    Further refinement and analysis shows that if we drop the wakep call
    from enlistWorker, the remaining few deadlock cycles found by the tool
    are all false positives caused by not understanding the effect of calls
    to func variables.
    
    The enlistWorker -> wakep call was intended only as a performance
    optimization, it rarely executes, and if it does execute at just the
    wrong time it can (and plausibly did) cause the deadlock we saw.
    
    Comment it out, to avoid the potential deadlock.
    
    Fixes #19112.
    Unfixes #14179.
    
    Change-Id: I6f7e10b890b991c11e79fab7aeefaf70b5d5a07b
    Reviewed-on: https://go-review.googlesource.com/37093
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-on: https://go-review.googlesource.com/37022
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7d7a0a9d64b12056d5a73beb8eea2970ee15f88e
Author: Sarah Adams <shadams@google.com>
Date:   Tue Feb 14 15:34:46 2017 -0800

    [release-branch.go1.8] doc: update Code of Conduct wording and scope
    
    This change removes the punitive language and anonymous reporting mechanism
    from the Code of Conduct document. Read on for the rationale.
    
    More than a year has passed since the Go Code of Conduct was introduced.
    In that time, there have been a small number (<30) of reports to the Working Group.
    Some reports we handled well, with positive outcomes for all involved.
    A few reports we handled badly, resulting in hurt feelings and a bad
    experience for all involved.
    
    On reflection, the reports that had positive outcomes were ones where the
    Working Group took the role of advisor/facilitator, listening to complaints and
    providing suggestions and advice to the parties involved.
    The reports that had negative outcomes were ones where the subject of the
    report felt threatened by the Working Group and Code of Conduct.
    
    After some discussion among the Working Group, we saw that we are most
    effective as facilitators, rather than disciplinarians. The various Go spaces
    already have moderators; this change to the CoC acknowledges their authority
    and places the group in a purely advisory role. If an incident is
    reported to the group we may provide information to or make a
    suggestion the moderators, but the Working Group need not (and should not) have
    any authority to take disciplinary action.
    
    In short, we want it to be clear that the Working Group are here to help
    resolve conflict, period.
    
    The second change made here is the removal of the anonymous reporting mechanism.
    To date, the quality of anonymous reports has been low, and with no way to
    reach out to the reporter for more information there is often very little we
    can do in response. Removing this one-way reporting mechanism strengthens the
    message that the Working Group are here to facilitate a constructive dialogue.
    
    Change-Id: Iee52aff5446accd0dae0c937bb3aa89709ad5fb4
    Reviewed-on: https://go-review.googlesource.com/37014
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-on: https://go-review.googlesource.com/37040
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit cedc511a6e71f1ac12835da3bb08b96e1dd69b2e
Author: Russ Cox <rsc@golang.org>
Date:   Tue Feb 14 00:17:50 2017 -0500

    [release-branch.go1.8] encoding/xml: fix incorrect indirect code in chardata, comment, innerxml fields
    
    The new tests in this CL have been checked against Go 1.7 as well
    and all pass in Go 1.7, with the one exception noted in a comment
    (an intentional change to omitempty already present before this CL).
    
    CL 15684 made the intentional change to omitempty.
    This CL fixes bugs introduced along the way.
    
    Most of these are corner cases that are arguably not that important,
    but they've always worked all the way back to Go 1, and someone
    cared enough to file #19063. The most significant problem found
    while adding tests is that in the case of a nil *string field with
    `xml:",chardata"`, the existing code silently stops processing not just
    that field but the entire remainder of the struct.
    Even if #19063 were not worth fixing, this chardata bug would be.
    
    Fixes #19063.
    
    Change-Id: I318cf8f9945e1a4615982d9904e109fde577ebf9
    Reviewed-on: https://go-review.googlesource.com/36954
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Daniel Martí <mvdan@mvdan.cc>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    (cherry picked from commit 72aa757dddad7e915f4faad87aacf8010d91561b)
    Reviewed-on: https://go-review.googlesource.com/37016
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit ae13ccfd6dee7113d11aba0c1c287bfa2897488d
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Sun Feb 12 15:12:52 2017 -0800

    [release-branch.go1.8] database/sql: convert test timeouts to explicit waits with checks
    
    When testing context cancelation behavior do not rely on context
    timeouts. Use explicit checks in all such tests. In closeDB
    convert the simple check for zero open conns with a wait loop
    for zero open conns.
    
    Fixes #19024
    Fixes #19041
    
    Change-Id: Iecfcc4467e91249fceb21ffd1f7c62c58140d8e9
    Reviewed-on: https://go-review.googlesource.com/36902
    Run-TryBot: Daniel Theophanes <kardianos@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36917
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>

commit 7cec9a583d81a3b518795cc2a49cd6296e45c69b
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Feb 10 13:08:13 2017 +1300

    [release-branch.go1.8] reflect: clear ptrToThis in Ptr when allocating result on heap
    
    Otherwise, calling PtrTo on the result will fail.
    
    Fixes #19003
    
    Change-Id: I8d7d1981a5d0417d5aee52740469d71e90734963
    Reviewed-on: https://go-review.googlesource.com/36731
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36718
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d84dee069a534bd7a35ec4062a92a04ce9c2806e
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Feb 8 21:38:51 2017 -0800

    [release-branch.go1.8] database/sql: ensure driverConns are closed if not returned to pool
    
    Previously if a connection was requested but timed out during the
    request and when acquiring the db.Lock the connection request
    is fulfilled and the request is unable to be returned to the
    connection pool, then then driver connection would not be closed.
    
    No tests were added or modified because I was unable to determine
    how to trigger this situation without something invasive.
    
    Change-Id: I9d4dc680e3fdcf63d79d212174a5b8b313f363f1
    Reviewed-on: https://go-review.googlesource.com/36641
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36714
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f1e44a4b7426e03bff7ed4f75a91e57c498d3463
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Feb 8 10:32:22 2017 -0800

    [release-branch.go1.8] database/sql: do not exhaust connection pool on conn request timeout
    
    Previously if a context was canceled while it was waiting for a
    connection request, that connection request would leak.
    
    To prevent this remove the pending connection request if the
    context is canceled and ensure no connection has been sent on the channel.
    This requires a change to how the connection requests are represented in the DB.
    
    Fixes #18995
    
    Change-Id: I9a274b48b8f4f7ca46cdee166faa38f56d030852
    Reviewed-on: https://go-review.googlesource.com/36563
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36613
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3ade54063e9a219e50e53a6a042013e2cafc1251
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Tue Feb 7 10:19:02 2017 -0800

    [release-branch.go1.8] database/sql: record the context error in Rows if canceled
    
    Previously it was intended that Rows.Scan would return
    an error and Rows.Err would return nil. This was problematic
    because drivers could not differentiate between a normal
    Rows.Close or a context cancel close.
    
    The alternative is to require drivers to return a Scan to return
    an error if the driver is closed while there are still rows to be read.
    This is currently not how several drivers currently work and may be
    difficult to detect when there are additional rows.
    
    At the same time guard the the Rows.lasterr and prevent a close
    while a Rows operation is active.
    
    For the drivers that do not have Context methods, do not check for
    context cancelation after the operation, but before for any operation
    that may modify the database state.
    
    Fixes #18961
    
    Change-Id: I49a25318ecd9f97a35d5b50540ecd850c01cfa5e
    Reviewed-on: https://go-review.googlesource.com/36485
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36614
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0545006bdb052b3d3fdd14cd027993d89eef1eed
Author: Russ Cox <rsc@golang.org>
Date:   Tue Feb 7 11:59:38 2017 -0500

    [release-branch.go1.8] crypto/x509: check for new tls-ca-bundle.pem last
    
    We added CentOS 7's /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
    to the list in response to #17549 - not being able to find any certs otherwise.
    
    Now we have #18813, where CentOS 6 apparently has both that file
    and /etc/pki/tls/certs/ca-bundle.crt, and the latter is complete while
    the former is not.
    
    Moving the new CentOS 7 file to the bottom of the list should fix both
    problems: the CentOS 7 system that didn't have any of the other files
    in the list will still find the new one, and existing systems will still
    keep using what they were using instead of preferring the new path
    that may or may not be complete on some systems.
    
    Fixes #18813.
    
    Change-Id: I5275ab67424b95e7210e14938d3e986c8caee0ba
    Reviewed-on: https://go-review.googlesource.com/36429
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36530
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1363eeba6589fca217e155c829b2a7c00bc32a92
Author: Russ Cox <rsc@golang.org>
Date:   Tue Feb 7 10:29:32 2017 -0500

    [release-branch.go1.8] cmd/go, go/build: better defenses against GOPATH=GOROOT
    
    Fixes #18863.
    
    Change-Id: I0723563cd23728b0d43ebcc25979bf8d21e2a72c
    Reviewed-on: https://go-review.googlesource.com/36427
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36536
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1edfd647618afadfeda029372ce169f42821e156
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Feb 6 14:24:16 2017 -0500

    [release-branch.go1.8] cmd/compile: do not use "oaslit" for global
    
    The compiler did not emit write barrier for assigning global with
    struct literal, like global = T{} where T contains pointer.
    
    The relevant code path is:
    walkexpr OAS var_ OSTRUCTLIT
        oaslit
            anylit OSTRUCTLIT
                walkexpr OAS var_ nil
                return without adding write barrier
        return true
    break (without adding write barrier)
    
    This CL makes oaslit not apply to globals. See also CL
    https://go-review.googlesource.com/c/36355/ for an alternative
    fix.
    
    The downside of this is that it generates static data for zeroing
    struct now. Also this only covers global. If there is any lurking
    bug with implicit zeroing other than globals, this doesn't fix.
    
    Fixes #18956.
    
    Change-Id: Ibcd27e4fae3aa38390ffa94a32a9dd7a802e4b37
    Reviewed-on: https://go-review.googlesource.com/36410
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    (cherry picked from commit 160914e33ca6521d74297291d801062cc44d794d)
    Reviewed-on: https://go-review.googlesource.com/36531

commit 6eb0f5440e7034235544001faa675a0945a1ba7b
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Feb 6 22:01:07 2017 -0800

    [release-branch.go1.8] cmd/compile/internal/syntax: avoid follow-up error for incorrect if statement
    
    This is a follow-up on https://go-review.googlesource.com/36470
    and leads to a more stable fix. The above CL relied on filtering
    of multiple errors on the same line to avoid more than one error
    for an `if` statement of the form `if a := 10 {}`. This CL avoids
    the secondary error ("missing condition in if statement") in the
    first place.
    
    For #18915.
    
    Change-Id: I8517f485cc2305965276c17d8f8797d61ef9e999
    Reviewed-on: https://go-review.googlesource.com/36479
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-on: https://go-review.googlesource.com/36424
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit c543cc353deb4cffe213be5b094c8357faecab07
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Feb 6 15:08:28 2017 -0800

    [release-branch.go1.8] cmd/compile/internal/syntax: make a parser error "1.7 compliant"
    
    For code such as
    
            if a := 10 { ...
    
    the 1.7 compiler reported
    
            a := 10 used as value
    
    while the 1.8 compiler reported
    
            invalid condition, tag, or type switch guard
    
    Changed the error message to match the 1.7 compiler.
    
    Fixes #18915.
    
    Change-Id: I01308862e461922e717f9f8295a9db53d5a914eb
    Reviewed-on: https://go-review.googlesource.com/36470
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36422
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit f0749fe163ca4917f903ed424008af37e834ace4
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Feb 6 17:52:26 2017 -0500

    [release-branch.go1.8] cmd/link: use external linking for PIE by default
    
    Now `go test -buildmode=pie std -short` passes on linux/amd64.
    
    Updates #18968
    
    Change-Id: Ide21877713e00edc64c1700c950016d6bff8de0e
    Reviewed-on: https://go-review.googlesource.com/36417
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36421
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit ba878ac0c8ac9701f0171a602cf344accf67c99b
Author: Andrew Gerrand <adg@golang.org>
Date:   Tue Feb 7 08:05:01 2017 +1100

    [release-branch.go1.8] doc: remove inactive members of the CoC working group
    
    Dave and Jason have moved on to other things.
    
    Change-Id: I702d11bedfab1f47a33679a48c2309f49021229e
    Reviewed-on: https://go-review.googlesource.com/36450
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-on: https://go-review.googlesource.com/36474
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 6177f6d448ffc73d54e28e3827da818f07fc2aa3
Author: Russ Cox <rsc@golang.org>
Date:   Mon Feb 6 14:41:12 2017 -0500

    [release-branch.go1.8] vendor/golang.org/x/crypto/curve25519: avoid loss of R15 in -dynlink mode
    
    Original code fixed in https://go-review.googlesource.com/#/c/36359/.
    
    Fixes #18820.
    
    Change-Id: I060e6c9d0e312b4fd5d0674aff131055bf5cf61d
    Reviewed-on: https://go-review.googlesource.com/36412
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>
    Reviewed-on: https://go-review.googlesource.com/36414
    Reviewed-by: Austin Clements <austin@google.com>

commit 67cd1fa780aba6ca76e6f43092a2fb80e170dc93
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Feb 6 15:05:41 2017 -0500

    [release-branch.go1.8] cmd/compile: do not fold large offset on ARM64
    
    Fixes #18933.
    
    Change-Id: I1ab524fdca006100ec6af572065b496f68d6a5c3
    Reviewed-on: https://go-review.googlesource.com/36413
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 758a7281abb539018d6458ccb429615206fcc002
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Feb 3 16:47:32 2017 -0500

    [release-branch.go1.8] cmd/compile: fix type propagation through s390x SSA rules
    
    This CL fixes two issues:
    
    1. Load ops were initially always lowered to unsigned loads, even
       for signed types. This was fine by itself however LoadReg ops
       (used to re-load spilled values) were lowered to signed loads
       for signed types. This meant that spills could invalidate
       optimizations that assumed the original unsigned load.
    
    2. Types were not always being maintained correctly through rules
       designed to eliminate unnecessary zero and sign extensions.
    
    Updates #18906 and fixes #18958 (backport of CL 36256 to 1.8).
    
    Change-Id: Id44953b0f644cad047e8474edbd24e8a344ca9a7
    Reviewed-on: https://go-review.googlesource.com/36350
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 470704531d93d1bcc24493abea882f99593bcac6
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sun Jan 29 20:53:35 2017 +0100

    [release-branch.go1.8] testing: stop timeout-timer after running tests
    
    Fixes #18845
    
    Fixes #18870 (Go 1.8 backport)
    
    Change-Id: Icdc3e2067807781e42f2ffc94d1824aed94d3713
    Reviewed-on: https://go-review.googlesource.com/35956
    Run-TryBot: Alberto Donizetti <alb.donizetti@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    (cherry picked from commit 7d8bfdde453445affb50fcaeacc050938ec98467)
    Reviewed-on: https://go-review.googlesource.com/36125

commit 648bb34484e177067b1fc4aa159cd08f9ad2bbf7
Author: Filippo Valsorda <hi@filippo.io>
Date:   Wed Feb 1 19:57:11 2017 +0000

    [release-branch.go1.8] doc: mention SHA-256 CBC suites are off by default
    
    Change-Id: I82c41bd1d82adda457ddb5dd08caf0647905da22
    Reviewed-on: https://go-review.googlesource.com/36091
    Reviewed-by: Matt Layher <mdlayher@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    (cherry picked from commit de479267ef9db0911dac68e94d75186313bae11d)
    Reviewed-on: https://go-review.googlesource.com/36130

commit d8d2f036a59d887ccd5f7c17bb589bb7c99084cf
Merge: 2a5f65a98c 3e55059f30
Author: Russ Cox <rsc@golang.org>
Date:   Mon Jan 30 16:55:52 2017 -0500

    [release-branch.go1.8] all: final merge of master into Go 1.8 release branch
    
    After this, we will merge some of the dev work like
    type aliases and inlining into master, so any additional
    changes for the Go 1.8 release will need to be cherry-picked,
    not merged.
    
    3e55059f cmd/dist: really skip the testsanitizers tests on Android
    09496599 runtime: add explicit (void) in C to avoid GCC 7 problem
    4cffe2b6 cmd/dist: use the target GOOS to skip the test for issue 18153
    6bdb0c11 doc: update go1.8 release notes after TxOptions change
    09096bd3 cmd/go: update alldocs after CL 35150
    96ea0918 cmd/compile: use CMPWU for 32-bit or smaller unsigned Geq on ppc64{,le}
    21a8db1c doc: document go1.7.5
    
    Change-Id: I9e6a30c3fac43d4d4d15e93054ac00964c3ee958

commit 3e55059f305bde37a4dac1397e8a1b798b6fbd9e
Author: Elias Naur <elias.naur@gmail.com>
Date:   Mon Jan 30 19:55:35 2017 +0100

    cmd/dist: really skip the testsanitizers tests on Android
    
    The test.bash script in misc/cgo/testsanitizers use GOOS, not GOHOSTOS.
    Fix the dist check from gohostos to goos accordingly.
    
    The error was masked on the builders because they run on a darwin host
    where the sanitizers tests never ran.
    
    With this change, the Android test suite completes successfully on
    Android/amd64.
    
    Change-Id: Id7690429f78c6ac7a26fc9118d913b719b565bb2
    Reviewed-on: https://go-review.googlesource.com/35959
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 09496599520d73171550987b138d85ae1fb13b76
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jan 30 09:43:25 2017 -0800

    runtime: add explicit (void) in C to avoid GCC 7 problem
    
    This avoids errors like
        ./traceback.go:80:2: call of non-function C.f1
    
    I filed https://gcc.gnu.org/PR79289 for the GCC problem. I think this
    is a bug in GCC, and it may be fixed before the final GCC 7 release.
    This CL is correct either way.
    
    Fixes #18855.
    
    Change-Id: I0785a7b7c5b1d0ca87b454b5eca9079f390fcbd4
    Reviewed-on: https://go-review.googlesource.com/35919
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 4cffe2b604d0980e6fb9b994b31f69c53045a460
Author: Elias Naur <elias.naur@gmail.com>
Date:   Sun Jan 29 23:57:14 2017 +0100

    cmd/dist: use the target GOOS to skip the test for issue 18153
    
    Fixes (skips) the test on Android, where stdout/stderr are not
    terminals.
    
    Updates #18153
    
    Change-Id: Ieca65150362a5c423747ad751e00f76f0b890746
    Reviewed-on: https://go-review.googlesource.com/35957
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6bdb0c11c73ecf2337918d784c54f9dda2207ca7
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Sat Jan 28 07:36:09 2017 -0800

    doc: update go1.8 release notes after TxOptions change
    
    Missed the release notes when updating the sql API.
    
    Fixes #18825
    
    Change-Id: I89056d46939ad4fc99590f3434d2881f5764e1b6
    Reviewed-on: https://go-review.googlesource.com/35915
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 09096bd3eb59af83796066f517301bb51ad25d4e
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sat Jan 28 11:56:15 2017 +0100

    cmd/go: update alldocs after CL 35150
    
    Author of CL 35150 forgot to run mkalldocs.sh to update
    the autogenerated alldocs.go
    
    Change-Id: Ib824562db6044702456a221a8c6f9af412927a98
    Reviewed-on: https://go-review.googlesource.com/35952
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 96ea0918e6708d3548215ade59dc4f89bc814e6b
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Jan 26 23:31:28 2017 -0500

    cmd/compile: use CMPWU for 32-bit or smaller unsigned Geq on ppc64{,le}
    
    Fixes #18808.
    
    Change-Id: I49b266380b9d6804c9f6563ebac9c7c0e05f37f6
    Reviewed-on: https://go-review.googlesource.com/35890
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 2a5f65a98ca483aad2dd74dc2636a7baecc59cf2
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Jan 26 09:40:29 2017 -0800

    [release-branch.go1.8] go1.8rc3
    
    Change-Id: Ie306bb5355f56113356fc141f3c1a56872b39f9e
    Reviewed-on: https://go-review.googlesource.com/35836
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 21a8db1c5fdd372510b30bb898269a56456096e8
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Jan 26 09:30:04 2017 -0800

    doc: document go1.7.5
    
    Change-Id: Ic8d4e971edebba9412f2e7c3d3c29f296c4977ff
    Reviewed-on: https://go-review.googlesource.com/35833
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f6c20b46c2964e3c8e2c985bc76fe2d660ac8af
Merge: 59f181b6fd 78860b2ad2
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Jan 26 09:24:20 2017 -0800

    [release-branch.go1.8] all: merge master into release-branch.go1.8
    
    78860b2ad2 cmd/go: don't reject ./... matching top-level file outside GOPATH
    2b283cedef database/sql: fix race when canceling queries immediately
    1cf08182f9 go/printer: fix format with leading comments in composite literal
    b531eb3062 runtime: reorder modules so main.main comes first
    165cfbc409 database/sql: let tests wait for db pool to come to expected state
    ea73649343 doc: update gccgo docs
    1db16711f5 doc: clarify what to do with Go 1.4 when installing from source
    3717b429f2 doc: note that plugins are not fully baked
    98842cabb6 net/http: don't send body on redirects for 301, 302, 303 when GetBody is set
    314180e7f6 net/http: fix a nit
    aad06da2b9 cmd/link: mark DWARF function symbols as reachable
    be9dcfec29 doc: mention testing.MainStart signature change
    a96e117a58 runtime: amd64, use 4-byte ops for memmove of 4 bytes
    4cce27a3fa cmd/compile: fix constant propagation through s390x MOVDNE instructions
    1be957d703 misc/cgo/test: pass current environment to syscall.Exec
    ec654e2251 misc/cgo/test: fix test when using GCC 7
    256a605faa cmd/compile: don't use nilcheck information until the next block
    e8d5989ed1 cmd/compile: fix compilebench -alloc
    ea7d9e6a52 runtime: check for nil g and m in msanread
    
    Change-Id: I61d508d4f0efe4b72e7396645c8ad6088d2bfa6e

commit 78860b2ad2261b6e3dc29006d2ffbdc4da14cb2e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jan 25 06:25:17 2017 -0800

    cmd/go: don't reject ./... matching top-level file outside GOPATH
    
    This unwinds a small part of CL 31668: we now accept "./." in cleanImport.
    
    Fixes #18778.
    
    Change-Id: Ia7f1fde1cafcea3cc9e0b597a95a0e0bb410a3ed
    Reviewed-on: https://go-review.googlesource.com/35646
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 2b283cedef2a62e37b7422ef3badc7b758bd26c8
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Fri Jan 20 17:12:50 2017 -0800

    database/sql: fix race when canceling queries immediately
    
    Previously the following could happen, though in practice it would
    be rare.
    
    Goroutine 1:
            (*Tx).QueryContext begins a query, passing in userContext
    
    Goroutine 2:
            (*Tx).awaitDone starts to wait on the context derived from the passed in context
    
    Goroutine 1:
            (*Tx).grabConn returns a valid (*driverConn)
            The (*driverConn) passes to (*DB).queryConn
    
    Goroutine 3:
            userContext is canceled
    
    Goroutine 2:
            (*Tx).awaitDone unblocks and calls (*Tx).rollback
            (*driverConn).finalClose obtains dc.Mutex
            (*driverConn).finalClose sets dc.ci = nil
    
    Goroutine 1:
            (*DB).queryConn obtains dc.Mutex in withLock
            ctxDriverPrepare accepts dc.ci which is now nil
            ctxCriverPrepare panics on the nil ci
    
    The fix for this is to guard the Tx methods with a RWLock
    holding it exclusivly when closing the Tx and holding a read lock
    when executing a query.
    
    Fixes #18719
    
    Change-Id: I37aa02c37083c9793dabd28f7f934a1c5cbc05ea
    Reviewed-on: https://go-review.googlesource.com/35550
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1cf08182f92698aeba8be040dafb5296707cdbf2
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Jan 25 15:05:39 2017 -0800

    go/printer: fix format with leading comments in composite literal
    
    This fix is less pervasive than it seems. The only change affecting
    formatting is on printer.go:760. The remaining changes have no effect
    on formatting since the value of p.level is ignored except on this
    specific line.
    
    The remaining changes are:
    - renamed adjBlock to funcBody since that's how it is used
    - introduced new printer field 'level' tracking the composite
      literal nesting level
    - update/restore the composite literal nesting level as needed
    
    Fixes #18782.
    
    Change-Id: Ie833a9b5a559c4ec0f2eef2c5dc97aa263dca53a
    Reviewed-on: https://go-review.googlesource.com/35811
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b531eb30625a28eb99f9b0137ea5a409a733a1bb
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Jan 24 20:19:36 2017 -0800

    runtime: reorder modules so main.main comes first
    
    Modules appear in the moduledata linked list in the order they are
    loaded by the dynamic loader, with one exception: the
    firstmoduledata itself the module that contains the runtime.
    This is not always the first module (when using -buildmode=shared,
    it is typically libstd.so, the second module).
    
    The order matters for typelinksinit, so we swap the first module
    with whatever module contains the main function.
    
    Updates #18729
    
    This fixes the test case extracted with -linkshared, and now
    
            go test -linkshared encoding/...
    
    passes. However the original issue about a plugin failure is not
    yet fixed.
    
    Change-Id: I9f399ecc3518e22e6b0a350358e90b0baa44ac96
    Reviewed-on: https://go-review.googlesource.com/35644
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 165cfbc409d54154263c26fb0cc2b2acd75d8b53
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Jan 25 08:27:45 2017 -0800

    database/sql: let tests wait for db pool to come to expected state
    
    Slower builders were failing TestQueryContext because the cancel
    and return to conn pool happens async. TestQueryContext already
    uses a wait method for this reason. Use the same method for
    other context tests.
    
    Fixes #18759
    
    Change-Id: I84cce697392b867e4ebdfadd38027a06ca14655f
    Reviewed-on: https://go-review.googlesource.com/35750
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ea73649343b5d199d7f3d8525399e7a07a608543
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jan 24 09:32:29 2017 -0800

    doc: update gccgo docs
    
    Update docs on correspondence between Go releases and GCC releases.
    
    Update C type that corresponds to Go type `int`.
    
    Drop out of date comments about Ubuntu and RTEMS.
    
    Change-Id: Ic1b5ce9f242789af23ec3b7e7a64c9d257d6913e
    Reviewed-on: https://go-review.googlesource.com/35631
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1db16711f595d291bdd22f7ca70f4e0df50ac0e7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Jan 24 09:56:57 2017 -0800

    doc: clarify what to do with Go 1.4 when installing from source
    
    You have to actually run make.bash (or make.bat).
    
    Update #18771.
    
    Change-Id: Ie6672a4e4abde0150c1ae57cabb1222de2c78716
    Reviewed-on: https://go-review.googlesource.com/35632
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3717b429f25b042b98fbdf2c0d4e3dc5307e91ed
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jan 23 20:55:17 2017 +0000

    doc: note that plugins are not fully baked
    
    Change-Id: I6341b8cce0b4a9922928f73f8b459cbb9ec25e79
    Reviewed-on: https://go-review.googlesource.com/35571
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 98842cabb6133ab7b8f2b323754a48085eed82f3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jan 24 17:52:54 2017 +0000

    net/http: don't send body on redirects for 301, 302, 303 when GetBody is set
    
    The presence of Request.GetBody being set on a request was causing all
    redirected requests to have a body, even if the redirect status didn't
    warrant one.
    
    This bug came from 307/308 support (https://golang.org/cl/29852) which
    removed the line that set req.Body to nil after POST/PUT redirects.
    
    Change-Id: I2a4dd5320f810ae25cfd8ea8ca7c9700e5dbd369
    Reviewed-on: https://go-review.googlesource.com/35633
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 314180e7f66b6768b0db026138a6fedc52b0c08b
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Jan 24 19:46:27 2017 +0900

    net/http: fix a nit
    
    Change-Id: I31fa5f906ad2e8dc475dbbeb91f568f91e16861b
    Reviewed-on: https://go-review.googlesource.com/35514
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit aad06da2b9b293fd245626fc8e116e3b56654dae
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Jan 23 17:30:41 2017 -0800

    cmd/link: mark DWARF function symbols as reachable
    
    Otherwise we don't emit any required ELF relocations when doing an
    external link, because elfrelocsect skips unreachable symbols.
    
    Fixes #18745.
    
    Change-Id: Ia3583c41bb6c5ebb7579abd26ed8689370311cd6
    Reviewed-on: https://go-review.googlesource.com/35590
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit be9dcfec293854bfb4a13737ba09801769daccbf
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jan 23 22:26:27 2017 +0000

    doc: mention testing.MainStart signature change
    
    Fixes #18766
    
    Change-Id: Ic0f72f3b7bbccd0546692993c4ed414f8c88c1c6
    Reviewed-on: https://go-review.googlesource.com/35573
    Reviewed-by: Russ Cox <rsc@golang.org>

commit a96e117a58dce1d55fd83a7b3391fa667dd66652
Author: Keith Randall <khr@golang.org>
Date:   Mon Jan 23 08:22:10 2017 -0800

    runtime: amd64, use 4-byte ops for memmove of 4 bytes
    
    memmove used to use 2 2-byte load/store pairs to move 4 bytes.
    When the result is loaded with a single 4-byte load, it caused
    a store to load fowarding stall.  To avoid the stall,
    special case memmove to use 4 byte ops for the 4 byte copy case.
    
    We already have a special case for 8-byte copies.
    386 already specializes 4-byte copies.
    I'll do 2-byte copies also, but not for 1.8.
    
    benchmark                 old ns/op     new ns/op     delta
    BenchmarkIssue18740-8     7567          4799          -36.58%
    
    3-byte copies get a bit slower.  Other copies are unchanged.
    name         old time/op   new time/op   delta
    Memmove/3-8   4.76ns ± 5%   5.26ns ± 3%  +10.50%  (p=0.000 n=10+10)
    
    Fixes #18740
    
    Change-Id: Iec82cbac0ecfee80fa3c8fc83828f9a1819c3c74
    Reviewed-on: https://go-review.googlesource.com/35567
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 4cce27a3fa0cc1f13afa6ffa358efa07144e00ec
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Jan 20 22:03:13 2017 -0500

    cmd/compile: fix constant propagation through s390x MOVDNE instructions
    
    The constant propagation rules selected the wrong operand to
    propagate. So MOVDNE (move if not equal) propagated operands as if
    it were a MOVDEQ (move if equal).
    
    Fixes #18735.
    
    Change-Id: I87ac469172f9df7d5aabaf7106e2936ce54ae202
    Reviewed-on: https://go-review.googlesource.com/35498
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1be957d703832aa10952c4dc799dcc3a39f48aff
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jan 19 22:07:20 2017 -0800

    misc/cgo/test: pass current environment to syscall.Exec
    
    This is needed for typical tests with gccgo, as it passes the
    LD_LIBRARY_PATH environment variable to the new program.
    
    Change-Id: I9bf4b0dbdff63f5449c7fcb8124eaeab10ed7f34
    Reviewed-on: https://go-review.googlesource.com/35481
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ec654e2251f0104ee63eff57fba2749da2f177e5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jan 19 22:04:45 2017 -0800

    misc/cgo/test: fix test when using GCC 7
    
    With GCC 7 (not yet released), cgo fails with errors like
    
    ./sigaltstack.go:65:8: call of non-function C.restoreSignalStack
    
    I do not know precisely why. Explicitly declaring that there are no
    arguments to the static function is a simple fix for the debug info.
    
    Change-Id: Id96e1cb1e55ee37a9f1f5ad243d7ee33e71584ac
    Reviewed-on: https://go-review.googlesource.com/35480
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 256a605faa10bc5507597c4669cc5bc400bf487a
Author: Keith Randall <khr@golang.org>
Date:   Fri Jan 20 09:54:10 2017 -0800

    cmd/compile: don't use nilcheck information until the next block
    
    When nilcheck runs, the values in a block are not in any particular
    order.  So any facts derived from examining the blocks shouldn't be
    used until we reach the next block.
    
    This is suboptimal as it won't eliminate nil checks within a block.
    But it's probably a better fix for now as it is a much smaller change
    than other strategies for fixing this bug.
    
    nilptr3.go changes are mostly because for this pattern:
      _ = *p
      _ = *p
    either nil check is fine to keep, and this CL changes which one
    the compiler tends to keep.
    There are a few regressions from code like this:
      _ = *p
      f()
      _ = *p
    For this pattern, after this CL we issue 2 nil checks instead of one.
    (For the curious, this happens because intra-block nil check
     elimination now falls to CSE, not nilcheck proper.  The former
     pattern has two nil checks with the same store argument.  The latter
     pattern has two nil checks with different store arguments.)
    
    Fixes #18725
    
    Change-Id: I3721b494c8bc9ba1142dc5c4361ea55c66920ac8
    Reviewed-on: https://go-review.googlesource.com/35485
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit e8d5989ed1272bed3600193003ebc9980bcb9275
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jan 20 08:11:34 2017 -0800

    cmd/compile: fix compilebench -alloc
    
    pprof.WriteHeapProfile is shorthand for
    pprof.Lookup("heap").WriteTo(f, 0).
    The second parameter is debug.
    If it is non-zero, pprof writes legacy-format
    pprof output, which compilebench can parse.
    
    Fixes #18641
    
    Change-Id: Ica69adeb9809e9b5933aed943dcf4a07910e43fc
    Reviewed-on: https://go-review.googlesource.com/35484
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ea7d9e6a52ca64c200dcc75621e75f209ceceace
Author: Bryan C. Mills <bcmills@google.com>
Date:   Wed Jan 18 15:12:18 2017 -0500

    runtime: check for nil g and m in msanread
    
    fixes #18707.
    
    Change-Id: Ibc4efef01197799f66d10bfead22faf8ac00473c
    Reviewed-on: https://go-review.googlesource.com/35452
    Run-TryBot: Bryan Mills <bcmills@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 59f181b6fda68ece22882945853ca2df9dbf1c88
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Jan 19 12:47:12 2017 -0800

    [release-branch.go1.8] go1.8rc2
    
    Change-Id: Ifcf2e13b962aa10280df8ca76cb21b37e3533f8f
    Reviewed-on: https://go-review.googlesource.com/35475
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d18087cb25d05b13f43e8bf83d0320e67a1d75a3
Merge: 3de6e96e4b 6593d8650d
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Jan 19 12:36:22 2017 -0800

    [release-branch.go1.8] all: merge master into release-branch.go1.8
    
    6593d8650d go/ast: fix Object's doc comment about Data
    c1730ae424 runtime: force workers out before checking mark roots
    d10eddcba3 testing: make parallel t.Run safe again
    2c8b70eacf crypto/x509: revert SystemCertPool implementation for Windows
    fcfd91858b doc/go1.8: document Plan 9 requirements
    81a61a96c9 runtime: for plugins, don't add duplicate itabs
    f674537cc9 README.md: update and simplify
    d8711919db cmd/go: fix bug help message
    48d8edb5b2 crypto/tls: disable CBC cipher suites with SHA-256 by default
    92ecd78933 cmd/compile: add ZeroWB case in writebarrier
    787125abab doc: 2017 is the Year of the Gopher
    5b708a6b6a cmd/compile: lvalues are only required for == when calling runtime fns
    e83d506714 vendor/golang_org/x/crypto/poly1305: revendor to pick up fix for #18673
    76f981c8d8 net/http: skip TestServerHijackGetsBackgroundByte on Plan 9
    e395e3246a net/http: skip TestServerHijackGetsBackgroundByte_big on Plan 9
    6a3c6c0de8 net/http: add another hijack-after-background-read test
    467109bf56 all: test adjustments for the iOS builder
    b2a3b54b95 net/http: make sure Hijack's bufio.Reader includes pre-read background byte
    593ea3b360 cmd/go, misc: rework cwd handling for iOS tests
    0642b8a2f1 syscall: export Fsid.X__val on s390x
    4601eae6ba doc/gdb: mention GOTRACEBACK=crash
    4c4c5fc7a3 misc/cgo/testplugin: test that types and itabs are unique
    22689c4450 reflect: keep makeFuncImpl live across makeFuncStub
    9cf06ed6cd cmd/link: only exclude C-only symbols on darwin
    9c3630f578 compress/flate: avoid large stack growth in fillDeflate
    4f0aac52d9 cmd/go: add comment about SIGUSR2 on iOS
    333f764df3 cmd/go, misc: switch from breakpoint to SIGUSR2
    39e31d5ec0 doc/go1.8: update timezone database version
    08da8201ca misc/cgo/testshared: test that types and itabs are unique
    fdde7ba2a2 runtime: avoid clobbering C callee-save register in cgoSigtramp
    f65abf6ddc cmd/compile: hide testdclstack behind debug flag
    641ef2a733 compress/gzip: skip TestGZIPFilesHaveZeroMTimes on non-builders
    0724aa813f crypto/dsa: gofmt
    ac05542985 net/http: deflake TestRetryIdempotentRequestsOnError
    b842c9aac7 doc: remove inline styles
    
    Change-Id: I642c056732fe1e8081e9d73e086e38ea0b2568cc

commit 6593d8650da5d19787bea9383dabe94f36fa04be
Author: Hironao OTSUBO <motemen@gmail.com>
Date:   Thu Jan 12 23:21:53 2017 +0900

    go/ast: fix Object's doc comment about Data
    
    The doc comment about the Data field of go/ast.Object reflects its old
    behavior, from when the go/types typechecker depended on ast.Objects.
    
    Since when the doc was written, the behavior has changed in
    https://golang.org/cl/7058060 and https://golang.org/cl/7096048 .
    
    Fixes #18631
    
    Change-Id: I10fc3e31cfbf7b303eec44150df917f6eb285f90
    Reviewed-on: https://go-review.googlesource.com/35075
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit c1730ae424449f38ea4523207a56c23b2536a5de
Author: Austin Clements <austin@google.com>
Date:   Tue Jan 17 21:58:10 2017 -0500

    runtime: force workers out before checking mark roots
    
    Currently we check that all roots are marked as soon as gcMarkDone
    decides to transition from mark 1 to mark 2. However, issue #16083
    indicates that there may be a race where we try to complete mark 1
    while a worker is still scanning a stack, causing the root mark check
    to fail.
    
    We don't yet understand this race, but as a simple mitigation, move
    the root check to after gcMarkDone performs a ragged barrier, which
    will force any remaining workers to finish their current job.
    
    Updates #16083. This may "fix" it, but it would be better to
    understand and fix the underlying race.
    
    Change-Id: I1af9ce67bd87ade7bc2a067295d79c28cd11abd2
    Reviewed-on: https://go-review.googlesource.com/35353
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit d10eddcba3e2cc90a822d80e7162f74501141eb8
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jan 18 00:05:32 2017 -0500

    testing: make parallel t.Run safe again
    
    Fixes #18603.
    
    Change-Id: I5760c0a9f862200b7e943058a672eb559ac1b9d9
    Reviewed-on: https://go-review.googlesource.com/35354
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2c8b70eacfc3fd2d86bd8e4e4764f11a2e9b3deb
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jan 17 21:24:17 2017 +0000

    crypto/x509: revert SystemCertPool implementation for Windows
    
    Updates #18609
    
    Change-Id: I8306135660f52cf625bed4c7f53f632e527617de
    Reviewed-on: https://go-review.googlesource.com/35265
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit fcfd91858b7b57de0577e98703390f604971eaf4
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Jan 18 01:10:18 2017 +0100

    doc/go1.8: document Plan 9 requirements
    
    Fixes #18610.
    
    Change-Id: I19da4d59a1b6293c9a4722aa696e2cb58d982a15
    Reviewed-on: https://go-review.googlesource.com/35333
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 81a61a96c9c9c67ac1256b443bd5a55ad8fafa0e
Author: Keith Randall <khr@golang.org>
Date:   Wed Jan 11 15:14:06 2017 -0800

    runtime: for plugins, don't add duplicate itabs
    
    We already do this for shared libraries. Do it for plugins also.
    Suggestions on how to test this would be welcome.
    
    I'd like to get this in for 1.8.  It could lead to mysterious
    hangs when using plugins.
    
    Fixes #18676
    
    Change-Id: I03209b096149090b9ba171c834c5e59087ed0f92
    Reviewed-on: https://go-review.googlesource.com/35117
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit f674537cc9dccb0e28ae58277c139d0fb2c5c09f
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Mon Jan 16 12:25:33 2017 +0100

    README.md: update and simplify
    
    Fixes #18675
    
    Change-Id: I82e63e8ee3fe4a998b01d9397c3045912588e2f5
    Reviewed-on: https://go-review.googlesource.com/35183
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d8711919dbddd8684eedee834041297388cf13a3
Author: gulyasm <mgulyas86@gmail.com>
Date:   Thu Jan 12 14:26:00 2017 +0100

    cmd/go: fix bug help message
    
    The bug subcommand opens up the browser instead of printing information.
    Fixes help message to reflect that.
    
    Fixes #18630.
    
    Change-Id: I660c94bc65ef1994292cfd72d08a544699545701
    Reviewed-on: https://go-review.googlesource.com/35150
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 48d8edb5b21db190f717e035b4d9ab61a077f9d7
Author: Filippo Valsorda <hi@filippo.io>
Date:   Mon Jan 16 23:54:45 2017 +0000

    crypto/tls: disable CBC cipher suites with SHA-256 by default
    
    As is, they were fully vulnerable to the Lucky13 attack. The SHA1
    variants implement limited countermeasures (see f28cf8346c4) but the
    SHA256 ones are apparently used rarely enough (see 8741504888b) that
    it's not worth the extra code.
    
    Instead, disable them by default and update the warning.
    
    Updates #13385
    Updates #15487
    
    Change-Id: I45b8b716001e2fa0811b17e25be76e2512e5abb2
    Reviewed-on: https://go-review.googlesource.com/35290
    Reviewed-by: Adam Langley <alangley@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matt Layher <mdlayher@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 92ecd7893308ad222bfdd33b10be1cce769a3cdf
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Jan 13 15:42:50 2017 -0500

    cmd/compile: add ZeroWB case in writebarrier
    
    It looks like it should be there, although I couldn't find a test
    case that fails without it. ZeroWB is probably never generated now:
    zeroing an initialized heap object is done by making an autotmp on
    stack, zeroing it, and copying (typedmemmove) to heap.
    
    Passes "toolstash -cmp" on std.
    
    Change-Id: I702a59759e33fb8cc2a34a3b3029e7540aca080a
    Reviewed-on: https://go-review.googlesource.com/35250
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 787125abab968ed681106146b68afa2c06b1cd69
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jan 16 01:48:42 2017 +0000

    doc: 2017 is the Year of the Gopher
    
    Change-Id: Iac713ae1f322f893c92b3fc47fe9b5719052f9eb
    Reviewed-on: https://go-review.googlesource.com/35240
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Symonds <dsymonds@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 5b708a6b6a57fb8022da58cd4c521d0ba77126fd
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jan 14 21:40:16 2017 -0800

    cmd/compile: lvalues are only required for == when calling runtime fns
    
    Fixes #18661.
    
    Change-Id: I865802a9b88ab22560c9914a70901d1924242bdc
    Reviewed-on: https://go-review.googlesource.com/35236
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e83d5067147ca6e82c1dc178eaeaf175c9f9db8e
Author: Shenghou Ma <minux@golang.org>
Date:   Sun Jan 15 20:39:10 2017 -0500

    vendor/golang_org/x/crypto/poly1305: revendor to pick up fix for #18673
    
    Fixes #18673.
    
    Change-Id: Ic827c16ad414733392c348da1c9ed9b308879fef
    Reviewed-on: https://go-review.googlesource.com/35260
    Run-TryBot: Minux Ma <minux@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 76f981c8d86ec122da50a140f8843eb636ac8240
Author: David du Colombier <0intro@gmail.com>
Date:   Sat Jan 14 14:13:58 2017 +0100

    net/http: skip TestServerHijackGetsBackgroundByte on Plan 9
    
    CL 5232 added TestServerHijackGetsBackgroundByte, which is failing
    on Plan 9, because CloseWrite is not implemented on Plan 9 yet.
    
    Updates #17906.
    Updates #18657.
    
    Change-Id: I3c2f73760b0f767f3f9ed2698c855372170e0481
    Reviewed-on: https://go-review.googlesource.com/35178
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e395e3246a2d643587dc53c61402d5413728c0c7
Author: David du Colombier <0intro@gmail.com>
Date:   Sat Jan 14 14:27:40 2017 +0100

    net/http: skip TestServerHijackGetsBackgroundByte_big on Plan 9
    
    CL 35234 added TestServerHijackGetsBackgroundByte_big, which is failing
    on Plan 9, because CloseWrite is not implemented on Plan 9 yet.
    
    Updates #17906.
    Updates #18658.
    
    Change-Id: Icaf3fe3600d586515ecd92aca874104ea81ce6b9
    Reviewed-on: https://go-review.googlesource.com/35179
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6a3c6c0de822d5fb426f21c20529c9222c1ebee0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Jan 14 03:19:54 2017 +0000

    net/http: add another hijack-after-background-read test
    
    Follow-up test from Ian's comments in https://golang.org/cl/35232
    after submit.
    
    Change-Id: Ifa504bd8d09e555c3c7738376199dfc9b99130cf
    Reviewed-on: https://go-review.googlesource.com/35234
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 467109bf56fb560d1fd8a27c6184dbfe4f64ffef
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Jan 13 22:08:27 2017 -0500

    all: test adjustments for the iOS builder
    
    The working directory is now adjusted to match the typical Go test
    working directory in main, as the old trick for adjusting earlier
    stopped working with the latest version of LLDB bugs.
    
    That means the small number of places where testdata files are
    read before main is called no longer work. This CL adjusts those
    reads to happen after main is called. (This has the bonus effect of
    not reading some benchmark testdata files in all.bash.)
    
    Fixes compress/bzip2, go/doc, go/parser, os, and time package
    tests on the iOS builder.
    
    Change-Id: If60f026aa7848b37511c36ac5e3985469ec25209
    Reviewed-on: https://go-review.googlesource.com/35255
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b2a3b54b9520ce869d79ac8bce836a540ba45d09
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Jan 13 21:43:56 2017 +0000

    net/http: make sure Hijack's bufio.Reader includes pre-read background byte
    
    Previously, if the Hijack called stopped the background read call
    which read a byte, that byte was sitting in memory, buffered, ready to
    be Read by Hijack's returned bufio.Reader, but it wasn't yet in the
    bufio.Reader's buffer itself, so bufio.Reader.Buffered() reported 1
    byte fewer.
    
    This matters for callers who wanted to stitch together any buffered
    data (with bufio.Reader.Peek(bufio.Reader.Buffered())) with Hijack's
    returned net.Conn. Otherwise there was no way for callers to know a
    byte was read.
    
    Change-Id: Id7cb0a0a33fe2f33d79250e13dbaa9c0f7abba13
    Reviewed-on: https://go-review.googlesource.com/35232
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 593ea3b3606a16da39e38406e22e373eeb944287
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Jan 13 07:18:40 2017 -0500

    cmd/go, misc: rework cwd handling for iOS tests
    
    Another change in behvaior (bug) in LLDB. Despite the fact that
    LLDB can dump the symtab of our test binaries and show the function
    addresses, it can no longer call the functions. This means the chdir
    trick on signal is failing.
    
    This CL uses a new trick. For iOS, the exec script passes the change
    in directory as an argument, and it is processed early by the test
    harness generated by cmd/go.
    
    For the iOS builders.
    
    Change-Id: I8f5d0f831fe18de99f097761f89c5184d5bf2afb
    Reviewed-on: https://go-review.googlesource.com/35152
    Reviewed-by: Elias Naur <elias.naur@gmail.com>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0642b8a2f1837901f31066b679173e89325b6be3
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Sep 30 11:12:01 2016 -0400

    syscall: export Fsid.X__val on s390x
    
    mkpost.go replaces all variables prefixed with 'X_' with '_' on s390x
    because most of them do not need to be exposed. X__val is being used
    by a third party library so it turns out we do need to expose it on
    s390x (it is already exposed on all other Linux architectures).
    
    Fixes #17298 and updates #18632.
    
    Change-Id: Ic03463229a5f75ca41a4a4b50300da4b4d892d45
    Reviewed-on: https://go-review.googlesource.com/30130
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4601eae6baed9c4bc6e38f035d1b6a20bb7ebbf7
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Mon Jan 9 19:11:58 2017 +0100

    doc/gdb: mention GOTRACEBACK=crash
    
    Also fix a couple of other errors.
    
    Fixes #6877
    
    Change-Id: I94c81c5847cc7b0adab19418e71687bc2ee7fe94
    Reviewed-on: https://go-review.googlesource.com/34960
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4c4c5fc7a3248c063b279ffb3a28a12f0c6de04b
Author: Keith Randall <khr@golang.org>
Date:   Wed Jan 11 15:08:08 2017 -0800

    misc/cgo/testplugin: test that types and itabs are unique
    
    Make sure that the same type and itab generated in two
    different plugins are actually the same thing.
    
    See also CL 35115
    
    Change-Id: I0c1ecb039d7e2bf5a601d58dfa162a435ae4ef76
    Reviewed-on: https://go-review.googlesource.com/35116
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 22689c445089501b2c9adc9b6556e2a5290d1584
Author: Austin Clements <austin@google.com>
Date:   Thu Jan 12 16:54:42 2017 -0500

    reflect: keep makeFuncImpl live across makeFuncStub
    
    When traceback sees reflect.makeFuncStub (or reflect.methodValueCall)
    on the stack, it expects to be able to get the *reflect.makeFuncImpl
    (or *reflect.methodValue) for that call from the first outgoing
    argument slot of makeFuncStub/methodValueCall.
    
    However, currently this object isn't necessarily kept live across
    makeFuncStub. This means it may get garbage collected while in a
    reflect call and reused for something else. If we then try to
    traceback, the runtime will see a corrupted makeFuncImpl object and
    panic. This was not a problem in previous releases because we always
    kept arguments live across the whole function. This became a problem
    when we stopped doing this.
    
    Fix this by using reflect.KeepAlive to keep the
    makeFuncImpl/methodValue live across all of callReflect/callMethod,
    which in turn keeps it live as long as makeFuncStub/methodValueCall
    are on the stack.
    
    Fixes #18635.
    
    Change-Id: I91853efcf17912390fddedfb0230648391c33936
    Reviewed-on: https://go-review.googlesource.com/35151
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9cf06ed6cd624ab1d84acbabf30d57b9753651c0
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Jan 12 17:35:53 2017 -0500

    cmd/link: only exclude C-only symbols on darwin
    
    C-only symbols are excluded from pclntab because of a quirk of darwin,
    where functions are referred to by an exported symbol so dynamic
    relocations de-duplicate to the host binary module and break unwinding.
    
    This doesn't happen on ELF systems because the linker always refers to
    unexported module-local symbols, so we don't need this condition.
    And the current logic for excluding some functions breaks the module
    verification code in moduledataverify1. So disable this for plugins
    on linux.
    
    (In 1.9, it will probably be necessary to introduce a module-local
    symbol reference system on darwin to fix a different bug, so all of
    this onlycsymbol code made be short-lived.)
    
    With this CL, the tests in CL 35116 pass.
    
    Change-Id: I517d7ca4427241fa0a91276c462827efb9383be9
    Reviewed-on: https://go-review.googlesource.com/35190
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9c3630f578db1d4331b367c3c7d284db299be3a6
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Jan 11 23:03:15 2017 -0800

    compress/flate: avoid large stack growth in fillDeflate
    
    Ranging over an array causes the array to be copied over to the
    stack, which cause large re-growths. Instead, we should iterate
    over slices of the array.
    
    Also, assigning a large struct literal uses the stack even
    though the actual fields being populated are small in comparison
    to the entirety of the struct (see #18636).
    
    Fixing the stack growth does not alter CPU-time performance much
    since the stack-growth and copying was such a tiny portion of the
    compression work:
    
    name                         old time/op    new time/op    delta
    Encode/Digits/Default/1e4-8     332µs ± 1%     332µs ± 1%   ~     (p=0.796 n=10+10)
    Encode/Digits/Default/1e5-8    5.07ms ± 2%    5.05ms ± 1%   ~       (p=0.815 n=9+8)
    Encode/Digits/Default/1e6-8    53.7ms ± 1%    53.9ms ± 1%   ~     (p=0.075 n=10+10)
    Encode/Twain/Default/1e4-8      380µs ± 1%     380µs ± 1%   ~     (p=0.684 n=10+10)
    Encode/Twain/Default/1e5-8     5.79ms ± 2%    5.79ms ± 1%   ~      (p=0.497 n=9+10)
    Encode/Twain/Default/1e6-8     61.5ms ± 1%    61.8ms ± 1%   ~     (p=0.247 n=10+10)
    
    name                         old speed      new speed      delta
    Encode/Digits/Default/1e4-8  30.1MB/s ± 1%  30.1MB/s ± 1%   ~     (p=0.753 n=10+10)
    Encode/Digits/Default/1e5-8  19.7MB/s ± 2%  19.8MB/s ± 1%   ~       (p=0.795 n=9+8)
    Encode/Digits/Default/1e6-8  18.6MB/s ± 1%  18.5MB/s ± 1%   ~     (p=0.072 n=10+10)
    Encode/Twain/Default/1e4-8   26.3MB/s ± 1%  26.3MB/s ± 1%   ~     (p=0.616 n=10+10)
    Encode/Twain/Default/1e5-8   17.3MB/s ± 2%  17.3MB/s ± 1%   ~      (p=0.484 n=9+10)
    Encode/Twain/Default/1e6-8   16.3MB/s ± 1%  16.2MB/s ± 1%   ~     (p=0.238 n=10+10)
    
    Updates #18636
    Fixes #18625
    
    Change-Id: I471b20339bf675f63dc56d38b3acdd824fe23328
    Reviewed-on: https://go-review.googlesource.com/35122
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4f0aac52d926270255fa2b682aca15e8ff404c59
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Jan 12 10:49:35 2017 -0500

    cmd/go: add comment about SIGUSR2 on iOS
    
    Missing from CL 34926.
    
    Change-Id: I4a046440c30811f26da53bee0e853dae3b0ac57a
    Reviewed-on: https://go-review.googlesource.com/35123
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 333f764df3d78930a5a3097fc34ac1374b7c3187
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Jan 7 17:41:00 2017 -0800

    cmd/go, misc: switch from breakpoint to SIGUSR2
    
    The iOS test harness has set a breakpoint early in the life of Go
    programs so that it can change the current working directory using
    information only available from the host debugger. Somewhere in the
    upgrade to iOS 10 / XCode 8.2, breakpoints stopped working. This
    may be an LLDB bug, or a bug in the ios-deploy LLDB scripts, it's
    not clear.
    
    Work around the problem by giving up on breakpoints. Instead, early
    in the life of every test binary built for iOS, send (and ignore) a
    SIGUSR2 signal. The debugger will catch this, giving the script
    go_darwin_arm_exec a chance to change the working directory.
    
    For the iOS builders.
    
    Change-Id: I7476531985217d0c76bc176904c48379210576c2
    Reviewed-on: https://go-review.googlesource.com/34926
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 39e31d5ec009037f359ba0ba8ada154ffbbb52d5
Author: Shenghou Ma <minux@golang.org>
Date:   Wed Jan 11 22:48:34 2017 -0500

    doc/go1.8: update timezone database version
    
    Fixes #18623.
    
    Change-Id: Ic965f5f7088c3270adbca7162226be486d1b9b4e
    Reviewed-on: https://go-review.googlesource.com/35130
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 08da8201ca3c2c1068fddf2ab33bc8eedae24ce4
Author: Keith Randall <khr@golang.org>
Date:   Wed Jan 11 15:02:16 2017 -0800

    misc/cgo/testshared: test that types and itabs are unique
    
    Make sure that the same type and itab generated in two
    different shared library are actually the same thing.
    
    Change-Id: Ica45862d65ff8bc7ad04d59a41f57223f71224cd
    Reviewed-on: https://go-review.googlesource.com/35115
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fdde7ba2a2d35839d26c09ca79f1d8f3398f6e02
Author: Bryan C. Mills <bcmills@google.com>
Date:   Wed Jan 11 17:39:41 2017 -0500

    runtime: avoid clobbering C callee-save register in cgoSigtramp
    
    Use R11 (a caller-saved temp register) instead of RBX (a callee-saved
    register).
    
    I believe this only affects linux/amd64, since it is the only platform
    with a non-trivial cgoSigtramp implementation.
    
    Updates #18328.
    
    Change-Id: I3d35c4512624184d5a8ece653fa09ddf50e079a2
    Reviewed-on: https://go-review.googlesource.com/35068
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f65abf6ddc8d1f3d403a9195fd74eaffa022b07f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jan 11 13:53:34 2017 -0800

    cmd/compile: hide testdclstack behind debug flag
    
    This reduces compilation time for the program
    in #18602 from 7 hours to 30 min.
    
    Updates #14781
    Updates #18602
    
    Change-Id: I3c4af878a08920e6373d3b3b0c4453ee002e32eb
    Reviewed-on: https://go-review.googlesource.com/35113
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 641ef2a73392b01382d7b2ffd34820fa36f5f9cf
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Jan 10 23:13:45 2017 -0800

    compress/gzip: skip TestGZIPFilesHaveZeroMTimes on non-builders
    
    Fixes #18604
    
    Change-Id: I89221d5e632042167dfced068e1dc14e932cd618
    Reviewed-on: https://go-review.googlesource.com/35111
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0724aa813fe485684e5eac15c2a317d9d8482f82
Author: Austin Clements <austin@google.com>
Date:   Wed Jan 11 11:36:07 2017 -0500

    crypto/dsa: gofmt
    
    Somehow this file didn't get gofmted after the last change, which
    interferes with merges.
    
    Change-Id: I965cfdbf27a01124a6ed300be9687ff84f68f9a1
    Reviewed-on: https://go-review.googlesource.com/35064
    Reviewed-by: Matt Layher <mdlayher@gmail.com>
    Reviewed-by: Adam Langley <agl@chromium.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matt Layher <mdlayher@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ac05542985ab2fac15f2a2c7b62afe29bdb15e5c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Jan 10 23:42:06 2017 +0000

    net/http: deflake TestRetryIdempotentRequestsOnError
    
    The test was previously an integration test, relying on luck and many
    goroutines and lots of time to hit the path to be tested.
    
    Instead, rewrite the test to exactly hit the path to be tested, in one
    try, in one goroutine.
    
    Fixes #18205
    
    Change-Id: I63cd513316344bfd7375dcc452c1c396dec0e49f
    Reviewed-on: https://go-review.googlesource.com/35107
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b842c9aac79318cfc66ab21efdb640f28e8bc5be
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Tue Jan 10 11:25:14 2017 -0800

    doc: remove inline styles
    
    Change-Id: I7ca7e9a2d4cf97cf33c60a9a4d0ba5fb0ca6e44c
    Reviewed-on: https://go-review.googlesource.com/35098
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 3de6e96e4b8147f5267a2e8218a7c780b09a434f
Author: Chris Broadfoot <cbro@golang.org>
Date:   Tue Jan 10 11:19:37 2017 -0800

    [release-branch.go1.8] go1.8rc1
    
    Change-Id: I68a99a4d750357dd59eb48f7c05b4dc08c64c92d
    Reviewed-on: https://go-review.googlesource.com/35097
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d9a05791566aa8d54113ac88ae77b982872f9be7
Author: David Chase <drchase@google.com>
Date:   Tue Jan 10 08:29:34 2017 -0500

    cmd/compile: disable flaky test
    
    The test is inherently racy and vulnerable to starvation,
    and within all.bash on some platforms that means it flakes.
    Test is kept because it can be useful standalone to verify
    behavior of GOEXPERIMENT=preeemptibleloops, and there is
    likely to be further development of this feature in the
    future.
    
    There's also some question as to why it is flaking, because
    though technically this is permitted, it's very odd in this
    simple case.
    
    Fixes #18589.
    
    Change-Id: Ia0dd9037285c4a03122da4012c96981c9cc43b60
    Reviewed-on: https://go-review.googlesource.com/35051
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 2817e77024a53aae31cc02c01a26fce0ebb11a79
Author: Austin Clements <austin@google.com>
Date:   Mon Dec 19 22:55:53 2016 -0500

    runtime: debug prints for spanBytesAlloc underflow
    
    Updates #18043.
    
    Change-Id: I24e687fdd5521c48b672987f15f0d5de9f308884
    Reviewed-on: https://go-review.googlesource.com/34612
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7f1ff65c3947b916cc4d0827fd8c1307d7efd7bf
Author: David Chase <drchase@google.com>
Date:   Thu Nov 10 16:03:47 2016 -0500

    cmd/compile: insert scheduling checks on loop backedges
    
    Loop breaking with a counter.  Benchmarked (see comments),
    eyeball checked for sanity on popular loops.  This code
    ought to handle loops in general, and properly inserts phi
    functions in cases where the earlier version might not have.
    
    Includes test, plus modifications to test/run.go to deal with
    timeout and killing looping test.  Tests broken by the addition
    of extra code (branch frequency and live vars) for added
    checks turn the check insertion off.
    
    If GOEXPERIMENT=preemptibleloops, the compiler inserts reschedule
    checks on every backedge of every reducible loop.  Alternately,
    specifying GO_GCFLAGS=-d=ssa/insert_resched_checks/on will
    enable it for a single compilation, but because the core Go
    libraries contain some loops that may run long, this is less
    likely to have the desired effect.
    
    This is intended as a tool to help in the study and diagnosis
    of GC and other latency problems, now that goal STW GC latency
    is on the order of 100 microseconds or less.
    
    Updates #17831.
    Updates #10958.
    
    Change-Id: I6206c163a5b0248e3f21eb4fc65f73a179e1f639
    Reviewed-on: https://go-review.googlesource.com/33910
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit f412bd31ce1859ea1dd0d46ec1b130c44b480115
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Dec 28 17:29:25 2016 -0800

    cmd/compile: file line number for //go:xxx directives
    
    Minimally invasive; fixes a regression from 1.7.
    
    Fixes #18459.
    
    Change-Id: I93b3b5c05706eaff8ae97a237f770838c1f8778c
    Reviewed-on: https://go-review.googlesource.com/34721
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a8871194f296383d313972da083e1b5f7513dfeb
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Jan 9 01:00:36 2017 -0800

    net/http: preserve original HTTP method when possible
    
    In Go1.7, a 301, 302, or 303 redirect on a HEAD method, would still
    cause the following redirects to still use a HEAD.
    In CL/29852 this behavior was changed such that those codes always
    caused a redirect with the GET method. Fix this such that both
    GET and HEAD will preserve the method.
    
    Fixes #18570
    
    Change-Id: I4bfe69872a30799419e3fad9178f907fe439b449
    Reviewed-on: https://go-review.googlesource.com/34981
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ffedff7e506cdf298f06ad36f3264ca197aa7d25
Author: Austin Clements <austin@google.com>
Date:   Sat Dec 24 17:03:10 2016 -0800

    runtime: add table of size classes in a comment
    
    Change-Id: I52fae67c9aeceaa23e70f2ef0468745b354f8c75
    Reviewed-on: https://go-review.googlesource.com/34932
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3156736189dbc4e4a4a955c78334590819c9a914
Author: gulyasm <mgulyas86@gmail.com>
Date:   Sat Jan 7 23:37:57 2017 +0100

    go/types: fix typo
    
    Fixes #18562
    
    Change-Id: Ic195a8606f09876e2667e4ef720b84a07d316f4a
    Reviewed-on: https://go-review.googlesource.com/34939
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1ede11d13a2a4ed63e9a6cf8b6039225749fa6ea
Author: Kevin Burke <kev@inburke.com>
Date:   Thu Dec 8 22:22:24 2016 -0800

    os/user: document the difference between Username and Name
    
    Fixes #18261.
    
    Change-Id: I4bd7363aac4e62461f61fd95b3c7a18063412182
    Reviewed-on: https://go-review.googlesource.com/34241
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 067bab00a80e028f1d7ce553b27aba2aa3e9675f
Author: shawnps <shawnpsmith@gmail.com>
Date:   Sat Jan 7 08:23:11 2017 -0800

    all: fix misspellings
    
    Change-Id: I429637ca91f7db4144f17621de851a548dc1ce76
    Reviewed-on: https://go-review.googlesource.com/34923
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Daniel Martí <mvdan@mvdan.cc>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8fa2344e98aa0eb2ef5a401847a4b760e9d19418
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jan 6 20:41:14 2017 -0800

    net/http: don't do a background read if we've already done one
    
    Fixes #18535
    
    Change-Id: I9e49d33ce357a534529a6b0fcdbc09ff4fa98622
    Reviewed-on: https://go-review.googlesource.com/34920
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1fbdae5c3ad9aaaf827bed14a5e1e4cbd547a37c
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Fri Jan 6 15:09:10 2017 -0800

    cmd/go: add link to env varible guide to set custom GOPATH
    
    Also moves the GOPATH env variable guide to
    golang.org/wiki/SettingGOPATH.
    
    Fixes #18294.
    
    Change-Id: I88a2ce550df7466f8d2388d86bc8476dcf3c2ad6
    Reviewed-on: https://go-review.googlesource.com/34918
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 66063b2da8a93b69e23381260f64c05d1589769c
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Jan 6 08:27:37 2017 +0900

    vendor: update golang.org/x/crypto/chacha20poly1305
    
    Updates golang.org/x/crypto/chacha20poly1305 to rev cb497ae for:
    - chacha20poly1305: fix detection of BMI on amd64 (https://golang.org/cl/34852)
    - chacha20poly1305: fix typos (https://golang.org/cl/34536)
    - chacha20poly1305: fix typos (https://golang.org/cl/33855)
    - chacha20poly1305: fix build constraints (https://golang.org/cl/32391)
    
    Change-Id: I3a608b5e21b3a72b5aaa5d0afe6c6cffbb1d6fc1
    Reviewed-on: https://go-review.googlesource.com/34871
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5ddfa69fef1be072c07a5f25b71c9d5158055ca9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Jan 6 22:45:17 2017 +0000

    doc: update CONTRIBUTING.md a bit, mention proposal process
    
    Fixes #18550
    
    Change-Id: Ia08d0ef6964216fcc14fa63c2ba378d68daa2c02
    Reviewed-on: https://go-review.googlesource.com/34917
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 116da1c64a2db0387f38f8d062378b62bf0f377e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Jan 6 12:25:32 2017 -0800

    net: disable RFC 6724 Rule 9 for IPv4 addresses
    
    Rule 9 arguably doesn't make sense for IPv4 addresses, and so far it
    has only caused problems (#13283, #18518). Disable it until we hear
    from users that actually want/need it.
    
    Fixes #18518.
    
    Change-Id: I7b0dd75d03819cab8e0cd4c29f0c1dc8d2e9c179
    Reviewed-on: https://go-review.googlesource.com/34914
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 41d2278eef7a834c0c5191c479a1ba4934c7ec0a
Author: David Chase <drchase@google.com>
Date:   Fri Dec 23 12:00:07 2016 -0500

    cmd/compile: rewrite literal.method to ensure full initialization
    
    CALLPART of STRUCTLIT did not check for incomplete initialization
    of struct; modify PTRLIT treatment to force zeroing.
    
    Test for structlit, believe this might have also failed for
    arraylit.
    
    Fixes #18410.
    
    Change-Id: I511abf8ef850e300996d40568944665714efe1fc
    Reviewed-on: https://go-review.googlesource.com/34622
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit a37b9e8e70fd8e614caa6077b3b8afb488f7f59e
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Thu Jan 5 12:28:06 2017 -0800

    doc: explain how to set GOPATH to a custom value
    
    Updates #18294.
    
    Change-Id: Ib6b84243a15ed921cc8960e5fa355fd7594181e6
    Reviewed-on: https://go-review.googlesource.com/34821
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b902a63ade47cf69218c9b38c9a783fc8cfc3041
Author: Russ Cox <rsc@golang.org>
Date:   Fri Jan 6 00:54:24 2017 -0500

    runtime: fix corruption crash/race between select and stack growth
    
    To implement the blocking of a select, a goroutine builds a list of
    offers to communicate (pseudo-g's, aka sudog), one for each case,
    queues them on the corresponding channels, and waits for another
    goroutine to complete one of those cases and wake it up. Obviously it
    is not OK for two other goroutines to complete multiple cases and both
    wake the goroutine blocked in select. To make sure that only one
    branch of the select is chosen, all the sudogs contain a pointer to a
    shared (single) 'done uint32', which is atomically cas'ed by any
    interested goroutines. The goroutine that wins the cas race gets to
    wake up the select. A complication is that 'done uint32' is stored on
    the stack of the goroutine running the select, and that stack can move
    during the select due to stack growth or stack shrinking.
    
    The relevant ordering to block and unblock in select is:
    
            1. Lock all channels.
            2. Create list of sudogs and queue sudogs on all channels.
            3. Switch to system stack, mark goroutine as asleep,
               unlock all channels.
            4. Sleep until woken.
            5. Wake up on goroutine stack.
            6. Lock all channels.
            7. Dequeue sudogs from all channels.
            8. Free list of sudogs.
            9. Unlock all channels.
    
    There are two kinds of stack moves: stack growth and stack shrinking.
    Stack growth happens while the original goroutine is running.
    Stack shrinking happens asynchronously, during garbage collection.
    
    While a channel listing a sudog is locked by select in this process,
    no other goroutine can attempt to complete communication on that
    channel, because that other goroutine doesn't hold the lock and can't
    find the sudog. If the stack moves while all the channel locks are
    held or when the sudogs are not yet or no longer queued in the
    channels, no problem, because no goroutine can get to the sudogs and
    therefore to selectdone. We only need to worry about the stack (and
    'done uint32') moving with the sudogs queued in unlocked channels.
    
    Stack shrinking can happen any time the goroutine is stopped.
    That code already acquires all the channel locks before doing the
    stack move, so it avoids this problem.
    
    Stack growth can happen essentially any time the original goroutine is
    running on its own stack (not the system stack). In the first half of
    the select, all the channels are locked before any sudogs are queued,
    and the channels are not unlocked until the goroutine has stopped
    executing on its own stack and is asleep, so that part is OK. In the
    second half of the select, the goroutine wakes up on its own goroutine
    stack and immediately locks all channels. But the actual call to lock
    might grow the stack, before acquiring any locks. In that case, the
    stack is moving with the sudogs queued in unlocked channels. Not good.
    One goroutine has already won a cas on the old stack (that goroutine
    woke up the selecting goroutine, moving it out of step 4), and the
    fact that done = 1 now should prevent any other goroutines from
    completing any other select cases. During the stack move, however,
    sudog.selectdone is moved from pointing to the old done variable on
    the old stack to a new memory location on the new stack. Another
    goroutine might observe the moved pointer before the new memory
    location has been initialized. If the new memory word happens to be
    zero, that goroutine might win a cas on the new location, thinking it
    can now complete the select (again). It will then complete a second
    communication (reading from or writing to the goroutine stack
    incorrectly) and then attempt to wake up the selecting goroutine,
    which is already awake.
    
    The scribbling over the goroutine stack unexpectedly is already bad,
    but likely to go unnoticed, at least immediately. As for the second
    wakeup, there are a variety of ways it might play out.
    
    * The goroutine might not be asleep.
    That will produce a runtime crash (throw) like in #17007:
    
            runtime: gp: gp=0xc0422dcb60, goid=2299, gp->atomicstatus=8
            runtime:  g:  g=0xa5cfe0, goid=0,  g->atomicstatus=0
            fatal error: bad g->status in ready
    
    Here, atomicstatus=8 is copystack; the second, incorrect wakeup is
    observing that the selecting goroutine is in state "Gcopystack"
    instead of "Gwaiting".
    
    * The goroutine might be sleeping in a send on a nil chan.
    If it wakes up, it will crash with 'fatal error: unreachable'.
    
    * The goroutine might be sleeping in a send on a non-nil chan.
    If it wakes up, it will crash with 'fatal error: chansend:
    spurious wakeup'.
    
    * The goroutine might be sleeping in a receive on a nil chan.
    If it wakes up, it will crash with 'fatal error: unreachable'.
    
    * The goroutine might be sleeping in a receive on a non-nil chan.
    If it wakes up, it will silently (incorrectly!) continue as if it
    received a zero value from a closed channel, leaving a sudog queued on
    the channel pointing at that zero vaue on the goroutine's stack; that
    space will be reused as the goroutine executes, and when some other
    goroutine finally completes the receive, it will do a stray write into
    the goroutine's stack memory, which may cause problems. Then it will
    attempt the real wakeup of the goroutine, leading recursively to any
    of the cases in this list.
    
    * The goroutine might have been running a select in a finalizer
    (I hope not!) and might now be sleeping waiting for more things to
    finalize. If it wakes up, as long as it goes back to sleep quickly
    (before the real GC code tries to wake it), the spurious wakeup does
    no harm (but the stack was still scribbled on).
    
    * The goroutine might be sleeping in gcParkAssist.
    If it wakes up, that will let the goroutine continue executing a bit
    earlier than we would have liked. Eventually the GC will attempt the
    real wakeup of the goroutine, leading recursively to any of the cases
    in this list.
    
    * The goroutine cannot be sleeping in bgsweep, because the background
    sweepers never use select.
    
    * The goroutine might be sleeping in netpollblock.
    If it wakes up, it will crash with 'fatal error: netpollblock:
    corrupted state'.
    
    * The goroutine might be sleeping in main as another thread crashes.
    If it wakes up, it will exit(0) instead of letting the other thread
    crash with a non-zero exit status.
    
    * The goroutine cannot be sleeping in forcegchelper,
    because forcegchelper never uses select.
    
    * The goroutine might be sleeping in an empty select - select {}.
    If it wakes up, it will return to the next line in the program!
    
    * The goroutine might be sleeping in a non-empty select (again).
    In this case, it will wake up spuriously, with gp.param == nil (no
    reason for wakeup), but that was fortuitously overloaded for handling
    wakeup due to a closing channel and the way it is handled is to rerun
    the select, which (accidentally) handles the spurious wakeup
    correctly:
    
            if cas == nil {
                    // This can happen if we were woken up by a close().
                    // TODO: figure that out explicitly so we don't need this loop.
                    goto loop
            }
    
    Before looping, it will dequeue all the sudogs on all the channels
    involved, so that no other goroutine will attempt to wake it.
    Since the goroutine was blocked in select before, being blocked in
    select again when the spurious wakeup arrives may be quite likely.
    In this case, the spurious wakeup does no harm (but the stack was
    still scribbled on).
    
    * The goroutine might be sleeping in semacquire (mutex slow path).
    If it wakes up, that is taken as a signal to try for the semaphore
    again, not a signal that the semaphore is now held, but the next
    iteration around the loop will queue the sudog a second time, causing
    a cycle in the wakeup list for the given address. If that sudog is the
    only one in the list, when it is eventually dequeued, it will
    (due to the precise way the code is written) leave the sudog on the
    queue inactive with the sudog broken. But the sudog will also be in
    the free list, and that will eventually cause confusion.
    
    * The goroutine might be sleeping in notifyListWait, for sync.Cond.
    If it wakes up, (*Cond).Wait returns. The docs say "Unlike in other
    systems, Wait cannot return unless awoken by Broadcast or Signal,"
    so the spurious wakeup is incorrect behavior, but most callers do not
    depend on that fact. Eventually the condition will happen, attempting
    the real wakeup of the goroutine and leading recursively to any of the
    cases in this list.
    
    * The goroutine might be sleeping in timeSleep aka time.Sleep.
    If it wakes up, it will continue running, leaving a timer ticking.
    When that time bomb goes off, it will try to ready the goroutine
    again, leading to any one of the cases in this list.
    
    * The goroutine cannot be sleeping in timerproc,
    because timerproc never uses select.
    
    * The goroutine might be sleeping in ReadTrace.
    If it wakes up, it will print 'runtime: spurious wakeup of trace
    reader' and return nil. All future calls to ReadTrace will print
    'runtime: ReadTrace called from multiple goroutines simultaneously'.
    Eventually, when trace data is available, a true wakeup will be
    attempted, leading to any one of the cases in this list.
    
    None of these fatal errors appear in any of the trybot or dashboard
    logs. The 'bad g->status in ready' that happens if the goroutine is
    running (the most likely scenario anyway) has happened once on the
    dashboard and eight times in trybot logs. Of the eight, five were
    atomicstatus=8 during net/http tests, so almost certainly this bug.
    The other three were atomicstatus=2, all near code in select,
    but in a draft CL by Dmitry that was rewriting select and may or may
    not have had its own bugs.
    
    This bug has existed since Go 1.4. Until then the select code was
    implemented in C, 'done uint32' was a C stack variable 'uint32 done',
    and C stacks never moved. I believe it has become more common recently
    because of Brad's work to run more and more tests in net/http in
    parallel, which lengthens race windows.
    
    The fix is to run step 6 on the system stack,
    avoiding possibility of stack growth.
    
    Fixes #17007 and possibly other mysterious failures.
    
    Change-Id: I9d6575a51ac96ae9d67ec24da670426a4a45a317
    Reviewed-on: https://go-review.googlesource.com/34835
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 5dd978a283ca445f8b5f255773b3904497365b61
Author: Austin Clements <austin@google.com>
Date:   Mon Dec 12 13:56:11 2016 -0500

    runtime: expand HACKING.md
    
    This adds high-level descriptions of the scheduler structures, the
    user and system stacks, error handling, and synchronization.
    
    Change-Id: I1eed97c6dd4a6e3d351279e967b11c6e64898356
    Reviewed-on: https://go-review.googlesource.com/34290
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 618c291544d4e1152e7ba5ce5b1b2988d1a7b50f
Author: Austin Clements <austin@google.com>
Date:   Thu Dec 22 17:30:23 2016 -0700

    runtime: update big mgc.go comment
    
    The comment describing the overall GC algorithm at the top of mgc.go
    has gotten woefully out-of-date (and was possibly never
    correct/complete). Update it to reflect the current workings of the
    GC and the set of phases that we now divide it into.
    
    Change-Id: I02143c0ebefe9d4cd7753349dab8045f0973bf95
    Reviewed-on: https://go-review.googlesource.com/34711
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit cb91dccd86ec07ecdc6cd227f0789372e3c75153
Author: Russ Cox <rsc@golang.org>
Date:   Fri Jan 6 01:17:24 2017 -0500

    net/http: better failure in TestTransportPersistConnLeak
    
    If one of the c.Get(ts.URL) results in an error, the child goroutine
    calls t.Errorf, but the test goroutine gets stuck waiting for <-gotReqCh,
    so the test hangs and the program is eventually killed (after 10 minutes!).
    Whatever might have been printed to t.Errorf is never seen.
    Adjust test so that the test fails cleanly in this case.
    
    Still trying to debug why c.Get might fail.
    It seems to have something to do with occasional connection
    failures on macOS Sierra.
    
    Change-Id: Ia797787bd51ea7cd6deb1192aec89c331c4f2c48
    Reviewed-on: https://go-review.googlesource.com/34836
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7aefdfded022f9775eb463156eda3a25a658a0ae
Author: Austin Clements <austin@google.com>
Date:   Fri Jan 6 09:44:41 2017 -0500

    runtime: use 4K as the boundary of legal pointers
    
    Currently, the check for legal pointers in stack copying uses
    _PageSize (8K) as the minimum legal pointer. By default, Linux won't
    let you map under 64K, but
    
    1) it's less clear what other OSes allow or will allow in the future;
    
    2) while mapping the first page is a terrible idea, mapping anywhere
    above that is arguably more justifiable;
    
    3) the compiler only assumes the first physical page (4K) is never
    mapped.
    
    Make the runtime consistent with the compiler and more robust by
    changing the bad pointer check to use 4K as the minimum legal pointer.
    
    This came out of discussions on CLs 34663 and 34719.
    
    Change-Id: Idf721a788bd9699fb348f47bdd083cf8fa8bd3e5
    Reviewed-on: https://go-review.googlesource.com/34890
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 867dcb5570919e3b0c7dc35662e604c7136cc68d
Author: Kevin Burke <kev@inburke.com>
Date:   Thu Jan 5 17:49:08 2017 -0800

    net: Fix grammar error
    
    Change-Id: I1c2e17b25ca91be37a18c47e70678c3753070fb8
    Reviewed-on: https://go-review.googlesource.com/34827
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit b07363da169413498908a9e959a9ee1c3d6fc2d0
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Dec 28 06:14:01 2016 +0900

    net: display the complete BUGS section on every platform
    
    We cannot assume that the platform running documentation service is
    the target platform.
    
    Change-Id: I241ed6f8778169faac9ef49e11dcd40f7422cccc
    Reviewed-on: https://go-review.googlesource.com/34750
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b03dce927b30db5dc36747d009ffeb435eea9c20
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Wed Jan 4 19:21:13 2017 -0700

    cmd/compile: avoid n.Right nil dereference on non-existent interface methods
    
    Fixes #18392.
    
    Avoid nil dereferencing n.Right when dealing with non-existent
    self referenced interface methods e.g.
    type A interface{
      Fn(A.Fn)
    }
    
    Instead, infer the symbol name from n.Sym itself.
    
    Change-Id: I60d5f8988e7318693e5c8da031285d8d7347b771
    Reviewed-on: https://go-review.googlesource.com/34817
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ea53e61c6c7ba2c7528b3e0a8d4680475897d679
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Jan 5 18:35:06 2017 +0000

    doc: add go get -insecure change to go1.8.html
    
    Change-Id: I184c86edaaaa71c26bc7360c8b995015f30fe137
    Reviewed-on: https://go-review.googlesource.com/34819
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 7d977e42797aa51a3867dee5a60031becb9a9d40
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Jan 5 18:10:19 2017 +0000

    cmd/go: use ProxyFromEnvironment in -insecure mode also
    
    Be consistent on whether the http proxy environment variables are
    respected regardless of whether -insecure is used.
    
    Updates #18519
    
    Change-Id: Ib157eaacfd342dd3bfcd03e64da18c98c609cae3
    Reviewed-on: https://go-review.googlesource.com/34818
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b820ef5c33c1b508c7b0df8827b6f13c9480acea
Author: Lion Yang <lion@aosc.xyz>
Date:   Thu Jan 5 06:25:59 2017 +0800

    x/crypto/chacha20poly1305: fix detection of BMI on AMD64
    
    This change uses runtime.support_bmi2 as an additional condition
    to examine the usability of AVX2 version algorithm, fixes
    the crash on the platfrom which supports AVX2 but not support BMI2.
    
    Fixes #18512
    
    Change-Id: I408c0844ae2eb242dacf70cb9e8cec1b8f3bd941
    Reviewed-on: https://go-review.googlesource.com/34851
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a2b615d5270f0bc2ee1dfcdd7849bdd05ee76a14
Author: Lion Yang <lion@aosc.xyz>
Date:   Thu Jan 5 05:13:53 2017 +0800

    crypto: detect BMI usability on AMD64 for sha1 and sha256
    
    The existing implementations on AMD64 only detects AVX2 usability,
    when they also contains BMI (bit-manipulation instructions).
    These instructions crash the running program as 'unknown instructions'
    on the architecture, e.g. i3-4000M, which supports AVX2 but not
    support BMI.
    
    This change added the detections for BMI1 and BMI2 to AMD64 runtime with
    two flags as the result, `support_bmi1` and `support_bmi2`,
    in runtime/runtime2.go. It also completed the condition to run AVX2 version
    in packages crypto/sha1 and crypto/sha256.
    
    Fixes #18512
    
    Change-Id: I917bf0de365237740999de3e049d2e8f2a4385ad
    Reviewed-on: https://go-review.googlesource.com/34850
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f5608c20f7b88c20fa2cd70090d9917df63f5c8e
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jan 4 14:12:56 2017 -0500

    .gitignore: fix attempt at rooted paths
    
    When I wrote the lines
    
            bin/
            pkg/
    
    I was trying to match just the top-level bin and pkg directories, and I put the
    final slash in because 'git help gitignore' says:
    
           o   If the pattern does not contain a slash /, Git treats it as a shell
               glob pattern and checks for a match against the pathname relative
               to the location of the .gitignore file (relative to the toplevel of
               the work tree if not from a .gitignore file).
    
           o   Otherwise, Git treats the pattern as a shell glob suitable for
               consumption by fnmatch(3) with the FNM_PATHNAME flag: wildcards in
               the pattern will not match a / in the pathname. For example,
               "Documentation/*.html" matches "Documentation/git.html" but not
               "Documentation/ppc/ppc.html" or
               "tools/perf/Documentation/perf.html".
    
    Putting a trailing slash was my way of opting in to the "rooted path" semantics
    without looking different from the surrounding rooted paths like "src/go/build/zcgo.go".
    
    But HA HA GIT FOOLED YOU! above those two bullets the docs say:
    
           o   If the pattern ends with a slash, it is removed for the purpose of
               the following description, ...
    
    Change all the patterns to use a leading slash for "rooted" behavior.
    
    This bit me earlier today because I had a perfectly reasonable source
    code directory go/src/cmd/go/testdata/src/empty/pkg that was
    not added by 'git add empty'.
    
    Change-Id: I6f8685b3c5be22029c33de9ccd735487089a1c03
    Reviewed-on: https://go-review.googlesource.com/34832
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c3fc9b4b81f84f08911ad81a38e388ca5f4462a5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Jan 5 00:52:04 2017 +0000

    lib/time: update tzdata to 2016j
    
    Fixes #18500
    
    Change-Id: I4dddd1b99aecf86b9431b0c14f452152dff9b95a
    Reviewed-on: https://go-review.googlesource.com/34816
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2547aec42a851603fe8091677a3fc5e3a5f731cd
Author: Kale Blankenship <kale@lemnisys.com>
Date:   Mon Jan 2 13:41:39 2017 -0800

    cmd/go: retain test binary when go test is run with -mutexprofile
    
    Fixes #18494
    
    Change-Id: I8a190acae6d5f1d20d4e4e4547d84e10e8a7fe68
    Reviewed-on: https://go-review.googlesource.com/34793
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 2815045a50862276082048714337f95c46e98605
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jan 4 21:23:00 2017 +0000

    net/http/httputil: make DumpRequest and DumpRequestOut recognize http.NoBody
    
    Fixes #18506
    
    Change-Id: I6b0b107296311178938609e878e1ef47a30a463f
    Reviewed-on: https://go-review.googlesource.com/34814
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ecac827573ab1500551f2d7ffb98c06422abda9a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jan 4 21:03:24 2017 +0000

    net/http: make Server cancel its ReadTimeout between requests
    
    Fixes #18447
    
    Change-Id: I5d60c3632a5ce625d3bac9d85533ce689e301707
    Reviewed-on: https://go-review.googlesource.com/34813
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7fb16406139e934d84f7ec66ba440a772747270a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jan 4 10:13:18 2017 -0800

    testing: add missing newlines to error messages
    
    No test because in practice these errors never occur.
    
    Change-Id: I11c77893ae931fc621c98920cba656790d18ed93
    Reviewed-on: https://go-review.googlesource.com/34811
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3fa53f1229956a8874d58e6d80a4433b57fc82ac
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jan 4 10:30:28 2017 -0500

    cmd/go: add sync/atomic dependency when needed by test coverage
    
    Fixes #18486.
    
    Change-Id: I359dc4169e04b4123bd41679ea939b06fa754ac2
    Reviewed-on: https://go-review.googlesource.com/34830
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 20cdb62c499140bcd3c42f89be0d5b4ede683f42
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jan 4 13:37:33 2017 -0500

    doc: in Go 1.8 notes, mention lack of RWMutex in contention profile
    
    For #18496.
    
    Change-Id: I50ced7c9f0fe5d9c627eef1f59a7f73be742e04c
    Reviewed-on: https://go-review.googlesource.com/34831
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f64b7d301d8f22efb9b539f8ac4db60aedf182c6
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jan 4 09:24:33 2017 -0500

    cmd/link: use 64k segment alignment on linux/arm
    
    Otherwise 64k pages don't map correctly.
    
    Fixes #18408.
    
    Change-Id: I85f56682531566d1ff5c655640cd58509514aee8
    Reviewed-on: https://go-review.googlesource.com/34629
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 6a1cac27005f5e37c9c4acd0f63121e61b41ae3c
Author: Michael Marineau <mike@marineau.org>
Date:   Tue Jan 3 00:15:05 2017 -0800

    runtime: check sched_getaffinity return value
    
    Android on ChromeOS uses a restrictive seccomp filter that blocks
    sched_getaffinity, leading this code to index a slice by -errno.
    
    Change-Id: Iec09a4f79dfbc17884e24f39bcfdad305de75b37
    Reviewed-on: https://go-review.googlesource.com/34794
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit d698e614a21cd50055c7c5e7100069d2bcdb9b83
Author: Rob Pike <r@golang.org>
Date:   Sun Dec 25 08:51:21 2016 +1100

    cmd/vet: include function name or value in copylock message
    
    Given
            var t struct{ lock sync.Mutex }
            var fntab []func(t)
            f(a(), b(&t), c(), fntab[0](t))
    
    Before:
            function call copies lock value: struct{lock sync.Mutex} contains sync.Mutex
    
    After:
            call of fntab[0] copies lock value: struct{lock sync.Mutex} contains sync.Mutex
    
    This will make diagnosis easier when there are multiple function calls per line.
    
    Change-Id: I9881713c5671b847b84a0df0115f57e7cba17d72
    Reviewed-on: https://go-review.googlesource.com/34730
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 161cd34f788ee9c6b61565eb6f865434bc135306
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Jan 3 12:41:18 2017 -0500

    cmd/dist: enable extLink tests for s390x
    
    Change-Id: Ia97d770cd942a49a34c733643ced7490fc31c736
    Reviewed-on: https://go-review.googlesource.com/34795
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f09462707fb74ec576b9bd363392c7d6028177e0
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 27 16:46:11 2016 +0100

    cmd/dist: enable extLink tests for mips{,le}
    
    Change-Id: I9e37aece5ace374e89bee70962a19f76ae3266bc
    Reviewed-on: https://go-review.googlesource.com/34646
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 155d314e50fb771e3106c6a890bb45887df22331
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 27 16:26:41 2016 +0100

    runtime: fix SP alignment in mips{,le} sigfwd
    
    Fixes misc/cgo/testsigfwd, enabled for mips{,le} with the next commit
    (https://golang.org/cl/34646).
    
    Change-Id: I2bec894b0492fd4d84dd73a4faa19eafca760107
    Reviewed-on: https://go-review.googlesource.com/34645
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit af7bc070490fb2024102ac9a2c8f598bcb481bc7
Author: Kevin Burke <kev@inburke.com>
Date:   Mon Jan 2 13:19:31 2017 -0800

    database/sql: fix typo and wording
    
    Clean up the phrasing a little bit, make the comment fit in 80
    characters, and fix the spelling of "guard."
    
    Change-Id: I688a3e760b8d67ea83830635f64dff04dd9a5911
    Reviewed-on: https://go-review.googlesource.com/34792
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9def857072bb708a79c291bb88c4b2830f0a8376
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Mon Dec 26 11:33:46 2016 -0800

    database/sql: prevent Tx.rollback from racing Tx.close
    
    Previously Tx.done was being set in close, but in a Tx
    rollback and Commit are the real closing methods,
    and Tx.close is just a helper common to both. Prior to this
    change a multiple rollback statements could be called, one
    would enter close and begin closing it while the other was
    still in rollback breaking it. Fix that by setting done
    in rollback and Commit, not in Tx.close.
    
    Fixes #18429
    
    Change-Id: Ie274f60c2aa6a4a5aa38e55109c05ea9d4fe0223
    Reviewed-on: https://go-review.googlesource.com/34716
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f78cd569f52d5c44792f932ebbd01a71231f38b2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Jan 1 21:51:41 2017 -0800

    cmd/link: don't suggest using nm to find -X name
    
    It doesn't work if the package name includes a '.' or a non-ASCII
    character (or '%', '"', or a control character).  See #16710 and CL 31970.
    
    Update #18246.
    
    Change-Id: I1487f462a3dc7b0016fce3aa1ea6239b226e6e39
    Reviewed-on: https://go-review.googlesource.com/34791
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e776975ae61e8db6ff5db33b039513c9d8524794
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Dec 31 18:35:15 2016 +0000

    net/http: update bundled http2 for Server WriteTimeout change
    
    Updates http2 to x/net/http2 git rev 8fd7f25 for:
    
        http2: clear WriteTimeout in Server
        https://golang.org/cl/34724
    
    And un-skip the new test. (The new test is a slow test, anyway, so
    won't affect builders or all.bash, but I verified it now passes.)
    
    Updates #18437
    
    Change-Id: Ia91ae702edfd23747a9d6b61da284a5a957bfed3
    Reviewed-on: https://go-review.googlesource.com/34729
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Kale B <kale@lemnisys.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b63ca1e9743571e37c42350d3931400fe4c89386
Author: Kale Blankenship <kale@lemnisys.com>
Date:   Wed Dec 28 19:25:44 2016 -0800

    net/http: add test for http2 Server WriteTimeout
    
    Current handling of WriteTimeout for http2 does not
    extend the timeout on new streams. Disable the WriteTimeout
    in http2 for 1.8 release.
    
    Updates #18437
    
    Change-Id: I20480432ab176f115464434645defb56ebeb6ece
    Reviewed-on: https://go-review.googlesource.com/34723
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9e199702c829d303ebe001a09c47aa4ec3b3ff81
Author: Mike Wiacek <mjwiacek@google.com>
Date:   Wed Dec 28 16:15:35 2016 -0800

    net/http/httputil: clarify the contract on ReverseProxy's Director.
    
    Avoid potential race conditions by clarifying to implemntors of the
    ReverseProxy interface, the lifetime of provided http.Request structs.
    
    Fixes #18456
    Change-Id: I46aa60322226ecc3a0d30fa1ef108e504171957a
    Reviewed-on: https://go-review.googlesource.com/34720
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9719ca9c0e6fdda273cd178e6cce6b88d738518e
Author: Dmitri Shuralyov <shurcooL@gmail.com>
Date:   Wed Dec 28 14:24:08 2016 -0500

    cmd/go: fix two formatting issues in documentation of testing flags
    
    Remove unneeded second colon.
    
    Remove unneeded space at the beginning of a line (before a tab).
    
    Regenerate alldocs.go with mkalldocs.sh.
    
    Updates https://golang.org/cl/28783.
    Updates https://golang.org/cl/29650.
    Fixes #18448.
    
    Change-Id: I1830136a2b760827d4cec565744807a0fd147584
    Reviewed-on: https://go-review.googlesource.com/34718
    Reviewed-by: Rob Pike <r@golang.org>

commit 5bfba30d3325d87ef89dd877f05e5d1e2d618bc3
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sat Dec 24 00:06:02 2016 -0800

    cmd/compile: lock-in test for repeated variables in range declaration
    
    Fixes #6772.
    
    Lock-in test for invalid range loop: repeated variables in range declaration.
    
    Change-Id: I37dd8b1cd7279abe7810deaf8a5d485c5c3b73ca
    Reviewed-on: https://go-review.googlesource.com/34714
    Reviewed-by: Keith Randall <khr@golang.org>

commit d160982a2ef9193384fb3c66939db0fb37a21ba3
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Mon Dec 19 19:28:17 2016 +0200

    cmd/vet: fix copylocks false positive on len(array) and cap(array).
    
    This is a follow-up for https://golang.org/cl/24340.
    
    Updates #14664.
    Fixes #18374.
    
    Change-Id: I2831556a9014d30ec70d5f91943d18c33db5b390
    Reviewed-on: https://go-review.googlesource.com/34630
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a3f4cc06694c8b0bcf14ad36ebc10e66321e3d0f
Author: Austin Clements <austin@google.com>
Date:   Thu Dec 22 18:17:32 2016 -0700

    runtime: document MemStats.BySize fields
    
    Change-Id: Iae8cdcd84e9b5f5d7c698abc6da3fc2af0ef839a
    Reviewed-on: https://go-review.googlesource.com/34710
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>

commit c8f1436948ca267dc904cf04c67bab7367503107
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Fri Dec 23 03:23:10 2016 -0800

    test: lock in test for _ assignment evaluation/zerodivide panic
    
    Fixes #5790.
    Fixes #18421.
    
    * Lock in _ = x1/x2 divide by zero runtime panics since
    it is actually evaluated and not discarded as in previous
    versions before Go1.8.
    * Update a test that was skipping over zerodivide tests
    that expected runtime panics, enabling us to check for
    the expected panics.
    
    Change-Id: I0af0a6ecc19345fa9763ab2e35b275fb2d9d0194
    Reviewed-on: https://go-review.googlesource.com/34712
    Reviewed-by: Keith Randall <khr@golang.org>

commit db07c9ecb617117a86364e9e03acd6f7937e1732
Author: Kevin Burke <kev@inburke.com>
Date:   Thu Dec 22 17:21:31 2016 -0800

    net: Fix spelling of function name in doc
    
    Change-Id: I24c6d312f7d0ce52e1958e8031fc8249af0dfca9
    Reviewed-on: https://go-review.googlesource.com/34669
    Reviewed-by: Minux Ma <minux@golang.org>

commit 8887be4654a49d8644d35661f2d71c970ba6dc02
Author: Raul Silvera <rsilvera@google.com>
Date:   Wed Dec 21 10:16:15 2016 -0800

    cmd/pprof: Re-enable weblist and disasm
    
    Previous changes started using the full filename for object files
    on graph nodes, instead of just the file basename. The basename
    was still being used when selecting mappings to disassemble for
    weblist and disasm commands, causing a mismatch.
    
    This fixes #18385. It was already fixed on the upstream pprof.
    
    Change-Id: I1664503634f2c8cd31743561301631f12c4949c9
    Reviewed-on: https://go-review.googlesource.com/34665
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6e36811c37399d60cbce587b7c48e611009c5aec
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 21:45:59 2016 +0000

    net/http: restore Transport's Request.Body byte sniff in limited cases
    
    In Go 1.8, we'd removed the Transport's Request.Body
    one-byte-Read-sniffing to disambiguate between non-nil Request.Body
    with a ContentLength of 0 or -1. Previously, we tried to see whether a
    ContentLength of 0 meant actually zero, or just an unset by reading a
    single byte of the Request.Body and then stitching any read byte back
    together with the original Request.Body.
    
    That historically has caused many problems due to either data races,
    blocking forever (#17480), or losing bytes (#17071). Thus, we removed
    it in both HTTP/1 and HTTP/2 in Go 1.8. Unfortunately, during the Go
    1.8 beta, we've found that a few people have gotten bitten by the
    behavior change on requests with methods typically not containing
    request bodies (e.g. GET, HEAD, DELETE). The most popular example is
    the aws-go SDK, which always set http.Request.Body to a non-nil value,
    even on such request methods. That was causing Go 1.8 to send such
    requests with Transfer-Encoding chunked bodies, with zero bytes,
    confusing popular servers (including but limited to AWS).
    
    This CL partially reverts the no-byte-sniffing behavior and restores
    it only for GET/HEAD/DELETE/etc requests, and only when there's no
    Transfer-Encoding set, and the Content-Length is 0 or -1.
    
    Updates #18257 (aws-go) bug
    And also private bug reports about non-AWS issues.
    
    Updates #18407 also, but haven't yet audited things enough to declare
    it fixed.
    
    Change-Id: Ie5284d3e067c181839b31faf637eee56e5738a6a
    Reviewed-on: https://go-review.googlesource.com/34668
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f419b56354aee87c5173253e2d19cc51cc269f3c
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Dec 22 18:31:17 2016 +0100

    runtime: skip floating point hardware check on Android
    
    CL 33652 removed the fake auxv for Android, and replaced it with
    a /proc/self/auxv fallback. When /proc/self/auxv is unreadable,
    however, hardware capabilities detection won't work and the runtime
    will mistakenly think that floating point hardware is unavailable.
    
    Fix this by always assuming floating point hardware on Android.
    
    Manually tested on a Nexus 5 running Android 6.0.1. I suspect the
    android/arm builder has a readable /proc/self/auxv and therefore
    does not trigger the failure mode.
    
    Change-Id: I95c3873803f9e17333c6cb8b9ff2016723104085
    Reviewed-on: https://go-review.googlesource.com/34641
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 17190343e3db72a3f299e5a4359ae6bc3e5ed194
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Dec 22 08:59:52 2016 +0900

    cmd/go: skip flaky TestCgoConsistentResults on FreeBSD
    
    FreeBSD 11 or above uses clang-3.6 or higher by default.
    
    Updates #15405.
    
    Change-Id: If49ce298130165f9e1525c7fd0fd5aa39099ad53
    Reviewed-on: https://go-review.googlesource.com/34675
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d2512aff877a91e8cf8fa97602297f17e5b5d3f2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Dec 21 13:50:28 2016 -0800

    misc/cgo/test: limit issue18146 attempts based on RLIMIT_NPROC
    
    Fixes #18381.
    
    Change-Id: I0a476cd7f6182c8d4646628477c56c133d5671ee
    Reviewed-on: https://go-review.googlesource.com/34667
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d51046b37ce382bbca0de7277721567e1ee0146a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Dec 21 20:48:09 2016 +0000

    doc: fix install.html unclosed bold tag, link to /help/
    
    Fixes #18406
    
    Change-Id: Ifd7342fa8de1d2cac47b9279c1f14ac127ac193c
    Reviewed-on: https://go-review.googlesource.com/34666
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit f24384f686745f95086e7f400e884a218f4456d3
Author: Austin Clements <austin@google.com>
Date:   Tue Dec 20 15:37:56 2016 -0500

    runtime: avoid CreateThread panic when exiting process
    
    On Windows, CreateThread occasionally fails with ERROR_ACCESS_DENIED.
    We're not sure why this is, but the Wine source code suggests that
    this can happen when there's a concurrent CreateThread and ExitProcess
    in the same process.
    
    Fix this by setting a flag right before calling ExitProcess and
    halting if CreateThread fails and this flag is set.
    
    Updates #18253 (might fix it, but we're not sure this is the issue and
    can't reproduce it on demand).
    
    Change-Id: I1945b989e73a16cf28a35bf2613ffab07577ed4e
    Reviewed-on: https://go-review.googlesource.com/34616
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c44da14440e5a2e412f9b1d3f5f2f562591d8e49
Author: Kirill Smelkov <kirr@nexedi.com>
Date:   Thu Dec 1 21:40:57 2016 +0300

    cmd/compile/internal/ssa: add tests for BSWAP on stores on AMD64
    
    Commit 10f75748 (CL 32222) taught AMD64 backend to rewrite series of
    byte loads or stores with corresponding shifts into a single long or
    quad load or store + appropriate BSWAP. However it did not added test
    for stores - only loads were tested.
    
    Fix it.
    
    NOTE Tests for indexed stores are not added because 10f75748 did not add
    support for indexed stores - only indexed loads were handled then.
    
    Change-Id: I48c867ebe7622ac8e691d43741feed1d40cca0d7
    Reviewed-on: https://go-review.googlesource.com/34634
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d296c3235d47ab1a0e5077dfcfbc3e14854e38c5
Author: Kirill Smelkov <kirr@nexedi.com>
Date:   Tue Dec 20 12:02:39 2016 +0300

    io: fix PipeWriter.Close to wake up Writes
    
    Since commit cc62bed0 (CL 994043) the pipe deadlock when doing
    Read+Close or Write+Close on same end was fixed, alas with test for
    Read+Close case only.
    
    Then commit 6d6f3381 (CL 4252057) made a thinko: in the writer path
    p.werr is checked for != nil and then err is set but there is no break
    from waiting loop unlike break is there in similar condition for reader.
    Together with having only Read+Close case tested that made it to leave
    reintroduced Write+Close deadlock unnoticed.
    
    Fix it.
    
    Implicitly this also fixes net.Pipe to conform to semantic of net.Conn
    interface where Close is documented to unblock any blocked Read or Write
    operations.
    
    No test added to net/ since net.Pipe tests are "Assuming that the
    underlying io.Pipe implementation is solid and we're just testing the
    net wrapping". The test added in this patch should be enough to cover
    the breakage.
    
    Fixes #18401
    Updates #18170
    
    Change-Id: I9e9460b3fd7d220bbe60b726accf86f352aed8d4
    Reviewed-on: https://go-review.googlesource.com/34637
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 0ef4815150782a47cde25937349f9c4441b0e78e
Author: Koichi Shiraishi <zchee.io@gmail.com>
Date:   Wed Dec 21 15:50:26 2016 +0900

    build: fix darwin/arm broken on macOS 10.12 with Xcode 8.0
    
    Xcode 8.0 has been donen't support the iOS 5 anymore
    
    Fixes #18390.
    
    Change-Id: Icc97e09424780c610a8fe173d0cf461d76b06da4
    Reviewed-on: https://go-review.googlesource.com/34673
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 8599c0da1f7ffc1f230ee49ddb9838a5caff358a
Author: Takuya Ueda <uedatakuya@gmail.com>
Date:   Wed Dec 21 12:43:05 2016 +0900

    go/parser: fix reference in ParseExprFrom docs
    
    The ParseExprFrom docs refer to Parse. It meant ParseFile.
    
    Fixes #18398
    
    Change-Id: I06fb3b5178c6319e86199823fe4769a8eb9dc49c
    Reviewed-on: https://go-review.googlesource.com/34671
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 09c411da1dd2c02c8f6ed5bc147ac779d55a2ce6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Dec 21 03:24:08 2016 +0000

    Revert "cmd/go: note when some Go files were ignored on no-Go-files errors"
    
    This reverts commit eee727d0855b9e78f9df87e08d57b1d7f264876c
    (https://golang.org/cl/29113)
    
    The " (.go files ignored due to build tags)" error message is not
    always accurate.
    
    Fixes #18396
    Updates #17008
    
    Change-Id: I609653120603a7f6094bc1dc3a83856f4b259241
    Reviewed-on: https://go-review.googlesource.com/34662
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 27fb26c77c0374ec1876223593078e4d6b98d4f0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Dec 20 18:16:17 2016 -0800

    cmd/vet: avoid crash in cgo test on recursive type
    
    This CL also re-enables the cgo tests that were accidentally disabled
    in CL 32754.
    
    Fixes #18389.
    
    Change-Id: I2fdc4fe3ec1f92b7da3db3fa66f4e0f806fc899f
    Reviewed-on: https://go-review.googlesource.com/34660
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9c6a5ef9227736f1fd8aa0c36cef78193ec11d62
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 20 19:32:47 2016 +0000

    A+C: automated update
    
    Now with a few more repos included.
    
    Add Albert Yu (individual CLA)
    Add Alessandro Baffa (individual CLA)
    Add Alexandre Fiori (individual CLA)
    Add Andrew Austin (individual CLA)
    Add Andy Finkenstadt (individual CLA)
    Add Antonio Bibiano (individual CLA)
    Add Baiju Muthukadan (individual CLA)
    Add Ben Lubar (individual CLA)
    Add Euan Kemp (individual CLA)
    Add Harry Moreno (individual CLA)
    Add Jason Buberel (corporate CLA for Google Inc.)
    Add Joop Kiefte (individual CLA)
    Add Maksym Trykur (individual CLA)
    Add Mathieu Olivier (individual CLA)
    Add Nick Leli (individual CLA)
    Add Nik Nyby (individual CLA)
    Add Quinn Slack (corporate CLA for Sourcegraph Inc)
    Add Rafal Jeczalik (individual CLA)
    Add Raphael Geronimi (individual CLA)
    Add Ryan Bagwell (individual CLA)
    Add Steve Francia (corporate CLA for Google Inc.)
    Add Tristan Colgate (individual CLA)
    Add Фахриддин Балтаев (individual CLA)
    
    Updates #12042
    
    Change-Id: Iab98da8a7a9fd3ee54f716ea358b2d515e1e32c4
    Reviewed-on: https://go-review.googlesource.com/34658
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 86f2c5fe930b25ff69017002c36880c88157188e
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Dec 20 17:39:54 2016 +0900

    net: make InterfaceByIndex return a consistent name on solaris
    
    Also retightens test cases for Resolve{TCP,UDP,IP}Addr which are using
    interface names for specifying IPv6 zone.
    
    Updates #14037.
    Fixes #18362.
    
    Change-Id: I7444b6302e2847dfbdab8a0ad5b2e702bed1a3d6
    Reviewed-on: https://go-review.googlesource.com/34670
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 985a574991207a74ab45ce76ecf54228734ddffe
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Dec 20 22:33:06 2016 +0100

    net: fix LookupCNAME on Plan 9
    
    In CL 34650, LookupCNAME was changed so it always returns
    the canonical DNS host, even when there is no CNAME record.
    
    Consequently, TestLookupCNAME was failing on Plan 9,
    because www.google.com doesn't have a CNAME record.
    
    We changed the implementation of lookupCNAME on Plan 9, so it
    returns the canonical DNS host after a CNAME lookup failure.
    
    Fixes #18391.
    
    Change-Id: I59f361bfb2c9de3953e998e8ac58c054979210bd
    Reviewed-on: https://go-review.googlesource.com/34633
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6e87f8896106c9a673c3c049c83ef389178cef82
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 20 18:24:40 2016 +0100

    doc: add mips, mips64 information to asm.html
    
    Fixes #18105
    
    Change-Id: Id56e8782ff618761ec44b6dc20891c8b48fea8df
    Reviewed-on: https://go-review.googlesource.com/34632
    Reviewed-by: Rob Pike <r@golang.org>

commit 2eae691d56125c62e0e5f0e4a3bd42e67e423f01
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 20 17:59:37 2016 +0000

    net/http, doc: more redirect documentation
    
    Updates #18347
    Updates #9348
    
    Change-Id: I115203b0be3eb2e7e269ff28e2f3c47eeca86038
    Reviewed-on: https://go-review.googlesource.com/34657
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 8df54c92c0d442d8de2887aa0e508c9072cce131
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 20 17:35:27 2016 +0000

    net: mark TestDialerDualStackFDLeak as flaky on OpenBSD
    
    Updates #15157
    
    Change-Id: Id280705f4382c3b2323f0eed786a400a184614de
    Reviewed-on: https://go-review.googlesource.com/34656
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f9dee9293e68fe588ffad445efae38e33be8d59
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Dec 19 13:05:53 2016 -0800

    net: make LookupCNAME's native behavior match its cgo behavior
    
    Fixes #18172.
    
    Change-Id: I4a21fb5c0753cced025a03d88a6dd1aa3ee01d05
    Reviewed-on: https://go-review.googlesource.com/34650
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>

commit 0c942e8f2c6aeedfe672fdd0c2549ac39505cd75
Author: Austin Clements <austin@google.com>
Date:   Mon Dec 19 22:43:38 2016 -0500

    runtime: avoid incorrect panic when a signal arrives during STW
    
    Stop-the-world and freeze-the-world (used for unhandled panics) are
    currently not safe to do at the same time. While a regular unhandled
    panic can't happen concurrently with STW (if the P hasn't been
    stopped, then the panic blocks the STW), a panic from a _SigThrow
    signal can happen on an already-stopped P, racing with STW. When this
    happens, freezetheworld sets sched.stopwait to 0x7fffffff and
    stopTheWorldWithSema panics because sched.stopwait != 0.
    
    Fix this by detecting when freeze-the-world happens before
    stop-the-world has completely stopped the world and freeze the STW
    operation rather than panicking.
    
    Fixes #17442.
    
    Change-Id: I646a7341221dd6d33ea21d818c2f7218e2cb7e20
    Reviewed-on: https://go-review.googlesource.com/34611
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 860c9c0b8df6c0a2849fdd274a0a9f142cba3ea5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Dec 19 19:46:54 2016 -0800

    misc/cgo/testcshared: wait up to 1 second in main2.c
    
    Wait longer in case the system is heavily loaded.
    
    Fixes #18324.
    
    Change-Id: If9a6da1cf32d0321302d244ee24fb3f80e54489d
    Reviewed-on: https://go-review.googlesource.com/34653
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5a72bad87ac1152aecd39f7fe1eece88a23b595b
Author: Shenghou Ma <minux@golang.org>
Date:   Sat Dec 17 22:53:38 2016 -0500

    doc/go1.8: document that CGO_ENABLED is sticky
    
    Fixes #18363.
    
    Change-Id: Ifc98506d33a6753cd7db8e505cf86d5626fbbad0
    Reviewed-on: https://go-review.googlesource.com/34596
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c5f16d4e40d0a2d9c2e32a866129d6a40535f57d
Author: Kevin Burke <kev@inburke.com>
Date:   Mon Dec 19 20:53:45 2016 -0800

    crypto/x509: fix spelling/grammar in comments
    
    Also tweak one of the comment lines to fit in 80 characters.
    
    Change-Id: I9c6d2028c29318ba9264486590056cb1ffc8219e
    Reviewed-on: https://go-review.googlesource.com/34655
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3357daa96e2b04f83be70d29b70858ddc7c803f4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 15 05:53:01 2016 +0000

    crypto/x509: speed up and deflake non-cgo Darwin root cert discovery
    
    Piping into security verify-cert only worked on macOS Sierra, and was
    flaky for unknown reasons. Users reported that the number of trusted
    root certs stopped randomly jumping around once they switched to using
    verify-cert against files on disk instead of /dev/stdin.
    
    But even using "security verify-cert" on 150-200 certs took too
    long. It took 3.5 seconds on my machine. More than 4 goroutines
    hitting verify-cert didn't help much, and soon started to hurt
    instead.
    
    New strategy, from comments in the code:
    
    // 1. Run "security trust-settings-export" and "security
    //    trust-settings-export -d" to discover the set of certs with some
    //    user-tweaked trusy policy. We're too lazy to parse the XML (at
    //    least at this stage of Go 1.8) to understand what the trust
    //    policy actually is. We just learn that there is _some_ policy.
    //
    // 2. Run "security find-certificate" to dump the list of system root
    //    CAs in PEM format.
    //
    // 3. For each dumped cert, conditionally verify it with "security
    //    verify-cert" if that cert was in the set discovered in Step 1.
    //    Without the Step 1 optimization, running "security verify-cert"
    //    150-200 times takes 3.5 seconds. With the optimization, the
    //    whole process takes about 180 milliseconds with 1 untrusted root
    //    CA. (Compared to 110ms in the cgo path)
    
    Fixes #18203
    
    Change-Id: I4e9c11fa50d0273c615382e0d8f9fd03498d4cb4
    Reviewed-on: https://go-review.googlesource.com/34389
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 4d02833c2e79ee8dce06e108e1ae7a8e62611f1f
Author: Kevin Burke <kev@inburke.com>
Date:   Mon Dec 19 20:27:12 2016 -0800

    cmd/cover: fix spelling mistake
    
    Change-Id: Iac7c4f22dc55c970940af33e0f0470694da5c4a6
    Reviewed-on: https://go-review.googlesource.com/34654
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a1c835f57b9cf927628c4e3d3c2b69fd62e65682
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Dec 19 17:36:02 2016 -0800

    doc: remove archive/zip changes from go1.8.html
    
    Change-Id: I5670e9924b21fb2466b2b32aa01a922e9a0a0f8a
    Reviewed-on: https://go-review.googlesource.com/34652
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5df59a4fc98991fc16872c384bd1e9f830a369c5
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Dec 19 17:18:45 2016 -0800

    Revert: "archive/zip: handle mtime in NTFS/UNIX/ExtendedTS extra fields"
    
    This change reverts the following CLs:
            CL/18274: handle mtime in NTFS/UNIX/ExtendedTS extra fields
            CL/30811: only use Extended Timestamp on non-zero MS-DOS timestamps
    
    We are reverting support for extended timestamps since the support was not
    not complete. CL/18274 added full support for reading extended timestamp fields
    and minimal support for writing them. CL/18274 is incomplete because it made
    no changes to the FileHeader struct, so timezone information was lost when
    reading and/or writing.
    
    While CL/18274 was a step in the right direction, we should provide full
    support for high precision timestamps in both the reader and writer.
    This will probably require that we add a new field of type time.Time.
    The complete fix is too involved to add in the time remaining for Go 1.8
    and will be completed in Go 1.9.
    
    Updates #10242
    Updates #17403
    Updates #18359
    Fixes #18378
    
    Change-Id: Icf6d028047f69379f7979a29bfcb319a02f4783e
    Reviewed-on: https://go-review.googlesource.com/34651
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7eee5127735ab9b3cd1f231c5f0dcf7d1e5dd9fd
Author: Dhananjay Nakrani <dhananjaynakrani@gmail.com>
Date:   Sun Dec 18 19:25:37 2016 -0800

    cmd/cover: retain un-attached compiler directives
    
    Parser doesn't attach some compiler directives to anything in the tree.
    We have to explicitely retain them in the generated code. This change,
    makes cover explicitely print out any compiler directive that wasn't
    handled in the ast.Visitor.
    
    Fixes #18285.
    
    Change-Id: Ib60f253815e92d7fc85051a7f663a61116e40a91
    Reviewed-on: https://go-review.googlesource.com/34563
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit a0667be8ef56c405d093cc0f5817b9932b4ca76c
Author: Shenghou Ma <minux@golang.org>
Date:   Mon Dec 19 09:48:07 2016 -0500

    runtime: use mincore to detect physical page size as last resort on Android
    
    Fixes #18041.
    
    Change-Id: Iad1439b2dd56b113c8829699eda467d1367b0e15
    Reviewed-on: https://go-review.googlesource.com/34610
    Reviewed-by: Austin Clements <austin@google.com>

commit ddd558e7e407b9fb0ba27f5a80fdc8b17a8e466f
Author: Austin Clements <austin@google.com>
Date:   Fri Dec 16 11:57:25 2016 -0500

    runtime: clean up and improve reflect.methodValue comments
    
    The runtime no longer hard-codes the offset of
    reflect.methodValue.stack, so remove these obsolete comments. Also,
    reflect.methodValue and runtime.reflectMethodValue must also agree
    with reflect.makeFuncImpl, so update the comments on all three to
    mention this.
    
    This was pointed out by Minux on CL 31138.
    
    Change-Id: Ic5ed1beffb65db76aca2977958da35de902e8e58
    Reviewed-on: https://go-review.googlesource.com/34590
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8d2169104467a14dea5705beb8ea351c68c5595d
Author: Keith Randall <khr@golang.org>
Date:   Mon Dec 19 09:15:04 2016 -0800

    cmd/compile: test for correct zeroing
    
    Make sure we generate the right code for zeroing a structure.
    
    Check in after Matthew's CL (34564).
    
    Update #18370
    
    Change-Id: I987087f979d99227a880b34c44d9d4de6c25ba0c
    Reviewed-on: https://go-review.googlesource.com/34565
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>

commit 0919fd70682ee07e58eed6f95ff1f55541d3fecb
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Fri Dec 16 09:58:06 2016 +0100

    cmd/go: fix doc about examples with empty Output
    
    Fixes #18191
    
    Change-Id: Ic2bac9d2a6f42d14e780c74d9c842ee344ab030a
    Reviewed-on: https://go-review.googlesource.com/34512
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 75d367e34b42b8428d535122eadead87a0c11c8c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Dec 19 08:19:50 2016 -0800

    cmd/compile: restore zero assignment optimization for non-pointer types
    
    golang.org/cl/31572 disabled some write barrier optimizations, but
    inadvertantly disabled optimizations for some non-pointer composite
    literal assignments too.
    
    Fixes #18370.
    
    Change-Id: Ia25019bd3016b6ab58173298c7d16202676bce6b
    Reviewed-on: https://go-review.googlesource.com/34564
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 12979345b1166163788846453f396afafdf1503a
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Dec 19 06:01:18 2016 +0900

    crypto/tls: fix a typo
    
    Change-Id: Id0044c45c23c12ee0bca362a9cdd25369ed7776c
    Reviewed-on: https://go-review.googlesource.com/34533
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1ec64e9b63d4ab4c2e7e16fa1581a10ee0c80a1d
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Dec 12 13:31:56 2016 +1300

    cmd/compile, runtime: a different approach to duplicate itabs
    
    golang.org/issue/17594 was caused by additab being called more than once for
    an itab. golang.org/cl/32131 fixed that by making the itabs local symbols,
    but that in turn causes golang.org/issue/18252 because now there are now
    multiple itab symbols in a process for a given (type,interface) pair and
    different code paths can end up referring to different itabs which breaks
    lots of reflection stuff. So this makes itabs global again and just takes
    care to only call additab once for each itab.
    
    Fixes #18252
    
    Change-Id: I781a193e2f8dd80af145a3a971f6a25537f633ea
    Reviewed-on: https://go-review.googlesource.com/34173
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 1106512db54fc2736c7a9a67dd553fc9e1fca742
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Dec 16 13:35:51 2016 -0800

    path/filepath: deprecate HasPrefix
    
    Use the new "Deprecated:" syntax for all instances of HasPrefix.
    This is a follow-up to http://golang.org/cl/28413 which only modified path_unix.go.
    
    In this CL, we avoid mentioning that strings.HasPrefix should be used since
    that function is still subtly wrong in security applications.
    
    See http://golang.org/cl/5712045 for more information.
    
    Fixes #18355
    
    Change-Id: I0d0306152cd0b0ea5110774c2c78117515b9f5cd
    Reviewed-on: https://go-review.googlesource.com/34554
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 61db2e4efa2a8f558fd3557958d1c86dbbe7d3cc
Author: Austin Clements <austin@google.com>
Date:   Wed Dec 14 13:24:21 2016 -0500

    runtime: cross-reference _func type better
    
    It takes me several minutes every time I want to find where the linker
    writes out the _func structures. Add some comments to make this
    easier.
    
    Change-Id: Ic75ce2786ca4b25726babe3c4fe9cd30c85c34e2
    Reviewed-on: https://go-review.googlesource.com/34390
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1716add3dc50d4ef38183d01ac5c1a16c83a8ac9
Author: Kevin Burke <kev@inburke.com>
Date:   Fri Dec 16 07:50:08 2016 -0800

    runtime/pprof: fix spelling in test
    
    Change-Id: Id10e41fe396156106f63a4b29d673b31bea5358f
    Reviewed-on: https://go-review.googlesource.com/34551
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7799022cddf440f79463afdad969360a2ca86a9e
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Dec 16 18:45:55 2016 +0900

    net: clarify IP.IsGlobalUnicast docs
    
    Fixes #18181.
    
    Change-Id: I5eed99dfb7b013aa4d4e668e95a97f5bb643d307
    Reviewed-on: https://go-review.googlesource.com/34531
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ecc4474341504f5893c8333dbb68c520dbe93ca5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 15 17:42:53 2016 -0800

    runtime/pprof: deflake tests for heavily loaded systems
    
    In the sampling tests, let the test pass if we get at least 10 samples.
    
    Fixes #18332.
    
    Change-Id: I8aad083d1a0ba179ad6663ff43f6b6b3ce1e18cd
    Reviewed-on: https://go-review.googlesource.com/34507
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 115e9cac8033163a6edfdce6b28a9be21475bed5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 15 16:57:59 2016 -0800

    misc/cgo/testsanitizer: don't run msan tests if msan doesn't work
    
    Confirm that a trivial executable can build and execute using
    -fsanitize=memory.
    
    Fixes #18335 (by skipping the tests when they don't work).
    
    Change-Id: Icb7a276ba7b57ea3ce31be36f74352cc68dc89d5
    Reviewed-on: https://go-review.googlesource.com/34505
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 29cb72154d3bb3530d8092cc89d35b3ed4f7e9c5
Author: Bryan C. Mills <bcmills@google.com>
Date:   Thu Dec 15 14:21:13 2016 -0800

    runtime: preserve callee-saved C registers in sigtramp
    
    This fixes Linux and the *BSD platforms on 386/amd64.
    
    A few OS/arch combinations were already saving registers and/or doing
    something that doesn't clearly resemble the SysV C ABI; those have
    been left alone.
    
    Fixes #18328.
    
    Change-Id: I6398f6c71020de108fc8b26ca5946f0ba0258667
    Reviewed-on: https://go-review.googlesource.com/34501
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c1d449c42c6ea3c61f4636d1e9412b660be6f6bd
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 15 16:18:45 2016 +0000

    net/http: deflake TestServerTimeouts maybe
    
    I haven't been able to reproduce this one, but change a few suspect
    things in this test. Notably, using the global "Get" function and thus
    using the DefaultTransport was buggy in a parallel test. Then add some error
    checks and close a TCP connection.
    
    Hopefully the failure wasn't timing-related.
    
    Fixes #18036 (I hope)
    
    Change-Id: I4904e42e40b26d488cf82111424a1d4d46f42dae
    Reviewed-on: https://go-review.googlesource.com/34490
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 0cd2bf4f988e115d9b93a75e6472663d88a85a4c
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Thu Dec 15 18:05:26 2016 +0100

    test: add mipsx case to nosplit.go
    
    Change-Id: I496bceacb6b3f417e36dc725d988b12c59a200d5
    Reviewed-on: https://go-review.googlesource.com/34412
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6e542dce216504cc1e849573a4320084307860d0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 15 09:00:21 2016 -0800

    test: add test gcc78763.go that caused a gccgo compiler crash
    
    Change-Id: I0d990d494ee8eebfc804b526f5ced71944572b4d
    Reviewed-on: https://go-review.googlesource.com/34491
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9cd3c0662aa63eea8e7fae80f558fda9d646ba98
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Dec 15 12:02:20 2016 -0800

    api: add openbsd syscall constants
    
    Change-Id: I3ec00dac5e7d0e6dcafb7d65851bc53e0661c2b6
    Reviewed-on: https://go-review.googlesource.com/34500
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 651d392308ca33fe530acd39a06a7195c6d60d7b
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Dec 15 10:37:55 2016 -0800

    net/http: update bundled http2
    
    Updates bundled x/net/http2 to git rev 1195a05d for:
    
        http2: fix incorrect panic
        https://golang.org/cl/34498
    
        http2: fix race in writePushPromise
        https://golang.org/cl/34493
    
        http2: speed up TestTransportFlowControl in short mode
        https://golang.org/cl/33241
    
        http2: don't flush a stream's write queue in sc.resetStream
        https://golang.org/cl/34238
    
        http2: allow Transport to connect to https://[v6literal]/ without port
        https://golang.org/cl/34143
    
        http2: log Framer reads and writes when a server test fails
        https://golang.org/cl/34130
    
    Updates #18326
    Updates #18273
    Updates #18111
    Updates #18248
    Updates #18235
    
    Change-Id: I18c7a297fc94d6a843284efcfc43e0fdab9b5f41
    Reviewed-on: https://go-review.googlesource.com/34495
    Run-TryBot: Chris Broadfoot <cbro@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 94e0f06fbcd5b39840bf0d8fa4519ac818ca2c3e
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Dec 12 19:32:58 2016 -0800

    doc/help: tweak descriptions, make official channels clearer
    
    Change-Id: I5c8df05a25421489ec5122de85dbda756483c536
    Reviewed-on: https://go-review.googlesource.com/34289
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 92fb0a00c2c0bbc2efda09fb65918d108e3ed8cb
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Thu Dec 15 17:22:30 2016 +0100

    misc/cgo/test: add mipsx test case for #9400
    
    Change-Id: I7d0bc5093943b0744d865e91517ff6292f3b2f89
    Reviewed-on: https://go-review.googlesource.com/34510
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 01b006fc181a5a2a3ed4eb619a3b9cb1901a90e2
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Thu Dec 15 17:46:44 2016 +0100

    test/fixedbugs: add mipsx case to issue11656
    
    Change-Id: Ifcbd2ea19fc7fa832cd88aa857a5704c32eb4765
    Reviewed-on: https://go-review.googlesource.com/34511
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 34bd7d5d4bf93484f920d2ccb12183f530a684e6
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Dec 15 18:00:12 2016 +0900

    net: fix comment on IPv4bcast
    
    In Go 1.8, almost all the platforms except NaCl provide network
    interface and address identification and applications can use IPv4
    limited or directed broadcast addresses appropriately.
    
    Fixes #18176.
    
    Change-Id: Ie5de834d19c0aaeb4128a3ca655f6c4c9ae5e501
    Reviewed-on: https://go-review.googlesource.com/34435
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7e4ef4ebfc4f24bb030716c81e0f812aa3a36c97
Author: Raul Silvera <rsilvera@google.com>
Date:   Wed Dec 14 13:32:18 2016 -0800

    cmd/pprof: search for sample types in profile
    
    Search the sample types in the profile being processed to map
    sample type options to indices in the profile sample type array.
    
    Previously these were hardcoded, which caused issues when the
    sample types for a profile type changed. For instance, this was
    triggered by the native generation of profiles in profile.proto
    format.
    
    This fixes #18230. A similar mechanism already exists on the upstream
    pprof.
    
    Change-Id: I945d8d842a0c2ca14299dabefe83124746ecd7e2
    Reviewed-on: https://go-review.googlesource.com/34382
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit 6f5a77bf5f909e19fbc19f2c75ec1e160ec0aaa5
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Dec 15 06:26:58 2016 +0900

    net: fix ParseCIDR docs
    
    This change replaces the remaining use of "mask" with "prefix length"
    and uses IPv4 reserved address blocks for documentation.
    
    UPdates #15228.
    Updates #18175.
    
    Change-Id: I56c4f1205821c64f3195b023ad515b9d54e33f64
    Reviewed-on: https://go-review.googlesource.com/34431
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c1ada22bc1ddf798a8931a09c8fa7c878c9ee6b9
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Dec 14 14:48:58 2016 -0500

    cmd/go, plugin: disable plugins on darwin
    
    We are seeing a bad stack map in #18190. In a copystack, it is
    mistaking a slot for a pointer.
    
    Presumably this is caused either by our fledgling dynlink support on
    darwin, or a consequence of having two copies of the runtime in the
    process. But I have been unable to work out which in the 1.8 window,
    so pushing darwin support to 1.9 or later.
    
    Change-Id: I7fa4d2dede75033d9a428f24c1837a4613bd2639
    Reviewed-on: https://go-review.googlesource.com/34391
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2adc2d1b8bd0cb389e1ecd511b4e213a5a8a7107
Author: Kevin Burke <kev@inburke.com>
Date:   Wed Dec 14 20:20:42 2016 -0800

    net: fix typo
    
    Change-Id: Icef8a21654a248666c684d5b10d0337c544ddb25
    Reviewed-on: https://go-review.googlesource.com/34388
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3444e5b3551060ab8cc0d4c70a9dce823d8f569a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Dec 14 21:35:30 2016 -0500

    runtime: fix mips assembly
    
    I meant to say ~7, instead of ^7, in the review.
    
    Fix build.
    
    Change-Id: I5060bbcd98b4ab6f00251fdb68b6b35767e5acf1
    Reviewed-on: https://go-review.googlesource.com/34411
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit cd2b6bd3c4a7489299e291a74ef7f845aa80c995
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Dec 13 21:02:14 2016 -0800

    net: fix consecutive dialing docs
    
    Update #17617.
    
    Change-Id: Ia0bc9954bb914b650b7c7af35ef714ca6b0740b4
    Reviewed-on: https://go-review.googlesource.com/34376
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 627af57b5464e025422356dc3f7442465f79991f
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 13 22:57:18 2016 +0100

    cmd/dist: enable cgo by default for GOARCH=mips{,le}
    
    Change-Id: I7dd927be1e702e8fd469f4834ab918e0bcd9bafc
    Reviewed-on: https://go-review.googlesource.com/34318
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ffc836bcbbd8739865cda617d21d924e03844525
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Dec 14 23:17:13 2016 +0000

    net/http/httptrace: clarify WroteRequest may be called multiple times
    
    Updates #18305
    
    Change-Id: I63b28d511df1a6c54e32c8bfc7e2264f94e38cd7
    Reviewed-on: https://go-review.googlesource.com/34386
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 49e5bdfe79cf779224e97096b592c4d45fda1184
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 13 22:35:26 2016 +0100

    test: enable fixedbugs/issue10607 test on GOARCH=mips{,le}
    
    Change-Id: I00c97c36e8fdc79582eaed21877e4c8f44568666
    Reviewed-on: https://go-review.googlesource.com/34316
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c74392634c494b95edd15569bc432981409d72e6
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 13 22:54:19 2016 +0100

    cmd/objdump: disable objdump_test with external linking on GOARCH=mips{,le}
    
    Updates #12559.
    
    Change-Id: I5e8f4cf7071d0d71618527a6b6096e771d5eeb28
    Reviewed-on: https://go-review.googlesource.com/34317
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b909d011520700149b72d556837f68069d2d372a
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 13 21:56:58 2016 +0100

    runtime: add cgo support for GOARCH=mips{,le}
    
    Change-Id: Ib425ead7b340672837d3cb983bd785488706bd6d
    Reviewed-on: https://go-review.googlesource.com/34314
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a3b670e3333ca0f677a82321d3ad173e01e973a5
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 13 21:23:39 2016 +0100

    cmd/link: add external linking support for GOARCH=mips{,le}
    
    Fixes #17792.
    
    Change-Id: If4f24455eec0edb3b221aef6777a681f6c768866
    Reviewed-on: https://go-review.googlesource.com/34313
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 96414ca39f4a63d04ddc5cea6d4c63237f2a5fd4
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Dec 10 13:30:13 2016 -0500

    cmd/link: do not export plugin C symbols
    
    Explicitly filter any C-only cgo functions out of pclntable,
    which allows them to be duplicated with the host binary.
    
    Updates #18190.
    
    Change-Id: I50d8706777a6133b3e95f696bc0bc586b84faa9e
    Reviewed-on: https://go-review.googlesource.com/34199
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 901005e8fce3f4ec94a0c06430d543b10391695a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Dec 14 18:57:13 2016 +0000

    net/http: deflake TestClientTimeout_Headers_h2 on Windows
    
    The client code was using time.Now() (wall time) to determine whether
    the cause of a non-nil error meant that a timeout had occured. But on
    Windows, the clock used for timers (time.After, time.Sleep, etc) is
    much more accurate than the time.Now clock, which doesn't update
    often.
    
    But it turns out that as of the recent https://golang.org/cl/32478 we
    already have the answer available easily. It just wasn't in scope.
    
    Instead of passing this information along by decorating the errors
    (risky this late in Go 1.8, especially with #15935 unresolved), just
    passing along the "didTimeout" func internally for now. We can remove
    that later in Go 1.9 if we overhaul Transport errors.
    
    Fixes #18287 (I hope)
    
    Change-Id: Icbbfceaf02de6c7ed04fe37afa4ca16374b58f3c
    Reviewed-on: https://go-review.googlesource.com/34381
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1da1e432817eaf86734499826c6f3dcc1f65db65
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Dec 13 15:00:59 2016 -0800

    go/internal/gccgoimporter: accept missed portions of v2 format
    
    Fixes #18301.
    
    Change-Id: I990c105904ab62f2225d671bbc10209ec51b12e2
    Reviewed-on: https://go-review.googlesource.com/34371
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>

commit afb350811e926c7521b766946976cf88dd7d29f2
Author: Euan Kemp <euank@euank.com>
Date:   Tue Dec 13 21:49:57 2016 -0800

    runtime: correct writebarrier typos
    
    Change-Id: I7d67c3d64be915f0be5932d2c068606d74f93c29
    Reviewed-on: https://go-review.googlesource.com/34378
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit d0501f1da9c54a8053940feeb86e1644ffaae522
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Tue Dec 13 07:55:12 2016 -0800

    database/sql: do not store Tx options in Context
    
    Drivers which previously supported tip will need to update to this
    revision before release.
    
    Fixes #18284
    
    Change-Id: I70b8e7afff1558a8b5348885ce9f50e067c72ee9
    Reviewed-on: https://go-review.googlesource.com/34330
    Run-TryBot: Daniel Theophanes <kardianos@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fe07091f9eb9a1dcedc6eab1762de5383f520a00
Author: Euan Kemp <euank@euank.com>
Date:   Tue Dec 13 21:49:09 2016 -0800

    crypto/aes: correct 'noescape' typo in s390x
    
    Change-Id: I9e24a28b4daee5d6e1e4769547922a1a253b4ffc
    Reviewed-on: https://go-review.googlesource.com/34377
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 232991e8a75011a7ae6afd41c62a1f556749ebd6
Author: Matt Layher <mdlayher@gmail.com>
Date:   Tue Dec 13 23:01:15 2016 -0500

    net: change "mask" to "prefix length" in ParseCIDR comment
    
    Fixes #18175
    
    Change-Id: I0074109fa885976b22c2be9fa39641d4d0657dee
    Reviewed-on: https://go-review.googlesource.com/34375
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 79a748fae876ffe38193a8f6a71bb2bfcdb69a52
Author: Kaviraj <kavirajkanagaraj@gmail.com>
Date:   Tue Dec 13 17:49:28 2016 +0530

    net: document consecutive dialing in net.Dial
    
    document about the consecutive dialing introduced in Go 1.5.
    If address is resolved to multiple addresses,
    Dial will try each address in order until one succeeds.
    Deadline is used to try each address (calculated based on
    total number of resolved addresses)
    
    Fixes: #17617
    
    Change-Id: I56b6399edb640c8ef507675f98e0bd45a50d4e2d
    Reviewed-on: https://go-review.googlesource.com/34176
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 73151700b4cd946627d8969b02672828e23b2f47
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Dec 13 16:57:05 2016 -0800

    cmd/link: improve -X doc wording
    
    Change-Id: I9329738ec5dd6c12f72eea7de413d66617b7b5c2
    Reviewed-on: https://go-review.googlesource.com/34373
    Reviewed-by: Rob Pike <r@golang.org>

commit 10f3b090270a979dfbbb48be98973feac61dfc91
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Dec 13 14:29:57 2016 -0800

    cmd/cgo: don't strip qualifiers from C void* pointer
    
    Now that we try to handle qualifiers correctly (as of CL 33325), don't
    strip them from a void* pointer. Otherwise we break a case like "const
    void**", as the "const" qualifier is dropped and the resulting
    "void**" triggers a warning from the C compiler.
    
    Fixes #18298.
    
    Change-Id: If51df1889b0f6a907715298c152e6d4584747acb
    Reviewed-on: https://go-review.googlesource.com/34370
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4284edb999716c408c99e9b5dc56734c31e4dcd5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 8 15:57:48 2016 -0800

    cmd/link: explain how to find the name to use for -X
    
    Doc change only.
    
    Fixes #18246.
    
    Change-Id: I2c7b181bcec81e124d30702f6fac5aa43bb57c04
    Reviewed-on: https://go-review.googlesource.com/34230
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 386b66f5bda20d2d0863faad37cf8922c102b588
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 13 22:03:18 2016 +0100

    cmd/cgo: add required gcc flags for GOARCH=mips{,le}
    
    Change-Id: I1d6a2120a444d1ab9b9ecfdf27464325ad741d55
    Reviewed-on: https://go-review.googlesource.com/34315
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 990cda59f8bba7f67fa37f9b5be0e384adf20b41
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 13 19:49:41 2016 +0100

    misc/cgo/test: skip test18146 on mips{,64}
    
    Change-Id: I724f4443fc10a6ee0d027a9533f07aba39455cfa
    Reviewed-on: https://go-review.googlesource.com/34312
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 48b42d29dc1fb8b4f71b1352c7237ca304a5473a
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Dec 13 19:29:34 2016 +0100

    test/bench/go1: reduce fasta data size for mips{,64}
    
    Change-Id: I15887ee454acfdb36334dd9f0b59cc520b2b0286
    Reviewed-on: https://go-review.googlesource.com/34311
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3fb1e0bd7f99a9592bd3438b4ebb0b9ebcb3c445
Author: Russ Cox <rsc@golang.org>
Date:   Mon Dec 12 22:10:45 2016 -0500

    cmd/go: fix go get -t -u path/... containing vendor directories
    
    A lot of things had to line up to make this break,
    but the caching of download results interacted badly
    with vendor directories, "go get -t -u", and wildcard
    expansion.
    
    Fixes #18219.
    
    Change-Id: I2676498d2f714eaeb69f399e9ed527640c12e60d
    Reviewed-on: https://go-review.googlesource.com/34201
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ec80737bdf5986983cca0afda614441ec9cae104
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Mon Dec 5 11:10:58 2016 +1100

    doc: debug/pe.Section is not new, Section.Relocs field is
    
    Change-Id: Ie50d68f87670de6c199016ebdc740c11ee636e9a
    Reviewed-on: https://go-review.googlesource.com/33931
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b00b214e0d5eecfbb98a7a52d65da07a8c9628f7
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Sun Dec 11 08:14:38 2016 -0800

    os: must fixup path when 248 bytes long
    
    Fixes #18283
    
    Change-Id: Ic044d2d0657579e8e7786d7264fda2037ddc5ffb
    Reviewed-on: https://go-review.googlesource.com/34280
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1657d76d5bcb7beda816c2b7597262e1ee4fd9af
Author: Tilman Dilo <tilman.dilo@gmail.com>
Date:   Mon Dec 5 23:32:08 2016 +0100

    cmd/vet: fix panic and handling of XML in struct field tag check
    
    The check for duplicate struct field tags introduced in CL 16704
    triggers a panic when an anonymous struct field with a duplicate name
    is encountered. For such a field, the names slice of the ast.Field is
    nil but accessed regardless to generate the warning message.
    
    Additionally, the check produces false positives for XML tags in some
    cases:
    
    - When fields are encoded as XML attributes, a warning is produced when
      an attribute reuses a name previously used for an element.
    
      Example:
        type Foo struct {
            First int `xml:"a"`
            NoDup int `xml:"a,attr"` // warning about reuse of "a"
        }
    
    - When XMLName is used to set the name of the enclosing struct element,
      it is treated as a regular struct field.
    
      Example:
        type Bar struct {
            XMLName xml.Name `xml:"a"`
            NoDup   int      `xml:"a"` // warning about reuse of "a"
        }
    
    This commit addresses all three issues. The panic is avoided by using
    the type name instead of the field name for anonymous struct fields when
    generating the warning message. An additional namespace for checking XML
    attribute names separately from element names is introduced. Lastly,
    fields named XMLName are excluded from the check for duplicate tags.
    
    Updates #18256
    
    Change-Id: Ida48ea8584b56bd4d12ae3ebd588a66ced2594cc
    Reviewed-on: https://go-review.googlesource.com/34070
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit c06b10ae9df81ea3ffdfe118a92410da4e153fea
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Dec 12 16:53:12 2016 -0800

    os/exec: fix race in TestStdinCloseRace
    
    The test for the race detector itself had a race of a sort not
    detected by the race detector.
    
    Fixes #18286.
    
    Change-Id: I3265eae275aaa2869a6b6d3e8675b0d88b25831b
    Reviewed-on: https://go-review.googlesource.com/34287
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d986daec1375527ef78cd59d81d42be7406a9803
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 13 00:12:19 2016 +0000

    net/http: update some comments
    
    And move some code to make control flow more obvious.
    No functional change.
    
    Change-Id: Iefaa96f664070ab2accade1857e1946e56df6902
    Reviewed-on: https://go-review.googlesource.com/34285
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 48a5d9938ce7add3636beab3882a990a0e79f98b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 13 00:18:52 2016 +0000

    A+C: automated update
    
    Add Alexander Menzhinsky (individual CLA)
    Add Anthony Woods (individual CLA)
    Add Chris Stockton (individual CLA)
    Add David Lazar (corporate CLA for Google Inc.)
    Add Elliot Morrison-Reed (individual CLA)
    Add Igor Bernstein (corporate CLA for Google Inc.)
    Add Jesse Szwedko (individual CLA)
    Add Jordan Lewis (individual CLA)
    Add Kaviraj Kanagaraj (individual CLA)
    Add Keegan Carruthers-Smith (individual CLA)
    Add Marcel Edmund Franke (individual CLA)
    Add Marin Bašić (individual CLA)
    Add Martin Kreichgauer (corporate CLA for Google Inc.)
    Add Max Riveiro (individual CLA)
    Add Odin Ugedal (individual CLA)
    Add Patrick Lee (individual CLA)
    Add Rebecca Stambler (corporate CLA for Google Inc.)
    Add Ryuzo Yamamoto (individual CLA)
    Add Takuya Ueda (individual CLA)
    Add Thordur Bjornsson (individual CLA)
    Add Zac Bergquist (individual CLA)
    
    Updates #12042
    
    Change-Id: Idb5ffe526b26437eb7612f0b60bde62162af5abb
    Reviewed-on: https://go-review.googlesource.com/34286
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b9ffcf961e54419dc46f8338d86398665e719623
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Dec 12 14:37:40 2016 -0800

    cmd/go: don't assemble all .s files in a single cmd/asm run
    
    For the 1.8 release, go back to invoking the assembler once per .s
    file, to avoid the problem in #18225. When the assembler is fixed, the
    change to cmd/go/build.go can be rolled back, but the test in
    cmd/go/go_test.go should remain.
    
    Fixes #18225.
    Update #15680.
    
    Change-Id: Ibff8d0c638536efb50a2b2c280b41399332f4fe4
    Reviewed-on: https://go-review.googlesource.com/34284
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9fe2291efdfd6257b97a3271b1145b67a3e7089d
Author: Shenghou Ma <minux@golang.org>
Date:   Fri Dec 9 00:13:43 2016 -0500

    cmd/internal/obj/mips: replace MOVD with MOVF on 32-bit to avoid unaligned memory access
    
    This is the simplest CL that I can make for Go 1.8. For Go 1.9, we can revisit it
    and optimize the redundant address generation instructions or just fix #599 instead.
    
    Fixes #18140.
    
    Change-Id: Ie4804ab0e00dc6bb318da2bece8035c7c71caac3
    Reviewed-on: https://go-review.googlesource.com/34193
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit bc61026c3f60d0d449e1cb292ef202daa1c2d019
Author: Max Riveiro <kavu13@gmail.com>
Date:   Sun Dec 11 13:54:22 2016 +0300

    time: parse WITA timezone correctly
    
    WITA stands for Asia/Makassar IANA timezone
    https://en.wikipedia.org/wiki/Asia/Makassar
    
    Fixes #18251
    
    Change-Id: I5896efb8052593afb4e51ae4a34b574a8206d4dc
    Reviewed-on: https://go-review.googlesource.com/34253
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fded5dbb2f51d1c24d1541076b143929cdc988af
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 8 17:39:00 2016 -0800

    runtime: don't crash if signal delivered on g0 stack
    
    Also, if we changed the gsignal stack to match the stack we are
    executing on, restore it when returning from the signal handler, for
    safety.
    
    Fixes #18255.
    
    Change-Id: Ic289b36e4e38a56f8a6d4b5d74f68121c242e81a
    Reviewed-on: https://go-review.googlesource.com/34239
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bryan Mills <bcmills@google.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 265e547658ac6e91df308326041ea462593053fc
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Dec 12 17:35:25 2016 +0000

    doc: remove Reddit as an official space where Code of Conduct applies
    
    Fixes #18289
    
    Change-Id: I047e98cc36b861ef15292170aeaff8bc29243cab
    Reviewed-on: https://go-review.googlesource.com/34281
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 0716fefad35b2de2b082865c5c8e5c009bd16a75
Author: Shenghou Ma <minux@golang.org>
Date:   Wed Dec 7 18:42:37 2016 -0500

    doc: mention Go requires OpenBSD 5.9 or above in go1.8.html
    
    Change-Id: Ia19e4d2f319002b5b26e50258436f5c4bd281cc7
    Reviewed-on: https://go-review.googlesource.com/34113
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f91ddaabe618c488ebe41262216eaaf14262eb1a
Author: Joel Sing <joel@sing.id.au>
Date:   Thu Dec 8 00:22:09 2016 +1100

    runtime, syscall: update openbsd for changes to syskill
    
    Change the openbsd runtime to use the current sys_kill and sys_thrkill
    system calls.
    
    Prior to OpenBSD 5.9 the sys_kill system call could be used with both
    processes and threads. In OpenBSD 5.9 this functionality was split into
    a sys_kill system call for processes (with a new syscall number) and a
    sys_thrkill system call for threads. The original/legacy system call was
    retained in OpenBSD 5.9 and OpenBSD 6.0, however has been removed and
    will not exist in the upcoming OpenBSD 6.1 release.
    
    Note: This change is needed to make Go work on OpenBSD 6.1 (to be
    released in May 2017) and should be included in the Go 1.8 release.
    This change also drops support for OpenBSD 5.8, which is already an
    unsupported OpenBSD release.
    
    Change-Id: I525ed9b57c66c0c6f438dfa32feb29c7eefc72b0
    Reviewed-on: https://go-review.googlesource.com/34093
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cbcc1db41c505cd8e19e27f9844276dc35d527be
Author: Martin Möhrmann <moehrmann@google.com>
Date:   Sun Dec 11 12:55:17 2016 +0100

    fmt: undo clearflags in catchPanic after error message has been printed
    
    Fixes #18282
    
    Change-Id: I024ca4a03bbbcccd48a0a6245bc3ec22c6a90288
    Reviewed-on: https://go-review.googlesource.com/34254
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Martin Möhrmann <moehrmann@google.com>
    Reviewed-by: Rob Pike <r@golang.org>

commit ab5a2173f91c1e2779cdf49a2fc8a7abafecd5f1
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Dec 9 12:38:34 2016 -0500

    cmd/link: limit darwin dynlink symbol exports
    
    The pclntable contains pointers to functions. If the function symbol
    is exported in a plugin, and there is a matching symbol in the host
    binary, then the pclntable of a plugin ends up pointing at the
    function in the host module.
    
    This doesn't work because the traceback code expects the pointer to
    be in the same module space as the PC value.
    
    So don't export functions that might overlap with the host binary.
    This way the pointer stays in its module.
    
    Updates #18190
    
    Change-Id: Ifb77605b35fb0a1e7edeecfd22b1e335ed4bb392
    Reviewed-on: https://go-review.googlesource.com/34196
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4c71af71b43f8fcface5f63cdb3620203b58d45e
Author: Martin Kreichgauer <martinkr@google.com>
Date:   Fri Dec 9 11:29:52 2016 -0800

    crypto/x509: marshal certificate revocation times in UTC (Zulu time).
    
    This is required by RFC 5280.
    
    Fixes #16686
    
    Change-Id: I291c68dd97410a4f7ae7c4e524b91a2493ac50a9
    Reviewed-on: https://go-review.googlesource.com/34245
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8c190e58541493c580590a77fccfee87d174e5d4
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Dec 9 13:11:48 2016 -0800

    io: update documentation on LimitedReader
    
    Specify that that LimitedReader returns EOF when the underlying
    R returns EOF even if bytes remaining, N > 0.
    
    Fixes #18271
    
    Change-Id: I990a7135f1d31488d535238ae061d42ee96bacb7
    Reviewed-on: https://go-review.googlesource.com/34249
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 454c2343979b8976f3f1ac50f8149b36a839d555
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Dec 9 19:58:11 2016 +0000

    database/sql: use complete sentences in new docs
    
    Change-Id: Icb842a80cab2b07b9ace1e8e14c4a19c48a92c43
    Reviewed-on: https://go-review.googlesource.com/34247
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>

commit c586630d993f6136d3166837669b26f4210a79d5
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Thu Dec 8 23:21:48 2016 -0800

    doc: update go1.8.html
    
    Made many minor changes so that the document is consistent with itself.
    
    Some more noticeable changes:
    * CL/34141: Revert "testing: add T.Context method"
    * CL/33630: net/http: document restrictions on ETag as expected by ServeContent
    
    Change-Id: I39ae5e55c56e374895c115e6852998c940beae35
    Reviewed-on: https://go-review.googlesource.com/34243
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c6228ef7e2167a9330a822c48a6f134b92da1437
Author: Raul Silvera <rsilvera@google.com>
Date:   Wed Dec 7 15:36:22 2016 -0800

    runtime/pprof: track locations for goroutine profiles
    
    Must add locations to the profile when generating a profile.proto.
    This fixes #18229
    
    Change-Id: I49cd63a30759d3fe8960d7b7c8bd5a554907f8d1
    Reviewed-on: https://go-review.googlesource.com/34028
    Reviewed-by: Michael Matloob <matloob@golang.org>
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3a067cc812ff20327a80748c2e72bce420e837d6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Dec 9 06:43:24 2016 +0000

    api: remove testing Context accessors from go1.8.txt
    
    Fixes the build.
    
    Updates #18199
    
    Change-Id: Ibf029ba9f9293d1f3d49c1c8773fc262159a5d5b
    Reviewed-on: https://go-review.googlesource.com/34242
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 3c0466136d635fc4845484f0a98f52e66d61168b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Dec 9 04:08:32 2016 +0000

    go/build: clarify Context.HasSubdir docs
    
    Fixes #17888
    
    Change-Id: I7490b95a03b810a0f7ed1f07f37d7c7b3ac036be
    Reviewed-on: https://go-review.googlesource.com/34240
    Reviewed-by: Dmitri Shuralyov <shurcool@gmail.com>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 2eb976eb2a040d3dd7b38f9d7e22dab2ee2a9ef0
Author: Austin Clements <austin@google.com>
Date:   Thu Dec 8 15:38:14 2016 -0500

    doc/go1.8: mention trace tool changes
    
    Fixes #18234.
    
    Change-Id: I0f18992ea14e13f283873ac295f0b49d6b7dd8b2
    Reviewed-on: https://go-review.googlesource.com/34191
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>

commit 4bf7d1e722e852f4a28d1898cbe5d0a0d505763b
Author: Joe Tsai <thebrokentoaster@gmail.com>
Date:   Thu Dec 8 07:13:50 2016 +0000

    Revert "testing: add T.Context method"
    
    This reverts commit 26827bc2fe4c80dc68b3793631d24975425c9467.
    
    Fixes #18199
    
    Change-Id: I42e292cb4e3d740a4fbb5d0380c6ee15ac742092
    Reviewed-on: https://go-review.googlesource.com/34141
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e12ce1e4005fcefd7a3537c433e6a60044160086
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Thu Dec 8 13:07:35 2016 -0800

    database/sql: document that drivers may not return right after cancel
    
    Fixes #18168
    
    Change-Id: Idbfe3d4daedd93c7caf6f1770ecd988e9af39949
    Reviewed-on: https://go-review.googlesource.com/34144
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9ad47c4f67d592c768435f0c04a6d61ebee8c06f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 8 23:49:54 2016 +0000

    doc: add http.NoBody and Transport change to go1.8.html
    
    Fixes #18257
    
    Change-Id: Iafba5aa0a0641cfe36351bb0e4b57f20257fdc4e
    Reviewed-on: https://go-review.googlesource.com/34210
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 00efa446e1abc3852882ecd8e83d8973927ed925
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Dec 7 22:09:15 2016 -0800

    cmd/compile/internal/obj: remove superfluous addvarint parameter and assignment
    
    Change-Id: I395625dca9b719290c52d2c46f60b53e8fb3abc4
    Reviewed-on: https://go-review.googlesource.com/34139
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4c4201f0e2c1faf1d1480ac72737acadedb37e6e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 8 22:15:40 2016 +0000

    all: make spelling consistent
    
    Fixes #17938
    
    Change-Id: Iad12155f4976846bd4a9a53869f89e40e5b3deb3
    Reviewed-on: https://go-review.googlesource.com/34147
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 51a75a01f89ee7c85e2fef6b71d7245de49a3483
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 8 21:19:18 2016 +0000

    doc: remove pprof TODOs from go1.8.html
    
    There is nothing notable to mention as far as users are concerned.
    
    Fixes #17929 (another bug tracks the remaining TODO item)
    
    Change-Id: Id39f787581ed9d2ecd493126bb7ca27836816d4b
    Reviewed-on: https://go-review.googlesource.com/34145
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit 9296d4efe72de89b40425e7426545d6608f2e2d0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 8 01:07:10 2016 +0000

    net/http: don't retry Transport requests if they have a body
    
    This rolls back https://golang.org/cl/27117 partly, softening it so it
    only retries POST/PUT/DELETE etc requests where there's no Body (nil
    or NoBody). This is a little useless, since most idempotent requests
    have a body (except maybe DELETE), but it's late in the Go 1.8 release
    cycle and I want to do the proper fix.
    
    The proper fix will look like what we did for http2 and only retrying
    the request if Request.GetBody is defined, and then creating a new request
    for the next attempt. See https://golang.org/cl/33971 for the http2 fix.
    
    Updates #15723
    Fixes #18239
    Updates #18241
    
    Change-Id: I6ebaa1fd9b19b5ccb23c8d9e7b3b236e71cf57f3
    Reviewed-on: https://go-review.googlesource.com/34134
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Tom Bergan <tombergan@google.com>

commit 67b292799051f7423cc15154d5fc8bb9c57e7057
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Dec 9 08:49:23 2016 +1300

    cmd/link: do not mark go.plugin.tabs as reachable in non-plugins
    
    Fixes #18250
    
    Change-Id: I4f61591356ddb4a906c206ad8456d1839daf7b91
    Reviewed-on: https://go-review.googlesource.com/34170
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 291254414b2adcea8e36374c6dbcdb3d9ede06c5
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Dec 7 22:25:41 2016 -0800

    io: fix MultiReader panic on nil reader.
    
    The combination of two prior CLs can cause panics:
    * CL/17873: make chained multiReader Read more efficient
    * CL/28533: make MultiReader nil exhausted Readers for earlier GC
    
    The first CL allows MultiReader to "inherit" another MultiReader's list of Readers
    for efficiency reasons. This is problematic when combined with the
    later CL since that can set prior Readers in that list to nil for GC reasons.
    This causes panics when two MultiReaders are used together (even synchronously).
    
    To fix this, rather than setting consumed Readers as nil, we set them with
    a special eofReader that always returns EOF.
    
    Fixes #18232
    
    Change-Id: I2a9357ab217e3d54d38ea9022d18e4d14f4182d3
    Reviewed-on: https://go-review.googlesource.com/34140
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d4b46aa1b8c2e62b1e13de15741c7330fd2e9e3a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Dec 7 17:13:35 2016 -0800

    os: document that Rename does not replace an existing directory
    
    Fixes #18240.
    
    Change-Id: Ife951e2c1320b3f1362c85642615b24fd4291189
    Reviewed-on: https://go-review.googlesource.com/34135
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f28eea89e0bf129ebbeede1e3a85ce552d1c2277
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Dec 7 21:41:48 2016 +0000

    doc: misc go1.8.html fixes
    
    Change-Id: I929f66b713525f5273cf0fe09579835603279b58
    Reviewed-on: https://go-review.googlesource.com/34023
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 51a6d3e074e66ad9018779892d967ecd758e3440
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Dec 7 11:06:34 2016 -0800

    test: add bug501.go, a gccgo compiler crash
    
    Change-Id: I271707dee03fd97cd37bfb116eb00a5532034b57
    Reviewed-on: https://go-review.googlesource.com/34020
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 01c6a19e041f6b316c17a065f7a42b8dab57c9da
Author: Austin Clements <austin@google.com>
Date:   Tue Dec 6 17:42:42 2016 -0500

    runtime: add number of forced GCs to MemStats
    
    This adds a counter for the number of times the application forced a
    GC by, e.g., calling runtime.GC(). This is useful for detecting
    applications that are overusing/abusing runtime.GC() or
    debug.FreeOSMemory().
    
    Fixes #18217.
    
    Change-Id: I990ab7a313c1b3b7a50a3d44535c460d7c54f47d
    Reviewed-on: https://go-review.googlesource.com/34067
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d4177877c6d6e710d77dd8c94b91f8567f1aaa87
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Dec 7 12:23:13 2016 -0500

    cmd/internal/obj: regenerate relocation strings
    
    Change-Id: Ib9ba8f0b8785f1b0ddb29214beb8674dc06f7422
    Reviewed-on: https://go-review.googlesource.com/34111
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6623988eb73da429f41cfef85d481a5b93446ccd
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Wed Dec 7 07:55:21 2016 -0600

    cmd/link: fix sym sect when splitting text on ppc64le
    
    While processing a symbol for a function, if it is determined
    that a function would make the text section too large then
    a new text section is created and the address of the function
    is in the new text section.  But the symbol for the function
    is marked as being in the previous text section, causing
    incorrect codegen for the function and leading to a segv if
    that function is called.  This adds code to set the sym.Sect
    field to the new section if a new one is created.  Note that
    this problem only happens at the point where a new section is
    created.
    
    Fixes #18218
    
    Change-Id: Ic21ae11368d9d88ff6d5d3977f9ea72fe6477ed1
    Reviewed-on: https://go-review.googlesource.com/34069
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit be8a6fd2e3f9aa3ae808c1307b10823ee5bd0209
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Dec 7 16:18:51 2016 +0000

    crypto/x509: reduce test's sought number of system certs
    
    150 is too high for some people.
    
    Reports of 132, 145, 149 on OS X.
    
    Fixes #18203
    
    Change-Id: I559639aba7e87e07d1a1249f8b212b3f34a078ab
    Reviewed-on: https://go-review.googlesource.com/34019
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 1ea60c136a5782eadb9abf92064e3c1985fe1cdd
Author: Keith Randall <khr@golang.org>
Date:   Fri Dec 2 15:17:52 2016 -0800

    runtime: on stack copy, adjust BP
    
    When we copy the stack, we need to adjust all BPs.
    We correctly adjust the ones on the stack, but we also
    need to adjust the one that is in g.sched.bp.
    
    Like CL 33754, no test as only kernel-gathered profiles will notice.
    Tests will come (in 1.9) with the implementation of #16638.
    
    The invariant should hold that every frame pointer points to
    somewhere within its stack.  After this CL, it is mostly true, but
    something about cgo breaks it.  The runtime checks are disabled
    until I figure that out.
    
    Update #16638
    Fixes #18174
    
    Change-Id: I6023ee64adc80574ee3e76491d4f0fa5ede3dbdb
    Reviewed-on: https://go-review.googlesource.com/33895
    Reviewed-by: Austin Clements <austin@google.com>

commit 8e0c4639f11e9febd34fc1e2465138b37411b9d5
Author: Odin Ugedal <odin@ugedal.com>
Date:   Wed Dec 7 09:54:42 2016 +0100

    fmt: remove unnecessary else statement
    
    Change-Id: If30ccfcf56d56fb40102ad567a980793bd39f320
    Reviewed-on: https://go-review.googlesource.com/34071
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 850e55b8c028440f2fe282858b332cb810a06864
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 14:29:58 2016 -0400

    crypto/*: document use or non-use of constant-time algorithms
    
    Fixes #16821.
    
    Change-Id: I63d5f3d7cfba1c76259912d754025c5f3cbe4a56
    Reviewed-on: https://go-review.googlesource.com/31573
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bc075e61cb90585c34ae696aca7c0f2476f01c77
Author: Adam Langley <agl@golang.org>
Date:   Wed Nov 30 08:30:31 2016 -0800

    crypto/dsa: don't allow signing with degenerate private keys to loop forever.
    
    Previously it was possible to craft a DSA private key that would cause
    Sign() to loop forever because no signature could be valid. This change
    does some basic sanity checks and ensures that Sign will always
    terminate.
    
    Thanks to Yolan Romailler for highing this.
    
    Be aware, however, that it's still possible for an attacker to simply
    craft a private key with enormous values and thus cause Sign to take an
    arbitrary amount of time.
    
    Change-Id: Icd53939e511eef513a4977305dd9015d9436d0ce
    Reviewed-on: https://go-review.googlesource.com/33725
    Reviewed-by: Yolan Romailler <y@romailler.ch>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 26aa7422e506bc79965de9bb6e03b5cc09787dbb
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 6 22:05:41 2016 +0000

    net: use baked-in port numbers as fallback if cgo port lookup fails
    
    Fixes TestLookupPort_Minimal on android.
    
    Fixes #18213
    
    Change-Id: I1b65e790525d339a4cb7f17afe7e3a02c4587302
    Reviewed-on: https://go-review.googlesource.com/34014
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 2641cffd4166ba6991830115efc468dc3f5974ff
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Dec 6 20:18:26 2016 -0800

    misc/cgo/test: skip test18146 on Darwin
    
    It is reported as failing for two people (issues #18202 and #18212).
    The failure mode is that the system gets overloaded and other programs
    fail to run.
    
    Fixes #18202.
    
    Change-Id: I1f1ca1f5d8eed6cc3a9dffac3289851e09fa662b
    Reviewed-on: https://go-review.googlesource.com/34017
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0be4ef3ea6a915e3b2ab0cac35209566a1ae3068
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 6 18:22:42 2016 +0000

    cmd/go: ensure streaming test's stdout, stderr are same as cmd/go's
    
    Fixes #18153
    
    Change-Id: Ie8a32dd6fe306f00e51cde77dd4ea353f7109940
    Reviewed-on: https://go-review.googlesource.com/34010
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 94a4485f702c9681a12b25b6db2ef1be68cffc01
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 6 22:15:12 2016 +0000

    doc: mention more binary download architectures
    
    Fixes #18207
    
    Change-Id: Ibe85ab0acba7553b93603a31140b31bd9e4802cf
    Reviewed-on: https://go-review.googlesource.com/34015
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ac9962fb236569d25e9cc7f2859ac5a23eea1534
Author: Keith Randall <khr@golang.org>
Date:   Thu Dec 1 08:37:48 2016 -0800

    doc: mention concurrent map write/iterate detector
    
    Mention that the best-effort race detector on maps
    was upgraded to detect write/iterate races.
    
    Fixes #18137
    
    Change-Id: Ib6e0adde47e965126771ea712386031a2a55eba3
    Reviewed-on: https://go-review.googlesource.com/33768
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6c7978fc895099d0053ca7e994ca0936e10ba2d9
Author: Sebastien Binet <seb.binet@gmail.com>
Date:   Tue Dec 6 10:40:31 2016 +0100

    reflect: add example for StructOf
    
    This CL adds a simple example for StructOf.
    The example shows how StructOf can be used in a JSON roundtrip.
    
    Change-Id: I9ff1ea9cb8c0cf297c5fae74e68b89931076adfd
    Reviewed-on: https://go-review.googlesource.com/33953
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit f251708a733bfca46899d57baab7d2601f6d7057
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Dec 6 18:42:01 2016 +0000

    net/http: update bundled http2
    
    Updates bundled x/net/http2 to git rev 8dab9293 for:
    
        http2: make Transport retry on server's GOAWAY graceful shutdown
        https://golang.org/cl/33971
    
    Fixes #18083
    
    Change-Id: I676f5eb4b490a4d86356778bb17296c451f16d90
    Reviewed-on: https://go-review.googlesource.com/34011
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Tom Bergan <tombergan@google.com>

commit 348a7c5397f996a333f88cf9f0c912b282368f32
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Dec 5 23:20:20 2016 -0500

    cmd/link: hash packages after loading all symbols
    
    Conditioning on the plugin.Open symbol existing before loading all
    symbols means sometimes some packages don't have a hash value.
    
    Fixes #17928
    
    Change-Id: I2722449aa58eca08a25117d3ce976f11f805b5ac
    Reviewed-on: https://go-review.googlesource.com/33925
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 10f43a1f4f889795ab2ed2916199ee96459ff6a3
Author: Shenghou Ma <minux@golang.org>
Date:   Mon Dec 5 23:47:54 2016 -0500

    doc/go1.8: remove mention of #16396
    
    Change-Id: I811e76c9f42505e974bea634d4ded2499e4893db
    Reviewed-on: https://go-review.googlesource.com/33926
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 749720a0362557eabbf87ef9f1494b18444c0adb
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Dec 5 15:57:45 2016 -0800

    cmd/compile: fix static-initialization compilation failure
    
    Fixes #13263.
    
    Change-Id: Ie1cafc62b6bfe6c5381c35d9a95563267b4cc9b0
    Reviewed-on: https://go-review.googlesource.com/33970
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8adff32bacdaae452c453ac7ffbf088778bd5417
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Dec 1 23:12:18 2016 -0500

    doc: document the mips port in install-source.html
    
    While we're at it, also mention OpenBSD/ARM support.
    
    Change-Id: I4df4a158b67d11720146d05a235099d452295170
    Reviewed-on: https://go-review.googlesource.com/33854
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6c9f600d4991f66f1ce621c4e2d9ea72d5188d34
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Dec 5 14:10:46 2016 -0800

    misc/cgo/test: ignore "too many open files" in issue 18146 test
    
    Seen on the OpenBSD/AMD64 builder:
    https://build.golang.org/log/fa34df1bcd3af12d4fc0fb0e60e3c6197a2a6f75
    
    Update #18146.
    
    Change-Id: I2646621488be84d50f47c312baa0817c72e3c058
    Reviewed-on: https://go-review.googlesource.com/33907
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8016808562c514dbb1146739b56ca67be9028d91
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Dec 5 17:28:51 2016 -0800

    net/http: fix typo in Request.GetBody's doc string
    
    Change-Id: I84043b6fe4b20a2514d47217e07e44f26bec52ab
    Reviewed-on: https://go-review.googlesource.com/33973
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 80acfe950fce409477b9fae097696701a9ff66e3
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Dec 5 11:17:59 2016 -0800

    runtime/cgo: retry pthread_create on EAGAIN for OpenBSD
    
    For reasons that I do not know, OpenBSD does not call pthread_create
    directly, but instead looks it up in libpthread.so. That means that we
    can't use the code used on other systems to retry pthread_create on
    EAGAIN, since that code simply calls pthread_create.
    
    This patch copies that code to an OpenBSD-specific version.
    
    Also, check for an EAGAIN failure in the test, as that seems to be the
    underlying cause of the test failure on several systems including OpenBSD.
    
    Fixes #18146.
    
    Change-Id: I3bceaa1e03a7eaebc2da19c9cc146b25b59243ef
    Reviewed-on: https://go-review.googlesource.com/33905
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a303f05f863af89641cf9ba815f418e5bc3ec9dd
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Dec 5 11:23:38 2016 -0800

    misc/cgo/test: skip Test18146 on DragonFly
    
    Fails on builder for unknown reasons.
    
    Fixes #18198.
    Update #18146.
    
    Change-Id: Iaa85826655eee57d86e0c73d06c930ef3f4647ec
    Reviewed-on: https://go-review.googlesource.com/33906
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 14f18e5b6f5abd9819981fdee92fffe62f4d4c1c
Author: Shenghou Ma <minux@golang.org>
Date:   Thu Dec 1 23:07:53 2016 -0500

    doc/go1.8: document mips port requirements
    
    Fixes #18140.
    
    Change-Id: I527719576bc7198c79bb8bc51d258a71b2d5b296
    Reviewed-on: https://go-review.googlesource.com/33853
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7cba779cea52e827382a73804d06697e15444247
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Dec 2 15:32:55 2016 -0800

    runtime/cgo: retry pthread_create on EAGAIN
    
    Update #18146.
    
    Change-Id: Ib447aabae9f203a8b61fb8c984b57d8e2bfe69c2
    Reviewed-on: https://go-review.googlesource.com/33894
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8c31f40a4c1c3474a7c24684cc47845b0ec06974
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Dec 5 10:00:38 2016 -0800

    runtime: don't skip TestCgoCallbackGC on FreeBSD
    
    Seems to be fixed according to discussion on issue 16396.
    
    Fixes #16396.
    
    Change-Id: Ibac7037a24280204e48cb4d3000af524f65afd36
    Reviewed-on: https://go-review.googlesource.com/33903
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7e9fa3c3213fc1a4174fe5d6692c83f5610dff42
Author: Russ Cox <rsc@golang.org>
Date:   Mon Dec 5 11:11:47 2016 -0500

    runtime: check that Version does not contain \r \n
    
    Change-Id: I8982cfa7337ec457b5235a207ebfda00ef6a2e5a
    Reviewed-on: https://go-review.googlesource.com/33917
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ed0b232cdc48398c2074369852e5db8bdcb866aa
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sat Dec 3 19:17:16 2016 -0500

    cmd/compile: find last StoreWB explicitly
    
    In writebarrier phase, a chain of StoreWBs is rewritten to branchy
    code to invoke write barriers, and the last store in the chain is
    spliced into a Phi op to join the memory of the two branches. We
    must find the last store explicitly, since the values are not
    scheduled and they may not come in dependency order.
    
    Fixes #18169.
    
    Change-Id: If547e3c562ef0669bc5622c1bb711904dc36314d
    Reviewed-on: https://go-review.googlesource.com/33915
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit af67f7de3f7b0d26f95d813022f876eef1fa3889
Author: Dhananjay Nakrani <dhananjaynakrani@gmail.com>
Date:   Fri Dec 2 21:17:29 2016 -0800

    cmd/go: give useful error when msan isn't supported
    
    Fixes #18180.
    
    Change-Id: I7006fe6cf08139e5aaaf35412b962a4e82109f59
    Reviewed-on: https://go-review.googlesource.com/33898
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d54b60a2b2470ea42559b58995e86ff20dd70471
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sat Dec 3 18:45:50 2016 -0800

    html/template: lock in application/json as valid JS test
    
    CL https://go-review.googlesource.com/33899 added
    application/json as a mimeType for valid JS. Let's
    lock that fix in with a test.
    
    Updates #18159
    
    Change-Id: Ic4dfd8929aebfc5410f796688f081ca06630f672
    Reviewed-on: https://go-review.googlesource.com/33901
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Nodir Turakulov <nodir@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 37dbc7b49cbc9934c8dde54b65e5f417ce3faae9
Author: Nodir Turakulov <nodir@google.com>
Date:   Sat Dec 3 11:37:05 2016 -0800

    html/template: escape JS in application/json script tag
    
    Since ffd1c781b77aab542713b66ef387fa9307e4060b HTML templates check
    MIME type in the "type" attribute of "script" tag to decide if contents
    should be escaped as JavaScript. The whitelist of MIME types did not
    include application/json. Include it in this CL.
    
    Fixes #18159
    
    Change-Id: I17a8a38f2b7789b4b7e941d14279de222eaf2b6a
    Reviewed-on: https://go-review.googlesource.com/33899
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d29f72f4728b75314b72337e9768c73eb22338e0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Dec 2 23:30:09 2016 +0000

    cmd/dist: remove special test timeout scale for Windows
    
    In https://golang.org/cl/33804 I screwed up a GOOS == "windows"
    check into a bogus comparison against GOARCH == "windows".
    
    But turns out the builders are happy anyway, so remove the windows
    special case.
    
    Change-Id: I820b1d49d5b3e8cbffe4516fc39f514326dc39f8
    Reviewed-on: https://go-review.googlesource.com/33893
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 93726522ef2c403b7df8945892b641098ef9f803
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Dec 2 23:27:02 2016 +0000

    runtime: skip GDB tests on mips64
    
    Updates #18173
    
    Change-Id: I4c667c89ba3bf16433a4cef7cb01054f1798667d
    Reviewed-on: https://go-review.googlesource.com/33892
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e7a0df35b3b9d3fe2a84ef0ea186fdc6c203e318
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Dec 2 16:34:03 2016 -0800

    cmd/go: add missing newline at end of error message
    
    Change-Id: I9277e869e171d9e051ff9a70ac578b8127fa74f8
    Reviewed-on: https://go-review.googlesource.com/33897
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6270c5ac28e89322268acd92c14a7a490a53e3a1
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 1 09:15:39 2016 -0800

    test: add test case for which gccgo generated incorrect GC info
    
    Change-Id: I5e33db9e63f70706882b85ab124a48509797b05a
    Reviewed-on: https://go-review.googlesource.com/33790
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5c9035acc1e1540a564ea660000f4f64e783d5ac
Author: Filippo Valsorda <hi@filippo.io>
Date:   Fri Dec 2 19:09:08 2016 +0000

    doc: fix grammar in go1.8.html > crypto/tls
    
    Change-Id: If8200e54b3650f789c5312f10cce32201a199b80
    Reviewed-on: https://go-review.googlesource.com/33775
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 130ad87ab7b02a87401246d4a5f0c3f00fc7d709
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 1 22:48:52 2016 -0800

    cmd/link: don't overalign ELF reloc sections
    
    Internal linking on an ELF system creates two reloc sections, which
    must be adjacent. The default is to base section alignment on the
    section size, but doing that for ELF reloc sections can introduce a
    gap. Set the reloc section alignment explicitly to avoid that.
    
    Fixes #18044.
    
    Change-Id: I8ccc131e60937d30c5f715a34c7803258833fc2f
    Reviewed-on: https://go-review.googlesource.com/33872
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9e0f3a14591586fcfd876d7801b5f3e4fc1998b5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Dec 2 06:49:17 2016 +0000

    doc: correct the number of changes to the language in go1.8.html
    
    And link it.
    
    Change-Id: Ic0105468435299fb1638f86522f4f3ce417ec1c2
    Reviewed-on: https://go-review.googlesource.com/33871
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c676b0f9cfff52c4d3cde736ce2a64c142573b3c
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Dec 1 22:06:41 2016 -0800

    cmd/compile/internal/syntax: remove dead type declaration
    
    Change-Id: I8a3ce0fa513ff943009c5669531132cd23ecf155
    Reviewed-on: https://go-review.googlesource.com/33870
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bcacb6d3f4d7cb2b77ce16ad98938af1eeceea0a
Author: Shenghou Ma <minux@golang.org>
Date:   Fri Dec 2 00:46:10 2016 -0500

    vendor/golang_org/x/crypto/chacha20poly1305: revendor to pick up fix for #18154
    
    Fixes #18154.
    
    Change-Id: I1836b63a380b7fc2f9965e909859b1a89a3ae5d5
    Reviewed-on: https://go-review.googlesource.com/33856
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 64969c8ef5b8c52b332d95d7a04421a5e4232791
Author: Kevin Burke <kev@inburke.com>
Date:   Thu Dec 1 17:45:26 2016 -0800

    doc: update suggested Go installation version
    
    Previously the docs suggested downloading 1.7.2 (no good) or 1.7.3 (has
    security flaw).
    
    Change-Id: Ifabe85908df8d6591c0957ef4bb1b800fc145793
    Reviewed-on: https://go-review.googlesource.com/33808
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f52e20582a30c1a52d192f331e19c277aa1cd98f
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 1 16:25:07 2016 -0800

    doc: CL 32796 was reverted, so remove it from go1.8.html
    
    Reversion CL was 33770.
    
    Change-Id: I119f26796bb2b66d302e132dd118847ac3bd6633
    Reviewed-on: https://go-review.googlesource.com/33807
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4bc7b5aeba2061c14199354b1c59592aa481bac8
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 22:01:35 2016 +0000

    net/http: revert change making NewRequest set ContentLength -1
    
    The introduction of NoBody and related body-peeking bug fixes also
    added a "cleanup" of sorts to make NewRequest set the returned
    Requests's ContentLength to -1 when it didn't know it.
    
    Using -1 to mean unknown is what the documentation says, but then
    people apparently(?) depended on it being zero so they could do this:
    
        req, _ := http.NewRequest("POST", url, someNonNilReaderWithUnkownSize)
        req.Body = nil
        res, err := http.DefaultClient.Do(req)
    
    ... and expect it to work.
    
    After https://golang.org/cl/31445 the contrived(?) code above stopped
    working, since Body was nil and ContentLength was -1, which has been
    disallowed since Go 1.0.
    
    So this restores the old behavior of NewRequest, not setting it to -1.
    That part of the fix isn't required as of https://golang.org/cl/31726
    (which added NoBody)
    
    I still don't know whether this bug is hypothetical or actually
    affected people in practice.
    
    Let's assume it's real for now.
    
    Fixes #18117
    
    Change-Id: I42400856ee92a1a4999b5b4668bef97d885fbb53
    Reviewed-on: https://go-review.googlesource.com/33801
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7736cbafd994873519372980e9eb802c37e4c8c9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 23:27:25 2016 +0000

    cmd/dist: adjust default timeout scale for mips
    
    Per recommendation from imgtec.com folk.
    
    Change-Id: I9b6f30572f257acce59842ac55362f52fe36c5ab
    Reviewed-on: https://go-review.googlesource.com/33804
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fd483b6f62d3d7af915d71df6e654e5edcbc188c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 1 14:27:06 2016 -0800

    cmd/go: check MustHaveExternalNetwork before `go get` tests
    
    Also change a couple of `go get` tests to use MustHaveExternalNetwork
    rather than checking testing.Short.
    
    Change-Id: I98ccc05b8b0354f1b7486e28dac5f8341c342a07
    Reviewed-on: https://go-review.googlesource.com/33802
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e3a1d0cb7c9e68d60b207a683e5f3ba23e62cb91
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Dec 1 14:59:21 2016 -0800

    cmd/internal/obj: rename obj.go to line.go
    
    This file is entirely about the implementation of LineHist, and I can
    never remember which generic filename in cmd/internal/obj has it.
    Rename to line.go to match the already existing line_test.go.
    
    Change-Id: Id01f3339dc550c9759569d5610d808b17bca44d0
    Reviewed-on: https://go-review.googlesource.com/33803
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ae9712c76688a07e1149958994a9ab3e5a99c37f
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Thu Dec 1 11:07:11 2016 -0800

    database/sql: ensure Commit and Rollback return ErrTxDone
    
    Ensure documented behavior of returning ErrTxDone if the Tx has
    already been committed or rolled back.
    
    Fixes #18147
    
    Change-Id: I07dc75bef4dbd4dd88dd252c96dc8ab99f28c00e
    Reviewed-on: https://go-review.googlesource.com/33793
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 2d136ae82e68bc820804b6a38262f240ea2bb5cf
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Dec 1 13:03:54 2016 -0800

    cmd/compile: correctly parse //line filename:line where filename contains ':'
    
    This was a regression from 1.7. See the issue for details.
    
    Fixes #18149.
    
    Change-Id: Ic8f5a35d14edf9254b1275400316cff7aff32a27
    Reviewed-on: https://go-review.googlesource.com/33799
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 751c8903d29752bffa0c846a69fe465b2487f3f4
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Dec 1 13:27:32 2016 -0800

    doc: fix typo in go1.8.html
    
    Change-Id: I853da2666ed2b5f8b80bd9438f8c352f233b9c89
    Reviewed-on: https://go-review.googlesource.com/33800
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1102c70bc425e66d3b8981f69a40bd2043cf7e60
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 30 18:45:56 2016 +0000

    net/http: teach NewRequest that NoBody has ContentLength zero
    
    NoBody is new in Go 1.8.
    
    Found while investigating #18117
    
    Change-Id: I6bda030f358e2270f090d108cb3a89c8a2665fcb
    Reviewed-on: https://go-review.googlesource.com/33714
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2cfb6d54421956e27836b728a5c36e470d9cb0f1
Author: Chris Broadfoot <cbro@golang.org>
Date:   Thu Dec 1 12:12:23 2016 -0800

    doc: document go1.7.4 and go1.6.4
    
    Change-Id: I0728afe6a1d1e0aee4701e51a5548fa9fd637b66
    Reviewed-on: https://go-review.googlesource.com/33795
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b42d4a8b0e99c38bb25010ce169da9ef4af85da6
Author: Chris Broadfoot <cbro@golang.org>
Date:   Tue Oct 18 17:32:26 2016 -0700

    doc: document go1.7.3 and add note to go1.7.2 that it should not be used
    
    Change-Id: I3dd1513e927733ce5c63928da772cb81760ba869
    Reviewed-on: https://go-review.googlesource.com/31442
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-on: https://go-review.googlesource.com/33794

commit 63a7ee78239953a15c67d4de3195655b5129eff6
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Dec 1 20:30:22 2016 +0100

    net: fix writev tests on Android
    
    Change-Id: Iacced25363f54ee2cc1e00a71605dba7fb447162
    Reviewed-on: https://go-review.googlesource.com/33772
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c96e94e69d5b29787589385d93eb4452af05c6f3
Author: Keith Randall <khr@golang.org>
Date:   Wed Nov 30 16:15:32 2016 -0800

    cmd/compile: generate frame pointers for otherwise frameless functions
    
    func f() {
        g()
    }
    
    We mistakenly don't add a frame pointer for f.  This means f
    isn't seen when walking the frame pointer linked list.  That
    matters for kernel-gathered profiles, and is an impediment for
    issues like #16638.
    
    To fix, allocate a stack frame even for otherwise frameless functions
    like f.  It is a bit tricky because we need to avoid some runtime
    internals that really, really don't want one.
    
    No test at the moment, as only kernel CPU profiles would catch it.
    Tests will come with the implementation of #16638.
    
    Fixes #18103
    
    Change-Id: I411206cc9de4c8fdd265bee2e4fa61d161ad1847
    Reviewed-on: https://go-review.googlesource.com/33754
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 7e5b2e0ec144d5f5b2923a7d5db0b9143f79a35a
Author: Quentin Smith <quentin@golang.org>
Date:   Wed Nov 30 15:16:37 2016 -0500

    crypto/x509: read Darwin trust settings for root CAs
    
    Darwin separately stores bits indicating whether a root certificate
    should be trusted; this changes Go to read and use those when
    initializing SystemCertPool.
    
    Unfortunately, the trust API is very slow. To avoid a delay of up to
    0.5s in initializing the system cert pool, we assume that
    the trust settings found in kSecTrustSettingsDomainSystem will always
    indicate trust. (That is, all root certs Apple distributes are trusted.)
    This is not guaranteed by the API but is true in practice.
    
    In the non-cgo codepath, we do not have that benefit, so we must check
    the trust status of every certificate. This causes about 0.5s of delay
    in initializing the SystemCertPool.
    
    On OS X 10.11 and older, the "security" command requires a certificate
    to be provided in a file and not on stdin, so the non-cgo codepath
    creates temporary files for each certificate, further slowing initialization.
    
    Updates #18141.
    
    Change-Id: If681c514047afe5e1a68de6c9d40ceabbce54755
    Reviewed-on: https://go-review.googlesource.com/33721
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 9fbfe7cca00a456541e9aa2b2cc1251d777f325b
Author: David Lazar <lazard@golang.org>
Date:   Wed Nov 30 17:09:07 2016 -0500

    cmd/compile: do not inline functions marked cgo_unsafe_args
    
    Now the net tests pass with -gcflags '-l=4'.
    
    Fixes #18125.
    
    Change-Id: I4e3a46eb0cb3a93b203e74f5bc99c5822331f535
    Reviewed-on: https://go-review.googlesource.com/33722
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3c2e4ed8d31e65556e936bf394a47e644605d23d
Author: Keith Randall <khr@golang.org>
Date:   Thu Dec 1 10:10:17 2016 -0800

    cmd/objdump: copy gosym.PCValue into internal package
    
    ... so we don't have to export gosym.PCValue.
    
    Change-Id: Ie8f196d5e5ab63e3e69d1d7b4bfbbf32b7b5e4f5
    Reviewed-on: https://go-review.googlesource.com/33791
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 612469ab0b57bb53d1f054e37b64a63c08d8c6db
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Thu Dec 1 23:20:03 2016 +0530

    cmd/go: hide the "TERM" environment variable from "go bug"
    
    Fixes #18128
    
    Change-Id: I5530c9d774a1e398cd759a05bbf308e6e42f0007
    Reviewed-on: https://go-review.googlesource.com/33810
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 208d4d222786f3e51749a6b50e4f3fd8f8d9777f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 16:50:00 2016 +0000

    net/http: clarify Request.Context's lifetime
    
    Reverts https://golang.org/cl/23672 and tweaks the text to clarify
    HTTP/2 request cancelations also cancel the context (not just closing
    the TCP conn).
    
    Fixes #18143
    
    Change-Id: I9f838e09b906d455c98f676e5bc5559f8f7ecb17
    Reviewed-on: https://go-review.googlesource.com/33769
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit e5e05627745764fb9989bf3966919d6715f21abc
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Nov 23 09:10:30 2016 -0800

    database/sql: document expectations for named parameters
    
    Require parameter names to not begin with a symbol.
    
    Change-Id: I5dfe9d4e181f0daf71dad2f395aca41c68678cbe
    Reviewed-on: https://go-review.googlesource.com/33493
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ea1b90f855fe2891ff0f39d3a3f4b0a5f72a04ed
Author: Austin Clements <austin@google.com>
Date:   Wed Nov 30 15:48:33 2016 -0500

    runtime: fix incorrect comment about bitvector layout
    
    Commit 303b69fe packed bitvectors more tightly, but missed a comment
    describing their old layout. Update that comment.
    
    Change-Id: I095ccb01f245197054252545f37b40605a550dec
    Reviewed-on: https://go-review.googlesource.com/33718
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8a103bd4ce34574c33d1f3558e0441df884c27f1
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 16:26:17 2016 +0000

    doc: remove space in "Go 1. 8"
    
    And reflow paragraph while I'm at it.
    
    Change-Id: Ia13bb364783790fbd9f8b69ef268f8a4b71679cb
    Reviewed-on: https://go-review.googlesource.com/33767
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 583b72dea1a887e235b9bb7e6db6902b89c1d266
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 03:14:58 2016 +0000

    doc: clarify zip behavior in go1.8.html
    
    Updates #17929
    
    Change-Id: I03b8847384c6cd8c43fe8bf2d75cd26db7063b8b
    Reviewed-on: https://go-review.googlesource.com/33762
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 85bcf7f59d68c59be50087f68f7f25736c6a2adf
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Thu Dec 1 07:10:21 2016 -0800

    doc: update go1.8 release notes to say NamedArg not NamedParam
    
    Fixes #18135
    
    Change-Id: I54ef9d6fc804d0fb77b729a04367a138e40f9ddf
    Reviewed-on: https://go-review.googlesource.com/33766
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0b2daa56504e0f2ff6f724eb5bb71caed0011006
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Dec 1 09:31:08 2016 +0000

    Revert "runtime: handle SIGPIPE in c-archive and c-shared programs"
    
    This reverts commit d24b57a6a1a3530e590b7c0a72dc78043e198630.
    
    Reason for revert: Further complications arised (issue 18100). We'll try again in Go 1.9.
    
    Change-Id: I5ca93d2643a4be877dd9c2d8df3359718440f02f
    Reviewed-on: https://go-review.googlesource.com/33770
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>

commit 16c33992e0848209d0254bdb5c8f6c7b7ceb5c60
Author: Shenghou Ma <minux@golang.org>
Date:   Tue Nov 22 21:15:52 2016 -0500

    doc/go1.8.html: announce 1.8 will be the last to support linux/arm prior to ARMv6K
    
    Updates #17082.
    
    Change-Id: I0bf330d1a1ebb7e31e42d03287160b474522c332
    Reviewed-on: https://go-review.googlesource.com/33455
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3a369a0f59b9c5771c23ec50af21625b103b2d7c
Author: Shenghou Ma <minux@golang.org>
Date:   Tue Nov 29 23:29:49 2016 -0500

    cmd/dist: add -check-armv6k command to check for ARMv6K
    
    so that our release note can reference a simple command to check if
    the processor implements ARMv6K or not.
    
    Updates #17082.
    
    Change-Id: I9ca52051e5517394a7cd6b778fb822c3ee435f84
    Reviewed-on: https://go-review.googlesource.com/33686
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9ea306a10ca4d25672641ffbb628718a6665b4f3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 04:29:12 2016 +0000

    sort: add Slice example
    
    Change-Id: I34ba4eaf1d232b639998ad3bbb0d075dd097722b
    Reviewed-on: https://go-review.googlesource.com/33763
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dominik Honnef <dominik@honnef.co>

commit 41908a54530120b68a79e0fd22b5e709d33cced0
Author: Chris Broadfoot <cbro@golang.org>
Date:   Wed Nov 30 18:43:28 2016 -0800

    api: promote next.txt to go1.8.txt, update go tool
    
    Change-Id: I37f2893ce14009efe095aac3bc811d650c66bf2a
    Reviewed-on: https://go-review.googlesource.com/33761
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f1a8a63daba8e3ed75e912599d8bb38eed6b745c
Author: Chris Broadfoot <cbro@golang.org>
Date:   Wed Nov 30 18:37:18 2016 -0800

    api: update next.txt (remove database/sql.NamedParam)
    
    Updates #18099
    
    Change-Id: I16b4b2dd881d63cbb406d14a4fd960f0a777a452
    Reviewed-on: https://go-review.googlesource.com/33760
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d4b704e110dea8395d107f5fd3be9f3cf2e8d161
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Nov 30 15:46:37 2016 -0800

    cmd/cgo: fix cgo checking when fetching errno value
    
    Fixes #18126.
    
    Change-Id: I7ae090945ef203673b06eb94817cc5c894b5eadc
    Reviewed-on: https://go-review.googlesource.com/33752
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e207032589ed927a66d2f04ac3621872213c6b51
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 01:59:07 2016 +0000

    doc: go1.8.html review feedback
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: Ic6d449e7822daa70f3fe17e942e9d29233547019
    Reviewed-on: https://go-review.googlesource.com/33759
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b43384e8717c86d9d5051b6bc02047ce5ec2701f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Dec 1 00:48:51 2016 +0000

    encoding/binary: document the new bool support
    
    Updates #16856
    
    Change-Id: I57af6b0c0d5ecdaf19cf6f969b05ec9ec03058f1
    Reviewed-on: https://go-review.googlesource.com/33756
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5dd4d6edb8c935ce313782ec6ce838c03c73ea9b
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 30 17:16:32 2016 -0500

    cmd/go: document GOPATH default exception
    
    Doesn't get defaulted if $HOME/go is a GOROOT.
    
    Change-Id: I6ac8211a74029e4ad70a50f6e7884a039a27ab05
    Reviewed-on: https://go-review.googlesource.com/33720
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 74628a8b9f102bddd5078ee426efe0fd57033115
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 30 14:56:58 2016 -0500

    doc, cmd/go: adjust documentation for default GOPATH
    
    Replaces CL 33356.
    
    Fixes #17262.
    
    Change-Id: Idfb2343e90771775e51a66c63760f458737a288c
    Reviewed-on: https://go-review.googlesource.com/33730
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5d1b53a944a415205a945f4ddd89a0af8e9f114f
Author: David Lazar <lazard@golang.org>
Date:   Mon Nov 28 17:39:31 2016 -0500

    cmd/compile: generate code that type checks when inlining variadic functions
    
    This fixes a bug in -l=3 or higher.
    
    To inline a variadic function, the compiler generates code that constructs
    a slice of arguments for the variadic parameter. Consider the function
    
      func Foo(xs ...string)
    
    and the call Foo("hello", "world"). To inline the call to Foo, the
    compiler used to generate
    
      xs := [2]string{"hello", "world"}[:]
    
    which doesn't type check:
    
      invalid operation [2]string literal[:] (slice of unaddressable value).
    
    Now, the compiler generates
    
      xs := []string{"hello", "world"}
    
    which does type check.
    
    Fixes #18116.
    
    Change-Id: I0ee531ef2e6cc276db6fb12602b25a46d6d5db21
    Reviewed-on: https://go-review.googlesource.com/33671
    Reviewed-by: Keith Randall <khr@golang.org>

commit 01dda422520e05e26ed98629b735038d7f22678c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 30 19:15:01 2016 +0000

    doc: document default GOPATH in go1.8.html
    
    And fix a bad link.
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: Ib16cf55cdc4a5340f2f4f96ad5934a9fe7d49d75
    Reviewed-on: https://go-review.googlesource.com/33716
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2a64ebfc6d247e9177190f862b0947ac98c5eb43
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Nov 30 09:30:31 2016 -0800

    database/sql: deflake query cancel tests
    
    Rather then using a sleep in the fake DB, go to a channel
    select and wait for the context to be done.
    
    Fixes #18115
    
    Change-Id: I6bc3a29db58c568d0a7ea06c2a354c18c9e798b2
    Reviewed-on: https://go-review.googlesource.com/33712
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f6bff1d587c3523d2d1b98f0737a922ac9b5becc
Author: Austin Clements <austin@google.com>
Date:   Wed Nov 30 10:50:40 2016 -0500

    runtime: fix undead arguments in cgocall
    
    From the garbage collector's perspective, time can move backwards in
    cgocall. However, in the midst of this time warp, the pointer
    arguments to cgocall can go from dead back to live. If a stack growth
    happens while they're dead and then a GC happens when they become live
    again, GC can crash with a bad heap pointer.
    
    Specifically, the sequence that leads to a panic is:
    
    1. cgocall calls entersyscall, which saves the PC and SP of its call
    site in cgocall. Call this PC/SP "X". At "X" both pointer arguments
    are live.
    
    2. cgocall calls asmcgocall. Call the PC/SP of this call "Y". At "Y"
    neither pointer argument is live.
    
    3. asmcgocall calls the C code, which eventually calls back into the
    Go code.
    
    4. cgocallbackg remembers the saved PC/SP "X" in some local variables,
    calls exitsyscall, and then calls cgocallbackg1.
    
    5. The Go code causes a stack growth. This stack unwind sees PC/SP "Y"
    in the cgocall frame. Since the arguments are dead at "Y", they are
    not adjusted.
    
    6. The Go code returns to cgocallbackg1, which calls reentersyscall
    with the recorded saved PC/SP "X", so "X" gets stashed back into
    gp.syscallpc/sp.
    
    7. GC scans the stack. It sees there's a saved syscall PC/SP, so it
    starts the traceback at PC/SP "X". At "X" the arguments are considered
    live, so it scans them, but since they weren't adjusted, the pointers
    are bad, so it panics.
    
    This issue started as of commit ca4089ad, when the compiler stopped
    marking arguments as live for the whole function.
    
    Since this is a variable liveness issue, fix it by adding KeepAlive
    calls that keep the arguments live across this whole time warp.
    
    The existing issue7978 test has all of the infrastructure for testing
    this except that it's currently up to chance whether a stack growth
    happens in the callback (it currently only happens on the
    linux-amd64-noopt builder, for example). Update this test to force a
    stack growth, which causes it to fail reliably without this fix.
    
    Fixes #17785.
    
    Change-Id: If706963819ee7814e6705693247bcb97a6f7adb8
    Reviewed-on: https://go-review.googlesource.com/33710
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3f0f24df7b0017739b415e75bc4375a1483bd1a1
Author: Austin Clements <austin@google.com>
Date:   Wed Nov 30 10:43:14 2016 -0500

    runtime: use standard comment style in cgocall
    
    Change-Id: I9f2c2da4aa512729ae40562b06601da95ba50d6f
    Reviewed-on: https://go-review.googlesource.com/33689
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2b1abf75945508a602daa29a87b7a45e0b6b04af
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Tue Nov 29 09:57:17 2016 -0800

    database/sql: rename NamedParam to NamedArg and Param to Named
    
    Be consistent with the argument names already provided. Also
    parameter is the variable, argument is the value.
    
    Fixes #18099
    
    Change-Id: Idb3f4e9ffc214036c721ddb4f614ec6c95bb7778
    Reviewed-on: https://go-review.googlesource.com/33660
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit feacaca7a0969db9a1e6f5022b80a6d9a7a7c5f3
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Nov 29 14:42:22 2016 -0800

    net/http: document how headers are forwarded by Client
    
    Fixes #18096
    
    Change-Id: I22e1abb75dc19c4d1985b6857c79a81b9db5a76c
    Reviewed-on: https://go-review.googlesource.com/33670
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b6cc37d8df8003fdfc334292e698a72c5cae35b7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 30 05:20:25 2016 +0000

    doc: update go1.8.html to remove mention of logging of bad requests
    
    TBR=See https://golang.org/cl/33244
    
    Updates #18095
    
    Change-Id: I80f3a0462e6cc431b03927fa919cda4f6eee8d97
    Reviewed-on: https://go-review.googlesource.com/33687
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 32aff9ea7fd402f0d999f90bf74bc3368e77cc45
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 30 04:15:17 2016 +0000

    doc: remove two go1.8.txt items
    
    Change-Id: I9035d1c9e81c4f772512958fed92d14335b8a9de
    Reviewed-on: https://go-review.googlesource.com/33685
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 93dfb49d86ff085a4e644d596a0632de66feb135
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 30 04:12:33 2016 +0000

    doc: more go1.8.html
    
    Mutex profiling, syscall, fmt, go/types, html/template.
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I1ba0649171d6f6a69646a90eb65db6674cb903af
    Reviewed-on: https://go-review.googlesource.com/33684
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1aa191b468f0dde2546c8430dbfffb8b94e7568b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 30 03:24:40 2016 +0000

    doc: remove some TODOs from go1.8.html
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I5d92bd62b6560d245f77fa042c7e35d9eddc4994
    Reviewed-on: https://go-review.googlesource.com/33683
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 406d2fa2f3034974e94620bacf6c09bcabaf85fd
Author: Shenghou Ma <minux@golang.org>
Date:   Mon Nov 28 20:31:18 2016 -0500

    net/http: fix test TestServeMuxHandlerRedirects
    
    The code was intended to test that mux handler should redirect at
    most once, but the added loop condition defeated that. Remove the
    loop condition and document the intention better.
    
    Fixes #18068.
    
    Change-Id: I2a4ea041eae27168b45a09aa46e740ac03921594
    Reviewed-on: https://go-review.googlesource.com/33654
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit a745dc930e00a026aea6449ec0e790152eb4bcd4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 30 02:04:09 2016 +0000

    doc: add tool sections to go1.8.html
    
    Some still in TODO form.
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I63547bed3c6ce34b706821a3c150ae03d7d82cf8
    Reviewed-on: https://go-review.googlesource.com/33682
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6dca9ac791054ebcaf02362bd7e6ab00c18a4b7d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 29 17:58:46 2016 -0800

    doc: add release notes for os and os/signal packages
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I2e5b24fb0b110d833a8b73bccfbf399cb6e37ea2
    Reviewed-on: https://go-review.googlesource.com/33681
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 012ec29ad46128265e0ec2dd2ac3a620c01619c5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 30 01:44:15 2016 +0000

    doc: more go1.8.html additions
    
    And start deleting from go1.8.txt.
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I71011d97b23a7ba94cd51e16ae61fda18e8b96eb
    Reviewed-on: https://go-review.googlesource.com/33680
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0b1b6d4ce32818e0aa6db3bd37c6ca4a4d5613af
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 29 17:04:31 2016 -0800

    doc: remove remaining cmd/go entries from go1.8.txt
    
    None of them need to be called out in the release notes.
    
    Change-Id: I143a1879b25063574e4107c1e89264434d45d1d5
    Reviewed-on: https://go-review.googlesource.com/33676
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1afe0105a6c415fe204fcb778e042210f1225b47
Author: Kenny Grant <kennygrant@gmail.com>
Date:   Tue Nov 29 20:40:40 2016 +0000

    net/http: remove logging on bad client requests
    
    As discussed in #18095 the server should not log for bad user input.
    
    Change-Id: I628a796926eff3a971e5b04abec17ea377c3f9b7
    Reviewed-on: https://go-review.googlesource.com/33617
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 655a4e1284dadf3507a13b408d21900008e44221
Author: Kevin Burke <kev@inburke.com>
Date:   Fri Nov 11 16:56:07 2016 -0800

    cmd/compile/internal/gc: document variables and functions
    
    Change-Id: I01b2278eb50585331b8ff7ff5e3c1f9c5ba52b63
    Reviewed-on: https://go-review.googlesource.com/33156
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 0dd7e409e15d9b47d28cec422a41dd980b1479f0
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Tue Nov 29 16:46:34 2016 -0700

    doc: note net/UnixListener.SetUnlinkOnClose in go1.8.html
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I201ffe489842ff17277424be4a012558d161f0a7
    Reviewed-on: https://go-review.googlesource.com/33672
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6eb11b2c398b19ab2201487139e569eecebf8626
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Nov 29 14:39:06 2016 -0800

    go/ast: fix doc string for ast.GenDecl
    
    Fixes #18109.
    
    Change-Id: I5e3a44422794b7bae7741523fb7cacb6ba147af7
    Reviewed-on: https://go-review.googlesource.com/33669
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4bd95702dd1e81f383ee67c14945620d30247908
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Wed Nov 23 11:35:17 2016 -0700

    net: expand nss myhostname fallback detection
    
    Expand myhostname fallback detection to properly detect the local
    hostname in addition to other supported special names and suffixes.
    
    Fixes #17967
    
    Change-Id: I1fe141fd9838b25886c08b6f2fd325e58be60457
    Reviewed-on: https://go-review.googlesource.com/33550
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c77e80df6c759a9a8e3a09f86f1ec5d6e560bb0e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 29 14:20:58 2016 -0800

    doc: add note about gccgo go go1.8.html
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I28559724322007d4259810c209a92ec1cc10f338
    Reviewed-on: https://go-review.googlesource.com/33668
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 62e51c536b1ad117a8c8a3819bd8bb984e481f24
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 29 14:17:35 2016 -0800

    doc: add notes about cgo to go1.8.html
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I0215a7873977be81f2f84374f0b628abaf0e57c1
    Reviewed-on: https://go-review.googlesource.com/33667
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4822e76ba547c158bb98419c6eb514c6ee198ee0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 29 20:41:29 2016 +0000

    crypto/tls: update CBC Lucky13 warning a bit
    
    Some countermeasures were implemented in https://golang.org/cl/18130
    
    Updates #13385
    
    Change-Id: I723e1e3be0fa6d13767b65b145d90c89e92b2774
    Reviewed-on: https://go-review.googlesource.com/33665
    Reviewed-by: Adam Langley <agl@golang.org>

commit 00047248223a68882a120e210014b66577172218
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 29 20:39:47 2016 +0000

    doc: more additions to go1.8.html
    
    Adds crypto/tls, crypto/x509, math/big, mime.
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I3fa3739e56f8c005e2a43c19f525cc5e2d981935
    Reviewed-on: https://go-review.googlesource.com/33666
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 268bc396c1ce5b7495c5818a286ef92763c1ba7e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 29 19:36:44 2016 +0000

    doc: more go1.8.html tweaks and new context additions section
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: Id5d5472cf1e41472d8d0f82ee133c7387257ba2b
    Reviewed-on: https://go-review.googlesource.com/33664
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 11f8676b1b92be5b7a41ee889796f5be6e03cb9b
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Nov 29 10:18:06 2016 -0800

    cmd/compile/internal/syntax: remove unused node field
    
    The doc field is not yet used - remove it for now (we may end up
    with a different solution for 1.9). This reduces memory consumption
    for parsing all of std lib by about 40MB and makes parsing slightly
    faster.
    
    Change-Id: Iafb00b9c7f1be9c66fdfb29096d3da5049b2fcf5
    Reviewed-on: https://go-review.googlesource.com/33661
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 0d163ce1c95d03a173eba246de6d45db69e678ac
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Fri Oct 28 10:10:46 2016 -0700

    database/sql: do not bypass the driver locks with Context methods
    
    When context methods were initially added it was attempted to unify
    behavior between drivers without Context methods and those with
    Context methods to always return right away when the Context expired.
    However in doing so the driver call could be executed outside of the
    scope of the driver connection lock and thus bypassing thread safety.
    
    The new behavior waits until the driver operation is complete. It then
    checks to see if the context has expired and if so returns that error.
    
    Change-Id: I4a5c7c3263420c57778f36a5ed6fa0ef8cb32b20
    Reviewed-on: https://go-review.googlesource.com/32422
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3825656e285155d40f286ff9e1e5deb60cf99094
Author: Dhananjay Nakrani <dhananjaynakrani@gmail.com>
Date:   Sat Nov 26 11:21:01 2016 -0800

    cmd/go: report position info in package errors
    
    Also refactor common position filling code into a function.
    
    Fixes #18011
    
    Change-Id: I76528626da67a7309193fa92af1e361c8e2fcf84
    Reviewed-on: https://go-review.googlesource.com/33631
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b079869dadbb607aecbe9e2d38fbd13b89a5cc91
Author: Hana Kim <hyangah@gmail.com>
Date:   Tue Nov 22 16:09:28 2016 -0500

    internal/pprof/profile: parse mutex profile including comments
    
    Skip lines if they are empty or starting with "#" which are valid
    legacy pprof output format.
    
    Fixes #18025
    
    Change-Id: I7aee439171496932637b8ae3188700911f569b16
    Reviewed-on: https://go-review.googlesource.com/33454
    Reviewed-by: Peter Weinberger <pjw@google.com>

commit 7a92d0b1ae0c6a0f997a4282251e45668ca4ed75
Author: Michal Bohuslávek <mbohuslavek@gmail.com>
Date:   Tue Nov 29 09:58:35 2016 +0000

    net/http/httptest: fix typo in doc comment
    
    Change-Id: I89f276b32015882437e128814573343a4ca53569
    Reviewed-on: https://go-review.googlesource.com/33615
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8fa0d85b385b549fed163fe67342dfcd092e02c4
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Nov 28 22:34:50 2016 -0800

    cmd/compile: don't panic on syntax error in select statement
    
    Fixes #18092.
    
    Change-Id: I54e2da2e0f168c068f5e4a1b22ba508d78259168
    Reviewed-on: https://go-review.googlesource.com/33658
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 6f287fa2bb5b0b74506ecc586d036dcd11a761e2
Author: Austin Clements <austin@google.com>
Date:   Mon Nov 28 18:03:16 2016 -0500

    runtime: fall back to /proc/self/auxv in Android libs
    
    Android's libc doesn't provide access to auxv, so currently the Go
    runtime synthesizes a fake, minimal auxv when loaded as a library on
    Android. This used to be sufficient, but now we depend on auxv to
    retrieve the system physical page size and panic if we can't retrieve
    it.
    
    Fix this by falling back to reading auxv from /proc/self/auxv if the
    loader-provided auxv is empty and removing the synthetic auxv vectors.
    
    Fixes #18041.
    
    Change-Id: Ia2ec2c764a6609331494a5d359032c56cbb83482
    Reviewed-on: https://go-review.googlesource.com/33652
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit d39b7b5347a3e6cc9173224393e4cfaf874a272a
Author: Austin Clements <austin@google.com>
Date:   Mon Nov 28 14:54:38 2016 -0500

    runtime: extract Linux auxv handling
    
    This refactoring is in preparation for handling auxv differently in
    Android shared libraries.
    
    Updates #18041.
    
    Change-Id: If0458a309f9c804e7abd0a58b5a224d89f8da257
    Reviewed-on: https://go-review.googlesource.com/33651
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 5d1c60118deb4f7839f56f87ec101401f370192c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 29 05:57:18 2016 +0000

    doc: more go1.8.html updates
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I648df63aeb67aa2229c7b4fc23676a78b31140a0
    Reviewed-on: https://go-review.googlesource.com/33657
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0c5c7c3446a0917d830579b2f3f7582b759695a3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 29 05:19:47 2016 +0000

    doc: update go1.8.html after feedback from Russ
    
    Address Russ's feedback from https://golang.org/cl/33244
    
    TBR=See https://golang.org/cl/33244
    
    Updates #17929
    
    Change-Id: I708d71f519f6414ecec629d3c273d9e737d8ed50
    Reviewed-on: https://go-review.googlesource.com/33656
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 45f759500ec80a1362deecd3693cbe44a354bf98
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Nov 28 16:19:03 2016 -0800

    cmd/link: handle STT_COMMON symbols
    
    Tested by running
    
    GOTRACEBACK=2 CGO_CFLAGS="-Wa,--elf-stt-common=yes" go test -ldflags=-linkmode=internal
    
    in misc/cgo/test. That failed before this CL, succeeded after.
    
    I don't think it's worth doing that as a regular test, though,
    especially since only recent versions of the GNU binutils support the
    --elf-stt-common option.
    
    Fixes #18088.
    
    Change-Id: I893d86181faee217b1504c054b0ed3f7c8d977d3
    Reviewed-on: https://go-review.googlesource.com/33653
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 610d522189ed3fcf0d298609a248a3283bde62cd
Author: Russ Cox <rsc@golang.org>
Date:   Tue Nov 22 13:31:16 2016 -0500

    os: fix handling of Windows Unicode console input and ^Z
    
    Go 1.5 worked with Unicode console input but not ^Z.
    Go 1.6 did not work with Unicode console input but did handle one ^Z case.
    Go 1.7 did not work with Unicode console input but did handle one ^Z case.
    
    The intent of this CL is for Go 1.8 to work with Unicode console input
    and also handle all ^Z cases.
    
    Here's a simple test program for reading from the console.
    It prints a "> " prompt, calls read, prints what it gets, and repeats.
    
            package main
    
            import (
                "fmt"
                "os"
            )
    
            func main() {
                p := make([]byte, 100)
                fmt.Printf("> ")
                for {
                    n, err := os.Stdin.Read(p)
                    fmt.Printf("[%d %q %v]\n> ", n, p[:n], err)
                }
            }
    
    On Unix, typing a ^D produces a break in the input stream.
    If the ^D is at the beginning of a line, then the 0 bytes returned
    appear as an io.EOF:
    
            $ go run /tmp/x.go
            > hello
            [6 "hello\n" <nil>]
            > hello^D[5 "hello" <nil>]
            > ^D[0 "" EOF]
            > ^D[0 "" EOF]
            > hello^Dworld
            [5 "hello" <nil>]
            > [6 "world\n" <nil>]
            >
    
    On Windows, the EOF character is ^Z, not ^D, and there has
    been a long-standing problem that in Go programs, ^Z on Windows
    does not behave in the expected way, namely like ^D on Unix.
    Instead, the ^Z come through as literal ^Z characters:
    
            C:\>c:\go1.5.4\bin\go run x.go
            > ^Z
            [3 "\x1a\r\n" <nil>]
            > hello^Zworld
            [13 "hello\x1aworld\r\n" <nil>]
            >
    
    CL 4310 attempted to fix this bug, then known as #6303,
    by changing the use of ReadConsole to ReadFile.
    This CL was released as part of Go 1.6 and did fix the case
    of a ^Z by itself, but not as part of a larger input:
    
            C:\>c:\go1.6.3\bin\go run x.go
            > ^Z
            [0 "" EOF]
            > hello^Zworld
            [13 "hello\x1aworld\r\n" <nil>]
            >
    
    So the fix was incomplete.
    Worse, the fix broke Unicode console input.
    
    ReadFile does not handle Unicode console input correctly.
    To handle Unicode correctly, programs must use ReadConsole.
    Early versions of Go used ReadFile to read the console,
    leading to incorrect Unicode handling, which was filed as #4760
    and fixed in CL 7312053, which switched to ReadConsole
    and was released as part of Go 1.1 and still worked as of Go 1.5:
    
            C:\>c:\go1.5.4\bin\go run x.go
            > hello
            [7 "hello\r\n" <nil>]
            > hello world™
            [16 "hello world™\r\n" <nil>]
            >
    
    But in Go 1.6:
    
            C:\>c:\go1.6.3\bin\go run x.go
            > hello
            [7 "hello\r\n" <nil>]
            > hello world™
            [0 "" EOF]
            >
    
    That is, changing back to ReadFile in Go 1.6 reintroduced #4760,
    which has been refiled as #17097. (We have no automated test
    for this because we don't know how to simulate console input
    in a test: it appears that one must actually type at a keyboard
    to use the real APIs. This CL at least adds a comment warning
    not to reintroduce ReadFile again.)
    
    CL 29493 attempted to fix #17097, but it was not a complete fix:
    the hello world™ example above still fails, as does Shift-JIS input,
    which was filed as #17939.
    
    CL 29493 also broke ^Z handling, which was filed as #17427.
    
    This CL attempts the never before successfully performed trick
    of simultaneously fixing Unicode console input and ^Z handling.
    It changes the console input to use ReadConsole again,
    as in Go 1.5, which seemed to work for all known Unicode input.
    Then it adds explicit handling of ^Z in the input stream.
    (In the case where standard input is a redirected file, ^Z processing
    should not happen, and it does not, because this code path is only
    invoked when standard input is the console.)
    
    With this CL:
    
            C:\>go run x.go
            > hello
            [7 "hello\r\n" <nil>]
            > hello world™
            [16 "hello world™\r\n" <nil>]
            > ^Z
            [0 "" EOF]
            > [2 "\r\n" <nil>]
            > hello^Zworld
            [5 "hello" <nil>]
            > [0 "" EOF]
            > [7 "world\r\n" <nil>]
    
    This almost matches Unix:
    
            $ go run /tmp/x.go
            > hello
            [6 "hello\n" <nil>]
            > hello world™
            [15 "hello world™\n" <nil>]
            > ^D
            [0 "" EOF]
            > [1 "\n" <nil>]
            > hello^Dworld
            [5 "hello" <nil>]
            > [6 "world\n" <nil>]
            >
    
    The difference is in the handling of hello^Dworld / hello^Zworld.
    On Unix, hello^Dworld terminates the read of hello but does not
    result in a zero-length read between reading hello and world.
    This is dictated by the tty driver, not any special Go code.
    
    On Windows, in this CL, hello^Zworld inserts a zero length read
    result between hello and world, which is treated as an interior EOF.
    This is implemented by the Go code in this CL, but it matches the
    handling of ^Z on the console in other programs:
    
            C:\>copy con x.txt
            hello^Zworld
                    1 file(s) copied.
    
            C:\>type x.txt
            hello
            C:\>
    
    A natural question is how to test all this. As noted above, we don't
    know how to write automated tests using the actual Windows console.
    CL 29493 introduced the idea of substituting a different syscall.ReadFile
    implementation for testing; this CL continues that idea but substituting
    for syscall.ReadConsole instead. To avoid the regression of putting
    ReadFile back, this CL adds a comment warning against that.
    
    Fixes #17427.
    Fixes #17939.
    
    Change-Id: Ibaabd0ceb2d7af501d44ac66d53f64aba3944142
    Reviewed-on: https://go-review.googlesource.com/33451
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8a2c34e413bfbcb0ec9b01fd1dac3bc59d921256
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Nov 28 17:23:12 2016 -0500

    os: Executable can use /proc/self/exe on android
    
    Fixes the os test on the Android builder.
    
    Change-Id: Ibb9db712156a620fcccf515e035475c5e2f535a5
    Reviewed-on: https://go-review.googlesource.com/33650
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d0d8466aca634e30be22d4f1d809ab4c73b4a81e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 28 21:00:29 2016 +0000

    net/http, net/http/httptest: cross-reference the two NewRequest funcs
    
    Updates #18082
    
    Change-Id: I2e65b115b809c1e1bf813f538989d1a1f96b2876
    Reviewed-on: https://go-review.googlesource.com/33636
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f7c351bdf6c8a70c90aac132194a9df390d002e0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Nov 28 12:18:29 2016 -0800

    internal/pprof: don't discard allocations called by reflect.Call
    
    The pprof code discards all heap allocations made by runtime
    routines. This caused it to discard heap allocations made by functions
    called by reflect.Call, as the calls are made via the functions
    `runtime.call32`, `runtime.call64`, etc. Fix the profiler to retain
    these heap allocations.
    
    Fixes #18077.
    
    Change-Id: I8962d552f1d0b70fc7e6f7b2dbae8d5bdefb0735
    Reviewed-on: https://go-review.googlesource.com/33635
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 993214a083d47afba7ba0ecf85ce5f35b1685358
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Nov 26 10:18:39 2016 -0800

    net/http: document restrictions on ETag as expected by ServeContent
    
    Fixes #18054
    
    Change-Id: I6773943a95b92eebd7e347f8f7a80843b4827243
    Reviewed-on: https://go-review.googlesource.com/33630
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e2d5e54e504117e3f141b6c2ab52389aa04fdb79
Author: Kaviraj <kavirajkanagaraj@gmail.com>
Date:   Wed Nov 23 19:03:46 2016 +0530

    net: document that Header.Get key is case insensitive
    
    Document that key in Header.Get(key) is case insensitive in
    http.Header, mail.Header, textproto.Header.
    
    Fixes #18019
    
    Change-Id: Iba7932491e02e555190b6fce053088b580a853ef
    Reviewed-on: https://go-review.googlesource.com/33530
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit beec631c4c6a26fc7011d9f3be2b9aaa52b39ad2
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Nov 28 11:41:48 2016 -0500

    cmd/asm: fix parsing of the s390x instructions VSTE{G,F,H,B}
    
    The element index needs to be placed in From3. Before this CL it
    was impossible to write a VSTE instruction that could be
    successfully parsed, so this won't affect existing assembly code.
    
    Fixes #18075.
    
    Change-Id: I5b71be4c6632b1d5a30820a529122f96fd1bc864
    Reviewed-on: https://go-review.googlesource.com/33584
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 25a81e77c22af89cb40f374e77167f0efb3fd95e
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sun Nov 27 09:36:54 2016 +0900

    net: add missing comma on BUGS section for consistency
    
    Change-Id: Ic96fb52f37257e06e77cc08da5c73ea6f9ff158c
    Reviewed-on: https://go-review.googlesource.com/33592
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7e455163dedfe0ba73f13adbd1d9f0728a383bc9
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Nov 22 14:07:03 2016 -0800

    net: update documentation on Conn and PacketConn
    
    Fixes #17982
    
    Change-Id: I4884a6b57905420ac0e37210c411de98c582de1d
    Reviewed-on: https://go-review.googlesource.com/33473
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 111064925b34bfd60949c09f0d0b06c8f34430f2
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Wed Nov 16 12:26:23 2016 +0000

    testing: comment out flag.Parse from example
    
    The TestMain docs explain that flag.Parse() should be called if TestMain
    itself depends on command-line flags.
    
    The issue here is that the example implementation does not use any
    flags, and thus the flag.Parse call is unnecessary. This leads to people
    who use this example as a starting point for their own implementations
    to forget that the call is not necessary in most cases.
    
    Comment it out instead of removing the line to keep it as a reminder, as
    suggested by Minux Ma.
    
    Change-Id: I6ffc5413e7036366ae3cf0f069b7065e832a3b45
    Reviewed-on: https://go-review.googlesource.com/33273
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f7b2f58cda83634ccbe043b011f4899f859756cb
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 24 02:21:20 2016 +0000

    database/sql: force users of NamedParam to name struct literals fields
    
    Or they can use sql.Param instead.
    
    Change-Id: Icf21dbcc87170635c3f5d3f49736429a37abe9da
    Reviewed-on: https://go-review.googlesource.com/33576
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>
    Reviewed-by: Minux Ma <minux@golang.org>

commit a2bd5c5563261309cb14a7f233d9fc89a2873c8a
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Nov 23 15:51:45 2016 -0800

    doc: add database/sql and os changes to go1.8 release notes
    
    Change-Id: Ib936539946f43556a7dd501f8127054f6a27861f
    Reviewed-on: https://go-review.googlesource.com/33553
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 34aad1686ecf8b209c4a36f926026876558a8221
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Wed Nov 23 16:29:51 2016 -0700

    net/http: fix receiver for Server.Shutdown and Server.Close
    
    Change-Id: Ia27ca728bafcf20d001b477787b21d16ae12960d
    Reviewed-on: https://go-review.googlesource.com/33552
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 06fcc32d1460dce6436e675a978eb269d4a5db26
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Nov 23 14:54:12 2016 -0500

    runtime/cgo: save correct floating point registers on s390x
    
    When transitioning from C code to Go code we must respect the C
    calling convention. On s390x this means that r6-r13, r15 and f8-f15
    must be saved and restored by functions that use them.
    
    On s390x we were saving the wrong set of floating point registers
    (f0, f2, f4 and f6) rather than f8-f15 which means that Go code
    could clobber registers that C code expects to be restored. This
    CL modifies the crosscall functions on s390x to save/restore the
    correct floating point registers.
    
    Fixes #18035.
    
    Change-Id: I5cc6f552c893a4e677669c8891521bf735492e97
    Reviewed-on: https://go-review.googlesource.com/33571
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c2bb52b8304a814b8e2b447953c3341ac31bbee8
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 23 16:41:15 2016 +0000

    test: remove amd64 build tag from test
    
    It was supposed to be testing SSA, not amd64.
    
    For #18024
    
    Change-Id: Ibe65d7eb6bed9bc4b3eda68e1eaec5fa39fe8f76
    Reviewed-on: https://go-review.googlesource.com/33491
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 3f69822a9a68c76a8562a43f226951c33ed5694a
Author: Russ Cox <rsc@golang.org>
Date:   Tue Nov 22 22:46:39 2016 -0500

    math/rand: export Source64, mainly for documentation value
    
    There is some code value too: types intending to implement
    Source64 can write a conversion confirming that.
    
    For #4254 and the Go 1.8 release notes.
    
    Change-Id: I7fc350a84f3a963e4dab317ad228fa340dda5c66
    Reviewed-on: https://go-review.googlesource.com/33456
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f0a306d283c21b98089706878190c34bd591b9a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 23 03:46:58 2016 +0000

    doc: add net/http section to go1.8.html
    
    TBR=See https://golang.org/cl/33244 and review there.
    
    Updates #17929
    
    Change-Id: I752ec7a6d086f370feaf3cf282708620e891079b
    Reviewed-on: https://go-review.googlesource.com/33478
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 75c1381176e98357b01a67af7e9dbaf68de7fdff
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 23 01:43:33 2016 +0000

    cmd/gofmt: don't call Chmod on windows
    
    Fixes #18026
    
    Change-Id: Id510f427ceffb2441c3d6f5bb5c93244e46c6497
    Reviewed-on: https://go-review.googlesource.com/33477
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 8ace3461a46d09466f0e1a8ea3ff41ac9cbd46f4
Author: Elias Naur <elias.naur@gmail.com>
Date:   Wed Nov 23 00:50:46 2016 +0100

    doc: add SIGPIPE behaviour change to go1.8.txt
    
    CL 32796 changes the SIGPIPE behaviour for c-archive and c-shared
    programs. Add it to go1.8.txt.
    
    Change-Id: I31200187033349c642965a4bb077bcc77d5329a3
    Reviewed-on: https://go-review.googlesource.com/33397
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b1dbc9f8c0257aca065126d8dfc3ebfe0be2aada
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 22 15:50:03 2016 -0800

    reflect: fix typo in comment
    
    Sigh, forgot to run `git mail`.
    
    Change-Id: Idc49be2bb20d6f0e392cb472a63267ffee2ca22c
    Reviewed-on: https://go-review.googlesource.com/33476
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 50c4dbced991a01d4d707c00dc40c1a6366e9458
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 22 15:50:03 2016 -0800

    reflect: fix size of StructOf ending in zero-sized field
    
    Update #9401.
    Fixes #18016.
    
    Change-Id: Icc24dd10dab1ad8e5cf295e0727d437afa5025c0
    Reviewed-on: https://go-review.googlesource.com/33475
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e12f6ee0ab1e7b4da818054d7ced4247c81fd164
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Mon Oct 31 07:58:41 2016 -0700

    database/sql: fix TestPendingConnsAfterErr
    
    TestPendingConnsAfterErr showed a failure on slower systems.
    Wait and check for the database to close all connections
    before pronouncing failure.
    
    A more careful method was attempted but the connection pool
    behavior is too dependent on the scheduler behavior to be
    predictable.
    
    Fixes #15684
    
    Change-Id: Iafdbc90ba51170c76a079db04c3d5452047433a4
    Reviewed-on: https://go-review.googlesource.com/33418
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 199d410df5f52926add3cb6e1ad972a1135b40b1
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Nov 22 11:30:16 2016 -0800

    doc: fix typos in go1.8.html
    
    Change-Id: I51180e1c685e488f7ea4c51a63fd035148671b05
    Reviewed-on: https://go-review.googlesource.com/33470
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f756204f5bcbb6f62e187113eb44abd4e3ed4d7f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 22 11:57:49 2016 -0800

    doc: more go1.8.html content
    
    TBR=See https://golang.org/cl/33244 and review there.
    
    Updates #17929
    
    Change-Id: I7cb0b666469dba35426d1f0ae1b185e0bdfeac05
    Reviewed-on: https://go-review.googlesource.com/33474
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 46323795130e92f26cbbb6bc744298edc8c443e9
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Nov 22 16:19:25 2016 +0100

    cmd/go: print CC environment variables on Plan 9
    
    This changes makes the output of `go env` the same
    as on other operating systems.
    
    Fixes #18013.
    
    Change-Id: I3079e14dcf7b30c75ec3fde6c78cb95721111320
    Reviewed-on: https://go-review.googlesource.com/33396
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5508561180950534fd623fb61a8a8f357ad50e4c
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Nov 22 15:39:51 2016 -0500

    runtime/pprof/internal/protopprof: fix test on s390x
    
    Applies the fix from CL 32920 to the new test TestSampledHeapAllocProfile
    introduced in CL 33422. The test should be skipped rather than fail if
    there is only one executable region of memory.
    
    Updates #17852.
    
    Change-Id: Id8c47b1f17ead14f02a58a024c9a04ebb8ec0429
    Reviewed-on: https://go-review.googlesource.com/33453
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f9feaffdf51967bc5cf3c9363db9ddee98c9b3a0
Author: Russ Cox <rsc@golang.org>
Date:   Sat Nov 12 23:01:37 2016 -0500

    runtime: do not print runtime panic frame at top of user stack
    
    The expected default behavior (no explicit GOTRACEBACK setting)
    is for the stack trace to start in user code, eliding unnecessary runtime
    frames that led up to the actual trace printing code. The idea was that
    the first line number printed was the one that crashed.
    
    For #5832 we added code to show 'panic' frames so that if code panics
    and then starts running defers and then we trace from there, the panic
    frame can help explain why the code seems to have made a call not
    present in the code. But that's only needed for panics between two different
    call frames, not the panic at the very top of the stack trace.
    Fix the fix to again elide the runtime code at the very top of the stack trace.
    
    Simple panic:
    
            package main
    
            func main() {
                    var x []int
                    println(x[1])
            }
    
    Before this CL:
    
            panic: runtime error: index out of range
    
            goroutine 1 [running]:
            panic(0x1056980, 0x1091bf0)
                    /Users/rsc/go/src/runtime/panic.go:531 +0x1cf
            main.main()
                    /tmp/x.go:5 +0x5
    
    After this CL:
    
            panic: runtime error: index out of range
    
            goroutine 1 [running]:
            main.main()
                    /tmp/x.go:5 +0x5
    
    Panic inside defer triggered by panic:
    
            package main
    
            func main() {
                    var x []int
                    defer func() {
                            println(x[1])
                    }()
                    println(x[2])
            }
    
    Before this CL:
    
            panic: runtime error: index out of range
                    panic: runtime error: index out of range
    
            goroutine 1 [running]:
            panic(0x1056aa0, 0x1091bf0)
                    /Users/rsc/go/src/runtime/panic.go:531 +0x1cf
            main.main.func1(0x0, 0x0, 0x0)
                    /tmp/y.go:6 +0x62
            panic(0x1056aa0, 0x1091bf0)
                    /Users/rsc/go/src/runtime/panic.go:489 +0x2cf
            main.main()
                    /tmp/y.go:8 +0x59
    
    The middle panic is important: it explains why main.main ended up calling main.main.func1 on a line that looks like a call to println. The top panic is noise.
    
    After this CL:
    
            panic: runtime error: index out of range
                    panic: runtime error: index out of range
    
            goroutine 1 [running]:
            main.main.func1(0x0, 0x0, 0x0)
                    /tmp/y.go:6 +0x62
            panic(0x1056ac0, 0x1091bf0)
                    /Users/rsc/go/src/runtime/panic.go:489 +0x2cf
            main.main()
                    /tmp/y.go:8 +0x59
    
    Fixes #17901.
    
    Change-Id: Id6d7c76373f7a658a537a39ca32b7dc23e1e76aa
    Reviewed-on: https://go-review.googlesource.com/33165
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ac1dbe6392f2d392f9554127f96597a9aaa721fd
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 22 08:24:13 2016 -0700

    doc: more go1.8.html content
    
    TBR=See https://golang.org/cl/33244 and review there.
    
    Updates #17929
    
    Change-Id: I37b49318a9203b16c0c788926039288b99a36ce5
    Reviewed-on: https://go-review.googlesource.com/33450
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 86ab09eed55e4b70e642ad97d243d3090550b624
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Nov 21 12:10:07 2016 -0500

    runtime/pprof: generate heap profiles in compressed proto format
    
    When debug is 0, emit the compressed proto format.
    The debug>0 format stays the same.
    
    Updates #16093
    
    Change-Id: I45aa1874a22d34cf44dd4aa78bbff9302381cb34
    Reviewed-on: https://go-review.googlesource.com/33422
    Run-TryBot: Michael Matloob <matloob@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f88a33aeac427b57a9acb4ecf6e26d7191ab60cc
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 22 07:24:07 2016 -0500

    doc: go1.8.html updates from Joe Tsai
    
    Updates #17929
    
    Change-Id: Ibc711d39d9ff83458d213778117493796b678aa7
    Reviewed-on: https://go-review.googlesource.com/33437
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e47b7af6409e37bd395ff92dee9c98720d22fc26
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 15 08:13:46 2016 -0800

    doc: start of go1.8.html release notes
    
    Updates #17929
    
    Change-Id: Ie90736cfce3fc5f23cbe0a0f1971476705aac5f9
    Reviewed-on: https://go-review.googlesource.com/33436
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 323b5c9d37e3633c96a96303da71b5d45cc9bac6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 22 01:40:07 2016 +0000

    time: make Parse validate day's lower bound in addition to upper bound
    
    Day 0 is as invalid as day 32.
    
    Fixes #17874
    
    Change-Id: I52109d12bafd6d957d00c44d540cb88389fff0a7
    Reviewed-on: https://go-review.googlesource.com/33429
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 409a667f35f66b2b5fa219ee93f1a3ddc6e07b03
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 22 02:07:52 2016 +0000

    net/http: fix parallel tests using global DefaultTransport
    
    When I added t.Parallel to some tests earlier, I overlooked some using
    the global "Get" func, which uses DefaultTransport.
    
    The DefaultTransport can have its CloseIdleConnections called by other
    parallel tests. Use a private Transport instead.
    
    Fixes #18006
    
    Change-Id: Ia4faca5bac235cfa95dcf2703c25f3627112a5e9
    Reviewed-on: https://go-review.googlesource.com/33432
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 75055de84ab7ad0f36b4c93e5c851ea55b297c95
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 15 21:15:40 2016 -0800

    runtime: sleep a bit to let a bad signal be delivered
    
    When we raise a signal that was delivered to C code, it's possible that
    the kernel will not deliver it immediately. This is especially possible
    on Darwin where we use send the signal to the entire process rather than
    just the current thread. Sleep for a millisecond after sending the
    signal to give it a chance to be delivered before we restore the Go
    signal handler. In most real cases the program is going to crash at this
    point, so sleeping is kind of irrelevant anyhow.
    
    Fixes #14809.
    
    Change-Id: Ib2c0d2c4e240977fb4535dc1dd2bdc50d430eb85
    Reviewed-on: https://go-review.googlesource.com/33300
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit e9ffda45c8b7d409a5b951d6a74b8241c026fad5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 15 14:48:54 2016 -0800

    cmd/go: don't clobber `go env GOGCCFLAGS`
    
    When CC is set in the environment, the mkEnv function sets its version
    of CC to the first word $CC and sets GOGCCFLAGS to the remainder. That
    worked since Go 1 but was broken accidentally by
    https://golang.org/cl/6409, which changed the code such that `go env`
    calls mkEnv twice. The second call to mkEnv would clobber GOGCCFLAGS
    based on the value of CC set by the first call. Go back to the old
    handling by only calling mkEnv once.
    
    Fixes #15457.
    
    Change-Id: I000a1ebcc48684667e48f2b9b24605867b9e06cd
    Reviewed-on: https://go-review.googlesource.com/33293
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 6f31abd23a6f768c21c8b308f355f3a1bae521d2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Nov 21 16:58:55 2016 -0500

    cmd/compile, cmd/link: weak relocation for ptrTo
    
    Introduce R_WEAKADDROFF, a "weak" variation of the R_ADDROFF relocation
    that will only reference the type described if it is in some other way
    reachable.
    
    Use this for the ptrToThis field in reflect type information where it
    is safe to do so (that is, types that don't need to be included for
    interface satisfaction, and types that won't cause the compiler to
    recursively generate an endless series of ptr-to-ptr-to-ptr-to...
    types).
    
    Also fix a small bug in reflect, where StructOf was not clearing the
    ptrToThis field of new types.
    
    Fixes #17931
    
    Change-Id: I4d3b53cb9c916c97b3b16e367794eee142247281
    Reviewed-on: https://go-review.googlesource.com/33427
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit aeaa4c3c1da9e7a4afd4152913d6f2bfcf4fad2d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 22 01:43:38 2016 +0000

    net/http: skip TestLinuxSendfile on mips64 for now
    
    See issues for details. We can expand this test during the Go 1.9
    cycle.
    
    Updates #18008
    
    Change-Id: I78b6b7e8dede414769be97898e29f969bc2a9651
    Reviewed-on: https://go-review.googlesource.com/33430
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 37d078ede386b5d0dff0bb1f3ea77e47122730d0
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 10 16:52:57 2016 -0400

    math/big: add Baillie-PSW test to (*Int).ProbablyPrime
    
    After x.ProbablyPrime(n) passes the n Miller-Rabin rounds,
    add a Baillie-PSW test before declaring x probably prime.
    
    Although the provable error bounds are unchanged, the empirical
    error bounds drop dramatically: there are no known inputs
    for which Baillie-PSW gives the wrong answer. For example,
    before this CL, big.NewInt(443*1327).ProbablyPrime(1) == true.
    Now it is (correctly) false.
    
    The new Baillie-PSW test is two pieces: an added Miller-Rabin
    round with base 2, and a so-called extra strong Lucas test.
    (See the references listed in prime.go for more details.)
    The Lucas test takes about 3.5x as long as the Miller-Rabin round,
    which is close to theoretical expectations.
    
    name                              time/op
    ProbablyPrime/Lucas             2.91ms ± 2%
    ProbablyPrime/MillerRabinBase2   850µs ± 1%
    ProbablyPrime/n=0               3.75ms ± 3%
    
    The speed of prime testing for a prime input does get slower:
    
    name                  old time/op  new time/op   delta
    ProbablyPrime/n=1    849µs ± 1%   4521µs ± 1%  +432.31%   (p=0.000 n=10+9)
    ProbablyPrime/n=5   4.31ms ± 3%   7.87ms ± 1%   +82.70%  (p=0.000 n=10+10)
    ProbablyPrime/n=10  8.52ms ± 3%  12.28ms ± 1%   +44.11%  (p=0.000 n=10+10)
    ProbablyPrime/n=20  16.9ms ± 2%   21.4ms ± 2%   +26.35%   (p=0.000 n=9+10)
    
    However, because the Baillie-PSW test is only added when the old
    ProbablyPrime(n) would return true, testing composites runs at
    the same speed as before, except in the case where the result
    would have been incorrect and is now correct.
    
    In particular, the most important use of this code is for
    generating random primes in crypto/rand. That use spends
    essentially all its time testing composites, so it is not
    slowed down by the new Baillie-PSW check:
    
    name                  old time/op  new time/op   delta
    Prime                104ms ±22%    111ms ±16%      ~     (p=0.165 n=10+10)
    
    Thanks to Serhat Şevki Dinçer for CL 20170, which this CL builds on.
    
    Fixes #13229.
    
    Change-Id: Id26dde9b012c7637c85f2e96355d029b6382812a
    Reviewed-on: https://go-review.googlesource.com/30770
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 526b2f85ce8e4b1b16f3122e0a5700c04b6de199
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Nov 21 18:23:12 2016 -0500

    runtime/internal/atomic: crash on unaligned 64-bit ops on 32-bit MIPS
    
    This check was originally implemented by Vladimir in
    https://go-review.googlesource.com/c/31489/1/src/runtime/internal/atomic/atomic_mipsx.go#30
    but removed due to my comment (Sorry!). This CL adds it back.
    
    Fixes #17786.
    
    Change-Id: I7ff4c2539fc9e2afd8199964b587a8ccf093b896
    Reviewed-on: https://go-review.googlesource.com/33431
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 67ce6af4567e6edb8b246494f7faa511485666ac
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 21 22:30:14 2016 +0000

    cmd/dist: skip plugin tests on noopt builder for now
    
    Updates #17937
    
    Change-Id: Ic822da1786a983b3b7bca21b68c3d5fc4bdfaee2
    Reviewed-on: https://go-review.googlesource.com/33428
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 21a3c53c541ee6366db371e333cdb5376f507c65
Author: Russ Cox <rsc@golang.org>
Date:   Fri Nov 11 15:45:09 2016 -0500

    build: fix cross-compile on Plan 9
    
    In Plan 9's shell,
    
            GOBIN= \
                    foo bar
    
    is the same as
    
            GOBIN=foo bar
    
    Write what was meant, which is
    
            GOBIN=() \
                    foo bar
    
    Fixes #17737.
    
    Change-Id: Ie5a1b51a7cec950b5e78bbbe99cbc3cfe102f980
    Reviewed-on: https://go-review.googlesource.com/33144
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Reviewed-by: David du Colombier <0intro@gmail.com>

commit 9073af247d602dff4633710adf90c8b3c1869c45
Author: Russ Cox <rsc@golang.org>
Date:   Fri Nov 11 11:06:32 2016 -0500

    encoding/json: document what happens to MarshalText's result
    
    Fixes #17743.
    
    Change-Id: Ib5afb6248bb060f2ad8dd3d5f78e95271af62a57
    Reviewed-on: https://go-review.googlesource.com/33135
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Reviewed-by: Caleb Spare <cespare@gmail.com>

commit 6e7e8b0f0d8644b3e1981229d597cf8ac2d898c7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 21 21:29:32 2016 +0000

    cmd/go: skip slow tests on mips when run under builders
    
    Change-Id: If754de6c44cf0ec4192101432e4065cc7a28e862
    Reviewed-on: https://go-review.googlesource.com/33425
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit ff191dd7268937902e9181495765a61497fcf5ca
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 21 21:51:01 2016 +0000

    net/http: maybe fix TestLinuxSendfile on mips64
    
    Updates #18008
    
    Change-Id: I8fde0d71d15b416db4d262f6db8ef32a209a192f
    Reviewed-on: https://go-review.googlesource.com/33426
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8d226da29d95d31b6016a669b6da8f1dd52027c2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 15 16:15:05 2016 -0800

    cmd/go: don't check standard packages when using gccgo
    
    The gccgo compiler does not have the standard packages available, so it
    can not check for violations of internal references.
    
    Also, the gccgo compiler can not read runtime/internal/sys/zversion.go;
    in fact, the file does not even exist for gccgo.
    
    Change-Id: Ibadf16b371621ad1b87b6e858c5eb233913e179d
    Reviewed-on: https://go-review.googlesource.com/33295
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1368de3db23ed51992a57cc828c5f14558b4b49f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 21 19:09:42 2016 +0000

    archive/zip: skip large concurrent tests in race mode
    
    We recently added these large zip64 tests. They're slow-ish already,
    but fast enough in non-race mode with t.Parallel. But in race mode,
    the concurrency makes them much slower than the normal
    non-race-to-race multiplier.
    
    They're taking so long now that it's causing test failures when it
    sometimes is over the test timeout threshold.
    
    Change-Id: I02f4ceaa9d6cab826708eb3860f47a57b05bdfee
    Reviewed-on: https://go-review.googlesource.com/33423
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 35231ec7c6a6d9277bf6ac53cb0142e4d37c2ece
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 21 14:58:23 2016 +0000

    net/http: deflake TestClientTimeout
    
    Should fix flakes like:
    
    https://build.golang.org/log/c8da331317064227f38d5ef57ed7dba563ba1b38
    
    --- FAIL: TestClientTimeout_h1 (0.35s)
        client_test.go:1263: timeout after 200ms waiting for timeout of 100ms
    FAIL
    
    Change-Id: I0a4dba607524e8d7a00f498e27d9598acde5d222
    Reviewed-on: https://go-review.googlesource.com/33420
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 01b4ddb37724b0cd0a1f0a62956f9e0e706bb10c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Nov 14 10:17:23 2016 -0500

    runtime/internal/atomic: crash on unaligned 64-bit ops on 386 and ARM
    
    Updates #17786. Will fix mips(32) when the port is fully landed.
    
    Change-Id: I00d4ff666ec14a38cadbcd52569b347bb5bc8b75
    Reviewed-on: https://go-review.googlesource.com/33236
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bbe96f5673fbb379ec3da581dba0d9cd603cc0d1
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Nov 14 18:24:37 2016 -0500

    runtime: make work.bytesMarked 8-byte aligned
    
    Make atomic access on 32-bit architectures happy.
    
    Updates #17786.
    
    Change-Id: I42de63ff1381af42124dc51befc887160f71797d
    Reviewed-on: https://go-review.googlesource.com/33235
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Austin Clements <austin@google.com>

commit ccd69d058278ef97dfd9b122d3832ec027455e90
Author: Michael Matloob <matloob@golang.org>
Date:   Fri Nov 11 15:01:58 2016 -0500

    runtime/pprof: emit count profiles with debug=0 as proto profiles
    
    count profiles with debug=1 retain their previous format.
    Also add a test check for the proto profiles since all runtime/pprof
    tests only look at the debug=1 profiles.
    
    Change-Id: Ibe805585b597e5d3570807115940a1dc4535c03f
    Reviewed-on: https://go-review.googlesource.com/33148
    Run-TryBot: Michael Matloob <matloob@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 0bae74e8c9b5fab3baf61bde0169f4aa5e287bdc
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 30 20:43:53 2016 -0400

    runtime: wake idle Ps when enqueuing GC work
    
    If the scheduler has no user work and there's no GC work visible, it
    puts the P to sleep (or blocks on the network). However, if we later
    enqueue more GC work, there's currently nothing that specifically
    wakes up the scheduler to let it start an idle GC worker. As a result,
    we can underutilize the CPU during GC if Ps have been put to sleep.
    
    Fix this by making GC wake idle Ps when work buffers are put on the
    full list. We already have a hook to do this, since we use this to
    preempt a random P if we need more dedicated workers. We expand this
    hook to instead wake an idle P if there is one. The logic we use for
    this is identical to the logic used to wake an idle P when we ready a
    goroutine.
    
    To make this really sound, we also fix the scheduler to re-check the
    idle GC worker condition after releasing its P. This closes a race
    where 1) the scheduler checks for idle work and finds none, 2) new
    work is enqueued but there are no idle Ps so none are woken, and 3)
    the scheduler releases its P.
    
    There is one subtlety here. Currently we call enlistWorker directly
    from putfull, but the gcWork is in an inconsistent state in the places
    that call putfull. This isn't a problem right now because nothing that
    enlistWorker does touches the gcWork, but with the added call to
    wakep, it's possible to get a recursive call into the gcWork
    (specifically, while write barriers are disallowed, this can do an
    allocation, which can dispose a gcWork, which can put a workbuf). To
    handle this, we lift the enlistWorker calls up a layer and delay them
    until the gcWork is in a consistent state.
    
    Fixes #14179.
    
    Change-Id: Ia2467a52e54c9688c3c1752e1fc00f5b37bbfeeb
    Reviewed-on: https://go-review.googlesource.com/32434
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 49ea9207b6512c2400de11bc097d974bb527ba63
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 30 20:20:17 2016 -0400

    runtime: exit idle worker if there's higher-priority work
    
    Idle GC workers trigger whenever there's a GC running and the
    scheduler doesn't find any other work. However, they currently run for
    a full scheduler quantum (~10ms) once started.
    
    This is really bad for event-driven applications, where work may come
    in on the network hundreds of times during that window. In the
    go-gcbench rpc benchmark, this is bad enough to often cause effective
    STWs where all Ps are in the idle worker. When this happens, we don't
    even poll the network any more (except for the background 10ms poll in
    sysmon), so we don't even know there's more work to do.
    
    Fix this by making idle workers check with the scheduler roughly every
    100 µs to see if there's any higher-priority work the P should be
    doing. This check includes polling the network for incoming work.
    
    Fixes #16528.
    
    Change-Id: I6f62ebf6d36a92368da9891bafbbfd609b9bd003
    Reviewed-on: https://go-review.googlesource.com/32433
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 7dc97d9e328edc800e2ce41d5b211ef4e0ef41d0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Nov 18 18:14:11 2016 -0800

    misc/cgo/testcshared: add explicit ./ to shared library argument
    
    Use an explicit ./ to make sure we link against the libgo.so we just
    built, not some other libgo.so that the compiler or linker may decide to
    seek out.
    
    Fixes #17986.
    
    Change-Id: Id23f6c95aa2b52f4f42c1b6dac45482c22b4290d
    Reviewed-on: https://go-review.googlesource.com/33413
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f42929ce9fcf8b32656900764881cfb84fdbe46b
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 18 14:47:51 2016 -0800

    go/internal/gccgoimporter: handle conversions in exported const values
    
    Also: handle version "v2" of export data format.
    
    Fixes #17981.
    
    Change-Id: I8042ce18c4a27c70cc1ede675daca019b047bcf3
    Reviewed-on: https://go-review.googlesource.com/33412
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f39050c8ebf894ccedc0b99de96f7412be97af89
Author: Keith Randall <khr@golang.org>
Date:   Mon Jun 6 16:58:27 2016 -0700

    cmd/cover: handle multiple samples from the same location
    
    So we can merge cover profiles from multiple runs.
    
    Change-Id: I1bf921e2b02063a2a62b35d21a6823062d10e5d0
    Reviewed-on: https://go-review.googlesource.com/23831
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit b01f612a693b2b39064c0b5bd75a5d0280e4179e
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 18 10:49:29 2016 -0800

    spec: add subtitles to section on "for" statements
    
    This matches what we already do for switch statements and makes
    this large section more visibly organized. No other changes besides
    introducing the titles.
    
    Fixes #4486.
    
    Change-Id: I73f274e4fdd27c6cfeaed79090b4553e57a9c479
    Reviewed-on: https://go-review.googlesource.com/33410
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d0b3c169acda68040d051c27627c08da4e3377bd
Author: Austin Clements <austin@google.com>
Date:   Fri Nov 4 11:13:27 2016 -0400

    cmd/trace: fix goroutine view
    
    Currently, trace processing interleaves state/statistics updates and
    emitting trace viewer objects. As a result, if events are being
    filtered, either by time or by goroutines, we'll miss those
    state/statistics updates. At best, this leads to bad statistics;
    however, since we're now strictly checking G state transitions, it
    usually leads to a failure to process the trace if there is any
    filtering.
    
    Fix this by separating state updates from emitting trace object. State
    updates are done before filtering, so we always have correct state
    information and statistics. Trace objects are only emitted if we pass
    the filter. To determine when we need to emit trace counters, rather
    than duplicating the knowledge of which events might modify
    statistics, we keep track of the previously emitted counters and emit
    a trace counter object whenever these have changed.
    
    Fixes #17719.
    
    Change-Id: Ic66e3ddaef60d1acaaf2ff4c62baa5352799cf99
    Reviewed-on: https://go-review.googlesource.com/32810
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 0eb26fa8ba531b21d183fd3a4d3fb8abf57db7aa
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 18 09:27:18 2016 -0800

    spec: remove => (alias) operator from Operators and Delimiters section
    
    (Revert of https://go-review.googlesource.com/#/c/32310/)
    
    For #16339.
    Fixes #17975.
    
    Change-Id: I36062703c423a81ea1c5b00f4429a4faf00b3782
    Reviewed-on: https://go-review.googlesource.com/33365
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 120cf676caff29296de2dd16a2997463eb6e1579
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Nov 17 16:39:11 2016 -0800

    spec: clarify type elision rules for composite literals
    
    - organize examples better
    - add an example illustrating behavior if element type is a named pointer type
    - both compilers and go/types (per https://go-review.googlesource.com/33358)
      follow this now
    
    See the issue for detailed discussion.
    
    Fixes #17954.
    
    Change-Id: I8d90507ff2347d9493813f75b73233819880d2b4
    Reviewed-on: https://go-review.googlesource.com/33361
    Reviewed-by: Rob Pike <r@golang.org>

commit a34fddf46c47a86e7a7cab32be858f7e8d0feb70
Author: Philip Hofer <phofer@umich.edu>
Date:   Mon Nov 14 17:05:46 2016 -0800

    cmd/compile: in cse, allow for new ssa values
    
    The table of rewrites in ssa/cse is not sized appropriately for
    ssa IDs that are created during copying of selects into new blocks.
    
    Fixes #17918
    
    Change-Id: I65fe86c6aab5efa679aa473aadc4ee6ea882cd41
    Reviewed-on: https://go-review.googlesource.com/33240
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 277bcbbdcd26f2d64493e596238e34b47782f98e
Author: Özgür Kesim <oec-go@kesim.org>
Date:   Fri Oct 21 13:14:57 2016 +0200

    text/template: handle option missingkey=error consistently
    
    The existing implementation of text/template handles the option
    "missingkey=error" in an inconsitent manner:  If the provided data is
    a nil-interface, no error is returned (despite the fact that no key
    can be found in it).
    
    This patch makes text/template return an error if "missingkey=error"
    is set and the provided data is a not a valid reflect.Value.
    
    Fixes #15356
    
    Change-Id: Ia0a83da48652ecfaf31f18bdbd78cb21dbca1164
    Reviewed-on: https://go-review.googlesource.com/31638
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 348275cda626edf60e1d11a83b2e78d83088ccef
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Oct 28 23:11:04 2016 -0400

    cmd/compile: make a copy of Phi input if it is still live
    
    Register of Phi input is allocated to the Phi. So if the Phi
    input is still live after Phi, we may need to use a spill. In
    this case, copy the Phi input to a spare register to avoid a
    spill.
    
    Originally targeted the code in issue #16187, and this CL
    indeed removes the spill, but doesn't seem to help on benchmark
    result. It may help in general, though.
    
    On AMD64:
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.79s ± 1%     2.76s ± 0%  -1.33%  (p=0.000 n=10+10)
    Fannkuch11-12                3.02s ± 0%     3.14s ± 0%  +3.99%  (p=0.000 n=10+10)
    FmtFprintfEmpty-12          51.2ns ± 0%    51.4ns ± 3%    ~      (p=0.368 n=8+10)
    FmtFprintfString-12          145ns ± 0%     144ns ± 0%  -0.69%    (p=0.000 n=6+9)
    FmtFprintfInt-12             127ns ± 1%     124ns ± 1%  -2.79%   (p=0.000 n=10+9)
    FmtFprintfIntInt-12          186ns ± 0%     184ns ± 0%  -1.34%   (p=0.000 n=10+9)
    FmtFprintfPrefixedInt-12     196ns ± 0%     194ns ± 0%  -0.97%    (p=0.000 n=9+9)
    FmtFprintfFloat-12           293ns ± 2%     287ns ± 0%  -2.00%   (p=0.000 n=10+9)
    FmtManyArgs-12               847ns ± 1%     829ns ± 0%  -2.17%   (p=0.000 n=10+7)
    GobDecode-12                7.17ms ± 0%    7.18ms ± 0%    ~     (p=0.123 n=10+10)
    GobEncode-12                6.08ms ± 1%    6.08ms ± 0%    ~      (p=0.497 n=10+9)
    Gzip-12                      277ms ± 1%     275ms ± 1%  -0.47%   (p=0.028 n=10+9)
    Gunzip-12                   39.1ms ± 2%    38.2ms ± 1%  -2.20%   (p=0.000 n=10+9)
    HTTPClientServer-12         90.9µs ± 4%    87.7µs ± 2%  -3.51%   (p=0.001 n=9+10)
    JSONEncode-12               17.3ms ± 1%    16.5ms ± 0%  -5.02%    (p=0.000 n=9+9)
    JSONDecode-12               54.6ms ± 1%    54.1ms ± 0%  -0.99%    (p=0.000 n=9+9)
    Mandelbrot200-12            4.45ms ± 0%    4.45ms ± 0%  -0.02%    (p=0.006 n=8+9)
    GoParse-12                  3.44ms ± 0%    3.48ms ± 1%  +0.95%  (p=0.000 n=10+10)
    RegexpMatchEasy0_32-12      84.9ns ± 0%    85.0ns ± 0%    ~       (p=0.241 n=8+8)
    RegexpMatchEasy0_1K-12       867ns ± 3%     915ns ±11%  +5.55%  (p=0.037 n=10+10)
    RegexpMatchEasy1_32-12      82.7ns ± 5%    83.9ns ± 4%    ~      (p=0.161 n=9+10)
    RegexpMatchEasy1_1K-12       361ns ± 1%     363ns ± 0%    ~      (p=0.098 n=10+8)
    RegexpMatchMedium_32-12      126ns ± 0%     126ns ± 1%    ~      (p=0.549 n=8+10)
    RegexpMatchMedium_1K-12     38.8µs ± 0%    39.1µs ± 0%  +0.67%    (p=0.000 n=9+8)
    RegexpMatchHard_32-12       1.95µs ± 0%    1.96µs ± 0%  +0.43%    (p=0.000 n=9+9)
    RegexpMatchHard_1K-12       59.0µs ± 0%    59.1µs ± 0%  +0.27%   (p=0.000 n=10+9)
    Revcomp-12                   436ms ± 1%     431ms ± 1%  -1.19%  (p=0.005 n=10+10)
    Template-12                 56.7ms ± 1%    57.1ms ± 1%  +0.71%   (p=0.001 n=10+9)
    TimeParse-12                 312ns ± 0%     310ns ± 0%  -0.80%   (p=0.000 n=10+9)
    TimeFormat-12                336ns ± 0%     332ns ± 0%  -1.19%    (p=0.000 n=8+7)
    [Geo mean]                  59.2µs         58.9µs       -0.42%
    
    On PPC64:
    name                     old time/op    new time/op    delta
    BinaryTree17-2              4.67s ± 2%     4.71s ± 1%    ~     (p=0.421 n=5+5)
    Fannkuch11-2                3.92s ± 1%     3.94s ± 0%  +0.46%  (p=0.032 n=5+5)
    FmtFprintfEmpty-2           122ns ± 0%     120ns ± 2%  -1.80%  (p=0.016 n=4+5)
    FmtFprintfString-2          305ns ± 1%     299ns ± 1%  -1.84%  (p=0.008 n=5+5)
    FmtFprintfInt-2             243ns ± 0%     241ns ± 1%  -0.66%  (p=0.016 n=4+5)
    FmtFprintfIntInt-2          361ns ± 1%     356ns ± 1%  -1.49%  (p=0.016 n=5+5)
    FmtFprintfPrefixedInt-2     355ns ± 1%     357ns ± 1%    ~     (p=0.333 n=5+5)
    FmtFprintfFloat-2           502ns ± 2%     498ns ± 1%    ~     (p=0.151 n=5+5)
    FmtManyArgs-2              1.55µs ± 2%    1.59µs ± 1%  +2.52%  (p=0.008 n=5+5)
    GobDecode-2                13.0ms ± 1%    13.0ms ± 1%    ~     (p=0.841 n=5+5)
    GobEncode-2                11.8ms ± 1%    11.8ms ± 1%    ~     (p=0.690 n=5+5)
    Gzip-2                      499ms ± 1%     503ms ± 0%    ~     (p=0.421 n=5+5)
    Gunzip-2                   86.5ms ± 0%    86.4ms ± 1%    ~     (p=0.841 n=5+5)
    HTTPClientServer-2         68.2µs ± 2%    69.6µs ± 3%    ~     (p=0.151 n=5+5)
    JSONEncode-2               39.0ms ± 1%    37.2ms ± 1%  -4.65%  (p=0.008 n=5+5)
    JSONDecode-2                122ms ± 1%     126ms ± 1%  +2.63%  (p=0.008 n=5+5)
    Mandelbrot200-2            6.08ms ± 1%    5.89ms ± 1%  -3.06%  (p=0.008 n=5+5)
    GoParse-2                  5.95ms ± 2%    5.98ms ± 1%    ~     (p=0.421 n=5+5)
    RegexpMatchEasy0_32-2       331ns ± 1%     328ns ± 1%    ~     (p=0.056 n=5+5)
    RegexpMatchEasy0_1K-2      1.45µs ± 0%    1.47µs ± 0%  +1.13%  (p=0.008 n=5+5)
    RegexpMatchEasy1_32-2       359ns ± 0%     353ns ± 0%  -1.84%  (p=0.008 n=5+5)
    RegexpMatchEasy1_1K-2      1.79µs ± 0%    1.81µs ± 1%  +1.16%  (p=0.008 n=5+5)
    RegexpMatchMedium_32-2      420ns ± 2%     413ns ± 0%  -1.72%  (p=0.008 n=5+5)
    RegexpMatchMedium_1K-2     70.2µs ± 1%    69.5µs ± 1%  -1.09%  (p=0.032 n=5+5)
    RegexpMatchHard_32-2       3.87µs ± 1%    3.65µs ± 0%  -5.86%  (p=0.008 n=5+5)
    RegexpMatchHard_1K-2        111µs ± 0%     105µs ± 0%  -5.49%  (p=0.016 n=5+4)
    Revcomp-2                   1.00s ± 1%     1.01s ± 2%    ~     (p=0.151 n=5+5)
    Template-2                  113ms ± 1%     113ms ± 2%    ~     (p=0.841 n=5+5)
    TimeParse-2                 555ns ± 0%     550ns ± 1%  -0.87%  (p=0.032 n=5+5)
    TimeFormat-2                736ns ± 1%     704ns ± 1%  -4.35%  (p=0.008 n=5+5)
    [Geo mean]                  120µs          119µs       -0.77%
    
    Reduce "spilled value remains" by 0.6% in cmd/go on AMD64.
    
    Change-Id: If655df343b0f30d1a49ab1ab644f10c698b96f3e
    Reviewed-on: https://go-review.googlesource.com/32442
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit d24b57a6a1a3530e590b7c0a72dc78043e198630
Author: Elias Naur <elias.naur@gmail.com>
Date:   Sun Nov 6 21:40:57 2016 +0100

    runtime: handle SIGPIPE in c-archive and c-shared programs
    
    Before this CL, Go programs in c-archive or c-shared buildmodes
    would not handle SIGPIPE. That leads to surprising behaviour where
    writes on a closed pipe or socket would raise SIGPIPE and terminate
    the program. This CL changes the Go runtime to handle
    SIGPIPE regardless of buildmode. In addition, SIGPIPE from non-Go
    code is forwarded.
    
    Fixes #17393
    Updates #16760
    
    Change-Id: I155e82020a03a5cdc627a147c27da395662c3fe8
    Reviewed-on: https://go-review.googlesource.com/32796
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e54662dc859f65f90eefede76a6134f8d892cc77
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Nov 17 13:35:59 2016 -0800

    go/types: look at underlying type of element type of composite literals with elided types
    
    Match behavior of gc and gccgo.
    
    For #17954.
    
    Change-Id: I3f065e56d0a623bd7642c1438d0cab94d23fa2ae
    Reviewed-on: https://go-review.googlesource.com/33358
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit b21743c6d0484a6912d1a4ee20905c7b9b578ed8
Author: Adam Langley <agl@golang.org>
Date:   Thu Nov 17 12:15:19 2016 -0800

    crypto/tls: reject zero-length SCTs.
    
    The SignedCertificateTimestampList[1] specifies that both the list and
    each element must not be empty. Checking that the list is not empty was
    handled in [2] and this change checks that the SCTs themselves are not
    zero-length.
    
    [1] https://tools.ietf.org/html/rfc6962#section-3.3
    [2] https://golang.org/cl/33265
    
    Change-Id: Iabaae7a15f6d111eb079e5086e0bd2005fae9e48
    Reviewed-on: https://go-review.googlesource.com/33355
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c09945980a80a3b92362bd2e99a883051d2dd4d7
Author: woodsaj <awoods@raintank.io>
Date:   Thu Nov 17 20:14:32 2016 +0800

    crypto/tls: reject CT extension with no SCTs included
    
    When the CT extension is enabled but no SCTs are present, the existing
    code calls "continue" which causes resizing the data byte slice to be
    skipped. In fact, such extensions should be rejected.
    
    Fixes #17958
    
    Change-Id: Iad12da10d1ea72d04ae2e1012c28bb2636f06bcd
    Reviewed-on: https://go-review.googlesource.com/33265
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5cd6ab5b6d8232d5443f474c378f1307ce502613
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Thu Nov 17 20:06:27 2016 +0100

    runtime/pprof/internal/protopprof: fix TestTranslateCPUProfileWithSamples test for mips
    
    Change-Id: I01168a7530e18dd1098d467d0c8a330f727ba91f
    Reviewed-on: https://go-review.googlesource.com/33281
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 05dc6b26ca337b80f9424aa9b78f4b45f6e44c8d
Author: Austin Clements <austin@google.com>
Date:   Thu Nov 17 10:48:40 2016 -0500

    runtime: improve diagnostics for "scan missed a g"
    
    Currently there are no diagnostics for mark root check during marking.
    Fix this by printing out the same diagnostics we print during mark
    termination.
    
    Also, drop the allglock before throwing. Holding that across a throw
    causes a self-deadlock with tracebackothers.
    
    For #16083.
    
    Change-Id: Ib605f3ae0c17e70704b31d8378274cfaa2307dc2
    Reviewed-on: https://go-review.googlesource.com/33339
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 7061dc3f6e94dbc369db779ec6799c6f60d3466f
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Nov 16 09:55:24 2016 -0800

    cmd/cgo: ignore top-level qualifiers in function args/results
    
    The top-level qualifiers are unimportant for our purposes. If a C
    function is defined as `const int f(const int i)`, the `const`s are
    meaningless to C, and we want to avoid using them in the struct we
    create where the `const` has a completely different meaning.
    
    This unwinds https://golang.org/cl/33097 with regard to top-level
    qualifiers.
    
    Change-Id: I3d66b0eb43b6d9a586d9cdedfae5a2306b46d96c
    Reviewed-on: https://go-review.googlesource.com/33325
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit c1e9760d4ca102539b2d52a7c4021205c29070bf
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 15 11:33:10 2016 -0800

    archive/zip: avoid overflow in record count and byte offset fields
    
    This is Quentin's https://golang.org/cl/33012 with updated tests.
    
    Fixes #14186
    
    Change-Id: Ib51deaab0368c6bad32ce9d6345119ff44f3c2d6
    Reviewed-on: https://go-review.googlesource.com/33291
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 90b8a0ca2d0b565c7c7199ffcf77b15ea6b6db3a
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Thu Nov 17 09:33:31 2016 -0800

    database/sql: ensure all driver Stmt are closed once
    
    Previously  driver.Stmt could could be closed multiple times in
    edge cases that drivers may not test for initially. Make their
    job easier by ensuring the driver is only closed a single time.
    
    Fixes #16019
    
    Change-Id: I1e4777ef70697a849602e6ef9da73054a8feb4cd
    Reviewed-on: https://go-review.googlesource.com/33352
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e0942b76c735a69df18d24a23fa16da1e5db8c2e
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Nov 17 12:26:36 2016 -0500

    cmd/asm/internal/asm: fix copy/paste errors in comment
    
    Change-Id: I0249b60e340710bea7b6671c9b7405c278b037bd
    Reviewed-on: https://go-review.googlesource.com/33351
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit afb0ae67b7d37b6678179f236c98ef0d952c0403
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 17 16:28:45 2016 +0000

    runtime/pprof: fix typo in test
    
    Not sure what I was thinking.
    
    Change-Id: I143cdf7c5ef8e7b2394afeca6b30c46bb2c19a55
    Reviewed-on: https://go-review.googlesource.com/33340
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4ca3a8f7a807bba55e9db82b9aa8c43b1a186b8e
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Nov 17 13:52:00 2016 +0100

    misc/cgo: decrease test failure timeouts
    
    CL 33239 changed the polling loops from using sched_yield to a sleep
    for 1/1000 of a second. The loop counters were not updated, so failing
    tests now take 100 seconds to complete. Lower the loop counts to 5
    seconds instead.
    
    Change-Id: I7c9a343dacc8188603ecf7e58bd00b535cfc87f5
    Reviewed-on: https://go-review.googlesource.com/33280
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fd0f69c6802b92fed953659efe5f2e0e2e8aed14
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Nov 17 15:41:18 2016 +0900

    net: use testenv.SkipFlaky instead of testing.Skip
    
    Change-Id: Ic219fedbe6bbb846f31111fa21df6f2b8620e269
    Reviewed-on: https://go-review.googlesource.com/33263
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7534a72ea8b4ebb71cd8525029717fddd46c9dc6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 17 14:39:11 2016 +0000

    fmt: fix typo
    
    Fixes #17955
    
    Change-Id: Ia1a04796353c83358a38a6b63f2a0cd3c6926f09
    Reviewed-on: https://go-review.googlesource.com/33338
    Reviewed-by: Rob Pike <r@golang.org>

commit 03ca047dd334f6018f06f7fc9a7a4e2608b1f8d3
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Sat Nov 12 17:57:35 2016 +1100

    debug/pe: do not create symbol table if FileHeader.PointerToSymbolTable is 0
    
    https://github.com/tpn/pdfs/raw/master/Microsoft Portable Executable and Common Object File Format Specification - 1999 (pecoff).doc
    says this about PointerToSymbolTable:
    
    File offset of the COFF symbol table or 0 if none is present.
    
    Do as it says.
    
    Fixes #17809.
    
    Change-Id: Ib1ad83532f36a3e56c7e058dc9b2acfbf60c4e72
    Reviewed-on: https://go-review.googlesource.com/33170
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit dadfd14babccc30757ddb3f3eb8fbb7cd3bf4b5a
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu Nov 10 13:00:35 2016 +1100

    os: add more tests in TestReadStdin
    
    TestReadStdin always fill up buffer provided by ReadFile caller full.
    But we do not know if real ReadFile does the same. Add tests where
    buffer is only filled with limited data.
    
    Change-Id: I0fc776325c2b1fe60511126c439f4b0560e9d653
    Reviewed-on: https://go-review.googlesource.com/33030
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b8d56fdd9379bd5bb89454f3679f01acecd9df4d
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Nov 17 12:18:39 2016 +0900

    net: tweak comment on ExampleCIDRMask
    
    CIDRMask just returns a mask which corresponds to an address
    prefix in CIDR nonation. A subnet for an IPv6 mask sounds a bit
    confusing.
    
    Change-Id: Ic7859ce992bc2de4043d3b25caf9a1051d118b0e
    Reviewed-on: https://go-review.googlesource.com/33262
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b2d34fa51bd509f0aa780151a3d30c5ca77f1f4e
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Wed Nov 9 09:09:37 2016 -0600

    runtime: handle bad ftab index in symtab.go
    
    If a program has had its text section split into multiple
    sections then the ftab that is built is based on addresses
    prior to splitting.  That means all the function addresses
    are there and correct because of relocation but the
    but the computed idx won't always match up quite right and
    in some cases go beyond the end of the table, causing a panic.
    
    To resolve this, determine if the idx is too large and if it is,
    set it to the last index in ftab.  Then search backward to find the
    matching function address.
    
    Fixes #17854
    
    Change-Id: I6940e76a5238727b0a9ac23dc80000996db2579a
    Reviewed-on: https://go-review.googlesource.com/32972
    Reviewed-by: David Chase <drchase@google.com>

commit a1235f3179c4dbd6b16963d6b8f932586fa9bc1c
Author: Joonas Kuorilehto <joneskoo@derbian.fi>
Date:   Sun Sep 11 22:31:19 2016 +0300

    crypto/tls: add example for Config KeyLogWriter
    
    For #13057.
    
    Change-Id: Idbc50d5b08e055a23ab7cc9eb62dbc47b65b1815
    Reviewed-on: https://go-review.googlesource.com/29050
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 011cb6423187699e26553580d97518f40966d32b
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Nov 16 16:13:22 2016 -0800

    cmd/compile, reflect: use field pkgPath if needed
    
    It's possible for the pkgPath of a field to be different than that of
    the struct type as a whole. In that case, store the field's pkgPath in
    the name field. Use the field's pkgPath when setting PkgPath and when
    checking for type identity.
    
    Fixes #17952.
    
    Change-Id: Iebaf92f0054b11427c8f6e4158c3bebcfff06f45
    Reviewed-on: https://go-review.googlesource.com/33333
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit fbf92436b95d91151ce6717f40c46614ee68d487
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Nov 16 11:23:53 2016 -0800

    doc: add FAQ: why no conversion from []T1 to []T2?
    
    Fixes #16934.
    
    Change-Id: I725704e4c4aae7023fd89edc42af7ba0d242fec8
    Reviewed-on: https://go-review.googlesource.com/33327
    Reviewed-by: Rob Pike <r@golang.org>

commit 48858a2386f7eef41cb3459e85d53ac9b1e8f70f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 16 23:41:15 2016 +0000

    net/http: deflake TestInterruptWithPanic_nil_h2, again
    
    Updates #17243
    
    Change-Id: Iaa737874e75fdac73452f1fc13a5749e8df78ebe
    Reviewed-on: https://go-review.googlesource.com/33332
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 14e9f4825bffd4339dbde43198ed1710a1e149b5
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Wed Nov 16 22:39:25 2016 +0000

    cmd/cover: don't ignore os.Create error
    
    Failing to create the output file would give confusing errors such as:
    
            cover: invalid argument
    
    Also do out.Close() even if Execute() errored.
    
    Fixes #17951.
    
    Change-Id: I897e1d31f7996871c54fde7cb09614cafbf6c3fc
    Reviewed-on: https://go-review.googlesource.com/33278
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit d7c0de98a96893e5608358f7578c85be7ba12b25
Author: Scott Bell <scott@sctsm.com>
Date:   Wed May 18 09:56:51 2016 -0700

    database/sql: additional underlying types in DefaultValueConverter
    
    The previous documentation purported to convert underlying strings to
    []byte, which it did not do. This adds support for underlying bool,
    string, and []byte, which convert directly to their underlying type.
    
    Fixes #15174.
    
    Change-Id: I7fc4e2520577f097a48f39c9ff6c8160fdfb7be4
    Reviewed-on: https://go-review.googlesource.com/27812
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 0df762ed7b2ac9484a4f64450424529ecee8aa7f
Author: Kevin Burke <kev@inburke.com>
Date:   Thu Nov 3 15:34:05 2016 -0700

    net: add example for CIDRMask
    
    I had trouble translating the documentation language into a subnet
    - e.g. whether /31 was CIDRMask(1, 31) or CIDRMask(1, 32) or
    CIDRMask(31, 32) so I thought I'd add a short example showing how to
    create the right masks.
    
    Change-Id: Ia6a6de08c5c30b6d2249b3194cced2d3c383e317
    Reviewed-on: https://go-review.googlesource.com/32677
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fe057c1478c4309f715d689127125cabbb4efe08
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Nov 16 13:51:32 2016 -0800

    runtime/cgo: fixes for calling sigaction in C
    
    Zero out the sigaction structs, in case the sa_restorer field is set.
    
    Clear the SA_RESTORER flag; it is part of the kernel interface, not the
    libc interface.
    
    Fixes #17947.
    
    Change-Id: I610348ce3c196d3761cf2170f06c24ecc3507cf7
    Reviewed-on: https://go-review.googlesource.com/33331
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Bryan Mills <bcmills@google.com>

commit 8dc47e3b3a939a39e5cc3ea59f4848f50fd0cb7b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 16 20:35:02 2016 +0000

    net: disable TestAcceptTimeout for now
    
    It's too flaky and doing more harm than good.
    
    Disable it until it can be made reliable.
    
    Updates #17948
    Updates #17927
    
    Change-Id: Iaab7f09a4060da377fcd3ca2262527fef50c558d
    Reviewed-on: https://go-review.googlesource.com/33330
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 49b77a87974c310b1d6a8437f3490f81811b2058
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Nov 16 11:33:38 2016 -0800

    database/sql: guard against driver.Stmt.Close panics
    
    Do not retain a lock when driver.Stmt.Close panic as the rest
    of the sql package ensures.
    
    Updates #16019
    
    Change-Id: Idc7ea9258ae23f491e79cce3efc365684a708428
    Reviewed-on: https://go-review.googlesource.com/33328
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 81627f0e47f91a6e6e7bfd7c59b4e3ac596668ca
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Nov 17 06:06:34 2016 +0900

    net: deflake TestAcceptTimeout again
    
    This is a followup to CL 33257.
    
    It looks like active close operation at passive open side sometimes
    takes a bit long time on Darwin.
    
    Fixes #17948.
    
    Change-Id: Ida17639c4e66a43e1be1f74fd0ef3baddde25092
    Reviewed-on: https://go-review.googlesource.com/33258
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9f5673d9307572ff3b435a845470e3b7fd3c6a43
Author: David Chase <drchase@google.com>
Date:   Mon Nov 14 18:00:17 2016 -0500

    cmd/compile: ensure necessary types appear in .debug_info
    
    Autotmp filtering was too aggressive and excluded types
    necessary to make debuggers work properly.  Restore the
    "late filter" in dwarf.go based on names to exclude autotmps,
    and remove the "early filter" in pgen.go based on how the
    name was introduced.  However, the updated naming scheme
    with a dot prefix is retained to prevent accidental clashes
    with legal Go identifier names.
    
    Includes test (grouped with runtime gdb tests),
    verified to fail without the fix.
    
    Updates #17644.
    Fixes #17830.
    
    Change-Id: I7ec3f7230083889660236e5f6bc77ba5fe434e93
    Reviewed-on: https://go-review.googlesource.com/33233
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 1e3c57c2cc1500b12a35a859f3d6e8aa27aeebc5
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Nov 16 10:43:54 2016 -0500

    cmd/internal/obj/arm64: fix branch too far for CBZ (and like)
    
    The assembler backend fixes too-far conditional branches, but only
    for BEQ and like. Add a case for CBZ and like.
    
    Fixes #17925.
    
    Change-Id: Ie516e6c5ca165b582367283a0110f7081e00c214
    Reviewed-on: https://go-review.googlesource.com/33304
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: David Chase <drchase@google.com>

commit cd66c38619cbf6e031d9af4cea8197cd6980ffa1
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 16 16:27:27 2016 +0000

    runtime/pprof: skip profiling tests on mips if highres timers not available
    
    Fixes #17936
    
    Change-Id: I20d09712b7d7303257994356904052ba64bc5bf2
    Reviewed-on: https://go-review.googlesource.com/33306
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e279280d0db0a8ffb7b453e789a2e322722d2259
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Nov 16 16:34:02 2016 +0900

    net: deflake TestAcceptTimeout
    
    This change makes use of synchronization primitive instead of
    context-based canceling not to depend on defer execution scheduling.
    
    Fixes #17927.
    
    Change-Id: I5ca9287a48bb5cdda6845a7f12757f95175c5db8
    Reviewed-on: https://go-review.googlesource.com/33257
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d8b14c524303f8d28bc5b496e918cfbb2758cbc5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 16 19:08:25 2016 +0000

    math/rand: make floating point tests shorter on mips and mipsle
    
    Like GOARM=5 does.
    
    Fixes #17944
    
    Change-Id: Ica2a54a90fbd4a29471d1c6009ace2fcc5e82a73
    Reviewed-on: https://go-review.googlesource.com/33326
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 68fda1888e8026aef96590ac634bc35d4c71b6e0
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Wed Nov 16 15:26:41 2016 +0000

    all: call flag.Parse from TestMain only if used
    
    These don't use any flags in TestMain itself, so the call is redundant
    as M.Run will do it.
    
    Change-Id: I00f2ac7f846dc2c3ad3535eb8177616b2d900149
    Reviewed-on: https://go-review.googlesource.com/33275
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7ee793652307269c9fdee2c0cb222509371a6e36
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sun Nov 13 21:20:58 2016 -0500

    cmd/link: handle R_GOTPCREL separately on darwin
    
    To generate the correct section offset the shared code path for
    R_CALL, R_PCREL, and R_GOTPCREL on darwin when externally linking
    walks up the symbol heirarchy adding the differences. This is fine,
    except in the case where we are generating a GOT lookup, because
    the topmost symbol is left in r.Xsym instead of the symbol we are
    looking up. So all funcsym GOT lookups were looking up the outer
    "go.func.*" symbol.
    
    Fix this by separating out the R_GOTPCREL code path.
    
    For #17828 (and may fix it).
    
    Change-Id: I2c9f4d135e77c17270aa064d8c876dc6d485d659
    Reviewed-on: https://go-review.googlesource.com/33211
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b75b9e1d65989753d0ee14ccc6007729e49e2e51
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 15 17:14:13 2016 -0800

    database/sql: clarify when statement in transaction is closed
    
    Fixes #16346.
    
    Change-Id: Ie75a4ae7011036dd2c1f121a7a5e38d10177721e
    Reviewed-on: https://go-review.googlesource.com/33296
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 26069e1981ba8500baf35ff5aec79531e4882543
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Wed Nov 16 14:28:12 2016 +0000

    cmd/compile: remove some unused code
    
    The use of these has been removed in recent commits.
    
    Change-Id: Iff36a3ee4dcdfe39c40e93e2601f44d3c59f7024
    Reviewed-on: https://go-review.googlesource.com/33274
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d338f2e1470227afcadde977f2f2ab07d65088db
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Nov 16 13:35:59 2016 +0900

    net: don't run TestTCPBig unconditionally
    
    The test requires tons of memory and results various failures, mainly
    runtime errors and process termination by SIGKILL, caused by resource
    exhaustion when the node under test doesn't have much resources.
    
    This change makes use of -tcpbig flag to enable the test.
    
    Change-Id: Id53fa5d88543e2e60ca9bb4f55a1914ccca844e1
    Reviewed-on: https://go-review.googlesource.com/33254
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1f605175b0044d69ac2364c24f515344c9866fd6
Author: Bryan C. Mills <bcmills@google.com>
Date:   Wed Nov 9 15:28:24 2016 -0500

    runtime/cgo: use libc for sigaction syscalls when possible
    
    This ensures that runtime's signal handlers pass through the TSAN and
    MSAN libc interceptors and subsequent calls to the intercepted
    sigaction function from C will correctly see them.
    
    Fixes #17753.
    
    Change-Id: I9798bb50291a4b8fa20caa39c02a4465ec40bb8d
    Reviewed-on: https://go-review.googlesource.com/33142
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c69233be84eee26d1ea15869b86d76aad602d693
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Nov 16 13:51:45 2016 +0900

    net/http: fix a typo in test
    
    Change-Id: I897237667ffe9e9b2a5f92251a6f665d29479fd2
    Reviewed-on: https://go-review.googlesource.com/33255
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b906df653b58bc2ab9b93e18f62adccc8c1419b7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 15 17:55:28 2016 -0800

    os/exec: add closeOnce.WriteString method
    
    Add an explicit WriteString method to closeOnce that acquires the
    writers lock.  This overrides the one promoted from the
    embedded *os.File field.  The promoted one naturally does not acquire
    the lock, and can therefore race with the Close method.
    
    Fixes #17647.
    
    Change-Id: I3460f2a0d503449481cfb2fd4628b4855ab0ecdf
    Reviewed-on: https://go-review.googlesource.com/33298
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1b66b38e25af567aa30a7b22581c05285be3564a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 15 20:16:15 2016 -0500

    api, doc: update go1.8.txt and next.txt
    
    Both automated updates with a few tweaks.
    
    Change-Id: I24579a8dcc32a84a4fff5c2212681ef30dda61d1
    Reviewed-on: https://go-review.googlesource.com/33297
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 272032d0b245635ca0c5ca4c22e64496174b2ae3
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:51:01 2016 +0200

    runtime: add support files for linux/mips{,le} port
    
    Only exe buildmode without cgo supported.
    
    Change-Id: Id104a79a99d3285c04db00fd98b8affa94ea3c37
    Reviewed-on: https://go-review.googlesource.com/31487
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 4d1fdd8b5e3783b8ca4e9f4fe1e524f5aa83383c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 15 12:41:33 2016 -0800

    test: add test case that failed when built with gccgo
    
    Change-Id: Ie7512cc27436cde53b58686b32a0389849a365e4
    Reviewed-on: https://go-review.googlesource.com/33249
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 816aa99b9a905c5a1fb1d1853698d87b74099720
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Nov 15 16:33:22 2016 +0100

    syscall: define bind flags on Plan 9
    
    These bind flags were removed by mistake in CL 2167.
    
    Fixes #17921.
    
    Change-Id: I1e8089dade30a212b8db0b216c8299946d924d4b
    Reviewed-on: https://go-review.googlesource.com/33271
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 59dc9d7a89829127883dd5e2d8b042f1e5b40336
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Nov 14 15:51:30 2016 -0800

    cmd/cgo: add missing period in comment
    
    Change-Id: I05f31938f3736100bd8b20a150c9fe3a6ffcdeae
    Reviewed-on: https://go-review.googlesource.com/33245
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 27b68474ca8bffea06a4dd11424b293243ae846c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Nov 14 15:51:30 2016 -0800

    cmd/cgo: run cgo pointer checks for pointer to union
    
    If a C union type (or a C++ class type) can contain a pointer field,
    then run the cgo checks on pointers to that type. This will test the
    pointer as though it were an unsafe.Pointer, and will crash if it points
    to Go memory that contains a pointer.
    
    Fixes #15942.
    
    Change-Id: Ic2d07ed9648d4b27078ae7683e26196bcbc59fc9
    Reviewed-on: https://go-review.googlesource.com/33237
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fab3fcaf750445c0016a44376aa81c720133e02c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Nov 12 06:50:24 2016 -0500

    cmd/go: use build ID as plugin symbol prefix
    
    Updates #17821
    
    Change-Id: Iebd2e88b2d4f3d757ffad72456f4bfc0607d8110
    Reviewed-on: https://go-review.googlesource.com/33162
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 03da2690c9fefdbaff613f9ccc224b5f0abfbe16
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Nov 12 06:24:36 2016 -0500

    cmd/link, runtime, plugin: versioning
    
    In plugins and every program that opens a plugin, include a hash of
    every imported package.
    
    There are two versions of each hash: one local and one exported.
    As the program starts and plugins are loaded, the first exported
    symbol for each package becomes the canonical version.
    
    Any subsequent plugin's local package hash symbol has to match the
    canonical version.
    
    Fixes #17832
    
    Change-Id: I4e62c8e1729d322e14b1673bada40fa7a74ea8bc
    Reviewed-on: https://go-review.googlesource.com/33161
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a145890059e9c7aae870e1b9e74b204b6c8bc8d5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Nov 14 21:34:58 2016 -0800

    all: don't call t.Fatal from a goroutine
    
    Fixes #17900.
    
    Change-Id: I42cda6ac9cf48ed739d3a015a90b3cb15edf8ddf
    Reviewed-on: https://go-review.googlesource.com/33243
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9be14c4058287f88dc927ea847e3d6d57ff4047b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 15 03:31:47 2016 +0000

    net: add test that TCP Close unblocks blocked Reads
    
    I guess this was fixed at some point. Remove a skipped test in
    net/http and add an explicit test in net.
    
    Fixes #17695
    
    Change-Id: Idb9f3e236b726bb45098474b830c95c1fce57529
    Reviewed-on: https://go-review.googlesource.com/33242
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b687d6a7886fe7ffea0e36072c2a882c8c485838
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Nov 14 16:50:15 2016 -0800

    misc/cgo/testcarchive, misc/cgo/testcshared: sleep instead of sched_yield
    
    Apparently when GOMAXPROCS == 1 a simple sched_yield in a tight loop is
    not necessarily sufficient to permit a signal handler to run. Instead,
    sleep for 1/1000 of a second.
    
    Fixes #16649.
    
    Change-Id: I83910144228556e742b7a92a441732ef61aa49d9
    Reviewed-on: https://go-review.googlesource.com/33239
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1e917312511f6ce54bbdcea8cd0c25e66973d49e
Author: Caleb Spare <cespare@gmail.com>
Date:   Sun Nov 13 18:06:16 2016 -0800

    html/template: fix multiple Clones of redefined template
    
    This change redoes the fix for #16101 (CL 31092) in a different way by
    making t.Clone return the template associated with the t.Name() while
    allowing for the case that a template of the same name is define-d.
    
    Fixes #17735.
    
    Change-Id: I1e69672390a4c81aa611046a209008ae4a3bb723
    Reviewed-on: https://go-review.googlesource.com/33210
    Run-TryBot: Caleb Spare <cespare@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 91461002f354a5fc8b3898bbb0ade90d2921441e
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Nov 14 09:17:15 2016 +0900

    os: gofmt -w -s
    
    Change-Id: I9a42cb55544185ade20b2a4a9de5d39a6cfc6fc6
    Reviewed-on: https://go-review.googlesource.com/33172
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 90d536f3ca2d6456ee0ab45408e8499ea815ddb3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 15 01:36:34 2016 +0000

    net/http: update bundled http2 for write scheduling order fix
    
    Updates x/net/http2 to x/net git rev 00ed5e9 for:
    
        http2: schedule RSTStream writes onto its stream's queue
        https://golang.org/cl/33238
    
    Fixes #17243
    
    Change-Id: I79cc5d15bf69ead28d549d4f798c12f4ee2a2201
    Reviewed-on: https://go-review.googlesource.com/33241
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 24a088d20ad52c527f61b34217da72589e366833
Author: Rob Pike <r@golang.org>
Date:   Tue Nov 8 15:43:20 2016 -0800

    text/template: efficient reporting of line numbers
    
    Instead of scanning the text to count newlines, which is n², keep track as we go
    and store the line number in the token.
    
    benchmark                 old ns/op      new ns/op     delta
    BenchmarkParseLarge-4     1589721293     38783310      -97.56%
    
    Fixes #17851
    
    Change-Id: I231225c61e667535e2ce55cd2facea6d279cc59d
    Reviewed-on: https://go-review.googlesource.com/33234
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bb00a8d97faa70bf7a1cbdd4a43e95347a9c8709
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 14 22:11:05 2016 +0000

    net/http: update bundled http2, add TestServerKeepAlivesEnabled h1/h2 tests
    
    Updates x/net/http2 to x/net git rev 6dfeb344 for:
    
       http2: make Server respect http1 Server's SetKeepAlivesEnabled
       https://golang.org/cl/33153
    
    And adds a test in std.
    
    Fixes #17717
    
    Change-Id: I3ba000abb6f3f682261e105d8a4bb93bde6609fe
    Reviewed-on: https://go-review.googlesource.com/33231
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Tom Bergan <tombergan@google.com>

commit b83350a2e05d63eaae8da9ff4f957ab44e4cb9d9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 14 22:23:10 2016 +0000

    Revert "text/template: efficient reporting of line numbers"
    
    This reverts commit 794fb71d9c1018c4beae1657baca5229e6a02ad0.
    
    Reason for revert: submitted without TryBots and it broke all three race builders.
    
    Change-Id: I80a1e566616f0ee8fa3529d4eeee04268f8a713b
    Reviewed-on: https://go-review.googlesource.com/33232
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2442b49c47aa818bbc55e4c064e9ea0ca058735f
Author: Marcel Edmund Franke <marcel.edmund.franke@gmail.com>
Date:   Mon Nov 14 21:46:25 2016 +0100

    html/template: typo fix
    
    comment on unexported function starts with wrong functionname
    
    Change-Id: Ib16c2fe42b5a8d4606ed719f620923c17839d091
    Reviewed-on: https://go-review.googlesource.com/33203
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 794fb71d9c1018c4beae1657baca5229e6a02ad0
Author: Rob Pike <r@golang.org>
Date:   Tue Nov 8 15:43:20 2016 -0800

    text/template: efficient reporting of line numbers
    
    Instead of scanning the text to count newlines, which is n², keep track as we go
    and store the line number in the token.
    
    benchmark                 old ns/op      new ns/op     delta
    BenchmarkParseLarge-4     1589721293     38783310      -97.56%
    
    Fixes #17851
    
    Change-Id: Ieaf89a35e371b405ad92e38baa1e3fa98d18cfb4
    Reviewed-on: https://go-review.googlesource.com/32923
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 2f76c1985fa8bbb0fb09af6600445b5c7d4d5cb4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Nov 13 15:18:42 2016 -0800

    cmd/go/testdata/src: gofmt
    
    These are functionality tests, not formatter tests.
    
    I also tested manually that 'go test cmd/go'
    without -short still passes.
    
    
    Change-Id: Id146e1dc3b65e19ea531869725cd0b97f4801b8b
    Reviewed-on: https://go-review.googlesource.com/33169
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5f74ce394f02714a88dd375f54e8709ce58d1805
Author: Jesse Szwedko <jesse.szwedko@gmail.com>
Date:   Sun Nov 13 13:29:19 2016 -0800

    syscall: Clearenv now unsets env vars on Windows
    
    Previously, `os.Clearenv()` (by way of `syscall.Clearenv`) would simply
    set all environment variables' values to `""` rather than actually
    unsetting them causing subsequent `os.LookupEnv` calls to return that
    they were still set.
    
    Fixes #17902
    
    Change-Id: I54081b4b98665e9a39f55ea7582c8d40bb8a2a22
    Reviewed-on: https://go-review.googlesource.com/33168
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 4a381e3ee3ad6104fc1e1bc255f29d6bf47d7969
Author: David du Colombier <0intro@gmail.com>
Date:   Sun Nov 13 19:12:39 2016 +0100

    net/http: enable timeout tests on Plan 9
    
    Deadlines have been implemented on Plan 9 in CL 31521.
    
    Enable the following tests:
    
     - TestServerTimeouts
     - TestOnlyWriteTimeout
     - TestTLSHandshakeTimeout
     - TestIssue4191_InfiniteGetTimeout
     - TestIssue4191_InfiniteGetToPutTimeout
    
    Updates #7237.
    
    Change-Id: If5e75cfaa9133dcf9ce6aac9fc2badafc1612b64
    Reviewed-on: https://go-review.googlesource.com/33197
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8d3d23a124970475485c50385fc3c13780c9c306
Author: David du Colombier <0intro@gmail.com>
Date:   Sun Nov 13 22:00:38 2016 +0100

    net/http: fix error message in TestClientWriteShutdown
    
    Change-Id: I3c664201baef6d7dbed94dab63db0ac974bf6817
    Reviewed-on: https://go-review.googlesource.com/33198
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f8dc4f20f8f8cb2ac8ee14b15ed4bf5201b61e81
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Nov 13 12:59:07 2016 -0800

    Revert "cmd/vet: ignore printf failures in cmd"
    
    This reverts commit f15915af4effbbe6895ae69be02d22ac016927d5.
    
    CL 32851 fixed cmd/vet's handling of fmt.Formatter.
    
    Updates #17057.
    
    Change-Id: I3409100d16037645946fe7fe78fbb173e1648494
    Reviewed-on: https://go-review.googlesource.com/33166
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7c9f910607afbb5e33146d966e6c60ac5dbf3b31
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Nov 13 13:10:42 2016 -0800

    all: fix vet nits
    
    Fixes these vet complaints:
    
    net/error_test.go:254: unrecognized printf flag for verb 'T': '#'
    os/os_test.go:1067: arg mt for printf verb %d of wrong type: time.Time
    runtime/debug/garbage_test.go:83: arg dt for printf verb %d of wrong type: time.Time
    
    Change-Id: I0e986712a4b083b75fb111e687e424d06a85a47b
    Reviewed-on: https://go-review.googlesource.com/33167
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit afa68b36cc225075e87b53e2f9c2edc9dfb73b9e
Author: Thordur Bjornsson <thorduri@secnorth.net>
Date:   Sat Nov 12 17:05:17 2016 +0100

    encoding/hex: Document DecodedLen.
    
    Mention that it specifically returns x / 2, and do the same for
    EncodedLen.
    
    Change-Id: Ie334f5abecbc487caf4965abbcd14442591bef2a
    Change-Id: Idfa413faad487e534489428451bf736b009293d6
    Reviewed-on: https://go-review.googlesource.com/33191
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 582a421a8c245268f7c081fa1191374d50a601f7
Author: David du Colombier <0intro@gmail.com>
Date:   Sun Nov 13 15:04:54 2016 +0100

    net: enable timeout tests on Plan 9
    
    Deadlines have been implemented on Plan 9 in CL 31521.
    
    Enable the following tests:
    
     - TestReadTimeout
     - TestReadFromTimeout
     - TestWriteTimeout
     - TestWriteToTimeout
     - TestReadTimeoutFluctuation
     - TestVariousDeadlines
     - TestVariousDeadlines1Proc
     - TestVariousDeadlines4Proc
     - TestReadWriteDeadlineRace
    
    Change-Id: I221ed61d55f7f1e4345b37af6748c04e1e91e062
    Reviewed-on: https://go-review.googlesource.com/33196
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 662d25351542d624f397bb0a83ff1c0ca38b6428
Author: Dhananjay Nakrani <dhananjaynakrani@gmail.com>
Date:   Sun Nov 6 19:56:14 2016 -0800

    cmd/vet: ignore unrecognized verbs for fmt.Formatter
    
    Updates #17057.
    
    Change-Id: I54c838d3a44007d4023754e42971e91bfb5e8612
    Reviewed-on: https://go-review.googlesource.com/32851
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 524cd4855e11a26d07a7ca7ee45d3bee38c54425
Author: Martin Möhrmann <moehrmann@google.com>
Date:   Sat Nov 12 20:08:02 2016 +0100

    time: simplify stringification of Month
    
    Simplifies https://golang.org/cl/33145
    which fixed #17720.
    
    Change-Id: Ib922d493cdc5920832dc95b55094796baca7243e
    Reviewed-on: https://go-review.googlesource.com/33194
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4bee9012b31a762799ea861cd5f55583f1f602f5
Author: David du Colombier <0intro@gmail.com>
Date:   Sat Nov 12 22:12:22 2016 +0100

    net/http/httptest: remove workaround on Plan 9
    
    This issue has been fixed in CL 31390.
    
    Change-Id: I0c2425fd33be878037d10d612a50116a7b693431
    Reviewed-on: https://go-review.googlesource.com/33195
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 091ba60bd87bf8b40a24196f31b5f3c18c2f2dc4
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Thu Sep 22 13:33:22 2016 -0700

    compress/flate: add examples
    
    Updates #16360
    
    Change-Id: I66ff23e0501363f58fe891d5e95806422071f93b
    Reviewed-on: https://go-review.googlesource.com/30162
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f497263e4ff6121a1ba80e7a57e950061896626
Author: Patrick Lee <pattyshack101@gmail.com>
Date:   Fri Nov 11 19:24:07 2016 -0800

    cmd/pprof: add options to skip tls verification
    
    Don't verify tls host when profiling https+insecure://host/port/...,
    as per discussion in https://go-review.googlesource.com/#/c/20885/.
    
    Fixes: #11468
    
    Change-Id: Ibfc236e5442a00339334602a4014e017c62d9e7a
    Reviewed-on: https://go-review.googlesource.com/33157
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4966150af0139b5f26a943eb4c33fe5cb6758043
Author: David du Colombier <0intro@gmail.com>
Date:   Sat Nov 12 17:01:08 2016 +0100

    net: enable TestReadTimeoutUnblocksRead on Plan 9
    
    Deadlines have been implemented on Plan 9 in CL 31521.
    
    Fixes #17477.
    
    Change-Id: Icb742ac30933b6d2f9350fc4e6acbcd433c66c21
    Reviewed-on: https://go-review.googlesource.com/33190
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 37020dd510cf7da36e9eb1827a20890234e4ea79
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Nov 12 05:58:52 2016 +0000

    runtime/internal/atomic: add TestUnaligned64
    
    Add a variant of sync/atomic's TestUnaligned64 to
    runtime/internal/atomic.
    
    Skips the test on arm for now where it's currently failing.
    
    Updates #17786
    
    Change-Id: If63f9c1243e9db7b243a95205b2d27f7d1dc1e6e
    Reviewed-on: https://go-review.googlesource.com/33159
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c921d8f39d6da1afd1550787464d27f015412194
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 11 23:40:25 2016 +0000

    context: document appropriate WithValue key type more
    
    Fixes #17826
    Updates #17302
    
    Change-Id: I7c1ebd965e679e7169a97e62d27ae3ede2473aa1
    Reviewed-on: https://go-review.googlesource.com/33152
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit adb384ad2cfbd742fb106b7ec2a65d4ad844c35e
Author: David du Colombier <0intro@gmail.com>
Date:   Fri Nov 11 20:49:11 2016 +0100

    net: implement asynchonous cancelable I/O on Plan 9
    
    This change is an experimental implementation of asynchronous
    cancelable I/O operations on Plan 9, which are required to
    implement deadlines.
    
    There are no asynchronous syscalls on Plan 9. I/O operations
    are performed with blocking pread and pwrite syscalls.
    
    Implementing deadlines in Go requires a way to interrupt
    I/O operations.
    
    It is possible to interrupt reads and writes on a TCP connection
    by forcing the closure of the TCP connection. This approach
    has been used successfully in CL 31390.
    
    However, we can't implement deadlines with this method, since
    we require to be able to reuse the connection after the timeout.
    
    On Plan 9, I/O operations are interrupted when the process
    receives a note. We can rely on this behavior to implement
    a more generic approach.
    
    When doing an I/O operation (read or write), we start the I/O in
    its own process, then wait for the result asynchronously. The
    process is able to handle the "hangup" note. When receiving the
    "hangup" note, the currently running I/O operation is canceled
    and the process returns.
    
    This way, deadlines can be implemented by sending an "hangup"
    note to the process running the blocking I/O operation, after
    the expiration of a timer.
    
    Fixes #11932.
    Fixes #17498.
    
    Change-Id: I414f72c7a9a4f9b8f9c09ed3b6c269f899d9b430
    Reviewed-on: https://go-review.googlesource.com/31521
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 456f2f5cb8c2e06e7faba6ba298ffb65c7a19397
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Nov 10 17:10:45 2016 -0800

    time: use 1e9 rather than 1e-9 in Duration calculations
    
    1e-9 has a 1 in the last place, causing some Duration calculations to
    have unnecessary rounding errors.  1e9 does not, so use that instead.
    
    Change-Id: I96334a2c47e7a014b532eb4b8a3ef9550e7ed057
    Reviewed-on: https://go-review.googlesource.com/33116
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5b147122d6094b792a027b892884b994fe77a4d6
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Wed Oct 19 17:55:10 2016 +0200

    cmd/dist: add support for GOARCH=mips{,le}
    
    Change-Id: I6e24d22eada190e9aa2adc161be7a753c8e5054b
    Reviewed-on: https://go-review.googlesource.com/31514
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 241dccc4fdaf32830fa32a38a9c7953584b57a17
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Sat Sep 17 15:01:55 2016 +0100

    cmd/internal/browser: add chromium to the list of browsers
    
    Many linux distros distribute Chromium instead of Chrome.
    
    Change-Id: I5474d94da28a7c79bdd7181f77472d4ce73bb225
    Reviewed-on: https://go-review.googlesource.com/29293
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d8264de8683dac99ffbbbc1f46415e627b73c9ed
Author: Dmitri Shuralyov <shurcooL@gmail.com>
Date:   Wed Nov 9 14:49:12 2016 -0800

    all: spell "marshal" and "unmarshal" consistently
    
    The tree is inconsistent about single l vs double l in those
    words in documentation, test messages, and one error value text.
    
            $ git grep -E '[Mm]arshall(|s|er|ers|ed|ing)' | wc -l
                  42
            $ git grep -E '[Mm]arshal(|s|er|ers|ed|ing)' | wc -l
                1694
    
    Make it consistently a single l, per earlier decisions. This means
    contributors won't be confused by misleading precedence, and it helps
    consistency.
    
    Change the spelling in one error value text in newRawAttributes of
    crypto/x509 package to be consistent.
    
    This change was generated with:
    
            perl -i -npe 's,([Mm]arshal)l(|s|er|ers|ed|ing),$1$2,' $(git grep -l -E '[Mm]arshall' | grep -v AUTHORS | grep -v CONTRIBUTORS)
    
    Updates #12431.
    Follows https://golang.org/cl/14150.
    
    Change-Id: I85d28a2d7692862ccb02d6a09f5d18538b6049a2
    Reviewed-on: https://go-review.googlesource.com/33017
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9a78eadeb636689f79dbf6bd3c0a35d830678097
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 11 14:05:51 2016 -0800

    net: deflake TestTCPSupriousConnSetupCompletion [sic]
    
    And rename it.
    
    Fixes #17703
    
    Change-Id: I73c82a9b3f96180699c6d33c069a666018eb30f9
    Reviewed-on: https://go-review.googlesource.com/33149
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 02d79e95581e53edca21f0c105675b3f459ee736
Author: Quentin Smith <quentin@golang.org>
Date:   Thu Nov 10 11:45:56 2016 -0500

    cmd/go: skip TestCgoPkgConfig if pkg-config is too old
    
    pkg-config 0.24 adds support for quoting and escaping whitespace;
    distros like CentOS 6 are still shipping pkg-config 0.23. Skip the test
    there since there's no way to get whitespace into the pkg-config output.
    
    Fixes #17846.
    
    Change-Id: Ie4ea17e9b709372a20178b539498929754bcd51f
    Reviewed-on: https://go-review.googlesource.com/33027
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit a18b4b3fb9b1b98f6eefa038b723f99fd6d13efd
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 11 20:54:07 2016 +0000

    time: don't panic stringifying the zero Month
    
    Fixes #17720
    
    Change-Id: Ib95c230deef3934db729856c17908f8e5a1e2b7f
    Reviewed-on: https://go-review.googlesource.com/33145
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit e0aedfb496f414e1a869d27175b4dfcc6baef407
Author: Rhys Hiltner <rhys@justin.tv>
Date:   Tue Oct 25 11:56:29 2016 -0700

    runtime: include pre-panic/throw logs in core dumps
    
    When a Go program crashes with GOTRACEBACK=crash, the OS creates a
    core dump. Include the text-formatted output of some of the cause of
    that crash in the core dump.
    
    Output printed by the runtime before crashing is maintained in a
    circular buffer to allow access to messages that may be printed
    immediately before calling runtime.throw.
    
    The stack traces printed by the runtime as it crashes are not stored.
    The information required to recreate them should be included in the
    core file.
    
    Updates #16893
    
    There are no tests covering the generation of core dumps; this change
    has not added any.
    
    This adds (reentrant) locking to runtime.gwrite, which may have an
    undesired performance impact.
    
    Change-Id: Ia2463be3c12429354d290bdec5f3c8d565d1a2c3
    Reviewed-on: https://go-review.googlesource.com/32013
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 10d2efd0b0e3f4f92f9470435f63211cbeb82008
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 11 20:35:26 2016 +0000

    net/smtp: make Client.Auth trim final space if Auth.Start toServer is empty
    
    Users can implement the smtp.Auth interface and return zero bytes in
    the "toServer []byte" return value from the Auth.Start method. People
    apparently do this to implement the SMTP "LOGIN" method.
    
    But we were then sending "AUTH LOGIN \r\n" to the server, which some
    servers apparently choke on. So, trim it when the toServer value is
    empty.
    
    Fixes #17794
    
    Change-Id: I83662dba9e0f61b1c5000396c096cf7110f78361
    Reviewed-on: https://go-review.googlesource.com/33143
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e6da64b6c070eeb872ca141ab58435e7be5da388
Author: Russ Cox <rsc@golang.org>
Date:   Fri Nov 11 10:27:36 2016 -0500

    runtime: fix Windows profiling crash
    
    I don't have any way to test or reproduce this problem,
    but the current code is clearly wrong for Windows.
    Make it better.
    
    As I said on #17165:
    
    But the borrowing of M's and the profiling of M's by the CPU profiler
    seem not synchronized enough. This code implements the CPU profiler
    on Windows:
    
            func profileloop1(param uintptr) uint32 {
                    stdcall2(_SetThreadPriority, currentThread, _THREAD_PRIORITY_HIGHEST)
    
                    for {
                            stdcall2(_WaitForSingleObject, profiletimer, _INFINITE)
                            first := (*m)(atomic.Loadp(unsafe.Pointer(&allm)))
                            for mp := first; mp != nil; mp = mp.alllink {
                                    thread := atomic.Loaduintptr(&mp.thread)
                                    // Do not profile threads blocked on Notes,
                                    // this includes idle worker threads,
                                    // idle timer thread, idle heap scavenger, etc.
                                    if thread == 0 || mp.profilehz == 0 || mp.blocked {
                                            continue
                                    }
                                    stdcall1(_SuspendThread, thread)
                                    if mp.profilehz != 0 && !mp.blocked {
                                            profilem(mp)
                                    }
                                    stdcall1(_ResumeThread, thread)
                            }
                    }
            }
    
            func profilem(mp *m) {
                    var r *context
                    rbuf := make([]byte, unsafe.Sizeof(*r)+15)
    
                    tls := &mp.tls[0]
                    gp := *((**g)(unsafe.Pointer(tls)))
    
                    // align Context to 16 bytes
                    r = (*context)(unsafe.Pointer((uintptr(unsafe.Pointer(&rbuf[15]))) &^ 15))
                    r.contextflags = _CONTEXT_CONTROL
                    stdcall2(_GetThreadContext, mp.thread, uintptr(unsafe.Pointer(r)))
                    sigprof(r.ip(), r.sp(), 0, gp, mp)
            }
    
            func sigprof(pc, sp, lr uintptr, gp *g, mp *m) {
                    if prof.hz == 0 {
                            return
                    }
    
                    // Profiling runs concurrently with GC, so it must not allocate.
                    mp.mallocing++
    
                    ... lots of code ...
    
                    mp.mallocing--
            }
    
    A borrowed M may migrate between threads. Between the
    atomic.Loaduintptr(&mp.thread) and the SuspendThread, mp may have
    moved to a new thread, so that it's in active use. In particular
    it might be calling malloc, as in the crash stack trace. If so, the
    mp.mallocing++ in sigprof would provoke the crash.
    
    Those lines are trying to guard against allocation during sigprof.
    But on Windows, mp is the thread being traced, not the current
    thread. Those lines should really be using getg().m.mallocing, which
    is the same on Unix but not on Windows. With that change, it's
    possible the race on the actual thread is not a problem: the traceback
    would get confused and eventually return an error, but that's fine.
    The code expects that possibility.
    
    Fixes #17165.
    
    Change-Id: If6619731910d65ca4b1a6e7de761fa2518ef339e
    Reviewed-on: https://go-review.googlesource.com/33132
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b6a15683f0c4d177b3711b55724506aebb03f764
Author: Bill O'Farrell <billo@ca.ibm.com>
Date:   Sun Oct 30 00:11:37 2016 -0400

    math: use SIMD to accelerate some scalar math functions on s390x
    
    Note, most math functions are structured to use stubs, so that they can
    be accelerated with assembly on any platform.
    Sinh, cosh, and tanh were not structued with stubs, so this CL does
    that. This set of routines was chosen as likely to produce good speedups
    with assembly on any platform.
    
    Technique used was minimax polynomial approximation using tables of
    polynomial coefficients, with argument range reduction.
    A table of scaling factors was also used for cosh and log10.
    
                         before       after      speedup
    BenchmarkCos         22.1 ns/op   6.79 ns/op  3.25x
    BenchmarkCosh       125   ns/op  11.7  ns/op 10.68x
    BenchmarkLog10       48.4 ns/op  12.5  ns/op  3.87x
    BenchmarkSin         22.2 ns/op   6.55 ns/op  3.39x
    BenchmarkSinh       125   ns/op  14.2  ns/op  8.80x
    BenchmarkTanh        65.0 ns/op  15.1  ns/op  4.30x
    
    Accuracy was tested against a high precision
    reference function to determine maximum error.
    Approximately 4,000,000 points were tested for each function,
    producing the following result.
    Note: ulperr is error in "units in the last place"
    
           max
          ulperr
    sin    1.43 (returns NaN beyond +-2^50)
    cos    1.79 (returns NaN beyond +-2^50)
    cosh   1.05
    sinh   3.02
    tanh   3.69
    log10  1.75
    
    Also includes a set of tests to test non-vector functions even
    when SIMD is enabled
    
    Change-Id: Icb45f14d00864ee19ed973d209c3af21e4df4edc
    Reviewed-on: https://go-review.googlesource.com/32352
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 9f9d83404f938a0dfb98d3f4a4d420261606069a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 11 18:43:39 2016 +0000

    net/http: make Server respect shutdown state after handler finishes
    
    If the Server's Shutdown (or SetKeepAlivesEnabled) method was called
    while a connection was in a Handler, but after the headers had been
    written, the connection was not later closed.
    
    Fixes #9478
    Updates #17754 (reverts that workaround)
    
    Change-Id: I65324ab8217373fbb38e12e2b8bffd0a91806072
    Reviewed-on: https://go-review.googlesource.com/33141
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 39e3cbfff623d7941b519f9d35883ef3b74cbcd6
Author: Russ Cox <rsc@golang.org>
Date:   Fri Nov 11 11:54:18 2016 -0500

    text/template: reintroduce implicit indirect of interface values in builtin funcs
    
    CL 31462 made it possible to operate directly on reflect.Values
    instead of always forcing a round trip to interface{} and back.
    The round trip was losing addressability, which hurt users.
    
    The round trip was also losing "interface-ness", which helped users.
    That is, using reflect.ValueOf(v.Interface()) instead of v was doing
    an implicit indirect any time v was itself an interface{} value: the result
    was the reflect.Value for the underlying concrete value contained in the
    interface, not the interface itself.
    
    CL 31462 eliminated some "unnecessary" reflect.Value round trips
    in order to preserve addressability, but in doing so it lost this implicit
    indirection. This CL adds the indirection back.
    
    It may help to compare the changes in this CL against funcs.go from CL 31462:
    https://go-review.googlesource.com/#/c/31462/4/src/text/template/funcs.go
    
    Everywhere CL 31462 changed 'v := reflect.ValueOf(x)' to 'v := x',
    this CL changes 'v := x' to 'v := indirectInterface(x)'.
    
    Fixes #17714.
    
    Change-Id: I67cec4eb41fed1d56e1c19f12b0abbd0e59d35a2
    Reviewed-on: https://go-review.googlesource.com/33139
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit fabb4115ed311ec4af19f87c2334e38497dbb8d0
Author: Russ Cox <rsc@golang.org>
Date:   Fri Nov 11 10:11:19 2016 -0500

    time: update Timer.Stop doc to account for AfterFunc
    
    Fixes #17600.
    
    Change-Id: I7aa0eb0dd959da031b6039b51f07db668d4fb468
    Reviewed-on: https://go-review.googlesource.com/33131
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Gudger <igudger@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 84ded8ba8a0233a7f38e3c777dc1c213f98d00a2
Author: Kenny Grant <kennygrant@gmail.com>
Date:   Fri Aug 26 22:21:00 2016 +0100

    net/http: make Server log on bad requests from clients
    
    Fixes #12745
    
    Change-Id: Iebb7c97cb5b68dc080644d796a6ca1c120d41b26
    Reviewed-on: https://go-review.googlesource.com/27950
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 238247eb59cdddeedaa5c5db67734df2cd1049ab
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 11 17:14:02 2016 +0000

    net/http: deflake new TestInterruptWithPanic_h2
    
    TestInterruptWithPanic_h2 was added yesterday in
    https://golang.org/cl/33099 and https://golang.org/cl/33103
    
    Deflake it. The http2 server sends an error before logging.
    
    Rather than reorder the http2 code to log before writing the RSTStream
    frame, just loop for a bit waiting for the condition we're
    expecting.
    
    This goes from 2 in 500 flakes for me to unreproducible.
    
    Change-Id: I062866a5977f50c820965aaf83882ddd7bf98f91
    Reviewed-on: https://go-review.googlesource.com/33140
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 866e01457f69b58b31ccb95f223aac80e1285332
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 20:44:26 2016 -0400

    net: apply tcp4/tcp6 restrictions to literals in ResolveTCPAddr
    
    The restrictions were already being applied to the IP addresses
    received from the host resolver. Apply the same restrictions to
    literal IP addresses not passed to the host resolver.
    
    For example, ResolveTCPAddr("tcp4", "[2001:db8::1]:http") used
    to succeed and now does not (that's not an IPv4 address).
    
    Perhaps a bit surprisingly,
    ResolveTCPAddr("tcp4", "[::ffff:127.0.0.1]:http") succeeds,
    behaving identically to ResolveTCPAddr("tcp4", "127.0.0.1:http"), and
    ResolveTCPAddr("tcp6", "[::ffff:127.0.0.1]:http") fails,
    behaving identically to ResolveTCPAddr("tcp6", "127.0.0.1:http").
    Even so, it seems right to match (by reusing) the existing filtering
    as applied to addresses resolved by the host C library.
    If anyone can make a strong argument for changing the filtering
    of IPv4-inside-IPv6 addresses, the fix can be applied to all
    the code paths in a separate CL.
    
    Fixes #14037.
    
    Change-Id: I690dfdcbe93d730e11e00ea387fa7484cd524341
    Reviewed-on: https://go-review.googlesource.com/32100
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c4099c7593fea9c594ad0e8969452a741acba4c7
Author: Russ Cox <rsc@golang.org>
Date:   Fri Nov 11 11:25:15 2016 -0500

    runtime/pprof: delete new TestCPUProfileParse
    
    All the existing CPU profiler tests already parse the profile.
    That should be sufficient indication that profiles can be parsed.
    
    Fixes #17853.
    
    Change-Id: Ie8a190e2ae4eef125c8eb0d4e8b7adac420abbdb
    Reviewed-on: https://go-review.googlesource.com/33136
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit eafe48781a013554961b9bcad8a0262f9ea20acc
Author: Michael Matloob <matloob@golang.org>
Date:   Fri Nov 11 11:32:07 2016 -0500

    runtime/pprof/internal: delete package gzip0
    
    rsc's change golang.org/cl/32455 added a mechanism
    that allows pprof to depend on gzip without introducing
    an import cycle. This obsoletes the need for the gzip0
    package, which was created solely to remove the need
    for that dependency.
    
    Change-Id: Ifa3b98faac9b251f909b84b4da54742046c4e3ad
    Reviewed-on: https://go-review.googlesource.com/33137
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8eb88b0d8e1b76eabe37de67b7dd603da9fbaea3
Author: Kevin Burke <kev@inburke.com>
Date:   Fri Nov 11 08:39:33 2016 -0800

    cmd/gofmt, crypto/tls: fix typos
    
    Fix spelling of "original" and "occurred" in new gofmt docs. The same
    misspelling of "occurred" was also present in crypto/tls, I fixed it there as
    well.
    
    Change-Id: I67b4f1c09bd1a2eb1844207d5514f08a9f525ff9
    Reviewed-on: https://go-review.googlesource.com/33138
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8f215d8c1f90f2841df2ae319799e0bc22320751
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Nov 11 07:39:17 2016 -0800

    cmd/vet/all: add bitwidths for mips and mipsle
    
    cmd/vet/all still doesn't run for mips/mipsle,
    because the rest of the toolchain doesn't yet
    fully support it.
    
    Change-Id: I1a86b0edddbdcd5f43e752208508d99da7aabbb3
    Reviewed-on: https://go-review.googlesource.com/33134
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit eb8f2a832078d0748bcf1eb38357c8119fdbccb7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Nov 11 07:37:32 2016 -0800

    all: fix vet nits
    
    Fixes these complaints from vet:
    
    cmd/compile/internal/gc/noder.go:32: cmd/compile/internal/syntax.Error composite literal uses unkeyed fields
    cmd/compile/internal/gc/noder.go:1035: cmd/compile/internal/syntax.Error composite literal uses unkeyed fields
    cmd/compile/internal/gc/noder.go:1051: cmd/compile/internal/syntax.Error composite literal uses unkeyed fields
    cmd/compile/internal/syntax/parser_test.go:182: possible formatting directive in Error call
    net/http/client_test.go:1334: possible formatting directive in Fatal call
    
    Change-Id: I5f90ec30f3c106c7e66c92e2b6f8d3b4874fec66
    Reviewed-on: https://go-review.googlesource.com/33133
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 50fed64dd90ca6a58cfe8fa7c1061aa8666cc76f
Author: Keegan Carruthers-Smith <keegan.csmith@gmail.com>
Date:   Fri Nov 4 09:31:35 2016 +0200

    go/doc: don't panic if method is missing recv type
    
    Fixes #17788
    
    Change-Id: I2f8a11321dc8f10bebbc8df90ba00ec65b9ee0fa
    Reviewed-on: https://go-review.googlesource.com/32790
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 9a5bddd7ed57596a259f3896dd31ea30e331027d
Author: Richard Gibson <richard.gibson@gmail.com>
Date:   Sat Oct 22 00:21:18 2016 -0400

    net: bring domain name length checks into RFC compliance
    
    The 255-octet limit applies to wire format, not presentation format.
    
    Fixes #17549
    
    Change-Id: I2b5181c53fba32fea60178e0d8df9114aa992b55
    Reviewed-on: https://go-review.googlesource.com/31722
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit add721ef91ed533cf578ff7a604124e377329ae4
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Mon Oct 24 21:20:04 2016 -0700

    encoding/json: encode nil Marshaler as "null"
    
    Fixes #16042.
    
    Change-Id: I0a28aa004246b7b0ffaaab457e077ad9035363c2
    Reviewed-on: https://go-review.googlesource.com/31932
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c439a5d8b77a3b87d94bc49714faeeb2a04112f4
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Fri Sep 16 16:25:48 2016 +0900

    cmd/pprof: don't print binary outputs in interactive mode
    
    Some commands generate binary outputs which are not human readable.
    In interactive mode, there are no use-cases for such outputs.
    Instead, the new code writes it to the temporary file on the $CWD and
    shows the file name. So the user can use any program to display the
    file outside interactive shell.
    
    Fixes #17465
    
    Change-Id: I5c479db26017607f7a28eafbff2385533e5c584e
    Reviewed-on: https://go-review.googlesource.com/31123
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 428df5e39c0a696b71724237879a22a718a854a7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Nov 10 22:06:08 2016 -0800

    cmd/go: don't set default GOPATH to GOROOT
    
    It will just cause confusion later as the go tool will say
    "warning: GOPATH set to GOROOT (%s) has no effect".
    Better to just leave GOPATH unset and get that warning instead.
    
    Change-Id: I78ff9e87fdf4bb0460f4f6d6ee76e1becaa3e7b0
    Reviewed-on: https://go-review.googlesource.com/33105
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 66477ec8307e18f751996d92ac8741596a23615a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Nov 10 19:02:07 2016 -0500

    reflect: rename, document TestUnaddressableField
    
    Change-Id: I94e0f3e4bccd44a67934ddb4d5fc7da57bb8ac9f
    Reviewed-on: https://go-review.googlesource.com/33112
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 53aec79ce05cd5eff1c8f5576b553d3c429227c3
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Nov 10 22:08:51 2016 -0800

    cmd/link: for -buildmode=exe pass -no-pie to external linker
    
    On some systems the external linker defaults to PIE. On some systems
    DT_TEXTREL does not work correctly. When both are true we have a bad
    situation: any Go program built with the default buildmode (exe) that
    uses external linking will fail to run. Fix this by passing -no-pie to
    the external linker, if the option is supported.
    
    Fixes #17847.
    
    Change-Id: I9b5ff97825d8b7f494f96d29c4c04f72b53dbf4e
    Reviewed-on: https://go-review.googlesource.com/33106
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 0631f292d370cd838e1fb57e193c6c09e74fe9e4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 11 00:02:45 2016 +0000

    net/http: document relation and interaction with golang.org/x/net/http2
    
    Fixes #16412
    
    Change-Id: Idc65d2a62414a9b1573e6bd9f8601b52985b5dea
    Reviewed-on: https://go-review.googlesource.com/33110
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fb8c896aff9549e868df58f9d40fd06b67ae7d07
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Nov 10 14:34:32 2016 -0800

    cmd/cgo: don't ignore qualifiers, don't cast to void*
    
    The cgo tool used to simply ignore C type qualifiers. To avoid problems
    when a C function expected a qualifier that was not present, cgo emitted
    a cast to void* around all pointer arguments. Unfortunately, that broke
    code that contains both a function declaration and a macro, when the
    macro required the argument to have the right type. To fix this problem,
    don't ignore qualifiers. They are easy enough to handle for the limited
    set of cases that matter for cgo, in which we don't care about array or
    function types.
    
    Fixes #17537.
    
    Change-Id: Ie2988d21db6ee016a3e99b07f53cfb0f1243a020
    Reviewed-on: https://go-review.googlesource.com/33097
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit dc4a815d100b82643656ec88fd9fa8e7c705ebba
Author: Francesc Campoy <campoy@golang.org>
Date:   Mon Oct 31 21:36:38 2016 -0700

    go/build: implement default GOPATH
    
    Whenever GOPATH is not defined in the environment, use $HOME/go
    as its default value. For Windows systems use %USERPROFILE%/go
    and $home/go for plan9.
    
    The choice of these environment variables is based on what Docker
    currently does. The os/user package is not used to avoid having
    a cgo dependency.
    
    Updates #17262. Documentation changes forthcoming.
    
    Change-Id: I6368fbfbc5afda99d6e64c35c1980076fcf45344
    Reviewed-on: https://go-review.googlesource.com/32019
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit ebc0b625a07ccce6ade7a0082f4ab49c2817e965
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Nov 10 16:38:22 2016 -0800

    doc/go1.8.txt: mention that struct conversions ignore tags
    
    Also:
    - update performance improvements for CL 31275.
    
    Change-Id: I2f2ec0a42b248643e76df8654e11bf0b01a5d030
    Reviewed-on: https://go-review.googlesource.com/33114
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit eb4e17b73b4ad486f9e9b0ea0fe2a6050ceb54fc
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Nov 8 13:59:25 2016 -0500

    cmd/link: use plugin path in visibility analysis
    
    CL 32355 switched from using the output file as a
    plugin prefix to the full package path. The linker dead code analysis
    was not updated.
    
    Updates #17821
    
    Change-Id: I13fc45e0264b425d28524ec54c829e2c3e895b0b
    Reviewed-on: https://go-review.googlesource.com/32916
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7bdb77af5fea5b94cf3d5d7840ca9162e76b3e9b
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Nov 10 15:19:11 2016 -0800

    cmd/cgo: don't depend on runtime/cgo if !CgoEnabled
    
    Fixes the build when CGO_ENABLED=0.
    
    Change-Id: I7f3c67d61e156e69536558fda0a0a4b429b82bbd
    Reviewed-on: https://go-review.googlesource.com/33104
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 35ea53dcc8d8350898250e87a0b5ffa03e14173e
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Nov 10 14:40:32 2016 -0800

    cmd/gofmt: don't overwrite read-only files
    
    This reverts the changes from https://golang.org/cl/33018: Instead
    of writing the result of gofmt to a tmp file and then rename that
    to the original (which doesn't preserve the original file's perm
    bits, uid, gid, and possibly other properties because it is hard
    to do in a platform-independent way - see #17869), use the original
    code that simply overwrites the processed file if gofmt was able to
    create a backup first. Upon success, the backup is removed, otherwise
    it remains.
    
    Fixes #17873.
    For #8984.
    
    Change-Id: Ifcf2bf1f84f730e6060f3517d63b45eb16215ae1
    Reviewed-on: https://go-review.googlesource.com/33098
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0457957c991dde4bbdeefb73bc9fb01827298bd9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 23:16:14 2016 +0000

    net/http: update bundled http2 for ErrAbortHandler support, document it more
    
    Updates http2 to x/net/http2 git rev 0e2717d for:
    
       http2: conditionally log stacks from panics in Server Handlers like net/http
       https://golang.org/cl/33102
    
    Fixes #17790
    
    Change-Id: Idd3f0c65540398d41b412a33f1d80de3f7f31409
    Reviewed-on: https://go-review.googlesource.com/33103
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit a501fef3455a8e0ff0424bb29a9403d7539c6164
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 23:03:06 2016 +0000

    net/http: deflake TestClientTimeout
    
    This test was only enabled by default today so it hasn't been hardened
    by build.golang.org. Welcome to the ring, TestClientTimeout.
    
    Change-Id: I1967f6c825699f13f6c659dc14d3c3c22b965272
    Reviewed-on: https://go-review.googlesource.com/33101
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit caa434d28063b4532bc362d50285230597d6d1f6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 21:16:31 2016 +0000

    net/http: update Transport doc example to not disable http2
    
    The old Transport example ended up disabling HTTP/2.
    
    Use a better example.
    
    Fixes #17051
    Fixes #17296
    
    Change-Id: I6feca168744131916e8bf56c829b4d4b50e304ee
    Reviewed-on: https://go-review.googlesource.com/33094
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b20c055230a20663c75e3099f672c15c39d46b9e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 22:53:16 2016 +0000

    net/http: update bundled http2
    
    Updates http2 to x/net/http2 git rev 9ef22118 for:
    
       http2: fix CloseNotify data race
       https://golang.org/cl/33013
    
       http2: don't overflow stream IDs in server push
       https://golang.org/cl/32488
    
       http2: disable server push on receiving a GOAWAY
       https://golang.org/cl/32887
    
       http2: fix state tracking for pushed streams
       https://golang.org/cl/32755
    
    Change-Id: Ie7d675857423c102c9ec164d3c943093c749c7cf
    Reviewed-on: https://go-review.googlesource.com/33100
    Reviewed-by: Tom Bergan <tombergan@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9997545a8626bf1a73002f44a7b7538988da4e76
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 22:49:16 2016 +0000

    net/http: add ErrAbortHandler, make Server quiet if used as panic value
    
    Add an explicit way for Handlers to abort their response to the client
    and also not spam their error log with stack traces.
    
    panic(nil) also worked in the past (for http1 at least), so continue
    to make that work (and test it). But ErrAbortHandler is more explicit.
    
    Updates #17790 (needs http2 updates also)
    
    Change-Id: Ib1456905b27e2ae8cf04c0983dc73e314a4a751e
    Reviewed-on: https://go-review.googlesource.com/33099
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1c54119315d9f3bd9212c01db2fd4653314959e0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 21:35:01 2016 +0000

    net/http: document that Server.Close and Shutdown don't track hijacked conns
    
    Fixes #17721
    
    Change-Id: I19fd81c9909a22b01a4dc9c75f3f0e069c8608ca
    Reviewed-on: https://go-review.googlesource.com/33095
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c9ed065fbb7514a5da52b92575576cf359aead73
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Nov 10 12:49:06 2016 -0800

    debug/elf: SPARC64 relocation type is only 8 bits
    
    https://docs.oracle.com/cd/E53394_01/html/E54813/chapter6-54839.html#OSLLGchapter6-24:
    
    "For 64–bit SPARC Elf64_Rela structures, the r_info field is further
    broken down into an 8–bit type identifier and a 24–bit type dependent
    data field. For the existing relocation types, the data field is
    zero. New relocation types, however, might make use of the data bits.
    
     #define ELF64_R_TYPE_ID(info)         (((Elf64_Xword)(info)<<56)>>56)
    "
    
    No test for this because the only test would be an invalid object file.
    
    Change-Id: I5052ca3bfaf0759e920f9a24a16fd97543b24486
    Reviewed-on: https://go-review.googlesource.com/33091
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 63224cab54055eaf1b3af62f3acaf64ff304316c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 22:12:50 2016 +0000

    net/http: document and deprecate type and errors of type ProtocolError
    
    Clean up & document the ProtocolError gunk.
    
    Fixes #17558
    
    Change-Id: I5e54c25257907c9cac7433f7a5bdfb176e8c3eee
    Reviewed-on: https://go-review.googlesource.com/33096
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 41027cc460b8db8fe2c23fa6fb97eb1ddab44799
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Nov 10 12:58:16 2016 -0800

    cmd/go: remove "x" in TestImportMain
    
    Interestingly, this only became a problem when CL 32850 marked
    TestImportMain as parallel.  Before that, "x" was overwritten and remove
    in a later test, TestGoBuildOutput.  The latter test is not marked as
    parallel, so now it is run first.  It is rather fragile for two tests to
    compete over the same filename, but this change is correct regardless.
    
    Change-Id: I1db7929c0bc20a2fd0cc6a02999bef2dca9e0cc0
    Reviewed-on: https://go-review.googlesource.com/33092
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ab0ae44e91efec4440828406ef1929488a8b1b06
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 20:28:14 2016 +0000

    net/http: fix documentation on Server.TLSNextProto controlling http2
    
    Server.TLSNextProto being nil is necessary but not sufficient but
    http2 being automatically enabled.
    
    Fixes #16588
    
    Change-Id: I5b18690582f9b12ef05b58235e1eaa52483be285
    Reviewed-on: https://go-review.googlesource.com/33090
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 76f12cdaa2be0b96d314762ff5b2e403d1359cd8
Author: Michael Matloob <matloob@golang.org>
Date:   Thu Nov 10 13:31:41 2016 -0500

    runtime/pprof: output CPU profiles in pprof protobuf format
    
    This change buffers the entire profile and converts in one shot
    in the profile writer, and could use more memory than necessary
    to output protocol buffer formatted profiles. It should be
    possible to convert each chunk in a stream (maybe maintaining
    some minimal state to output in the end) which could save on
    memory usage.
    
    Fixes #16093
    
    Change-Id: I946c6a2b044ae644c72c8bb2d3bd82c415b1a847
    Reviewed-on: https://go-review.googlesource.com/33071
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 7448eb4172bfc8f704b9ea39d77d0113a042b9dc
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Tue Nov 1 00:44:48 2016 -0700

    net/http: don't wrap request cancellation errors in timeouts
    
    Based on Filippo Valsorda's https://golang.org/cl/24230
    
    Fixes #16094
    
    Change-Id: Ie39b0834e220f0a0f4fbfb3bbb271e70837718c3
    Reviewed-on: https://go-review.googlesource.com/32478
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 47bdae942242eca4be94989bab485bb1335f354d
Author: Francesc Campoy <campoy@golang.org>
Date:   Mon Nov 7 23:37:21 2016 -0800

    cmd/vet: detect defer resp.Body.Close() before error check
    
    This check detects the code
    
            resp, err := http.Get("http://foo.com")
            defer resp.Body.Close()
            if err != nil {
                    ...
            }
    
    For every call to a function on the net/http package or any method
    on http.Client that returns (*http.Response, error), it checks
    whether the next line is a defer statement that calls on the response.
    
    Fixes #17780.
    
    Change-Id: I9d70edcbfa2bad205bf7f45281597d074c795977
    Reviewed-on: https://go-review.googlesource.com/32911
    Reviewed-by: Rob Pike <r@golang.org>

commit 91135f27415ae582081e59d1b70f77d4d4d58112
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 17:49:19 2016 +0000

    A+C: update for Go 1.8
    
    Add Albert Nigmatzianov (individual CLA)
    Add Alex Browne (individual CLA)
    Add Alex Carol (individual CLA)
    Add Alexander Döring (individual CLA)
    Add Allan Simon (individual CLA)
    Add Alok Menghrajani (individual CLA)
    Add Andreas Auernhammer (individual CLA)
    Add Andreas Litt (individual CLA)
    Add Andrew Pogrebnoy (individual CLA)
    Add Antonio Murdaca (corporate CLA for Red Hat, Inc.)
    Add Atin Malaviya (individual CLA)
    Add Billy Lynch (corporate CLA for Google Inc.)
    Add Blixt (individual CLA)
    Add Boris Nagaev (corporate CLA for Google Inc.)
    Add Braden Bassingthwaite (corporate CLA for Vendasta)
    Add Brian Kennedy (individual CLA)
    Add Bryan Alexander (individual CLA)
    Add Carl Johnson (individual CLA)
    Add Cixtor (individual CLA)
    Add Cyrill Schumacher (individual CLA)
    Add Daniel Martí (individual CLA)
    Add Daria Kolistratova (corporate CLA for Intel Corporation)
    Add David Hubbard (corporate CLA for Google Inc.)
    Add David Stainton (individual CLA)
    Add Deepak Jois (individual CLA)
    Add Denis Nagorny (corporate CLA for Intel Corporation)
    Add Dhaivat Pandit (individual CLA)
    Add Dhananjay Nakrani (corporate CLA for Google Inc.)
    Add Dmitri Popov (individual CLA)
    Add Erik Staab (corporate CLA for Google Inc.)
    Add Ethan Miller (corporate CLA for IBM)
    Add Faiyaz Ahmed (individual CLA)
    Add Fedor Indutny (individual CLA)
    Add Gabriel Russell (individual CLA)
    Add Gareth Paul Jones (individual CLA)
    Add Geoffroy Lorieux (individual CLA)
    Add Gleb Stepanov (individual CLA)
    Add Henrik Hodne (individual CLA)
    Add Ivan Babrou (individual CLA)
    Add Jack Lindamood (corporate CLA for Amazon.com, Inc)
    Add James Clarke (individual CLA)
    Add Jamie Beverly (individual CLA)
    Add Jason Smale (individual CLA)
    Add Jean-Nicolas Moal (individual CLA)
    Add Jeroen Bobbeldijk (individual CLA)
    Add Jim Kingdon (corporate CLA for Bolt)
    Add Jirka Daněk (individual CLA)
    Add Jon Chen (corporate CLA for Amazon.com, Inc)
    Add Joonas Kuorilehto (individual CLA)
    Add Josh Chorlton (individual CLA)
    Add Joshua Boelter (corporate CLA for Intel Corporation)
    Add Justyn Temme (individual CLA)
    Add Kale Blankenship (individual CLA)
    Add LE Manh Cuong (individual CLA)
    Add Luigi Riefolo (individual CLA)
    Add Manfred Touron (individual CLA)
    Add Martin Bertschler (individual CLA)
    Add Martin Hamrle (individual CLA)
    Add Matthew Denton (individual CLA)
    Add Matthieu Hauglustaine (individual CLA)
    Add Michael Darakananda (corporate CLA for Google Inc.)
    Add Mike Appleby (individual CLA)
    Add Mike Houston (individual CLA)
    Add Mike Strosaker (corporate CLA for IBM)
    Add Miroslav Genov (individual CLA)
    Add Momchil Velikov (individual CLA)
    Add Nick Harper (corporate CLA for Google Inc.)
    Add Oleg Vakheta (individual CLA)
    Add Parker Moore (individual CLA)
    Add Prasanna Swaminathan (corporate CLA for MediaMath, Inc)
    Add Radu Berinde (individual CLA)
    Add Ramesh Dharan (corporate CLA for Google Inc.)
    Add Richard Gibson (individual CLA)
    Add Samuel Tan (corporate CLA for Google Inc.)
    Add Samuele Pedroni (individual CLA)
    Add Sarah Adams (corporate CLA for Google Inc.)
    Add Sean Rees (individual CLA)
    Add Simon Rawet (individual CLA)
    Add Sina Siadat (individual CLA)
    Add Song Gao (individual CLA)
    Add Suyash (individual CLA)
    Add Sven Blumenstein (corporate CLA for Google Inc.)
    Add Syohei YOSHIDA (individual CLA)
    Add Terrel Shumway (individual CLA)
    Add Than McIntosh (corporate CLA for Google Inc.)
    Add Thomas de Zeeuw (individual CLA)
    Add Tim Henderson (individual CLA)
    Add Tom Wilkie (corporate CLA for Weaveworks)
    Add Trey Lawrence (individual CLA)
    Add Tristan Ooohry (individual CLA)
    Add Tuo Shan (corporate CLA for Google Inc.)
    Add Victor Chudnovsky (corporate CLA for Google Inc.)
    Add Vitor De Mario (individual CLA)
    Add Vladimir Mihailenco (individual CLA)
    Add Vladimir Stefanovic (individual CLA)
    Add Walter Poupore (corporate CLA for Google Inc.)
    Add Xuyang Kang (individual CLA)
    Add Zev Goldstein (individual CLA)
    
    Updates #12042
    
    Change-Id: I28d63babe225683b88f3f1501e529aed636c9ead
    Reviewed-on: https://go-review.googlesource.com/33028
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d54463f4fc9e6137b31f660afa5a785ba65e1879
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 18:00:10 2016 +0000

    lib/time: update tzdata to 2016i
    
    Fixes #17678
    
    Change-Id: I01d12a827e6106efed1ec024f736c640b86906b4
    Reviewed-on: https://go-review.googlesource.com/33029
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b77bff97c4817656dd3bf49f14d1834c411be084
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Nov 10 09:59:42 2016 -0800

    cmd/go: -ldflags=-linkmode=external requires runtime/cgo
    
    We add runtime/cgo to the list of import paths for various cases that
    imply external linking mode, but before this change we did not add for
    an explicit request of external linking mode. This fixes the case where
    you are using a non-default buildmode that implies a different
    compilation option (for example, -buildmode=pie implies -shared) and the
    runtime/cgo package for that option is stale.
    
    No test, as I'm not sure how to write one. It would require forcing a
    stale runtime/cgo.
    
    Change-Id: Id0409c7274ce67fe15d910baf587d3220cb53d83
    Reviewed-on: https://go-review.googlesource.com/33070
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit a0d2e9699f1cc83a854c52843ff15d07f83bce47
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Nov 9 14:15:59 2016 -0800

    go/printer: don't drop required semi/linebreak after /*-comment
    
    For details, see the issues.
    
    Fixes #11274.
    Fixes #15137.
    
    Change-Id: Ia11e71a054b3195e3007f490418a9c53a7e9cdf1
    Reviewed-on: https://go-review.googlesource.com/33016
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 8cd55615d4d00f48c30dff85d5d5e3f2adce70ce
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 10 16:43:15 2016 +0000

    net/http: fix Server.Close double Lock
    
    Fixes #17878
    
    Change-Id: I062ac514239068c58175c9ee7964b3590f956a82
    Reviewed-on: https://go-review.googlesource.com/33026
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8d0c105407d235c85a163c0cda5bda86e5219c36
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Nov 4 18:22:06 2016 -0400

    reflect: unexported fields are tied to a package
    
    An unexported field of a struct is not visible outside of the package
    that defines it, so the package path is implicitly part of the
    definition of any struct with an unexported field.
    
    Change-Id: I17c6aac822bd0c24188ab8ba1cc406d6b5d82771
    Reviewed-on: https://go-review.googlesource.com/32820
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9e2c3f4c7e78b01d635e16287789913d02807569
Author: Kevin Burke <kev@inburke.com>
Date:   Wed Jun 22 10:00:31 2016 -0700

    sync: add example for Pool
    
    It was a little tricky to figure out how to go from the documentation
    to figuring out the best way to implement a Pool, so I thought I'd
    try to provide a simple example. The implementation is mostly taken
    from the fmt package.
    
    I'm not happy with the verbosity of the calls to WriteString() etc,
    but I wanted to provide a non-trivial example.
    
    Change-Id: Id33a8b6cbf8eb278f71e1f78e20205b436578606
    Reviewed-on: https://go-review.googlesource.com/24371
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 73497c7656fa55ac33bac960ecee806b9b07ae5e
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Nov 9 17:02:33 2016 -0800

    cmd/gofmt: don't leave tmp file if -w failed
    
    Follow-up on https://golang.org/cl/33018.
    
    For #8984.
    
    Change-Id: I6655a5537a60d4ea3ee13029a56a75b150f8c8f8
    Reviewed-on: https://go-review.googlesource.com/33020
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b188b4cc110261a004674df5a4e209cc4894d314
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Nov 9 15:29:41 2016 -0800

    cmd/gofmt: don't eat source if -w fails
    
    Write output to a temp file first and only upon success
    rename that file to source file name.
    
    Fixes #8984.
    
    Change-Id: Ie40e49d2a4eb3c9462fe769ccbf055b4366eceb0
    Reviewed-on: https://go-review.googlesource.com/33018
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit add8028eb9925db0ec9d3d0f95dec65c8cab1d96
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Nov 9 16:11:50 2016 -0800

    go/types: remove unused alias-related testdata files
    
    They interfere with gofmt -w across this directory.
    
    Follow-up on https://go-review.googlesource.com/32819.
    
    For #16339 (comment).
    
    Change-Id: I4298b6117d89517d4fe6addce3942d950d821817
    Reviewed-on: https://go-review.googlesource.com/33019
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 2f2b57853eeccf854e8e47e5f77ff043d34b2a34
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 9 21:35:37 2016 +0000

    net/http: deflake TestIdleConnH2Crash
    
    Fixes #17838
    
    Change-Id: Ifafb4542a0ed6f2e29c9a83e30842e2fc18d6546
    Reviewed-on: https://go-review.googlesource.com/33015
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Tom Bergan <tombergan@google.com>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 22c70f268b30c703856143df848556515a824071
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 9 20:35:46 2016 +0000

    syscall: use 32-bit setuid/setgid syscalls on linux/{386,arm}
    
    Fixes #17092
    
    Change-Id: Ib14e4db13116ebbe4d72c414fb979d27a06d6174
    Reviewed-on: https://go-review.googlesource.com/33011
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 48c6048e554ff4f428aefd41b9345ed5ec634783
Author: Quentin Smith <quentin@golang.org>
Date:   Tue Nov 8 16:47:04 2016 -0500

    encoding/xml: check type when unmarshaling innerxml field
    
    We only support unmarshaling into a string or a []byte, but we
    previously would try (and panic while) setting a slice of a different
    type. The docs say ",innerxml" is ignored if the type is not string or
    []byte, so do that for other slices as well.
    
    Fixes #15600.
    
    Change-Id: Ia64815945a14c3d04a0a45ccf413e38b58a69416
    Reviewed-on: https://go-review.googlesource.com/32919
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 9c2037fbcf1a732f55e29062f3d30ddd21ca36d3
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Nov 8 17:11:18 2016 -0500

    runtime/pprof/internal/protopprof: skip TestTranslateCPUProfileWithSamples if < 2 mappings
    
    A Go binary may only have 1 executable memory region if it has been
    linked using internal linking. This change means that the test will
    be skipped if this is the case, rather than fail.
    
    Fixes #17852.
    
    Change-Id: I59459a0f90ae8963aeb9908e5cb9fb64d7d0e0f4
    Reviewed-on: https://go-review.googlesource.com/32920
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit 60a9bf9f957d48856839873c6dcb699afe7da359
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Nov 8 16:01:56 2016 -0800

    cmd/compile/internal/syntax: fix error handling for Read/Parse calls
    
    - define syntax.Error for cleaner error reporting
    - abort parsing after first error if no error handler is installed
    - make sure to always report the first error, if any
    - document behavior of API calls
    - while at it: rename ReadXXX -> ParseXXX (clearer)
    - adjust cmd/compile noder.go accordingly
    
    Fixes #17774.
    
    Change-Id: I7893eedea454a64acd753e32f7a8bf811ddbb03c
    Reviewed-on: https://go-review.googlesource.com/32950
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ad020477f4dfe731450b6dd3dd15ea43aab0d0f1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Nov 6 11:58:49 2016 -0800

    cmd/cgo: delete unused variable in log statement
    
    visit is just a func, and there's no formatting
    verb for it, and it's on an internal-error path.
    It has been thus many years, unchanged and unexecuted.
    
    Change-Id: I4c2e2673ee9996218c24143bcc3be3eb4abdff25
    Reviewed-on: https://go-review.googlesource.com/32970
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ef462153de8f756a6f214ec24ccc541fe99f58ad
Author: Martin Möhrmann <moehrmann@google.com>
Date:   Wed Nov 9 09:24:50 2016 +0100

    C: add Martin Möhrmann's google.com email (Google CLA)
    
    Change-Id: Ia439c4a3c873ef24f60f8ee54a74f767fdaafd29
    Reviewed-on: https://go-review.googlesource.com/32799
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5af7553f9d8dbba8d798cadf62c10e504f5c3d36
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Nov 8 16:10:26 2016 -0800

    cmd/compile: ensure that knownFormats is up to date
    
    Change-Id: I4febdddfe5be569a8bba0a4cddf52dec7f1be1bf
    Reviewed-on: https://go-review.googlesource.com/32930
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2925427a47f41622f28f84889ad7aade27581144
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 8 01:06:06 2016 +0000

    os: on Windows, don't fix long paths that aren't long
    
    Notably, don't allocate.
    
    Follow-up to https://golang.org/cl/32451 which added long path
    cleaning.
    
    Updates #3358
    
    Change-Id: I89c59cbd660d0a030f31b6acd070fa9f3250683b
    Reviewed-on: https://go-review.googlesource.com/32886
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 76d8e60451c7b51eb7ea362e7ce3f66050864493
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:47 2016 +0200

    cmd/link: add support for GOARCH=mips{,le}
    
    Only internal linking without cgo is supported for now.
    
    Change-Id: I772d2ba496a613c78bee7e93f29e9538e6407bdc
    Reviewed-on: https://go-review.googlesource.com/31481
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit f4c997578ad962074b8e3aaf28dcfaa2f48a8593
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:44 2016 +0200

    cmd/compile: add support for GOARCH=mips{,le}
    
    Change-Id: Ib489dc847787aaab7ba1be96792f885469e346ae
    Reviewed-on: https://go-review.googlesource.com/31479
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 247fc4a98ee7e41bc317ba2245516f279927ae65
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:42 2016 +0200

    cmd/compile/internal/ssa: add support for GOARCH=mips{,le}
    
    Change-Id: I632d4aef7295778ba5018d98bcb06a68bcf07ce1
    Reviewed-on: https://go-review.googlesource.com/31478
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit f72a629dbd6d4ed65cb295b896de214b0f7790d5
Author: Michael Matloob <matloob@golang.org>
Date:   Fri Nov 4 11:27:54 2016 -0400

    runtime/pprof/internal: add package protopprof
    
    This change adds code, originally written by Russ Cox <rsc@golang.org>
    and open-sourced by Google, that converts from the "legacy"
    binary pprof profile format to a struct representation of the
    new protocol buffer pprof profile format.
    
    This code reads the entire binary format for conversion to the
    protobuf format. In a future change, we will update the code
    to incrementally read and convert segments of the binary format,
    so that the entire profile does not need to be stored in memory.
    
    This change also contains contributions by Daria Kolistratova
    <daria.kolistratova@intel.com> from the rolled-back change
    golang.org/cl/30556 adapting the code to be used by the package
    runtime/pprof.
    
    This code also appeared in the change golang.org/cl/32257, which was based
    on Daria Kolistratova's change, but was also rolled back.
    
    Updates #16093
    
    Change-Id: I5c768b1134bc15408d80a3ccc7ed867db9a1c63d
    Reviewed-on: https://go-review.googlesource.com/32811
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 7465bfb1ea1a7ddfec9b267587ee9e6200514f3f
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Mon Oct 31 10:23:50 2016 -0700

    path: document that filepath is recommended to manipulate filename paths
    
    Fixes #17690.
    
    Change-Id: Ifd300980aa4c11498ed7c083d08bcdd23f5b307a
    Reviewed-on: https://go-review.googlesource.com/32423
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 59d5835f144fae0c9e8726ffc7e42663eadef229
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 8 18:23:43 2016 +0000

    doc: add a CL to go1.8.txt mentioned by Alberto Donizetti
    
    Change-Id: I43617e6dfd5b8227a8ef907dc22c00188de87b94
    Reviewed-on: https://go-review.googlesource.com/32915
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b990558162fa038f3651dc0f1821f64b282dda6f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 28 18:03:21 2016 +0000

    doc: reference go1.4-bootstrap-20161024.tar.gz
    
    Updates #16352
    
    Change-Id: I214c87579ef21ced8d0ba94aa170dd7780afec4b
    Reviewed-on: https://go-review.googlesource.com/32312
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f58ce7fe7954bd788072beaf1517303ebb5316eb
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:38 2016 +0200

    cmd/asm: add support for GOARCH=mips{,le}
    
    Change-Id: I6a5256a42f895bb93ac56764e91ade1861c00e04
    Reviewed-on: https://go-review.googlesource.com/31476
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 27a3d30dd09cdd869b1b67f0154fa698bdf8ead2
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 8 17:44:53 2016 +0000

    net/http: deflake TestClientRedirects
    
    Fix another case of a parallel test relying on a global variable
    (DefaultTransport) implicitly.
    
    Use the private Transport already in scope instead. It's closed at the
    end, instead of randomly via another test.
    
    Change-Id: I95e51926177ad19a766cabbb306782ded1bbb59b
    Reviewed-on: https://go-review.googlesource.com/32913
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 41eb9bb993b22979eebffe4eaeeca53db8e7b388
Author: Volodymyr Paprotski <vpaprots@ca.ibm.com>
Date:   Fri Oct 14 16:19:25 2016 -0400

    crypto/elliptic: add s390x assembly implementation of NIST P-256 Curve
    
    A paranoid go at constant time implementation of P256 curve.
    
    This code relies on z13 SIMD instruction set. For zEC12 and below,
    the fallback is the existing P256 implementation. To facilitate this
    fallback mode, I've refactored the code so that implementations can
    be picked at run-time.
    
    Its 'slightly' difficult to grok, but there is ASCII art..
    
    name            old time/op  new time/op  delta
    BaseMultP256     419µs ± 3%    27µs ± 1%  -93.65% (p=0.000 n=10+8)
    ScalarMultP256  1.05ms ±10%  0.09ms ± 1%  -90.94% (p=0.000 n=10+8)
    
    Change-Id: Ic1ded898a2ceab055b1c69570c03179c4b85b177
    Reviewed-on: https://go-review.googlesource.com/31231
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5d28bc58b6524b2043e2864b8de99fb05e7160d5
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:37 2016 +0200

    cmd/internal/obj/mips: add support for GOARCH=mips{,le}
    
    Implements subset of MIPS32(r1) instruction set.
    
    Change-Id: Iba017350f6c2763de05d4d1bc2f123e8eb76d0ff
    Reviewed-on: https://go-review.googlesource.com/31475
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit c41137d2428587b7e6df09952cddabd6441bc4b7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 8 02:25:23 2016 +0000

    syscall: fix name of prlimit parameters
    
    Fixes #17606
    
    Change-Id: I040c7621cef265d44b58f16556e6d58660a2245d
    Reviewed-on: https://go-review.googlesource.com/32889
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3a3f672eda6f720f68950492a85254528ac53dad
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Tue Nov 8 17:46:10 2016 +0530

    os: cleanup directories created by TestLongPath
    
    Add tmpdir as a parameter to the closure otherwise the subsequent
    modifications to tmpdir causes only the last subdirectory to be
    removed.
    
    Additionally, add the missing argument for the t.Fatalf call.
    
    Change-Id: I3df53f9051f7ea40cf3f846d47d9cefe445e9b9d
    Reviewed-on: https://go-review.googlesource.com/32892
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8a2a999311c22079c3b9f2e6fac2bbd38435a7ab
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Nov 7 15:56:41 2016 -0800

    go/types: document that selectors are not recorded in Info.Types
    
    Fixes #11944.
    
    Change-Id: I424ba93725f22fd599e052eb182f9ba2fca8e8bd
    Reviewed-on: https://go-review.googlesource.com/32881
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 248a59447165ebac2779cb54ee2a10c021009d20
Author: Shenghou Ma <minux@golang.org>
Date:   Mon Nov 7 19:08:51 2016 -0500

    doc/devel/release.html: document go1.6.3 doesn't actually support macOS Sierra
    
    Updates #17824.
    
    Change-Id: I73cf89c21b418158c7014c3271cd1103a17a5c86
    Reviewed-on: https://go-review.googlesource.com/32882
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit de847be6a4ca3e5d22c056e09aadc30a0a777a08
Author: Shenghou Ma <minux@golang.org>
Date:   Mon Nov 7 19:16:17 2016 -0500

    doc/go1.8.txt: mention os.Executable addition
    
    Change-Id: Id3d571666b9275e3fa5cb20762afbd391dbcdeba
    Reviewed-on: https://go-review.googlesource.com/32883
    Reviewed-by: Minux Ma <minux@golang.org>

commit 2fc67e71af142bfa1e7662a4fde361f43509d2d7
Author: Shenghou Ma <minux@golang.org>
Date:   Sun Nov 1 04:18:58 2015 -0500

    os: add Executable() (string, error)
    
    // Executable returns the path name for the executable that started
    // the current process. There is no guarantee that the path is still
    // pointing to the correct executable. If a symlink was used to start
    // the process, depending on the operating system, the result might
    // be the symlink or the path it pointed to. If a stable result is
    // needed, path/filepath.EvalSymlinks might help.
    //
    // Executable returns an absolute path unless an error occurred.
    //
    // The main use case is finding resources located relative to an
    // executable.
    //
    // Executable is not supported on nacl or OpenBSD (unless procfs is
    // mounted.)
    func Executable() (string, error) {
            return executable()
    }
    
    Fixes #12773.
    
    Change-Id: I469738d905b12f0b633ea4d88954f8859227a88c
    Reviewed-on: https://go-review.googlesource.com/16551
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 119c30eaf24c3d4f46ba1411f5cddbabb86bd840
Author: Shenghou Ma <minux@golang.org>
Date:   Sun Nov 1 04:17:34 2015 -0500

    internal/syscall/windows: add GetModuleFileName
    
    For os.Executable. Updates #12773.
    
    Change-Id: Iff6593514b7453b6c5e1f20079e35cb4992cc74a
    Reviewed-on: https://go-review.googlesource.com/32877
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a9a1d020ec4a4deb417160a091c0ed41123063bc
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Nov 7 15:57:04 2016 -0500

    cmd/internal/sys, runtime/internal/sys: gofmt
    
    Change-Id: Ice8f3b42194852f7ee8f00f004e80014d1ea119b
    Reviewed-on: https://go-review.googlesource.com/32875
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c2917af6280ea1bcc5ebf85224055ae1a1882af3
Author: Quentin Smith <quentin@golang.org>
Date:   Thu Nov 3 18:45:01 2016 -0400

    cmd/go: handle escapes in pkg-config output
    
    This commit also adds a test for pkg-config usage in cgo.
    
    Fixes #16455.
    
    Change-Id: I95fb6a288a4d19093c4613c93878017d95cbe4a2
    Reviewed-on: https://go-review.googlesource.com/32735
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 47d1c42aff6bb84a654cc69b1dbc42f855b03415
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Nov 7 15:40:48 2016 -0500

    crypto/tls: use default cipher suites in BenchmarkThroughput
    
    CL 32871 updated the default cipher suites to use AES-GCM in
    preference to ChaCha20-Poly1305 on platforms which have hardware
    implementations of AES-GCM. This change makes BenchmarkThroughput
    use the default cipher suites instead of the test cipher suites to
    ensure that the recommended (fastest) algorithms are used.
    
    Updates #17779.
    
    Change-Id: Ib551223e4a00b5ea197d4d73748e1fdd8a47c32d
    Reviewed-on: https://go-review.googlesource.com/32838
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>

commit 1a279b34f674369c05694bd2d8e493ec2d3bba97
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Nov 7 11:20:48 2016 -0800

    go/constant: follow-up for https://go-review.googlesource.com/32870
    
    For #17812.
    
    Change-Id: I58411aaa0e8b2250a16ddb20c951e39da3d601e8
    Reviewed-on: https://go-review.googlesource.com/32872
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 231aa9d6d7e942ac43130356ba3554972251f015
Author: Quentin Smith <quentin@golang.org>
Date:   Fri Oct 28 13:01:51 2016 -0400

    os: use extended-length paths on Windows when possible
    
    Windows has a limit of 260 characters on normal paths, but it's possible
    to use longer paths by using "extended-length paths" that begin with
    `\\?\`. This commit attempts to transparently convert an absolute path
    to an extended-length path, following the subtly different rules those
    paths require. It does not attempt to handle relative paths, which
    continue to be passed to the operating system unmodified.
    
    This adds a new test, TestLongPath, to the os package. This test makes
    sure that it is possible to write a path at least 400 characters long
    and runs on every platform. It also tests symlinks and hardlinks, though
    symlinks are not testable with our builder configuration.
    
    HasLink is moved to internal/testenv so it can be used by multiple tests.
    
    https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx
    has Microsoft's documentation on extended-length paths.
    
    Fixes #3358.
    Fixes #10577.
    Fixes #17500.
    
    Change-Id: I4ff6bb2ef9c9a4468d383d98379f65cf9c448218
    Reviewed-on: https://go-review.googlesource.com/32451
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 2058511e4e5966a7d482beb6033c68e324aa09ac
Author: Shenghou Ma <minux@golang.org>
Date:   Sun Nov 1 04:16:52 2015 -0500

    runtime: os.Executable runtime support for Darwin
    
    Change-Id: Ie21df37016c90cd0479c23ec4845f8195dd90fda
    Reviewed-on: https://go-review.googlesource.com/16518
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f335fcf0fc297b9d1318fb21fa608a7ebc751b3e
Author: Shenghou Ma <minux@golang.org>
Date:   Sun Nov 1 04:18:26 2015 -0500

    syscall: add Getexecname on Solaris for os.Executable
    
    Change-Id: Icd77ccbfe6a31117a11effb949b5826950df75a9
    Reviewed-on: https://go-review.googlesource.com/16550
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a9ce0f96e1f2ab69ce3319c5a97c1d01beb9472c
Author: Adam Langley <agl@golang.org>
Date:   Mon Nov 7 10:25:57 2016 -0800

    crypto/{cipher,tls,internal/cryptohw}: prioritise AES-GCM when hardware support is present.
    
    Support for ChaCha20-Poly1305 ciphers was recently added to crypto/tls.
    These ciphers are preferable in software, but they cannot beat hardware
    support for AES-GCM, if present.
    
    This change moves detection for hardware AES-GCM support into
    cipher/internal/cipherhw so that it can be used from crypto/tls. Then,
    when AES-GCM hardware is present, the AES-GCM cipher suites are
    prioritised by default in crypto/tls. (Some servers, such as Google,
    respect the client's preference between AES-GCM and ChaCha20-Poly1305.)
    
    Fixes #17779.
    
    Change-Id: I50de2be486f0b0b8052c4628d3e3205a1d54a646
    Reviewed-on: https://go-review.googlesource.com/32871
    Run-TryBot: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9e4a70e8fd3e6fed93fcd6159228b3a8ecae1d80
Author: Quentin Smith <quentin@golang.org>
Date:   Tue Oct 25 15:41:14 2016 -0400

    mime/multipart: test for overreading on a stream
    
    Some multipart data arrives in a stream, where subsequent parts may not
    be ready yet. Read should return a complete part as soon as
    possible.
    
    Fixes #15431
    
    Change-Id: Ie8c041b853f3e07f0f2a66fbf4bcab5fe9132a7c
    Reviewed-on: https://go-review.googlesource.com/32032
    Run-TryBot: Quentin Smith <quentin@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 44febb28b626695e2daa693b1aa9ad7e516518e3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 7 01:21:15 2016 +0000

    cmd/go: parallelize some tests
    
    Cuts tests from 35 to 25 seconds.
    
    Many of these could be parallel if the test runner were modified to
    give each test its own workdir cloned from the tempdir files they
    use. But later. This helps for now.
    
    Updates #17751
    
    Change-Id: Icc2ff87cca60a33ec5fd8abb1eb0a9ca3e85bf95
    Reviewed-on: https://go-review.googlesource.com/32850
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4eb9832724e94d04cd737ac2554cf02a79d87f23
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Nov 7 10:43:25 2016 -0800

    go/constant: improved fatal error messages
    
    Fixes #17812.
    
    Change-Id: I08202165dd3f72ae04420e7b6129b8b689e74f5c
    Reviewed-on: https://go-review.googlesource.com/32870
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 9d139ac3fa1f4c0c468042bdc6248a30044fb1bb
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Nov 6 10:35:58 2016 -0800

    unsafe: remove incorrect type conversion in docs
    
    Fixes #17818.
    
    Change-Id: Id7242b0bdd5e1db254b44ae29900fc4f3362c743
    Reviewed-on: https://go-review.googlesource.com/32828
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f815499fab5f650f3eba12d48c53ec01d1362265
Author: Joe Farrell <joe2farrell@gmail.com>
Date:   Mon Nov 7 18:43:13 2016 +0000

    doc: fix broken links in 1.7 release docs
    
    Change-Id: Ibf73ee7be4591393f4e08d464edfa325c3ec2c11
    Reviewed-on: https://go-review.googlesource.com/32798
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4cc83d49d2a69bb9d348cb32d71ca34651aec3b5
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Nov 7 11:50:48 2016 -0500

    cmd/dist: enable more cgo tests on ppc64le
    
    The tests all pass (for me at least) so I don't think there is any
    reason not to enable them.
    
    Change-Id: I96e71383e573273f442a849914cf6458ada14f82
    Reviewed-on: https://go-review.googlesource.com/32855
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6c2a35ae0c29306b53a4a5925627ee7235a8c450
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Nov 7 11:08:36 2016 -0500

    test/fixedbugs: enable issue 10607 test on ppc64le
    
    ppc64le supports both internal and external linking so I don't
    think there is any reason for it to skip this test.
    
    Change-Id: I05c80cc25909c0364f0a1fb7d20766b011ea1ebb
    Reviewed-on: https://go-review.googlesource.com/32854
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ec77b8e09cace7338ebc39faadd599e5cb676295
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Fri Nov 4 14:53:59 2016 -0500

    cmd/link: don't use trampolines in ppc64le ext linking
    
    On ppc64x, trampolines are used to resolve too-far
    branches for internal linking.  The external linking,
    solution on ppc64x is to split text sections when they
    get too large, allowing the external linker to handle
    the long branches.
    
    On arm trampolines are generanted for too-far branches
    for internal and external linking.  When the change
    was made recently to enable trampolines for external linking
    on arm, that broke the ppc64x fix for too-far branches
    with external linking.
    
    The fix adds a check to use trampolines only for internal
    linking with ppc64x.
    
    Fixes #17795
    
    Change-Id: Icce968fb96545f10a913e07654514643bce96261
    Reviewed-on: https://go-review.googlesource.com/32853
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 3df059ece5d4c575abdf61b4b955f0ba292e5168
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 7 04:05:18 2016 +0000

    net/http/fcgi: fix link to protocol docs
    
    Fixes #17815
    
    Change-Id: I766082d28a14c77f5dfb6cd1974b86cb0a8fe31a
    Reviewed-on: https://go-review.googlesource.com/32852
    Reviewed-by: Minux Ma <minux@golang.org>

commit f8187ceacf886195dc9f72a6578bd266efc52681
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Sun Nov 6 18:43:49 2016 +1100

    runtime/race: allow TestFail to run longer than 0.00s
    
    Fixes #17811
    
    Change-Id: I7bf9cbc5245417047ad28a14d9b9ad6592607d3d
    Reviewed-on: https://go-review.googlesource.com/32774
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e0178025978470e9f7b5fa9365891d20db809a7c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 4 19:12:09 2016 +0000

    cmd/vet: parallelize tests
    
    Was 2.3 seconds. Now 1.4 seconds.
    
    Next win would be not running a child process and refactoring main so
    it could be called from tests easily. But that would also require
    rewriting the errchk written in Perl. This appears to be the last user
    of errchk in the tree.
    
    Updates #17751
    
    Change-Id: Id7c3cec76f438590789b994e756f55b5397be07f
    Reviewed-on: https://go-review.googlesource.com/32754
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 2b445c76453ee79d02ea50f50f619d8f7250fa87
Author: Robert Griesemer <gri@golang.org>
Date:   Sat Nov 5 13:14:23 2016 -0700

    go/constant: document that BinaryOp doesn't handle comparisons or shifts
    
    Fixes #17797.
    
    Change-Id: I544df81c4bcf3cbd36a793be40050f14f9a9974f
    Reviewed-on: https://go-review.googlesource.com/32761
    Reviewed-by: Dominik Honnef <dominik@honnef.co>

commit d0cf0421717a93b705efcbce0770a24361582445
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Nov 5 10:05:27 2016 -0700

    net: fix vet nit
    
    net/fd_windows.go:121: syscall.WSABuf composite literal uses unkeyed fields
    
    Change-Id: I91cbe38199d5b6828379a854d08f6ceaf687dd82
    Reviewed-on: https://go-review.googlesource.com/32760
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f9d406ebeaa0af42d2a88bab498a44a91c6c03ee
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Nov 5 00:25:38 2016 +0000

    net/http: deflake TestLinuxSendfile
    
    Fixes #17805
    
    Change-Id: I30d3e63a82b3690a76f2bb33d59ae34c62a7fa59
    Reviewed-on: https://go-review.googlesource.com/32759
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 276c29ff6da13ef7089075d8cd2172fe3d3956fb
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Nov 5 00:21:59 2016 +0000

    net/http: deflake TestClientRedirectTypes and maybe some similar ones
    
    A few tests were using the global DefaultTransport implicitly.
    Be explicit instead. And then make some parallel while I'm there.
    
    Change-Id: I3c617e75429ecc8f6d23567d1470f5e5d0cb7cfd
    Reviewed-on: https://go-review.googlesource.com/32758
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 65269e7066c0e97532bf0fd082e95cf8444ee378
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 16:37:24 2016 -0700

    cmd/go/internal/syntax: reintroduce reverted comments
    
    These comments were originally introduced together with the changes
    for alias declarations, and then reverted when we backed out alias
    support.
    
    Reintroduce them.
    
    Change-Id: I3ef2c4f4672d6af8a900f5d73df273edf28d1a14
    Reviewed-on: https://go-review.googlesource.com/32826
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 429edcff1049899cef4e3c5cb4b473e13a31d85c
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 16:27:31 2016 -0700

    Revert "cmd/compile/internal/syntax: support for alias declarations"
    
    This reverts commit 32db3f2756324616b7c856ac9501deccc2491239.
    
    Reason: Decision to back out current alias implementation.
    
    For #16339.
    
    Change-Id: Ib05e3d96041d8347e49cae292f66bec791a1fdc8
    Reviewed-on: https://go-review.googlesource.com/32825
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a1a688fa0012f7ce3a37e9ac0070461fe8e3f28e
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 16:11:48 2016 -0700

    Revert "go/scanner, go/token: recognize => (ALIAS) token"
    
    This reverts commit 776a90100f1f65fcf54dfd3d082d657341bdc323.
    
    Reason: Decision to back out current alias implementation.
    
    For #16339.
    
    Change-Id: Icb451a122c661ded05d9293356b466fa72b965f3
    Reviewed-on: https://go-review.googlesource.com/32824
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 2808f1f41583ef9943b1d7426d7affa6cfc998ba
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 16:04:11 2016 -0700

    Revert "go/ast, go/parser: parse alias declarations"
    
    This reverts commit 57ae83307fc4cb90338b39dcc6fe3c61ee8ce0b7.
    
    Reason: Decision to back out current alias implementation.
    
    For #16339.
    
    Change-Id: I7bcc04ac87ea3590999e58ff65a7f2e1e6c6bc77
    Reviewed-on: https://go-review.googlesource.com/32823
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c350c5cfdc5a6ed1a135c06517ef29cdd716a935
Author: Leon Klingele <git@leonklingele.de>
Date:   Sat Nov 5 00:57:45 2016 +0100

    plugin: fix doc example fmt usage
    
    Change-Id: I0520a37a48a56d231a8ac2dc58b2bf1762282760
    Reviewed-on: https://go-review.googlesource.com/32795
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7179c1acd967daea44fb806865e57308ea0c3679
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 15:59:48 2016 -0700

    Revert "go/printer: support for printing alias declarations"
    
    This reverts commit 59c63c711c73f3872c3047c2e80debba5ff1b802.
    
    Reason: Decision to back out current alias implementation.
    
    For #16339.
    
    Change-Id: Idd135fe84b7ce4814cb3632f717736fc6985634c
    Reviewed-on: https://go-review.googlesource.com/32822
    Reviewed-by: Chris Manghane <cmang@golang.org>

commit 26e43779f119683e8571ec109a7bf502ebe95d9a
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 17:01:34 2016 -0700

    Revert "cmd/vet: teach vet about ast.AliasSpec"
    
    This reverts commit aa8c8e770e6db895405b66d38867c2368d94024a.
    
    Reason: Decision to back out current alias implementation.
    
    For #16339.
    
    Change-Id: I4db9a8d6b3625c794be9d2f1ff0e9c047f383d28
    Reviewed-on: https://go-review.googlesource.com/32827
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Chris Manghane <cmang@golang.org>

commit 8e970536dfe0b8ce74bfd0e83ae608c4a012d3c6
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 15:48:39 2016 -0700

    cmd/compile: revert user-visible changes related to aliases
    
    Reason: Decision to back out current alias implementation.
    
    Leaving import/export related code in place for now.
    
    For #16339.
    
    TBR=mdempsky
    
    Change-Id: Ib0897cab2c1c3dc8a541f2efb9893271b0b0efe2
    Reviewed-on: https://go-review.googlesource.com/32757
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit dd1e7b3be0f64438e58f956bfb989608c7fa61bc
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 2 14:45:27 2016 -0700

    crypto/x509: update __MAC_OS_X_VERSION_MAX_ALLOWED on Mac
    
    Reportedly, -mmacosx-version-min=10.6 -D__MAC_OS_X_VERSION_MAX_ALLOWED=1060
    is problematic.
    
    It means min 10.6 and max 10.6, thus exactly 10.6. But we only support
    10.8+.
    
    It never caused us problems, because we build on Macs, but apparently
    if you cross-compile from Linux with some Mac compiler SDK thing, then
    things break?
    
    This was added in https://golang.org/cl/5700083 for #3131, and the
    intent at the time was to pin to exactly 10.6. So it wasn't a mistake,
    but it is definitely outdated.
    
    Given that we now support 10.8 as the min, update it to 1080.
    
    Fixes #17732
    
    Change-Id: I6cc8ab6ac62b8638a5025952b830f23e8822b2a6
    Reviewed-on: https://go-review.googlesource.com/32580
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 039e60ce4e0763f5c67e11227858a4d508df1299
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 15:01:09 2016 -0700

    go/types: revert user-visible changes related to aliases
    
    Reason: Decision to back out current alias implementation.
    For #16339 (comment).
    
    Change-Id: Ie04f24e529db2d29c5dd2e36413f5f37f628df39
    Reviewed-on: https://go-review.googlesource.com/32819
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 2c6949ec89817caecbb441422fe1d6729ee16462
Author: Alan Donovan <adonovan@google.com>
Date:   Fri Nov 4 17:11:51 2016 -0400

    go/types: avoid redundant call to recordUse for anonymous fields
    
    Anonymous fields are type expressions, and Checker.typexpr already
    correctly records uses within them.  There's no need for a second
    call, and the second call caused a bug when we implemented aliases.
    
    Change-Id: I1bf2429cd4948d68b085e75dfb1bdc03ad8caffd
    Reviewed-on: https://go-review.googlesource.com/32837
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit cfd89164bb6af2d1a660b75ded8c0801372924e2
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Nov 4 16:30:12 2016 -0400

    all: make copyright headers consistent with one space after period
    
    Continuation of CL 20111.
    
    Change-Id: Ie2f62237e6ec316989c021de9b267cc9d6ee6676
    Reviewed-on: https://go-review.googlesource.com/32830
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7f033933ce8488ff3c7510ec35680510f9ccc83b
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:40 2016 +0200

    cmd/compile/internal/gc: add support for GOARCH=mips{,le}
    
    Change-Id: Ida4cd647525abce3441bfcb9fdee059344fe717f
    Reviewed-on: https://go-review.googlesource.com/31477
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 87f4e36ce7d7dffbf1f2a869f3014321f6cfff3c
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Nov 4 12:38:53 2016 -0700

    Revert "spec: add new language for alias declarations"
    
    This reverts commit aff37662d1f70f2bf9e47b4f962e85521e7c18d1.
    
    Reason: Decision to back out current alias implementation.
    https://github.com/golang/go/issues/16339#issuecomment-258527920
    
    Fixes #16339.
    Fixes #17746.
    Fixes #17784.
    
    Change-Id: I5737b830d7f6fb79cf36f26403b4ad8533ba1dfe
    Reviewed-on: https://go-review.googlesource.com/32813
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 585a0b03b243e1847b3028bc0f2e77bb3688adba
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:45 2016 +0200

    cmd/link/internal/ld: add support for GOARCH=mips{,le}
    
    Change-Id: Ida214ccc5858969ea60abb0787f4d98bab4336d6
    Reviewed-on: https://go-review.googlesource.com/31480
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 5bfafff03f42df38c3088c266ca23d57c9fc3342
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:51:11 2016 +0200

    cmd/vet: add support for GOARCH=mips{,le}
    
    Change-Id: Ie7b40cc67e9901e252a4a48225bbd745a66d2673
    Reviewed-on: https://go-review.googlesource.com/31511
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 23416315060bf7601e5779c3a6a2529d4d604584
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 4 05:28:01 2016 +0000

    all: sprinkle t.Parallel on some slow tests
    
    I used the slowtests.go tool as described in
    https://golang.org/cl/32684 on packages that stood out.
    
    go test -short std drops from ~56 to ~52 seconds.
    
    This isn't a huge win, but it was mostly an exercise.
    
    Updates #17751
    
    Change-Id: I9f3402e36a038d71e662d06ce2c1d52f6c4b674d
    Reviewed-on: https://go-review.googlesource.com/32751
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3f69909851813006216f49083932badee396c4f1
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:51:12 2016 +0200

    test: disable unsupported test for GOARCH=mips{,le}
    
    External linking on mips/mipsle is not supported yet (issue #17792).
    
    Change-Id: Ic25f4f8fe9e0ec35c72ca9f85c053b398df4952c
    Reviewed-on: https://go-review.googlesource.com/31512
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 04d71354eb54b62e9fc520a2fbff8dd76a5782d0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Nov 4 06:43:48 2016 -0700

    runtime: remove useless assignment in test code
    
    Change-Id: I5fecdf52e9e3035ea8feb5768985ed5200dbd6af
    Reviewed-on: https://go-review.googlesource.com/32752
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Martin Möhrmann <martisch@uos.de>

commit d62b31386338364b3f319337ca0a1e511c6f23f7
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Thu Nov 3 21:17:45 2016 -0700

    net/http: move extra redirect logic for 307/308 into redirectBehavior
    
    Follow up of CL https://go-review.googlesource.com/32595.
    
    Change-Id: I2b3ff7e6b2c764bb6bc5e9aa692d0aed79eb5626
    Reviewed-on: https://go-review.googlesource.com/32750
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cd670a61c193e6717400c6cc130484d6ad97c96b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 4 03:23:37 2016 +0000

    net/http: speed up tests, use t.Parallel when it's safe
    
    Before: 8.9 seconds for go test -short
     After: 2.8 seconds
    
    There are still 250 tests without t.Parallel, but I got the important
    onces using a script:
    
        $ go test -short -v 2>&1 | go run ~/slowtests.go
    
    Where slowtests.go is https://play.golang.org/p/9mh5Wg1nLN
    
    The remaining 250 (the output lines from slowtests.go) all have a
    reported duration of 0ms, except one 50ms test which has to be serial.
    
    Where tests can't be parallel, I left a comment at the top saying why,
    so people don't add t.Parallel later and get surprised at failures.
    
    Updates #17751
    
    Change-Id: Icbe32cbe2b996e23c89f1af6339287fa22af5115
    Reviewed-on: https://go-review.googlesource.com/32684
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9f5859759eccebb5d0e9d3ef4de1db41d66b41ac
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Nov 3 19:20:27 2016 -0700

    cmd/go: fix minor typo in 'go bug'
    
    Change-Id: I6bb594576e174cb0df8d25d11b84f5a4752ebfd6
    Reviewed-on: https://go-review.googlesource.com/32683
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b5c0470c8d819e0f8a3accbb5a614d47b8ce0c7c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Nov 4 03:33:44 2016 +0000

    net/http: fix type name in comment
    
    Change-Id: Ia03f993287d2929f35b4c92d00fe25c7243bd8b3
    Reviewed-on: https://go-review.googlesource.com/32685
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 3440c7bc4c238e1d75d728536ca8f5efe883dbe6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 3 20:53:05 2016 +0000

    net/http: tweak the new Client 307/308 redirect behavior a bit
    
    This CL tweaks the new (unreleased) 307/308 support added in
    https://golang.org/cl/29852 for #10767.
    
    Change 1: if a 307/308 response doesn't have a Location header in its
    response (as observed in the wild in #17773), just do what we used to
    do in Go 1.7 and earlier, and don't try to follow that redirect.
    
    Change 2: don't follow a 307/308 if we sent a body on the first
    request and the caller's Request.GetBody func is nil so we can't
    "rewind" the body to send it again.
    
    Updates #17773 (will be fixed more elsewhere)
    
    Change-Id: I183570f7346917828a4b6f7f1773094122a30406
    Reviewed-on: https://go-review.googlesource.com/32595
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6e269256264599a49739ad1145bac3845e94ead4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Nov 2 22:56:10 2016 -0700

    cmd/objdump: speed up tests
    
    Rebuild cmd/objdump once instead of twice.
    Speeds up standalone 'go test cmd/objdump' on my
    machine from ~1.4s to ~1s.
    
    Updates #17751
    
    Change-Id: I15fd79cf18c310f892bc28a9e9ca47ee010c989a
    Reviewed-on: https://go-review.googlesource.com/32673
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3797446150ecc7adbc4e6f9a6315214264ac11f9
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Nov 3 15:58:55 2016 -0700

    cmd/compile: prevent Noalg from breaking user types
    
    Use a separate symbol for reflect metadata for types with Noalg set.
    
    Fixes #17752.
    
    Change-Id: Icb6cade7e3004fc4108f67df61105dc4085cd7e2
    Reviewed-on: https://go-review.googlesource.com/32679
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fa770016484165d65200243811f177f1332a9e94
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:25 2016 +0200

    runtime/internal/sys: add arch defs for GOARCH=mips{,le}
    
    Change-Id: I6288f1fca1ae4c64b3907af700811ee842053020
    Reviewed-on: https://go-review.googlesource.com/31472
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 66fdf433b09c72e29b7e5bb5238ec9b3cf745479
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:29 2016 +0200

    cmd/internal/sys: add support for GOARCH=mips{,le}
    
    Change-Id: I8c6b8839c68818430510702719dca15b8d748fb8
    Reviewed-on: https://go-review.googlesource.com/31473
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c408266e2861513eac79d999f7553dc93992a965
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:59 2016 +0200

    internal/syscall/unix: add randomTrap const for GOARCH=mips{,le}
    
    Change-Id: I76c62a7b79ea526f59f281e933e4fd431539d2da
    Reviewed-on: https://go-review.googlesource.com/31486
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit d3a3b74aa1eec3417a754d798a4cad487949fa77
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Wed Aug 31 16:58:56 2016 +0200

    runtime: 8-byte align the heap_live field for atomic access
    
    mheap_.heap_live is an atomically accessed uint64. It is currently not 8-byte
    aligned on 32-bit platforms, which has been okay because it's only accessed via
    Xadd64, which doesn't require alignment on 386 or ARM32. However, Xadd64 on
    MIPS32 does require 8-byte alignment.
    
    Add a padding field to force 8-byte alignment of heap_live and prevent an
    alignment check crash on MIPS32.
    
    Change-Id: I7eddf7883aec7a0a7e0525af5d58ed4338a401d0
    Reviewed-on: https://go-review.googlesource.com/31635
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 58e3bf11fb8af887a97a7329edfffb1126ba5fee
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:51:03 2016 +0200

    syscall: add support for GOARCH=mips{,le}
    
    Change-Id: I39a46b2a9412981db1780b688a86fec791f68b6f
    Reviewed-on: https://go-review.googlesource.com/31488
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit ad366fdbe40eea7f4fbdc75e8a27304c696793f1
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 3 22:45:06 2016 +0000

    cmd/dist: add mips and mipsle as GOARCH values
    
    Change-Id: I7a51d5d96a7cb87c40ade5be276136c465010bb9
    Reviewed-on: https://go-review.googlesource.com/32596
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 1a07257777ba49231fbf8b81bc6efe34b8422fec
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:57 2016 +0200

    reflect: add support for GOARCH=mips{,le}
    
    Change-Id: I8b0c4bfe1e4c401d5c36a51b937671e6362c73a4
    Reviewed-on: https://go-review.googlesource.com/31485
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 3f2b85a8d14cb0435a84501ac9f25d80d6129348
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:54 2016 +0200

    cmd/cgo: add support for GOARCH=mips{,le}
    
    Change-Id: I47c6867fc653c8388ad32e210a8027baa592eda3
    Reviewed-on: https://go-review.googlesource.com/31483
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d1e9104fb25a71aa459ee329452545a0ceebdcf9
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:55 2016 +0200

    math, math/big: add support for GOARCH=mips{,le}
    
    Change-Id: I54e100cced5b49674937fb87d1e0f585f962aeb7
    Reviewed-on: https://go-review.googlesource.com/31484
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 9788e3d4d72792da22a12e54f8a86e25a03b58ab
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:51:06 2016 +0200

    sync/atomic: add support for GOARCH=mips{,le}
    
    Change-Id: I10f36710dd95b9bd31b3b82a3c32edcadb90ffa9
    Reviewed-on: https://go-review.googlesource.com/31510
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit b241a06479864b85c2377e52b775b176f686e192
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:51:04 2016 +0200

    runtime/internal/atomic: add GOARCH=mips{,le} support
    
    Change-Id: I99a48f719fd1a8178fc59787084a074e91c89ac6
    Reviewed-on: https://go-review.googlesource.com/31489
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 2c39e50995bb02325b2c17f253b10f5ada0e337f
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:50:48 2016 +0200

    debug/elf: add support for GOARCH=mips{,le}
    
    Change-Id: Ia6f8ae7e56a49ad66b60a24c4afb606f3cfe5efd
    Reviewed-on: https://go-review.googlesource.com/31482
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 26827bc2fe4c80dc68b3793631d24975425c9467
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Oct 22 07:25:21 2016 -0700

    testing: add T.Context method
    
    From the doc comment:
    
    Context returns the context for the current test or benchmark.
    The context is cancelled when the test or benchmark finishes.
    A goroutine started during a test or benchmark can wait for the
    context's Done channel to become readable as a signal that the
    test or benchmark is over, so that the goroutine can exit.
    
    Fixes #16221.
    Fixes #17552.
    
    Change-Id: I657df946be2c90048cc74615436c77c7d9d1226c
    Reviewed-on: https://go-review.googlesource.com/31724
    Reviewed-by: Rob Pike <r@golang.org>

commit 606f81eef37e5a232f43a208f6eeaddd82dadf34
Author: Russ Cox <rsc@golang.org>
Date:   Thu Nov 3 15:01:30 2016 -0400

    context: adjust tests to avoid importing "testing" in package context
    
    So that testing can use context in its public API.
    
    For #16221.
    
    Change-Id: I6263fa7266c336c9490f20164ce79336df44a57e
    Reviewed-on: https://go-review.googlesource.com/32648
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2b59b15f6b7e6fa6ac725367acff5aef7c666e36
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Wed Sep 21 23:11:28 2016 -0700

    encoding/json: example on MarshalJSON, UnmarshalJSON
    
    Updates #16360.
    
    Change-Id: I5bf13d3367e68c5d8435f6ef2161d5a74cc747a7
    Reviewed-on: https://go-review.googlesource.com/29611
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 43f954e09858449cc5f3650720e81b7e879ab349
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 21:40:47 2016 -0400

    testing: mark tests and benchmarks failed if a race occurs during execution
    
    Before:
    
    $ go test -race -v -run TestRace
    === RUN   TestRace
    ==================
    WARNING: DATA RACE
    Write at 0x00c420076420 by goroutine 7:
      _/Users/rsc/go/src/cmd/go/testdata/src/testrace.TestRace.func1()
          /Users/rsc/go/src/cmd/go/testdata/src/testrace/race_test.go:10 +0x3b
    
    Previous write at 0x00c420076420 by goroutine 6:
      _/Users/rsc/go/src/cmd/go/testdata/src/testrace.TestRace()
          /Users/rsc/go/src/cmd/go/testdata/src/testrace/race_test.go:13 +0xcc
      testing.tRunner()
          /Users/rsc/go/src/testing/testing.go:656 +0x104
    
    Goroutine 7 (running) created at:
      _/Users/rsc/go/src/cmd/go/testdata/src/testrace.TestRace()
          /Users/rsc/go/src/cmd/go/testdata/src/testrace/race_test.go:12 +0xbb
      testing.tRunner()
          /Users/rsc/go/src/testing/testing.go:656 +0x104
    
    Goroutine 6 (running) created at:
      testing.(*T).Run()
          /Users/rsc/go/src/testing/testing.go:693 +0x536
      testing.runTests.func1()
          /Users/rsc/go/src/testing/testing.go:877 +0xaa
      testing.tRunner()
          /Users/rsc/go/src/testing/testing.go:656 +0x104
      testing.runTests()
          /Users/rsc/go/src/testing/testing.go:883 +0x4ac
      testing.(*M).Run()
          /Users/rsc/go/src/testing/testing.go:818 +0x1c3
      main.main()
          _/Users/rsc/go/src/cmd/go/testdata/src/testrace/_test/_testmain.go:42 +0x20f
    ==================
    --- PASS: TestRace (0.00s)
    PASS
    Found 1 data race(s)
    FAIL    _/Users/rsc/go/src/cmd/go/testdata/src/testrace 1.026s
    $
    
    After:
    
    $ go test -race -v -run TestRace
    === RUN   TestRace
    ==================
    WARNING: DATA RACE
    Write at 0x00c420076420 by goroutine 7:
      _/Users/rsc/go/src/cmd/go/testdata/src/testrace.TestRace.func1()
          /Users/rsc/go/src/cmd/go/testdata/src/testrace/race_test.go:10 +0x3b
    
    Previous write at 0x00c420076420 by goroutine 6:
      _/Users/rsc/go/src/cmd/go/testdata/src/testrace.TestRace()
          /Users/rsc/go/src/cmd/go/testdata/src/testrace/race_test.go:13 +0xcc
      testing.tRunner()
          /Users/rsc/go/src/testing/testing.go:656 +0x104
    
    Goroutine 7 (running) created at:
      _/Users/rsc/go/src/cmd/go/testdata/src/testrace.TestRace()
          /Users/rsc/go/src/cmd/go/testdata/src/testrace/race_test.go:12 +0xbb
      testing.tRunner()
          /Users/rsc/go/src/testing/testing.go:656 +0x104
    
    Goroutine 6 (running) created at:
      testing.(*T).Run()
          /Users/rsc/go/src/testing/testing.go:693 +0x536
      testing.runTests.func1()
          /Users/rsc/go/src/testing/testing.go:877 +0xaa
      testing.tRunner()
          /Users/rsc/go/src/testing/testing.go:656 +0x104
      testing.runTests()
          /Users/rsc/go/src/testing/testing.go:883 +0x4ac
      testing.(*M).Run()
          /Users/rsc/go/src/testing/testing.go:818 +0x1c3
      main.main()
          _/Users/rsc/go/src/cmd/go/testdata/src/testrace/_test/_testmain.go:42 +0x20f
    ==================
    --- FAIL: TestRace (0.00s)
            testing.go:609: race detected during execution of test
    FAIL
    FAIL    _/Users/rsc/go/src/cmd/go/testdata/src/testrace 0.022s
    $
    
    Fixes #15972.
    
    Change-Id: Idb15b8ab81d65637bb535c7e275595ca4a6e450e
    Reviewed-on: https://go-review.googlesource.com/32615
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f3862742b67a84edf939f41276360ada4e7197a6
Author: Dan Harrington <harringtond@google.com>
Date:   Tue Oct 25 12:51:39 2016 -0700

    net/http: support If-Match in ServeContent
    
    - Added support for If-Match and If-Unmodified-Since.
    - Precondition checks now more strictly follow RFC 7232 section 6, which
    affects precedence when multiple condition headers are present.
    - When serving a 304, Last-Modified header is now removed when no ETag is
    present (as suggested by RFC 7232 section 4.1).
    - If-None-Match supports multiple ETags.
    - ETag comparison now correctly handles weak ETags.
    
    Fixes #17572
    
    Change-Id: I35039dea6811480ccf2889f8ed9c6a39ce34bfff
    Reviewed-on: https://go-review.googlesource.com/32014
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 18f0e88103aaa429e92564312b4ee966dcb77102
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Nov 3 10:47:44 2016 -0700

    go/internal/gcimporter: backport changes from x/tools/go/gcimporter15
    
    See https://go-review.googlesource.com/32581.
    
    This makes x/tools/go/gcimporter15/bimport.go a close copy again
    and the importer more robust.
    
    Change-Id: If96ad6acd611878b7dfa6a13d005d847ece82ab6
    Reviewed-on: https://go-review.googlesource.com/32647
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 322436b78c2b0a8dd346f460df6fc00f49adba8e
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Thu Nov 3 22:25:42 2016 +0530

    cmd/compile: don't panic if syntax.ReadFile returns an error
    
    Fixes #17772
    
    Change-Id: I0f2094400c454828aa57a8d172dadeac4ddb6d35
    Reviewed-on: https://go-review.googlesource.com/32691
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4141054d19f6d5bcdc448be00a6ce4a4c864d488
Author: David Chase <drchase@google.com>
Date:   Thu Nov 3 11:50:14 2016 -0400

    runtime/cgo: correct type declaration for Windows
    
    Newer versions of gcc notice a type mismatch and complain.
    Fix code to match documented signature in MSDN.
    Trybots say this still compiles with the older (5.1) version
    of gcc.
    
    Fixes #17771.
    
    Change-Id: Ib3fe6f71b40751e1146249e31232da5ac69b9e00
    Reviewed-on: https://go-review.googlesource.com/32646
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b89135777be7c2f123dbf2eea3c92a5402e4c63c
Author: Russ Cox <rsc@golang.org>
Date:   Thu Nov 3 09:39:32 2016 -0400

    crypto/x509: expose UnknownAuthorityError.Cert
    
    This matches exposing CertificateInvalidError.Cert.
    and (exposing but not the spelling of) HostnameError.Certificate.
    
    Fixes #13519.
    
    Change-Id: Ifae9a09e063d642c09de3cdee8a728ff06d3a5df
    Reviewed-on: https://go-review.googlesource.com/32644
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b2290229c23fed8e4a63241568e436b1daa1196f
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 19:41:01 2016 -0400

    cmd/cgo: add #line directives to avoid printing bogus references to Go source files
    
    A bit contrived to come up with an example, but it happened in #15836, somehow.
    
            $ cat /tmp/x.go
            package main
    
            /*
            #include <stddef.h>
    
            int foo(void);
    
            int foo(void) {
                    return 2;
            }
    
            #define int asdf
            */
            import "C"
    
            func main() {
                    println(C.foo())
            }
    
            $ go run /tmp/x.go
            # command-line-arguments
            cgo-builtin-prolog:9:31: error: unknown type name 'asdf'   <<<<<
            _GoString_ GoStringN(char *p, int l);
                                          ^
            /tmp/x.go:12:13: note: expanded from macro 'int'
            #define int asdf
                        ^
            cgo-builtin-prolog:10:28: error: unknown type name 'asdf'  <<<<<
            _GoBytes_ GoBytes(void *p, int n);
                                       ^
            /tmp/x.go:12:13: note: expanded from macro 'int'
            #define int asdf
                        ^
            2 errors generated.
    
    The two marked lines used to refer incorrectly to /tmp/x.go.
    
    Fixes #15836.
    
    Change-Id: I08ef60a53cfd148112fceb651eaf7b75d94a7a8d
    Reviewed-on: https://go-review.googlesource.com/32613
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a4a4d43028ba20ecec50ef761012d17800553cde
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 20:18:47 2016 -0400

    cmd/cover: change covered block for switch/select case to exclude expression
    
    Consider a switch like
    
            switch x {
            case foo:
                    f()
                    g()
            }
    
    Before, the coverage annotation for the block calling f and g included
    in its position span the text for 'case foo:'. This looks nice in the coverage
    report, but it breaks the invariant that coverage blocks are disjoint if
    you have a more complex expression like:
    
            switch x {
            case func() int { return foo }():
                    f()
                    g()
            }
    
    Then the coverage analysis wants to annotate the func literal body,
    which overlaps with the case body, because the case body is considered
    to begin at the case token.
    
    Change the annotation for a case body to start just after the colon of
    the case clause, avoiding any potential conflict with complex case
    expressions. Could have started at the colon instead, but it seemed
    less weird to start just after it.
    
    Fixes #16540.
    
    Change-Id: I1fec4bc2a53c7092e649dc0d4be1680a697cb79b
    Reviewed-on: https://go-review.googlesource.com/32612
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 95e809f0e525fca000ec634e1e8cc10d6cebdf30
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 23:12:10 2016 -0400

    cmd/go: clear GIT_ALLOW_PROTOCOL during tests
    
    Clear it before any tests begin.
    Clear it again after TestIsSecureGitAllowProtocol sets it.
    
    Fixes #17700.
    
    Change-Id: I6ea50d37f8222d8c7c9fee0b1eac3bbdfb5d133e
    Reviewed-on: https://go-review.googlesource.com/32640
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit a35decf5a7a722acb32642b6a096271d10545376
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 23:18:54 2016 -0400

    cmd/go: fix TestIssue11457
    
    The goal of the test is to provoke a custom import path check error,
    which will contain the current repo path, to see that it says ssh:// in it.
    
    But the fix to #16471 made the test no longer provoke that error.
    Provoke the error by checking out from rsc.io instead of github.com/rsc.
    
    Fixes #17701.
    
    Change-Id: I750ffda2ff59c2be8e111d26160997214a73fd9a
    Reviewed-on: https://go-review.googlesource.com/32641
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5f9fb1ce0293c3d5bc2b0fd81ad7e0aaafd414f0
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 23:22:18 2016 -0400

    cmd/go: remove .o and .a files in builder.collect
    
    This matches the removal of .so files and makes the processing
    of '-L/path/to -lfoo' and plain '/path/to/foo.a' match.
    
    Fixes #16463.
    
    Change-Id: I1464c5390d7eb6a3a33b4b2c951f87ef392ec94a
    Reviewed-on: https://go-review.googlesource.com/32642
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 23e6e1124522267655b05a5f47f62fc99f0e56c3
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 12:18:00 2016 -0400

    encoding/asn1: document that default:x tag only has meaning with optional tag
    
    Fixes #16712.
    
    Change-Id: Ib216059c6c0c952162c19e080dcf3799f0652a8d
    Reviewed-on: https://go-review.googlesource.com/32171
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit ced137fad48ad18518cdd4ed3a77e75d5e58c78c
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 16:33:33 2016 -0400

    misc/cgo/testsanitizers: skip tests when vm.overcommit_memory=2
    
    Fixes #17689.
    
    Change-Id: I45a14e6bf4b2647431105f3e0b63b7076b6655d2
    Reviewed-on: https://go-review.googlesource.com/32635
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3345802e8ac39e4ea6b2772ace15983f2c3be66b
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 17:19:42 2016 -0400

    time: document that only Jan and January, Mon and Monday are recognized
    
    Not "J", not "JAN", not "jan", etc.
    
    Fixes #17523.
    
    Change-Id: I16b5da97e73d88c6680c36401d30f8a195061527
    Reviewed-on: https://go-review.googlesource.com/32636
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 1c08c728dceeb63f6df915831bd0584be1517e00
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 21:15:41 2016 -0400

    cmd/go: fix coverage in xtest of cgo package
    
    Cover-annotated cgo-rebuilt package for xtest was
    not linked into package graph and so not being rebuilt.
    Link into package graph.
    
    Fixes #13625.
    
    Change-Id: I685f7276f92bbc85fbc4b389111c83d9fe517637
    Reviewed-on: https://go-review.googlesource.com/32614
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3ce46e3e9c25d6234f49ab483300e538c65089d0
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 21:52:27 2016 -0400

    cmd/go: fix TestGoGetDashTIssue8181
    
    The test case was importing golang.org/x/build/cmd/cl,
    which is a package main and cannot be imported.
    The test case (stored in a separate repo) has been changed
    to import golang.org/x/build/gerrit. Update the test accordingly.
    
    Fixes #17702.
    
    Change-Id: I80e150092111b5a04bb00c992b32edb271edb086
    Reviewed-on: https://go-review.googlesource.com/32616
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9efcdd4e694789646e7de79dfbd8c7636803785a
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 23:01:20 2016 -0400

    cmd/go: use new HTTP-only server insecure.go-get-issue-15410.appspot.com instead of wh3rd.net
    
    Fixes #15410.
    
    Change-Id: I9964d0162a3cae690afeb889b1822cf79c80b89a
    Reviewed-on: https://go-review.googlesource.com/32639
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit f4f6b647500438eaff21e36f48ea4399727c41bd
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Nov 2 20:34:29 2016 -0700

    cmd/compile: update/remove outdated comments
    
    Change-Id: I5a74be1593dca8ba5e0829f0bae35dc9ce702671
    Reviewed-on: https://go-review.googlesource.com/32672
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 21c114e930fc1b118c2b8b8716d7b1b3b38027e0
Author: Quentin Smith <quentin@golang.org>
Date:   Wed Nov 2 16:18:22 2016 -0400

    runtime/testdata/testprog: increase GCFairness2 timeout to 1s
    
    OpenBSD's scheduler causes preemption to take 20+ms, so 30ms is not
    enough time for 3 goroutines to run. This change continues to sleep for
    30ms, but if it finds that the 3 goroutines have not run, it sleeps for
    an additional 1s before declaring failure.
    
    Updates #17712
    
    Change-Id: I3e886e40d05192b7cb71b4f242af195836ef62a8
    Reviewed-on: https://go-review.googlesource.com/32634
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e83911d6fc05c0ccb11bd95cf60694f8aec1698a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Nov 2 18:16:51 2016 -0700

    cmd/vet/all: add s390x support
    
    Some of these whitelist entries could be
    eliminated, e.g. by the addition of Go
    declarations, but this is a start.
    
    Change-Id: I2fb3234cf05ebc6b161aacac2d4c15d810d50527
    Reviewed-on: https://go-review.googlesource.com/32671
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 62dafbb4c6cd51332b2e0519eb4267c7a03da446
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Nov 2 19:02:43 2016 -0700

    runtime: fix s390x asm frame sizes
    
    Found by vet.
    
    Change-Id: I1d78454facdd3522509ecfe7c73b21c4602ced8a
    Reviewed-on: https://go-review.googlesource.com/32670
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 7f4c3e87106a367babb6662b2d1e3b485e0d07af
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Nov 2 19:02:15 2016 -0700

    all: update s390x assembly to use vet-friendly names
    
    No functional changes.
    
    Change-Id: Ibf592c04be506a76577d48574e84ab20c3238b49
    Reviewed-on: https://go-review.googlesource.com/32589
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit a3aaa189a484e18cad30391b7b5a70d04bc3cbe3
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Thu Nov 3 19:53:27 2016 +0530

    cmd/go: run mkalldocs.sh
    
    Follow-up to CL 32114
    
    Change-Id: I75247ed9c1c0a0e8a278eb75a60d4c5bee355409
    Reviewed-on: https://go-review.googlesource.com/32690
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fc2e282c04a3c36761254eb662bb20bad4eb4a35
Author: Russ Cox <rsc@golang.org>
Date:   Wed Nov 2 23:31:08 2016 -0400

    cmd/go: add version of GOROOT to go bug details
    
    Fixes #15877.
    
    Change-Id: Ia1e327c0cea3be43e5f8ba637c97c223cee4bb5a
    Reviewed-on: https://go-review.googlesource.com/32643
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 89ccd5795c5e41ef478eab3d4a292a836a7fe3ad
Author: Russ Cox <rsc@golang.org>
Date:   Thu Nov 3 09:13:16 2016 -0400

    cmd/pprof: use correct default handler for Go programs
    
    The original go tool pprof (written in Perl) got this right.
    The Go rewrite never has, but should.
    
    Change-Id: Ie1fc571214c61b1b5654a0bc90e15eb889adf059
    Reviewed-on: https://go-review.googlesource.com/32617
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8eb9fdaa0123fc98cb70f58801eb74c8a6f92817
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Sep 24 08:39:31 2016 +1000

    cmd/compile: write type symbols referenced in ptabs
    
    The exported symbol for a plugin can be the only reference to a
    type in a program. In particular, "var F func()" will have
    the type *func(), which is uncommon.
    
    Fixes #17140
    
    Change-Id: Ide2104edbf087565f5377374057ae54e0c00c57e
    Reviewed-on: https://go-review.googlesource.com/29692
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 5ac3e7d6a7717bf2f722803e1852ba991af4e724
Author: David du Colombier <0intro@gmail.com>
Date:   Thu Nov 3 11:50:45 2016 +0100

    net: disallow dialing and listening on port > 65535 on Plan 9
    
    Since Dial(":80") was implemented on Plan 9 (CL 32593),
    TestProtocolDialError is failing because dialing a port
    superior to 65535 is supported on Plan 9.
    
    This change disallows dialing and listening on ports
    superior to 65535.
    
    Fixes #17761.
    
    Change-Id: I95e8a163eeacf1ccd8ece7b650f16a0531c59709
    Reviewed-on: https://go-review.googlesource.com/32594
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 97b49f660cbb37ff6789dbb92b1a6ded394d3d7d
Author: David du Colombier <0intro@gmail.com>
Date:   Thu Nov 3 14:57:05 2016 +0100

    net: fix Dial(":80") on Plan 9
    
    CL 32101 fixed Dial(":80") on Windows and added TestDialLocal,
    which was failing on Plan 9, because it wasn't implemented
    on Plan 9.
    
    This change implements Dial(":80") by connecting to 127.0.0.1
    or ::1 (depending on network), so it works as documented.
    
    Fixes #17760.
    
    Change-Id: If0ff769299e09bebce11fc3708639c1d8c96c280
    Reviewed-on: https://go-review.googlesource.com/32593
    Reviewed-by: Russ Cox <rsc@golang.org>

commit aa8c8e770e6db895405b66d38867c2368d94024a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Nov 2 18:25:57 2016 -0700

    cmd/vet: teach vet about ast.AliasSpec
    
    Fixes #17755
    
    Change-Id: I1ad1edc382b1312d992963054eb82648cb5112d2
    Reviewed-on: https://go-review.googlesource.com/32588
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 10f757486e94f60a5e0af180dcd61c9eef7534c6
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Thu Oct 27 16:58:45 2016 +0300

    cmd/compile/internal/ssa: generate bswap on AMD64
    
    Generate bswap+load/store for reading/writing big endian data.
    Helps encoding/binary.
    
    name                    old time/op    new time/op    delta
    ReadSlice1000Int32s-8     5.06µs ± 8%    4.58µs ± 8%   -9.50%        (p=0.000 n=10+10)
    ReadStruct-8              1.07µs ± 0%    1.05µs ± 0%   -1.51%         (p=0.000 n=9+10)
    ReadInts-8                 367ns ± 0%     363ns ± 0%   -1.15%          (p=0.000 n=8+9)
    WriteInts-8                475ns ± 1%     469ns ± 0%   -1.45%        (p=0.000 n=10+10)
    WriteSlice1000Int32s-8    5.03µs ± 3%    4.50µs ± 3%  -10.45%          (p=0.000 n=9+9)
    PutUvarint32-8            17.2ns ± 0%    17.2ns ± 0%     ~     (all samples are equal)
    PutUvarint64-8            46.7ns ± 0%    46.7ns ± 0%     ~           (p=0.509 n=10+10)
    
    name                    old speed      new speed      delta
    ReadSlice1000Int32s-8    791MB/s ± 8%   875MB/s ± 8%  +10.53%        (p=0.000 n=10+10)
    ReadStruct-8            70.0MB/s ± 0%  71.1MB/s ± 0%   +1.54%         (p=0.000 n=9+10)
    ReadInts-8              81.6MB/s ± 0%  82.6MB/s ± 0%   +1.21%          (p=0.000 n=9+9)
    WriteInts-8             63.0MB/s ± 1%  63.9MB/s ± 0%   +1.45%        (p=0.000 n=10+10)
    WriteSlice1000Int32s-8   796MB/s ± 4%   888MB/s ± 3%  +11.65%          (p=0.000 n=9+9)
    PutUvarint32-8           233MB/s ± 0%   233MB/s ± 0%     ~           (p=0.089 n=10+10)
    PutUvarint64-8           171MB/s ± 0%   171MB/s ± 0%     ~            (p=0.137 n=10+9)
    
    Change-Id: Ia2dbdef92198eaa7e2af5443a8ed586d4b401ffb
    Reviewed-on: https://go-review.googlesource.com/32222
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit ca5cea9dca0bc635b9a23cfe65226f3e1a423342
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Nov 2 17:55:53 2016 -0700

    cmd/compile: add OMOD to list of ops that might panic
    
    Follow-up to CL 32551.
    
    Change-Id: If68f9581a7f13e04796aaff2007c09f8ea2c3611
    Reviewed-on: https://go-review.googlesource.com/32586
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 154d013155978ba9c714d931f0e91c9c964dd82c
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Fri Oct 21 09:00:07 2016 +0900

    encoding/asn1: return error for unexported fields in Marshal, Unmarshal
    
    The old code cannot handle unexported fields, it panics.
    The new code returns error instead.
    
    Fixes #17462
    
    Change-Id: I927fc46b21d60e86cb52e84c65f2122f9159b21d
    Reviewed-on: https://go-review.googlesource.com/31540
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit be7c50a7101a6e3cbd39648814c9f1030980c0f6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 3 01:11:49 2016 +0000

    net/http: deflake TestServerSetKeepAlivesEnabledClosesConns
    
    Fixes #17754
    Updates #9478 (details in here)
    
    Change-Id: Iae2c1ca05a18ed266b53b2594c22fc57fab33c5e
    Reviewed-on: https://go-review.googlesource.com/32587
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 66504485ebd8d7a75b68c025cc15835b016a1ae4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Nov 2 17:55:29 2016 -0700

    cmd/compile/internal/gc: make tests run faster
    
    TestAssembly takes 20s on my machine,
    which is too slow for normal operation.
    Marking as -short has its dangers (#17472),
    but hopefully we'll soon have a builder for that.
    
    All the SSA tests are hermetic and not time sensitive
    and can thus be run in parallel.
    Reduces the cmd/compile/internal/gc test time during
    all.bash on my laptop from 42s to 7s.
    
    Updates #17751
    
    Change-Id: Idd876421db23b9fa3475e8a9b3355a5dc92a5a29
    Reviewed-on: https://go-review.googlesource.com/32585
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 827f2accc1a25b77003303d3c35db5fc054bf8f1
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Nov 3 00:44:16 2016 +0000

    net/http: update bundled http2 to fix test flake
    
    Updates http2 to x/net/http2 git rev 569280fa for:
    
       http2: fix over-aggressive ignoring of frames while in "go away" mode
       https://golang.org/cl/32583
    
    Fixes #17733
    
    Change-Id: I4008d2e14ce89782ce7e18b441b1181f98623b9d
    Reviewed-on: https://go-review.googlesource.com/32584
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 627f4d85ba4fa71e5af11ee047ba42196cea1f2c
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Nov 2 14:54:46 2016 -0700

    go/types: set up correct type with NewAlias
    
    Change-Id: I4b035b3539c98e5b1442d1009d457cbc199b42ee
    Reviewed-on: https://go-review.googlesource.com/32637
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 5513f855f6e627606f0b516c4a16ae32d82d99fd
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Nov 2 13:43:57 2016 -0400

    cmd/vet: add test case for ppc64{,le}
    
    Adapted from the mips64 test case.
    
    Fixes #17745.
    
    Change-Id: I46f0900028adb936dcab2cdc701ea11d0a3cb95e
    Reviewed-on: https://go-review.googlesource.com/32611
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Rob Pike <r@golang.org>

commit cf28e5cc9d51928ae05df0b193edc7e39a28c413
Author: Keith Randall <khr@golang.org>
Date:   Tue Nov 1 15:28:10 2016 -0700

    cmd/compile: compute faulting args before writing args to stack
    
    when compiling f(a, b, c), we do something like:
      *(SP+0) = eval(a)
      *(SP+8) = eval(b)
      *(SP+16) = eval(c)
      call f
    
    If one of those evaluations is later determined to unconditionally panic
    (say eval(b) in this example), then the call is deadcode eliminated. But
    any previous argument write (*(SP+0)=... here) is still around. Becuase
    we only compute the size of the outarg area for calls which are still
    around at the end of optimization, the space needed for *(SP+0)=v is not
    accounted for and thus the outarg area may be too small.
    
    The fix is to make sure that we evaluate any potentially panicing
    operation before we write any of the args to the stack. It turns out
    that fix is pretty easy, as we already have such a mechanism available
    for function args. We just need to extend it to possibly panicing args
    as well.
    
    The resulting code (if b and c can panic, but a can't) is:
      tmpb = eval(b)
      *(SP+16) = eval(c)
      *(SP+0) = eval(a)
      *(SP+8) = tmpb
      call f
    
    This change tickled a bug in how we find the arguments for intrinsic
    calls, so that latent bug is fixed up as well.
    
    Update #16760.
    
    Change-Id: I0bf5edf370220f82bc036cf2085ecc24f356d166
    Reviewed-on: https://go-review.googlesource.com/32551
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 688995d1e91fcc36ac33bf34d6303e935d1b0a70
Author: Keith Randall <khr@golang.org>
Date:   Fri Oct 28 11:37:45 2016 -0700

    cmd/compile: do more type conversion inline
    
    The code to do the conversion is smaller than the
    call to the runtime.
    The 1-result asserts need to call panic if they fail, but that
    code is out of line.
    
    The only conversions left in the runtime are those which
    might allocate and those which might need to generate an itab.
    
    Given the following types:
      type E interface{}
      type I interface { foo() }
      type I2 iterface { foo(); bar() }
      type Big [10]int
      func (b Big) foo() { ... }
    
    This CL inlines the following conversions:
    
    was assertE2T
      var e E = ...
      b := i.(Big)
    was assertE2T2
      var e E = ...
      b, ok := i.(Big)
    was assertI2T
      var i I = ...
      b := i.(Big)
    was assertI2T2
      var i I = ...
      b, ok := i.(Big)
    was assertI2E
      var i I = ...
      e := i.(E)
    was assertI2E2
      var i I = ...
      e, ok := i.(E)
    
    These are the remaining runtime calls:
    
    convT2E:
      var b Big = ...
      var e E = b
    convT2I:
      var b Big = ...
      var i I = b
    convI2I:
      var i2 I2 = ...
      var i I = i2
    assertE2I:
      var e E = ...
      i := e.(I)
    assertE2I2:
      var e E = ...
      i, ok := e.(I)
    assertI2I:
      var i I = ...
      i2 := i.(I2)
    assertI2I2:
      var i I = ...
      i2, ok := i.(I2)
    
    Fixes #17405
    Fixes #8422
    
    Change-Id: Ida2367bf8ce3cd2c6bb599a1814f1d275afabe21
    Reviewed-on: https://go-review.googlesource.com/32313
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 761443edd56832cc1b62f9193f157ca822dfa09e
Author: Keith Randall <khr@golang.org>
Date:   Mon Oct 31 21:18:00 2016 -0700

    cmd/compile: On a runtime.KeepAlive call, keep whole variable alive
    
    We generate an OpKeepAlive for the idata portion of the interface
    for a runtime.KeepAlive call.  But given such an op, we need to keep
    the entire containing variable alive, not just the range that was
    passed to the OpKeepAlive operation.
    
    Fixes #17710
    
    Change-Id: I90de66ec8065e22fb09bcf9722999ddda289ae6e
    Reviewed-on: https://go-review.googlesource.com/32477
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 09bb6434f9a8681b81a667e1ff186c61bbe0a50f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Nov 2 19:48:35 2016 +0000

    net/http: update bundled http2
    
    Update bundled x/net/http2 to x/net git rev 6c4ac8bd for:
    
       http2: fix Transport race sending RST_STREAM while reading DATA on cancels
       https://golang.org/cl/32571
    
       http2: remove h2-14 ALPN proto
       https://golang.org/cl/32576
    
    Fixes #16974
    
    Change-Id: I6ff8493a13d2641499fedf33e8005004735352ff
    Reviewed-on: https://go-review.googlesource.com/32578
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2d3cd51dbe5b5266b9baf68fb42ea19fedf4d23e
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Thu Oct 27 16:23:53 2016 -0700

    archive/tar: disable prefix field in Writer
    
    The proper fix for the Writer is too involved to be done in time
    for Go 1.8. Instead, we do a localized fix that simply disables the
    prefix encoding logic. While this will prevent some legitimate uses
    of prefix, it will ensure that we don't keep outputting invalid
    GNU format files that have the prefix field populated.
    
    For headers with long filenames that could have used the prefix field,
    they will be promoted to use the PAX format, which ensures that we
    will still be able to encode all headers that we were able to do before.
    
    Updates #12594
    Fixes #17630
    Fixes #9683
    
    Change-Id: Ia97b524ac69865390e2ae8bb0dfb664d40a05add
    Reviewed-on: https://go-review.googlesource.com/32234
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit eed2bb71d235e2c8b6d6eae57af83fbff23d420e
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Nov 2 13:11:56 2016 -0400

    cmd/vet: fix go vet on s390x assembly
    
    Test adapted from the mips64 test.
    
    Fixes #15454.
    
    Change-Id: If890c2d18a4a03a08faaa2e674edd7223af60290
    Reviewed-on: https://go-review.googlesource.com/22472
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bcc0247331a77015053d3fa28f458d0c639d6730
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Nov 2 09:47:43 2016 -0700

    cmd/compile: avoid double export of aliased objects
    
    Instead of writing out the original object for each alias, ensure we
    export the original object before any aliases. This allows the aliases
    to simply refer back to the original object by qualified name.
    
    Fixes #17636.
    
    Change-Id: If80fa8c66b8fee8344a00b55d25a8aef22abd859
    Reviewed-on: https://go-review.googlesource.com/32575
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 1a0b1cca4c26d41fe7508ffdb355de78b4ea2a19
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 21:07:52 2016 -0400

    net: fix Dial(":80") on Windows
    
    Windows sockets allow bind to 0.0.0.0:80 but not connect to it.
    To make Listen(":80") / Dial(":80") work as documented on Windows,
    connect to 127.0.0.1 or ::1 (depending on network) in place of 0.0.0.0.
    
    Fixes #6290.
    
    Change-Id: Ia27537067276871648546678fbe0f1b8478329fe
    Reviewed-on: https://go-review.googlesource.com/32101
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit c56cc9b3b5727647c2afb3d57f5793151558a0a7
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 31 19:27:26 2016 -0400

    testing: introduce testing/internal/testdeps for holding testmain dependencies
    
    Currently, we don't have package testing to import package regexp directly,
    because then regexp can't have internal tests (or at least they become more
    difficult to write), for fear of an import cycle. The solution we've been using
    is for the generated test main package (pseudo-import path "testmain", package main)
    to import regexp and pass in a matchString function for use by testing when
    implementing the -run flags. This lets testing use regexp but without depending
    on regexp and creating unnecessary cycles.
    
    We want to add a few dependencies to runtime/pprof, notably regexp
    but also compress/gzip, without causing those packages to have to work
    hard to write internal tests.
    
    Restructure the (dare I say it) dependency injection of regexp.MatchString
    to be more general, and use it for the runtime/pprof functionality in addition
    to the regexp functionality. The new package testing/internal/testdeps is
    the root for the testing dependencies handled this way.
    
    Code using testing.MainStart will have to change from passing in a matchString
    implementation to passing in testdeps.TestDeps{}. Users of 'go test' don't do this,
    but other build systems that have recreated 'go test' (for example, Blaze/Bazel)
    may need to be updated. The new testdeps setup should make future updates
    unnecessary, but even so we keep the comment about MainStart not being
    subject to Go 1 compatibility.
    
    Change-Id: Iec821d2afde10c79f95f3b23de5e71b219f47b92
    Reviewed-on: https://go-review.googlesource.com/32455
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5ad3bd99b5f997c55fa7c3d01eeeddc835631ba0
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 31 14:16:53 2016 -0400

    api: sort except.txt
    
    Make it easier to find lines and update the file.
    
    Change-Id: I9db78ffd7316fbc17c5488e178e23777756d8f47
    Reviewed-on: https://go-review.googlesource.com/32454
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d5b97f614eb02399f7b4ed6615fae094362d151d
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 31 12:09:03 2016 -0400

    cmd/pprof: move cmd/internal/pprof back to cmd/pprof/internal
    
    CL 21870 moved the entire cmd/pprof/internal directory to cmd/internal/pprof
    for use by cmd/trace, but really cmd/trace only needed cmd/pprof/internal/profile,
    which became cmd/internal/pprof/profile, and then internal/pprof/profile.
    
    Move the rest back under cmd/pprof so that it is clear that no other code
    is reaching into the guts of cmd/pprof. Just like functions should not be
    exported unless necessary, internals should not be made visible to more
    code than necessary.
    
    Raúl Silvera noted after the commit of CL 21870 that only the profile package
    should have moved, but there was no followup fix (until now).
    
    Change-Id: I603f4dcb0616df1e5d5eb7372e6fccda57e05079
    Reviewed-on: https://go-review.googlesource.com/32453
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 682ffae6db749ba63df4b8bc1739974346bb14d7
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 31 12:07:13 2016 -0400

    internal/pprof/profile: new package, moved from cmd/internal/pprof/profile
    
    This allows both the runtime and the cmd/pprof code to use the package,
    just like we do for internal/trace.
    
    Change-Id: I7606977284e1def36c9647354c58e7c1e93dba6b
    Reviewed-on: https://go-review.googlesource.com/32452
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 53cc69170ae1a96163d3b6c14467e85dc8aa7266
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Nov 2 11:41:40 2016 -0400

    bytes, strings: update s390x code to match amd64 changes
    
    Updates the s390x-specific files in these packages with the changes
    to the amd64-specific files made during the review of CL 31690. I'd
    like to keep these files in sync unless there is a reason to
    diverge.
    
    Change-Id: Id83e5ce11a45f877bdcc991d02b14416d1a2d8d2
    Reviewed-on: https://go-review.googlesource.com/32574
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 235f2c72e95d486b530b45e1f2a48fb629260504
Author: Jan Mercl <0xjnml@gmail.com>
Date:   Wed Nov 2 11:23:05 2016 +0100

    go1.8.txt: Add CL 25345.
    
    Change-Id: I436528a4f81634448a60b1183d1b65a3bf4f48c1
    Reviewed-on: https://go-review.googlesource.com/32590
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 47c1715ba5ea7d5ecc9eff846f448d8a3b62808d
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Nov 2 09:10:29 2016 -0400

    runtime: address comments from CL 32357
    
    Change-Id: I174d7307bfdd8ec57bb4266dab8569fd2234abb4
    Reviewed-on: https://go-review.googlesource.com/32610
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7bf0fc9fc392acee87bcdb4b1e474e342cb70f92
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 1 12:06:22 2016 -0700

    cmd/go: use cgo -srcdir when using SWIG
    
    SWIG generates cgo input files in the work directory. When those files
    are passed directly to cgo, cgo generates long file names that include
    the object directory (with slashes replaced by underscores). Instead,
    use cgo's new -srcdir option to give it short file names.
    
    When using both SWIG and cgo, copy the cgo files into the object
    directory first.
    
    Use a shorter object file name when compiling the C file generated by
    SWIG.
    
    Fixes #17070.
    
    Change-Id: Ic558603f1731636d9999f3130ad0224b24bd7dcb
    Reviewed-on: https://go-review.googlesource.com/32485
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit e22b5efb36e5977590d760c98db9f3fabaea7202
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Sat Oct 29 18:37:49 2016 +1100

    net: implement Buffers on windows
    
    Updates #13451
    
    Change-Id: I2c3c66d9532c16e616c476e2afe31b3ddc0a8d79
    Reviewed-on: https://go-review.googlesource.com/32371
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit c57a443e8777de0f34444dd512fbcb099e7b3e29
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 1 16:44:18 2016 -0700

    doc: update go1.8.txt
    
    Automated update after manual classification using x/build/cmd/writenotes.
    
    Change-Id: Ie92f501d301c1e2245954439da197812c09c1684
    Reviewed-on: https://go-review.googlesource.com/32570
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 689947d5652e51980fbfc7b350871fe2baa06a74
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 1 14:13:34 2016 -0700

    cmd/cgo: only record typedef name for pointer to struct
    
    In a function argument, we handle a typedef for a pointer specially,
    using the pointer type rather than the typedef, to permit the Go calls
    to match the laxer type conversions permitted in C. We record the
    typedef so that we use that type in the C code, in case it has a special
    attribute. However, using the typedef is wrong when using a pointer to a
    basic type, because the C code may sometimes use the typedef and
    sometimes not, and using the typedef in all cases will cause incorrect
    type errors on the Go side. Fortunately we only really need to use the
    typedef when pointing to a struct/union/class, and in such a case
    confusion is unlikely.
    
    Fixes #17723.
    
    Change-Id: Id2eaeb156faeaf2e8eb9cf0b8f95b44caf8cfbd2
    Reviewed-on: https://go-review.googlesource.com/32536
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 3be166dc70bf3539539bc6762aff9660c3dbf229
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Nov 1 15:33:40 2016 -0700

    cmd/compile: get rid of unused Name.Method field
    
    It's never set anywhere, and even if it was, it would just Fatalf.
    
    Change-Id: I84ade6d2068c623a8c85f84d8cdce38984996ddd
    Reviewed-on: https://go-review.googlesource.com/32489
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c3e0dc23fbca3ad168502f688e7c3f1882f62b73
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Nov 1 14:46:59 2016 -0700

    go/importer: handle multiple imports of the same object
    
    Before aliases, and because we chose a simple export format for them,
    a package may now export the same object more than once if there are
    multiple exported aliases referring to that object. The go/importer
    made the assumption this couldn't happen. Adjust it.
    
    Fixes #17726.
    
    Change-Id: Ibb9fc669a8748200b45ad78934d7453e5a5aad82
    Reviewed-on: https://go-review.googlesource.com/32538
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>

commit 012fec3821d6d01b69a563125fcb7ae49186be81
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Nov 1 15:15:11 2016 -0700

    cmd/compile/internal/syntax: don't depend on hardwired $GOROOT name
    
    Fixes #17697.
    
    Change-Id: I3c47e139b09bde81566e29a1ac0ec8c58d55a34a
    Reviewed-on: https://go-review.googlesource.com/32539
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7c7349c9e9217d7bb22f41eaa658bbba8716bad6
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 1 13:04:56 2016 -0700

    cmd/go: remove _cgo_flags from gccgo archive built using SWIG
    
    Since SWIG uses cgo, when using SWIG with gccgo, the go tool will add a
    _cgo_flags file to the package archive, just as it does with cgo. We
    need to remove that file from the archive passed to the linker, just as
    we do with cgo.
    
    Change-Id: I5ef4fea92eec419f870fbf6f678691d15901ee6c
    Reviewed-on: https://go-review.googlesource.com/32535
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 4e584c52036fb2a572fab466e2a291fb695da882
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Oct 28 15:08:28 2016 +1300

    cmd/compile: mark go.itab.* symbols local earlier
    
    This feels a bit like a layering violation, but as the bug report shows
    it is sometimes necessary.
    
    Fixes #17642
    
    Change-Id: I4ba060bb1ce73a527ce276e5a769c44692b50016
    Reviewed-on: https://go-review.googlesource.com/32236
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit d0e408334be22158fbf58a4d02789a48f5cb911e
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sun Oct 30 23:53:09 2016 -0400

    cmd/link: support plugins with no exported symbols
    
    A plugin with no exported symbols is still potentially very useful.
    Its init functions are called on load, and it so it can have visible
    side effects.
    
    Fixes #17681
    
    Change-Id: Icdca31f48e5ab13c99020a2ef724f3de47dcd74b
    Reviewed-on: https://go-review.googlesource.com/32437
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e22c79660d96187b672a92622d171066a0d5c5c2
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Nov 1 10:38:24 2016 -0700

    go/types: handle imported aliases
    
    When we lookup a qualified identifier, we need to unpack
    an alias. Do this in all places, not just one. Duh!
    
    Fixes #17716.
    For #17592.
    
    Change-Id: I58d57b17cc635d0408b370f109c719c16757fd8e
    Reviewed-on: https://go-review.googlesource.com/32534
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 34c480afa89a4efa917f30592d8c095dbaf7612e
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Nov 1 15:28:55 2016 -0400

    runtime: resolve type offsets using source module
    
    The runtime.typeEquals function is used during typelinksinit to
    determine the canonical set of *_type values to use throughout the
    runtime. As such, it is run against non-canonical *_type values, that
    is, types from modules that are duplicates of a type from another
    module that was loaded earlier in the program life.
    
    These non-canonical *_type values sometimes contain pointers. These
    pointers are pointing to position-independent data, and so they are set
    by ld.so using dynamic relocations when the module is loaded. As such,
    the pointer can point to the equivalent memory from a previous module.
    
    This means if typesEqual follows a pointer inside a *_type, it can end
    up at a piece of memory from another module. If it reads a typeOff or
    nameOff from that memory and attempts to resolve it against the
    non-canonical *_type from the later module, it will end up with a
    reference to junk memory.
    
    Instead, resolve against the pointer the offset was read from, so the
    data is valid.
    
    Fixes #17709.
    Should no longer matter after #17724 is resolved in a later Go.
    
    Change-Id: Ie88b151a3407d82ac030a97b5b6a19fc781901cb
    Reviewed-on: https://go-review.googlesource.com/32513
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3f1ed245510d21ad021ea96da7bbd37ec2aca9ed
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Nov 1 12:27:26 2016 -0700

    cmd/compile/internal/syntax: avoid deadlock
    
    When the err from ReadFile is non-nil, we call t.Fatal(err).
    Switch t.Fatal to t.Error + return.
    ensure that close(results) happens on that code path as well.
    
    Updates #17697.
    
    Change-Id: Ifaacf27a76c175446d642086ff32f4386428080d
    Reviewed-on: https://go-review.googlesource.com/32486
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 84803f3da1b3921a6eacec435d97d5b9e40fe947
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 1 10:24:06 2016 -0700

    runtime: treat SIGSTOP on Solaris as we do on other systems
    
    This makes no practical difference, as SIGSTOP can not be caught, but
    may as well be consistent.
    
    Change-Id: I3efbbf092388bb3f6dccc94cf703c5d94d35f6a1
    Reviewed-on: https://go-review.googlesource.com/32533
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2c5bce1cfa242f27ffece3d30e8b851e3e923be2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Oct 30 11:56:19 2016 -0400

    time: simplify: tell people to not use == with Time values
    
    Change-Id: I49952f89b04f41109bb6591c6f025971d9880123
    Reviewed-on: https://go-review.googlesource.com/32411
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Symonds <dsymonds@golang.org>

commit d89ab1398eef9a3f08db2a49ff3cbe158001474d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 1 17:40:07 2016 +0000

    net/http: make Transport reject URLs with bogus ports with non-digits
    
    Fixes #14353
    
    Change-Id: I9cb5a5192ecdae37c100969395ed6a1564b8d34e
    Reviewed-on: https://go-review.googlesource.com/32482
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Martin Möhrmann <martisch@uos.de>

commit f31492ffe7d68e84ec0ba6e870d174ab48e6397c
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Fri Oct 21 23:23:48 2016 +0300

    bytes,strings: use IndexByte more often in Index on AMD64
    
    IndexByte+compare is faster than indexShortStr in good case, when
    first byte is rare, but is more costly in bad cases.
    Start with IndexByte and switch to indexShortStr if we encounter
    false positives more often than once per 8 bytes.
    
    Benchmark changes for package bytes:
    
    IndexRune/4K-8                    416ns ± 0%       86ns ± 0%    -79.24%        (p=0.000 n=10+10)
    IndexRune/4M-8                    413µs ± 0%      100µs ± 1%    -75.88%        (p=0.000 n=10+10)
    IndexRune/64M-8                  6.73ms ± 0%     2.86ms ± 1%    -57.49%        (p=0.000 n=10+10)
    Index/10-8                       8.45ns ± 0%     8.96ns ± 0%     +6.04%         (p=0.000 n=9+10)
    Index/32-8                       9.64ns ± 0%     9.51ns ± 0%     -1.30%          (p=0.000 n=8+9)
    Index/4K-8                       2.11µs ± 0%     2.12µs ± 0%     +0.26%        (p=0.000 n=10+10)
    Index/4M-8                       3.60ms ± 5%     3.59ms ± 7%       ~            (p=0.497 n=9+10)
    Index/64M-8                      57.1ms ± 3%     58.7ms ± 5%       ~            (p=0.113 n=9+10)
    IndexEasy/10-8                   7.10ns ± 1%     7.71ns ± 1%     +8.60%        (p=0.000 n=10+10)
    IndexEasy/32-8                   9.29ns ± 1%     9.22ns ± 0%     -0.75%         (p=0.000 n=9+10)
    IndexEasy/4K-8                   1.06µs ± 0%     0.08µs ± 0%    -92.18%        (p=0.000 n=10+10)
    IndexEasy/4M-8                   1.07ms ± 0%     0.10ms ± 1%    -90.74%         (p=0.000 n=9+10)
    IndexEasy/64M-8                  17.3ms ± 0%      2.8ms ± 1%    -83.76%         (p=0.000 n=10+9)
    
    IndexRune/4K-8                 9.84GB/s ± 0%  47.42GB/s ± 0%   +381.85%         (p=0.000 n=8+10)
    IndexRune/4M-8                 10.1GB/s ± 0%   42.1GB/s ± 1%   +314.56%        (p=0.000 n=10+10)
    IndexRune/64M-8                10.0GB/s ± 0%   23.4GB/s ± 1%   +135.25%        (p=0.000 n=10+10)
    Index/10-8                     1.18GB/s ± 0%   1.12GB/s ± 0%     -5.67%         (p=0.000 n=10+9)
    Index/32-8                     3.32GB/s ± 0%   3.36GB/s ± 0%     +1.27%         (p=0.000 n=10+9)
    Index/4K-8                     1.94GB/s ± 0%   1.93GB/s ± 0%     -0.25%         (p=0.000 n=10+9)
    Index/4M-8                     1.17GB/s ± 5%   1.17GB/s ± 7%       ~            (p=0.497 n=9+10)
    Index/64M-8                    1.17GB/s ± 3%   1.15GB/s ± 6%       ~            (p=0.113 n=9+10)
    IndexEasy/10-8                 1.41GB/s ± 1%   1.30GB/s ± 1%     -7.90%        (p=0.000 n=10+10)
    IndexEasy/32-8                 3.45GB/s ± 1%   3.47GB/s ± 0%     +0.73%         (p=0.000 n=9+10)
    IndexEasy/4K-8                 3.84GB/s ± 0%  49.16GB/s ± 0%  +1178.78%         (p=0.000 n=9+10)
    IndexEasy/4M-8                 3.91GB/s ± 0%  42.19GB/s ± 1%   +980.37%         (p=0.000 n=9+10)
    IndexEasy/64M-8                3.88GB/s ± 0%  23.91GB/s ± 1%   +515.76%         (p=0.000 n=10+9)
    
    No significant changes in strings.
    
    In regexp I see:
    
    Match/Easy0/32-8                 536MB/s ± 1%   540MB/s ± 1%    +0.75%         (p=0.001 n=9+10)
    Match/Easy0/1K-8                1.62GB/s ± 0%  4.42GB/s ± 1%  +172.48%        (p=0.000 n=10+10)
    Match/Easy0/32K-8               1.87GB/s ± 0%  9.07GB/s ± 1%  +384.24%         (p=0.000 n=7+10)
    Match/Easy0/1M-8                1.90GB/s ± 0%  4.83GB/s ± 0%  +154.56%         (p=0.000 n=8+10)
    Match/Easy0/32M-8               1.90GB/s ± 0%  4.53GB/s ± 0%  +138.62%         (p=0.000 n=7+10)
    
    Compared to in 1.7:
    
    Match/Easy0/32-8                  59.5ns ± 0%    59.2ns ± 1%   -0.45%         (p=0.008 n=9+10)
    Match/Easy0/1K-8                   226ns ± 1%     231ns ± 1%   +2.30%        (p=0.000 n=10+10)
    Match/Easy0/32K-8                 3.73µs ± 2%    3.61µs ± 1%   -3.12%        (p=0.000 n=10+10)
    Match/Easy0/1M-8                   206µs ± 1%     217µs ± 0%   +5.34%        (p=0.000 n=10+10)
    Match/Easy0/32M-8                 7.03ms ± 1%    7.40ms ± 0%   +5.23%        (p=0.000 n=10+10)
    
    Fixes #17456
    
    Change-Id: I38b2fabcaed7119cc4bf37007ba7bfe7504c8f9f
    Reviewed-on: https://go-review.googlesource.com/31690
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 655a3b5a55a641962f4ff875490f90af8a2d7ea0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 1 18:13:54 2016 +0000

    strings: ignore allocation test in cover mode
    
    Fixes #17699
    
    Change-Id: I7ea29a3fc2ca13d9d7e3044cbb8ea22e3435d423
    Reviewed-on: https://go-review.googlesource.com/32484
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit daf3f082648274b0da7264bcc4794ca0dd4b999d
Author: Rob Pike <r@golang.org>
Date:   Tue Nov 1 11:01:39 2016 -0700

    testing: add a method testing.CoverMode
    
    This makes it possible to avoid tests where coverage affects the test
    results by skipping them (or otherwise adjusting them) when coverage
    is enabled.
    
    Update #17699
    
    Change-Id: Ifcc36cfcd88ebd677890e82ba80ee3d696ed3d7c
    Reviewed-on: https://go-review.googlesource.com/32483
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b06c93e45b7b03a5d670250ff35e42d62aface82
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 1 17:12:48 2016 +0000

    net/http: add Transport.ProxyConnectHeader to control headers to proxies
    
    Fixes #13290
    
    Change-Id: I0f7e7683d86db501cbedb6a0b7349ceb0769701c
    Reviewed-on: https://go-review.googlesource.com/32481
    Reviewed-by: Martin Möhrmann <martisch@uos.de>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8380de416bbb3550de902374b7626e569060a712
Author: Bryan C. Mills <bcmills@google.com>
Date:   Thu Oct 27 17:36:39 2016 -0400

    runtime: align stack pointer in sigfwd
    
    sigfwd calls an arbitrary C signal handler function.  The System V ABI
    for x86_64 (and the most recent revision of the ABI for i386) requires
    the stack to be 16-byte aligned.
    
    Fixes: #17641
    
    Change-Id: I77f53d4a8c29c1b0fe8cfbcc8d5381c4e6f75a6b
    Reviewed-on: https://go-review.googlesource.com/32107
    Run-TryBot: Bryan Mills <bcmills@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b2c54afe1451f93e1fbbad257a151d8425cd308d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Nov 1 15:24:11 2016 +0000

    net/http, net/http/httptest: make http2's TrailerPrefix work for http1
    
    Go's http1 implementation originally had a mechanism to send HTTP
    trailers based on pre-declaring the trailer keys whose values you'd
    later let after the header was written.
    
    http2 copied the same mechanism, but it was found to be unsufficient
    for gRPC's wire protocol. A second trailer mechanism was added later
    (but only to http2) for handlers that want to send a trailer without
    knowing in advance they'd need to.
    
    Copy the same mechanism back to http1 and document it.
    
    Fixes #15754
    
    Change-Id: I8c40d55e28b0e5b7087d3d1a904a392c56ee1f9b
    Reviewed-on: https://go-review.googlesource.com/32479
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3c2f607274b2284826ea887fa9d2ef62817df608
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Tue Nov 1 10:43:34 2016 -0500

    cmd/vendor/golang.org/x/arch/ppc64/ppc64asm: skip TestObjdumpPowerManual if not ppc64x
    
    Skip TestObjdumpPowerManual if the host system is not ppc64 or ppc64le.
    This test depends on using the host objdump and comparing output, which
    does not work as expected if the test is run on another host.
    
    Orignates from golang.org/x/arch/ppc64/ppc64asm commit 8e2d4898.
    
    Fixes #17698
    
    Change-Id: I956b0fb78c5ec33641db752d46a755008403d269
    Reviewed-on: https://go-review.googlesource.com/32531
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b82ae33b903e309140fd471eee2de4c8ac7c0b46
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Nov 1 09:39:01 2016 -0700

    cmd/compile: add debug print to identify unexpected objects
    
    This should never be called but should help identify causes of
    unexpected panics such as in issue #17716.
    
    Change-Id: Id6ad0cef1088a41bfcc69110a93484a7e39c4128
    Reviewed-on: https://go-review.googlesource.com/32480
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 719b493312154b43e9ace5743f3d74efb155b9d7
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Oct 31 08:59:05 2016 -0400

    plugin: do not leak cRelName on error path
    
    Fixes #17683
    
    Change-Id: I46f45c63796b58e8a8f14e37592231cbe7cd6934
    Reviewed-on: https://go-review.googlesource.com/32438
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 54ec7b072e017f7351f889f9f5b31bbf53a44119
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sun Oct 30 20:30:38 2016 -0400

    runtime: access modules via a slice
    
    The introduction of -buildmode=plugin means modules can be added to a
    Go program while it is running. This means there exists some time
    while the program is running with the module is on the moduledata
    linked list, but it has not been initialized to the satisfaction of
    other parts of the runtime. Notably, the GC.
    
    This CL adds a new way of access modules, an activeModules function.
    It returns a slice of modules that is built in the background and
    atomically swapped in. The parts of the runtime that need to wait on
    module initialization can use this slice instead of the linked list.
    
    Fixes #17455
    
    Change-Id: I04790fd07e40c7295beb47cea202eb439206d33d
    Reviewed-on: https://go-review.googlesource.com/32357
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 807a7ebd5107b44ca93849f2b12b61bc4cacca10
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Oct 7 12:16:26 2016 -0400

    cmd/compile: improve s390x rules for folding ADDconst into loads/stores
    
    There is no benefit to folding ADDconsts unless the resultant immediate
    will fit into a 20-bit signed integer, so limit these rules accordingly.
    
    Also the signed load operations were missing, so I've added them, and
    I've also removed some MOVDaddr rules that were dead code (MOVDaddrs
    are rematerializable on s390x which means they can't take inputs other
    than SP or SB).
    
    Change-Id: Iebeba78da37d3d71d32d4b7f49fe4ea9095d40ec
    Reviewed-on: https://go-review.googlesource.com/30616
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit d7b34d5f29324d77fad572676f0ea139556235e0
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Oct 30 01:54:19 2016 +0200

    runtime: improve atoi implementation
    
    - Adds overflow checks
    - Adds parsing of negative integers
    - Adds boolean return value to signal parsing errors
    - Adds atoi32 for parsing of integers that fit in an int32
    - Adds tests
    
    Handling of errors to provide error messages
    at the call sites is left to future CLs.
    
    Updates #17718
    
    Change-Id: I3cacd0ab1230b9efc5404c68edae7304d39bcbc0
    Reviewed-on: https://go-review.googlesource.com/32390
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 40aaf283124de44d513ca086976194f0133faa82
Author: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
Date:   Fri Oct 28 14:42:42 2016 -0200

    runtime: get ppc64x ISA level and hardware capabilities from HWCAP/HWCAP2
    
    This implements a check that can be done at runtime for the ISA level and
    hardware capability. It follows the same implementation as in s390x.
    
    These checks will be important as we enable new instructions and write go
    asm implementations using those.
    
    Updates #15403
    Fixes #16643
    
    Change-Id: Idfee374a3ffd7cf13a7d8cf0a6c83d247d3bee16
    Reviewed-on: https://go-review.googlesource.com/32330
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 47c58b46676af533a105fb10169522b958843a70
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sat Oct 1 12:44:33 2016 -0400

    bytes, strings: optimize multi-byte index operations on s390x
    
    Use vector instructions to speed up indexing operations for short
    strings (64 bytes or less).
    
    bytes_s390x.go and strings_s390x.go are based on their amd64
    equivalents in CL 31690.
    
    bytes package:
    
    name                   old time/op    new time/op    delta
    Index/10                 40.3ns ± 7%    11.3ns ± 4%    -72.06%  (p=0.000 n=10+10)
    Index/32                  196ns ± 1%      27ns ± 2%    -86.25%  (p=0.000 n=10+10)
    Index/4K                 28.9µs ± 1%     1.5µs ± 2%    -94.94%    (p=0.000 n=9+9)
    Index/4M                 30.1ms ± 2%     1.5ms ± 3%    -94.94%  (p=0.000 n=10+10)
    Index/64M                 549ms ±13%      28ms ± 3%    -94.87%   (p=0.000 n=10+9)
    IndexEasy/10             18.8ns ±11%    11.5ns ± 2%    -38.81%  (p=0.000 n=10+10)
    IndexEasy/32             23.6ns ± 6%    28.1ns ± 3%    +19.29%  (p=0.000 n=10+10)
    IndexEasy/4K              251ns ± 5%     223ns ± 8%    -11.04%  (p=0.000 n=10+10)
    IndexEasy/4M              318µs ± 9%     266µs ± 8%    -16.42%  (p=0.000 n=10+10)
    IndexEasy/64M            14.7ms ±16%    13.2ms ±11%    -10.22%  (p=0.001 n=10+10)
    
    strings package:
    
    name                   old time/op  new time/op  delta
    IndexRune              88.1ns ±16%  28.9ns ± 4%  -67.20%  (p=0.000 n=10+10)
    IndexRuneLongString     456ns ± 7%    34ns ± 3%  -92.50%  (p=0.000 n=10+10)
    IndexRuneFastPath      12.9ns ±14%  11.1ns ± 6%  -13.84%  (p=0.000 n=10+10)
    Index                  13.0ns ± 7%  11.3ns ± 4%  -13.31%  (p=0.000 n=10+10)
    IndexHard1             3.38ms ± 9%  0.07ms ± 1%  -97.79%  (p=0.000 n=10+10)
    IndexHard2             3.58ms ± 7%  0.37ms ± 2%  -89.78%  (p=0.000 n=10+10)
    IndexHard3             3.47ms ± 7%  0.75ms ± 1%  -78.52%  (p=0.000 n=10+10)
    IndexHard4             3.56ms ± 6%  1.34ms ± 0%  -62.39%    (p=0.000 n=9+9)
    
    Change-Id: If36c2afb8c02e80fcaa1cf5ec2abb0a2be08c7d1
    Reviewed-on: https://go-review.googlesource.com/32447
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 11ff4b21f253f1c8a5a63608b0108a1438378c20
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Thu Oct 27 19:47:47 2016 +0100

    testing: don't warn if -bench was passed
    
    In a previous change, cmd/go was taught to show a "no tests ran" warning
    if test did nothing. But it missed a case - if no tests nor examples ran
    but any benchmarks were meant to be run, it would still produce the
    warning. This meant that running only benchmarks, which is common, would
    be confusing:
    
             $ go test -run='^$' -bench=.
            testing: warning: no tests to run
            BenchmarkFoo-4            300000              5056 ns/op
            [...]
    
    I believe this was because of a copy-paste error in the tests. This was
    being tested, but on the wrong file which does contain a test that was
    being run. Fix the path and fix the now failing test by never showing
    the warning if -bench was given a non-empty string.
    
    The rationale is that if -bench was given but there was no output, it's
    obvious that nothing happened as benchmarks always produce output even
    without -v. So showing a warning in those cases is redundant.
    
    To make future typos less likely, make sure that no tests are being run
    in the cases where we only want to run benchmarks.
    
    Fixes #17603.
    
    Change-Id: I4c626caf39f72260c6a9761c06446663f465f947
    Reviewed-on: https://go-review.googlesource.com/32157
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>
    Run-TryBot: Marcel van Lohuizen <mpvl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4a13f31ffd4ff8648ccc4c2b2193abde22f7fd26
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Fri Oct 28 08:11:39 2016 -0700

    net/http/httputil: add ModifyResponse to reverseProxy
    
    Adds ModifyResponse, an optional func to ReverseProxy
    that modifies a response in the backend, right before
    the headers of the response are written to the internal
    response writer.
    If ModifyResponse returns an error, the proxy returns
    a StatusBadGateway error.
    
    Fixes #14237.
    
    Change-Id: I8e03139e34dea0084512ccbd8cc49e941bf9fb5d
    Reviewed-on: https://go-review.googlesource.com/32356
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 032d150bd4a812eee9c3ea017f0d3acc8c484325
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Oct 31 17:34:42 2016 -0700

    encoding/json: marshal with null when RawMessage is nil
    
    This CL expands upon a change made in (http://golang.org/cl/21811)
    to ensure that a nil RawMessage gets serialized as "null" instead of
    being a nil slice.
    
    The added check only triggers when the RawMessage is nil. We do not
    handle the case when the RawMessage is non-nil, but empty.
    
    Fixes #17704
    Updates #14493
    
    Change-Id: I0fbebcdd81f7466c5b78c94953afc897f162ceb4
    Reviewed-on: https://go-review.googlesource.com/32472
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7a26d9fcedd94a1ba0d95833b0cdbbdcc776fe19
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 31 16:58:15 2016 -0700

    cmd/compile/internal/syntax: don't panic if no error handler is provided
    
    If no error handler is provided, terminate parsing with first error
    and report that error.
    
    Fixes #17697.
    
    Change-Id: I9070faf7239bd53725de141507912b92ded3474b
    Reviewed-on: https://go-review.googlesource.com/32456
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 53fc330e2d154443acf3d01e0d68bae22b2b7804
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Oct 30 03:28:05 2016 +0000

    net/http: add Server.Close & Server.Shutdown for forced & graceful shutdown
    
    Also updates x/net/http2 to git rev 541150 for:
    
       http2: add support for graceful shutdown of Server
       https://golang.org/cl/32412
    
       http2: make http2.Server access http1's Server via an interface check
       https://golang.org/cl/32417
    
    Fixes #4674
    Fixes #9478
    
    Change-Id: I8021a18dee0ef2fe3946ac1776d2b10d3d429052
    Reviewed-on: https://go-review.googlesource.com/32329
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2d4d22af7e8482054a6f802ec798f4af4d37596f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Oct 31 16:42:30 2016 -0700

    cmd/compile: move parser.go remnants into noder.go
    
    Change-Id: I54f8788a4703283b9aa3904e2e610097ac3e3586
    Reviewed-on: https://go-review.googlesource.com/32471
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit f2d05389da562fd58143995195b5f6f844eb89e1
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 31 17:37:05 2016 -0400

    runtime: perform write barriers on direct channel receive
    
    Currently we have write barriers for direct channel sends, where the
    receiver is blocked and the sender is writing directly to the
    receiver's stack; but not for direct channel receives, where the
    sender is blocked and the receiver is reading directly from the
    sender's stack.
    
    This was okay with the old write barrier because either 1) the
    receiver would write the received pointer into the heap (causing it to
    be shaded), 2) the pointer would still be on the receiver's stack at
    mark termination and we would rescan it, or 3) the receiver dropped
    the pointer so it wasn't necessarily reachable anyway.
    
    This is not okay with the write barrier because it lets a grey stack
    send a white pointer to a black stack and then remove it from its own
    stack. If the grey stack was the sole grey-protector of this pointer,
    this hides the object from the garbage collector.
    
    Fix this by making direct receives perform a stack-to-stack write
    barrier just like direct sends do.
    
    Fixes #17694.
    
    Change-Id: I1a4cb904e4138d2ac22f96a3e986635534a5ae41
    Reviewed-on: https://go-review.googlesource.com/32450
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 9a8bf2d67de6884d99760a065d7af508b85e38d7
Author: Dhananjay Nakrani <dhananjaynakrani@gmail.com>
Date:   Sat Oct 29 12:10:21 2016 -0700

    cmd/compile: avoid nil-ing out a node's Type in typecheckcomplit() on error
    
    typecheckcomplit nils out node's type, upon finding new errors.
    This hides new errors in children's node as well as the type info
    of current node. This change fixes that.
    
    Fixes #17645.
    
    Change-Id: Ib473291f31c7e8fa0307cb1d494e0c112ddd3583
    Reviewed-on: https://go-review.googlesource.com/32324
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d35dfd405eaa21654807fac3891e198538d3c402
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 30 17:59:06 2016 -0400

    runtime: make assists perform root jobs
    
    Currently, assists can only perform heap marking jobs. However, at the
    beginning of GC, there are only root jobs and no heap marking jobs. As
    a result, there's often a period at the beginning of a GC cycle where
    no goroutine has accumulated assist credit, but at the same time it
    can't get any credit because there are no heap marking jobs for it to
    do yet. As a result, many goroutines often block on the assist queue
    at the very beginning of the GC cycle.
    
    This commit fixes this by allowing assists to perform root marking
    jobs. The tricky part of this (and the reason we haven't done this
    before) is that stack scanning jobs can lead to deadlocks if the
    goroutines performing the stack scanning are themselves
    non-preemptible, since two non-preemptible goroutines may try to scan
    each other. To address this, we use the same insight d6625ca used to
    simplify the mark worker stack scanning: as long as we're careful with
    the stacks and only drain jobs while on the system stack, we can put
    the goroutine into a preemptible state while we drain jobs. This means
    an assist's user stack can be scanned while it continues to do work.
    
    This reduces the rate of assist blocking in the x/benchmarks HTTP
    benchmark by a factor of 3 and all remaining blocking happens towards
    the *end* of the GC cycle, when there may genuinely not be enough work
    to go around.
    
    Ideally, assists would get credit for working on root jobs. Currently
    they do not; however, this change prioritizes heap work over root jobs
    in assists, so they're likely to mostly perform heap work. In contrast
    with mark workers, for assists, the root jobs act only as a backstop
    to create heap work when there isn't enough heap work.
    
    Fixes #15361.
    
    Change-Id: If6e169863e4ad75710b0c8dc00f6125b41e9a595
    Reviewed-on: https://go-review.googlesource.com/32432
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit f9e1adb713e35233ff65f3bde7715377964fafbd
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 30 17:46:49 2016 -0400

    runtime: lift systemstack part of gcAssistAlloc
    
    This lifts the part of gcAssistAlloc that runs on the system stack to
    its own function in preparation for letting assists perform root jobs
    (notably stack scanning). This makes it easy to see that there are no
    references to the user stack once we've entered gcAssistAlloc1, which
    means it's safe to shrink the stack while in gcAssistAlloc1.
    
    This does not yet make assists perform root jobs, so it's not actually
    possible for the stack to shrink yet. That will happen in the next
    commit.
    
    The code in gcAssistAlloc1 is identical to the code that's currently
    passed in a closure to systemstack with one exception. Currently, we
    set the "completed" variable in the enclosing scope to indicate that
    the assist completed the mark phase. This is exactly the sort of
    cross-stack reference lifting this function is meant to prevent. We
    replace this variable with setting gp.param to nil or non-nil to
    indicate the completion status.
    
    Updates #15361.
    
    Change-Id: Iba7cfb758c781070a441aea86c0117b399a24dbd
    Reviewed-on: https://go-review.googlesource.com/32431
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit cba0957a91b7f3ce16c06046b5c971e46ff806ef
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 31 14:38:12 2016 -0700

    go/types: basic Defs/Uses test for aliases
    
    Change-Id: I113ea712838511ee823375d9ea059089195414f5
    Reviewed-on: https://go-review.googlesource.com/32449
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 9dba33872a6a762e27b42a01ec50ac815916aec4
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Mon Oct 31 11:38:22 2016 -0700

    doc: replace code.google.com/p/sitesearch with its new destination
    
    Fixes #16910.
    
    Change-Id: I0e97e88bee0361cd3621cacd1d4b84e6e42af718
    Reviewed-on: https://go-review.googlesource.com/32424
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a42ba23da231e6e163aa2e1537a52a1880f21ad8
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 31 12:52:43 2016 -0700

    go/types: implement missing String method for Alias object
    
    Change-Id: Iba5cfa033483b843dbd3681ffad50b117cced4a7
    Reviewed-on: https://go-review.googlesource.com/32448
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit f46239b85c97ef32ef4f5c9476d77c812125b441
Author: Dhananjay Nakrani <dhananjaynakrani@gmail.com>
Date:   Sun Oct 30 12:47:53 2016 -0700

    cmd/compile: initialize Decldepth in all cases
    
    Previously, on encountering Func.Nname.Type == nil, typecheckfunc()
    returned without initializing Decldepth for that func. This causes
    typecheckclosure() to fatal. This change ensures that we initialize
    Decldepth in all cases.
    
    Fixes #17588.
    
    Change-Id: I2e3c81ad52e8383395025388989e8dbf03438b68
    Reviewed-on: https://go-review.googlesource.com/32415
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 741445068f7f582824f1c5625159e0b728090265
Author: Keith Randall <khr@golang.org>
Date:   Sun Oct 30 21:10:03 2016 -0700

    cmd/compile: make [0]T and [1]T SSAable types
    
    We used to have to keep on-stack copies of these types.
    Now they can be registerized.
    
    [0]T is kind of trivial but might as well handle it.
    
    This change enables another change I'm working on to improve how x.(T)
    expressions are handled (#17405).  This CL helps because now all
    types that are direct interface types are registerizeable (e.g. [1]*byte).
    
    No higher-degree arrays for now because non-constant indexes are hard.
    
    Update #17405
    
    Change-Id: I2399940965d17b3969ae66f6fe447a8cefdd6edd
    Reviewed-on: https://go-review.googlesource.com/32416
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 9c066bab643a0224decdd71813096e0d1df0624c
Author: David Chase <drchase@google.com>
Date:   Fri Oct 28 13:33:57 2016 -0400

    cmd/compile: mark temps with new AutoTemp flag, and use it.
    
    This is an extension of
    https://go-review.googlesource.com/c/31662/
    to mark all the temporaries, not just the ssa-generated ones.
    
    Before-and-after ls -l `go tool -n compile` shows a 3%
    reduction in size (or rather, a prior 3% inflation for
    failing to filter temps out properly.)
    
    Replaced name-dependent "is it a temp?" tests with calls to
    *Node.IsAutoTmp(), which depends on AutoTemp.  Also replace
    calls to istemp(n) with n.IsAutoTmp(), to reduce duplication
    and clean up function name space.  Generated temporaries
    now come with a "." prefix to avoid (apparently harmless)
    clashes with legal Go variable names.
    
    Fixes #17644.
    Fixes #17240.
    
    Change-Id: If1417f29c79a7275d7303ddf859b51472890fd43
    Reviewed-on: https://go-review.googlesource.com/32255
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit eec1e5d9c6d00fc493714a09b71e2bca2d7e7fa4
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 31 11:16:15 2016 -0700

    go/types: don't expose types.Alias kind field - only used by go/types
    
    Change-Id: I8a28a88a655d9929f8641f71573dc01dc53be00f
    Reviewed-on: https://go-review.googlesource.com/32443
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 3f6070cc915b8175f4b7d1324a8320b881e891a2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Oct 31 11:43:40 2016 -0700

    vendor/golang_org/text/unicode/norm: re-vendor
    
    This picks up just a trivial fix,
    making vet (and thus me) happy.
    
    Change-Id: Ib82ae44c081ff1ec5c078196a6cd5e1a3505d03b
    Reviewed-on: https://go-review.googlesource.com/32427
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 35d342eb7d2e0c661b3bc5abd5f82d1d0717fb56
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Oct 31 11:41:34 2016 -0700

    cmd/vet/all: update whitelists
    
    Change-Id: Ic66eb2939d83559610e62cbb181a8faa6193ecc4
    Reviewed-on: https://go-review.googlesource.com/32426
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4de3df8c954e2b3368550b652c5ee861df6717d0
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Oct 31 11:41:24 2016 -0700

    cmd/compile: remove unreachable code
    
    Makes vet happy.
    
    Change-Id: I00de44a844afa57901b31991acf9e7ac834a9572
    Reviewed-on: https://go-review.googlesource.com/32425
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b5203be87dc8edae182a8b45901ba8306e37110e
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Oct 28 16:17:43 2016 -0700

    go/importer: implement importing of exported aliases
    
    Fixes #17592.
    
    Change-Id: I914fa8c0729012990878b6e5c3e99b0f9b0e2be8
    Reviewed-on: https://go-review.googlesource.com/32350
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 49b2dd583beffaf983910f24c5e2d02a31d0c5b4
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Oct 31 12:01:32 2016 -0700

    cmd/compile: remove legacy debug flags
    
    -M, -P, and -R were for debugging backend passes that no longer
    exists.
    
    -g is used for debugging instructions generated with Gins, but the SSA
    backend mostly generates instructions directly. The handful of
    instructions still generated with Gins are pretty useless for
    debugging.
    
    -x was used to debug the old lexer, but now it only causes us to print
    file names as they're parsed, and only if we manually hack the
    compiler to enable tracing.
    
    Change-Id: Ia58d4bc9c1312693466171a3fcefc1221e9a2381
    Reviewed-on: https://go-review.googlesource.com/32428
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7b50bd8abfe8565abdf7a6116e22a6a0fbf582b7
Author: Mike Strosaker <strosake@us.ibm.com>
Date:   Fri Oct 28 19:50:16 2016 -0400

    crypto/sha256: improve performance for sha256.block on ppc64le
    
    Adds an assembly implementation of sha256.block for ppc64le to improve its
    performance.  This implementation is largely based on the original amd64
    implementation, which unrolls the 64 iterations of the inner loop.
    
    Fixes #17652
    
    benchmark               old ns/op     new ns/op     delta
    BenchmarkHash8Bytes     1263          767           -39.27%
    BenchmarkHash1K         14048         7766          -44.72%
    BenchmarkHash8K         102245        55626         -45.60%
    
    benchmark               old MB/s     new MB/s     speedup
    BenchmarkHash8Bytes     6.33         10.43        1.65x
    BenchmarkHash1K         72.89        131.85       1.81x
    BenchmarkHash8K         80.12        147.27       1.84x
    
    Change-Id: Ib4adf429423b20495580400be10bd7e171bcc70b
    Reviewed-on: https://go-review.googlesource.com/32318
    Reviewed-by: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 854ae03db4c6c398149dc1e46fbec49479d8cb1f
Author: Mike Strosaker <strosake@us.ibm.com>
Date:   Sat Oct 29 02:36:41 2016 -0400

    crypto/sha512: improve performance for sha512.block on ppc64le
    
    Adds an assembly implementation of sha512.block for ppc64le to improve its
    performance.  This implementation is largely based on the original amd64
    implementation, unrolling the 80 iterations of the inner loop.
    
    Fixes #17660
    
    benchmark               old ns/op     new ns/op     delta
    BenchmarkHash8Bytes     1715          1133          -33.94%
    BenchmarkHash1K         10098         5513          -45.41%
    BenchmarkHash8K         68004         35278         -48.12%
    
    benchmark               old MB/s     new MB/s     speedup
    BenchmarkHash8Bytes     4.66         7.06         1.52x
    BenchmarkHash1K         101.40       185.72       1.83x
    BenchmarkHash8K         120.46       232.21       1.93x
    
    Change-Id: Ifd55a49a24cb159b3a09a8e928c3f37727aca103
    Reviewed-on: https://go-review.googlesource.com/32320
    Reviewed-by: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 051cf380f5723fcb062728b7abfda40727b48746
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Oct 31 15:30:59 2016 +0000

    go/build: add back deps for runtime/pprof/internal/gzip0
    
    These were accidentally removed by a rollback cl: golang.org/cl/32441
    
    Change-Id: I0cfa8b3397be324dabfb8f33b6548a03c10571eb
    Reviewed-on: https://go-review.googlesource.com/32334
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 9e227acfb62b091eea743bef03bbe466e4070df9
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Oct 31 15:30:59 2016 +0000

    Revert "runtime/pprof: write profiles in protobuf format."
    
    This reverts commit b33030a72754cb55d6ec137e79facacb398c9be4.
    
    Reason for revert: We're going to try to get the code in this change
    submitted in smaller, more carefully reviewed changes.
    
    Change-Id: I4175f4b297f0e69fb78b11f9dc0bd82f27865be7
    Reviewed-on: https://go-review.googlesource.com/32441
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 61ffec4b52f64793ad450d1a2d8c4144fa3d5f18
Author: Quentin Renard <contact@asticode.com>
Date:   Sat Oct 8 15:52:25 2016 +0200

    net/http: returned typed error on Transport proxy dial
    
    Fixes #16997
    
    Change-Id: I9ca27d8cff1905584862997d0e8a11ce3c4c21cb
    Reviewed-on: https://go-review.googlesource.com/30750
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 92568bcb6a374aecf2ece6607829b26f5e57ac28
Author: Kevin Burke <kev@inburke.com>
Date:   Mon Oct 31 07:32:19 2016 -0700

    database/sql: correctly spell constants
    
    Also add a link to more information about isolation levels as defined by the
    SQL standard. Fixes #17682.
    
    Change-Id: I94c53b713f4c882af40cf15fe5f1e5dbc53ea741
    Reviewed-on: https://go-review.googlesource.com/32418
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4b90b7a28a0c1a849eed765cc511eacbae4d2651
Author: INADA Naoki <songofacandy@gmail.com>
Date:   Wed Oct 26 17:11:13 2016 +0900

    database/sql: add Pinger interface to driver Conn
    
    Change-Id: If6eb3a7c9ad48a517e584567b1003479c1df6cca
    Reviewed-on: https://go-review.googlesource.com/32136
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 398e861d9787d7da62a385110539d74dec34c18c
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Mon Oct 31 08:58:42 2016 -0700

    reflect: clarify that NumMethod returns only the number of exported methods
    
    Fixes #17686.
    
    Change-Id: I7d07c367e50b448579f9855bea43df76ddb82bd0
    Reviewed-on: https://go-review.googlesource.com/32420
    Reviewed-by: Rob Pike <r@golang.org>

commit 53c004f94efa85f05b28938509b250e02d1568ea
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Oct 27 17:40:33 2016 -0700

    go/types: local type-checking of alias declarations
    
    Does not handle imports of packages with exported aliases yet.
    
    For #17592.
    
    Change-Id: Iee63fb9d521014995003a417271fbe0384ae04ef
    Reviewed-on: https://go-review.googlesource.com/32108
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit f4c7a12c2c4b0aef99b4957a778736a4da9ae4ec
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sun Oct 30 21:19:59 2016 -0400

    runtime: make module typemaps visible to the GC
    
    The map[typeOff]*_type object is created at run time and stored in
    the moduledata. The moduledata object is marked by the linker as
    SNOPTRDATA, so the reference is ignored by the GC. Running
    misc/cgo/testplugin/test.bash with GOGC=1 will eventually collect
    the typemap and crash.
    
    This bug probably comes up in -linkshared binaries in Go 1.7.
    I don't know why we haven't seen a report about this yet.
    
    Fixes #17680
    
    Change-Id: I0e9b5c006010e8edd51d9471651620ba665248d3
    Reviewed-on: https://go-review.googlesource.com/32430
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9da7058466c8c9f32e1481f28d57732832ee3b30
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sun Oct 30 15:31:21 2016 -0400

    cmd/link, plugin: use full plugin path for symbols
    
    Plumb the import path of a plugin package through to the linker, and
    use it as the prefix on the exported symbol names.
    
    Before this we used the basename of the plugin file as the prefix,
    which could conflict and result in multiple loaded plugins sharing
    symbols that are distinct.
    
    Fixes #17155
    Fixes #17579
    
    Change-Id: I7ce966ca82d04e8507c0bcb8ea4ad946809b1ef5
    Reviewed-on: https://go-review.googlesource.com/32355
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 590fce48849cc7f81b890d6e9b6120fc6681e19a
Author: Nigel Tao <nigeltao@golang.org>
Date:   Sat Oct 29 13:23:50 2016 +1100

    compress/flate: tighten the BestSpeed max match offset bound.
    
    Previously, we were off by one.
    
    Also fix a comment typo.
    
    Change-Id: Ib94d23acc56d5fccd44144f71655481f98803ac8
    Reviewed-on: https://go-review.googlesource.com/32149
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f135106ec7cf68b47a5b83a1c2b5dd7eda0d614c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Oct 30 12:30:47 2016 -0400

    cmd/cgo: add -srcdir option
    
    This is convenient for direct use of `go tool cgo`. We can also use it
    from the go tool to reduce the length of the file names that cgo
    generates.
    
    Update #17070.
    
    Change-Id: I8466a0a2cc68a732d17d07319e303497715bac8c
    Reviewed-on: https://go-review.googlesource.com/32354
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit ba048f7ce4a14e956635efc80fc1447c3b8851dd
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 20:26:31 2016 -0400

    sync: enable Pool when using race detector
    
    Disabled by https://golang.org/cl/53020044 due to false positives.
    Reenable and model properly.
    
    Fixes #17306.
    
    Change-Id: I28405ddfcd17f58cf1427c300273212729154359
    Reviewed-on: https://go-review.googlesource.com/31589
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 154860ff17dacbf309ed247277d245ec887af6d4
Author: Ian Gudger <igudger@google.com>
Date:   Fri Oct 28 20:09:02 2016 -0700

    syscall: remove X__cmsg_data from Cmsghdr
    
    This field is a zero length array and has little use. Since Go 1.5, trailing
    zero-length arrays take up space. Both syscall.UnixRights() and
    syscall.ParseSocketControlMessage() depend on being able to do an unsafe cast
    of socket control message data to Cmsghdr this is only safe if the socket
    control message data is greater than or equal to the size of Cmsghdr. Since
    control message data that is equal in size to Cmsghdr without X__cmsg_data is
    a valid socket control message, we must remove X__cmsg_data or not perform the
    unsafe cast.
    
    Removing X__cmsg_data will prevent Go code that uses X__cmsg_data from
    compiling, but removing the unsafe cast will cause Go code that uses
    X__cmsg_data to fail or exhibit undefined behavior at runtime. It was
    therefore decided that removing X__cmsg_data was the better option.
    
    Fixes #17649
    
    Change-Id: I39f323f978eca09d62da5785c5c5c9c7cbdf8c31
    Reviewed-on: https://go-review.googlesource.com/32319
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ce6aa2ebdab0c6616ef17acc9282b0e168f5f21a
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Sun Oct 16 23:11:55 2016 -0700

    database/sql: add context helper methods and transaction types
    
    Prior to this change, it was implied that transaction properties
    would be carried in the context value. However, no such properties
    were defined, not even common ones. Define two common properties:
    isolation level and read-only. Drivers may choose to support
    additional transaction properties. It is not expected any
    further transaction properties will be added in the future.
    
    Change-Id: I2f680115a14a1333c65ba6f943d9a1149d412918
    Reviewed-on: https://go-review.googlesource.com/31258
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 042264ef1b073b1b485e6e24977e506e1a6bdb3f
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Fri Oct 28 17:12:39 2016 +0200

    runtime/race: update race runtime
    
    This updates the runtime to HEAD to keep it aligned and fixes some bugs.
    
    http://llvm.org/viewvc/llvm-project?view=revision&revision=285454
    fixes the crash on darwin related to unaligned data section (#17065).
    
    http://llvm.org/viewvc/llvm-project?view=revision&revision=285451
    enables core dumps by default (#16527).
    
    http://llvm.org/viewvc/llvm-project?view=revision&revision=285455
    adds a hook to obtain number of races reported so far (#15972).
    Can now be obtained with:
    
    //go:nosplit
    func RaceReportCount() int {
            var n uint64
            racecall(&__tsan_report_count, uintptr(unsafe.Pointer(&n)), 0, 0, 0)
            return int(n)
    }
    
    Fixes #16527.
    Fixes #17065.
    Update #15972.
    
    Change-Id: I8f869cb6275c9521a47303f3810a9965e9314357
    Reviewed-on: https://go-review.googlesource.com/32160
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7ba36f4adb43355ef4b870d64d23f9988b1279ea
Author: Keith Randall <khr@golang.org>
Date:   Wed Oct 26 21:25:56 2016 -0700

    runtime: compute size classes statically
    
    No point in computing this info on startup.
    Compute it at build time.
    This lets us spend more time computing & checking the size classes.
    
    Improve the div magic for rounding to the start of an object.
    We can now use 32-bit multiplies & shifts, which should help
    32-bit platforms.
    
    The static data is <1KB.
    
    The actual size classes are not changed by this CL.
    
    Change-Id: I6450cec7d1b2b4ad31fd3f945f504ed2ec6570e7
    Reviewed-on: https://go-review.googlesource.com/32219
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 753caecc7e576e46a329b71c49dbf0ea9bfbd867
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sat Oct 29 22:32:59 2016 -0400

    cmd/go: set CCACHE_DIR when setting HOME to non-existent dir
    
    This fixes systems for which ccache is the default compiler.
    
    Also remove a couple of temporary files created by TestImportMain.
    
    Fixes #17668.
    
    Change-Id: I1edefdcec5f417be0533c146253c35ff4928c1c0
    Reviewed-on: https://go-review.googlesource.com/32328
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7db996ee77b20b68ee583c65d59be1d81cef9090
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Mon Sep 26 20:38:57 2016 -0700

    net/http: handle 3xx redirects properly
    
    Provides redirection support for 307, 308 server statuses.
    Provides redirection support for DELETE method.
    
    Updates old tests that assumed all redirects were treated
    the way 301, 302 and 303 are processed.
    
    Fixes #9348
    Fixes #10767
    Fixes #13994
    
    Change-Id: Iffa8dbe0ff28a1afa8da59869290ec805b1dd2c4
    Reviewed-on: https://go-review.googlesource.com/29852
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f030eb634f6c0e8de9cebd7fa7c2ac7890cabcc7
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sun Oct 30 09:46:36 2016 +0900

    net: fix nit
    
    Change-Id: Iec469846dc8b5a747ad81690000f1f6f53721ea1
    Reviewed-on: https://go-review.googlesource.com/32372
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b4e714e59efd21f9140a3e8e2b0182c74bfde437
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Oct 29 12:25:20 2016 -0700

    compress/gzip: only encode MTIME if it is valid
    
    The GZIP format records the ModTime as an uint32 counting seconds since
    the Unix epoch. The zero value is explicitly defined in section 2.3.1
    as meaning no timestamp is available.
    
    Currently, the Writer always encodes the ModTime even if it is the zero
    time.Time value, which causes the Writer to try and encode the value
    -62135596800 into the uint32 MTIME field. This causes an overflow and
    results in our GZIP files having MTIME fields indicating a date in 2042-07-13.
    
    We alter the Writer to only encode ModTime if the value does not underflow
    the MTIME field (i.e., it is newer than the Unix epoch). We do not attempt
    to fix what happens when the timestamp overflows in the year 2106.
    
    We alter the Reader to only decode ModTime if the value is non-zero.
    There is no risk of overflowing time.Time when decoding.
    
    Fixes #17663
    
    Change-Id: Ie1b65770c6342cd7b14aeebe10e5a49e6c9eb730
    Reviewed-on: https://go-review.googlesource.com/32325
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4b130f92d248cfa37dceeb45622d36d9c90331ff
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Oct 29 18:44:07 2016 +0000

    net/http: update bundled http2 for IdleTimeout config sync change
    
    Updates http2 to x/net git rev 76c1a11e for:
    
         http2: initialize Server.IdleTimeout from http.Server as http1 does
         https://golang.org/cl/32230
    
         http2: change how Server.IdleTimeout is initialized from http.Server
         https://golang.org/cl/32323
    
    Fixes #14204
    
    Change-Id: I099f89fcd0d8bc0e42da163ae0a3b786fd81292f
    Reviewed-on: https://go-review.googlesource.com/32322
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5552d08b14b6a5099147934111a34f8362341ae2
Author: Russ Cox <rsc@golang.org>
Date:   Sat Oct 29 13:53:22 2016 -0400

    cmd/go: test fixes dropped from CL 31821
    
    Because git.
    
    Change-Id: Ia1e7c6ba0e8c4d47f993487d2483cbb213b465e5
    Reviewed-on: https://go-review.googlesource.com/32351
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1773cdd0811620fd59b44136a77ecef4d728ae18
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 25 08:59:35 2016 -0400

    cmd/link: fix -X importpath.name=value when import path needs escaping
    
    After the final slash, dots are %-escaped when constructing a symbol name,
    so that in the actual symbol table, the import path githost.com/my.git
    becomes githost.com/my%2egit. In this case, -X githost.com/my.git.Value=foo
    needs to set githost.com/my%2egit.Value. This is a detail of the object format
    and not something users should know or depend on, so apply the escaping
    as needed.
    
    People who have run across this already and figured out and started using
    the escaped forms with -X will find those forms not working anymore.
    That is, -X githost.com/my%2egit.Value=foo is the Go 1.7 workaround but
    will stop working in Go 1.8 once this proper fix is in place.
    People who need to keep scripts working with older and newer versions of Go
    can safely pass both forms, and one will be ignored:
    
        -X githost.com/my%2egit.Value=foo -X githost.com/my.git.Value=foo
    
    Fixes #16710.
    
    Change-Id: I0e994ccdd412a4eb8349fefce9aeb3bfc9a83cd8
    Reviewed-on: https://go-review.googlesource.com/31970
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 03d641b990bf83b0553d723a2b8764af48de4e11
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 17:14:47 2016 -0400

    net: break up >1GB reads and writes on stream connections
    
    Also fix behavior of Buffers.WriteTo when writev returns an error.
    
    Fixes #16266.
    
    Change-Id: Idc9503408ce2cb460663768fab86035cbab11aef
    Reviewed-on: https://go-review.googlesource.com/31584
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 21a1fe4ddf77a49fee1d82d1891e66b1dce932bb
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 28 17:02:29 2016 -0400

    runtime/pprof/internal/gzip0: new package for pprof
    
    Writes gzip-format uncompressed files.
    
    Change-Id: Id5dc01852e21732978700fd9efcc2d4a5899ffeb
    Reviewed-on: https://go-review.googlesource.com/32260
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit 8f91865e1b2f2df95fb4833babbd0a8fb26085c8
Author: Zev Goldstein <zev.goldstein@gmail.com>
Date:   Fri Oct 28 11:42:27 2016 -0400

    path/filepath: fix Abs on Windows
    
    The filepath.Abs function in windows did not call Clean as the
    documentation claimed.  This change not only fixes that behavior but
    also adjusts TestAbs to verify Abs calls Clean as documented.
    
    Fixes #17210
    
    Change-Id: I20c5f5026042fd7bd9d929ff5b17c8b2653f8afe
    Reviewed-on: https://go-review.googlesource.com/32292
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 833f57ed502d686ce054ff557cf3bf5b6ed1a1d2
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Thu Oct 27 11:44:51 2016 +0200

    cmd/compile: make Node.Diag a bool
    
    Change-Id: I017c2ef7cc6248d3f4e38a791cd2576e941984ed
    Reviewed-on: https://go-review.googlesource.com/32156
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7b4545653c371be73c660bc87356ec467496dbbf
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Thu Oct 27 21:52:33 2016 -0700

    cmd/compile: improve error message for unknown fields in structs
    
    Improves the error message by moving the field name before the body
    of a struct, in the error message for unknown fields for structs.
    
    * Exhibit:
    Given program:
    
    package main
    
    import "time"
    
    func main() {
      _ = struct {
        about      string
        before     map[string]uint
        update     map[string]int
        updateTime time.Time
        expect     map[string]int
      }{
        about:   "this one",
        updates: map[string]int{"gopher": 10},
      }
    }
    
    * Before:
    ./issue17631.go:20: unknown struct { about string; before map[string]uint;
     update map[string]int; updateTime time.Time; expect map[string]int } field
    'updates' in struct literal
    
    * After:
    ./issue17631.go:20: unknown field 'updates' in struct literal of type { about string;
    before map[string]uint; update map[string]int; updateTime time.Time;
    expect map[string]int }
    
    Fixes #17631
    
    Change-Id: I76842616411b931b5ad7a76bd42860dfde7739f4
    Reviewed-on: https://go-review.googlesource.com/32240
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 894abb5f680c040777f17f9f8ee5a5ab3a03cb94
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Sat Oct 29 00:53:49 2016 +0200

    runtime/race: ignore user GORACE env var in tests
    
    I did 'export GORACE=atexit_sleep_ms=0' in a console
    and then was puzzled as to why race tests fail.
    Existing GORACE env var may (or may not) override
    the one that we setup.
    Filter out GORACE as we do for other important env vars.
    
    Change-Id: I29be86b0cbb9b5dc7f9efb15729ade86fc79b0e0
    Reviewed-on: https://go-review.googlesource.com/32163
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cf28726c8d692bf74af1bd2366a6320f964a025f
Author: Than McIntosh <thanm@google.com>
Date:   Fri Oct 28 13:28:56 2016 -0400

    test: add test for gccgo issue #17640
    
    Change-Id: Iec35f9b62982da40de400397bc456149216303dc
    Reviewed-on: https://go-review.googlesource.com/32297
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ee457118cd7b11264719647fa6f7422bac2a4431
Author: Martin Möhrmann <martisch@uos.de>
Date:   Wed Oct 26 00:01:58 2016 +0200

    cmd/compile: cleanup checkmake
    
    Change-Id: Icea4661db4a254e64b2129f429e5ef21ec1612cb
    Reviewed-on: https://go-review.googlesource.com/32162
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 023556c07166be15a914d1f828d8c7b20a59a804
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Oct 28 18:25:31 2016 -0400

    time: clarify Equal docs
    
    The docs used to imply that using == would compare Locations, but of
    course it just compares Location pointers, which will have unpredictable
    results depending on how the pointers are loaded.
    
    Change-Id: I783c1309e476a9616a1c1c290eac713aba3b0b57
    Reviewed-on: https://go-review.googlesource.com/32332
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9575c580648d20ded1b538d6e05a3032fff2aaed
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Oct 28 05:57:55 2016 +0900

    net: use IPv4 reserved address blocks for documentation
    
    Updates #15228.
    
    Change-Id: Iefdffa146703ee1c04afc2b71d9de1f0a0811f86
    Reviewed-on: https://go-review.googlesource.com/32146
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 69b7fe1a9035d197e5f8040262e8ac335b66f9f8
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Fri Oct 28 06:20:44 2016 +0900

    net: deflake TestLookupNonLDH
    
    Fixes #17623.
    
    Change-Id: I4717e8399f955c9be7ba19108bb0bcc108187c04
    Reviewed-on: https://go-review.googlesource.com/32147
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a1b6e1692b063488cfcc51c258b159ccce4f7d23
Author: Peter Weinberger <pjw@google.com>
Date:   Fri Oct 28 15:12:18 2016 -0400

    runtime: ensure elapsed cycles are not negative
    
    On solaris/amd64 sometimes the reported cycle count is negative. Replace
    with 0.
    
    Change-Id: I364eea5ca072281245c7ab3afb0bf69adc3a8eae
    Reviewed-on: https://go-review.googlesource.com/32258
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ec5b6406b76462a1a97ce19f86c5c23ac1d2c830
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Oct 28 14:22:13 2016 -0700

    cmd/compile: improve not enough / too many arguments errors
    
    Use "have" and "want" and multiple lines like other similar error
    messages. Also, fix handling of ... and multi-value function calls.
    
    Fixes #17650.
    
    Change-Id: I4850e79c080eac8df3b92a4accf9e470dff63c9a
    Reviewed-on: https://go-review.googlesource.com/32261
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1bd39e79dbc146ae953284f82febf7d1fb461f4e
Author: Austin Clements <austin@google.com>
Date:   Fri Oct 28 17:18:36 2016 -0400

    runtime: fix SP adjustment on amd64p32
    
    On amd64p32, rt0_go attempts to reserve 128 bytes of scratch space on
    the stack, but due to a register mixup this ends up being a no-op. Fix
    this so we actually reserve the stack space.
    
    Change-Id: I04dbfbeb44f3109528c8ec74e1136bc00d7e1faa
    Reviewed-on: https://go-review.googlesource.com/32331
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit bd640c882a8dcb88a0497770f881bce48ab83102
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 23 11:07:49 2016 -0400

    runtime: disable stack rescanning by default
    
    With the hybrid barrier in place, we can now disable stack rescanning
    by default. This commit adds a "gcrescanstacks" GODEBUG variable that
    is off by default but can be set to re-enable STW stack rescanning.
    The plan is to leave this off but available in Go 1.8 for debugging
    and as a fallback.
    
    With this change, worst-case mark termination time at GOMAXPROCS=12
    *not* including time spent stopping the world (which is still
    unbounded) is reliably under 100 µs, with a 95%ile around 50 µs in
    every benchmark I tried (the go1 benchmarks, the x/benchmarks garbage
    benchmark, and the gcbench activegs and rpc benchmarks). Including
    time spent stopping the world usually adds about 20 µs to total STW
    time at GOMAXPROCS=12, but I've seen it add around 150 µs in these
    benchmarks when a goroutine takes time to reach a safe point (see
    issue #10958) or when stopping the world races with goroutine
    switches. At GOMAXPROCS=1, where this isn't an issue, worst case STW
    is typically 30 µs.
    
    The go-gcbench activegs benchmark is designed to stress large numbers
    of dirty stacks. This commit reduces 95%ile STW time for 500k dirty
    stacks by nearly three orders of magnitude, from 150ms to 195µs.
    
    This has little effect on the throughput of the go1 benchmarks or the
    x/benchmarks benchmarks.
    
    name         old time/op  new time/op  delta
    XGarbage-12  2.31ms ± 0%  2.32ms ± 1%  +0.28%  (p=0.001 n=17+16)
    XJSON-12     12.4ms ± 0%  12.4ms ± 0%  +0.41%  (p=0.000 n=18+18)
    XHTTP-12     11.8µs ± 0%  11.8µs ± 1%    ~     (p=0.492 n=20+18)
    
    It reduces the tail latency of the x/benchmarks HTTP benchmark:
    
    name      old p50-time  new p50-time  delta
    XHTTP-12    489µs ± 0%    491µs ± 1%  +0.54%  (p=0.000 n=20+18)
    
    name      old p95-time  new p95-time  delta
    XHTTP-12    957µs ± 1%    960µs ± 1%  +0.28%  (p=0.002 n=20+17)
    
    name      old p99-time  new p99-time  delta
    XHTTP-12   1.76ms ± 1%   1.64ms ± 1%  -7.20%  (p=0.000 n=20+18)
    
    Comparing to the beginning of the hybrid barrier implementation
    ("runtime: parallelize STW mcache flushing") shows that the hybrid
    barrier trades a small performance impact for much better STW latency,
    as expected. The magnitude of the performance impact is generally
    small:
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.37s ± 1%     2.42s ± 1%  +2.04%  (p=0.000 n=19+18)
    Fannkuch11-12                2.84s ± 0%     2.72s ± 0%  -4.00%  (p=0.000 n=19+19)
    FmtFprintfEmpty-12          44.2ns ± 1%    45.2ns ± 1%  +2.20%  (p=0.000 n=17+19)
    FmtFprintfString-12          130ns ± 1%     134ns ± 0%  +2.94%  (p=0.000 n=18+16)
    FmtFprintfInt-12             114ns ± 1%     117ns ± 0%  +3.01%  (p=0.000 n=19+15)
    FmtFprintfIntInt-12          176ns ± 1%     182ns ± 0%  +3.17%  (p=0.000 n=20+15)
    FmtFprintfPrefixedInt-12     186ns ± 1%     187ns ± 1%  +1.04%  (p=0.000 n=20+19)
    FmtFprintfFloat-12           251ns ± 1%     250ns ± 1%  -0.74%  (p=0.000 n=17+18)
    FmtManyArgs-12               746ns ± 1%     761ns ± 0%  +2.08%  (p=0.000 n=19+20)
    GobDecode-12                6.57ms ± 1%    6.65ms ± 1%  +1.11%  (p=0.000 n=19+20)
    GobEncode-12                5.59ms ± 1%    5.65ms ± 0%  +1.08%  (p=0.000 n=17+17)
    Gzip-12                      223ms ± 1%     223ms ± 1%  -0.31%  (p=0.006 n=20+20)
    Gunzip-12                   38.0ms ± 0%    37.9ms ± 1%  -0.25%  (p=0.009 n=19+20)
    HTTPClientServer-12         77.5µs ± 1%    78.9µs ± 2%  +1.89%  (p=0.000 n=20+20)
    JSONEncode-12               14.7ms ± 1%    14.9ms ± 0%  +0.75%  (p=0.000 n=20+20)
    JSONDecode-12               53.0ms ± 1%    55.9ms ± 1%  +5.54%  (p=0.000 n=19+19)
    Mandelbrot200-12            3.81ms ± 0%    3.81ms ± 1%  +0.20%  (p=0.023 n=17+19)
    GoParse-12                  3.17ms ± 1%    3.18ms ± 1%    ~     (p=0.057 n=20+19)
    RegexpMatchEasy0_32-12      71.7ns ± 1%    70.4ns ± 1%  -1.77%  (p=0.000 n=19+20)
    RegexpMatchEasy0_1K-12       946ns ± 0%     946ns ± 0%    ~     (p=0.405 n=18+18)
    RegexpMatchEasy1_32-12      67.2ns ± 2%    67.3ns ± 2%    ~     (p=0.732 n=20+20)
    RegexpMatchEasy1_1K-12       374ns ± 1%     378ns ± 1%  +1.14%  (p=0.000 n=18+19)
    RegexpMatchMedium_32-12      107ns ± 1%     107ns ± 1%    ~     (p=0.259 n=18+20)
    RegexpMatchMedium_1K-12     34.2µs ± 1%    34.5µs ± 1%  +1.03%  (p=0.000 n=18+18)
    RegexpMatchHard_32-12       1.77µs ± 1%    1.79µs ± 1%  +0.73%  (p=0.000 n=19+18)
    RegexpMatchHard_1K-12       53.6µs ± 1%    54.2µs ± 1%  +1.10%  (p=0.000 n=19+19)
    Template-12                 61.5ms ± 1%    63.9ms ± 0%  +3.96%  (p=0.000 n=18+18)
    TimeParse-12                 303ns ± 1%     300ns ± 1%  -1.08%  (p=0.000 n=19+20)
    TimeFormat-12                318ns ± 1%     320ns ± 0%  +0.79%  (p=0.000 n=19+19)
    Revcomp-12 (*)               509ms ± 3%     504ms ± 0%    ~     (p=0.967 n=7+12)
    [Geo mean]                  54.3µs         54.8µs       +0.88%
    
    (*) Revcomp is highly non-linear, so I only took samples with 2
    iterations.
    
    name         old time/op  new time/op  delta
    XGarbage-12  2.25ms ± 0%  2.32ms ± 1%  +2.74%  (p=0.000 n=16+16)
    XJSON-12     11.6ms ± 0%  12.4ms ± 0%  +6.81%  (p=0.000 n=18+18)
    XHTTP-12     11.6µs ± 1%  11.8µs ± 1%  +1.62%  (p=0.000 n=17+18)
    
    Updates #17503.
    
    Updates #17099, since you can't have a rescan list bug if there's no
    rescan list. I'm not marking it as fixed, since gcrescanstacks can
    still be set to re-enable the rescan lists.
    
    Change-Id: I6e926b4c2dbd4cd56721869d4f817bdbb330b851
    Reviewed-on: https://go-review.googlesource.com/31766
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 5380b22991dfb5f3bad25cd2e29f59fd07716581
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 23 11:03:56 2016 -0400

    runtime: implement unconditional hybrid barrier
    
    This implements the unconditional version of the hybrid deletion write
    barrier, which always shades both the old and new pointer. It's
    unconditional for now because barriers on channel operations require
    checking both the source and destination stacks and we don't have a
    way to funnel this information into the write barrier at the moment.
    
    As part of this change, we modify the typed memclr operations
    introduced earlier to invoke the write barrier.
    
    This has basically no overall effect on benchmark performance. This is
    good, since it indicates that neither the extra shade nor the new bulk
    clear barriers have much effect. It also has little effect on latency.
    This is expected, since we haven't yet modified mark termination to
    take advantage of the hybrid barrier.
    
    Updates #17503.
    
    Change-Id: Iebedf84af2f0e857bd5d3a2d525f760b5cf7224b
    Reviewed-on: https://go-review.googlesource.com/31765
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit ee3d20129a89047ccb4a4e157688d2f24db8f343
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 26 17:05:41 2016 -0400

    runtime: avoid getfull() barrier most of the time
    
    With the hybrid barrier, unless we're doing a STW GC or hit a very
    rare race (~once per all.bash) that can start mark termination before
    all of the work is drained, we don't need to drain the work queue at
    all. Even draining an empty work queue is rather expensive since we
    have to enter the getfull() barrier, so it's worth avoiding this.
    
    Conveniently, it's quite easy to detect whether or not we actually
    need the getufull() barrier: since the world is stopped when we enter
    mark termination, everything must have flushed its work to the work
    queue, so we can just check the queue. If the queue is empty and we
    haven't queued up any jobs that may create more work (which should
    always be the case with the hybrid barrier), we can simply have all GC
    workers perform non-blocking drains.
    
    Also conveniently, this solution is quite safe. If we do somehow screw
    something up and there's work on the work queue, some worker will
    still process it, it just may not happen in parallel.
    
    This is not the "right" solution, but it's simple, expedient,
    low-risk, and maintains compatibility with debug.gcrescanstacks. When
    we remove the gcrescanstacks fallback in Go 1.9, we should also fix
    the race that starts mark termination early, and then we can eliminate
    work draining from mark termination.
    
    Updates #17503.
    
    Change-Id: I7b3cd5de6a248ab29d78c2b42aed8b7443641361
    Reviewed-on: https://go-review.googlesource.com/32186
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit d8256824ac39e4badb14feffe94f4342a0bd21b3
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 24 17:56:00 2016 -0400

    runtime: remove unnecessary step from bulkBarrierPreWrite
    
    Currently bulkBarrierPreWrite calls writebarrierptr_prewrite, but this
    means that we check writeBarrier.needed twice and perform cgo checks
    twice.
    
    Change bulkBarrierPreWrite to call writebarrierptr_prewrite1 to skip
    over these duplicate checks.
    
    This may speed up bulkBarrierPreWrite slightly, but mostly this will
    save us from running out of nosplit stack space on ppc64x in the near
    future.
    
    Updates #17503.
    
    Change-Id: I1cea1a2207e884ab1a279c6a5e378dcdc048b63e
    Reviewed-on: https://go-review.googlesource.com/31890
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 70c107c68dca7d57a24b35dd81420fb889aa1031
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 19 15:49:31 2016 -0400

    runtime: add deletion barriers on gobuf.ctxt
    
    gobuf.ctxt is set to nil from many places in assembly code and these
    assignments require write barriers with the hybrid barrier.
    
    Conveniently, in most of these places ctxt should already be nil, in
    which case we don't need the barrier. This commit changes these places
    to assert that ctxt is already nil.
    
    gogo is more complicated, since ctxt may not already be nil. For gogo,
    we manually perform the write barrier if ctxt is not nil.
    
    Updates #17503.
    
    Change-Id: I9d75e27c75a1b7f8b715ad112fc5d45ffa856d30
    Reviewed-on: https://go-review.googlesource.com/31764
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 8f81dfe8b47e975b90bb4a2f8dd314d32c633176
Author: Austin Clements <austin@google.com>
Date:   Mon Aug 22 16:02:54 2016 -0400

    runtime: perform write barrier before pointer write
    
    Currently, we perform write barriers after performing pointer writes.
    At the moment, it simply doesn't matter what order this happens in, as
    long as they appear atomic to GC. But both the hybrid barrier and ROC
    are going to require a pre-write write barrier.
    
    For the hybrid barrier, this is important because the barrier needs to
    observe both the current value of the slot and the value that will be
    written to it. (Alternatively, the caller could do the write and pass
    in the old value, but it seems easier and more useful to just swap the
    order of the barrier and the write.)
    
    For ROC, this is necessary because, if the pointer write is going to
    make the pointer reachable to some goroutine that it currently is not
    visible to, the garbage collector must take some special action before
    that pointer becomes more broadly visible.
    
    This commits swaps pointer writes around so the write barrier occurs
    before the pointer write.
    
    The main subtlety here is bulk memory writes. Currently, these copy to
    the destination first and then use the pointer bitmap of the
    destination to find the copied pointers and invoke the write barrier.
    This is necessary because the source may not have a pointer bitmap. To
    handle these, we pass both the source and the destination to the bulk
    memory barrier, which uses the pointer bitmap of the destination, but
    reads the pointer values from the source.
    
    Updates #17503.
    
    Change-Id: I78ecc0c5c94ee81c29019c305b3d232069294a55
    Reviewed-on: https://go-review.googlesource.com/31763
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 0f06d0a051714d14b923b0a9164ab1b3f463aa74
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 12:04:31 2016 -0400

    cmd/go: apply import restrictions to test code too
    
    We reject import of main packages, but we missed tests.
    Reject in all tests except test of that main package.
    
    We reject local (relative) imports from code with a
    non-local import path, but again we missed tests.
    Reject those too.
    
    Fixes #14811.
    Fixes #15795.
    Fixes #17475.
    
    Change-Id: I535ff26889520276a891904f54f1a85b2c40207d
    Reviewed-on: https://go-review.googlesource.com/31821
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 91c1cdfbdbecbc33ad396f55d9e8b5619959fde1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Oct 28 13:16:25 2016 -0700

    cmd/compile: add Param to Sizeof test
    
    Change-Id: I2a710f0e9b484b3dfc581d3a9a23aa13321ec267
    Reviewed-on: https://go-review.googlesource.com/32316
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a866df26711c615dfe92ab1b00d256d3d1085f0e
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Oct 26 18:10:40 2016 -0400

    cmd/internal/obj/arm64: materialize float constant 0 from zero register
    
    Materialize float constant 0 from integer zero register, instead
    of loading from constant pool.
    
    Also fix assembling FMOV from zero register to FP register.
    
    Change-Id: Ie413dd342cedebdb95ba8cfc220e23ed2a39e885
    Reviewed-on: https://go-review.googlesource.com/32250
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 9d1efba28db4c045356c92c20f98cf12b5f31d72
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Oct 27 14:33:58 2016 -0400

    cmd/link: put text at address 0x1000000 on darwin/amd64
    
    Apparently on macOS Sierra LLDB thinks /usr/lib/dyld is mapped
    at address 0, even if Go code starts at 0x1000, and it looks up
    addresses from dyld which shadows Go symbols. Move Go binary at
    a higher address to avoid clash.
    
    Fixes #17463. Re-enable TestLldbPython.
    
    Change-Id: I89ca6f3ee48aa6da9862bfa0c2da91477cc93255
    Reviewed-on: https://go-review.googlesource.com/32185
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit c39918a04991387f14cab1204f54fafab81bc105
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 18 10:26:28 2016 -0400

    cmd/compile: disable various write barrier optimizations
    
    Several of our current write barrier elision optimizations are invalid
    with the hybrid barrier. Eliding the hybrid barrier requires that
    *both* the current and new pointer be already shaded and, since we
    don't have the flow analysis to figure out anything about the slot's
    current value, for now we have to just disable several of these
    optimizations.
    
    This has a slight impact on binary size. On linux/amd64, the go tool
    binary increases by 0.7% and the compile binary increases by 1.5%.
    
    It also has a slight impact on performance, as one would expect. We'll
    win some of this back in subsequent commits.
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.38s ± 1%     2.40s ± 1%  +0.82%  (p=0.000 n=18+20)
    Fannkuch11-12                2.84s ± 1%     2.70s ± 0%  -4.97%  (p=0.000 n=18+18)
    FmtFprintfEmpty-12          44.2ns ± 1%    46.4ns ± 2%  +4.89%  (p=0.000 n=16+18)
    FmtFprintfString-12          131ns ± 0%     134ns ± 1%  +2.05%  (p=0.000 n=12+19)
    FmtFprintfInt-12             114ns ± 1%     117ns ± 1%  +3.26%  (p=0.000 n=19+20)
    FmtFprintfIntInt-12          176ns ± 1%     181ns ± 1%  +3.25%  (p=0.000 n=20+20)
    FmtFprintfPrefixedInt-12     185ns ± 1%     190ns ± 1%  +2.77%  (p=0.000 n=19+18)
    FmtFprintfFloat-12           249ns ± 1%     254ns ± 1%  +1.71%  (p=0.000 n=18+20)
    FmtManyArgs-12               747ns ± 1%     743ns ± 1%  -0.58%  (p=0.000 n=19+18)
    GobDecode-12                6.57ms ± 1%    6.61ms ± 0%  +0.73%  (p=0.000 n=19+20)
    GobEncode-12                5.58ms ± 1%    5.60ms ± 0%  +0.27%  (p=0.001 n=18+18)
    Gzip-12                      223ms ± 1%     223ms ± 1%    ~     (p=0.351 n=19+20)
    Gunzip-12                   37.9ms ± 0%    37.9ms ± 1%    ~     (p=0.095 n=16+20)
    HTTPClientServer-12         77.8µs ± 1%    78.5µs ± 1%  +0.97%  (p=0.000 n=19+20)
    JSONEncode-12               14.8ms ± 1%    14.8ms ± 1%    ~     (p=0.079 n=20+19)
    JSONDecode-12               53.7ms ± 1%    54.2ms ± 1%  +0.92%  (p=0.000 n=20+19)
    Mandelbrot200-12            3.81ms ± 1%    3.81ms ± 0%    ~     (p=0.916 n=19+18)
    GoParse-12                  3.19ms ± 1%    3.19ms ± 1%    ~     (p=0.175 n=20+19)
    RegexpMatchEasy0_32-12      71.9ns ± 1%    70.6ns ± 1%  -1.87%  (p=0.000 n=19+20)
    RegexpMatchEasy0_1K-12       946ns ± 0%     944ns ± 0%  -0.22%  (p=0.000 n=19+16)
    RegexpMatchEasy1_32-12      67.3ns ± 2%    66.8ns ± 1%  -0.72%  (p=0.008 n=20+20)
    RegexpMatchEasy1_1K-12       374ns ± 1%     384ns ± 1%  +2.69%  (p=0.000 n=18+20)
    RegexpMatchMedium_32-12      107ns ± 1%     107ns ± 1%    ~     (p=1.000 n=20+20)
    RegexpMatchMedium_1K-12     34.3µs ± 1%    34.6µs ± 1%  +0.90%  (p=0.000 n=20+20)
    RegexpMatchHard_32-12       1.78µs ± 1%    1.80µs ± 1%  +1.45%  (p=0.000 n=20+19)
    RegexpMatchHard_1K-12       53.6µs ± 0%    54.5µs ± 1%  +1.52%  (p=0.000 n=19+18)
    Revcomp-12                   417ms ± 5%     391ms ± 1%  -6.42%  (p=0.000 n=16+19)
    Template-12                 61.1ms ± 1%    64.2ms ± 0%  +5.07%  (p=0.000 n=19+20)
    TimeParse-12                 302ns ± 1%     305ns ± 1%  +0.90%  (p=0.000 n=18+18)
    TimeFormat-12                319ns ± 1%     315ns ± 1%  -1.25%  (p=0.000 n=18+18)
    [Geo mean]                  54.0µs         54.3µs       +0.58%
    
    name         old time/op  new time/op  delta
    XGarbage-12  2.24ms ± 2%  2.28ms ± 1%  +1.68%  (p=0.000 n=18+17)
    XHTTP-12     11.4µs ± 1%  11.6µs ± 2%  +1.63%  (p=0.000 n=18+18)
    XJSON-12     11.6ms ± 0%  12.5ms ± 0%  +7.84%  (p=0.000 n=18+17)
    
    Updates #17503.
    
    Change-Id: I1899f8e35662971e24bf692b517dfbe2b533c00c
    Reviewed-on: https://go-review.googlesource.com/31572
    Reviewed-by: Keith Randall <khr@golang.org>

commit c3163d23f038a595dc4dd8e1218f412a443a39fa
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 19 16:16:40 2016 -0400

    runtime: eliminate write barriers from save
    
    As for dropg, save is writing a nil pointer that will generate a write
    barrier with the hybrid barrier. However, in this case, ctxt always
    should already be nil, so replace the write with an assertion that
    this is the case.
    
    At this point, we're ready to disable the write barrier elision
    optimizations that interfere with the hybrid barrier.
    
    Updates #17503.
    
    Change-Id: I83208e65aa33403d442401f355b2e013ab9a50e9
    Reviewed-on: https://go-review.googlesource.com/31571
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 8044b77a57f9d22e0815ed1476ffa8156b622862
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 19 16:00:07 2016 -0400

    runtime: eliminate write barriers from dropg
    
    Currently this contains no write barriers because it's writing nil
    pointers, but with the hybrid barrier, even these will produce write
    barriers. However, since these are *gs and *ms, they don't need write
    barriers, so we can simply eliminate them.
    
    Updates #17503.
    
    Change-Id: Ib188a60492c5cfb352814bf9b2bcb2941fb7d6c0
    Reviewed-on: https://go-review.googlesource.com/31570
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 85c22bc3a5e9ce03cd0ca668285755ce430456e0
Author: Austin Clements <austin@google.com>
Date:   Fri Sep 9 09:34:26 2016 -0400

    runtime: mark tiny blocks at GC start
    
    The hybrid barrier requires allocate-black, but there's one case where
    we don't currently allocate black: the tiny allocator. If we allocate
    a *new* tiny alloc block during GC, it will be allocated black, but if
    we allocated the current block before GC, it won't be black, and the
    further allocations from it won't mark it, which means we may free a
    reachable tiny block during sweeping.
    
    Fix this by passing over all mcaches at the beginning of mark, while
    the world is still stopped, and greying their tiny blocks.
    
    Updates #17503.
    
    Change-Id: I04d4df7cc2f553f8f7b1e4cb0b52e2946588111a
    Reviewed-on: https://go-review.googlesource.com/31456
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit ee785f03a24e0373be4c2d7256413296735c3414
Author: Austin Clements <austin@google.com>
Date:   Thu Oct 13 15:34:56 2016 -0400

    runtime: shade stack-to-stack copy when starting a goroutine
    
    The hybrid barrier requires barriers on stack-to-stack copies if
    either stack is grey. There are only two instances of this in the
    runtime: channel sends and starting a goroutine. Channel sends already
    use typedmemmove and hence have the necessary barriers. This commits
    adds barriers for the stack-to-stack copy when starting a goroutine.
    
    Updates #17503.
    
    Change-Id: Ibb55e08127ca4d021ac54be61cb96732efa5df5b
    Reviewed-on: https://go-review.googlesource.com/31455
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 0c0960a2349d00369f7e1781ec3d8b04d96a5b80
Author: Michael Matloob <matloob@golang.org>
Date:   Fri Oct 28 15:58:44 2016 -0400

    runtime/pprof/internal/profile: add copyright notice to profile_memmap.go
    
    Change-Id: Ia511b0aadc87eb53e084d14cdb90ba4be958a43e
    Reviewed-on: https://go-review.googlesource.com/32259
    Reviewed-by: Austin Clements <austin@google.com>

commit b33030a72754cb55d6ec137e79facacb398c9be4
Author: Michael Matloob <matloob@golang.org>
Date:   Fri Oct 28 15:28:18 2016 -0400

    runtime/pprof: write profiles in protobuf format.
    
    Original Change by Daria Kolistratova <daria.kolistratova@intel.com>
    
    Added functions with suffix proto and stuff from pprof tool to translate
    to protobuf. Done as the profile proto is more extensible than the legacy
    pprof format and is pprof's preferred profile format. Large part was taken
    from https://github.com/google/pprof tool. Tested by hand and compared the
    result with translated by pprof tool, profiles are identical.
    Fixes #16093
    
    Change-Id: I2751345b09a66ee2b6aa64be76cba4cd1c326aa6
    Reviewed-on: https://go-review.googlesource.com/32257
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 30651b3bbbfda86e8188dfd89cb326a4db085e25
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 12:22:16 2016 -0400

    encoding/csv: document Read error behavior
    
    Fixes #17342.
    
    Change-Id: I76af756d7aff464554c5564d444962a468d0eccc
    Reviewed-on: https://go-review.googlesource.com/32172
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit e2bcae7875e37c13f92dc3cf16614bf7e70fa6c8
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 13:06:37 2016 -0400

    cmd/go, go/build: document form of import paths
    
    Fixes #16164.
    
    Change-Id: Ic8f51ebd8235640143913a07b70f5b41ee061fe4
    Reviewed-on: https://go-review.googlesource.com/32114
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 2a7272b42230c0d55c1ec243d123fea9ba035063
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 22:18:02 2016 -0400

    runtime/trace: deflake TestTraceSymbolize
    
    Waiting 2ms for all the kicked-off goroutines to run and block
    seems a little optimistic. No harm done by waiting for 200ms instead.
    
    Fixes #17238.
    
    Change-Id: I827532ea2f5f1f3ed04179f8957dd2c563946ed0
    Reviewed-on: https://go-review.googlesource.com/32103
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3366d6a39bbaaa011a11c651975a88d9f05e00b6
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 22:02:12 2016 -0400

    os: adjust (*File).Read comment
    
    Fixes #6639.
    
    Change-Id: Iefce87c5521504fd41843df8462cfd840c24410f
    Reviewed-on: https://go-review.googlesource.com/32102
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit bd8103d50b5e576610709738d9e3138ae7887c28
Author: Quentin Smith <quentin@golang.org>
Date:   Fri Oct 21 16:34:40 2016 -0400

    os/exec: document how Command fills in Cmd.Args
    
    Fixes #17536
    
    Change-Id: Ica8c3d696848822ac65b7931455b1fd94809bfe8
    Reviewed-on: https://go-review.googlesource.com/31710
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 88518e7dd6a118167aa71851a3a9f24d0230bc82
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 26 14:34:20 2016 -0400

    runtime: zero-initialize LR on new stacks
    
    Currently we initialize LR on a new stack by writing nil to it. But
    this is an initializing write since the newly allocated stack is not
    zeroed, so this is unsafe with the hybrid barrier. Change this is a
    uintptr write to avoid a bad write barrier.
    
    Updates #17503.
    
    Change-Id: I062ac352e35df7da4644c1f2a5aaab87049d1f60
    Reviewed-on: https://go-review.googlesource.com/32093
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit d3836aba316a6a5ee9410b9abd2f42120af4ffe6
Author: Austin Clements <austin@google.com>
Date:   Fri Oct 14 13:39:07 2016 -0400

    runtime: ensure finalizers are zero-initialized before reuse
    
    We reuse finalizers in finblocks, which are allocated off-heap. This
    means they have to be zero-initialized before becoming visible to the
    garbage collector. We actually already do this by clearing the
    finalizer before returning it to the pool, but we're not careful to
    enforce correct memory ordering. Fix this by manipulating the
    finalizer count atomically so these writes synchronize properly with
    the garbage collector.
    
    Updates #17503.
    
    Change-Id: I7797d31df3c656c9fe654bc6da287f66a9e2037d
    Reviewed-on: https://go-review.googlesource.com/31454
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit db56a63547d7ae9f19afd2497c67f717154f9115
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 3 14:45:52 2016 -0400

    runtime: avoid write barriers to uninitialized finalizer frame memory
    
    runfinq allocates a stack frame on the heap for constructing the
    finalizer function calls and reuses it for each call. However, because
    the type of this frame is constantly shifting, it tells mallocgc there
    are no pointers in it and it acts essentially like uninitialized
    memory between uses. But runfinq uses pointer writes with write
    barriers to "initialize" this memory, which is not going to be safe
    with the hybrid barrier, since the hybrid barrier may see a stale
    pointer left in the "uninitialized" frame.
    
    Fix this by zero-initializing the argument values in the frame before
    writing the argument pointers.
    
    Updates #17503.
    
    Change-Id: I951c0a2be427eb9082a32d65c4410e6fdef041be
    Reviewed-on: https://go-review.googlesource.com/31453
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit c5e7006540ca949b481a0477d1308e1373dd5c31
Author: Austin Clements <austin@google.com>
Date:   Fri Oct 14 14:06:38 2016 -0400

    runtime: document rules about unmanaged memory
    
    Updates #17503.
    
    Change-Id: I109d8742358ae983fdff3f3dbb7136973e81f4c3
    Reviewed-on: https://go-review.googlesource.com/31452
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 8a7f0ad0b5b08faa09751b5528e5fa8831745aea
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 18 11:06:28 2016 -0400

    cmd/compile: use typedmemclr for zeroing if there are pointers
    
    Currently, zeroing generates an ssa.OpZero, which never has write
    barriers, even if the assignment is an OASWB. The hybrid barrier
    requires write barriers on zeroing, so change OASWB to generate an
    ssa.OpZeroWB when assigning the zero value, which turns into a
    typedmemclr.
    
    Updates #17503.
    
    Change-Id: Ib37ac5e39f578447dbd6b36a6a54117d5624784d
    Reviewed-on: https://go-review.googlesource.com/31451
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 58e2edafb718718225056530a7a09ee3e08a96d1
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 18 10:01:56 2016 -0400

    cmd/compile: lower slice clears to memclrHasPointers
    
    If a slice's backing store has pointers, we need to lower clears of
    that slice to memclrHasPointers instead of memclrNoHeapPointers.
    
    Updates #17503.
    
    Change-Id: I20750e4bf57f7b8862f3d898bfb32d964b91d07b
    Reviewed-on: https://go-review.googlesource.com/31450
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit ef3df18944d2d210f99de88fee01414ab1fa8f66
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 25 23:15:30 2016 -0400

    mime/multipart: simplify Part.Read
    
    The basic structure of Part.Read should be simple:
    do what you can with the current buffered data,
    reading more as you need it. Make it that way.
    
    Working entirely in the bufio.Reader's buffer eliminates
    the need for an additional bytes.Buffer.
    
    This structure should be easier to extend in the future as
    more special cases arise.
    
    Change-Id: I83cb24a755a1767c4c037f9ece6716460c3ecd01
    Reviewed-on: https://go-review.googlesource.com/32092
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 14f3284ddb682ccf111716b50f43dc6ee072cf4c
Author: Austin Clements <austin@google.com>
Date:   Fri Oct 28 18:40:38 2016 +0000

    Revert "runtime/pprof: write profiles in protobuf format."
    
    This reverts commit 7d14401bcbee4a8ff33ac869ef5ebb156a179ab6.
    
    Reason for revert: Doesn't build.
    
    Change-Id: I766179ab9225109d9232f783326e4d3843254980
    Reviewed-on: https://go-review.googlesource.com/32256
    Reviewed-by: Russ Cox <rsc@golang.org>

commit eb88b3eefa113f67e7cf72dfd085f65bbd125179
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 20:23:03 2016 -0400

    net: add (*UnixListener).SetUnlinkOnClose
    
    Let users control whether unix listener socket file is unlinked on close.
    
    Fixes #13877.
    
    Change-Id: I9d1cb47e31418d655f164d15c67e188656a67d1c
    Reviewed-on: https://go-review.googlesource.com/32099
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 13558c41ffa29d0af80e7e06d08af8eb0f0055fb
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 20:13:33 2016 -0400

    net: only remove Unix domain socket file on the first call to Close
    
    Fixes #17131.
    
    Change-Id: I60b381687746fadce12ef18a190cbe3f435172f2
    Reviewed-on: https://go-review.googlesource.com/32098
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 87e48c5afdcf5e01bb2b7f51b7643e8901f4b7f9
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 17 18:41:56 2016 -0400

    runtime, cmd/compile: rename memclr -> memclrNoHeapPointers
    
    Since barrier-less memclr is only safe in very narrow circumstances,
    this commit renames memclr to avoid accidentally calling memclr on
    typed memory. This can cause subtle, non-deterministic bugs, so it's
    worth some effort to prevent. In the near term, this will also prevent
    bugs creeping in from any concurrent CLs that add calls to memclr; if
    this happens, whichever patch hits master second will fail to compile.
    
    This also adds the other new memclr variants to the compiler's
    builtin.go to minimize the churn on that binary blob. We'll use these
    in future commits.
    
    Updates #17503.
    
    Change-Id: I00eead049f5bd35ca107ea525966831f3d1ed9ca
    Reviewed-on: https://go-review.googlesource.com/31369
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit ae3bb4a537c84e43be2ed7b79e84450332aafe2d
Author: Austin Clements <austin@google.com>
Date:   Sun Sep 25 17:12:43 2016 -0400

    runtime: make fixalloc zero allocations on reuse
    
    Currently fixalloc does not zero memory it reuses. This is dangerous
    with the hybrid barrier if the type may contain heap pointers, since
    it may cause us to observe a dead heap pointer on reuse. It's also
    error-prone since it's the only allocator that doesn't zero on
    allocation (mallocgc of course zeroes, but so do persistentalloc and
    sysAlloc). It's also largely pointless: for mcache, the caller
    immediately memclrs the allocation; and the two specials types are
    tiny so there's no real cost to zeroing them.
    
    Change fixalloc to zero allocations by default.
    
    The only type we don't zero by default is mspan. This actually
    requires that the spsn's sweepgen survive across freeing and
    reallocating a span. If we were to zero it, the following race would
    be possible:
    
    1. The current sweepgen is 2. Span s is on the unswept list.
    
    2. Direct sweeping sweeps span s, finds it's all free, and releases s
       to the fixalloc.
    
    3. Thread 1 allocates s from fixalloc. Suppose this zeros s, including
       s.sweepgen.
    
    4. Thread 1 calls s.init, which sets s.state to _MSpanDead.
    
    5. On thread 2, background sweeping comes across span s in allspans
       and cas's s.sweepgen from 0 (sg-2) to 1 (sg-1). Now it thinks it
       owns it for sweeping. 6. Thread 1 continues initializing s.
       Everything breaks.
    
    I would like to fix this because it's obviously confusing, but it's a
    subtle enough problem that I'm leaving it alone for now. The solution
    may be to skip sweepgen 0, but then we have to think about wrap-around
    much more carefully.
    
    Updates #17503.
    
    Change-Id: Ie08691feed3abbb06a31381b94beb0a2e36a0613
    Reviewed-on: https://go-review.googlesource.com/31368
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit f4dcc9b29b052b99b97d0e445cda589f08bfc798
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 18 17:29:37 2016 -0400

    runtime: make _MSpanDead be the zero state
    
    Currently the zero value of an mspan is in the "in use" state. This
    seems like a bad idea in general. But it's going to wreak havoc when
    we make fixalloc zero allocations: even "freed" mspan objects are
    still on the allspans list and still get looked at by the garbage
    collector. Hence, if we leave the mspan states the way they are,
    allocating a span that reuses old memory will temporarily pass that
    span (which is visible to GC!) through the "in use" state, which can
    cause "unswept span" panics.
    
    Fix all of this by making the zero state "dead".
    
    Updates #17503.
    
    Change-Id: I77c7ac06e297af4b9e6258bc091c37abe102acc3
    Reviewed-on: https://go-review.googlesource.com/31367
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit aa581f51570b1c35dc2648226fd8de861de526d4
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 17 17:00:05 2016 -0400

    runtime: use typedmemclr for typed memory
    
    The hybrid barrier requires distinguishing typed and untyped memory
    even when zeroing because the *current* contents of the memory matters
    even when overwriting.
    
    This commit introduces runtime.typedmemclr and runtime.memclrHasPointers
    as a typed memory clearing functions parallel to runtime.typedmemmove.
    Currently these simply call memclr, but with the hybrid barrier we'll
    need to shade any pointers we're overwriting. These will provide us
    with the necessary hooks to do so.
    
    Updates #17503.
    
    Change-Id: I74478619f8907825898092aaa204d6e4690f27e6
    Reviewed-on: https://go-review.googlesource.com/31366
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit a475a38a3dcd48541f60e40b1dac3c84ab72d0e5
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 25 13:56:37 2016 -0400

    runtime: parallelize STW mcache flushing
    
    Currently all mcaches are flushed in a single STW root job. This takes
    about 5 µs per P, but since it's done sequentially it adds about
    5*GOMAXPROCS µs to the STW.
    
    Fix this by parallelizing the job. Since there are exactly GOMAXPROCS
    mcaches to flush, this parallelizes quite nicely and brings the STW
    latency cost down to a constant 5 µs (assuming GOMAXPROCS actually
    reflects the number of CPUs).
    
    Updates #17503.
    
    Change-Id: Ibefeb1c2229975d5137c6e67fac3b6c92103742d
    Reviewed-on: https://go-review.googlesource.com/32033
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 20edeabc0fc73c6212769142f80e921c2e07ee08
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Oct 27 20:15:29 2016 -0700

    cmd/compile: don't alloc Name/Param for unresolved syms
    
    ONONAME nodes generated from unresolved symbols don't need Params.
    They only need Names to store Iota; move Iota to Node.Xoffset.
    While we're here, change iota to int64 to reduce casting.
    
    Passes toolstash -cmp.
    
    name       old alloc/op     new alloc/op     delta
    Template       39.9MB ± 0%      39.7MB ± 0%  -0.39%        (p=0.000 n=19+20)
    Unicode        30.9MB ± 0%      30.7MB ± 0%  -0.35%        (p=0.000 n=20+20)
    GoTypes         119MB ± 0%       118MB ± 0%  -0.42%        (p=0.000 n=20+20)
    Compiler        464MB ± 0%       461MB ± 0%  -0.54%        (p=0.000 n=19+20)
    
    name       old allocs/op    new allocs/op    delta
    Template         386k ± 0%        383k ± 0%  -0.62%        (p=0.000 n=20+20)
    Unicode          323k ± 0%        321k ± 0%  -0.49%        (p=0.000 n=20+20)
    GoTypes         1.16M ± 0%       1.15M ± 0%  -0.67%        (p=0.000 n=20+20)
    Compiler        4.09M ± 0%       4.05M ± 0%  -0.95%        (p=0.000 n=20+20)
    
    Change-Id: Ib27219a0d0405def1b4dadacf64935ba12d10a94
    Reviewed-on: https://go-review.googlesource.com/32237
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 7d14401bcbee4a8ff33ac869ef5ebb156a179ab6
Author: unknown <daria.kolistratova@intel.com>
Date:   Fri Oct 7 18:21:03 2016 +0300

    runtime/pprof: write profiles in protobuf format.
    
    Added functions with suffix proto and stuff from pprof tool to translate
    to protobuf. Done as the profile proto is more extensible than the legacy
    pprof format and is pprof's preferred profile format. Large part was taken
    from https://github.com/google/pprof tool. Tested by hand and compared the
    result with translated by pprof tool, profiles are identical.
    Fixes #16093
    Change-Id: I5acdb2809cab0d16ed4694fdaa7b8ddfd68df11e
    Reviewed-on: https://go-review.googlesource.com/30556
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit d70b0fe6c4d1b1369b742ea5b7d4e6f0c50ffdcb
Author: Austin Clements <austin@google.com>
Date:   Fri Oct 28 11:14:07 2016 -0400

    runtime: fix preemption of root marking jobs
    
    The current logic in gcDrain conflates non-blocking with preemptible
    draining for root jobs. As a result, if you do a non-blocking (but
    *not* preemptible) drain, like dedicated workers do, the root job
    drain will stop if preempted and fall through to heap marking jobs,
    which won't stop until it fails to get a heap marking job.
    
    This commit fixes the condition on root marking jobs so they only stop
    when preempted if the drain is preemptible.
    
    Coincidentally, this also fixes a nil pointer dereference if we call
    gcDrain with gcDrainNoBlock and without a user G, since it tries to
    get the preempt flag from the nil user G. This combination never
    happens right now, but will in the future.
    
    Change-Id: Ia910ec20a9b46237f7926969144a33b1b4a7b2f9
    Reviewed-on: https://go-review.googlesource.com/32291
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit e14b02197737a0d7e5eed2856806cf20c85052cf
Author: Austin Clements <austin@google.com>
Date:   Fri Oct 28 10:53:41 2016 -0400

    runtime/trace, internal/trace: script to collect canned traces
    
    This adds support to the runtime/trace test for saving traces
    collected by its tests to disk and a script in internal/trace that
    uses this to collect canned traces for the trace test suite. This can
    be used to add to the test suite when we introduce a new trace format
    version.
    
    Change-Id: Id9ac1ff312235bf02f982fdfff8a827f54035758
    Reviewed-on: https://go-review.googlesource.com/32290
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 9a8c69539cbd052e2c4b55496d72ec8407c0af52
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Thu Oct 20 03:16:22 2016 -0700

    bytes, strings: optimize for ASCII sets
    
    In a large codebase within Google, there are thousands of uses of:
            ContainsAny|IndexAny|LastIndexAny|Trim|TrimLeft|TrimRight
    
    An analysis of their usage shows that over 97% of them only use character
    sets consisting of only ASCII symbols.
    
    Uses of ContainsAny|IndexAny|LastIndexAny:
             6% are 1   character  (e.g., "\n" or " ")
            58% are 2-4 characters (e.g., "<>" or "\r\n\t ")
            24% are 5-9 characters (e.g., "()[]*^$")
            10% are 10+ characters (e.g., "+-=&|><!(){}[]^\"~*?:\\/ ")
    We optimize for ASCII sets, which are commonly used to search for
    "control" characters in some string. We don't optimize for the
    single character scenario since IndexRune or IndexByte could be used.
    
    Uses of Trim|TrimLeft|TrimRight:
            71% are 1   character  (e.g., "\n" or " ")
            14% are 2   characters (e.g., "\r\n")
            10% are 3-4 characters (e.g., " \t\r\n")
             5% are 10+ characters (e.g., "0123456789abcdefABCDEF")
    We optimize for the single character case with a simple closured function
    that only checks for that character's value. We optimize for the medium
    and larger sets using a 16-byte bit-map representing a set of ASCII characters.
    
    The benchmarks below have the following suffix name "%d:%d" where the first
    number is the length of the input and the second number is the length
    of the charset.
    
    == bytes package ==
    benchmark                            old ns/op     new ns/op     delta
    BenchmarkIndexAnyASCII/1:1-4         5.09          5.23          +2.75%
    BenchmarkIndexAnyASCII/1:2-4         5.81          5.85          +0.69%
    BenchmarkIndexAnyASCII/1:4-4         7.22          7.50          +3.88%
    BenchmarkIndexAnyASCII/1:8-4         11.0          11.1          +0.91%
    BenchmarkIndexAnyASCII/1:16-4        17.5          17.8          +1.71%
    BenchmarkIndexAnyASCII/16:1-4        36.0          34.0          -5.56%
    BenchmarkIndexAnyASCII/16:2-4        46.6          36.5          -21.67%
    BenchmarkIndexAnyASCII/16:4-4        78.0          40.4          -48.21%
    BenchmarkIndexAnyASCII/16:8-4        136           47.4          -65.15%
    BenchmarkIndexAnyASCII/16:16-4       254           61.5          -75.79%
    BenchmarkIndexAnyASCII/256:1-4       542           388           -28.41%
    BenchmarkIndexAnyASCII/256:2-4       705           382           -45.82%
    BenchmarkIndexAnyASCII/256:4-4       1089          386           -64.55%
    BenchmarkIndexAnyASCII/256:8-4       1994          394           -80.24%
    BenchmarkIndexAnyASCII/256:16-4      3843          411           -89.31%
    BenchmarkIndexAnyASCII/4096:1-4      8522          5873          -31.08%
    BenchmarkIndexAnyASCII/4096:2-4      11253         5861          -47.92%
    BenchmarkIndexAnyASCII/4096:4-4      17824         5883          -66.99%
    BenchmarkIndexAnyASCII/4096:8-4      32053         5871          -81.68%
    BenchmarkIndexAnyASCII/4096:16-4     60512         5888          -90.27%
    BenchmarkTrimASCII/1:1-4             79.5          70.8          -10.94%
    BenchmarkTrimASCII/1:2-4             79.0          105           +32.91%
    BenchmarkTrimASCII/1:4-4             79.6          109           +36.93%
    BenchmarkTrimASCII/1:8-4             78.8          118           +49.75%
    BenchmarkTrimASCII/1:16-4            80.2          132           +64.59%
    BenchmarkTrimASCII/16:1-4            243           116           -52.26%
    BenchmarkTrimASCII/16:2-4            243           171           -29.63%
    BenchmarkTrimASCII/16:4-4            243           176           -27.57%
    BenchmarkTrimASCII/16:8-4            241           184           -23.65%
    BenchmarkTrimASCII/16:16-4           238           199           -16.39%
    BenchmarkTrimASCII/256:1-4           2580          840           -67.44%
    BenchmarkTrimASCII/256:2-4           2603          1175          -54.86%
    BenchmarkTrimASCII/256:4-4           2572          1188          -53.81%
    BenchmarkTrimASCII/256:8-4           2550          1191          -53.29%
    BenchmarkTrimASCII/256:16-4          2585          1208          -53.27%
    BenchmarkTrimASCII/4096:1-4          39773         12181         -69.37%
    BenchmarkTrimASCII/4096:2-4          39946         17231         -56.86%
    BenchmarkTrimASCII/4096:4-4          39641         17179         -56.66%
    BenchmarkTrimASCII/4096:8-4          39835         17175         -56.88%
    BenchmarkTrimASCII/4096:16-4         40229         17215         -57.21%
    
    == strings package ==
    benchmark                            old ns/op     new ns/op     delta
    BenchmarkIndexAnyASCII/1:1-4         5.94          4.97          -16.33%
    BenchmarkIndexAnyASCII/1:2-4         5.94          5.55          -6.57%
    BenchmarkIndexAnyASCII/1:4-4         7.45          7.21          -3.22%
    BenchmarkIndexAnyASCII/1:8-4         10.8          10.6          -1.85%
    BenchmarkIndexAnyASCII/1:16-4        17.4          17.2          -1.15%
    BenchmarkIndexAnyASCII/16:1-4        36.4          32.2          -11.54%
    BenchmarkIndexAnyASCII/16:2-4        49.6          34.6          -30.24%
    BenchmarkIndexAnyASCII/16:4-4        77.5          37.9          -51.10%
    BenchmarkIndexAnyASCII/16:8-4        138           45.5          -67.03%
    BenchmarkIndexAnyASCII/16:16-4       241           59.1          -75.48%
    BenchmarkIndexAnyASCII/256:1-4       509           378           -25.74%
    BenchmarkIndexAnyASCII/256:2-4       720           381           -47.08%
    BenchmarkIndexAnyASCII/256:4-4       1142          384           -66.37%
    BenchmarkIndexAnyASCII/256:8-4       1999          391           -80.44%
    BenchmarkIndexAnyASCII/256:16-4      3735          403           -89.21%
    BenchmarkIndexAnyASCII/4096:1-4      7973          5824          -26.95%
    BenchmarkIndexAnyASCII/4096:2-4      11432         5809          -49.19%
    BenchmarkIndexAnyASCII/4096:4-4      18327         5819          -68.25%
    BenchmarkIndexAnyASCII/4096:8-4      33059         5828          -82.37%
    BenchmarkIndexAnyASCII/4096:16-4     59703         5817          -90.26%
    BenchmarkTrimASCII/1:1-4             71.9          71.8          -0.14%
    BenchmarkTrimASCII/1:2-4             73.3          103           +40.52%
    BenchmarkTrimASCII/1:4-4             71.8          106           +47.63%
    BenchmarkTrimASCII/1:8-4             71.2          113           +58.71%
    BenchmarkTrimASCII/1:16-4            71.6          128           +78.77%
    BenchmarkTrimASCII/16:1-4            152           116           -23.68%
    BenchmarkTrimASCII/16:2-4            160           168           +5.00%
    BenchmarkTrimASCII/16:4-4            172           170           -1.16%
    BenchmarkTrimASCII/16:8-4            200           177           -11.50%
    BenchmarkTrimASCII/16:16-4           254           193           -24.02%
    BenchmarkTrimASCII/256:1-4           1438          864           -39.92%
    BenchmarkTrimASCII/256:2-4           1551          1195          -22.95%
    BenchmarkTrimASCII/256:4-4           1770          1200          -32.20%
    BenchmarkTrimASCII/256:8-4           2195          1216          -44.60%
    BenchmarkTrimASCII/256:16-4          3054          1224          -59.92%
    BenchmarkTrimASCII/4096:1-4          21726         12557         -42.20%
    BenchmarkTrimASCII/4096:2-4          23586         17508         -25.77%
    BenchmarkTrimASCII/4096:4-4          26898         17510         -34.90%
    BenchmarkTrimASCII/4096:8-4          33714         17595         -47.81%
    BenchmarkTrimASCII/4096:16-4         47429         17700         -62.68%
    
    The benchmarks added test the worst case. For IndexAny, that is when the
    charset matches none of the input. For Trim, it is when the charset matches
    all of the input.
    
    Change-Id: I970874d101a96b33528fc99b165379abe58cf6ea
    Reviewed-on: https://go-review.googlesource.com/31593
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Martin Möhrmann <martisch@uos.de>

commit ef3a9f2dd410ec1672988a72c72919eab2d58e6c
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 13:12:17 2016 -0400

    html/template, text/template: drop defined template list from errors
    
    The report in #17414 points out that if you have many many templates,
    then this is an overwhelming list and just hurts the signal-to-noise ratio of the error.
    
    Even the test of the old behavior also supports the idea that this is noise:
    
            template: empty: "empty" is an incomplete or empty template; defined templates are: "secondary"
    
    The chance that someone mistyped "secondary" as "empty" is slim at best.
    
    Similarly, the compiler does not augment an error like 'unknown variable x'
    by dumping the full list of all the known variables.
    
    For all these reasons, drop the list.
    
    Fixes #17414.
    
    Change-Id: I78f92d2c591df7218385fe723a4abc497913acf8
    Reviewed-on: https://go-review.googlesource.com/32116
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 54f691d69d39bc19c2069384cd702c6fdec0b92d
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 23:18:53 2016 -0400

    runtime: skip TestMemmoveOverflow if mmap of needed page fails
    
    Fixes #16731.
    
    Change-Id: I6d393357973d008ab7cf5fb264acb7d38c9354eb
    Reviewed-on: https://go-review.googlesource.com/32104
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7fd6b925e38f67c2d0cb3fca0f3dc8b6dfb0708c
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Oct 28 09:54:20 2016 -0700

    spec: update operator and delimiter section
    
    Follow-up on https://go-review.googlesource.com/30601.
    
    Change-Id: I51b603a6c4877b571e83cd7c4e78a8988cc831ca
    Reviewed-on: https://go-review.googlesource.com/32310
    Reviewed-by: Rob Pike <r@golang.org>

commit d86a6ef0c7e8307802c6cd3f623bade3e78a42bf
Author: Josh Chorlton <jchorlton@gmail.com>
Date:   Thu Oct 27 23:10:26 2016 +0800

    net/http: fix cookie Expires minimum year to 1601 instead of Epoch year 1970
    
    Following RFC 6265 Section 5.1.1.5, ensure that the minimum
    year for which an Expires value is valid and can be included in
    the cookie's string, is 1601 instead of the Epoch year 1970.
    
    A detailed specification for parsing the Expiry field is at:
    https://tools.ietf.org/html/rfc6265#section-5.2.1
    
    I stumbled across this bug due to this StackOverflow answer
    that recommends setting the Expiry to the Epoch:
    http://stackoverflow.com/a/5285982
    
    Fixes #17632
    
    Change-Id: I3c1bdf821d369320334a5dc1e4bf22783cbfe9fc
    Reviewed-on: https://go-review.googlesource.com/32142
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a8e86d99f18a72c8cbdedf5a47a9f7e93a87cd04
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 13:34:55 2016 -0400

    mime/quotedprintable: accept = not followed by 2 hex digits as literal equals
    
    This lets quotedprintable handle some inputs found in the wild,
    most notably generated by "Microsoft CDO for Exchange 2000",
    and it also matches how Python's quopri package handles these inputs.
    
    Fixes #13219.
    
    Change-Id: I69d400659d01b6ea0f707b7053d61803a85b4799
    Reviewed-on: https://go-review.googlesource.com/32174
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 864859d209a144eb1a703381ec96b9c897d4e493
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Wed Oct 26 11:46:06 2016 -0700

    net/http/httptrace: refer http.Client users to the blog post
    
    Fixes #17152.
    
    Change-Id: I4dd5e505c65f3efe736e46d3781cccf31d7f574f
    Reviewed-on: https://go-review.googlesource.com/32117
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fc2507dbd3b1c1df97a9673a2ed5243f05a3449a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 28 03:56:30 2016 +0000

    doc: remove mention of Go 1.6.3 working on Sierra
    
    We thought it would at the time, but then Beta 4 changed the ABI
    again, so it wasn't true in practice.
    
    Fixes #17643
    
    Change-Id: I36b747bd69a56adc7291fa30d6bffdf67ab8741b
    Reviewed-on: https://go-review.googlesource.com/32238
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 6da83c6fc006019f6fe0503099d165e19f465b1b
Author: Austin Clements <austin@google.com>
Date:   Sat Oct 8 18:38:35 2016 -0400

    runtime, cmd/trace: track goroutines blocked on GC assists
    
    Currently when a goroutine blocks on a GC assist, it emits a generic
    EvGoBlock event. Since assist blocking events and, in particular, the
    length of the blocked assist queue, are important for diagnosing GC
    behavior, this commit adds a new EvGoBlockGC event for blocking on a
    GC assist. The trace viewer uses this event to report a "waiting on
    GC" count in the "Goroutines" row. This makes sense because, unlike
    other blocked goroutines, these goroutines do have work to do, so
    being blocked on a GC assist is quite similar to being in the
    "runnable" state, which we also report in the trace viewer.
    
    Change-Id: Ic21a326992606b121ea3d3d00110d8d1fdc7a5ef
    Reviewed-on: https://go-review.googlesource.com/30704
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 640e9169155ea96a6f1156663269dba5babf0632
Author: Austin Clements <austin@google.com>
Date:   Sat Oct 8 17:35:27 2016 -0400

    cmd/trace: track each G's state explicitly
    
    Currently the trace tool tracks an overall counts of goroutine states,
    but not the states of any individual goroutine. We're about to add
    more sophisticated blocked-state tracking, so add this tracking and
    base the state counts off the tracked goroutine states.
    
    Change-Id: I943ed61782436cf9540f4ee26c5561715c5b4a1d
    Reviewed-on: https://go-review.googlesource.com/30703
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 68348394274ee83f5286022d97cfe58b6761321b
Author: Austin Clements <austin@google.com>
Date:   Fri Oct 7 17:25:26 2016 -0400

    runtime, cmd/trace: annotate different mark worker types
    
    Currently mark workers are shown in the trace as regular goroutines
    labeled "runtime.gcBgMarkWorker". That's somewhat unhelpful to an end
    user because of the opaque label and particularly unhelpful to runtime
    developers because it doesn't distinguish the different types of mark
    workers.
    
    Fix this by introducing a variant of the GoStart event called
    GoStartLabel that lets the runtime indicate a label for a goroutine
    execution span and using this to label mark worker executions as "GC
    (<mode>)" in the trace viewer.
    
    Since this bumps the trace version to 1.8, we also add test data for
    1.7 traces.
    
    Change-Id: Id7b9c0536508430c661ffb9e40e436f3901ca121
    Reviewed-on: https://go-review.googlesource.com/30702
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit f9238a76ff0082071527ce8ec94542a297f594f8
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Oct 26 15:44:19 2016 -0400

    cmd/compile: make LR allocatable in non-leaf functions on ARM
    
    The mechanism is initially introduced (and reviewed) in CL 30597
    on S390X.
    
    Reduce number of "spilled value remains" by 0.4% in cmd/go.
    
    Disabled on ARMv5 because LR is clobbered almost everywhere with
    inserted softfloat calls.
    
    Change-Id: I2934737ce2455909647ed2118fe2bd6f0aa5ac52
    Reviewed-on: https://go-review.googlesource.com/32178
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 4f1ca8b6f92d69a889a6884d3b8393fdcf530e2b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Oct 27 17:52:53 2016 -0400

    cmd/internal/obj/mips: materialize float constant 0 from zero register
    
    Materialize float constant 0 from integer zero register, instead
    of loading from constant pool.
    
    Change-Id: Ie4728895b9d617bec2a29d15729c0efaa10eedbb
    Reviewed-on: https://go-review.googlesource.com/32109
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 0acefdbea07252191aa24b8bbbddeecbfa3e7ed9
Author: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
Date:   Thu Jul 21 18:09:48 2016 -0300

    cmd/asm, cmd/internal/obj/ppc64: Add vector scalar (VSX) registers and instructions
    
    The current implementation for Power architecture does not include the vector
    scalar (VSX) registers.  This adds the 63 VSX registers and the most commonly
    used instructions: load/store VSX vector/scalar, move to/from VSR, logical
    operations, select, merge, splat, permute, shift, FP-FP conversion, FP-integer
    conversion and integer-FP conversion.
    
    Change-Id: I0f7572d2359fe7f3ea0124a1eb1b0bebab33649e
    Reviewed-on: https://go-review.googlesource.com/30510
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9c02c75639b893cea6dbce1092d07e886ec5f44e
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Oct 26 13:29:39 2016 -0400

    runtime: pass windows float syscall args via XMM
    
    Based on the calling convention documented in:
    
            https://msdn.microsoft.com/en-us/library/zthk2dkh.aspx
    
    and long-used in golang.org/x/mobile/gl via some fixup asm:
    
            https://go.googlesource.com/mobile/+/master/gl/work_windows_amd64.s
    
    Fixes #6510
    
    Change-Id: I97e81baaa2872bcd732b1308915eb66f1ba2168f
    Reviewed-on: https://go-review.googlesource.com/32173
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Reviewed-by: Minux Ma <minux@golang.org>

commit dd500193d3e96e6bc9700fd43fc68b55e662d7c1
Author: Austin Clements <austin@google.com>
Date:   Thu Oct 27 21:52:51 2016 -0400

    runtime: fix preemption of fractional and idle mark workers
    
    Currently, gcDrain looks for the preemption flag at getg().preempt.
    However, commit d6625ca moved mark worker draining to the system
    stack, which means getg() returns the g0, which never has the preempt
    flag set, so idle and fractional workers don't get preempted after
    10ms and just run until they run out of work. As a result, if there's
    enough idle time, GC becomes effectively STW.
    
    Fix this by looking for the preemption flag on getg().m.curg, which
    will always be the user G (where the preempt flag is set), regardless
    of whether gcDrain is running on the user or the g0 stack.
    
    Change-Id: Ib554cf49a705b86ccc3d08940bc869f868c50dd2
    Reviewed-on: https://go-review.googlesource.com/32251
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit ca922b6d363b6ca47822188dcbc5b92d912c7a4b
Author: Peter Weinberger <pjw@google.com>
Date:   Thu Sep 22 09:48:30 2016 -0400

    runtime: Profile goroutines holding contended mutexes.
    
    runtime.SetMutexProfileFraction(n int) will capture 1/n-th of stack
    traces of goroutines holding contended mutexes if n > 0. From runtime/pprof,
    pprot.Lookup("mutex").WriteTo writes the accumulated
    stack traces to w (in essentially the same format that blocking
    profiling uses).
    
    Change-Id: Ie0b54fa4226853d99aa42c14cb529ae586a8335a
    Reviewed-on: https://go-review.googlesource.com/29650
    Reviewed-by: Austin Clements <austin@google.com>

commit b679665a182bd6ec2989ae759df6b11142921cfb
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Oct 27 23:31:38 2016 +0200

    cmd/compile: move stringtoslicebytetmp to the backend
    
    - removes the runtime function stringtoslicebytetmp
    - removes the generation of calls to stringtoslicebytetmp from the frontend
    - adds handling of OSTRARRAYBYTETMP in the backend
    
    This reduces binary sizes and avoids function call overhead.
    
    Change-Id: Ib9988d48549cee663b685b4897a483f94727b940
    Reviewed-on: https://go-review.googlesource.com/32158
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f595848e9a1e1d0f64a7018d847167d85f6e83a4
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri Oct 28 11:51:22 2016 +1100

    runtime/cgo: do not link threads lib by default on windows
    
    I do not know why it is included. All tests pass without it.
    
    Change-Id: I839076ee131816dfd177570a902c69fe8fba5022
    Reviewed-on: https://go-review.googlesource.com/32144
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 79d2115ec933904c02311cd31923b125fe4303dc
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Oct 27 19:53:50 2016 -0700

    cmd/compile: eliminate more allocs in newblock
    
    name       old allocs/op    new allocs/op    delta
    Template         389k ± 0%        386k ± 0%  -0.84%        (p=0.000 n=10+10)
    Unicode          323k ± 0%        323k ± 0%  -0.25%        (p=0.000 n=10+10)
    GoTypes         1.17M ± 0%       1.16M ± 0%  -0.93%        (p=0.000 n=10+10)
    Compiler        4.13M ± 0%       4.09M ± 0%  -1.05%        (p=0.000 n=10+10)
    
    Change-Id: I6c00850d07511c2e65761c7373fc3df738499105
    Reviewed-on: https://go-review.googlesource.com/32235
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 23d762c1298f6e3f0507debc9bfba83c66a8796e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Oct 26 23:40:14 2016 -0700

    cmd/compile: combine slice allocations in newblock
    
    name       old allocs/op    new allocs/op    delta
    Template         394k ± 0%        391k ± 0%  -0.80%        (p=0.000 n=10+10)
    Unicode          350k ± 0%        349k ± 0%  -0.27%        (p=0.000 n=10+10)
    GoTypes         1.18M ± 0%       1.17M ± 0%  -0.92%        (p=0.000 n=10+10)
    Compiler        4.18M ± 0%       4.14M ± 0%  -1.05%        (p=0.000 n=10+10)
    
    
    Change-Id: I838a4e2110afe6496c535b9a0ec5aa882d63a707
    Reviewed-on: https://go-review.googlesource.com/32223
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit caba0bd18912109f4d9fa2f4807d6ee4ddd5ffab
Author: Nigel Tao <nigeltao@golang.org>
Date:   Fri Oct 28 10:26:44 2016 +1100

    image/png: implement grayscale transparency.
    
    Change-Id: Ib9309ee499fc51be2662d778430ee30089822e57
    Reviewed-on: https://go-review.googlesource.com/32143
    Reviewed-by: Rob Pike <r@golang.org>

commit bba1ac4fd9d208892aa45e49eda215954008d2ee
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Oct 27 02:02:30 2016 -0700

    cmd/compile: stop adding implicit OKEY nodes
    
    Keys are uncommon in array and slice literals, and normalizing
    OARRAYLIT and OSLICELIT nodes to always use OKEY ends up not reducing
    complexity much. Instead, only create OKEY nodes to represent explicit
    keys, and recalculate implicit keys when/where necessary.
    
    Fixes #15350.
    
    name       old time/op     new time/op     delta
    Template       299ms ± 9%      299ms ±12%    ~           (p=0.694 n=28+30)
    Unicode        165ms ± 7%      162ms ± 9%    ~           (p=0.084 n=27+27)
    GoTypes        950ms ± 9%      963ms ± 5%    ~           (p=0.301 n=30+29)
    Compiler       4.23s ± 7%      4.17s ± 7%    ~           (p=0.057 n=29+27)
    
    name       old user-ns/op  new user-ns/op  delta
    Template        389M ±15%       400M ±12%    ~           (p=0.202 n=30+29)
    Unicode         246M ±21%       232M ±22%  -5.76%        (p=0.006 n=28+29)
    GoTypes        1.34G ± 8%      1.34G ± 7%    ~           (p=0.775 n=28+30)
    Compiler       5.91G ± 6%      5.87G ± 7%    ~           (p=0.298 n=28+29)
    
    name       old alloc/op    new alloc/op    delta
    Template      41.2MB ± 0%     41.2MB ± 0%    ~           (p=0.085 n=30+30)
    Unicode       34.0MB ± 0%     31.5MB ± 0%  -7.28%        (p=0.000 n=30+29)
    GoTypes        121MB ± 0%      121MB ± 0%    ~           (p=0.657 n=30+30)
    Compiler       511MB ± 0%      511MB ± 0%  -0.01%        (p=0.001 n=29+29)
    
    name       old allocs/op   new allocs/op   delta
    Template        390k ± 0%       390k ± 0%    ~           (p=0.225 n=30+29)
    Unicode         318k ± 0%       293k ± 0%  -8.03%        (p=0.000 n=30+29)
    GoTypes        1.16M ± 0%      1.16M ± 0%    ~           (p=0.745 n=30+30)
    Compiler       4.35M ± 0%      4.35M ± 0%    ~           (p=0.105 n=30+30)
    
    Change-Id: I6310739a0bfdb54f1ab8a460b2c03615ad1ff5bc
    Reviewed-on: https://go-review.googlesource.com/32221
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4951c793633a55c5d1e4d94283fa82cff31cee48
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu Oct 27 16:19:15 2016 +1100

    image/png: implement truecolor transparency.
    
    Change-Id: I99b9a51db29d514ebaa9c1cfde65c0b5184c0f42
    Reviewed-on: https://go-review.googlesource.com/32140
    Reviewed-by: Rob Pike <r@golang.org>

commit 0dabbcdc435e4babf76bd561cfe67a486404d73a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Oct 27 16:42:42 2016 -0400

    math/big: flip long/short flag on TestFloat32Distribution
    
    It looks like a typo in CL 30707.
    
    Change-Id: Ia2d013567dbd1a49901d9be0cd2d5a103e6e38cf
    Reviewed-on: https://go-review.googlesource.com/32187
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f357091a6d48c3a87db14338b321eca52af30dd7
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 30 14:59:34 2016 -0700

    cmd/compile: combine some extensions with loads
    
    For cases where we already have the ops, combine
    sign or zero extension with the previous load
    (even if the load is larger width).
    
    Update #15105
    
    Change-Id: I76c5ddd69e1f900d2a17d35503083bd3b4978e48
    Reviewed-on: https://go-review.googlesource.com/28190
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit dc5f9311be7d75a283d124aa52e04ac5b2005e46
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Oct 26 22:58:50 2016 -0700

    cmd/compile: eliminate Name.Inlvar
    
    Use a local map during inlining instead.
    
    Change-Id: I10cd19885e7124f812bb04a79dbda52bfebfe1a1
    Reviewed-on: https://go-review.googlesource.com/32225
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ac74225dcc64d40839f3842d306442d33a5c6253
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 30 15:25:20 2016 -0700

    cmd/compile: remove redundant extension after shift
    
    var x uint64
    uint8(x >> 56)
    
    We don't need to generate any code for the uint8().
    
    Update #15090
    
    Change-Id: Ie1ca4e32022dccf7f7bc42d531a285521fb67872
    Reviewed-on: https://go-review.googlesource.com/28191
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit deb4177cf0b8352f4908c0eba9e81dfb0213545c
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 25 15:49:52 2016 -0700

    cmd/compile: use masks instead of branches for slicing
    
    When we do
    
      var x []byte = ...
      y := x[i:]
    
    We can't just use y.ptr = x.ptr + i, as the new pointer may point to the
    next object in memory after the backing array.
    We used to fix this by doing:
    
      y.cap = x.cap - i
      delta := i
      if y.cap == 0 {
        delta = 0
      }
      y.ptr = x.ptr + delta
    
    That generates a branch in what is otherwise straight-line code.
    
    Better to do:
    
      y.cap = x.cap - i
      mask := (y.cap - 1) >> 63 // -1 if y.cap==0, 0 otherwise
      y.ptr = x.ptr + i &^ mask
    
    It's about the same number of instructions (~4, depending on what
    parts are constant, and the target architecture), but it is all
    inline. It plays nicely with CSE, and the mask can be computed
    in parallel with the index (in cases where a multiply is required).
    
    It is a minor win in both speed and space.
    
    Change-Id: Ied60465a0b8abb683c02208402e5bb7ac0e8370f
    Reviewed-on: https://go-review.googlesource.com/32022
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 50f66fbb66c2f3cdfc9f942c5e11cc1b9ec17a73
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Oct 27 12:53:25 2016 -0700

    cmd/compile: disallow "init" as alias
    
    Fixes #17637.
    
    Change-Id: I5af63b8277c0a0f9fef4880992bcb925ca088687
    Reviewed-on: https://go-review.googlesource.com/32106
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 89632aa1832a02e36acd458b3b35257d8133ae0c
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Oct 27 11:20:20 2016 -0700

    cmd/compile, go/parser: disallow "type T = p.T" - must use "=>"
    
    I had added this originally so we can play with different notations
    but it doesn't make sense to keep it around since gofmt will convert
    a type alias declaration using "=" into one using "=>" anyhow. More
    importantly, the spec doesn't permit it.
    
    Change-Id: Icb010b5a9976aebf877e48b3ce9d7245559ca494
    Reviewed-on: https://go-review.googlesource.com/32105
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8b07ec20f7a971edce9eaf413b20e453c50858c6
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Wed Oct 26 15:57:58 2016 +1300

    cmd/compile, runtime: make the go.itab.* symbols module-local
    
    Otherwise, the way the ELF dynamic linker works means that you can end up with
    the same itab being passed to additab twice, leading to the itab linked list
    having a cycle in it. Add a test to additab in runtime to catch this when it
    happens, not some arbitrary and surprsing time later.
    
    Fixes #17594
    
    Change-Id: I6c82edcc9ac88ac188d1185370242dc92f46b1ad
    Reviewed-on: https://go-review.googlesource.com/32131
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit aabdb66d8909f772270b80eff3405cfd4cce4d8b
Author: Adam Langley <agl@golang.org>
Date:   Thu Oct 27 10:28:31 2016 -0700

    vendor/golang_org/x/crypto/poly1305: sync to 1150b8bd09e53aea1d415621adae9bad665061a1
    
    This change updates the vendored version of the poly1305 package to
    match the latest version from x/crypto. This pulls in this change:
    
      commit 1150b8bd09e53aea1d415621adae9bad665061a1
      Author: Adam Langley <agl@golang.org>
      Date:   Fri Oct 21 15:59:10 2016 -0700
    
          poly1305: don't move R13 in sum_arm.s.
    
          Rather than change the value of R13 during the execution, keep R13 fixed
          (after the initial prelude) and always use offsets from it.
    
          This should help the runtime figure out what's going on if, say, a
          signal should occur while running this code.
    
          I've also trimmed the set of saved registers since Go doesn't require
          the callee to maintain anything except R10 and R13.
    
          Change-Id: Ifbeca73c1d964cc43bb7f8c20c61066f22fd562d
          Reviewed-on: https://go-review.googlesource.com/31717
          Run-TryBot: Cherry Zhang <cherryyz@google.com>
          TryBot-Result: Gobot Gobot <gobot@golang.org>
          Reviewed-by: Cherry Zhang <cherryyz@google.com>
    
    Change-Id: I376b3e5d53aaded891e02801bd5faa5ff758da0d
    Reviewed-on: https://go-review.googlesource.com/32227
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c01c1d4215ea8b19014017673a5adc8b1a9cad0a
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 20:05:20 2016 -0400

    net: add examples to Addr definition
    
    Fixes #16014.
    
    Change-Id: I68b096df7924a3258e940c4d94ec5d06f5bdfcbb
    Reviewed-on: https://go-review.googlesource.com/32097
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit eac59508199f77f55d986ab1a7439c7488a20650
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 14:32:43 2016 -0400

    mime: preserve unnecessary backslash escapes as literals
    
    When MSIE sends a full file path (in "intranet mode"), it does not
    escape backslashes: "C:\dev\go\foo.txt", not "C:\\dev\\go\\foo.txt".
    
    No known MIME generators emit unnecessary backslash escapes
    for simple token characters like numbers and letters.
    
    If we see an unnecessary backslash escape, assume it is from MSIE
    and intended as a literal backslash. This makes Go servers deal better
    with MSIE without affecting the way they handle conforming MIME
    generators.
    
    Fixes #15664.
    
    Change-Id: Ia3b03b978317d968dc11b2f6de1df913c6bcbfcc
    Reviewed-on: https://go-review.googlesource.com/32175
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2bafbe11b1389c3a589314b74ab24f936816befb
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 16:48:53 2016 -0400

    net/mail: allow empty quoted string name in address again
    
    CL 12905 disallowed "Bob" <""@example.com> but inadvertently
    also disallowed "" <bob@example.com>. Move the empty string
    check to apply only in the addr-spec.
    
    Fixes #14866.
    
    Change-Id: Ia0b7a1a32810aa78157ae77bd0130b78154c460d
    Reviewed-on: https://go-review.googlesource.com/32176
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 07e72666ec6da774860c6f796c3adbdc57c92480
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Oct 27 00:29:43 2016 +0000

    net/http: update bundled http2
    
    Updates http2 to x/net git rev b626cca for:
    
        http2: implement support for server push
        https://golang.org/cl/29439
    
        http2: reject stream self-dependencies
        https://golang.org/cl/31858
    
        http2: optimize server frame writes
        https://golang.org/cl/31495
    
        http2: interface to support pluggable schedulers
        https://golang.org/cl/25366
        (no user-visible behavior change or API surface)
    
        http2: add Server.IdleTimeout
        https://golang.org/cl/31727
    
        http2: make Server return conn protocol errors on bad idle stream frames
        https://golang.org/cl/31736
    
        http2: fix optimized write scheduling
        https://golang.org/cl/32217 (fix for CL 31495 above)
    
    Change-Id: Ie894c72943d355115c8391573bf6b96dc1bd5894
    Reviewed-on: https://go-review.googlesource.com/32215
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Tom Bergan <tombergan@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5594074dcd09d0bb8c35998e20cddf728893ff00
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 27 09:22:43 2016 -0400

    runtime: use clock_gettime(CLOCK_REALTIME) for nanosecond-precision time.now on arm64, mips64x
    
    Assembly copied from the clock_gettime(CLOCK_MONOTONIC)
    call in runtime.nanotime in these files and then modified to use
    CLOCK_REALTIME.
    
    Also comment system call numbers in a few other files.
    
    Fixes #11222.
    
    Change-Id: Ie132086de7386f865908183aac2713f90fc73e0d
    Reviewed-on: https://go-review.googlesource.com/32177
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit aff37662d1f70f2bf9e47b4f962e85521e7c18d1
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Oct 4 10:06:14 2016 -0700

    spec: add new language for alias declarations
    
    For #16339.
    
    Change-Id: I7d912ea634bbfacfc0217f97dccb270fde06f16b
    Reviewed-on: https://go-review.googlesource.com/30601
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 09692182fa79fcaf89aa08ccf74ad74562ccba04
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 27 12:43:37 2016 -0400

    runtime: print sigcode on signal crash
    
    For #17496.
    
    Change-Id: I671a59581c54d17bc272767eeb7b2742b54eca38
    Reviewed-on: https://go-review.googlesource.com/32183
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 03d81b5ed91dfb3a2d1041bfe80dd94e7f06a3c4
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Oct 25 14:09:18 2016 -0700

    cmd/compile: import/export of alias declarations
    
    This CL completes support for alias declarations in the compiler.
    
    Also:
    - increased export format version
    - updated various comments
    
    For #16339.
    Fixes #17487.
    
    Change-Id: Ic6945fc44c0041771eaf9dcfe973f601d14de069
    Reviewed-on: https://go-review.googlesource.com/32090
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 81038d2e2b588f9df45d20a2ca0be446b0e421b2
Author: Adam Langley <agl@golang.org>
Date:   Wed Oct 26 10:05:03 2016 -0700

    crypto/tls: add GetClientCertificate callback
    
    Currently, the selection of a client certificate done internally based
    on the limitations given by the server's request and the certifcates in
    the Config. This means that it's not possible for an application to
    control that selection based on details of the request.
    
    This change adds a callback, GetClientCertificate, that is called by a
    Client during the handshake and which allows applications to select the
    best certificate at that time.
    
    (Based on https://golang.org/cl/25570/ by Bernd Fix.)
    
    Fixes #16626.
    
    Change-Id: Ia4cea03235d2aa3c9fd49c99c227593c8e86ddd9
    Reviewed-on: https://go-review.googlesource.com/32115
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6c242c52d355772f66466505dd7555d4601f1c5a
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 26 16:58:00 2016 -0400

    net/rpc: fix method requirement docs
    
    The receiver itself is not transmitted and does not need to be
    marshalable by encoding/gob.
    
    Fixes #16803.
    
    Change-Id: I42a3603fb7d3b36c97dcc2e51a398cd65ec3227d
    Reviewed-on: https://go-review.googlesource.com/32094
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit ec18e93ecd550b10bc36b88d625533a7b7473313
Author: Adam Langley <agl@golang.org>
Date:   Wed Oct 26 12:30:30 2016 -0700

    crypto/tls: add a SignatureScheme type.
    
    The SignatureAndHashAlgorithm from TLS 1.2[1] is being changed to
    SignatureScheme in TLS 1.3[2]. (The actual values are compatible
    however.)
    
    Since we expect to support TLS 1.3 in the future, we're already using
    the name and style of SignatureScheme in the recently augmented
    ClientHelloInfo. As this is public API, it seems that SignatureScheme
    should have its own type and exported values, which is implemented in
    this change.
    
    [1] https://tools.ietf.org/html/rfc5246#section-7.4.1.4.1
    [2] https://tools.ietf.org/html/draft-ietf-tls-tls13-18#section-4.2.3
    
    Change-Id: I0482755d02bb9a04eaf075c012696103eb806645
    Reviewed-on: https://go-review.googlesource.com/32119
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 07a31bc3da1115775c6607fa400e2d147f6c17c3
Author: Adam Langley <agl@golang.org>
Date:   Wed Oct 26 13:57:08 2016 -0700

    crypto/x509: don't accept a root that already appears in a chain.
    
    Since a root certificate is self-signed, it's a valid child of itself.
    If a root certificate appeared both in the pool of intermediates and
    roots the verification code could find a chain which included it twice:
    first as an intermediate and then as a root. (Existing checks prevented
    the code from looping any more.)
    
    This change stops the exact same certificate from appearing twice in a
    chain. This simplifies the results in the face of the common
    configuration error of a TLS server returning a root certificate.
    
    (This should also stop two different versions of the “same” root
    appearing in a chain because the self-signature on one will not validate
    for the other.)
    
    Fixes #16800.
    
    Change-Id: I004853baa0eea27b44d47b9b34f96113a92ebac8
    Reviewed-on: https://go-review.googlesource.com/32121
    Run-TryBot: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a047b6bf7d90cc7185f18af3c179dfc7e66b66e9
Author: Keith Randall <khr@golang.org>
Date:   Thu Oct 27 09:23:48 2016 -0700

    cmd/compile: emit assignments after calls in the right order
    
    Fixes a bug where assignments that should come after a call
    were instead being issued before the call.
    
    Fixes #17596
    Fixes #17618
    
    Change-Id: Ic9ae4c34ae38fc4ccd0604b65345b05896a2c295
    Reviewed-on: https://go-review.googlesource.com/32226
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit dc53ea77721e1d5c372c04ba3f20d45e5aec7103
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Oct 26 22:23:32 2016 -0700

    cmd/compile: change Func.FCurfn to IsHiddenClosure
    
    IsHiddenClosure is more descriptive.
    
    Change-Id: I06651072925a958b148b64ab0db3a9bfc839af9b
    Reviewed-on: https://go-review.googlesource.com/32224
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 4f6d479186f8a0303159f04c3673f6ea80b45a03
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Oct 26 15:58:51 2016 -0400

    cmd/compile: make LR allocatable in non-leaf functions on MIPS64
    
    The mechanism is initially introduced (and reviewed) in CL 30597
    on S390X.
    
    Change-Id: I83024d2fc84c8efc23fbda52b3ad83073f42cb93
    Reviewed-on: https://go-review.googlesource.com/32179
    Reviewed-by: David Chase <drchase@google.com>

commit 5c59cb4aa308828884079b13f100b539448a0861
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Oct 26 16:06:16 2016 -0400

    cmd/compile: make LR allocatable in non-leaf functions on ARM64
    
    The mechanism is initially introduced (and reviewed) in CL 30597
    on S390X.
    
    Change-Id: I12fbe6e9269b2936690e0ec896cb6b5aa40ad7da
    Reviewed-on: https://go-review.googlesource.com/32180
    Reviewed-by: David Chase <drchase@google.com>

commit c69dd3f0547e5846ce259a02d0b6ad9f19b566b6
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Oct 26 16:17:54 2016 -0400

    cmd/compile: enable DUFFZERO in defframe on MIPS64
    
    DUFFZERO was disabled due to issue #12108. CL 27592 fixed it and
    enabled DUFFZERO in general, but this one was forgotten.
    
    Change-Id: I0476a3a0524c7b54218f7a747bdba76cd823fbc5
    Reviewed-on: https://go-review.googlesource.com/32181
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 4c182045ff6af5657d5ef0f43ba1fd11a4d06be5
Author: Vladimir Stefanovic <vladimir.stefanovic@imgtec.com>
Date:   Tue Oct 18 23:51:19 2016 +0200

    cmd/objdump: skip tests for GOARCH=mips{,le}
    
    Change-Id: I8111ceb6960364166aa8a445f4d6d8b0581d371e
    Reviewed-on: https://go-review.googlesource.com/31513
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 0d176621d925915152b7b0b332e553b6f0d635e2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Oct 26 22:05:20 2016 -0700

    cmd/compile: reuse sort helpers
    
    sort.Sort's argument always escapes.
    cse generates many calls to sort.Sort.
    Set up a single escaping variable
    and re-use it across loops.
    
    name       old alloc/op     new alloc/op     delta
    Template       40.7MB ± 0%      40.2MB ± 0%  -1.24%        (p=0.000 n=15+15)
    Unicode        33.4MB ± 0%      33.3MB ± 0%  -0.09%        (p=0.000 n=15+15)
    GoTypes         121MB ± 0%       119MB ± 0%  -1.48%        (p=0.000 n=14+15)
    Compiler        474MB ± 0%       465MB ± 0%  -1.94%        (p=0.000 n=14+15)
    
    name       old allocs/op    new allocs/op    delta
    Template         405k ± 0%        394k ± 0%  -2.64%        (p=0.000 n=15+15)
    Unicode          350k ± 0%        350k ± 0%  -0.14%        (p=0.000 n=14+15)
    GoTypes         1.21M ± 0%       1.18M ± 0%  -3.07%        (p=0.000 n=15+14)
    Compiler        4.37M ± 0%       4.18M ± 0%  -4.39%        (p=0.000 n=15+15)
    
    
    Change-Id: I68cf56dafa0f3ea778826eea19908bd761556154
    Reviewed-on: https://go-review.googlesource.com/32220
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit de4b06559119eac499906aaa4d42046b3beed52d
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu Oct 27 13:36:48 2016 +1100

    image/png: allow tRNS chunk without a PLTE chunk.
    
    While https://www.w3.org/TR/PNG/#5ChunkOrdering says that tRNS's
    ordering constraint is "After PLTE; before IDAT", it is legal for a tRNS
    chunk to occur without a PLTE chunk at all, for greyscale and truecolor
    transparency as opposed to palette-based transparency. See
    https://www.w3.org/TR/PNG/#11transinfo
    
    Fixes #17511.
    
    Change-Id: I047b0b01d78a1cda65e00eeac229bb972cda431d
    Reviewed-on: https://go-review.googlesource.com/32139
    Reviewed-by: Rob Pike <r@golang.org>

commit 645e984f39a6cf0ffdf965dc04130d9c7f57e8a4
Author: Andrew Gerrand <adg@golang.org>
Date:   Wed Oct 26 15:37:15 2016 +1100

    doc: s/race/ethnicity/ in the Code of Conduct
    
    As agreed upon by the Code of Conduct working group, "race" may refer to
    an attempt to classify people based on "defining characteristics",
    regardless of how this people view themselves, while "ethnicity" refers
    to how people identify themselves.
    
    The Code of Conduct working group believes that the term "ethnicity"
    will be more comprehensive and inclusive, and will better serve the Go
    community.
    
    Change-Id: I724b72cadb8cf29b4bac8f83017b0303feae3c94
    Reviewed-on: https://go-review.googlesource.com/32133
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit e4820bcfed75cdc4cab2181e0f0ab21c282cec65
Author: Chris McGee <sirnewton_01@yahoo.ca>
Date:   Wed Sep 28 21:31:52 2016 -0400

    net: add multicast UDP support for plan9
    
    The new implementation adds listening support on a multicast
    address with plan9 network interfaces.
    
    Fixes #17218
    
    Change-Id: I2c75515e72e120acb71610cd077fddfbf9cf4e29
    Reviewed-on: https://go-review.googlesource.com/29964
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a7c84668c83c246c142fb4a25a2a6fd52ba0d540
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Oct 26 17:14:35 2016 -0700

    cmd/compile: remove Label type
    
    With the removal of the old backend,
    a Label is just a Node.
    
    Passes toolstash -cmp.
    
    Change-Id: Ia62cb00fbc551efb75a4ed4dc6ed54fca0831dbf
    Reviewed-on: https://go-review.googlesource.com/32216
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d6dbf3a0d38773b37bd8fa8d64a3f192102e388b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Apr 21 19:35:26 2016 -0700

    cmd/compile: use List instead of OKEY for OSLICE*
    
    Performance changes are negligible, but that's expected.
    This is a part of a general effort to eliminate OKEY nodes.
    
    Passes toolstash -cmp.
    
    Updates #15350
    
    name       old alloc/op     new alloc/op     delta
    Template       40.6MB ± 0%      40.6MB ± 0%  -0.04%         (p=0.000 n=9+10)
    Unicode        33.4MB ± 0%      33.4MB ± 0%    ~           (p=0.853 n=10+10)
    GoTypes         120MB ± 0%       120MB ± 0%  -0.03%         (p=0.000 n=9+10)
    Compiler        470MB ± 0%       469MB ± 0%  -0.06%        (p=0.000 n=10+10)
    
    name       old allocs/op    new allocs/op    delta
    Template         404k ± 0%        404k ± 0%    ~           (p=0.165 n=10+10)
    Unicode          350k ± 0%        350k ± 0%    ~            (p=0.211 n=9+10)
    GoTypes         1.21M ± 0%       1.21M ± 0%    ~           (p=0.315 n=10+10)
    Compiler        4.35M ± 0%       4.35M ± 0%  -0.03%        (p=0.001 n=10+10)
    
    Change-Id: I17d547bf9568b1ee2514a7ffab930424617f995e
    Reviewed-on: https://go-review.googlesource.com/32213
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 461adfd817eea64ee6b96f5711a48854bcda6241
Author: Klaus Post <klauspost@gmail.com>
Date:   Sat Oct 15 14:37:19 2016 +0200

    compress/flate: make compression level 0 consistent
    
    Tests for determinism was not working as intended since io.Copybuffer
    uses the io.WriterTo if available.
    
    This exposed that level 0 (no compression) changed output
    based on the number of writes and buffers given to the
    writer.
    
    Previously, Write would emit a new raw block (BTYPE=00) for
    every non-empty call to Write.
    
    This CL fixes it such that a raw block is only emitted upon
    the following conditions:
            * A full window is obtained (every 65535 bytes)
            * Flush is called
            * Close is called
    
    Change-Id: I807f866d97e2db7820f11febab30a96266a6cbf1
    Reviewed-on: https://go-review.googlesource.com/31174
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 2e196b15b94e48009369aae25299a59cbc7d45f4
Author: Klaus Post <klauspost@gmail.com>
Date:   Sat Oct 22 18:50:02 2016 +0200

    compress/flate: level 1 (best speed) match across blocks
    
    This change makes deflate level 1 (best speed) match across
    block boundaries. This comes at a small speed penalty,
    but improves compression on almost all output.
    
    Sample numbers on various content types:
    
    enwik9:            391052014 ->  382578469 bytes, 77.59 -> 74.28 MB/s
    adresser.001:       57269799 ->   47756095 bytes, 287.84 -> 357.86 MB/s
    10gb:             5233055166 -> 5198328382 bytes, 105.85 -> 96.99 MB/s
    rawstudio-mint14: 3972329211 -> 3927423364 bytes, 100.07 -> 94.22 MB/s
    sites:             165556800 ->  163178702 bytes, 72.31 -> 70.15 MB/s
    objectfiles:       115962472 ->  111649524 bytes, 132.60 -> 128.05 MB/s
    sharnd.out:        200015283 ->  200015283 bytes, 221.50 -> 218.83 MB/s
    
    Change-Id: I62a139e5c06976e803439a4268acede5139b8cfc
    Reviewed-on: https://go-review.googlesource.com/31640
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit f8a3444388a223eb4db9df61c07fd15e142e7044
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Wed Oct 26 11:44:26 2016 +0900

    cmd/compile/internal/gc: remove EscScope
    
    EscScope behaves like EscHeap in current code.
    There are no need to handle it specially.
    So remove it and use EscHeap instead.
    
    Change-Id: I910106fd147f00e5f4fd52c7dde05128141a5160
    Reviewed-on: https://go-review.googlesource.com/32130
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 1e6b12a201e5fa7009510bb036367dfb0f5a6320
Author: Bill O'Farrell <billo@ca.ibm.com>
Date:   Wed Oct 26 18:35:12 2016 -0400

    math/big: uses SIMD for some math big functions on s390x
    
    The following benchmarks are improved by the amounts shown
    (Others unaffected beyond the level of noise.)
    Also adds a test to confirm non-SIMD implementation still correct,
    even when run on SIMD-capable machine
    
    Benchmark                   old            new
    BenchmarkAddVV/100-18    66148.08 MB/s 117546.19 MB/s 1.8x
    BenchmarkAddVV/1000-18   70168.27 MB/s 133478.96 MB/s 1.9x
    BenchmarkAddVV/10000-18  67489.80 MB/s 100010.79 MB/s 1.5x
    BenchmarkAddVV/100000-18 54329.99 MB/s  69232.45 MB/s 1.3x
    BenchmarkAddVW/100-18     9929.10 MB/s  14841.31 MB/s 1.5x
    BenchmarkAddVW/1000-18   10583.31 MB/s  18674.44 MB/s 1.76x
    BenchmarkAddVW/10000-18  10521.15 MB/s  17484.10 MB/s 1.66x
    BenchmarkAddVW/100000-18 10616.56 MB/s  18084.27 MB/s 1.7x
    
    Change-Id: Ic9234c41a43f6c5e9d0e9377de8b4deeefc428a7
    Reviewed-on: https://go-review.googlesource.com/32211
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 829aa6732a47db75dbb649837fa888030659ccf9
Author: Ben Burkert <ben@benburkert.com>
Date:   Mon Oct 17 14:47:48 2016 -0700

    crypto/tls: add CloseWrite method to Conn
    
    The CloseWrite method sends a close_notify alert record to the other
    side of the connection. This record indicates that the sender has
    finished sending on the connection. Unlike the Close method, the sender
    may still read from the connection until it recieves a close_notify
    record (or the underlying connection is closed). This is analogous to a
    TCP half-close.
    
    This is a rework of CL 25159 with fixes for the unstable test.
    
    Updates #8579
    
    Change-Id: I47608d2f82a88baff07a90fd64c280ed16a60d5e
    Reviewed-on: https://go-review.googlesource.com/31318
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8eca08611ac1c65622400f526ab5b9065a4c9d67
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Oct 26 14:31:48 2016 -0700

    unicode/utf8: optimize ValidRune
    
    Re-writing the switch statement as a single boolean expression
    reduces the number of branches that the compiler generates.
    It is also arguably easier to read as a pair of numeric ranges
    that valid runes can exist in.
    
    No test changes since the existing test does a good job of
    testing all of the boundaries.
    
    This change was to gain back some performance after a correctness
    fix done in http://golang.org/cl/32123.
    
    The correctness fix (CL/32123) slowed down the benchmarks slightly:
            benchmark                   old ns/op     new ns/op     delta
            BenchmarkIndexRune/10-4     19.3          21.6          +11.92%
            BenchmarkIndexRune/32-4     33.6          35.2          +4.76%
    
    Since the fix relies on utf8.ValidRune, this CL improves benchmarks:
            benchmark                   old ns/op     new ns/op     delta
            BenchmarkIndexRune/10-4     21.6          20.0          -7.41%
            BenchmarkIndexRune/32-4     35.2          33.5          -4.83%
    
    Change-Id: Ib1ca10a2e29c90e879a8ef9b7221c33e85d015d8
    Reviewed-on: https://go-review.googlesource.com/32122
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3cfc757c625d8f9fabf2c52e2ae3a8eab3fbdf61
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Oct 26 15:52:56 2016 -0700

    go/scanner: recognize invalid floating-point constant exponent
    
    Fixes #17621.
    
    Change-Id: Id3e75c9b7fba2cf8e791c8817f890556ca238e9d
    Reviewed-on: https://go-review.googlesource.com/32096
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 4b2665786ec13c82ab751cd2d4312772b80cef12
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Oct 26 14:18:37 2016 -0700

    bytes, strings: fix regression in IndexRune
    
    In all previous versions of Go, the behavior of IndexRune(s, r)
    where r was utf.RuneError was that it would effectively return the
    index of any invalid UTF-8 byte sequence (include RuneError).
    Optimizations made in http://golang.org/cl/28537 and
    http://golang.org/cl/28546 altered this undocumented behavior such
    that RuneError would only match on the RuneError rune itself.
    
    Although, the new behavior is arguably reasonable, it did break code
    that depended on the previous behavior. Thus, we add special checks
    to ensure that we preserve the old behavior.
    
    There is a slight performance hit for correctness:
            benchmark                   old ns/op     new ns/op     delta
            BenchmarkIndexRune/10-4     19.3          21.6          +11.92%
            BenchmarkIndexRune/32-4     33.6          35.2          +4.76%
    This only occurs on small strings. The performance hit for larger strings
    is neglible and not shown.
    
    Fixes #17611
    
    Change-Id: I1d863a741213d46c40b2e1724c41245df52502a5
    Reviewed-on: https://go-review.googlesource.com/32123
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4f1e7be51f401a5374c0def2df0773abc924b03c
Author: Adam Langley <agl@golang.org>
Date:   Wed Oct 26 13:51:44 2016 -0700

    crypto/x509: use Certificate.Equals and CertPool.contains.
    
    By using these utility functions, the code can be made a little shorter.
    Thanks to Omar Shafie for pointing this out in
    https://golang.org/cl/27393/.
    
    Change-Id: I33fd97cf7d60a31d0844ec16c12bba530dcc6f6d
    Reviewed-on: https://go-review.googlesource.com/32120
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f697cf22558157b9c0bc287287c5668c758f16c9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Oct 26 22:49:13 2016 +0000

    net/http/httptest: doc tweaks
    
    From lost-in-flight comments on CL 32190.
    
    Change-Id: I2029cbac6d24b5944a796b359080011ec3a8da92
    Reviewed-on: https://go-review.googlesource.com/32210
    Reviewed-by: Caleb Spare <cespare@gmail.com>
    Reviewed-by: Martin Möhrmann <martisch@uos.de>

commit 8e4ea2f5e8ee2b9c455adb329d96fb13cd3c64da
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Oct 26 22:34:40 2016 +0000

    net/http/httptest: add more docs on ResponseRecord fields
    
    Fixes #16717
    
    Change-Id: I7b6518609796a537437539c35461a18e9e6f207f
    Reviewed-on: https://go-review.googlesource.com/32190
    Reviewed-by: Martin Möhrmann <martisch@uos.de>

commit 31f50643c36b3d2a74cf4f8df3a943bbbc06dafe
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Tue Oct 25 14:10:47 2016 -0700

    context: add comments to the WithCancel example, apply minor improvements
    
    Fixes #17534.
    
    Change-Id: I28af74b287a5a09d5f6607a012f3d5d133b04ed2
    Reviewed-on: https://go-review.googlesource.com/32017
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 117c9c35cde8444d26db91bfa8346dde252989b1
Author: Carl Johnson <me@carlmjohnson.net>
Date:   Tue Oct 25 22:35:01 2016 -0400

    net/http: Improve docs for Response.ParseForm
    
    - Removes a subject-verb disagreement.
    - Documents that PATCH requests also populate PostForm.
    - Explains that r.PostForm is always set (but blank for GET etc.).
    
    Fixes #16609
    
    Change-Id: I6b4693f8eb6db7c66fd9b9cd1df8927f50d46d50
    Reviewed-on: https://go-review.googlesource.com/32091
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 03361fd350d4e3b53093bced838504b77e8775c7
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Oct 26 13:20:05 2016 -0700

    bytes, strings: fix snake-case in variable name
    
    Change-Id: I40896fffbffefa359d08abda346933aa996f628d
    Reviewed-on: https://go-review.googlesource.com/32124
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d80e8de54ec633d018ccef94b67c796dda4e1944
Author: Than McIntosh <thanm@google.com>
Date:   Mon Oct 24 13:05:10 2016 -0400

    cmd/compile: avoid truncating fieldname var locations
    
    Don't include package path when creating LSyms for auto and param
    variables during Prog generation, and update the DWARF emit routine
    accordingly (remove the code that chops off package path from names in
    DWARF var location expressions). Implementation suggested by mdempsky@.
    
    The intent of this change is to have saner location expressions in cases
    where the variable corresponds to a structure field. For example, the
    SSA compiler's "decompose" phase can take a slice value and break it
    apart into three scalar variables corresponding to the fields (slice "X"
    gets split into "X.len", "X.cap", "X.ptr"). In such cases we want the
    name in the location expression to omit the package path but preserve
    the original variable name (e.g. "X").
    
    Fixes #16338
    
    Change-Id: Ibc444e7f3454b70fc500a33f0397e669d127daa1
    Reviewed-on: https://go-review.googlesource.com/31819
    Run-TryBot: Than McIntosh <thanm@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c7e0dda45046c539d99b7e8c3bd3e79b3fab9776
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Oct 23 06:04:14 2016 -0700

    net/http: add Server.ReadHeaderTimeout, IdleTimeout, document WriteTimeout
    
    Updates #14204
    Updates #16450
    Updates #16100
    
    Change-Id: Ic283bcec008a8e0bfbcfd8531d30fffe71052531
    Reviewed-on: https://go-review.googlesource.com/32024
    Reviewed-by: Tom Bergan <tombergan@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1625da24106b610f89ff7a67a11581df95f8e234
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Apr 10 10:16:41 2016 -0700

    encoding/json: marshal the RawMessage value type the same as its pointer type
    
    Fixes #14493
    Updates #6458 (changes its behavior)
    
    Change-Id: I851a8113fd312dae3384e989ec2b70949dc22838
    Reviewed-on: https://go-review.googlesource.com/21811
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 587b80322c6ce34ab115d7a837a56d7450aa913d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Oct 26 18:58:01 2016 +0000

    api: update next.txt
    
    Change-Id: I5ad338c90c311bd4cfdcd3d221a1f3e506a97d53
    Reviewed-on: https://go-review.googlesource.com/32118
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bea5252a13f723e08c1cb109cb87105e3bdd4ed0
Author: David Chase <drchase@google.com>
Date:   Fri Oct 21 12:01:52 2016 -0400

    cmd/compile: add explicit 'where' to EscStep data for explanations
    
    Sometimes neither the src nor the dst of an escape edge
    contains the line number appropriate to the edge, so add
    a field so that can be set correctly.
    
    Also updated some of the explanations to be less jargon-y
    and perhaps more informative, and folded bug example into
    test.
    
    Cleaned up some of the function/method names in esc.go
    and did a quick sanity check that each "bundling" function
    was actually called often enough to justify its existence.
    
    Fixes #17459.
    
    Change-Id: Ieba53ab0a6ba1f7a6c4962bc0b702ede9cc3a3cc
    Reviewed-on: https://go-review.googlesource.com/31660
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 6d9c8c926da3abd33e3ec229a8ccd028c7610dc3
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Thu Oct 27 02:58:09 2016 +0900

    net/http: gofmt -w -s
    
    Change-Id: I6815a8560dd9fe0a0ebd485a0693f7044ba09848
    Reviewed-on: https://go-review.googlesource.com/32137
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d6625caf5397a52edc38e19d523a597b531a5f12
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 24 14:20:07 2016 -0400

    runtime: scan mark worker stacks like normal
    
    Currently, markroot delays scanning mark worker stacks until mark
    termination by putting the mark worker G directly on the rescan list
    when it encounters one during the mark phase. Without this, since mark
    workers are non-preemptible, two mark workers that attempt to scan
    each other's stacks can deadlock.
    
    However, this is annoyingly asymmetric and causes some real problems.
    First, markroot does not own the G at that point, so it's not
    technically safe to add it to the rescan list. I haven't been able to
    find a specific problem this could cause, but I suspect it's the root
    cause of issue #17099. Second, this will interfere with the hybrid
    barrier, since there is no stack rescanning during mark termination
    with the hybrid barrier.
    
    This commit switches to a different approach. We move the mark
    worker's call to gcDrain to the system stack and set the mark worker's
    status to _Gwaiting for the duration of the drain to indicate that
    it's preemptible. This lets another mark worker scan its G stack while
    the drain is running on the system stack. We don't return to the G
    stack until we can switch back to _Grunning, which ensures we don't
    race with a stack scan. This lets us eliminate the special case for
    mark worker stack scans and scan them just like any other goroutine.
    The only subtlety to this approach is that we have to disable stack
    shrinking for mark workers; they could be referring to captured
    variables from the G stack, so it's not safe to move their stacks.
    
    Updates #17099 and #17503.
    
    Change-Id: Ia5213949ec470af63e24dfce01df357c12adbbea
    Reviewed-on: https://go-review.googlesource.com/31820
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 8e4e103a00c88f297b7f28360d3d021a2e5bb865
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Oct 26 08:50:23 2016 +0200

    net/rpc: enable TestGobError on Plan 9
    
    This issue has been fixed in CL 31271.
    
    Fixes #8908.
    
    Change-Id: I8015490e2d992e09c664560e42188315e0e0669e
    Reviewed-on: https://go-review.googlesource.com/32150
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f46324cffbf87b0a6334e09f72e5f73fb79f5a73
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 25 20:38:20 2016 -0400

    cmd/compile: remove unused writebarrierptr, typedmemmove Nodes
    
    Now that SSA's write barrier pass is generating calls to these,
    compile doesn't need to look them up.
    
    Change-Id: Ib50e5f2c67b247ca280d467c399e23877988bc12
    Reviewed-on: https://go-review.googlesource.com/32170
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit a0cf021be5828f8726380f8fd10070eff30852ba
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Oct 26 18:03:32 2016 +0200

    os: consider only files from #M as regular on Plan 9
    
    TestRemoveDevNull was added in CL 31657. However, this test
    was failing on Plan 9, because /dev/null was considered as
    a regular file.
    
    On Plan 9, there is no special mode to distinguish between
    device files and regular files.
    
    However, files are served by different servers. For example,
    /dev/null is served by #c (devcons), while /bin/cat is served
    by #M (devmnt).
    
    We chose to consider only the files served by #M as regular
    files. All files served by different servers will be considered
    as device files.
    
    Fixes #17598.
    
    Change-Id: Ibb1c3357d742cf2a7de15fc78c9e436dc31982bb
    Reviewed-on: https://go-review.googlesource.com/32152
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 49543695c56486d6a941e55520b37a9d098d3379
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 15:05:51 2016 -0400

    flag: arrange for FlagSet.Usage to be non-nil by default
    
    This allows callers to invoke f.Usage() themselves and get the default
    usage handler instead of a panic (from calling a nil function).
    
    Fixes #16955.
    
    Change-Id: Ie337fd9e1f85daf78c5eae7b5c41d5ad8c1f89bf
    Reviewed-on: https://go-review.googlesource.com/31576
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit f9027d61ab48154e4cb29c50e356a3f462840e01
Author: Rob Pike <r@golang.org>
Date:   Tue Oct 25 19:19:39 2016 -0700

    all: freeze net/rpc and reword the 'frozen' message in other frozen packages
    
    Make the messages grammatically korrect and consistent.
    
    Fixes #16844
    
    Change-Id: I7c137b4dc25c0c875ed07b0c64c67ae984c39cbc
    Reviewed-on: https://go-review.googlesource.com/32112
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cec84f7309f9ae962a326d60f19c9c7881749012
Author: Rob Pike <r@golang.org>
Date:   Tue Oct 25 19:14:20 2016 -0700

    doc/effectivego: reword confusing sentence
    
    For some reason git won't let me write
    
            doc/effective_go.html: reword confusing sentence
    
    or even
    
            doc/effective_go: reword confusing sentence
    
    as the subject line for this CL, but that's not important. The
    actual CL just rewrites one sentence and adds an option to grep in
    the associated example.
    
    Fixes #15875
    
    Change-Id: Iee159ea751caf4b73eacf3dfc86e29032646373f
    Reviewed-on: https://go-review.googlesource.com/32110
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3193c71c5b97c1e770f587f50824b266f04b71d8
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 23 21:53:44 2016 -0400

    runtime: fix bad pointer with 0 stack barriers
    
    Currently, if the number of stack barriers for a stack is 0, we'll
    create a zero-length slice that points just past the end of the stack
    allocation. This bad pointer causes GC panics.
    
    Fix this by creating a nil slice if the stack barrier count is 0.
    
    In practice, the only way this can happen is if
    GODEBUG=gcstackbarrieroff=1 is set because even the minimum size stack
    reserves space for two stack barriers.
    
    Change-Id: I3527c9a504c445b64b81170ee285a28594e7983d
    Reviewed-on: https://go-review.googlesource.com/31762
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit d1cc83472d611a17513795676d650276f823cafd
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 3 16:18:17 2016 -0400

    runtime: debug code to panic when marking a free object
    
    This adds debug code enabled in gccheckmark mode that panics if we
    attempt to mark an unallocated object. This is a common issue with the
    hybrid barrier when we're manipulating uninitialized memory that
    contains stale pointers. This also tends to catch bugs that will lead
    to "sweep increased allocation count" crashes closer to the source of
    the bug.
    
    Change-Id: I443ead3eac6f316a46f50b106078b524cac317f4
    Reviewed-on: https://go-review.googlesource.com/31761
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 79561a84ceb4435c1294767d26b0b8a0dd77809d
Author: Austin Clements <austin@google.com>
Date:   Thu Oct 20 22:45:18 2016 -0400

    runtime: simplify reflectcall write barriers
    
    Currently reflectcall has a subtle dance with write barriers where the
    assembly code copies the result values from the stack to the in-heap
    argument frame without write barriers and then calls into the runtime
    after the fact to invoke the necessary write barriers.
    
    For the hybrid barrier (and for ROC), we need to switch to a
    *pre*-write write barrier, which is very difficult to do with the
    current setup. We could tie ourselves in knots of subtle reasoning
    about why it's okay in this particular case to have a post-write write
    barrier, but this commit instead takes a different approach. Rather
    than making things more complex, this simplifies reflection calls so
    that the argument copy is done in Go using normal bulk write barriers.
    
    The one difficulty with this approach is that calling into Go requires
    putting arguments on the stack, but the call* functions "donate" their
    entire stack frame to the called function. We can get away with this
    now because the copy avoids using the stack and has copied the results
    out before we clobber the stack frame to call into the write barrier.
    The solution in this CL is to call another function, passing arguments
    in registers instead of on the stack, and let that other function
    reserve more stack space and setup the arguments for the runtime.
    
    This approach seemed to work out the best. I also tried making the
    call* functions reserve 32 extra bytes of frame for the write barrier
    arguments and adjust SP up by 32 bytes around the call. However, even
    with the necessary changes to the assembler to correct the spdelta
    table, the runtime was still having trouble with the frame layout (and
    the changes to the assembler caused many other things that do strange
    things with the SP to fail to assemble). The approach I took doesn't
    require any funny business with the SP.
    
    Updates #17503.
    
    Change-Id: Ie2bb0084b24d6cff38b5afb218b9e0534ad2119e
    Reviewed-on: https://go-review.googlesource.com/31655
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 1c3ab3d4312ec67d6450562bd750bb2c77621a66
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 12:41:15 2016 -0400

    cmd/go: report missing vendor visibility error
    
    The logic for saving the list of packages was not always
    preferring to keep error messages around correctly.
    The missed error led to an internal consistency failure later.
    
    Fixes #17119.
    
    Change-Id: I9723b5d2518c25e2cac5249e6a7b907be95b521c
    Reviewed-on: https://go-review.googlesource.com/31812
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 51c959b62cbc97a41157a5644f5e010b4e39acc8
Author: Filippo Valsorda <hi@filippo.io>
Date:   Wed Oct 19 15:21:54 2016 +0200

    crypto/tls: expand ClientHelloInfo
    
    Fixes #17430
    
    Change-Id: Ia1c25363d64e3091455ce00644438715aff30a0d
    Reviewed-on: https://go-review.googlesource.com/31391
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Filippo Valsorda <hi@filippo.io>

commit 4b9490ee72c225d4d82cb4896f95c757ee8fef89
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 15:08:40 2016 -0400

    fmt: document that unexported struct fields don't get the String/Error treatment
    
    Fixes #17409.
    
    Change-Id: Ib49ff4a467431b5c1e6637e5144979cf0bfba489
    Reviewed-on: https://go-review.googlesource.com/31817
    Reviewed-by: Martin Möhrmann <martisch@uos.de>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 59b0e147603e4a3a6170b56e30383a94e157e37a
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 16:04:41 2016 -0400

    cmd/go: diagnose non-canonical import paths before compilation
    
    If we leave it for compilation sometimes the error appears first
    in derived vendor paths, without any indication where they came from.
    This is better.
    
    $ go1.7 build canonical/d
    cmd/go/testdata/src/canonical/a/a.go:3: non-canonical import path "canonical/a//vendor/c" (should be "canonical/a/vendor/c")
    cmd/go/testdata/src/canonical/a/a.go:3: can't find import: "canonical/a//vendor/c"
    
    $ go build canonical/d
    package canonical/d
            imports canonical/b
            imports canonical/a/: non-canonical import path: "canonical/a/" should be "canonical/a"
    $
    
    Fixes #16954.
    
    Change-Id: I315ccec92a00d98a08c139b3dc4e17dbc640edd0
    Reviewed-on: https://go-review.googlesource.com/31668
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit e3324a4b6640da2dc8d3f086a8ed490aedae7091
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 25 15:44:14 2016 -0400

    cmd/vet: diagnose non-space-separated struct tag like `json:"x",xml:"y"`
    
    This is not strictly illegal but it probably should be (too late)
    and doesn't mean what it looks like it means:
    the second key-value pair has the key ",xml".
    
    Fixes #14466.
    
    Change-Id: I174bccc23fd28affeb87f57f77c6591634ade641
    Reviewed-on: https://go-review.googlesource.com/32031
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 3202aa7800aeb523a7af2015241f96e9ae46bfbc
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Oct 21 08:39:39 2016 -0400

    cmd/compile: improve s390x SSA rules for logical ops
    
    This CL introduces some minor changes to match rules more closely
    to the instructions they are targeting. s390x logical operation
    with immediate instructions typically leave some bits in the
    target register unchanged. This means for example that an XOR
    with -1 requires 2 instructions. It is better in cases such as
    this to create a constant and leave it visible to the compiler
    so that it can be reused rather than hiding it in the assembler.
    
    This CL also tweaks the rules a bit to ensure that constants are
    folded when possible.
    
    Change-Id: I1c6dee31ece00fc3c5fdf6a24f1abbc91dd2db2a
    Reviewed-on: https://go-review.googlesource.com/31754
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2481481ff798636907376bfdf7e8c7558b8b930e
Author: Alexander Morozov <lk4d4math@gmail.com>
Date:   Tue Oct 25 14:37:54 2016 -0700

    runtime: fix comments in time.go
    
    Change-Id: I5c501f598f41241e6d7b21d98a126827a3c3ad9a
    Reviewed-on: https://go-review.googlesource.com/32018
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6e02750dd6747735e401e13b168bd6e03ab7dbe6
Author: Francesc Campoy <campoy@golang.org>
Date:   Tue Oct 25 19:09:36 2016 -0700

    cmd/dist: ignore stderr when listing packages to test
    
    Currently any warning will make dist fail because the
    text will be considered as part of the package list.
    
    Change-Id: I09a14089cd0448c3779e2f767e9356fe3325d8d9
    Reviewed-on: https://go-review.googlesource.com/32111
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit d89b70d43357e7f016331356014253647af02971
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 25 16:25:57 2016 -0700

    cmd/compile: slightly regularize interface method types
    
    Use a single *struct{} type instance rather than reconstructing one
    for every declared/imported interface method. Minor allocations win:
    
    name       old alloc/op    new alloc/op    delta
    Template      41.8MB ± 0%     41.7MB ± 0%  -0.10%         (p=0.000 n=9+10)
    Unicode       34.2MB ± 0%     34.2MB ± 0%    ~           (p=0.971 n=10+10)
    GoTypes        123MB ± 0%      122MB ± 0%  -0.03%         (p=0.000 n=9+10)
    Compiler       495MB ± 0%      495MB ± 0%  -0.01%        (p=0.000 n=10+10)
    
    name       old allocs/op   new allocs/op   delta
    Template        409k ± 0%       408k ± 0%  -0.13%        (p=0.000 n=10+10)
    Unicode         354k ± 0%       354k ± 0%    ~           (p=0.516 n=10+10)
    GoTypes        1.22M ± 0%      1.22M ± 0%  -0.03%        (p=0.009 n=10+10)
    Compiler       4.43M ± 0%      4.43M ± 0%  -0.02%        (p=0.000 n=10+10)
    
    Change-Id: Id3a4ca3dd09112bb96ccc982b06c9e79f661d31f
    Reviewed-on: https://go-review.googlesource.com/32051
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit c78d072c8e4a8b0283da21423732f93c503711a4
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 25 23:34:35 2016 +0000

    Revert "Revert "cmd/compile: inline convI2E""
    
    This reverts commit 7dd9c385f6896c7dcb5d76353e52e36c81af2838.
    
    Reason for revert: Reverting the revert, which will re-enable the convI2E optimization.  We originally reverted the convI2E optimization because it was making the builder fail, but the underlying cause was later determined to be unrelated.
    
    Original CL: https://go-review.googlesource.com/31260
    Revert CL: https://go-review.googlesource.com/31310
    Real bug: https://go-review.googlesource.com/c/25159
    Real fix: https://go-review.googlesource.com/c/31316
    
    Change-Id: I17237bb577a23a7675a5caab970ccda71a4124f2
    Reviewed-on: https://go-review.googlesource.com/32023
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c60d9a33bfd4af38399b4caf76be0ced4c64c839
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Oct 18 14:56:19 2016 -0700

    net/http: fix redirect logic to handle mutations of cookies
    
    In the situation where the Client.Jar is set and the Request.Header
    has cookies manually inserted, the redirect logic needs to be
    able to apply changes to cookies from "Set-Cookie" headers to both
    the Jar and the manually inserted Header cookies.
    
    Since Header cookies lack information about the original domain
    and path, the logic in this CL simply removes cookies from the
    initial Header if any subsequent "Set-Cookie" matches. Thus,
    in the event of cookie conflicts, the logic preserves the behavior
    prior to change made in golang.org/cl/28930.
    
    Fixes #17494
    Updates #4800
    
    Change-Id: I645194d9f97ff4d95bd07ca36de1d6cdf2f32429
    Reviewed-on: https://go-review.googlesource.com/31435
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 70d685dc7244d46b3c22c4ac9588e51d76087ded
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 25 15:43:05 2016 -0700

    cmd/compile: don't wrap numeric or type literals in OPAREN
    
    It's only necessary to wrap named OTYPE or OLITERAL nodes, because
    their line numbers reflect the line number of the declaration, rather
    than use.
    
    Saves a lot of wrapper nodes in composite-literal-heavy packages like
    Unicode.
    
    name       old alloc/op    new alloc/op    delta
    Template      41.8MB ± 0%     41.8MB ± 0%  -0.07%        (p=0.000 n=10+10)
    Unicode       36.6MB ± 0%     34.2MB ± 0%  -6.55%        (p=0.000 n=10+10)
    GoTypes        123MB ± 0%      123MB ± 0%  -0.02%        (p=0.004 n=10+10)
    Compiler       495MB ± 0%      495MB ± 0%  -0.03%        (p=0.000 n=10+10)
    
    name       old allocs/op   new allocs/op   delta
    Template        409k ± 0%       409k ± 0%  -0.05%        (p=0.029 n=10+10)
    Unicode         371k ± 0%       354k ± 0%  -4.48%         (p=0.000 n=10+9)
    GoTypes        1.22M ± 0%      1.22M ± 0%    ~           (p=0.075 n=10+10)
    Compiler       4.44M ± 0%      4.44M ± 0%  -0.02%        (p=0.000 n=10+10)
    
    Change-Id: Id1183170835125c778fb41b7e76d06d5ecd4f7a1
    Reviewed-on: https://go-review.googlesource.com/32021
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 57df2f802f0417f08100ff8002f3b062e695e148
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 25 11:50:13 2016 -0700

    cmd/compile: remove old lexer and parser
    
    Change-Id: I7306d28930dc4538a3bee31ff5d22f3f40681ec5
    Reviewed-on: https://go-review.googlesource.com/32020
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 575b1dda4ec845aea6b5c475e9d748dc76d1bc06
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 5 21:22:33 2016 -0400

    runtime: eliminate allspans snapshot
    
    Now that sweeping and span marking use the sweep list, there's no need
    for the work.spans snapshot of the allspans list. This change
    eliminates the few remaining uses of it, which are either dead code or
    can use allspans directly, and removes work.spans and its support
    functions.
    
    Change-Id: Id5388b42b1e68e8baee853d8eafb8bb4ff95bb43
    Reviewed-on: https://go-review.googlesource.com/30537
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit c95a8e458fdf9f3cb0c176ac92a513e5dc9b32c1
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 5 18:32:21 2016 -0400

    runtime: make markrootSpans time proportional to in-use spans
    
    Currently markrootSpans iterates over all spans ever allocated to find
    the in-use spans. Since we now have a list of in-use spans, change it
    to iterate over that instead.
    
    This, combined with the previous change, fixes #9265. Before these two
    changes, blowing up the heap to 8GB and then shrinking it to a 0MB
    live set caused the small-heap portion of the test to run 60x slower
    than without the initial blowup. With these two changes, the time is
    indistinguishable.
    
    No significant effect on other benchmarks.
    
    Change-Id: I4a27e533efecfb5d18cba3a87c0181a81d0ddc1e
    Reviewed-on: https://go-review.googlesource.com/30536
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit f9497a6747abe8738728eeb08f80849c88404d18
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 5 17:50:39 2016 -0400

    runtime: make sweep time proportional to in-use spans
    
    Currently sweeping walks the list of all spans, which means the work
    in sweeping is proportional to the maximum number of spans ever used.
    If the heap was once large but is now small, this causes an
    amortization failure: on a small heap, GCs happen frequently, but a
    full sweep still has to happen in each GC cycle, which means we spent
    a lot of time in sweeping.
    
    Fix this by creating a separate list consisting of just the in-use
    spans to be swept, so sweeping is proportional to the number of in-use
    spans (which is proportional to the live heap). Specifically, we
    create two lists: a list of unswept in-use spans and a list of swept
    in-use spans. At the start of the sweep cycle, the swept list becomes
    the unswept list and the new swept list is empty. Allocating a new
    in-use span adds it to the swept list. Sweeping moves spans from the
    unswept list to the swept list.
    
    This fixes the amortization problem because a shrinking heap moves
    spans off the unswept list without adding them to the swept list,
    reducing the time required by the next sweep cycle.
    
    Updates #9265. This fix eliminates almost all of the time spent in
    sweepone; however, markrootSpans has essentially the same bug, so now
    the test program from this issue spends all of its time in
    markrootSpans.
    
    No significant effect on other benchmarks.
    
    Change-Id: Ib382e82790aad907da1c127e62b3ab45d7a4ac1e
    Reviewed-on: https://go-review.googlesource.com/30535
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 45baff61e37cb8ac497ca395d8da3f3e87601bb2
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 5 12:31:00 2016 -0400

    runtime: expand comment on work.spans
    
    Change-Id: I4b8a6f5d9bc5aba16026d17f99f3512dacde8d2d
    Reviewed-on: https://go-review.googlesource.com/30534
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 5915ce66742415d96d5a082c41d31f965b719f26
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 4 16:22:41 2016 -0400

    runtime: use len(h.spans) to indicate mapped region
    
    Currently we set the len and cap of h.spans to the full reserved
    region of the address space and track the actual mapped region
    separately in h.spans_mapped. Since we have both the len and cap at
    our disposal, change things so len(h.spans) tracks how much of the
    spans array is mapped and eliminate h.spans_mapped. This simplifies
    mheap and means we'll get nice "index out of bounds" exceptions if we
    do try to go off the end of the spans rather than a SIGSEGV.
    
    Change-Id: I8ed9a1a9a844d90e9fd2e269add4704623dbdfe6
    Reviewed-on: https://go-review.googlesource.com/30533
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 6b0f668044b7a8dd5d2360426cbcf6bd6785374d
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 4 16:03:00 2016 -0400

    runtime: consolidate h_spans and mheap_.spans
    
    Like h_allspans and mheap_.allspans, these were two ways of referring
    to the spans array from when the runtime was split between C and Go.
    Clean this up by making mheap_.spans a slice and eliminating h_spans.
    
    Change-Id: I3aa7038d53c3a4252050aa33e468c48dfed0b70e
    Reviewed-on: https://go-review.googlesource.com/30532
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 66e849b168eef36a4159a4b038fe89eecd2f22e3
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 4 15:56:19 2016 -0400

    runtime: eliminate mheap.nspan and use range loops
    
    This was necessary in the C days when allspans was an mspan**, but now
    that allspans is a Go slice, this is redundant with len(allspans) and
    we can use range loops over allspans.
    
    Change-Id: Ie1dc39611e574e29a896e01690582933f4c5be7e
    Reviewed-on: https://go-review.googlesource.com/30531
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 4d6207790b2f08daa00d2a7a67854a159ab2f601
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 4 15:51:31 2016 -0400

    runtime: consolidate h_allspans and mheap_.allspans
    
    These are two ways to refer to the allspans array that hark back to
    when the runtime was split between C and Go. Clean this up by making
    mheap_.allspans a slice and eliminating h_allspans.
    
    Change-Id: Ic9360d040cf3eb590b5dfbab0b82e8ace8525610
    Reviewed-on: https://go-review.googlesource.com/30530
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit adda7ad29551d0880df1805ae22401551b1fbfa8
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 16 16:33:05 2016 -0700

    cmd/compile/internal/gc: enable new parser by default
    
    Change-Id: I3c784986755cfbbe1b8eb8da4d64227bd109a3b0
    Reviewed-on: https://go-review.googlesource.com/27203
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 263a825b0534a55916d472ba17feff7d1ed47569
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Oct 26 00:07:27 2016 +0200

    syscall: use name+(NN)FP on plan9/amd64
    
    Generated from go vet.
    
    Change-Id: Ie775c29b505166e0bd511826ef20eeb153a0424c
    Reviewed-on: https://go-review.googlesource.com/32071
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 71f72e9d4f1cd3fd7e27515d1a5c5159fca99f0e
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Oct 26 00:06:45 2016 +0200

    syscall: use name+(NN)FP on plan9/386
    
    Generated from go vet.
    
    Change-Id: I2620e5544be46485a876c7dce26b0592bf5a4101
    Reviewed-on: https://go-review.googlesource.com/32070
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f6aec889e1c880316b1989bdc6ce3b926cbe5fe4
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Oct 13 06:57:00 2016 -0400

    cmd/compile: add a writebarrier phase in SSA
    
    When the compiler insert write barriers, the frontend makes
    conservative decisions at an early stage. This may have false
    positives which result in write barriers for stack writes.
    
    A new phase, writebarrier, is added to the SSA backend, to delay
    the decision and eliminate false positives. The frontend still
    makes conservative decisions. When building SSA, instead of
    emitting runtime calls directly, it emits WB ops (StoreWB,
    MoveWB, etc.), which will be expanded to branches and runtime
    calls in writebarrier phase. Writes to static locations on stack
    are detected and write barriers are removed.
    
    All write barriers of stack writes found by the script from
    issue #17330 are eliminated (except two false positives).
    
    Fixes #17330.
    
    Change-Id: I9bd66333da9d0ceb64dcaa3c6f33502798d1a0f8
    Reviewed-on: https://go-review.googlesource.com/31131
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 698bfa17a842890043098b972446e9b8dbc20841
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sun Oct 23 22:32:16 2016 -0400

    cmd/internal/obj: save link register in leaf function with non-empty frame on PPC64, ARM64, S390X
    
    The runtime traceback code assumes non-empty frame has link
    link register saved on LR architectures. Make sure it is so in
    the assember.
    
    Also make sure that LR is stored before update SP, so the traceback
    code will not see a half-updated stack frame if a signal comes
    during the execution of function prologue.
    
    Fixes #17381.
    
    Change-Id: I668b04501999b7f9b080275a2d1f8a57029cbbb3
    Reviewed-on: https://go-review.googlesource.com/31760
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit cf73bbfa259afe29962a5ca5e207441f63c9bcf2
Author: Tom Bergan <tombergan@google.com>
Date:   Tue Oct 25 12:18:59 2016 -0700

    net/http: add an interface for server push
    
    This interface will be implemented by golang.org/x/net/http2 in
    https://go-review.googlesource.com/c/29439/.
    
    Updates golang/go#13443
    
    Change-Id: Ib6bdd403b0878cfe36fa9875c07c2c7239232556
    Reviewed-on: https://go-review.googlesource.com/32012
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 45b43f6198436b18a0b5f64a3176d632e4f1c855
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Tue Oct 25 15:13:07 2016 -0500

    cmd/objdump: updates from golang.org/x/arch/ppc64/ppc64asm
    
    Update the ppc64x disassembly code for use by objdump
    from golang.org/x/arch/ppc64/ppc64asm commit fcea5ea.
    Enable the objdump testcase for external linking on ppc64le
    make a minor fix to the expected output.
    
    Fixes #17447
    
    Change-Id: I769cc7f8bfade594690a476dfe77ab33677ac03b
    Reviewed-on: https://go-review.googlesource.com/32015
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a850dbdef2f1875d81ad09024480f648ce3eac32
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 25 15:49:00 2016 -0400

    cmd/vet: accept space-separated tag lists for compatibility with cmd/go
    
    Fixes #17148.
    
    Change-Id: I4c66aa0733c249ee6019d1c4e802a7e30457d4b6
    Reviewed-on: https://go-review.googlesource.com/32030
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit e24ccfc6fc6289073cdbe6f47f8a915e798578e9
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Oct 25 12:59:36 2016 -0700

    misc/cgo/errors: fix malloc test for dragonfly
    
    The Dragonfly libc returns a non-zero value for malloc(-1).
    
    Fixes #17585.
    
    Change-Id: Icfe68011ccbc75c676273ee3c3efdf24a520a004
    Reviewed-on: https://go-review.googlesource.com/32050
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d391dc260a71e9f67530d7c2ca20d595514d3514
Author: shaharko <skohanim@gmail.com>
Date:   Mon Oct 24 23:15:41 2016 +0300

    cmd/internal/obj: Use bitfield for LSym attributes
    
    Reduces the size of LSym struct.
    
    On 32bit: before 84  after 76
    On 64bit: before 136 after 128
    
    name       old time/op     new time/op     delta
    Template       182ms ± 3%      182ms ± 3%    ~           (p=0.607 n=19+20)
    Unicode       93.5ms ± 4%     94.2ms ± 3%    ~           (p=0.141 n=20+19)
    GoTypes        608ms ± 1%      605ms ± 2%    ~           (p=0.056 n=20+20)
    
    name       old user-ns/op  new user-ns/op  delta
    Template        249M ± 7%       249M ± 4%    ~           (p=0.605 n=18+19)
    Unicode         149M ±14%       151M ± 5%    ~           (p=0.724 n=20+17)
    GoTypes         855M ± 4%       853M ± 3%    ~           (p=0.537 n=19+19)
    
    name       old alloc/op    new alloc/op    delta
    Template      40.3MB ± 0%     40.3MB ± 0%  -0.11%        (p=0.000 n=19+20)
    Unicode       33.8MB ± 0%     33.8MB ± 0%  -0.08%        (p=0.000 n=20+20)
    GoTypes        119MB ± 0%      119MB ± 0%  -0.10%        (p=0.000 n=19+20)
    
    name       old allocs/op   new allocs/op   delta
    Template        383k ± 0%       383k ± 0%    ~           (p=0.703 n=20+20)
    Unicode         317k ± 0%       317k ± 0%    ~           (p=0.982 n=19+18)
    GoTypes        1.14M ± 0%      1.14M ± 0%    ~           (p=0.086 n=20+20)
    
    Change-Id: Id6ba0db3ecc4503a4e9af3ed0d5884d4366e8bf9
    Reviewed-on: https://go-review.googlesource.com/31870
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Shahar Kohanim <skohanim@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2ee82edfc2c904c952daef6f442c223b1568cb66
Author: Rob Pike <r@golang.org>
Date:   Mon Oct 24 12:38:06 2016 -0700

    cmd/doc: show documentation for interface methods when requested explicitly
    
    For historical reasons, the go/doc package does not include
    the methods within an interface as part of the documented
    methods for that type. Thus,
    
            go doc ast.Node.Pos
    
    gives an incorrect and confusing error message:
    
            doc: no method Node.Pos in package go/ast
    
    This CL does some dirty work to dig down to the methods
    so interface methods now present their documentation:
    
    % go doc ast.node.pos
    func Pos() token.Pos  // position of first character belonging to the node
    %
    
    It must largely sidestep the doc package to do this, which
    is a shame. Perhaps things will improve there one day.
    
    The change does not handle embeddings, and in principle the
    same approach could be done for struct fields, but that is also
    not here yet. But this CL fixes the thing that was bugging me.
    
    Change-Id: Ic10a91936da96f54ee0b2f4a4fe4a8c9b93a5b4a
    Reviewed-on: https://go-review.googlesource.com/31852
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 050f378085da91ce65d2c0157b9bebcced5f883f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Oct 25 11:45:26 2016 -0700

    cmd/go: add more env variables to "go bug"
    
    CL 31330 added more envvars to "go env".
    This CL brings them to "go bug" as well.
    
    Change-Id: Iae122072c8178007eda8b765aaa3f38c3c6e39a0
    Reviewed-on: https://go-review.googlesource.com/32011
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d8d445280a6a7e5f3535e8b49e9ae248f2627759
Author: shaharko <skohanim@gmail.com>
Date:   Wed Oct 19 07:33:16 2016 +0300

    cmd/compile, cmd/link: more efficient typelink generation
    
    Instead of generating typelink symbols in the compiler
    mark types that should have typelinks with a flag.
    The linker detects this flag and adds the marked types
    to the typelink table.
    
    name            old s/op    new s/op    delta
    LinkCmdCompile   0.27 ± 6%   0.25 ± 6%  -6.93%    (p=0.000 n=97+98)
    LinkCmdGo        0.30 ± 5%   0.29 ±10%  -4.22%    (p=0.000 n=97+99)
    
    name            old MaxRSS  new MaxRSS  delta
    LinkCmdCompile   112k ± 3%   106k ± 2%  -4.85%  (p=0.000 n=100+100)
    LinkCmdGo        107k ± 3%   103k ± 3%  -3.00%  (p=0.000 n=100+100)
    
    Change-Id: Ic95dd4b0101e90c1fa262c9c6c03a2028d6b3623
    Reviewed-on: https://go-review.googlesource.com/31772
    Run-TryBot: Shahar Kohanim <skohanim@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 5a9549260df1f5ffcbdd5938861fea9f74478661
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Tue Oct 25 19:33:50 2016 +0530

    math/cmplx: prevent infinite loop in tanSeries
    
    The condition to determine if any further iterations are needed is
    evaluated to false in case it encounters a NaN. Instead, flip the
    condition to keep looping until the factor is greater than the machine
    roundoff error.
    
    Updates #17577
    
    Change-Id: I058abe73fcd49d3ae4e2f7b33020437cc8f290c3
    Reviewed-on: https://go-review.googlesource.com/31952
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit a2f77e9ef8ba2e956453ad0dda1ebdf4ae7c4fdb
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Oct 19 13:13:31 2016 -0700

    cmd/compile: cleanup gdata slightly
    
    In sinit.go, gdata can already handle strings and complex, so no
    reason to handle them separately.
    
    In obj.go, inline gdatastring and gdatacomplex into gdata, since it's
    the only caller. Allows extracting out the common Linksym calls.
    
    Passes toolstash -cmp.
    
    Change-Id: I3cb18d9b4206a8a269c36e0d30a345d8e6caba1f
    Reviewed-on: https://go-review.googlesource.com/31498
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 213ee3d20ed35bf1bce8bb3e93fd7b0fca562536
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 25 08:39:19 2016 -0700

    go/types: match cmd/compile's alignment for complex64
    
    Fixes #17584.
    
    Change-Id: I3af31cc1f2e9c906f3b73e77f3b092624ba78fbe
    Reviewed-on: https://go-review.googlesource.com/31939
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 1986a450ddd2e5ad213b9aff92cf7fe495234bbf
Author: David Chase <drchase@google.com>
Date:   Tue Oct 25 11:11:40 2016 -0400

    cmd/compile: added test to ensure that accidental fix remains
    
    Bug 15141 was apparently fixed by some other change to the
    compiler (this is plausible, it was a weird bug dependent
    on a particular way of returning a large named array result),
    add the test to ensure that it stays fixed.
    
    Updates #15141.
    
    Change-Id: I3d6937556413fab1af31c5a1940e6931563ce2f3
    Reviewed-on: https://go-review.googlesource.com/31972
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d8f7e4fadb785d90444245159f4c5a32653263d6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Oct 25 06:44:58 2016 -0700

    runtime, syscall: appease vet
    
    No functional changes.
    
    Change-Id: I0842b2560f4296abfc453410fdd79514132cab83
    Reviewed-on: https://go-review.googlesource.com/31935
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit eb6ae3ca7b0bb9f4bbeac03cc3cbd2362fc05342
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Oct 25 05:56:03 2016 -0700

    cmd/vet/all: remove cmd/compile/internal/big special case
    
    It no longer exists as of CL 31010.
    
    Change-Id: Idd61f392544cad8b3f3f8d984dc5c953b473e2e5
    Reviewed-on: https://go-review.googlesource.com/31934
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b10b2f8d407198d59525197e0b94a16fcc4a7cf0
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Mon Oct 24 14:40:42 2016 -0500

    cmd/internal: add shift opcodes with shift operands on ppc64x
    
    Some original shift opcodes for ppc64x expected an operand to be
    a mask instead of a shift count, preventing some valid shift counts
    from being written.
    
    This adds new opcodes for shifts where needed, using mnemonics that
    match the ppc64 asm and allowing the assembler to accept the full set
    of valid shift counts.
    
    Fixes #15016
    
    Change-Id: Id573489f852038d06def279c13fd0523736878a7
    Reviewed-on: https://go-review.googlesource.com/31853
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 5db7c6d32cef3d9dd917adb81c4a38978853a17b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Oct 25 06:46:26 2016 -0700

    cmd/vet/all: update whitelists
    
    Change-Id: Ie505b5d8cdfe4ffda71f909d6f81603b6d752eed
    Reviewed-on: https://go-review.googlesource.com/31937
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cf09920c0f9dcb8ef9c85cf02e51e876e52845e2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Oct 25 06:46:51 2016 -0700

    cmd/compile: place OIDATA next to OITAB
    
    Change-Id: Ia499125714e272af87562de5e5d23e68a112df58
    Reviewed-on: https://go-review.googlesource.com/31938
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 79b5d329011823c2dff403a98e5a6a4f5946cde2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Oct 25 06:45:35 2016 -0700

    crypto/tls: fix vet issues again
    
    While we're here, use test[%d] in place of #%d.
    
    Change-Id: Ie30afcab9673e78d3ea7ca80f5e662fbea897488
    Reviewed-on: https://go-review.googlesource.com/31936
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1abefc1ff0ae6a3f3df7affa704cd2c71ab48a05
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Oct 25 05:45:52 2016 -0700

    cmd/compile: clean up rule logging helpers
    
    Introduced in CLs 29380 and 30011.
    
    Change-Id: I3d3641e8748ce0adb57b087a1fcd62f295ade665
    Reviewed-on: https://go-review.googlesource.com/31933
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit a3faa80033ae2ffa3ee56439759f0ea0200a3a3e
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 09:21:06 2016 -0400

    cmd/go: bypass install to os.DevNull entirely, test mayberemovefile(os.DevNull)
    
    Fixes #16811.
    
    Change-Id: I7d018015f691838482ccf845d621209b96935ba4
    Reviewed-on: https://go-review.googlesource.com/31657
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 3ef07c412f068144554648c0d209bef444a2ee27
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Oct 23 16:11:13 2016 -0400

    cmd, runtime: remove s390x 3 operand immediate logical ops
    
    These are emulated by the assembler and we don't need them.
    
    Change-Id: I2b07c5315a5b642fdb5e50b468453260ae121164
    Reviewed-on: https://go-review.googlesource.com/31758
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 517a44d57e6a0834e98b763045fab9be8f4673d0
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Oct 19 16:41:01 2016 -0400

    cmd/compile: intrinsify atomic operations on s390x
    
    Implements the following intrinsics on s390x:
     - AtomicAdd{32,64}
     - AtomicCompareAndSwap{32,64}
     - AtomicExchange{32,64}
     - AtomicLoad{32,64,Ptr}
     - AtomicStore{32,64,PtrNoWB}
    
    I haven't added rules for And8 or Or8 yet.
    
    Change-Id: I647af023a8e513718e90e98a60191e7af6167314
    Reviewed-on: https://go-review.googlesource.com/31614
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2113c9ad0d82b3d1a734c0b5fc0efc9c44a920d5
Author: Martin Möhrmann <martisch@uos.de>
Date:   Tue Oct 18 06:18:39 2016 +0200

    image/color: improve speed of RGBA methods
    
    Apply the optimizations added to color conversion functions in
    https://go-review.googlesource.com/#/c/21910/ to the RGBA methods.
    
    YCbCrToRGBA/0-4      6.32ns ± 3%  6.58ns ± 2%   +4.15%  (p=0.000 n=20+19)
    YCbCrToRGBA/128-4    8.02ns ± 2%  5.89ns ± 2%  -26.57%  (p=0.000 n=20+19)
    YCbCrToRGBA/255-4    8.06ns ± 2%  6.59ns ± 3%  -18.18%  (p=0.000 n=20+20)
    NYCbCrAToRGBA/0-4    8.71ns ± 2%  8.78ns ± 2%   +0.86%  (p=0.036 n=19+20)
    NYCbCrAToRGBA/128-4  10.3ns ± 4%   7.9ns ± 2%  -23.44%  (p=0.000 n=20+20)
    NYCbCrAToRGBA/255-4  9.64ns ± 2%  8.79ns ± 3%   -8.80%  (p=0.000 n=20+20)
    
    Fixes: #15260
    
    Change-Id: I225efdf74603e8d2b4f063054f7baee7a5029de6
    Reviewed-on: https://go-review.googlesource.com/31773
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

commit 80a034642e9eac3fde60dbff920a70c4aae7fbc9
Author: shaharko <skohanim@gmail.com>
Date:   Thu Oct 13 22:31:46 2016 +0300

    cmd/compile, cmd/link: stop generating unused go.string.hdr symbols.
    
    name       old s/op    new s/op    delta
    LinkCmdGo   0.29 ± 5%   0.29 ± 8%  -2.60%   (p=0.000 n=97+98)
    
    name       old MaxRSS  new MaxRSS  delta
    LinkCmdGo   106k ± 4%   105k ± 3%  -1.00%  (p=0.000 n=100+99)
    
    Change-Id: I75a1c3b24ea711a15a5d2eae026b70b97ee7bad4
    Reviewed-on: https://go-review.googlesource.com/31030
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 001743813971e0870144443399f2fb396b3781b7
Author: shaharko <skohanim@gmail.com>
Date:   Thu Oct 13 22:56:38 2016 +0300

    cmd/compile: only generate ·f symbols when necessary
    
    Before go supported buildmode=shared ·f symbols used to be defined
    only when they were used. In order to solve #11480 the strategy
    was changed to have these symbols defined on declaration which is
    less efficient and generates many unneeded symbols.
    With this change the best strategy is chosen for each situation,
    improving static linking time:
    
    name            old s/op    new s/op    delta
    LinkCmdCompile   0.27 ± 5%   0.25 ± 6%  -8.22%   (p=0.000 n=98+96)
    LinkCmdGo        0.30 ± 6%   0.29 ± 8%  -5.03%   (p=0.000 n=95+99)
    
    name            old MaxRSS  new MaxRSS  delta
    LinkCmdCompile   107k ± 2%    98k ± 3%  -8.32%  (p=0.000 n=99+100)
    LinkCmdGo        106k ± 3%   104k ± 3%  -1.94%  (p=0.000 n=99+100)
    
    Change-Id: I965eeee30541e724fd363804adcd6fda10f965a4
    Reviewed-on: https://go-review.googlesource.com/31031
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 5d8324e6822e34c900e36d67adf640cee6693d25
Author: Paul Marks <pmarks@google.com>
Date:   Mon Oct 24 17:49:22 2016 -0700

    net: add hostname warnings to all first(isIPv4) functions.
    
    In general, these functions cannot behave correctly when given a
    hostname, because a hostname may represent multiple IP addresses, and
    first(isIPv4) chooses at most one.
    
    Updates #9334
    
    Change-Id: Icfb629f84af4d976476385a3071270253c0000b1
    Reviewed-on: https://go-review.googlesource.com/31931
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 71cf409dbdcba20f220d65ab83a6494c1f79b2a0
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 24 20:47:31 2016 -0400

    runtime: accept timeout from non-timeout semaphore wait on OS X
    
    Looking at the kernel sources, I don't see how this is possible.
    But obviously it is. Just try again.
    
    Fixes #17161.
    
    Change-Id: Iea7d53f7cf75944792d2f75a0d07129831c7bcdb
    Reviewed-on: https://go-review.googlesource.com/31823
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b4ce38ec5769a270f0545dce43b2e926230609c3
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Oct 24 10:19:04 2016 -0700

    cmd/cgo: throw if C.malloc returns nil
    
    Change-Id: If7740ac7b6c4190db5a1ab4100d12cf16dc79c84
    Reviewed-on: https://go-review.googlesource.com/31768
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 643c6b3c74409871d7f96cbad145dabdefbbc8c1
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Mon Oct 24 08:52:04 2016 +0900

    path/filepath: make TestToNorm robust
    
    The old code leaves garbages in a temporary directory because it
    cannot remove the current working directory on windows.
    The new code changes the directory before calling os.Remove.
    
    Furthermore, the old code assumes that ioutil.TempDir (os.TempDir)
    doesn't return a relative path nor an UNC path.
    If it isn't the case, the new code calls t.Fatal earlier for preventing
    ambiguous errors.
    
    Finally, the old code reassigns the variable which is used by the defer
    function. It could cause unexpected results, so avoid that.
    
    Change-Id: I5fc3902059ecaf18dc1341ecc4979d1206034cd7
    Reviewed-on: https://go-review.googlesource.com/31790
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 02c1d8a1589b47f12deaaa63d4a6a084640f4389
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Mon Oct 24 15:06:20 2016 +1100

    cmd/link/internal/ld: remove goto from ldpe.go
    
    Updates #15345
    
    Change-Id: I447d133512e99a9900928a910e161a85db6e8b75
    Reviewed-on: https://go-review.googlesource.com/31792
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c0e2318f7c9a83b237a08b208eb145d520e3a233
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Oct 21 17:23:01 2016 -0700

    cmd/compile: simplify parsing of type aliases
    
    Change-Id: Ia86841cf84bc17ff6ecc6e5ac4cec86384a0da00
    Reviewed-on: https://go-review.googlesource.com/31719
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 1b0cf430dd130ad53e9f43bc04d2ed91bcd87b26
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Oct 19 15:32:14 2016 -0700

    cmd/compile: implement package-level aliases (no export yet)
    
    Requires -newparser=1.
    
    For #17487.
    For #16339.
    
    Change-Id: I156fb0c0f8a97e8c72dbbfbd7fe821efee12b957
    Reviewed-on: https://go-review.googlesource.com/31597
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 7e9f420ddfb1ce8882bb715158cdb8b977b93955
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Oct 24 15:56:48 2016 -0700

    test: delete bugs directory
    
    It appears to be a vestigial holding ground for bugs.
    But we have an issue tracker, and #1909 is there and open.
    
    Change-Id: I912ff222a24c51fab483be0c67dad534f5a84488
    Reviewed-on: https://go-review.googlesource.com/31859
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c63db157bd669845a23255ab268596669a5ea5df
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Oct 25 00:31:45 2016 +0200

    net: handle "dns failure" as errNoSuchHost on Plan 9
    
    CL 31468 added TestLookupNonLDH, which was failing on Plan 9,
    because LookupHost was expecting to return errNoSuchHost
    on DNS resolution failure, while Plan 9 returned the
    "dns failure" string.
    
    In the Plan 9 implementation of lookupHost, we now return
    errNoSuchHost instead of the "dns failure" string, so
    the behavior is more consistant with other operating systems.
    
    Fixes #17568.
    
    Change-Id: If64f580dc0626a4a4f19e5511ba2ca5daff5f789
    Reviewed-on: https://go-review.googlesource.com/31873
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6e78f7697405e8c24af796322e4c3c325ed97d95
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Oct 24 23:24:11 2016 +0000

    testing/quick, text/tabwriter: freeze packages
    
    Fixes #15557
    
    Change-Id: I02ad98068894e75d4e08e271fdd16cb420519460
    Reviewed-on: https://go-review.googlesource.com/31910
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 4c9c023346415908390b68cfab0677ef53cf38ac
Author: Alexander Döring <email@alexd.ch>
Date:   Mon Oct 24 22:40:31 2016 +0200

    math,math/cmplx: fix linter issues
    
    Change-Id: If061f1f120573cb109d97fa40806e160603cd593
    Reviewed-on: https://go-review.googlesource.com/31871
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 426c287eb64abfe54e51fba3014c8eaeff7fc270
Author: Joshua Boelter <joshua.boelter@intel.com>
Date:   Wed Jul 13 16:22:28 2016 -0600

    crypto/tls: add VerifyPeerCertificate to tls.Config
    
    VerifyPeerCertificate returns an error if the peer should not be
    trusted. It will be called after the initial handshake and before
    any other verification checks on the cert or chain are performed.
    This provides the callee an opportunity to augment the certificate
    verification.
    
    If VerifyPeerCertificate is not nil and returns an error,
    then the handshake will fail.
    
    Fixes #16363
    
    Change-Id: I6a22f199f0e81b6f5d5f37c54d85ab878216bb22
    Reviewed-on: https://go-review.googlesource.com/26654
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 93bca632d9d4662c0e04f6ae24122579130a4bc2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Oct 24 15:36:26 2016 -0700

    cmd/compile: preserve type information in inrange
    
    Fixes #17551.
    
    Change-Id: I84b7d82654cda3559c119aa56b07f30d0d224865
    Reviewed-on: https://go-review.googlesource.com/31857
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit b55cee1893283cc55e99fb041fc0067f56924926
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Oct 21 18:22:13 2016 -0400

    cmd/internal/obj/mips: store LR before update SP in function prologue
    
    This prevents the traceback code from seeing a half-updated
    stack frame when a profiling signal comes during the execution
    of function prologue. Also fixes mips64x part of #17381.
    
    Change-Id: Iec9683427e546e3648b2e8b1dde956d13f6eb938
    Reviewed-on: https://go-review.googlesource.com/31721
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 0c02280fe0b4a178f78633721201f899e5213414
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Oct 25 00:12:57 2016 +0200

    net: fix TestCloseError on Plan 9
    
    Since CL 30614, TestCloseError is failing on Plan 9,
    because File.Write now checks f.fd == badFd before
    calling syscall.Write.
    
    The f.fd == badFd check returns os.ErrClosed, while
    syscall.Write returned a syscall.ErrorString error.
    
    TestCloseError was failing because it expected a
    syscall.ErrorString error.
    
    We add a case in parseCloseError to handle the
    os.ErrClosed case.
    
    Fixes #17569.
    
    Change-Id: I6b4d956d18ed6d3c2ac5211ffd50a4888f7521e1
    Reviewed-on: https://go-review.googlesource.com/31872
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1fcad29341ba4daa8762f2ead932fd001a9d2476
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Oct 24 14:33:22 2016 -0700

    cmd/compile: remove OREGISTER, Node.Reg
    
    OREGISTER is unused.
    
    All remaining uses of Node.Reg use REGSP.
    
    Change-Id: I51cf06826867e576baabd568e04f96d2634f5cad
    Reviewed-on: https://go-review.googlesource.com/31856
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 28269796c8ef6c59cca746b090080d99043cdeef
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 00:02:33 2016 -0400

    cmd/internal/objfile: remove debugging print
    
    Crept into CL 9682, committed last week.
    
    Change-Id: I5b8e9119dbfeb0bc3005623ab74dbd29311d17ae
    Reviewed-on: https://go-review.googlesource.com/31814
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit aeb8b9591c254560c1ecc4eafbc38b31d632da64
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 14:51:58 2016 -0400

    encoding/json: fix bad formatting introduced in CL 20356
    
    Change-Id: I39a8b543e472e5ec5d4807a9b7f61657465c5ce5
    Reviewed-on: https://go-review.googlesource.com/31816
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a7cad4110ac229ecf5b0fcf0a035c5a03c699415
Author: Michael Fraenkel <michael.fraenkel@gmail.com>
Date:   Sat Oct 8 06:57:49 2016 -0400

    net/http/httputil: log err encountered during reverseproxy body copying
    
    Fixes #16659
    
    Change-Id: I13dd797e93e0b572eaf8726f1be594870d40183b
    Reviewed-on: https://go-review.googlesource.com/30692
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 95f3e47456e42899b64d3740eab1dd7ee1db5bf9
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Mon Oct 24 14:19:18 2016 -0500

    cmd/compile: add rule to use ANDN for a&^b on ppc64x
    
    Adds a rule to generate ANDN for AND x ^y.
    
    Fixes #17567
    
    Change-Id: I3b978058d5663f32c42b1af19bb207eac5622615
    Reviewed-on: https://go-review.googlesource.com/31769
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 7124056f7e6f44faba822e4d96c18fde002b4566
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Oct 24 11:46:06 2016 -0700

    cmd/internal/obj: drop Addr's Gotype field
    
    The Gotype field is only used for ATYPE instructions. Instead of
    specially storing the Go type symbol in From.Gotype, just store it in
    To.Sym like any other 2-argument instruction would.
    
    Modest reduction in allocations:
    
    name       old alloc/op    new alloc/op    delta
    Template      42.0MB ± 0%     41.8MB ± 0%  -0.40%         (p=0.000 n=9+10)
    Unicode       34.3MB ± 0%     34.1MB ± 0%  -0.48%         (p=0.000 n=9+10)
    GoTypes        122MB ± 0%      122MB ± 0%  -0.14%         (p=0.000 n=9+10)
    Compiler       518MB ± 0%      518MB ± 0%  -0.04%         (p=0.000 n=9+10)
    
    Passes toolstash -cmp.
    
    Change-Id: I0e603266b5d7d4e405106a26369e22773a0d3a91
    Reviewed-on: https://go-review.googlesource.com/31850
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 07a22dbd34d439182bea6a966b80baa2df7c72f4
Author: Alan Donovan <adonovan@google.com>
Date:   Mon Oct 24 11:00:19 2016 -0400

    cmd/vet: cgo: emit no error for calls to C.CBytes
    
    Fixes issue golang/go#17563
    
    Change-Id: Ibb41ea9419907193526cc601f6afd07d8689b1fe
    Reviewed-on: https://go-review.googlesource.com/31810
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2a3db5c0175e26ba99adca90e5bab6cb4e85cc2d
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 22:22:25 2016 -0400

    cmd/cgo: document C.malloc behavior
    
    Fixes #16309.
    
    Change-Id: Ifcd28b0746e1af30e2519a7b118485aecfb12396
    Reviewed-on: https://go-review.googlesource.com/31811
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a6141ebd3f33c1f4330a0ce3507f686b7fd64489
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Mon Oct 24 22:39:04 2016 +0530

    math/big: fix alignment in Float.Parse docs
    
    Leading spaces in a couple of lines instead of tabs cause those to be
    misaligned (as seen on <https://golang.org/pkg/math/big/#Float.Parse>):
    
    <<<
            number   = [ sign ] [ prefix ] mantissa [ exponent ] | infinity .
            sign     = "+" | "-" .
         prefix   = "0" ( "x" | "X" | "b" | "B" ) .
            mantissa = digits | digits "." [ digits ] | "." digits .
            exponent = ( "E" | "e" | "p" ) [ sign ] digits .
            digits   = digit { digit } .
            digit    = "0" ... "9" | "a" ... "z" | "A" ... "Z" .
         infinity = [ sign ] ( "inf" | "Inf" ) .
    >>>
    
    Replace the leading spaces with tabs so that those align well.
    
    Change-Id: Ibba6cd53f340001bbd929067dc587feb071dc3bd
    Reviewed-on: https://go-review.googlesource.com/31830
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0fff67d191514d4eab9e5fd1f078a8c66c8550fd
Author: Alexander Döring <email@alexd.ch>
Date:   Sun Oct 23 23:13:59 2016 +0200

    database/sql: fix possible context leak in test
    
    Fixes #17560
    
    Change-Id: I96fcdec87220391ef5432571b5c090b5be27491a
    Reviewed-on: https://go-review.googlesource.com/31771
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit accf5cc3862830bb8bb54af31aa1861e6a2b8481
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Oct 23 14:10:11 2016 -0700

    all: minor vet fixes
    
    Change-Id: I22f0f3e792052762499f632571155768b4052bc9
    Reviewed-on: https://go-review.googlesource.com/31759
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 212d2f82e05018f1ebb5e40e2c328865201da356
Author: Dan Caddigan <goldcaddy77@gmail.com>
Date:   Fri Oct 7 00:46:56 2016 -0400

    os: add ErrClosed, return for use of closed File
    
    This is clearer than syscall.EBADF.
    
    Fixes #17320.
    
    Change-Id: I14c6a362f9a6044c9b07cd7965499f4a83d2a860
    Reviewed-on: https://go-review.googlesource.com/30614
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 452bbfc179d6739a404aacc819ec66acc71fc55c
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 19 00:01:31 2016 -0400

    path/filepath: fix match of \\?\c:\* on Windows
    
    \\?\c:\ is a "root directory" that is not subject to further matching,
    but the ? makes it look like a pattern, which was causing an
    infinite recursion. Make sure the code understands the ? is not a pattern.
    
    Fixes #15879.
    
    Change-Id: I3a4310bbc398bcae764b9f8859c875317345e757
    Reviewed-on: https://go-review.googlesource.com/31460
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit c5ccbdd22bdbdc43d541b7e7d4ed66ceb559030e
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 16:53:49 2016 -0400

    net/url: reject colon in first segment of relative path in Parse
    
    RFC 3986 §3.3 disallows relative URL paths in which the first segment
    contains a colon, presumably to avoid confusion with scheme:foo syntax,
    which is exactly what happened in #16822.
    
    Fixes #16822.
    
    Change-Id: Ie4449e1dd21c5e56e3b126e086c3a0b05da7ff24
    Reviewed-on: https://go-review.googlesource.com/31582
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit afe675c2fa9deacd61f5684be54f1ebbdc94fc0c
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 14:37:31 2016 -0400

    doc/faq: mention that copying discussion is semantics, not implementation
    
    Fixes #17181.
    
    Change-Id: If7cc4865e391acf76512f7ec7167d5a31377b598
    Reviewed-on: https://go-review.googlesource.com/31574
    Reviewed-by: Rob Pike <r@golang.org>

commit 39690beb5885d378d98117c3d57b494e97f16eea
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 09:11:20 2016 -0400

    runtime: fix invariant comment in chan.go
    
    Change-Id: Ic6317f186d0ee68ab1f2d15be9a966a152f61bfb
    Reviewed-on: https://go-review.googlesource.com/31610
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2693fa15ee12acd67e45d8fa57626675903ab605
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 19 13:34:15 2016 -0400

    html/template: add test case for unbounded template expansion
    
    Fixed by CL 31092 already, but that change is a few steps away
    from the problem observed here, so add an explicit test.
    
    Fixes #17019.
    
    Change-Id: If4ece1418e6596b1976961347889ce12c5969637
    Reviewed-on: https://go-review.googlesource.com/31466
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 604146ce8961d32f410949015fc8ee31f9052209
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 19 10:27:05 2016 -0400

    html/template, text/template: docs and fixes for template redefinition
    
    All prior versions of Go have allowed redefining empty templates
    to become non-empty. Unfortunately, that has never consistently
    taken effect in html/template after the first execution:
    
            // define and execute
            t := template.New("root")
            t.Parse(`{{define "T"}}{{end}}<a href="{{template "T"}}">`)
            t.Execute(w, nil) // <a href="">
    
            // redefine
            t.Parse(`{{define "T"}}my.url{{end}}`) // succeeds, but ignored
            t.Execute(w, nil) // <a href="">
    
    When Go 1.6 added {{block...}} to text/template, that loosened the
    redefinition rules to allow redefinition at any time. The loosening was
    undone a bit in html/template, although inconsistently:
    
            // define and execute
            t := template.New("root")
            t.Parse(`{{define "T"}}body{{end}}`)
            t.Lookup("T").Execute(ioutil.Discard, nil)
    
            // attempt to redefine
            t.Parse(`{{define "T"}}body{{end}}`) // rejected in all Go versions
            t.Lookup("T").Parse("body") // OK as of Go 1.6, likely unintentionally
    
    Like in the empty->non-empty case, whether future execution takes
    notice of a redefinition basically can't be explained without going into
    the details of the template escape analysis.
    
    Address both the original inconsistencies in whether a redefinition
    would have any effect and the new inconsistencies about whether a
    redefinition is allowed by adopting a new rule: no parsing or modifying
    any templates after the first execution of any template in the same set.
    Template analysis begins at first execution, and once template analysis
    has begun, we simply don't have the right logic to update the analysis
    for incremental modifications (and never have).
    
    If this new rule breaks existing uses of templates that we decide need
    to be supported, we can try to invalidate all escape analysis for the
    entire set after any modifications. But let's wait on that until we know
    we need to and why.
    
    Also fix documentation of text/template redefinition policy
    (redefinition is always OK).
    
    Fixes #15761.
    
    Change-Id: I7d58d7c08a7d9df2440ee0d651a5b2ecaff3006c
    Reviewed-on: https://go-review.googlesource.com/31464
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit fa90f9b909286dc815fde1f83f77b80bd686127d
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 19 16:48:21 2016 -0400

    net: there are no invalid domain names anymore
    
    The Go resolver reports invalid domain name for '!!!.local',
    but that is allowed by multicast DNS. In general we can't predict
    what future relaxations might come along, and libc resolvers
    do not distinguish 'no such host' from 'invalid name', so stop
    making that distinction here too. Always use 'no such host'.
    
    Fixes #12421.
    
    Change-Id: I8f22604767ec9e270434e483da52b337833bad71
    Reviewed-on: https://go-review.googlesource.com/31468
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 157ce90abe24e7ff8ac51b05660eb7190101138c
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 10:06:54 2016 -0400

    go/build: allow % in ${SRCDIR} expansion for Jenkins
    
    Fixes #16959.
    
    Change-Id: Ibbb28fdf26c53788a0edb3e3ea54ec030fa2a8cf
    Reviewed-on: https://go-review.googlesource.com/31611
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 86324f29c6892e56ea756e7a5d81a26c86ce2e12
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 15:45:51 2016 -0400

    go/build: do not record go:binary-only-package if build tags not satisfied
    
    This is the documented (and now implemented) behavior.
    
    Fixes #16841.
    
    Change-Id: Ic75adc5ba18303ed9578e04284f32933f905d6a3
    Reviewed-on: https://go-review.googlesource.com/31577
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit ee4b58df61e25bec2d526947dd76cd2ab5d3051d
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 15:51:26 2016 -0400

    log: document that log messages end in newlines
    
    Fixes #16564.
    
    Change-Id: Idd7b3c8f1d8415acd952d1efb6dc35ba4191805d
    Reviewed-on: https://go-review.googlesource.com/31578
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit fc88a0f4ce66704d04f2b6d7730e722ef2b9a5de
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 16:43:09 2016 -0400

    net/mail: expose ParseDate, for use parsing Resent-Date headers
    
    Fixes #16657.
    
    Change-Id: I9425af91a48016b1d7465b9f43cafa792bc00bb3
    Reviewed-on: https://go-review.googlesource.com/31581
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 699fb0fc5b654b714d7e8be5628646c0b063d523
Author: Quentin Smith <quentin@golang.org>
Date:   Fri Oct 21 16:48:50 2016 -0400

    cmd/doc: continue searching after error reading directory
    
    If a directory in GOPATH is unreadable, we should keep looking for other
    packages. Otherwise we can give the misleading error "no buildable Go
    source files".
    
    Fixes #16240
    
    Change-Id: I38e1037f56ec463d3c141f0508fb74211cb90f13
    Reviewed-on: https://go-review.googlesource.com/31713
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 8419c85eaa014a6b8f3485a4e27520a3acd31601
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 20:37:28 2016 -0400

    runtime, cmd/link: fix netbsd/arm EABI support
    
    Fixes reported by oshimaya (see #13806).
    
    Fixes #13806.
    
    Change-Id: I9b659ab918a34bc5f7c58f3d7f59058115b7f776
    Reviewed-on: https://go-review.googlesource.com/31651
    Reviewed-by: Minux Ma <minux@golang.org>

commit 19adf8aeaae7c898e8efeab18e3162c3807a8756
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 20 20:05:41 2016 -0400

    reflect: fix DeepEqual for some cyclic corner cases
    
    Fixes #15610.
    
    Change-Id: Idbc8a9b328b92034d53b8009471678a166d5cf3f
    Reviewed-on: https://go-review.googlesource.com/31588
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 17ad60b8a4b92ee36f5b14c609ad1d0b5805b886
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 10:45:47 2016 -0400

    cmd/go: fix test for moved package in go get -u
    
    What matters during go get -u is not whether there is an import comment
    but whether we resolved the path by an HTML <meta> tag.
    
    Fixes #16471.
    
    Change-Id: I6b194a3f73a7962a0170b4d5cf51cfed74e02c00
    Reviewed-on: https://go-review.googlesource.com/31658
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit f3b4abd806c392ff0bf8566009e750ebc01ae355
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 11:37:54 2016 -0400

    cmd/go: allow 'go generate' even if imports do not resolve
    
    Maybe the go generate is generating the imports,
    or maybe there's some other good reason the code
    is incomplete.
    
    The help text already says:
    
            Note that go generate does not parse the file, so lines that look
            like directives in comments or multiline strings will be treated
            as directives.
    
    We'll still reject Go source files that don't begin with a package statement
    or have a syntax error in the import block, but those are I think more
    defensible rejections.
    
    Fixes #16307.
    
    Change-Id: I4f8496c02fdff993f038adfed2df4db7f067dc06
    Reviewed-on: https://go-review.googlesource.com/31659
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 9575882461b79c833d206ace186db178e5aff9fa
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 12:19:52 2016 -0400

    cmd/go: document that cmd/foo is only in Go repo, never GOPATH
    
    It's always been like this, so document it.
    
    Fixes #14351.
    
    Change-Id: Ic6a7c44881bac0209fa6863a487fabec5ec0214e
    Reviewed-on: https://go-review.googlesource.com/31663
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit a1813fcb839e21e46208a5294df87097a44bd05a
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 21 15:01:03 2016 -0400

    cmd/go: referee another vendor vs symlink fight
    
    Avoid crash in the specific case reported in #15201 but also
    print more useful error message, avoiding slice panic.
    
    Fixes #15201.
    Fixes #16167.
    Fixes #16566.
    
    Change-Id: I66499621e9678a05bc9b12b0da77906cd7027bdd
    Reviewed-on: https://go-review.googlesource.com/31665
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 0eaa8fe03f46d9cc35d81e872b4b23442609ed80
Author: Quentin Smith <quentin@golang.org>
Date:   Fri Oct 21 17:30:15 2016 -0400

    bufio: remove unnecessary "continue"
    
    After resizing the scan buffer, we can immediately read into the
    newly-resized buffer since we know there is now space.
    
    Fixes #15712.
    
    Change-Id: I56fcfaeb67045ee753a012c37883aa7c81b6e877
    Reviewed-on: https://go-review.googlesource.com/31715
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 7ff0c8267f25a628dc4c8b5fa356b26cbb72530d
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Oct 22 15:43:23 2016 +0200

    cmd/compile: replace ANDL with MOV?ZX
    
    According to "Intel 64 and IA-32 Architectures Optimization Reference
    Manual" Section: "3.5.1.13 Zero-Latency MOV Instructions"
    MOV?ZX instructions have zero latency on newer processors.
    
    during make.bash:
    (ANDLconst [0xFF] x) -> (MOVBQZX x)
    applies 422 times
    (ANDLconst [0xFFFF] x) -> (MOVWQZX x)
    applies 114 times
    
    Updates #15105
    
    Change-Id: I10933af599de3c26449c52f4b5cd859331028f39
    Reviewed-on: https://go-review.googlesource.com/31639
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 9ac60181e2e54b6404e67852d6e1e65a8cbd3616
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Mon Oct 24 12:04:12 2016 +1100

    runtime/cgo: do not link math lib by default on windows
    
    Makes windows same as others.
    
    Change-Id: Ib4651e06d0bd37473ac345d36c91f39aa8f5e662
    Reviewed-on: https://go-review.googlesource.com/31791
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3cbfcaa4ba898faba516fbb9f3debf4ceac1a557
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 2 18:46:02 2016 -0400

    runtime: make mspan.isFree do what's on the tin
    
    Currently mspan.isFree technically returns whether the object was not
    allocated *during this cycle*. Fix it so it actually returns whether
    or not the object is allocated so the method is more generally useful
    (especially for debugging).
    
    It has one caller, which is carefully written to be insensitive to
    this distinction, but this lets us simplify this caller.
    
    Change-Id: I9d79cf784a56015e434961733093c1d8d03fc091
    Reviewed-on: https://go-review.googlesource.com/30145
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit bf9c71cb434a730679f54a3a87c2e9e36ec400d0
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 19 18:27:39 2016 -0400

    runtime: make morestack less subtle
    
    morestack writes the context pointer to gobuf.ctxt, but since
    morestack is written in assembly (and has to be very careful with
    state), it does *not* invoke the requisite write barrier for this
    write. Instead, we patch this up later, in newstack, where we invoke
    an explicit write barrier for ctxt.
    
    This already requires some subtle reasoning, and it's going to get a
    lot hairier with the hybrid barrier.
    
    Fix this by simplifying the whole mechanism. Instead of writing
    gobuf.ctxt in morestack, just pass the value of the context register
    to newstack and let it write it to gobuf.ctxt. This is a normal Go
    pointer write, so it gets the normal Go write barrier. No subtle
    reasoning required.
    
    Updates #17503.
    
    Change-Id: Ia6bf8459bfefc6828f53682ade32c02412e4db63
    Reviewed-on: https://go-review.googlesource.com/31550
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit cdccd6a79c5391c21c8e7316e13f8b8d1697ea63
Author: Alexander Döring <email@alexd.ch>
Date:   Sun Oct 23 16:03:38 2016 +0200

    doc: update size of "hello, world" binary in FAQ
    
    Fixes #17159
    
    Change-Id: I44d7081ef7a973dcd1cc2eb7124e3454c94bc6e3
    Reviewed-on: https://go-review.googlesource.com/31770
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0e7f9700f69944a993230d706e41a86ac47da415
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Fri Oct 21 18:46:44 2016 +0900

    path/filepath: pass TestToNorm even if VolumeName(tmpdir) != VolumeName(pwd) on windows
    
    Fixes #17504
    
    Change-Id: Ic83578cf2019e5d8778e4b324f04931eb802f603
    Reviewed-on: https://go-review.googlesource.com/31544
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit b7477f386926e65bb99db4eb90820576f6533614
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri Sep 23 16:58:31 2016 +1000

    syscall: use ERROR_IO_PENDING value in errnoErr
    
    So errnoErr can be used in other packages.
    This is something I missed when I sent CL 28990.
    
    Fixes #17539
    
    Change-Id: I8ee3b79c4d70ca1e5b29e5b40024f7ae9a86061e
    Reviewed-on: https://go-review.googlesource.com/29690
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b992c391d4aae64e147fc64c77ad41d61be8e2e7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Oct 22 09:47:05 2016 -0700

    net/http: add NoBody, don't return nil from NewRequest on zero bodies
    
    This is an alternate solution to https://golang.org/cl/31445
    
    Instead of making NewRequest return a request with Request.Body == nil
    to signal a zero byte body, add a well-known variable that means
    explicitly zero.
    
    Too many tests inside Google (and presumably the outside world)
    broke.
    
    Change-Id: I78f6ecca8e8aa1e12179c234ccfb6bcf0ee29ba8
    Reviewed-on: https://go-review.googlesource.com/31726
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 448e1db103df7a9b29aa360f42fdcdc9b89fa399
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Oct 22 08:56:07 2016 -0700

    runtime: skip TestLldbPython
    
    The test is broken on macOS Sierra.
    
    Updates #17463.
    
    Change-Id: Ifbb2379c640b9353a01bc55a5cb26dfaad9b4bdc
    Reviewed-on: https://go-review.googlesource.com/31725
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 659570915481c87559f0197c9980e8cbac8e2c33
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 19 14:06:54 2016 -0400

    net/url: make URL implement encoding.BinaryMarshaler, BinaryUnmarshaler
    
    This makes it possible to use URLs with gob.
    
    Ideally we'd also implement TextMarshaler and TextUnmarshaler,
    but that would change the JSON encoding of a URL from something like:
    
            {"Scheme":"https","Opaque":"","User":null,"Host":"www.google.com","Path":"/x","RawPath":"","ForceQuery":false,"RawQuery":"y=z","Fragment":""}
    
    to something like:
    
            "https://www.google.com/x?y=z"
    
    That'd be nice, but it would break code expecting the old form.
    
    Fixes #10964.
    
    Change-Id: I83f06bc2bedd2ba8a5d8eef03ea0056d045c258f
    Reviewed-on: https://go-review.googlesource.com/31467
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6eae03e136f031649683d359a0879f6d6ae5e023
Author: Adam Langley <agl@golang.org>
Date:   Thu Oct 20 09:48:24 2016 -0700

    net/http: drop custom tls.Config cloning code.
    
    Now that we have the Clone method on tls.Config, net/http doesn't need
    any custom functions to do that any more.
    
    Change-Id: Ib60707d37f1a7f9a7d7723045f83e59eceffd026
    Reviewed-on: https://go-review.googlesource.com/31595
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3d4ea227c6b8062c436fc9417034f2d01cf8c82c
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Oct 18 17:22:25 2016 -0700

    archive/tar: validate sparse headers in parsePAX
    
    According to the GNU manual, the format is:
    <<<
    GNU.sparse.size=size
    GNU.sparse.numblocks=numblocks
    repeat numblocks times
      GNU.sparse.offset=offset
      GNU.sparse.numbytes=numbytes
    end repeat
    >>>
    
    The logic in parsePAX converts the repeating sequence of
    (offset, numbytes) pairs (which is not PAX compliant) into a single
    comma-delimited list of numbers (which is now PAX compliant).
    
    Thus, we validate the following:
    * The (offset, numbytes) headers must come in the correct order.
    * The ',' delimiter cannot appear in the value.
    We do not validate that the value is a parsible decimal since that
    will be determined later.
    
    Change-Id: I8d6681021734eb997898227ae8603efb1e17c0c8
    Reviewed-on: https://go-review.googlesource.com/31439
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ece4e23d9aaed3e11f7a0b9a3f15c592c96b065d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Oct 22 06:39:12 2016 -0700

    net/http: document Transport.ExpectContinueTimeout a bit more
    
    Fixes #16003
    
    Change-Id: I76a8da24b9944647ec40ef2ca4fc93c175ff5a25
    Reviewed-on: https://go-review.googlesource.com/31723
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit eb15cf16aee1ec4387b7397b102bd2cc3ff33a64
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 21 18:03:49 2016 -0700

    net: clarify LookupAddr docs on libc's behavior, and alternatives
    
    Text from rsc.
    
    Fixes #17093
    
    Change-Id: I13c3018b1584f152b53f8576dd16ebef98aa5182
    Reviewed-on: https://go-review.googlesource.com/31720
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit aa1e063efd7376e268ee592ebe078c6d05b0bdf8
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 21 12:03:41 2016 +0100

    net/http: add Request.GetBody func for 307/308 redirects
    
    Updates #10767
    
    Change-Id: I197535f71bc2dc45e783f38d8031aa717d50fd80
    Reviewed-on: https://go-review.googlesource.com/31733
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca4431a3846de4b1c5cf2388ca22d915f510f7fd
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Oct 21 16:07:47 2016 -0700

    cmd/compile: avoid one symbol lookup for qualified identifiers
    
    For -newparser only.
    
    Change-Id: I0eaa05035df11734e2bda7ad456b9b30485d9465
    Reviewed-on: https://go-review.googlesource.com/31718
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 6eede325ab9e444c19c8dc4fd5cc6c3603abb93c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Oct 21 14:43:59 2016 -0700

    cmd/compile: fix detection of duplicate cases for integer ranges
    
    Previously, the check to make sure we only considered constant cases
    for duplicates was skipping past integer ranges, because those use
    n.List instead of n.Left. Thanks to Emmanuel Odeke for investigating
    and helping to identify the root cause.
    
    Fixes #17517.
    
    Change-Id: I46fcda8ed9c346ff3a9647d50b83f1555587b740
    Reviewed-on: https://go-review.googlesource.com/31716
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 28279238004da8e83e3d652b4bcd14d6795c6148
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Oct 21 13:44:29 2016 -0700

    cmd/compile: prevent ICE from misuse of [...]T arrays
    
    Fixes #16428.
    
    Change-Id: I78d37472e228402bb3c06d7ebd441952386fa38a
    Reviewed-on: https://go-review.googlesource.com/31731
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit d553c29dc1f0057d1223af79d6054ce51afe2b7d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Oct 20 17:33:45 2016 -0700

    cmd/compile: directly construct Fields instead of ODCLFIELD nodes
    
    Avoids some garbage allocations while loading import data. Seems to
    especially benefit html/template for some reason, but significant
    allocation improvements for other packages too.
    
    name       old time/op     new time/op     delta
    Template       345ms ± 6%      332ms ± 6%   -3.76%        (p=0.000 n=49+47)
    Unicode        185ms ±10%      184ms ±12%     ~           (p=0.401 n=50+49)
    GoTypes        1.04s ± 3%      1.04s ± 3%   -0.72%        (p=0.012 n=48+47)
    Compiler       4.52s ± 7%      4.49s ± 9%     ~           (p=0.465 n=48+47)
    
    name       old user-ns/op  new user-ns/op  delta
    Template        532M ±17%       471M ±23%  -11.48%        (p=0.000 n=50+50)
    Unicode         298M ±29%       311M ±28%     ~           (p=0.065 n=50+50)
    GoTypes        1.52G ± 7%      1.54G ± 9%     ~           (p=0.062 n=49+50)
    Compiler       6.37G ± 7%      6.42G ± 8%     ~           (p=0.157 n=49+48)
    
    name       old alloc/op    new alloc/op    delta
    Template      43.9MB ± 0%     42.3MB ± 0%   -3.51%        (p=0.000 n=48+48)
    Unicode       34.3MB ± 0%     34.3MB ± 0%     ~           (p=0.945 n=50+50)
    GoTypes        123MB ± 0%      122MB ± 0%   -0.82%        (p=0.000 n=50+50)
    Compiler       522MB ± 0%      519MB ± 0%   -0.51%        (p=0.000 n=50+50)
    
    name       old allocs/op   new allocs/op   delta
    Template        414k ± 0%       397k ± 0%   -4.14%        (p=0.000 n=50+49)
    Unicode         320k ± 0%       320k ± 0%     ~           (p=0.988 n=48+49)
    GoTypes        1.18M ± 0%      1.17M ± 0%   -0.97%        (p=0.000 n=50+50)
    Compiler       4.44M ± 0%      4.41M ± 0%   -0.66%        (p=0.000 n=50+50)
    
    Passes toolstash.
    
    Change-Id: I0f54c0fa420d4f4ed3584c47cec0dde100c70c03
    Reviewed-on: https://go-review.googlesource.com/31670
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 6ca662ca0e1a41077bd93501a5d04668474bca69
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 21 11:43:12 2016 -0700

    net/http: make Redirect escape non-ASCII in Location header
    
    Only ASCII is permitted there.
    
    Fixes #4385
    
    Change-Id: I63708b04a041cdada0fdfc1f2308fcb66889a27b
    Reviewed-on: https://go-review.googlesource.com/31732
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e64e858c51bc7739a308fa0749ded1123da2e89c
Author: Adam Langley <agl@golang.org>
Date:   Thu Oct 20 09:35:19 2016 -0700

    vendor/golang_org/x/crypto/curve25519: update to f62085100e1abe3d5c9b3b8c9a38d50b71323f64
    
    This change updates the vendored copy of x/crypto/curve25519,
    specifically to include the following changes:
      f620851 curve25519: eliminate unnecessary "callee save" prologues
      722a7b7 curve25519: fix confusing SP adjustments
    
    Change-Id: I1b16aba12c744ac32f925654a136a8f52cd40fc2
    Reviewed-on: https://go-review.googlesource.com/31666
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a50fbcd331c57b885c13a6c0c2502202417ce312
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 21 13:55:25 2016 -0700

    net/http: update bundled http2
    
    Updates http2 to x/net/http2 git rev 40a0a18 for:
    
        http2: fix Server race with concurrent Read/Close
        http2: make Server reuse 64k request body buffer between requests
        http2: never Read from Request.Body in Transport to determine ContentLength
    
    Fixes #17480
    Updates #17071
    
    Change-Id: If142925764a2e148f95957f559637cfc1785ad21
    Reviewed-on: https://go-review.googlesource.com/31737
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 40d4be59ccd83c29a72fb6a9a8c2eee4c91f628b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 21 10:27:57 2016 -0700

    net: make all Resolver methods respect Resolver.PreferGo
    
    Fixes #17532
    
    Change-Id: Id62671d505c77ea924b3570a504cdc3b157e5a0d
    Reviewed-on: https://go-review.googlesource.com/31734
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 23173fc025f769aaa9e19f10aa0f69c851ca2f3b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 21 12:14:36 2016 +0100

    net/http/httptrace: clarify ClientTrace docs
    
    The old wording over-promised.
    
    Fixes #16957
    
    Change-Id: Iaac04de0d24eb17a0db66beeeab9de70d0f6d391
    Reviewed-on: https://go-review.googlesource.com/31735
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Tom Bergan <tombergan@google.com>

commit f0e347b1a8161c41be9dbcfe5db5e4e4dae57cfd
Author: Joe Tsai <joetsai@google.com>
Date:   Fri Oct 21 19:43:33 2016 +0000

    Revert "cmd/compile: cleanup toolstash hacks from previous CL"
    
    This partially reverts commit 01bf5cc21912ff8642171d8255a7fff87f1da00b.
    
    For unknown reasons, this CL was causing an internal test to allocate
    1.2GB when it used to allocate less than 300MB.
    
    Change-Id: I41d767781e0ae9e43bf670e2a186ee074821eca4
    Reviewed-on: https://go-review.googlesource.com/31674
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b7c7949817e5bee801dfb333f483a080fa1f29e7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Oct 21 07:54:46 2016 -0700

    cmd/cgo: preserve original call arguments when pointer checking
    
    With the old code rewriting refs would rewrite the inner arguments
    rather than the outer ones, leaving a reference to C.val in the outer
    arguments.
    
    Change-Id: I9b91cb4179eccd08500d14c6591bb15acf8673eb
    Reviewed-on: https://go-review.googlesource.com/31672
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a73d68e75eece80f8514bb1b368420843c1f58ad
Author: Austin Clements <austin@google.com>
Date:   Thu Oct 20 22:27:39 2016 -0400

    runtime: fix call* signatures and deferArgs with siz=0
    
    This commit fixes two bizarrely related bugs:
    
    1. The signatures for the call* functions were wrong, indicating that
    they had only two pointer arguments instead of three. We didn't notice
    because the call* functions are defined by a macro expansion, which go
    vet doesn't see.
    
    2. deferArgs on a defer object with a zero-sized frame returned a
    pointer just past the end of the allocated object, which is illegal in
    Go (and can cause the "sweep increased allocation count" crashes).
    
    In a fascinating twist, these two bugs canceled each other out, which
    is why I'm fixing them together. The pointer returned by deferArgs is
    used in only two ways: as an argument to memmove and as an argument to
    reflectcall. memmove is NOSPLIT, so the argument was unobservable.
    reflectcall immediately tail calls one of the call* functions, which
    are not NOSPLIT, but the deferArgs pointer just happened to be the
    third argument that was accidentally marked as a scalar. Hence, when
    the garbage collector scanned the stack, it didn't see the bad
    pointer as a pointer.
    
    I believe this was all ultimately benign. In principle, stack growth
    during the reflectcall could fail to update the args pointer, but it
    never points to the stack, so it never needs to be updated. Also in
    principle, the garbage collector could fail to mark the args object
    because of the incorrect call* signatures, but in all calls to
    reflectcall (including the ones spelled "call" in the reflect package)
    the args object is kept live by the calling stack.
    
    Change-Id: Ic932c79d5f4382be23118fdd9dba9688e9169e28
    Reviewed-on: https://go-review.googlesource.com/31654
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit c2425178669c0c6a26f58f90b59086d7e4313c64
Author: Austin Clements <austin@google.com>
Date:   Wed Oct 19 16:01:02 2016 -0400

    runtime: replace *g with guintptr in trace
    
    trace's reader *g is going to cause write barriers in unfortunate
    places, so replace it with a guintptr.
    
    Change-Id: Ie8fb13bb89a78238f9d2a77ec77da703e96df8af
    Reviewed-on: https://go-review.googlesource.com/31469
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 325c2aa5b6f12ccc82e8472beec0e1511e975bd4
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Mon Oct 17 09:28:06 2016 -0700

    database/sql: update the conversion errors to be clearer
    
    There was some ambiguity over which argument was referred to when
    a conversion error was returned. Now refer to the argument by
    either explicit ordinal position or name if present.
    
    Fixes #15676
    
    Change-Id: Id933196b7e648baa664f4121fa3fb1b07b3c4880
    Reviewed-on: https://go-review.googlesource.com/31262
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 930ab0afd787214d379aca230944d0d41c8b90e6
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Oct 14 11:37:55 2016 -0400

    cmd/asm, cmd/internal/obj/s390x: fix VFMA and VFMS encoding
    
    The m5 and m6 fields were the wrong way round.
    
    Fixes #17444.
    
    Change-Id: I10297064f2cd09d037eac581c96a011358f70aae
    Reviewed-on: https://go-review.googlesource.com/31130
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 0f29942489409ccd81619b5f82fce9c7de18165f
Author: David Chase <drchase@google.com>
Date:   Wed Oct 19 11:47:52 2016 -0400

    cmd/compile: Repurpose old sliceopt.go for prove phase.
    
    Adapt old test for prove's bounds check elimination.
    Added missing rule to generic rules that lead to differences
    between 32 and 64 bit platforms on sliceopt test.
    Added debugging to prove.go that was helpful-to-necessary to
    discover that missing rule.
    Lowered debugging level on prove.go from 3 to 1; no idea
    why it was previously 3.
    
    Change-Id: I09de206aeb2fced9f2796efe2bfd4a59927eda0c
    Reviewed-on: https://go-review.googlesource.com/23290
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit c9517b1ffe7c99a3fd2a748fab51645bd674ad75
Author: Klaus Post <klauspost@gmail.com>
Date:   Sun Oct 16 22:18:01 2016 +0200

    compress/gzip, compress/zlib: add HuffmanOnly as compression levels.
    
    This exposes HuffmanOnly in zlib and gzip packages, which is currently
    unavailable.
    
    Change-Id: If5d103bbc8b5fce2f5d740fd103a235c5d1ed7cd
    Reviewed-on: https://go-review.googlesource.com/31186
    Reviewed-by: Nigel Tao <nigeltao@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7ea58297171ef9ba2680abd5e2490d48c1c9f24c
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Oct 20 15:27:26 2016 -0700

    cmd/compile: a couple of minor comment fixes
    
    Change-Id: If1d08a84c9295816489b1cfdd031ba12892ae963
    Reviewed-on: https://go-review.googlesource.com/31598
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 584e3ea2581c858688803d41e207eeaa881a2a85
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu Oct 20 16:57:55 2016 +1100

    image/color: tweak the formula for converting to gray.
    
    This makes grayModel and gray16Model in color.go use the exact same
    formula as RGBToYCbCr in ycbcr.go. They were the same formula in theory,
    but in practice the color.go versions used a divide by 1000 and the
    ycbcr.go versions used a (presumably faster) shift by 16.
    
    This implies the nice property that converting an image.RGBA to an
    image.YCbCr and then taking only the Y channel is equivalent to
    converting an image.RGBA directly to an image.Gray.
    
    The difference between the two formulae is non-zero, but small:
    https://play.golang.org/p/qG7oe-eqHI
    
    Updates #16251
    
    Change-Id: I288ecb957fd6eceb9626410bd1a8084d2e4f8198
    Reviewed-on: https://go-review.googlesource.com/31538
    Reviewed-by: Rob Pike <r@golang.org>

commit a190f3c8a34b859dd578b1d30b48ecd04c7a99c7
Author: David Chase <drchase@google.com>
Date:   Wed May 11 15:25:17 2016 -0400

    cmd/compile: enable flag-specified dump of specific phase+function
    
    For very large input files, use of GOSSAFUNC to obtain a dump
    after compilation steps can lead to both unwieldy large output
    files and unwieldy larger processes (because the output is
    buffered in a string).  This flag
    
      -d=ssa/<phase>/dump:<function name>
    
    provides finer control of what is dumped, into a smaller
    file, and with less memory overhead in the running compiler.
    The special phase name "build" is added to allow printing
    of the just-built ssa before any transformations are applied.
    
    This was helpful in making sense of the gogo/protobuf
    problems.
    
    The output format was tweaked to remove gratuitous spaces,
    and a crude -d=ssa/help help text was added.
    
    Change-Id: If7516e22203420eb6ed3614f7cee44cb9260f43e
    Reviewed-on: https://go-review.googlesource.com/23044
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 10560afb540b783da568aebe83d0f782e46bb673
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Thu Oct 20 11:24:51 2016 +0200

    runtime/debug: avoid overflow in SetMaxThreads
    
    Fixes #16076
    
    Change-Id: I91fa87b642592ee4604537dd8c3197cd61ec8b31
    Reviewed-on: https://go-review.googlesource.com/31516
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f6f3aef53f7ef6085ea14b6147b2478848778709
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Oct 20 15:22:46 2016 -0400

    go/build: reserve GOOS=zos for IBM z/OS
    
    Closes #17528.
    
    Change-Id: I2ba55ad4e41077808f882ed67a0549f0a00e25d0
    Reviewed-on: https://go-review.googlesource.com/31596
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ca8dd033a0a88946f02a37bdbd107af83afa0e24
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Oct 20 11:10:03 2016 -0700

    cmd/cgo: correct comment on Package.rewriteCall
    
    Account for changes in https://golang.org/cl/31233.
    
    Change-Id: I3311c6850a3c714d18209fdff500dd817e9dfcb2
    Reviewed-on: https://go-review.googlesource.com/31594
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit abcf8457b30ef50b878b2a1add39fa5f5a2f1b60
Author: Adam Langley <agl@golang.org>
Date:   Thu Oct 20 09:35:19 2016 -0700

    vendor/golang_org/x/crypto/poly1305: update to 3ded668c5379f6951fb0de06174442072e5447d3
    
    This change updates the vendored copy of x/crypto/poly1305, specifically
    to include the following changes:
      3ded668 poly1305: enable assembly for ARM in Go 1.6.
      dec8741 poly1305: fix stack handling in sum_arm.s
    
    Fixes #17499.
    
    Change-Id: I8f152da9599bd15bb976f630b0ef602be05143d3
    Reviewed-on: https://go-review.googlesource.com/31592
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 33b71dfa1c993d2e06d7723e3205c792df3b383d
Author: David Chase <drchase@google.com>
Date:   Thu Oct 20 11:05:45 2016 -0400

    cmd/compile: add patterns to improve PPC64 FP comparisons
    
    Uncommented 4 comparison rules of this form:
    (NE (CMPWconst [0] (FLessThan cc)) yes no) -> (FLT cc yes no)
    
    Fixes #17507.
    
    Change-Id: I74f34f13526aeee619711c8281a66652d90a962a
    Reviewed-on: https://go-review.googlesource.com/31612
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit f9bbfe4a093144e48a4774d1388c1e99be64673b
Author: David du Colombier <0intro@gmail.com>
Date:   Thu Oct 20 16:51:03 2016 +0200

    net/http: remove workaround in TestTransportClosesBodyOnError on Plan 9
    
    This issue has been fixed in CL 31390.
    
    Fixes #9554.
    
    Change-Id: Ib8ff4cb1ffcb7cdbf117510b98b4a7e13e4efd2b
    Reviewed-on: https://go-review.googlesource.com/31520
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8589049d5c1cc1ff9856defb6d9097428ad09b82
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Wed Oct 19 20:21:42 2016 +0300

    cmd/compile/internal/amd64: break dependency for CVTS[LQ]2S[DS]
    
    CVTSL2SS, CVTSQ2SS, CVTSL2SD, CVTSQ2SD preserve upper part of xmm register,
    introducing false dependency on a previous value.
    Break it by xoring destination with itself.
    Increases size of go executable by 320 bytes, but shows nice improvement on go1.
    Also fixes performance degradation introduced by 1.7.
    
    name                     old time/op    new time/op    delta
    BinaryTree17-4              2.20s ± 1%     2.19s ± 0%  -0.36%        (p=0.000 n=18+16)
    Fannkuch11-4                2.44s ± 1%     2.45s ± 2%  +0.47%        (p=0.030 n=20+20)
    FmtFprintfEmpty-4          40.9ns ± 7%    40.5ns ± 1%    ~           (p=0.531 n=20+16)
    FmtFprintfString-4          111ns ± 2%     111ns ± 1%    ~           (p=0.510 n=18+19)
    FmtFprintfInt-4            98.3ns ± 3%    99.3ns ± 1%  +1.01%        (p=0.003 n=20+18)
    FmtFprintfIntInt-4          148ns ± 3%     147ns ± 1%    ~           (p=0.919 n=20+17)
    FmtFprintfPrefixedInt-4     149ns ± 1%     152ns ± 0%  +1.73%        (p=0.000 n=19+17)
    FmtFprintfFloat-4           231ns ± 0%     231ns ± 1%    ~           (p=0.678 n=18+19)
    FmtManyArgs-4               667ns ± 1%     672ns ± 1%  +0.73%        (p=0.005 n=20+20)
    GobDecode-4                5.60ms ± 0%    5.61ms ± 0%  +0.24%        (p=0.000 n=20+20)
    GobEncode-4                4.74ms ± 0%    4.73ms ± 1%  -0.20%        (p=0.002 n=20+20)
    Gzip-4                      199ms ± 0%     199ms ± 1%  +0.35%        (p=0.000 n=19+20)
    Gunzip-4                   31.8ms ± 1%    31.5ms ± 1%  -0.89%        (p=0.000 n=20+20)
    HTTPClientServer-4         38.1µs ± 1%    38.0µs ± 1%    ~           (p=0.117 n=19+18)
    JSONEncode-4               14.2ms ± 1%    13.4ms ± 0%  -5.73%        (p=0.000 n=20+20)
    JSONDecode-4               42.7ms ± 0%    42.7ms ± 1%  +0.18%        (p=0.019 n=18+19)
    Mandelbrot200-4            3.26ms ± 0%    2.99ms ± 0%  -8.38%        (p=0.000 n=19+19)
    GoParse-4                  2.76ms ± 1%    2.76ms ± 1%    ~           (p=0.583 n=20+20)
    RegexpMatchEasy0_32-4      69.5ns ± 0%    69.6ns ± 0%  +0.10%        (p=0.017 n=16+17)
    RegexpMatchEasy0_1K-4       703ns ± 0%     708ns ± 3%  +0.65%        (p=0.000 n=17+18)
    RegexpMatchEasy1_32-4      68.2ns ± 1%    68.2ns ± 2%    ~           (p=0.094 n=18+20)
    RegexpMatchEasy1_1K-4       288ns ± 1%     288ns ± 0%    ~           (p=0.403 n=17+18)
    RegexpMatchMedium_32-4      104ns ± 2%     103ns ± 1%    ~           (p=0.110 n=20+16)
    RegexpMatchMedium_1K-4     31.7µs ± 3%    31.7µs ± 3%    ~           (p=0.091 n=19+20)
    RegexpMatchHard_32-4       1.59µs ± 2%    1.58µs ± 2%    ~           (p=0.083 n=20+20)
    RegexpMatchHard_1K-4       48.1µs ± 3%    47.9µs ± 2%    ~           (p=0.461 n=20+19)
    Revcomp-4                   344ms ± 0%     345ms ± 0%  +0.08%        (p=0.009 n=18+17)
    Template-4                 44.8ms ± 1%    44.7ms ± 1%    ~           (p=0.277 n=20+20)
    TimeParse-4                 258ns ± 0%     258ns ± 0%    ~     (all samples are equal)
    TimeFormat-4                275ns ± 0%     273ns ± 0%  -0.64%        (p=0.000 n=20+18)
    
    name                     old speed      new speed      delta
    GobDecode-4               137MB/s ± 0%   137MB/s ± 0%  -0.24%        (p=0.000 n=20+20)
    GobEncode-4               162MB/s ± 0%   162MB/s ± 0%  +0.20%        (p=0.002 n=20+20)
    Gzip-4                   97.6MB/s ± 0%  97.3MB/s ± 1%  -0.35%        (p=0.000 n=19+20)
    Gunzip-4                  610MB/s ± 1%   615MB/s ± 1%  +0.89%        (p=0.000 n=20+20)
    JSONEncode-4              136MB/s ± 1%   145MB/s ± 0%  +6.08%        (p=0.000 n=20+20)
    JSONDecode-4             45.5MB/s ± 0%  45.4MB/s ± 1%  -0.17%        (p=0.017 n=18+19)
    GoParse-4                21.0MB/s ± 1%  21.0MB/s ± 1%    ~           (p=0.578 n=20+20)
    RegexpMatchEasy0_32-4     460MB/s ± 0%   460MB/s ± 0%  -0.09%        (p=0.031 n=16+17)
    RegexpMatchEasy0_1K-4    1.46GB/s ± 0%  1.45GB/s ± 3%  -0.64%        (p=0.000 n=17+18)
    RegexpMatchEasy1_32-4     469MB/s ± 0%   469MB/s ± 2%  +0.06%        (p=0.043 n=18+20)
    RegexpMatchEasy1_1K-4    3.55GB/s ± 1%  3.55GB/s ± 0%    ~           (p=0.057 n=17+18)
    RegexpMatchMedium_32-4   9.61MB/s ± 2%  9.64MB/s ± 2%    ~           (p=0.856 n=20+20)
    RegexpMatchMedium_1K-4   32.3MB/s ± 3%  32.3MB/s ± 3%    ~           (p=0.085 n=19+20)
    RegexpMatchHard_32-4     20.1MB/s ± 2%  20.2MB/s ± 2%    ~           (p=0.086 n=20+20)
    RegexpMatchHard_1K-4     21.3MB/s ± 3%  21.4MB/s ± 2%    ~           (p=0.578 n=20+20)
    Revcomp-4                 738MB/s ± 0%   737MB/s ± 0%  -0.08%        (p=0.009 n=18+17)
    Template-4               43.3MB/s ± 1%  43.4MB/s ± 1%    ~           (p=0.274 n=20+20)
    
    Fixes #16982
    
    Change-Id: If574d66f39f4183a9b1d5ffff0339909cc73f59d
    Reviewed-on: https://go-review.googlesource.com/31490
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5ce715fdfea635c2cb429166294fb005cefde896
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Wed Oct 19 20:35:04 2016 +0300

    cmd/internal/obj/x86: add some missing AMD64 instructions
    
    Add VBROADCASTSD, BROADCASTSS, MOVDDUP, MOVSHDUP, MOVSLDUP,
    VMOVDDUP, VMOVSHDUP, VMOVSLDUP.
    
    Fixes #16007
    
    Change-Id: I9614e58eed6c1b6f299d9b4f0b1a7750aa7c1725
    Reviewed-on: https://go-review.googlesource.com/31491
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 692df217ca21b6df8e4dc65538fcc90733e8900e
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Oct 19 12:26:55 2016 -0700

    database/sql: add missing unlock when context is expired
    
    Missing the DB mutex unlock on an early return after checking
    if the context has expired.
    
    Fixes #17518
    
    Change-Id: I247cafcef62623d813f534a941f3d5a3744f0738
    Reviewed-on: https://go-review.googlesource.com/31494
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9cefbe9d03918c07451e5512cc4c227fb0d6885a
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Thu Oct 20 08:59:07 2016 +0200

    lib/time: update to IANA release 2016g (September 2016)
    
    Change-Id: Ie6258602554c5bb6685c9de42ccda84d297af1e2
    Reviewed-on: https://go-review.googlesource.com/31515
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ef8e85e8b8176fb096683dac00cf536fd7d228bc
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Oct 18 16:38:54 2016 -0700

    archive/tar: fix parsePAXTime
    
    Issues fixed:
    * Could not handle quantity of seconds greater than 1<<31 on
    32bit machines since strconv.ParseInt did not treat integers as 64b.
    * Did not handle negative timestamps properly if nanoseconds were used.
    Note that "-123.456" should result in a call to time.Unix(-123, -456000000).
    * Incorrectly allowed a '-' right after the '.' (e.g., -123.-456)
    * Did not detect invalid input after the truncation point (e.g., 123.123456789badbadbad).
    
    Note that negative timestamps are allowed by PAX, but are not guaranteed
    to be portable. See the relevant specification:
    <<<
    If pax encounters a file with a negative timestamp in copy or write mode,
    it can reject the file, substitute a non-negative timestamp, or generate
    a non-portable timestamp with a leading '-'.
    >>>
    
    Since the previous behavior already partially supported negative timestamps,
    we are bound by Go's compatibility rules to keep support for them.
    However, we should at least make sure we handle them properly.
    
    Change-Id: I5686997708bfb59110ea7981175427290be737d1
    Reviewed-on: https://go-review.googlesource.com/31441
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f35b8658dca82f317251f7947964fb2878b57a85
Author: Quentin Smith <quentin@golang.org>
Date:   Tue Oct 18 15:54:04 2016 -0400

    doc: update install-source.html for SSA in Go 1.8
    
    Fixes #17491
    
    Change-Id: Ic070cbed60fa893fed568e8fac448b86cd3e0cbc
    Reviewed-on: https://go-review.googlesource.com/31411
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f1ad4863aae1fd5cd5d0e3e4e6cb6bfae62951a6
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Oct 17 17:10:24 2016 -0400

    runtime: get s390x vector facility availability from AT_HWCAP
    
    This is a more robust method for obtaining the availability of vx.
    Since this variable may be checked frequently I've also now
    padded it so that it will be in its own cache line.
    
    I've kept the other check (in hash/crc32) the same for now until
    I can figure out the best way to update it.
    
    Updates #15403.
    
    Change-Id: I74eed651afc6f6a9c5fa3b88fa6a2b0c9ecf5875
    Reviewed-on: https://go-review.googlesource.com/31149
    Reviewed-by: Austin Clements <austin@google.com>

commit 2be3ab441578413972d93fc1048decc422640b09
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 16 21:22:02 2016 -0400

    runtime: keep gcMarkRootCheck happy with spare Gs
    
    oneNewExtraM creates a spare M and G for use with cgo callbacks. The G
    doesn't run right away, but goes directly into syscall status. For the
    garbage collector, it's marked as "scan valid" and not on the rescan
    list, but I forgot to also mark it as "scan done". As a result,
    gcMarkRootCheck thinks that the goroutine hasn't been scanned and
    panics.
    
    This only affects GODEBUG=gccheckmark=1 mode, since we otherwise skip
    the gcMarkRootCheck.
    
    Fixes #17473.
    
    Change-Id: I94f5671c42eb44bd5ea7dc68fbf85f0c19e2e52c
    Reviewed-on: https://go-review.googlesource.com/31139
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 7bc42a145a03d61b504b18d20f2a4e5d8e2436fd
Author: Austin Clements <austin@google.com>
Date:   Mon Sep 12 17:48:34 2016 -0400

    runtime: don't reserve space for stack barriers if they're off
    
    Change-Id: I79ebccdaefc434c47b77bd545cc3c50723c18b61
    Reviewed-on: https://go-review.googlesource.com/31135
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 5b7497f327f83510193b1ec1de2eabb287a02982
Author: Austin Clements <austin@google.com>
Date:   Sun Sep 11 20:03:14 2016 -0400

    runtime: update heap profile stats after world is started
    
    Updating the heap profile stats is one of the most expensive parts of
    mark termination other than stack rescanning, but there's really no
    need to do this with the world stopped. Move it to right after we've
    started the world back up. This creates a *very* small window where
    allocations from the next cycle can slip into the profile, but the
    exact point where mark termination happens is so non-deterministic
    already that a slight reordering here is unimportant.
    
    Change-Id: I2f76f22c70329923ad6a594a2c26869f0736d34e
    Reviewed-on: https://go-review.googlesource.com/31363
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 9429aab9999e00958abd8b21d06fa4a2253437c2
Author: Austin Clements <austin@google.com>
Date:   Sun Sep 11 16:55:34 2016 -0400

    runtime: remove gcWork flushes in mark termination
    
    The only reason these flushes are still necessary at all is that
    gcmarknewobject doesn't flush its gcWork stats like it's supposed to.
    By changing gcmarknewobject to follow the standard protocol, the
    flushes become completely unnecessary because mark 2 ensures caches
    are flushed (and stay flushed) before we ever enter mark termination.
    
    In the garbage benchmark, this takes roughly 50 µs, which is
    surprisingly long for doing nothing. We still double-check after
    draining that they are in fact empty.
    
    Change-Id: Ia1c7cf98a53f72baa513792eb33eca6a0b4a7128
    Reviewed-on: https://go-review.googlesource.com/31134
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit a16954b8a7d66169760fb60dd7f3d4e400a5e98c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Oct 14 14:53:59 2016 -0700

    cmd/cgo: always use a function literal for pointer checking
    
    The pointer checking code needs to know the exact type of the parameter
    expected by the C function, so that it can use a type assertion to
    convert the empty interface returned by cgoCheckPointer to the correct
    type. Previously this was done by using a type conversion, but that
    meant that the code accepted arguments that were convertible to the
    parameter type, rather than arguments that were assignable as in a
    normal function call. In other words, some code that should not have
    passed type checking was accepted.
    
    This CL changes cgo to always use a function literal for pointer
    checking. Now the argument is passed to the function literal, which has
    the correct argument type, so type checking is performed just as for a
    function call as it should be.
    
    Since we now always use a function literal, simplify the checking code
    to run as a statement by itself. It now no longer needs to return a
    value, and we no longer need a type assertion.
    
    This does have the cost of introducing another function call into any
    call to a C function that requires pointer checking, but the cost of the
    additional call should be minimal compared to the cost of pointer
    checking.
    
    Fixes #16591.
    
    Change-Id: I220165564cf69db9fd5f746532d7f977a5b2c989
    Reviewed-on: https://go-review.googlesource.com/31233
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e32ac7978df02fae0cbbd92bb65d0d50ea4d2df5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Oct 19 12:47:59 2016 -0700

    cmd/link, cmd/internal/obj: stop exporting various names
    
    Just happened to notice that these names (funcAlign and friends) are
    never referenced outside their package, so no need to export them.
    
    Change-Id: I4bbdaa4b0ef330c3c3ef50a2ca39593977a83545
    Reviewed-on: https://go-review.googlesource.com/31496
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 832082b44e2965c136e53a9b8009d2e860766000
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Oct 19 12:58:16 2016 -0700

    cmd/compile: remove -A flag
    
    mkbuiltin.go now generates builtin.go using go/ast instead of running
    the compiler, so we don't need the -A flag anymore.
    
    Passes toolstash -cmp.
    
    Change-Id: Ifa70f4f3c9feae10c723cbec81a0a47c39610090
    Reviewed-on: https://go-review.googlesource.com/31497
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 42b37819a132fc2e79149643691894f501077161
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 18 16:11:50 2016 -0700

    cmd/compile: rework mkbuiltin.go to generate code
    
    Generating binary export data requires a working Go compiler. Even
    trickier to change the export data format itself requires a careful
    bootstrapping procedure.
    
    Instead, simply generate normal Go code that lets us directly
    construct the builtin runtime declarations.
    
    Passes toolstash -cmp.
    
    Fixes #17508.
    
    Change-Id: I4f6078a3c7507ba40072580695d57c87a5604baf
    Reviewed-on: https://go-review.googlesource.com/31493
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit abdd73cc43f9187e8918879944ec0dacbc912b5c
Author: Edward Muller <edwardam@interlix.com>
Date:   Tue Oct 4 21:24:58 2016 -0700

    net/http/httptrace: add ClientTrace.TLSHandshakeStart & TLSHandshakeDone
    
    Fixes #16965
    
    Change-Id: I3638fe280a5b1063ff589e6e1ff8a97c74b77c66
    Reviewed-on: https://go-review.googlesource.com/30359
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 12c9844cc6b7b9396bad4ceccfe93874b43b3c72
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Oct 18 16:57:02 2016 -0700

    archive/tar: fix parsePAX to be POSIX.1-2001 compliant
    
    Relevant PAX specification:
    <<<
    If the <value> field is zero length, it shall delete any header
    block field, previously entered extended header value, or
    global extended header value of the same name.
    >>>
    
    We don't delete global extender headers since the Reader doesn't
    even support global headers (which the specification admits was
    a controversial feature).
    
    Change-Id: I2125a5c907b23a3dc439507ca90fa5dc47d474a9
    Reviewed-on: https://go-review.googlesource.com/31440
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 04262986a0b112de5f6f0b287447319c31ef15f9
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Thu Oct 13 17:14:24 2016 -0700

    archive/tar: compact slices in tests
    
    Took this opportunity to also embed tables in the functions
    that they are actually used in and other stylistic cleanups.
    
    There was no logical changes to the tests.
    
    Change-Id: Ifa724060532175f6f4407d6cedc841891efd8f7b
    Reviewed-on: https://go-review.googlesource.com/31436
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5378dd77684e2eee5f05aab4b77497bb635fd544
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 19 09:11:16 2016 -0400

    text/template: add support for reflect.Value args, results in funcs
    
    Add support for passing reflect.Values to and returning reflect.Values from
    any registered functions in the FuncMap, much as if they were
    interface{} values. Keeping the reflect.Value instead of round-tripping
    to interface{} preserves addressability of the value, which is important
    for method lookup.
    
    Change index and a few other built-in functions to use reflect.Values,
    making a loop using explicit indexing now match the semantics that
    range has always had.
    
    Fixes #14916.
    
    Change-Id: Iae1a2fd9bb426886a7fcd9204f30a2d6ad4646ad
    Reviewed-on: https://go-review.googlesource.com/31462
    Reviewed-by: Rob Pike <r@golang.org>

commit d2aa8601b5aafa9736f8e49ca713ecc31f9a011f
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Oct 18 17:51:04 2016 -0700

    archive/tar: make Reader handle GNU format properly
    
    The GNU format does not have a prefix field, so we should make
    no attempt to read it. It does however have atime and ctime fields.
    Since Go previously placed incorrect values here, we liberally
    read the atime and ctime fields and ignore errors so that old tar
    files written by Go can at least be partially read.
    
    This fixes half of #12594. The Writer is much harder to fix.
    
    Updates #12594
    
    Change-Id: Ia32845e2f262ee53366cf41dfa935f4d770c7a30
    Reviewed-on: https://go-review.googlesource.com/31444
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 40d81cf061d8a2a277d70446f582a984c1701ff3
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 10:26:07 2016 -0400

    sync: throw, not panic, for unlock of unlocked mutex
    
    The panic leaves the lock in an unusable state.
    Trying to panic with a usable state makes the lock significantly
    less efficient and scalable (see early CL patch sets and discussion).
    
    Instead, use runtime.throw, which will crash the program directly.
    
    In general throw is reserved for when the runtime detects truly
    serious, unrecoverable problems. This problem is certainly serious,
    and, without a significant performance hit, is unrecoverable.
    
    Fixes #13879.
    
    Change-Id: I41920d9e2317270c6f909957d195bd8b68177f8d
    Reviewed-on: https://go-review.googlesource.com/31359
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d2315fdc11ebdf5c0ae94f33cb01ffaab82c00b6
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 19 13:14:16 2016 -0400

    html/template: adjust ambiguous URL context text
    
    Before: ... appears in an ambiguous URL context.
    After:  ... appears in an ambiguous context within a URL.
    
    It's a minor point, but it's confused multiple people.
    Try to make clearer that the ambiguity is "where exactly inside the URL?"
    
    Fixes #17319.
    
    Change-Id: Id834868d1275578036c1b00c2bdfcd733d9d2b7b
    Reviewed-on: https://go-review.googlesource.com/31465
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 13c65723419a41a8b5339e11f40fe2ecf0bbc8ab
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Oct 19 11:06:36 2016 -0400

    plugin: mention OS X support and concurrency
    
    Change-Id: I4270bf81511a5bf80ed146f5e66e4f8aeede2aa2
    Reviewed-on: https://go-review.googlesource.com/31463
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 023bb034e93363492ef444fefcb1d38cdc61ede1
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Oct 19 09:56:53 2016 -0700

    spec: slightly more realistic example for type assertions
    
    For #17428.
    
    Change-Id: Ia902b50cf0c40e3c2167fb573a39d328331c38c7
    Reviewed-on: https://go-review.googlesource.com/31449
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1e3dc3d5d43a835a60e0261e343d3a44b5f93db0
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Oct 19 12:39:37 2016 +0000

    syscall: make Utimes on Solaris match all the other geese
    
    Updates #14892
    
    Change-Id: I640c6e1635ccdf611f219521a7d297a9885c4cb3
    Reviewed-on: https://go-review.googlesource.com/31446
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4859f6a416b053d57fcc9d8f43e81e9d218280e9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Oct 19 10:31:15 2016 +0000

    net/http: make NewRequest set empty Body nil, don't peek Read Body in Transport
    
    This CL makes NewRequest set Body nil for known-zero bodies, and makes
    the http1 Transport not peek-Read a byte to determine whether there's
    a body.
    
    Background:
    
    Many fields of the Request struct have different meanings for whether
    they're outgoing (via the Transport) or incoming (via the Server).
    
    For outgoing requests, ContentLength and Body are documented as:
    
            // Body is the request's body.
            //
            // For client requests a nil body means the request has no
            // body, such as a GET request. The HTTP Client's Transport
            // is responsible for calling the Close method.
            Body io.ReadCloser
    
            // ContentLength records the length of the associated content.
            // The value -1 indicates that the length is unknown.
            // Values >= 0 indicate that the given number of bytes may
            // be read from Body.
            // For client requests, a value of 0 with a non-nil Body is
            // also treated as unknown.
            ContentLength int64
    
    Because of the ambiguity of what ContentLength==0 means, the http1 and
    http2 Transports previously Read the first byte of a non-nil Body when
    the ContentLength was 0 to determine whether there was an actual body
    (with a non-zero length) and ContentLength just wasn't populated, or
    it was actually empty.
    
    That byte-sniff has been problematic and gross (see #17480, #17071)
    and was removed for http2 in a previous commit.
    
    That means, however, that users doing:
    
        req, _ := http.NewRequest("POST", url, strings.NewReader(""))
    
    ... would not send a Content-Length header in their http2 request,
    because the size of the reader (even though it was known, being one of
    the three common recognized types from NewRequest) was zero, and so
    the HTTP Transport thought it was simply unset.
    
    To signal explicitly-zero vs unset-zero, this CL changes NewRequest to
    signal explicitly-zero by setting the Body to nil, instead of the
    strings.NewReader("") or other zero-byte reader.
    
    This CL also removes the byte sniff from the http1 Transport, like
    https://golang.org/cl/31326 did for http2.
    
    Updates #17480
    Updates #17071
    
    Change-Id: I329f02f124659bf7d8bc01e2c9951ebdd236b52a
    Reviewed-on: https://go-review.googlesource.com/31445
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4c1995f95b9786006c71537e34609e356efafb4b
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 11:01:54 2016 -0400

    reflect: document DeepEqual(nil map, empty non-nil map) behavior
    
    Fixes #16531.
    
    Change-Id: I41ec8123f2d3fbe063fd3b09a9366e69722793e5
    Reviewed-on: https://go-review.googlesource.com/31355
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6c295a9a71924478a344e7b447ff3b44b1e94511
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 22:56:14 2016 -0400

    syscall: for ForkExec on Linux, always use 32-bit setgroups system call
    
    Fixes #17092.
    
    Change-Id: If203d802a919e00594ddc1282782fc59a083fd63
    Reviewed-on: https://go-review.googlesource.com/31458
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f2f8d58b92cd7fd9616c98fb012467656de5a3cb
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 19 08:48:25 2016 -0400

    reflect: update FieldByNameFunc comment
    
    This was supposed to be in CL 31354
    but was dropped due to a Git usage error.
    
    For #16573.
    
    Change-Id: I3d99087c8efc8cbc016c55e8365d0005f79d1b2f
    Reviewed-on: https://go-review.googlesource.com/31461
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f7f679c79009137bd34fcc33a6d3a6762f45e75
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 23:22:38 2016 -0400

    html/template, text/template: clarify template redefinition behavior
    
    Make two important points clearer:
    
     - Giving a template definition containing
       nothing but spaces has no effect.
     - Giving a template definition containing
       non-spaces can only be done once per template.
    
    Fixes #16912.
    Fixes #16913.
    Fixes #17360.
    
    Change-Id: Ie3971b83ab148b7c8bb800fe4a21579566378e3e
    Reviewed-on: https://go-review.googlesource.com/31459
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit ae14472af9e9508eab948303b14290ca98d09646
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 22:21:58 2016 -0400

    os: clean up after test
    
    Noted in CL 31358 after submit.
    
    Change-Id: I76ddad9b9e27dd6a03c1c4f49153213747fe0a61
    Reviewed-on: https://go-review.googlesource.com/31365
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9aed16e96dc97a68a00e6358fe05f96ce5c16b35
Author: Ingo Oeser <nightlyone@googlemail.com>
Date:   Tue Oct 18 18:05:43 2016 +0200

    regexp: avoid alloc in QuoteMeta when not quoting
    
    Many users quote literals in regular expressions just in case.
    No need to allocate then.
    
    Note: Also added benchmarks for quoting and not quoting.
    
            name             old time/op    new time/op     delta
            QuoteMetaAll-4      629ns ± 6%      654ns ± 5%    +4.01%        (p=0.001 n=20+19)
            QuoteMetaNone-4    1.02µs ± 6%     0.20µs ± 0%   -80.73%        (p=0.000 n=18+20)
    
            name             old speed      new speed       delta
            QuoteMetaAll-4   22.3MB/s ± 6%   21.4MB/s ± 5%    -3.94%        (p=0.001 n=20+19)
            QuoteMetaNone-4  25.3MB/s ± 3%  131.5MB/s ± 0%  +419.28%        (p=0.000 n=17+19)
    
            name             old alloc/op   new alloc/op    delta
            QuoteMetaAll-4      64.0B ± 0%      64.0B ± 0%      ~     (all samples are equal)
            QuoteMetaNone-4     96.0B ± 0%      0.0B ±NaN%  -100.00%        (p=0.000 n=20+20)
    
            name             old allocs/op  new allocs/op   delta
            QuoteMetaAll-4       2.00 ± 0%       2.00 ± 0%      ~     (all samples are equal)
            QuoteMetaNone-4      2.00 ± 0%      0.00 ±NaN%  -100.00%        (p=0.000 n=20+20)
    
    Change-Id: I38d50f463cde463115d22534f8eb849e54d899af
    Reviewed-on: https://go-review.googlesource.com/31395
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f36e1adaa2c72d74dc669b596ea1c4df5e938def
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Oct 9 22:45:17 2016 -0700

    math/big: implement Float.Scan, type assert fmt interfaces to enforce docs
    
    Implements Float.Scan which satisfies fmt.Scanner interface.
    Also enforces docs' interface implementation claims with compile time
    type assertions, that is:
    + Float always implements fmt.Formatter and fmt.Scanner
    + Int always implements fmt.Formatter and fmt.Scanner
    + Rat always implements fmt.Formatter
    which will ensure that the API claims are strictly matched.
    
    Also note that Float.Scan doesn't handle ±Inf.
    
    Fixes #17391
    
    Change-Id: I3d3dfbe7f602066975c7a7794fe25b4c645440ce
    Reviewed-on: https://go-review.googlesource.com/30723
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit ead08e91f6468ab1c35c250ec487935103c580f6
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Wed Apr 20 14:29:30 2016 -0300

    cmd/go, testing: indicate when no tests are run
    
    For example, testing the current directory:
    
            $ go test -run XXX
            testing: warning: no tests to run
            PASS
            ok      testing 0.013s
            $
    
    And in a summary:
    
            $ go test -run XXX testing
            ok      testing 0.013s [no tests to run]
            $
    
    These make it easy to spot when the -run regexp hasn't matched anything
    or there are no tests. Previously the message was printed in the "current directory"
    case when there were no tests at all, but not for no matches, and either way
    was not surfaced in the directory list summary form.
    
    Fixes #15211.
    
    Change-Id: I1c82a423d6bd429fb991c9ca964c9d26c96fd3c5
    Reviewed-on: https://go-review.googlesource.com/22341
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>

commit 95abb5a36aa1a727db512772f632ecaf05df34aa
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 23:05:27 2016 -0400

    cmd/go: make go test -i -o x.test actually write x.test
    
    Fixes #17078.
    
    Change-Id: I1dfb71f64361b575ec461ed44b0779f2d5cf45fc
    Reviewed-on: https://go-review.googlesource.com/31352
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit e6a901ea3ac4b37be94aaf7b0285ba1840354c4e
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 09:37:54 2016 -0400

    cmd/go: disable SSH connection pooling to avoid git hang
    
    Fixes #13453.
    Fixes #16104.
    
    Change-Id: I4e94f606df786af8143f8649c9afde570f346301
    Reviewed-on: https://go-review.googlesource.com/31353
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit e05d0140483e78c36cd03b3f6173e9f23e975645
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 11:00:00 2016 -0400

    reflect: correct Type.FieldByNameFunc docs
    
    Fixes #16573.
    
    Change-Id: I5a26eaa8b258cb1861190f9690086725532b8a0d
    Reviewed-on: https://go-review.googlesource.com/31354
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e65bce7144dbced232df8842ef6825d7e45f094e
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Sun Oct 16 13:25:53 2016 +0900

    os, syscall: fix incorrect offset calculation in Readlink on windows
    
    Current implementation of syscall.Readlink mistakenly calculates
    the end offset of the PrintName field.
    Also, there are some cases that the PrintName field is empty.
    Instead, the CL uses SubstituteName with correct calculation.
    
    Fixes #15978
    Fixes #16145
    
    Change-Id: If3257137141129ac1c552d003726d5b9c08bb754
    Reviewed-on: https://go-review.googlesource.com/31118
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ebf827ded7d6997747c96ae8f0f4871c15090d49
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 10:46:55 2016 -0400

    testing: wrap long comment line
    
    Requested in CL 31324 review.
    
    Change-Id: Ic81410e07cce07c6f3727bc46d86b6c54c15eca0
    Reviewed-on: https://go-review.googlesource.com/31410
    Reviewed-by: Rob Pike <r@golang.org>

commit 321c312d8246dec6889f5fe334b6193c320baf0e
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 12:34:19 2016 -0400

    os: reject Rename("old", "new") where new is a directory
    
    Unix rejects this when new is a non-empty directory.
    Other systems reject this when new is a directory, empty or not.
    Make Unix reject empty directory too.
    
    Fixes #14527.
    
    Change-Id: Ice24b8065264c91c22cba24aa73e142386c29c87
    Reviewed-on: https://go-review.googlesource.com/31358
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8fbfdad28145bfaad2fa2082336128944d5a3543
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Dec 10 11:18:41 2015 -0800

    spec: require 16 bit minimum exponent in constants rather than 32
    
    A 16bit binary exponent permits a constant range covering roughly the range
    from 7e-9865 to 7e9863 which is more than enough for any practical and
    hypothetical constant arithmetic.
    
    Furthermore, until recently cmd/compile could not handle very large exponents
    correctly anyway; i.e., the chance that any real programs (but for tests that
    explore corner cases) are affected are close to zero.
    
    Finally, restricting the minimum supported range significantly reduces the
    implementation complexity in an area that hardly matters in reality for new
    or alternative spec-compliant implementations that don't or cannot rely on
    pre-existing arbitratry precision arithmetic packages that support a 32bit
    exponent range.
    
    This is technically a language change but for the reasons mentioned above
    this is unlikely to affect any real programs, and certainly not programs
    compiled with the gc or gccgo compilers as they currently support up to
    32bit exponents.
    
    Fixes #13572.
    
    Change-Id: I970f919c57fc82c0175844364cf48ea335f17d39
    Reviewed-on: https://go-review.googlesource.com/17711
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 3f2cb493e5d2a2c2beac9f75a3717a56e294d38a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 18 14:17:05 2016 -0700

    cmd/compile: handle unsafe builtins like universal builtins
    
    Reuse the same mechanisms for handling universal builtins like len to
    handle unsafe.Sizeof, etc. Allows us to drop package unsafe's export
    data, and simplifies some code.
    
    Updates #17508.
    
    Change-Id: I620e0617c24e57e8a2d7cccd0e2de34608779656
    Reviewed-on: https://go-review.googlesource.com/31433
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 7eed848a178cbecae7131434eed1eaab81709a85
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Tue Oct 18 14:00:30 2016 +0530

    math: speed up Gamma(+Inf)
    
    Add special case for Gamma(+∞) which speeds it up:
    
    benchmark            old ns/op     new ns/op     delta
    BenchmarkGamma-4     14.5          7.44          -48.69%
    
    The documentation for math.Gamma already specifies it as a special
    case:
    
            Gamma(+Inf) = +Inf
    
    The original C code that has been used as the reference implementation
    (as mentioned in the comments in gamma.go) also treats Gamma(+∞) as a
    special case:
    
    if( x == INFINITY )
            return(x);
    
    Change-Id: Idac36e19192b440475aec0796faa2d2c7f8abe0b
    Reviewed-on: https://go-review.googlesource.com/31370
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 97b04152bc3d9df1155bc97d9e6095f69b6882c7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Oct 18 21:42:09 2016 +0000

    net/http: update test to check Content-Length 0 Body more reliably
    
    The way to send an explicitly-zero Content-Length is to set a nil Body.
    
    Fix this test to do that, rather than relying on type sniffing.
    
    Updates #17480
    Updates #17071
    
    Change-Id: I6a38e20f17013c88ec4ea69d73c507e4ed886947
    Reviewed-on: https://go-review.googlesource.com/31434
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 75fef5a0f60bcace88a8d7470df2d85d8eee048f
Author: Quentin Smith <quentin@golang.org>
Date:   Mon Oct 17 18:40:18 2016 -0400

    cmd/go: print more env variables in "go env"
    
    "go env" previously only printed a subset of the documented environment
    variables; now it includes everything, such as GO386 and CGO_*.
    
    This also fixes the CGO_CFLAGS environment variable to always have the
    same default. According to iant@ and confirmed by testing, cgo can now
    understand the default value of CGO_CFLAGS.
    
    Fixes #17191.
    
    Change-Id: Icf75055446dd250b6256ef1139e9ce848f4a9d3b
    Reviewed-on: https://go-review.googlesource.com/31330
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Quentin Smith <quentin@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8b3194ac8fd8436bf4bfd252de58ab81154f334d
Author: Dhananjay Nakrani <dhananjaynakrani@gmail.com>
Date:   Mon Oct 17 14:17:46 2016 -0700

    cmd/compile: fix code duplication in race-instrumentation
    
    instrumentnode() accidentally copies parent's already-instrumented nodes
    into child's Ninit block. This generates repeated code in race-instrumentation.
    This case surfaces only when it duplicates inline-labels, because of
    compile time error. In other cases, it silently generates incorrect
    instrumented code. This change prevents it from doing so.
    
    Fixes #17449.
    
    Change-Id: Icddf2198990442166307e176b7e20aa0cf6c171c
    Reviewed-on: https://go-review.googlesource.com/31317
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2b687a7df854f3c88b266b6cec59a207a45c2353
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Oct 17 16:03:27 2016 -0700

    cmd/compile: stop treating interface methods like actual functions
    
    Interface methods can't have function bodies, so there's no need to
    process their parameter lists as variable declarations. The only
    possible reason would be to check for duplicate parameter names and/or
    invalid types, but we do that anyway, and have regression tests for it
    (test/funcdup.go).
    
    Change-Id: Iedb15335467caa5d872dbab829bf32ab8cf6204d
    Reviewed-on: https://go-review.googlesource.com/31430
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2a441d307868ea5b757fb90eeab07bfc308b94c6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Oct 18 14:01:02 2016 +0000

    net/http/internal: don't block unnecessarily in ChunkedReader
    
    Fixes #17355
    
    Change-Id: I5390979cd0081b61a639466377faa46b4221b74a
    Reviewed-on: https://go-review.googlesource.com/31329
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 430b82009c32e854a209e186f011d47f3241e9b4
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Oct 18 11:47:42 2016 -0400

    cmd/internal/obj/{ppc64,s390x}: mark functions with small stacks NOSPLIT
    
    This change omits the stack check on ppc64 and s390x when the size of
    a stack frame is less than obj.StackSmall. This is an optimization
    x86 already performs.
    
    The effect on s390x isn't huge because we were already omitting the
    stack check when the frame size was 0 (it shaves about 1K from the
    size of bin/go). On ppc64 however this change reduces the size of the
    .text section in bin/go by 33K (1%).
    
    Updates #13379 (for ppc64).
    
    Change-Id: I6af0eb987646bea47fcaf0a812db3496bab0f680
    Reviewed-on: https://go-review.googlesource.com/31357
    Reviewed-by: David Chase <drchase@google.com>

commit c1ab165fa6f0744c87135b53f21576d61c74dec4
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Oct 18 15:27:51 2016 +0200

    net/http: enable TestTransportRemovesDeadIdleConnections on Plan 9
    
    This issue has been fixed in CL 31390.
    
    Fixes #15464.
    
    Change-Id: I35e088f37bf3b544100ff131c72690bcfd788e5b
    Reviewed-on: https://go-review.googlesource.com/31393
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8a255cb85cf4a0b20d0f5dc513d3bb0c56518ec2
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Oct 18 15:28:44 2016 +0200

    net: enable TestCancelRequestWithChannelBeforeDo on Plan 9
    
    This issue has been fixed in CL 31390.
    
    Fixes #11476.
    
    Change-Id: I6658bda2e494d3239d62c49d0bd5d34a36b744d0
    Reviewed-on: https://go-review.googlesource.com/31394
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0c12bdf73b1cf60ceb45f2a302cddba17e86a503
Author: David du Colombier <0intro@gmail.com>
Date:   Tue Oct 18 15:21:46 2016 +0200

    net: always wake up the readers on close on Plan 9
    
    Previously, in acceptPlan9 we set netFD.ctl to the listener's
    /net/tcp/*/listen file instead of the accepted connection's
    /net/tcp/*/ctl file.
    
    In netFD.Read, we write "close" to netFD.ctl to close the
    connection and wake up the readers. However, in the
    case of an accepted connection, we got the error
    "write /net/tcp/*/listen: inappropriate use of fd"
    because the /net/tcp/*/listen doesn't handle the "close" message.
    
    In this case, the connection wasn't closed and the readers
    weren't awake.
    
    We modified the netFD structure so that netFD.ctl represents
    the accepted connection and netFD.listen represents the
    listener.
    
    Change-Id: Ie38c7dbaeaf77fe9ff7da293f09e86d1a01b3e1e
    Reviewed-on: https://go-review.googlesource.com/31390
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c1a1328c5f004c62b8c08faf0d0d2845e0be5d37
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 12 22:58:47 2016 -0400

    encoding/xml: add wildcard support for collecting all attributes
    
    - Like ",any" for elements, add ",any,attr" for attributes to allow
      a mop-up field that gets any otherwise unmapped attributes.
    - Map attributes to fields of type slice by extending the slice,
      just like for elements.
    - Allow storing an attribute into an xml.Attr directly, to provide
      a way to record the name.
    
    Combined, these three independent features allow
    
            AllAttrs []Attr `xml:",any,attr"`
    
    to collect all attributes not otherwise spoken for in a particular struct.
    
    Tests based on CL 16292 by Charles Weill.
    
    Fixes #3633.
    
    Change-Id: I2d75817f17ca8752d7df188080a407836af92611
    Reviewed-on: https://go-review.googlesource.com/30946
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 0794dce07239fad5845b9c77b50d084f19f7278f
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 21:08:48 2016 -0400

    bufio: read from underlying reader at most once in Read
    
    Fixes #17059.
    
    Change-Id: I5c7ee46604399f7dc3c3c49f964cbb1aa6c0d621
    Reviewed-on: https://go-review.googlesource.com/31320
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 3d1ae4b75c77a88ba3b20ada874f1027365a8060
Author: David du Colombier <0intro@gmail.com>
Date:   Mon Oct 17 19:15:37 2016 +0200

    net: close the connection gracefully on Plan 9
    
    Previously, we used to write the "hangup" message to
    the TCP connection control file to be able to close
    a connection, while waking up the readers.
    
    The "hangup" message closes the TCP connection with a
    RST message. This is a problem when closing a connection
    consecutively to a write, because the reader may not have
    time to acknowledge the message before the connection is
    closed, resulting in loss of data.
    
    We use a "close" message, newly implemented in the Plan 9
    kernel to be able to close a TCP connection gracefully with a FIN.
    
    Updates #15464.
    
    Change-Id: I2050cc72fdf7a350bc6c9128bae7d14af11e599c
    Reviewed-on: https://go-review.googlesource.com/31271
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a431bdc712c7a404307f38228271d970d9d2c023
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 23:19:10 2016 -0400

    testing: document that Skip cannot undo Error
    
    Fixes #16502.
    
    Change-Id: Id8e117a724d73cd51844c06d47bbeba61f8dc827
    Reviewed-on: https://go-review.googlesource.com/31324
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>

commit 1188569534fb65fb5e9f0e3eea6b20edc996e983
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 23:30:38 2016 -0400

    testing: fix flag usage messages
    
    Fixes #16404.
    
    Change-Id: Iabaeeef3eff2fff6e5ed2d6bc9ef9c2f6d1cb5e7
    Reviewed-on: https://go-review.googlesource.com/31332
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c999108723fb35cec3667f1fcd60933d2608becc
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 23:51:16 2016 -0400

    time: revise Timer comments for Stop, Reset
    
    The comments added for Go 1.7 are very close.
    Make explicit that they only apply if the timer is
    not known to have expired already.
    
    Fixes #14038.
    
    Change-Id: I6a38be7b2015e1571fc477e18444a8cee38aab29
    Reviewed-on: https://go-review.googlesource.com/31350
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 427674fa0e2fd8c44a2fe7002add00cafcc5894b
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 22:14:32 2016 -0400

    io: clarify Pipe docs
    
    Fixes #14139.
    
    Change-Id: I6d2181720c38582b3d2160e94c7593a6cb4fc60f
    Reviewed-on: https://go-review.googlesource.com/31321
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 736443c13a718f0a9c30327ebbf09f58ccbe6d49
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 17:20:48 2016 -0400

    os/exec: allow simultaneous cmd.Wait and Write of cmd.StdinPipe
    
    cmd.StdinPipe returns an io.WriteCloser.
    It's reasonable to expect the caller not to call Write and Close simultaneously,
    but there is an implicit Close in cmd.Wait that's not obvious.
    We already synchronize the implicit Close in cmd.Wait against
    any explicit Close from the caller. Also synchronize that implicit
    Close against any explicit Write from the caller.
    
    Fixes #9307.
    
    Change-Id: I8561e9369d6e5ac88dfbca1175549f6dfa04b8ac
    Reviewed-on: https://go-review.googlesource.com/31148
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5fbf35dc3fadd29785739fcec061d42157ea7861
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 15:47:18 2016 -0400

    time: be consistent about representation of UTC location in Time struct
    
    In the zero Time, the (not user visible) nil *Location indicates UTC.
    In the result of t.UTC() and other ways to create times in specific
    zones, UTC is indicated by a non-nil *Location, specifically &utcLoc.
    This creates a representation ambiguity exposed by comparison with ==
    or reflect.DeepEqual or the like.
    
    Change time.Time representation to use only nil, never &utcLoc,
    to represent UTC. This eliminates the ambiguity.
    
    Fixes #15716.
    
    Change-Id: I7dcc2c20ce6b073e1daae323d3e49d17d1d52802
    Reviewed-on: https://go-review.googlesource.com/31144
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 79c036238d83c8fceb49aa4bab4d6dade1c321f6
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Oct 18 19:43:04 2016 +0900

    net: update docs on network interface API
    
    This change documents that the InterfaceAddrs function is less usable on
    multi-homed IP nodes because of the lack of network interface
    identification information.
    
    Also updates documentation on exposed network interface API.
    
    Fixes #14518.
    
    Change-Id: I5e86606f8019ab475eb5d385bd797b052cba395d
    Reviewed-on: https://go-review.googlesource.com/31371
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2a85578b0ecd424e95b29d810b7a414a299fd6a7
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Tue Sep 27 13:27:02 2016 -0700

    database/sql: support returning query database types
    
    Creates a ColumnType structure that can be extended in to future.
    Allow drivers to implement what makes sense for the database.
    
    Fixes #16652
    
    Change-Id: Ieb1fd64eac1460107b1d3474eba5201fa300a4ec
    Reviewed-on: https://go-review.googlesource.com/29961
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2ecaaf18f94cd5ad3ccd46937d36c7a68d3e69bf
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Oct 9 21:06:03 2016 +0200

    fmt: always handle special methods if print operand is a reflect.Value
    
    Check for and call the special printing and format methods such as String
    at printing depth 0 when printing the concrete value of a reflect.Value.
    
    Fixes: #16015
    
    Change-Id: I23bd2927255b60924e5558321e98dd4a95e11c4c
    Reviewed-on: https://go-review.googlesource.com/30753
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit faf882d1d427e8c8a9a1be00d8ddcab81d1e848e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Oct 14 11:45:59 2016 +0100

    net/http: make Server Handler's Request.Context be done on conn errors
    
    This CL changes how the http1 Server reads from the client.
    
    The goal of this change is to make the Request.Context given to Server
    Handlers become done when the TCP connection dies (has seen any read
    or write error). I didn't finish that for Go 1.7 when Context was
    added to http package.
    
    We can't notice the peer disconnect unless we're blocked in a Read
    call, though, and previously we were only doing read calls as needed,
    when reading the body or the next request. One exception to that was
    the old pre-context CloseNotifier mechanism.
    
    The implementation of CloseNotifier has always been tricky. The past
    few releases have contained the complexity and moved the
    reading-from-TCP-conn logic into the "connReader" type. This CL
    extends connReader to make sure that it's always blocked in a Read
    call, at least once the request body has been fully consumed.
    
    In the process, this deletes all the old CloseNotify code and unifies
    it with the context cancelation code. The two notification mechanisms
    are nearly identical, except the CloseNotify path always notifies on
    the arrival of pipelined HTTP/1 requests. We might want to change that
    in a subsequent commit. I left a TODO for that. For now there's no
    change in behavior except that the context now cancels as it was
    supposed to.
    
    As a bonus that fell out for free, a Handler can now use CloseNotifier
    and Hijack together in the same request now.
    
    Fixes #15224 (make http1 Server always in a Read, like http2)
    Fixes #15927 (cancel context when underlying connection closes)
    Updates #9763 (CloseNotifier + Hijack)
    
    Change-Id: I972cf6ecbab7f1230efe8cc971e89f8e6e56196b
    Reviewed-on: https://go-review.googlesource.com/31173
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 35e5fd0c4de88567aefa354ce6613b7d1ec3a4d9
Author: Adam Langley <agl@golang.org>
Date:   Wed Oct 12 10:53:35 2016 -0700

    crypto/tls: enable ChaCha20-Poly1305 cipher suites by default.
    
    This change enables the ChaCha20-Poly1305 cipher suites by default. This
    changes the default ClientHello and thus requires updating all the
    tests.
    
    Change-Id: I6683a2647caaff4a11f9e932babb6f07912cad94
    Reviewed-on: https://go-review.googlesource.com/30958
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit cff3e7587a516933d842c11b68bdd346ae6fc9be
Author: Adam Langley <agl@golang.org>
Date:   Mon Oct 10 15:27:34 2016 -0700

    crypto/tls: add Config.GetConfigForClient
    
    GetConfigForClient allows the tls.Config to be updated on a per-client
    basis.
    
    Fixes #16066.
    Fixes #15707.
    Fixes #15699.
    
    Change-Id: I2c675a443d557f969441226729f98502b38901ea
    Reviewed-on: https://go-review.googlesource.com/30790
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7e2bf952a905f16a17099970392ea17545cdd193
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 22:40:32 2016 -0400

    net/url: add PathEscape, PathUnescape
    
    Fixes #13737.
    
    Change-Id: Ib655dbf06f44709f687f8a2410c80f31e4075f13
    Reviewed-on: https://go-review.googlesource.com/31322
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 59dae58174ef6dd2ca5720fcce97c565979375ce
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 22:50:44 2016 -0400

    net/url: document and add example for ParseQuery("x")
    
    Fixes #16460.
    
    Change-Id: Ie9d5f725d2d7e8210ab6f7604a5a05fc49f707de
    Reviewed-on: https://go-review.googlesource.com/31331
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ac1108bdcbd316aa3ffc0bf70d50caa35e7b785f
Author: Rob Pike <r@golang.org>
Date:   Sun Oct 16 11:25:37 2016 -0700

    fmt: fix documention for %#v on uints
    
    It's the same as %#x not %x.
    
    Just a documentation change; tests already cover it.
    
    Fixes #17322
    
    Change-Id: Ia9db229f781f9042ac5c0bb824e3d7a26fb74ec5
    Reviewed-on: https://go-review.googlesource.com/31254
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f6cdfc7987d9f3ee7380b3e6f52e433608f342c5
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Mon Oct 17 21:59:10 2016 +0200

    math/big: add benchmarks for big.Float String
    
    In addition to the DecimalConversion benchmark, that exercises the
    String method of the internal decimal type on a range of small shifts,
    add a few benchmarks for the big.Float String method. They can be used
    to obtain more realistic data on the real-world performance of
    big.Float printing.
    
    Change-Id: I7ada324e7603cb1ce7492ccaf3382db0096223ba
    Reviewed-on: https://go-review.googlesource.com/31275
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 57666c3fe842c8a210b55e22514834ec724f945d
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 18 00:34:57 2016 -0400

    test: avoid matching file names in errcheck
    
    Fixes #17030.
    
    Change-Id: Ic7f237ac7553ae0176929056e64b01667ed59066
    Reviewed-on: https://go-review.googlesource.com/31351
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5a0d50f4eb7e35a57364ed5d2f7b79c0b1a80b36
Author: David Symonds <dsymonds@golang.org>
Date:   Tue Oct 18 10:43:47 2016 +1100

    cmd/vet: fix formatting of headings in doc.go.
    
    This will cause godoc to correctly render these docs,
    since go/doc.ToHTML requires no punctuation for headings.
    
    Change-Id: Ic95245147d3585f2ccc59d4424fcab17d2a5617b
    Reviewed-on: https://go-review.googlesource.com/31319
    Reviewed-by: Rob Pike <r@golang.org>

commit 4a5b3ef9b90b2a724fbe9557b4cb15a65d2be87b
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Sun Oct 16 14:31:18 2016 +0900

    encoding/asn1: return error instead of dereferencing nil *big.Int in marshaling
    
    Fixes #17461
    
    Change-Id: I9954f6ae46c7e15560d7460841be8f2bc37233a9
    Reviewed-on: https://go-review.googlesource.com/31121
    Reviewed-by: Adam Langley <agl@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 99b7984de7b02494b4f0d67c9ff42a2367148489
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Oct 17 14:08:36 2016 -0700

    cmd/link: remove some unnecessary comments
    
    The comments about pcln functions are obsolete since those functions
    now live in cmd/internal/obj. The copyright header is redundant with
    the existing one at the top of the file.
    
    Change-Id: I568fd3d259253a0d8eb3b0a157d008df1b5de106
    Reviewed-on: https://go-review.googlesource.com/31315
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c7e855658d73b85f345c9a0ac81de42acad7ae9b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Oct 17 13:40:18 2016 -0400

    cmd/link: trampoline support for external linking on ARM
    
    all.bash passes with -debugtramp=2 (except the unavoidable
    disassembly test as we change instructions). And successfully
    build k8s.io/kubernetes/cmd/hyperkube in both internal linking
    and external linking mode.
    
    Fixes #17028.
    
    Change-Id: Ic8fac6a394488155c5eba9215662db1c1086e24b
    Reviewed-on: https://go-review.googlesource.com/31143
    Reviewed-by: David Chase <drchase@google.com>

commit 007c907b8080e484feed373331210f9287c27120
Author: Adam Langley <agl@golang.org>
Date:   Wed Oct 12 11:20:27 2016 -0700

    crypto/tls: only store a single nonce for AES-GCM.
    
    Although an AEAD, in general, can be used concurrently in both the seal
    and open directions, TLS is easier. Since the transport keys are
    different for different directions in TLS, an AEAD will only ever be
    used in one direction. Thus we don't need separate buffers for seal and
    open because they can never happen concurrently.
    
    Also, fix the nonce size to twelve bytes since the fixed-prefix
    construction for AEADs is superseded and will never be used for anything
    else now.
    
    Change-Id: Ibbf6c6b1da0e639f4ee0e3604410945dc7dcbb46
    Reviewed-on: https://go-review.googlesource.com/30959
    Run-TryBot: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d1bfa3c68d11c861f3e3629e525b2515aa1ef68f
Author: Adam Langley <agl@golang.org>
Date:   Mon Oct 17 14:26:57 2016 -0700

    Revert "crypto/tls: add CloseWrite method to Conn"
    
    This reverts commit c6185aa63217c84a1a73c578c155e7d4dec6cec8. That
    commit seems to be causing flaky failures on the builders. See
    discussion on the original thread: https://golang.org/cl/25159.
    
    Change-Id: I26e72d962d4efdcee28a0bc61a53f246b046df77
    Reviewed-on: https://go-review.googlesource.com/31316
    Run-TryBot: Adam Langley <agl@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 67d8226b4862f0f8deb4dc6fa8617017ecb0f32b
Author: Adam Langley <agl@golang.org>
Date:   Wed Oct 12 10:46:43 2016 -0700

    crypto/tls: support ChaCha20-Poly1305.
    
    This change adds support for the ChaCha20-Poly1305 AEAD to crypto/tls,
    as specified in https://tools.ietf.org/html/rfc7905.
    
    Fixes #15499.
    
    Change-Id: Iaa689be90e03f208c40b574eca399e56f3c7ecf1
    Reviewed-on: https://go-review.googlesource.com/30957
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e7edc7e27e13c789b56768b556dfcde767920f10
Author: Adam Langley <agl@golang.org>
Date:   Mon Oct 17 13:35:27 2016 -0700

    vendor: update golang.org/x/crypto/chacha20poly1305
    
    This change updates the vendored chacha20poly1305 package to match
    revision 14f9af67c679edd414f72f13d67c917447113df2 of x/crypto.
    
    Change-Id: I05a4ba86578b0f0cdb1ed7dd50fee3b38bb48cf5
    Reviewed-on: https://go-review.googlesource.com/31312
    Run-TryBot: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bb4c40b21a30c02c069270327c5b34acab19b3f2
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Oct 17 13:34:40 2016 -0700

    doc: document go1.7.2
    
    Change-Id: I34b3650ee9512879ff7528336813a7850c46ea90
    Reviewed-on: https://go-review.googlesource.com/31311
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7dd9c385f6896c7dcb5d76353e52e36c81af2838
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Oct 17 20:23:51 2016 +0000

    Revert "cmd/compile: inline convI2E"
    
    This reverts commit 395d36a67df8d25b35617ec8709f0164ae2f655e.
    
    Appears to be responsible for builder failures.
    
    Change-Id: Ic6c6307f662767e529060b88704a9f074785d99e
    Reviewed-on: https://go-review.googlesource.com/31310
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 9ee21f90d2594412dd60dd821831056db708fa53
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 10 16:18:43 2016 -0400

    math/big: add (*Int).Sqrt
    
    This is needed for some of the more complex primality tests
    (to filter out exact squares), and while the code is simple the
    boundary conditions are not obvious, so it seems worth having
    in the library.
    
    Change-Id: Ica994a6b6c1e412a6f6d9c3cf823f9b653c6bcbd
    Reviewed-on: https://go-review.googlesource.com/30706
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 2190f771d876180fe3fe51d785f0dbc32a5373d0
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Mon Oct 17 14:35:55 2016 -0500

    bytes: fix typo in ppc64le asm for Compare
    
    Correcting a line in asm_ppc64x.s in the cmpbodyLE function
    that originally was R14 but accidentally changed to R4.
    
    Fixes #17488
    
    Change-Id: Id4ca6fb2e0cd81251557a0627e17b5e734c39e01
    Reviewed-on: https://go-review.googlesource.com/31266
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>

commit 1cfb5c3fd5578a3665231a302ef7f03abec78d1d
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Sep 14 10:42:14 2016 -0400

    cmd/compile: merge loads into operations on s390x
    
    Adds the new canMergeLoad function which can be used by rules to
    decide whether a load can be merged into an operation. The function
    ensures that the merge will not reorder the load relative to memory
    operations (for example, stores) in such a way that the block can no
    longer be scheduled.
    
    This new function enables transformations such as:
    
    MOVD 0(R1), R2
    ADD  R2, R3
    
    to:
    
    ADD  0(R1), R3
    
    The two-operand form of the following instructions can now read a
    single memory operand:
    
     - ADD
     - ADDC
     - ADDW
     - MULLD
     - MULLW
     - SUB
     - SUBC
     - SUBE
     - SUBW
     - AND
     - ANDW
     - OR
     - ORW
     - XOR
     - XORW
    
    Improves SHA3 performance by 6-8%.
    
    Updates #15054.
    
    Change-Id: Ibcb9122126cd1a26f2c01c0dfdbb42fe5e7b5b94
    Reviewed-on: https://go-review.googlesource.com/29272
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 92221fe8bc73ec6d487bd479f9739fdddb6fcada
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Oct 14 17:09:54 2016 -0700

    math/big: slightly faster float->decimal conversion
    
    Inspired by Alberto Donizetti's observations in
    https://go-review.googlesource.com/#/c/30099/.
    
    name                 old time/op  new time/op  delta
    DecimalConversion-8   138µs ± 1%   136µs ± 2%  -1.85%  (p=0.000 n=10+10)
    
    10 runs each, measured on a Mac Mini, 2.3 GHz Intel Core i7.
    
    Performance improvements varied between -1.25% to -4.4%; -1.85% is
    about in the middle of the observed improvement. The generated code
    is slightly shorter in the inner loops of the conversion code.
    
    Change-Id: I10fb3b2843da527691c39ad5e5e5bd37ed63e2fa
    Reviewed-on: https://go-review.googlesource.com/31250
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 984753b665875cd62f6144a42f6df58cb5f159a8
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 10 12:18:00 2016 -0400

    runtime: fix GC assist retry path
    
    GC assists retry if preempted or if they fail to park. However, on the
    retry path they currently use stale statistics. In particular, the
    retry can use "debtBytes", but debtBytes isn't updated when the debt
    changes (since other than retries it is only used once). Also, though
    less of a problem, the if the assist ratio has changed while the
    assist was blocked, the retry will still use the old assist ratio.
    
    Fix all of this by simply making the retry jump back to where we
    compute these statistics, rather than just after.
    
    Change-Id: I2ed8b4f0fc9f008ff060aa926f4334b662ac7d3f
    Reviewed-on: https://go-review.googlesource.com/30701
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 81c431a53780d90ebe8a81205db9b3bee7824ffd
Author: Austin Clements <austin@google.com>
Date:   Thu Oct 6 15:12:12 2016 -0400

    runtime: abstract out assist queue management
    
    This puts all of the assist queue-related code together and makes it
    easier to modify how the assist queue works.
    
    Change-Id: Id54e06702bdd5a5dd3fef2ce2c14cd7ca215303c
    Reviewed-on: https://go-review.googlesource.com/30700
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 395d36a67df8d25b35617ec8709f0164ae2f655e
Author: Keith Randall <khr@golang.org>
Date:   Sun Oct 16 23:40:12 2016 -0700

    cmd/compile: inline convI2E
    
    It's pretty simple.  For:
      e = (interface{})(i)
    Do:
      tmp = i.itab
      if tmp != nil {
        tmp = tmp.typ_ // load type from itab
      }
      e = eface{tmp, i.data}
    
    It is smaller and faster than calling the runtime.
    
    Change-Id: I0ad27f62f4ec0b6cd53bc8530e4da0eae3e67a6c
    Reviewed-on: https://go-review.googlesource.com/31260
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d5bd797ee55d36b07b388d0b8ca2393dc186bea1
Author: Austin Clements <austin@google.com>
Date:   Sun Oct 16 18:23:39 2016 -0400

    runtime: fix getArgInfo for deferred reflection calls
    
    getArgInfo for reflect.makeFuncStub and reflect.methodValueCall is
    necessarily special. These have dynamically determined argument maps
    that are stored in their context (that is, their *funcval). These
    functions are written to store this context at 0(SP) when called, and
    getArgInfo retrieves it from there.
    
    This technique works if getArgInfo is passed an active call frame for
    one of these functions. However, getArgInfo is also used in
    tracebackdefers, where the "call" is not a true call with an active
    stack frame, but a deferred call. In this situation, getArgInfo
    currently crashes because tracebackdefers passes a frame with sp set
    to 0. However, the entire approach used by getArgInfo is flawed in
    this situation because the wrapper has not actually executed, and
    hence hasn't saved this metadata to any stack frame.
    
    In the defer case, we know the *funcval from the _defer itself, so we
    can fix this by teaching getArgInfo to use the *funcval context
    directly when its available, and otherwise get it from the active call
    frame.
    
    While we're here, this commit simplifies getArgInfo a bit by making it
    play more nicely with the type system. Rather than decoding the
    *reflect.methodValue that is the wrapper's context as a *[2]uintptr,
    just write out a copy of the reflect.methodValue type in the runtime.
    
    Fixes #16331. Fixes #17471.
    
    Change-Id: I81db4d985179b4a81c68c490cceeccbfc675456a
    Reviewed-on: https://go-review.googlesource.com/31138
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 687d9d5d78f8a2d09b2052e73be0c83740e17fda
Author: Austin Clements <austin@google.com>
Date:   Thu Oct 13 10:44:57 2016 -0400

    runtime: print a message on bad morestack
    
    If morestack runs on the g0 or gsignal stack, it currently performs
    some abort operation that typically produces a signal (e.g., it does
    an INT $3 on x86). This is useful if you're running in a debugger, but
    if you're not, the runtime tries to trap this signal, which is likely
    to send the program into a deeper spiral of collapse and lead to very
    confusing diagnostic output.
    
    Help out people trying to debug without a debugger by making morestack
    print an informative message before blowing up.
    
    Change-Id: I2814c64509b137bfe20a00091d8551d18c2c4749
    Reviewed-on: https://go-review.googlesource.com/31133
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 0ba3c607dfcc90072191375d57c4059be1ae96c7
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 17 13:29:31 2016 -0400

    cmd/dist, go/build: make CGO_ENABLED during make.bash sticky
    
    Per discussion on #12808, it's a bit odd that if you do
    
            CGO_ENABLED=0 ./make.bash
    
    then you get a toolchain that still tries to use cgo.
    So make the CGO_ENABLED setting propagate into
    the resulting toolchain as the default setting for that
    environment variable, like we do with other variables
    like CC and GOROOT.
    
    No reasonable way to test automatically, but I did
    test by hand that after the above command, 'go env'
    shows CGO_ENABLED=0; before it showed CGO_ENABLED=1.
    
    Fixes #12808.
    
    Change-Id: I26a2fa6cc00e73bde8af7469270b27293392ed71
    Reviewed-on: https://go-review.googlesource.com/31141
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1e28dce80ad2ec195d55269266c5cca7ebd845a5
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Thu Oct 13 12:59:07 2016 -0500

    bytes: improve performance for bytes.Compare on ppc64x
    
    This improves the performance for byte.Compare by rewriting
    the cmpbody function in runtime/asm_ppc64x.s.  The previous code
    had a simple loop which loaded a pair of bytes and compared them,
    which is inefficient for long buffers.  The updated function checks
    for 8 or 32 byte chunks and then loads and compares double words where
    possible.
    
    Because the byte.Compare result indicates greater or less than,
    the doubleword loads must take endianness into account, using a
    byte reversed load in the little endian case.
    
    Fixes #17433
    
    benchmark                                   old ns/op     new ns/op     delta
    BenchmarkBytesCompare/8-16                  13.6          7.16          -47.35%
    BenchmarkBytesCompare/16-16                 25.7          7.83          -69.53%
    BenchmarkBytesCompare/32-16                 38.1          7.78          -79.58%
    BenchmarkBytesCompare/64-16                 63.0          10.6          -83.17%
    BenchmarkBytesCompare/128-16                112           13.0          -88.39%
    BenchmarkBytesCompare/256-16                211           28.1          -86.68%
    BenchmarkBytesCompare/512-16                410           38.6          -90.59%
    BenchmarkBytesCompare/1024-16               807           60.2          -92.54%
    BenchmarkBytesCompare/2048-16               1601          103           -93.57%
    
    Change-Id: I121acc74fcd27c430797647b8d682eb0607c63eb
    Reviewed-on: https://go-review.googlesource.com/30949
    Reviewed-by: David Chase <drchase@google.com>

commit 7c46f0349844f950cc811727ded2393cff7e0369
Author: Quentin Smith <quentin@golang.org>
Date:   Fri Oct 14 15:13:30 2016 -0400

    strconv: strip \r in raw strings passed to Unquote
    
    To match the language spec, strconv.Unquote needs to strip carriage
    returns from the raw string.
    
    Also fixes TestUnquote to not be a noop.
    
    Fixes #15997
    
    Change-Id: I2456f50f2ad3830f37e545f4f6774ced9fe609d7
    Reviewed-on: https://go-review.googlesource.com/31210
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 6f4a6faf86238285fd02d2d04cbf3aeb51eb9d37
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Oct 17 14:09:40 2016 -0400

    cmd/dist: disable math/big assembly when using the bootstrap compiler
    
    The assembly in math/big may contain instructions that the bootstrap
    compiler does not support. Disable it using the math_big_pure_go
    build tag.
    
    Fixes #17484.
    
    Change-Id: I766cab6a888721ab4ed76ebdbfc87ad4e919ec41
    Reviewed-on: https://go-review.googlesource.com/31142
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cbf28ff87c0aab519cd87a27c168d433f2404764
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sat Oct 1 14:01:09 2016 +0200

    strconv: make FormatFloat slowpath a little faster
    
    The relevant benchmark (on an Intel i7-4510U machine):
    
    name                      old time/op  new time/op  delta
    FormatFloat/Slowpath64-4  68.6µs ± 0%  44.1µs ± 2%  -35.71%  (p=0.000 n=13+15)
    
    Change-Id: I67eb0e81ce74ed57752d0280059f91419f09e93b
    Reviewed-on: https://go-review.googlesource.com/30099
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 77b6a08e0d3061cbf505394f1d0c5bc9d16fa6cb
Author: Adam Langley <agl@golang.org>
Date:   Wed Oct 12 10:18:37 2016 -0700

    vendor: add golang.org/x/crypto/{chacha20poly1305,poly1305}
    
    This change imports the chacha20poly1305 and poly1305 packages from
    x/crypto at 5f4e837b98443e9e7a65072235205993af565d85. These packages
    will be used to support the ChaCha20-Poly1305 AEAD in crypto/tls.
    
    Change-Id: I1a38d671ef9aeff3bc41e3924655883d465a5617
    Reviewed-on: https://go-review.googlesource.com/30956
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9a97c3bfe41d1ed768ea3bd3d8f0f52b8a51bb62
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 13 13:45:31 2016 -0400

    cmd/go: accept plain file for .vcs (instead of directory)
    
    Sometimes .git is a plain file; maybe others will follow.
    This CL matches CL 21430, made in x/tools/go/vcs.
    
    The change in the Swift test case makes the test case
    pass by changing the test to match current behavior,
    which I assume is better than the reverse.
    (The test only runs locally and without -short, so the
    builders are not seeing this particular failure.)
    
    For #10322.
    
    Change-Id: Iccd08819a01c5609a2880b9d8a99af936e20faff
    Reviewed-on: https://go-review.googlesource.com/30948
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d26b0661c23dedc5c3e2c2ed2ca6250e440bf010
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Tue Oct 11 09:26:40 2016 -0500

    cmd/link: add trampolines for too far calls in ppc64x
    
    This change adds support for trampolines on ppc64x when using
    internal linking, in the case where the offset to the branch
    target is larger than what fits in the field provided by the
    branch instruction.
    
    Fixes #16665
    
    Change-Id: Icfee72910f38c94588d2adce517b64dee6176145
    Reviewed-on: https://go-review.googlesource.com/30850
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 0ce1d79a6a771f7449ec493b993ed2a720917870
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Oct 11 08:34:58 2016 -0700

    database/sql: accept nil pointers to Valuers implemented on value receivers
    
    The driver.Valuer interface lets types map their Go representation to
    a suitable database/sql/driver.Value.
    
    If a user defines the Value method with a value receiver, such as:
    
        type MyStr string
    
        func (s MyStr) Value() (driver.Value, error) {
            return strings.ToUpper(string(s)), nil
        }
    
    Then they can't use (*MyStr)(nil) as an argument to an SQL call via
    database/sql, because *MyStr also implements driver.Value, but via a
    compiler-generated wrapper which checks whether the pointer is nil and
    panics if so.
    
    We now accept (*MyStr)(nil) and map it to "nil" (an SQL "NULL")
    if the Valuer method is implemented on MyStr instead of *MyStr.
    
    If a user implements the driver.Value interface with a pointer
    receiver, they retain full control of what nil means:
    
        type MyStr string
    
        func (s *MyStr) Value() (driver.Value, error) {
            if s == nil {
                return "missing MyStr", nil
            }
            return strings.ToUpper(string(*s)), nil
        }
    
    Adds tests for both cases.
    
    Fixes #8415
    
    Change-Id: I897d609d80d46e2354d2669a8a3e090688eee3ad
    Reviewed-on: https://go-review.googlesource.com/31259
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 237d7e34bc7579ec499a029191c33106dc5476a1
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 13 15:27:04 2016 -0400

    cmd/dist: use debug/pe directly for cmd/link
    
    Delete vendored copy.
    
    Change-Id: I06e9d3b709553a1a8d06275e99bd8f617aac5788
    Reviewed-on: https://go-review.googlesource.com/31011
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 15040c11b9b8f2e33b2833feb99a48ea9a2dba6c
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 13 15:13:41 2016 -0400

    cmd/dist: copy needed packages from standard library during bootstrap
    
    This allows use of newer math/big (and later debug/pe)
    without maintaining a vendored copy somewhere in cmd.
    
    Use for math/big, deleting cmd/compile/internal/big.
    
    Change-Id: I2bffa7a9ef115015be29fafdb02acc3e7a665d11
    Reviewed-on: https://go-review.googlesource.com/31010
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit f444b48fe419c2d19b7b9a89faad30f0e8b0e474
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 12 16:54:02 2016 -0400

    encoding/json: fix decoding of null into Unmarshaler, TextUnmarshaler
    
    1. Define behavior for Unmarshal of JSON null into Unmarshaler and
    TextUnmarshaler. Specifically, an Unmarshaler will be given the
    literal null and can decide what to do (because otherwise
    json.RawMessage is impossible to implement), and a TextUnmarshaler
    will be skipped over (because there is no text to unmarshal), like
    most other inappropriate types. Document this in Unmarshal, with a
    reminder in UnmarshalJSON about handling null.
    
    2. Test all this.
    
    3. Fix the TextUnmarshaler case, which was returning an unmarshalling
    error, to match the definition.
    
    4. Fix the error that had been used for the TextUnmarshaler, since it
    was claiming that there was a JSON string when in fact the problem was
    NOT having a string.
    
    5. Adjust time.Time and big.Int's UnmarshalJSON to ignore null, as is
    conventional.
    
    Fixes #9037.
    
    Change-Id: If78350414eb8dda712867dc8f4ca35a9db041b0c
    Reviewed-on: https://go-review.googlesource.com/30944
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c6185aa63217c84a1a73c578c155e7d4dec6cec8
Author: Ben Burkert <ben@benburkert.com>
Date:   Sun Jul 24 15:13:56 2016 -0700

    crypto/tls: add CloseWrite method to Conn
    
    The CloseWrite method sends a close_notify alert record to the other
    side of the connection. This record indicates that the sender has
    finished sending on the connection. Unlike the Close method, the sender
    may still read from the connection until it recieves a close_notify
    record (or the underlying connection is closed). This is analogous to a
    TCP half-close.
    
    Updates #8579
    
    Change-Id: I9c6bc193efcb25cc187f7735ee07170afa7fdde3
    Reviewed-on: https://go-review.googlesource.com/25159
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b97b7537bc5cf77b8781bd699b17747ca2f02e1a
Author: Victor Vrantchan <vrancean+github@gmail.com>
Date:   Sun Oct 16 09:55:33 2016 -0400

    encoding/pem: add Decode example
    
    For #16360.
    
    Change-Id: I99d1e5ab1f814f65b3066a498158a442f1bd477f
    Reviewed-on: https://go-review.googlesource.com/31137
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d2951740303587fc0c5d14cb5461e39b099e6695
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Sep 2 17:04:41 2016 +0200

    runtime: speed up non-ASCII rune decoding
    
    Copies utf8 constants and EncodeRune implementation from unicode/utf8.
    
    Adds a new decoderune implementation that is used by the compiler
    in code generated for ranging over strings. It does not handle
    ASCII runes since these are handled directly before calls to decoderune.
    
    The DecodeRuneInString implementation from unicode/utf8 is not used
    since it uses a lookup table that would increase the use of cpu caches.
    
    Adds more tests that check decoding of valid and invalid utf8 sequences.
    
    name                              old time/op  new time/op  delta
    RuneIterate/range2/ASCII-4        7.45ns ± 2%  7.45ns ± 1%     ~     (p=0.634 n=16+16)
    RuneIterate/range2/Japanese-4     53.5ns ± 1%  49.2ns ± 2%   -8.03%  (p=0.000 n=20+20)
    RuneIterate/range2/MixedLength-4  46.3ns ± 1%  41.0ns ± 2%  -11.57%  (p=0.000 n=20+20)
    
    new:
    "".decoderune t=1 size=423 args=0x28 locals=0x0
    old:
    "".charntorune t=1 size=666 args=0x28 locals=0x0
    
    Change-Id: I1df1fdb385bb9ea5e5e71b8818ea2bf5ce62de52
    Reviewed-on: https://go-review.googlesource.com/28490
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fe4307f0607dff7742d047b04df06e721aea7906
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Oct 16 05:00:27 2016 -0700

    net/http: support multiple identical Content-Length headers
    
    Referencing RFC 7230 Section 3.3.2, this CL
    deduplicates multiple identical Content-Length headers
    of a message or rejects the message as invalid if the
    Content-Length values differ.
    
    Fixes #16490
    
    Change-Id: Ia6b0f58ec7d35710b11a36113d2bd9128f693f64
    Reviewed-on: https://go-review.googlesource.com/31252
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 516001f50ff3de9f7de2a0525bb771b509504e93
Author: David du Colombier <0intro@gmail.com>
Date:   Mon Oct 17 10:54:44 2016 +0200

    net: skip TestReadTimeoutUnblocksRead on Plan 9
    
    Deadlines aren't implemented on Plan 9 yet.
    
    Updates #17477.
    
    Change-Id: I44ffdbef97276dfec56547e5189672b7da24bfc1
    Reviewed-on: https://go-review.googlesource.com/31188
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>

commit c1cd64d0ac2001ec8fe6f253e4e95561a444d533
Author: Klaus Post <klauspost@gmail.com>
Date:   Sat Oct 15 13:06:22 2016 +0200

    compress/flate: use correct table for size estimation
    
    The incorrect table was used for estimating output size.
    This can give suboptimal selection of entropy encoder in rare cases.
    
    Change-Id: I8b358200f2d1f9a3f9b79a44269d7be704e1d2d9
    Reviewed-on: https://go-review.googlesource.com/31172
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 05471e9ee64a300bd2dcc4582ee1043c055893bb
Author: Yasuhiro Matsumoto <mattn.jp@gmail.com>
Date:   Fri Oct 7 17:10:53 2016 +0900

    crypto/x509: implement SystemCertPool on Windows
    
    Fixes #16736
    
    Change-Id: I335d201e3f6738d838de3881087cb640fc7670e8
    Reviewed-on: https://go-review.googlesource.com/30578
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 707a83341b8c7973f4e0fce731fa279c618f233b
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Mon Oct 3 09:49:25 2016 -0700

    database/sql: add option to use named parameter in query arguments
    
    Modify the new Context methods to take a name-value driver struct.
    This will require more modifications to drivers to use, but will
    reduce the overall number of structures that need to be maintained
    over time.
    
    Fixes #12381
    
    Change-Id: I30747533ce418a1be5991a0c8767a26e8451adbd
    Reviewed-on: https://go-review.googlesource.com/30166
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 99df54f19696e26bea8d6a052d8d91ddb1e4ea65
Author: Martin Möhrmann <martisch@uos.de>
Date:   Tue Sep 6 13:42:49 2016 +0200

    bytes: encode size of rune read by ReadRune into lastRead to speed up UnreadRune
    
    In ReadRune store the size of the rune that was read into lastRead
    to avoid the need to call DecodeRuneLast in UnreadRune.
    
    fmt:
    name        old time/op  new time/op  delta
    ScanInts-4   481µs ± 4%   458µs ± 3%  -4.64%  (p=0.000 n=20+20)
    
    Change-Id: I500848e663a975f426402a4b3d27a541e5cac06c
    Reviewed-on: https://go-review.googlesource.com/28817
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1e775fe4a30c78cf6e8e995efe5a0f469b8d9a4d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Oct 16 10:27:29 2016 +0100

    net/http: add more docs on ErrHijacked
    
    Updates #16456
    
    Change-Id: Ifea651ea3ece2267a6f0c1638181d6ddd9248a9f
    Reviewed-on: https://go-review.googlesource.com/31181
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7a7ea01c65e8366af277b956dc8ccf0601727172
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Oct 15 16:56:51 2016 +0100

    syscall, net: make deadline changes affect blocked read/write calls on nacl
    
    Flesh out nacl's fake network system to match how all the other
    platforms work: all other systems' SetReadDeadline and
    SetWriteDeadline affect currently-blocked read & write calls.
    This was documented in golang.org/cl/30164 because it was the status
    quo and existing packages relied on it. (notably the net/http package)
    
    And add a test.
    
    Change-Id: I074a1054dcabcedc97b173dad5e827f8babf7cfc
    Reviewed-on: https://go-review.googlesource.com/31178
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit cd2c9df7612795cad5b56cabe5ec29c7771db5fe
Author: Caleb Spare <cespare@gmail.com>
Date:   Fri Oct 14 00:59:19 2016 -0700

    html/template: fix Clone so that t.Lookup(t.Name()) yields t
    
    Template.escape makes the assumption that t.Lookup(t.Name()) is t
    (escapeTemplate looks up the associated template by name and sets
    escapeErr appropriately).
    
    This assumption did not hold for a Cloned template, because the template
    associated with t.Name() was a second copy of the original.
    
    Add a test for the assumption that t.Lookup(t.Name()) == t.
    
    One effect of this broken assumption was #16101: parallel Executes
    racily accessed the template namespace because each Execute call saw
    t.escapeErr == nil and re-escaped the template concurrently with read
    accesses occurring outside the namespace mutex.
    
    Add a test for this race.
    
    Related to #12996 and CL 16104.
    
    Fixes #16101
    
    Change-Id: I59831d0847abbabb4ef9135f2912c6ce982f9837
    Reviewed-on: https://go-review.googlesource.com/31092
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit d8cbc2c918f68e8ca5992e68fed052a0e52a8e67
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri Oct 14 17:03:01 2016 +1100

    misc/cgo/testcarchive: do not use same executable name in TestInstall
    
    Fixes #17439
    
    Change-Id: I7caa28519f38692f9ca306f0789cbb975fa1d7c4
    Reviewed-on: https://go-review.googlesource.com/31112
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 42f5ee4cbf15ff02803863d1002259565da0f071
Author: Rob Pike <r@golang.org>
Date:   Sun Oct 16 11:28:45 2016 -0700

    testing: mention in docs for Logf that a final newline is added if needed
    
    Fixes #16423
    
    Change-Id: I9635db295be4d356d427adadd309084e16c4582f
    Reviewed-on: https://go-review.googlesource.com/31255
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ca28620db9392d5aa1002256e41bd066f0cc6377
Author: Rob Pike <r@golang.org>
Date:   Sun Oct 16 11:13:37 2016 -0700

    cmd/go: use normal code 2 for 'no such tool'
    
    Exit code 3 is unprecedented and inconsistent with other failures here,
    such as having no tool directory.
    
    Fixes #17145
    
    Change-Id: Ie7ed56494d4511a600214666ce3a726d63a8fd8e
    Reviewed-on: https://go-review.googlesource.com/31253
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1bcfca0563ce21dce69b2652859d6f0f800c39af
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Oct 15 15:52:57 2016 +0100

    net: enable a test on nacl
    
    No need to skip it. It passes.
    
    Maybe it was fixed at some point.
    
    Change-Id: I9848924aefda44f9b3a574a8705fa549d657f28d
    Reviewed-on: https://go-review.googlesource.com/31177
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 4d898776ff973056aa906d90be0f23af772631c6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Oct 16 11:27:43 2016 +0100

    doc: update go1.8.txt
    
    Change-Id: Ibae0be046c6a6596d3a98b094ec5f089bb68be7a
    Reviewed-on: https://go-review.googlesource.com/31182
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ad50408fe7d9edfc7a1d9791e7391df132bc58b2
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Tue Sep 20 19:43:34 2016 +0900

    path/filepath: simplify TestToNorm
    
    Change-Id: I8a176ed9c7f59ebdfd39c1e2b88905f977179982
    Reviewed-on: https://go-review.googlesource.com/31119
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0cc400f0e7e73e1ee870d803b8faf1904c0c9ec3
Author: Alex Carol <alex.carol.c@gmail.com>
Date:   Sun Oct 16 00:26:39 2016 +0200

    net/rpc: add missing import to rpc server documentation
    
    Change-Id: Idca6115181960eed7a955027ee77a02decb4e7f2
    Reviewed-on: https://go-review.googlesource.com/31179
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ad5fd2872f6cce199aa4f543801d8793ef0a901f
Author: Austin Clements <austin@google.com>
Date:   Fri Oct 14 17:35:18 2016 -0400

    test: simplify fixedbugs/issue15747.go
    
    The error check patterns in this test are more complex than necessary
    because f2 gets inlined into f1. This behavior isn't important to the
    test, so disable inlining of f2 and simplify the error check patterns.
    
    Change-Id: Ia8aee92a52f9217ad71b89b2931494047e8d2185
    Reviewed-on: https://go-review.googlesource.com/31132
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9897e4081192abd81fd404774dd492975d7ccedd
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 10 17:14:14 2016 -0400

    runtime: use more go:nowritebarrierrec in proc.go
    
    Currently we use go:nowritebarrier in many places in proc.go.
    go:notinheap and go:yeswritebarrierrec now let us use
    go:nowritebarrierrec (the recursive form of the go:nowritebarrier
    pragma) more liberally. Do so in proc.go
    
    Change-Id: Ia7fcbc12ce6c51cb24730bf835fb7634ad53462f
    Reviewed-on: https://go-review.googlesource.com/30942
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 1bc6be6423e48318451a0faeaae840772137b001
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 11 22:58:21 2016 -0400

    runtime: mark several types go:notinheap
    
    This covers basically all sysAlloc'd, persistentalloc'd, and
    fixalloc'd types.
    
    Change-Id: I0487c887c2a0ade5e33d4c4c12d837e97468e66b
    Reviewed-on: https://go-review.googlesource.com/30941
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 991a85c88944e9cb92c4860c173f49d549a92845
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 11 11:47:14 2016 -0400

    runtime: make mSpanList more go:notinheap-friendly
    
    Currently mspan links to its previous mspan using a **mspan field that
    points to the previous span's next field. This simplifies some of the
    list manipulation code, but is going to make it very hard to convince
    the compiler that mspan list manipulations don't need write barriers.
    
    Fix this by using a more traditional ("boring") linked list that uses
    a simple *mspan pointer to the previous mspan. This complicates some
    of the list manipulation slightly, but it will let us eliminate all
    write barriers from the mspan list manipulation code by marking mspan
    go:notinheap.
    
    Change-Id: I0d0b212db5f20002435d2a0ed2efc8aa0364b905
    Reviewed-on: https://go-review.googlesource.com/30940
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 77527a316b33d6f4c072c0774a1478bb53f42d35
Author: Austin Clements <austin@google.com>
Date:   Tue Oct 11 22:53:27 2016 -0400

    cmd/compile: add go:notinheap type pragma
    
    This adds a //go:notinheap pragma for declarations of types that must
    not be heap allocated. We ensure these rules by disallowing new(T),
    make([]T), append([]T), or implicit allocation of T, by disallowing
    conversions to notinheap types, and by propagating notinheap to any
    struct or array that contains notinheap elements.
    
    The utility of this pragma is that we can eliminate write barriers for
    writes to pointers to go:notinheap types, since the write barrier is
    guaranteed to be a no-op. This will let us mark several scheduler and
    memory allocator structures as go:notinheap, which will let us
    disallow write barriers in the scheduler and memory allocator much
    more thoroughly and also eliminate some problematic hybrid write
    barriers.
    
    This also makes go:nowritebarrierrec and go:yeswritebarrierrec much
    more powerful. Currently we use go:nowritebarrier all over the place,
    but it's almost never what you actually want: when write barriers are
    illegal, they're typically illegal for a whole dynamic scope. Partly
    this is because go:nowritebarrier has been around longer, but it's
    also because go:nowritebarrierrec couldn't be used in situations that
    had no-op write barriers or where some nested scope did allow write
    barriers. go:notinheap eliminates many no-op write barriers and
    go:yeswritebarrierrec makes it possible to opt back in to write
    barriers, so these two changes will let us use go:nowritebarrierrec
    far more liberally.
    
    This updates #13386, which is about controlling pointers from non-GC'd
    memory to GC'd memory. That would require some additional pragma (or
    pragmas), but could build on this pragma.
    
    Change-Id: I6314f8f4181535dd166887c9ec239977b54940bd
    Reviewed-on: https://go-review.googlesource.com/30939
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a9e6cebde21875379ccc05d680b3c3a78adbf089
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 10 16:46:28 2016 -0400

    cmd/compile, runtime: add go:yeswritebarrierrec pragma
    
    This pragma cancels the effect of go:nowritebarrierrec. This is useful
    in the scheduler because there are places where we enter a function
    without a valid P (and hence cannot have write barriers), but then
    obtain a P. This allows us to annotate the function with
    go:nowritebarrierrec and split out the part after we've obtained a P
    into a go:yeswritebarrierrec function.
    
    Change-Id: Ic8ce4b6d3c074a1ecd8280ad90eaf39f0ffbcc2a
    Reviewed-on: https://go-review.googlesource.com/30938
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6347367be36df608cce84beb097378f8654dd208
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Wed Sep 7 16:35:32 2016 +0300

    strings: use Index in Count
    
    This simplifies code and provides performance iprovments:
    Similar to https://go-review.googlesource.com/#/c/28577
    
    CountHard1-48               1.74ms ±14%  0.17ms ±14%  -90.16%  (p=0.000 n=19+19)
    CountHard2-48               1.78ms ±15%  0.25ms ±13%  -86.10%  (p=0.000 n=19+20)
    CountHard3-48               1.78ms ±12%  0.80ms ±11%  -55.19%  (p=0.000 n=17+20)
    CountTorture-48             13.5µs ±14%  13.6µs ±11%     ~     (p=0.625 n=18+19)
    CountTortureOverlapping-48  6.92ms ±13%  8.42ms ±11%  +21.72%  (p=0.000 n=19+17)
    
    Change-Id: Ief120aee918a66487c76be56e0796871c8502f89
    Reviewed-on: https://go-review.googlesource.com/28586
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 86b2f29676c52774d91dda96e0ba5d4d7bcd3b47
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Thu Oct 6 11:06:21 2016 -0700

    database/sql: add support for multiple result sets
    
    Many database systems allow returning multiple result sets
    in a single query. This can be useful when dealing with many
    intermediate results on the server and there is a need
    to return more then one arity of data to the client.
    
    Fixes #12382
    
    Change-Id: I480a9ac6dadfc8743e0ba8b6d868ccf8442a9ca1
    Reviewed-on: https://go-review.googlesource.com/30592
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit be48aa3f3a16006ab31c424487af352ca374afed
Author: Rob Pike <r@golang.org>
Date:   Wed Oct 12 19:51:02 2016 -0700

    cmd/cover: handle gotos
    
    If a labeled statement is the target of a goto, we must treat it as the
    boundary of a new basic block, but only if it is not already the boundary
    of a basic block such as a labeled for loop.
    
    Fixes #16624
    
    Now reports 100% coverage for the test in the issue.
    
    Change-Id: If118bb6ff53a96c738e169d92c03cb3ce97bad0e
    Reviewed-on: https://go-review.googlesource.com/30977
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 5567b878915f7c2f1e7ee3898125c2cd2b7fe287
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Oct 14 11:27:11 2016 -0700

    spec: fix examples for predeclared function complex
    
    Fixes #17398.
    
    Change-Id: Iac7899031c1bfbadc4f84e5b374eaf1f01dff8c8
    Reviewed-on: https://go-review.googlesource.com/31190
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d13fa4d2256d6dfd030c03a82db258872e3e646c
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu May 5 12:44:28 2016 +1000

    os: use FindFirstFile when GetFileAttributesEx fails in Stat
    
    Fixes #15355
    
    Change-Id: Idbab7a627c5de249bb62d519c5a47f3d2f6c82a7
    Reviewed-on: https://go-review.googlesource.com/22796
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit abbd502d638262fa80e142ad18a89d6c75490672
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Oct 11 09:23:39 2016 +0000

    net/http: allow Handlers to test Hijacked conn without spamming error log
    
    Make a zero-byte write to a hijacked connection not log anything, so handlers
    can test whether a connection is hacked by doing a Write(nil).
    
    Fixes #16456
    
    Change-Id: Id56caf822c8592067bd8422672f0c1aec89e866c
    Reviewed-on: https://go-review.googlesource.com/30812
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 61f1a38bcb52ad5e1753b43c405bb5b144b6966c
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Oct 13 17:08:54 2016 -0400

    crypto/{aes,cipher}: fix panic in CBC on s390x when src length is 0
    
    Adds a test to check that block cipher modes accept a zero-length
    input.
    
    Fixes #17435.
    
    Change-Id: Ie093c4cdff756b5c2dcb79342e167b3de5622389
    Reviewed-on: https://go-review.googlesource.com/31070
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 714318be882d1974ec624272c8d905256d8a5932
Author: Filippo Valsorda <hi@filippo.io>
Date:   Thu Oct 13 17:56:04 2016 +0100

    expvar: add Value methods
    
    Closes #15815
    
    Change-Id: I08154dbff416198cf7787e446b1e00e62c03a972
    Reviewed-on: https://go-review.googlesource.com/30917
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 46276d6b6b14993b4851b77cf48c67ede3360e31
Author: Austin Clements <austin@google.com>
Date:   Mon Sep 26 18:09:54 2016 -0400

    doc: catch go1.8.txt up on runtime changes
    
    This clarifies some of the titles so they're more "news" friendly and
    less implementation-oriented.
    
    Change-Id: Ied02aa1e6824b04db5d32ecdd58e972515b1f588
    Reviewed-on: https://go-review.googlesource.com/29830
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 1da1da3d6ab9ac8287e6b4185afcd1c3396178f5
Author: Alan Donovan <adonovan@google.com>
Date:   Mon May 9 09:40:27 2016 -0400

    go/internal/gcimporter: set Pos attribute of decoded types.Objects
    
    This change is a copy of CL 22788 in x/tools.
    It has no observable effect yet, but brings the two packages in synch.
    
    Change-Id: I266c77547cb46deb69b1a36e1674dfebc430e3a5
    Reviewed-on: https://go-review.googlesource.com/22936
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d08c3d1329994ddba2e0a2dd13b950f9f178ab02
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri Apr 29 16:23:55 2016 +1000

    cmd/link/internal/ld: use debug/pe package to rewrite ldpe.go
    
    This CL also includes vendored copy of debug/pe,
    otherwise bootstrapping fails.
    
    Updates #15345
    
    Change-Id: I3a8ac990e3cb12cb4d24ec11b618b68190397fd1
    Reviewed-on: https://go-review.googlesource.com/22603
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2427123d9391134a68c6f60b5acbcb6f60856ff8
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 12 22:42:40 2016 -0400

    encoding/xml: split attribute marshaling into its own method
    
    No functional changes here. Just makes next CL easier to read.
    
    Change-Id: Icf7b2281b4da6cb59ff4edff05943b2ee288576a
    Reviewed-on: https://go-review.googlesource.com/30945
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 26c7b4fb1e0553e8f9abe5fdd9008bb1f5bd3228
Author: Anthony Canino <anthony.canino1@gmail.com>
Date:   Sat Oct 10 15:24:34 2015 -0400

    cmd/compile: "abc"[1] is not an ideal constant
    
    "abc"[1] is not like 'b', in that -"abc"[1] is uint8 math, not ideal constant math.
    Delay the constantification until after ideal constant folding is over.
    
    Fixes #11370.
    
    Change-Id: Iba2fc00ca2455959e7bab8f4b8b4aac14b1f9858
    Reviewed-on: https://go-review.googlesource.com/15740
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0da30d5cbdd092499fe199c212f8799fd0cc676e
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 12 15:55:02 2016 -0400

    encoding/json: handle misspelled JSON literals in ,string
    
    Fixes #15146.
    
    Change-Id: I229611b9cc995a1391681c492c4d742195c787ea
    Reviewed-on: https://go-review.googlesource.com/30943
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3c1e1c30fdfbdaf7cf5f947c53245f1c28e56f91
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Oct 12 17:09:54 2016 -0700

    cmd/cgo: use alias for unsafe rather than separate functions
    
    When we need to generate a call to _cgoCheckPointer, we need to type
    assert the result back to the desired type. That is harder when the type
    is unsafe.Pointer, as the package can have values of unsafe.Pointer
    types without actually importing unsafe, by mixing C void* and :=. We
    used to handle this by generating a special function for each needed
    type, and defining that function in a separate file where we did import
    unsafe.
    
    Simplify the code by not generating those functions, but instead just
    import unsafe under the alias _cgo_unsafe. This is a simplification step
    toward a fix for issue #16591.
    
    Change-Id: I0edb3e04b6400ca068751709fe063397cf960a54
    Reviewed-on: https://go-review.googlesource.com/30973
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit dc46b882d583a32c7de37a7cfa8b423eb58d0296
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Oct 13 02:20:51 2016 -0700

    cmd/compile: stop allocating Name and Param for ODCLFIELD
    
    name       old time/op     new time/op     delta
    Template       349ms ± 5%      339ms ± 7%  -2.89%        (p=0.000 n=27+29)
    Unicode        187ms ±11%      182ms ±11%  -2.77%        (p=0.039 n=29+29)
    GoTypes        1.05s ± 3%      1.04s ± 4%    ~           (p=0.103 n=29+29)
    Compiler       4.57s ± 3%      4.55s ± 3%    ~           (p=0.202 n=30+29)
    
    name       old user-ns/op  new user-ns/op  delta
    Template        510M ±21%       521M ±18%    ~           (p=0.281 n=30+29)
    Unicode         303M ±34%       300M ±28%    ~           (p=0.592 n=30+30)
    GoTypes        1.52G ± 9%      1.50G ± 9%    ~           (p=0.314 n=30+30)
    Compiler       6.50G ± 5%      6.44G ± 5%    ~           (p=0.362 n=29+30)
    
    name       old alloc/op    new alloc/op    delta
    Template      44.7MB ± 0%     44.0MB ± 0%  -1.63%        (p=0.000 n=28+28)
    Unicode       34.6MB ± 0%     34.5MB ± 0%  -0.18%        (p=0.000 n=30+29)
    GoTypes        125MB ± 0%      123MB ± 0%  -1.14%        (p=0.000 n=30+30)
    Compiler       515MB ± 0%      513MB ± 0%  -0.52%        (p=0.000 n=30+30)
    
    name       old allocs/op   new allocs/op   delta
    Template        427k ± 0%       416k ± 0%  -2.66%        (p=0.000 n=30+30)
    Unicode         323k ± 0%       322k ± 0%  -0.28%        (p=0.000 n=30+30)
    GoTypes        1.21M ± 0%      1.18M ± 0%  -1.84%        (p=0.000 n=29+30)
    Compiler       4.40M ± 0%      4.36M ± 0%  -0.95%        (p=0.000 n=30+30)
    
    Passes toolstash -cmp.
    
    Change-Id: Ifee7d012b1cddadda01450e027eef8d4ecf5581f
    Reviewed-on: https://go-review.googlesource.com/30980
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 01bf5cc21912ff8642171d8255a7fff87f1da00b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Oct 12 17:39:28 2016 -0700

    cmd/compile: cleanup toolstash hacks from previous CL
    
    Change-Id: I36cf3523e00b80e2d3a690f251edd5d6f665d156
    Reviewed-on: https://go-review.googlesource.com/30975
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit add3ff549a97adbd7715b5609deb4dcbf5e7624c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Oct 12 15:48:18 2016 -0700

    cmd/compile: add OSTRUCTKEY for keyed struct literals
    
    Previously, we used OKEY nodes to represent keyed struct literal
    elements. The field names were represented by an ONAME node, but this
    is clumsy because it's the only remaining case where ONAME was used to
    represent a bare identifier and not a variable.
    
    This CL introduces a new OSTRUCTKEY node op for use in struct
    literals. These ops instead store the field name in the node's own Sym
    field. This is similar in spirit to golang.org/cl/20890.
    
    Significant reduction in allocations for struct literal heavy code
    like package unicode:
    
    name       old time/op     new time/op     delta
    Template       345ms ± 6%      341ms ± 6%     ~           (p=0.141 n=29+28)
    Unicode        200ms ± 9%      184ms ± 7%   -7.77%        (p=0.000 n=29+30)
    GoTypes        1.04s ± 3%      1.05s ± 3%     ~           (p=0.096 n=30+30)
    Compiler       4.47s ± 9%      4.49s ± 6%     ~           (p=0.890 n=29+29)
    
    name       old user-ns/op  new user-ns/op  delta
    Template        523M ±13%       516M ±17%     ~           (p=0.400 n=29+30)
    Unicode         334M ±27%       314M ±30%     ~           (p=0.093 n=30+30)
    GoTypes        1.53G ±10%      1.52G ±10%     ~           (p=0.572 n=30+30)
    Compiler       6.28G ± 7%      6.34G ±11%     ~           (p=0.300 n=30+30)
    
    name       old alloc/op    new alloc/op    delta
    Template      44.5MB ± 0%     44.4MB ± 0%   -0.35%        (p=0.000 n=27+30)
    Unicode       39.2MB ± 0%     34.5MB ± 0%  -11.79%        (p=0.000 n=26+30)
    GoTypes        125MB ± 0%      125MB ± 0%   -0.12%        (p=0.000 n=29+30)
    Compiler       515MB ± 0%      515MB ± 0%   -0.10%        (p=0.000 n=29+30)
    
    name       old allocs/op   new allocs/op   delta
    Template        426k ± 0%       424k ± 0%   -0.39%        (p=0.000 n=29+30)
    Unicode         374k ± 0%       323k ± 0%  -13.67%        (p=0.000 n=29+30)
    GoTypes        1.21M ± 0%      1.21M ± 0%   -0.14%        (p=0.000 n=29+29)
    Compiler       4.40M ± 0%      4.39M ± 0%   -0.13%        (p=0.000 n=29+30)
    
    Passes toolstash/buildall.
    
    Change-Id: Iba4ee765dd1748f67e52fcade1cd75c9f6e13fa9
    Reviewed-on: https://go-review.googlesource.com/30974
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 032e2bd1eb215cdeec605b33e42878ec7186cb53
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Oct 12 23:28:36 2016 -0700

    cmd/compile: replace aindex with typArray
    
    aindex is overkill when it's only ever used with known integer
    constants, so just use typArray directly instead.
    
    Change-Id: I43fc14e604172df859b3ad9d848d219bbe48e434
    Reviewed-on: https://go-review.googlesource.com/30979
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1af769da8260b277bd5aa92b5074b3400b1f8d9d
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed Sep 21 11:19:36 2016 +1000

    os: make readConsole handle its input and output correctly
    
    This CL introduces first test for readConsole. And new test
    discovered couple of problems with readConsole.
    
    Console characters consist of multiple bytes each, but byte blocks
    returned by syscall.ReadFile have no character boundaries. Some
    multi-byte characters might start at the end of one block, and end
    at the start of next block. readConsole feeds these blocks to
    syscall.MultiByteToWideChar to convert them into utf16, but if some
    multi-byte characters have no ending or starting bytes, the
    syscall.MultiByteToWideChar might get confused. Current version of
    syscall.MultiByteToWideChar call will make
    syscall.MultiByteToWideChar ignore all these not complete
    multi-byte characters.
    
    The CL solves this issue by changing processing from "randomly
    sized block of bytes at a time" to "one multi-byte character at a
    time". New readConsole code calls syscall.ReadFile to get 1 byte
    first. Then it feeds this byte to syscall.MultiByteToWideChar.
    The new syscall.MultiByteToWideChar call uses MB_ERR_INVALID_CHARS
    flag to make syscall.MultiByteToWideChar return error if input is
    not complete character. If syscall.MultiByteToWideChar returns
    correspondent error, we read another byte and pass 2 byte buffer
    into syscall.MultiByteToWideChar, and so on until success.
    
    Old readConsole code would also sometimes return no data if user
    buffer was smaller then uint16 size, which would confuse callers
    that supply 1 byte buffer. This CL fixes that problem too.
    
    Fixes #17097
    
    Change-Id: I88136cdf6a7bf3aed5fbb9ad2c759b6c0304ce30
    Reviewed-on: https://go-review.googlesource.com/29493
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 0a0f4bc181835882717d2f4be75fced4061d4572
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Wed Oct 12 11:34:47 2016 +0900

    cmd/compile/internal/gc: cleanup esc.go
    
    * convert important functions to methods
    * rename EscXXX to XXX in NodeEscState
    * rename local variables more friendly
    * simplify redundant code
    * update comments
    
    Change-Id: I8442bf4f8dde84523d9a2ad3d04b1cd326bd4719
    Reviewed-on: https://go-review.googlesource.com/30893
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 4940a8379096a48af682c266a0e104f249a80816
Author: Alex Browne <stephenalexbrowne@gmail.com>
Date:   Sat Nov 7 23:54:41 2015 -0500

    cmd/vet: check for duplicate json, xml struct field tags
    
    It is easy to make the mistake of duplicating json struct field
    tags especially when copy/pasting. This commit causes go vet to
    report the mistake. Only field tags in the same struct type are
    considered, because that is the only case which is undoubtedly an
    error.
    
    Fixes #12791.
    
    Change-Id: I4130e4c04b177694cc0daf8f1acaf0751d4f062b
    Reviewed-on: https://go-review.googlesource.com/16704
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit ab019da7272285fb4f634e7fca00c3fa973c76c4
Author: Michael Pratt <mpratt@google.com>
Date:   Wed Feb 17 23:06:56 2016 -0800

    cmd/internal/obj: document Prog
    
    Change-Id: Iafc392ba06452419542ec85e91d44991839eb6f8
    Reviewed-on: https://go-review.googlesource.com/19593
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 0a55a16c91c5bed397a0716cb9d67f8b0a71de9b
Author: Shenghou Ma <minux@golang.org>
Date:   Mon May 4 01:23:56 2015 -0400

    cmd/objdump: enable tests on ppc64/ppc64le
    
    Fixes #9039.
    
    Change-Id: I7d213b4f8e4cda73ea7687fb97dbd22e58163949
    Reviewed-on: https://go-review.googlesource.com/9683
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 94cf54e8619e03671b33113d39306646235feb60
Author: Shenghou Ma <minux@golang.org>
Date:   Mon May 4 01:21:27 2015 -0400

    cmd/internal/objfile: add ppc64/ppc64le disassembler support
    
    Change-Id: I7d213b4f8e4cda73ea7687fb97dbd22e58163948
    Reviewed-on: https://go-review.googlesource.com/9682
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit ed0a9567469e63f7d47e399f7b300b731d5c3489
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 12 12:41:58 2016 -0400

    cmd: add golang.org/x/arch/ppc64/ppc64asm for disassembly
    
    For #9039.
    
    Change-Id: I2b1bcd76857ff332411ca21a0cc5def3097a8eaf
    Reviewed-on: https://go-review.googlesource.com/30936
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit daa121167b6ce630aba00195f1c3872cda39a50c
Author: Allan Simon <allan.simon@supinfo.com>
Date:   Sun Oct 11 04:16:58 2015 +0800

    encoding/xml: prevent omitempty from omitting non-nil pointers to empty values
    
    There was an inconsistency between the (json encoding + documentation)
    and the xml encoding implementation. Pointer to an empty value was
    not being serialized (i.e simply ignored). Which had the effect of making
    impossible to have a struct with a string field for which we wanted to
    serialize the value ""
    
    Fixes #5452
    
    Change-Id: Id858701801158409be01e962d2cda843424bd22a
    Reviewed-on: https://go-review.googlesource.com/15684
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 347259cbae30f876be11fe5e71710969afa24374
Author: Xia Bin <snyh@snyh.org>
Date:   Sun Jan 24 14:22:54 2016 +0800

    misc/cgo/test: add test that gccgo fails
    
    Gccgo isn't locking the OS thread properly during calls.
    
    Change-Id: Idb2475291405e390cbb83abb27a402fd0381d0c4
    Reviewed-on: https://go-review.googlesource.com/18882
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 90a750857c6146ce5d8d24cda5a1e70aa3d4cc58
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 12 15:10:15 2016 -0400

    syscall: update darwin/amd64 for timespec change
    
    Change-Id: I74f47f519dfee10cd079ad9a4e09e36e8d74c6dc
    Reviewed-on: https://go-review.googlesource.com/30937
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 14e545b60a8c78aa6609d807b4f50e54e9bfe1eb
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Oct 12 11:36:18 2016 -0700

    archive/tar: reduce allocations in formatOctal
    
    Change-Id: I9ddb7d2a97d28aba7a107b65f278993daf7807fa
    Reviewed-on: https://go-review.googlesource.com/30960
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6da8bdd2cc7a10f037a2025ffed57627d97a990c
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Wed Oct 12 07:50:30 2016 -0500

    cmd/asm: recognize CR1-CR7 on ppc64x branch instructions
    
    Some of the branch instructions (BEQ, BNE, BLT, etc.) accept
    all the valid CR values as operands, but the CR register value is
    not parsed and not put into the instruction, so that CR0 is always
    used regardless of what was specified on the instruction.  For example
    BEQ CR2,label becomes beq cr0,label.
    
    This adds the change to the PPC64 assembler to recognize the CR value
    and set the approppriate field in the instruction so the correct
    CR is used.  This also adds some general comments on the branch
    instruction BC and its operand values.
    
    Fixes #17408
    
    Change-Id: I8e956372a42846a4c09a7259e9172eaa29118e71
    Reviewed-on: https://go-review.googlesource.com/30930
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 442de98c14d49bf306ab880e9f9c898ca0ae7c19
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 11 08:36:38 2016 -0700

    cmd/compile,runtime: redo how map assignments work
    
    To compile:
      m[k] = v
    instead of:
      mapassign(maptype, m, &k, &v), do
    do:
      *mapassign(maptype, m, &k) = v
    
    mapassign returns a pointer to the value slot in the map.  It is just
    like mapaccess except that it will allocate a new slot if k is not
    already present in the map.
    
    This makes map accesses faster but potentially larger (codewise).
    
    It is faster because the write into the map is done when the compiler
    knows the concrete type, so it can be done with a few store
    instructions instead of calling typedmemmove.  We also potentially
    avoid stack temporaries to hold v.
    
    The code can be larger when the map has pointers in its value type,
    since there is a write barrier call in addition to the mapassign call.
    That makes the code at the callsite a bit bigger (go binary is 0.3%
    bigger).
    
    This CL is in preparation for doing operations like m[k] += v with
    only a single runtime call.  That will roughly double the speed of
    such operations.
    
    Update #17133
    Update #5147
    
    Change-Id: Ia435f032090a2ed905dac9234e693972fe8c2dc5
    Reviewed-on: https://go-review.googlesource.com/30815
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 55ef67f2f85c51d415a030ae144a0b3301a097bd
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 12 13:11:02 2016 -0400

    unicode: change SimpleFold to handle invalid runes
    
    Functions like ToLower and ToUpper return the invalid rune back,
    so we might as well do the same here.
    
    I changed my mind about panicking when I tried to document the behavior.
    
    Fixes #16690 (again).
    
    Change-Id: If1c68bfcd66daea160fd19948e7672b0e1add106
    Reviewed-on: https://go-review.googlesource.com/30935
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 413afcafbfd45b6b58023a49484d8480143960e0
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Oct 12 12:45:16 2016 -0400

    cmd/link: force external linking for plugins
    
    Fixes #17415
    
    Change-Id: I6f896d549092e5e0dba72351e5385992b4cbe90f
    Reviewed-on: https://go-review.googlesource.com/30933
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9e98e7e6686a500f87352e3721038d194b1db33c
Author: Adam Langley <agl@golang.org>
Date:   Tue Oct 11 15:08:35 2016 -0700

    crypto/tls: enable X25519 by default.
    
    Since this changes the offered curves in the ClientHello, all the test
    data needs to be updated too.
    
    Change-Id: I227934711104349c0f0eab11d854e5a2adcbc363
    Reviewed-on: https://go-review.googlesource.com/30825
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8a11cb318f5c4c15b67ffe9ff9b2fa772bf1dd85
Author: Adam Langley <agl@golang.org>
Date:   Mon Oct 10 18:23:37 2016 -0700

    crypto/tls: support X25519.
    
    X25519 (RFC 7748) is now commonly used for key agreement in TLS
    connections, as specified in
    https://tools.ietf.org/html/draft-ietf-tls-curve25519-01.
    
    This change adds support for that in crypto/tls, but does not enabled it
    by default so that there's less test noise. A future change will enable
    it by default and will update all the test data at the same time.
    
    Change-Id: I91802ecd776d73aae5c65bcb653d12e23c413ed4
    Reviewed-on: https://go-review.googlesource.com/30824
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8c74139cada0b7da5a0914ee0afd75837b6f682d
Author: Adam Langley <agl@golang.org>
Date:   Tue Oct 11 14:45:29 2016 -0700

    crypto/tls: fix printing of OpenSSL output when updating a test fails.
    
    When updating the test data against OpenSSL, the handshake can fail and
    the stdout/stderr output of OpenSSL is very useful in finding out why.
    
    However, printing that output has been broken for some time because its
    no longer sent to a byte.Buffer. This change fixes that.
    
    Change-Id: I6f846c7dc80f1ccee9fa1be36f0b579b3754e05f
    Reviewed-on: https://go-review.googlesource.com/30823
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e875fe42eee942c35cdecc7b4b5d4e762f47bade
Author: Adam Langley <agl@golang.org>
Date:   Tue Oct 11 14:59:55 2016 -0700

    vendor/golang_org/x/crypto/curve25519: new package
    
    This change imports the curve25519 package from x/crypto at revision
    594708b89f21ece706681be23d04a6513a22de6e.
    
    Change-Id: I379eaa71492959e404259fc1273d0057573bc243
    Reviewed-on: https://go-review.googlesource.com/30822
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9d88292c83c17f065485d0c8fa0439f2d9e5cca2
Author: Adam Langley <agl@golang.org>
Date:   Tue Oct 11 10:08:57 2016 -0700

    crypto/tls: switch to OpenSSL 1.1.0 for test data.
    
    We will need OpenSSL 1.1.0 in order to test some of the features
    expected for Go 1.8. However, 1.1.0 also disables (by default) some
    things that we still want to test, such as RC4, 3DES and SSLv3. Thus
    developers wanting to update the crypto/tls test data will need to build
    OpenSSL from source.
    
    This change updates the test data with transcripts generated by 1.1.0
    (in order to reduce future diffs) and also causes a banner to be printed
    if 1.1.0 is not used when updating.
    
    (The test for an ALPN mismatch is removed because OpenSSL now terminates
    the connection with a fatal alert if no known ALPN protocols are
    offered. There's no point testing against this because it's an OpenSSL
    behaviour.)
    
    Change-Id: I957516975e0b8c7def84184f65c81d0b68f1c551
    Reviewed-on: https://go-review.googlesource.com/30821
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0e36456bf9aa7b3041987634e478449215cdbd82
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Sep 2 16:17:37 2016 -0700

    archive/tar: fix and cleanup readOldGNUSparseMap
    
    * Assert that the format is GNU.
    Both GNU and STAR have some form of sparse file support with
    incompatible header structures. Worse yet, both formats use the
    'S' type flag to indicate the presence of a sparse file.
    As such, we should check the format (based on magic numbers)
    and fail early.
    
    * Move realsize parsing logic into readOldGNUSparseMap.
    This is related to the sparse parsing logic and belongs here.
    
    * Fix the termination condition for parsing sparse fields.
    The termination condition for reading the sparse fields
    is to simply check if the first byte of the offset field is NULL.
    This does not seem to be documented in the GNU manual, but this is
    the check done by the both the GNU and BSD implementations:
            http://git.savannah.gnu.org/cgit/tar.git/tree/src/sparse.c?id=9a33077a7b7ad7d32815a21dee54eba63b38a81c#n731
            https://github.com/libarchive/libarchive/blob/1fa9c7bf90f0862036a99896b0501c381584451a/libarchive/archive_read_support_format_tar.c#L2207
    
    * Fix the parsing of sparse fields to use parseNumeric.
    This is what GNU and BSD do. The previous two links show that
    GNU and BSD both handle base-256 and base-8.
    
    * Detect truncated streams.
    The call to io.ReadFull does not check if the error is io.EOF.
    Getting io.EOF in this method is never okay and should always be
    converted to io.ErrUnexpectedEOF.
    
    * Simplify the function.
    The logic is essentially a do-while loop so we can remove
    some redundant code.
    
    Change-Id: Ib2f601b1a283eaec1e41b1d3396d649c80749c4e
    Reviewed-on: https://go-review.googlesource.com/28471
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit 14204662c8a73ea6d5b6489b0c5a6b0345b99a0d
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Sep 2 21:03:57 2016 -0700

    archive/tar: handle integer overflow on 32bit machines
    
    Most calls to strconv.ParseInt(x, 10, 0) should really be
    calls to strconv.ParseInt(x, 10, 64) in order to ensure that they
    do not overflow on 32b architectures.
    
    Furthermore, we should document a bug where Uid and Gid may
    overflow on 32b machines since the type is declared as int.
    
    Change-Id: I99c0670b3c2922e4a9806822d9ad37e1a364b2b8
    Reviewed-on: https://go-review.googlesource.com/28472
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 94f49fd40dd907bcf9e16ab9a798409b8fcc13fd
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Wed Oct 12 23:05:35 2016 +0900

    unicode: panic if given rune is negative in SimpleFold
    
    Fixes #16690
    
    Change-Id: I6db588c4b0f23c5ec6bc9b85a488b60fab3f2f13
    Reviewed-on: https://go-review.googlesource.com/30892
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit be302e6d43790c3398e5b03c955f257868855a80
Author: Momchil Velikov <momchil.velikov@gmail.com>
Date:   Wed Sep 7 15:10:07 2016 +0300

    cmd/compile: trim more blocks
    
     - trim blocks with multiple predecessors
     - trim blocks, which contain only phi-functions
     - trim blocks, which can be merged into the successor block
    
    As an example, compiling the following source:
    
    ---8<------
    package p
    
    type Node struct {
            Key         int
            Left, Right *Node
    }
    
    func Search(r *Node, k int) *Node {
            for r != nil {
                    switch {
                    case k == r.Key:
                            return r
                    case k < r.Key:
                            r = r.Left
                    default:
                            r = r.Right
                    }
            }
            return nil
    }
    ---8<------
    
    with `GOSSAFUNC=Search" go tool compile t.go`, results in the following
    code:
    
    ---8<------
    genssa
    
          00000 (t.go:8)    TEXT    "".Search(SB), $0
          00001 (t.go:8)    FUNCDATA        $0, "".gcargs·0(SB)
          00002 (t.go:8)    FUNCDATA        $1, "".gclocals·1(SB)
          00003 (t.go:8)    TYPE    "".r(FP)type.*"".Node, $8
          00004 (t.go:8)    TYPE    "".k+8(FP)type.int, $8
          00005 (t.go:8)    TYPE    "".~r2+16(FP)type.*"".Node, $8
    v40   00006 (t.go:9)    MOVQ    "".k+8(FP), AX
    v34   00007 (t.go:9)    MOVQ    "".r(FP), CX
    v33   00008 (t.go:9)    TESTQ   CX, CX
    b2    00009 (t.go:9)    JEQ     $0, 22
    v16   00010 (t.go:11)   MOVQ    (CX), DX
    v21   00011 (t.go:11)   CMPQ    DX, AX
    b9    00012 (t.go:11)   JEQ     $0, 19
    v64   00013 (t.go:13)   CMPQ    AX, DX
    b13   00014 (t.go:13)   JGE     17
    v36   00015 (t.go:14)   MOVQ    8(CX), CX
    b4    00016 (t.go:9)    JMP     8                  <---+
    v42   00017 (t.go:16)   MOVQ    16(CX), CX             |
    b21   00018 (t.go:10)   JMP     16                 ----+
    v28   00019 (t.go:12)   VARDEF  "".~r2+16(FP)
    v29   00020 (t.go:12)   MOVQ    CX, "".~r2+16(FP)
    b10   00021 (t.go:12)   RET
    v44   00022 (t.go:19)   VARDEF  "".~r2+16(FP)
    v45   00023 (t.go:19)   MOVQ    $0, "".~r2+16(FP)
    b5    00024 (t.go:19)   RET
    00025 (<unknown line number>)   END
    ---8<------
    
    Note the jump at 18 jumps to another jump at 16.
    
    Looking at the function after trimming:
    
    --8<------
    after trim [199 ns]
    
    b1:
    v1 = InitMem <mem>
    v2 = SP <uintptr> : SP
    v67 = Arg <*Node> {r} : r[*Node]
    v59 = Arg <int> {k} : k[int]
    v40 = LoadReg <int> v59 : AX
    v34 = LoadReg <*Node> v67 : CX
    Plain → b2
    
    b2: ← b1 b4
    v8 = Phi <*Node> v34 v68 : CX
    v33 = TESTQ <flags> v8 v8
    NE v33 → b9 b5 (likely)
    
    b9: ← b2
    v16 = MOVQload <int> v8 v1 : DX
    v21 = CMPQ <flags> v16 v40
    EQ v21 → b10 b13 (unlikely)
    
    b13: ← b9
    v64 = CMPQ <flags> v40 v16
    LT v64 → b19 b21
    
    b19: ← b13
    v36 = MOVQload <*Node> [8] v8 v1 : CX
    Plain → b4
    
    b4: ← b21 b19                       <
    v68 = Phi <*Node> v42 v36 : CX      <- no actual code
    Plain → b2                          <
    
    b21: ← b13
    v42 = MOVQload <*Node> [16] v8 v1 : CX
    Plain → b4
    
    b10: ← b9
    v28 = VarDef <mem> {~r2} v1
    v29 = MOVQstore <mem> {~r2} v2 v8 v28
    v30 = Copy <mem> v29
    Ret v30
    
    b5: ← b2
    v44 = VarDef <mem> {~r2} v1
    v45 = MOVQstoreconst <mem> {~r2} [val=0,off=0] v2 v44
    v47 = Copy <mem> v45
    Ret v47
    
    --8<------
    
    The jump at 16 corresponds to the edge b21 -> b4. The block b4 contains
    only phi-ops, i.e. no actual code besides the jump to b2. However b4 is
    not trimmed, because it a) has more than one predecessor, and b) it is
    not empty.
    
    This change enhances trim.go to remove more blocks, subject to the
    following criteria:
    
     - block has predecessors (i.e. not the start block)
    
     - block is BlockPlain
    
     - block does not loop back to itself
    
     - block is the single predecessor of its successor; the instructions of
       the block are merged into the successor
    
     - block does no emit actual code, besides a possible unconditional
       jump.
         Currently only OpPhi are considered to not be actual code,
       perhaps OpKeepAlive/others should be considered too?
    
    As an example, after the change, the block b4 is trimmed and the jump at
    18 jumps directly to 8.
    
    Revision 1: Adjust phi-ops arguments after merge
    
    Ensure the number of phi-ops arguments matches the new number of
    predecessors in the merged block.
    When moving values, make them refer to the merged block.
    
    Revision 2:
     - Make clear the intent that we do not want to trim the entry block
     - Double check that we are merging a phi operation
     - Minor code style fix
     - Fix a potentially dangerous situation when a blocks refers to the
       inline value space in another block
    
    Change-Id: I0ab91779f931f404d11008f5c45606d985d7fbaa
    Reviewed-on: https://go-review.googlesource.com/28812
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8d1d9292ff024f6c7586d27edd2c84c1ca8d9bf5
Author: Kevin Burke <kev@inburke.com>
Date:   Tue Sep 13 23:31:07 2016 -0700

    syscall: document that Exec wraps execve(2)
    
    Change-Id: I611511434f37c75f77c22f61f469108243bc0101
    Reviewed-on: https://go-review.googlesource.com/29121
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 68998433556a5c9ee0f7d8d544ffb006a724adaf
Author: Cyrill Schumacher <cyrill@schumacher.fm>
Date:   Sat Aug 20 11:32:32 2016 +0200

    net/http: optimize internal cookie functions
    
    - precalculate *Cookie slice in read cookie functions
    - readSetCookies: pre-allocs depending on the count of Set-Cookies
    - rename success variable to ok; avoid else
    - refactor Cookie.String to use less allocations
    - remove fmt package and replace with writes to a bytes.Buffer
    - add BenchmarkReadSetCookies and BenchmarkReadCookies
    
    name              old time/op    new time/op    delta
    CookieString-8      1.42µs ± 2%    0.78µs ± 1%  -45.36%        (p=0.000 n=10+10)
    ReadSetCookies-8    3.46µs ± 1%    3.42µs ± 2%   -1.39%        (p=0.001 n=10+10)
    ReadCookies-8       5.12µs ± 1%    5.15µs ± 2%     ~           (p=0.393 n=10+10)
    
    name              old alloc/op   new alloc/op   delta
    CookieString-8        520B ± 0%      384B ± 0%  -26.15%        (p=0.000 n=10+10)
    ReadSetCookies-8      968B ± 0%      960B ± 0%   -0.83%        (p=0.000 n=10+10)
    ReadCookies-8       2.01kB ± 0%    2.01kB ± 0%     ~     (all samples are equal)
    
    name              old allocs/op  new allocs/op  delta
    CookieString-8        10.0 ± 0%       3.0 ± 0%  -70.00%        (p=0.000 n=10+10)
    ReadSetCookies-8      18.0 ± 0%      17.0 ± 0%   -5.56%        (p=0.000 n=10+10)
    ReadCookies-8         16.0 ± 0%      16.0 ± 0%     ~     (all samples are equal)
    
    Change-Id: I870670987f10f3e52f9c657cfb8e6eaaa97a6162
    Reviewed-on: https://go-review.googlesource.com/27850
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 9c850958cea35d019142f8341beacb4151e1511b
Author: Alan Donovan <adonovan@google.com>
Date:   Fri Oct 7 18:11:06 2016 -0400

    go/types: expose Default function, which converts untyped T to T
    
    Change-Id: Ibcf5e0ba694b280744a00c2c6fda300f0a653455
    Reviewed-on: https://go-review.googlesource.com/30715
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 41a005d458558b41b4bc7a4c837953b35609c9a2
Author: Alan Donovan <adonovan@google.com>
Date:   Fri Sep 9 11:14:41 2016 -0400

    test: add test for issue 17039
    
    Change-Id: Ieb3d605f03a7185a707621bef7160090c9bdb51f
    Reviewed-on: https://go-review.googlesource.com/28873
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 898ca6ba0af0ea1180fea1f226ff6ef731018ac2
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Sep 11 19:05:29 2016 -0700

    runtime: update mkduff legacy comments
    
    Update comments for duffzero and duffcopy
    which referred to legacy locations:
    + cmd/?g/cgen.go
    + cmd/?g/ggen.go
    
    Remnants of the old days when we had 5g, 6g etc.
    
    Those locations have since moved to:
    + cmd/compile/internal/<arch>/cgen.go
    + cmd/compile/internal/<arch>/ggen.go
    
    Change-Id: Ie2ea668559d52d42b747260ea69a6d5b3d70e859
    Reviewed-on: https://go-review.googlesource.com/29073
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 6d702d8ed2a980cd0c96499379eee5eb218f8339
Author: Jean-Nicolas Moal <jn.moal@gmail.com>
Date:   Mon Aug 22 19:02:33 2016 +0200

    os: add examples of environment functions
    
    For #16360.
    
    Change-Id: Iaa3548704786018eacec530f7a907b976fa532fe
    Reviewed-on: https://go-review.googlesource.com/27443
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b65cdc28882bfd7c4be46e811a6a7841d9fb7d53
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Thu Aug 18 18:40:02 2016 +0900

    path/filepath: add a test case for EvalSymlinks error
    
    EvalSymlinks returns error if given path or its target path don't exist.
    Add a test for future improvement.
    
    Change-Id: Ic9a4aa5eaee0fe7ac523d54d8eb3132a11b380b3
    Reviewed-on: https://go-review.googlesource.com/27330
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit 6e759ad2e2ae53f08db4470aa60e972eb908f2ef
Author: Dave Cheney <dave@cheney.net>
Date:   Mon Aug 1 20:34:12 2016 +1000

    cmd/compile/internal/gc: add runtime/trace support
    
    This change adds runtime/trace support to go tool compile.
    
    Change-Id: I6c496b9b063796123f75eba6af511c53a57c0196
    Reviewed-on: https://go-review.googlesource.com/25354
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 1a3b739b26e2742fd2febc7c0f87aa8115f390ab
Author: Joshua Boelter <joshua.boelter@intel.com>
Date:   Tue Aug 9 22:37:26 2016 -0700

    runtime: check for errors returned by windows sema calls
    
    Add checks for failure of CreateEvent, SetEvent or
    WaitForSingleObject. Any failures are considered fatal and
    will throw() after printing an informative message.
    
    Updates #16646
    
    Change-Id: I3bacf9001d2abfa8667cc3aff163ff2de1c99915
    Reviewed-on: https://go-review.googlesource.com/26655
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9d36ab222d838f0e493653e2f31d77adb15ab9b5
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Oct 12 14:57:19 2016 +0200

    cmd/link: use HEADR to define FlagTextAddr (cosmetic change)
    
    This cosmetic change defines ld.FlagTextAddr using ld.HEADR in
    the Plan 9 cases, like it is done for other operating systems.
    
    Change-Id: Ic929c1c437f25661058682cf3e159f0b16cdc538
    Reviewed-on: https://go-review.googlesource.com/30912
    Run-TryBot: David du Colombier <0intro@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8fc9c504968be0bbea4c8317998813782d077cf4
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Oct 12 19:41:29 2016 +0900

    net: update doc for unimplemented feature on Plan 9
    
    Also removes unnecessary allocation.
    
    Change-Id: I3406cf75a7b64d93b2b99c7f1f5c78f580452b60
    Reviewed-on: https://go-review.googlesource.com/30891
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 29c600bba1279d63a40bc99a7e6212d3f0bffa06
Author: David du Colombier <0intro@gmail.com>
Date:   Wed Oct 12 14:24:39 2016 +0200

    cmd/link: fix build on plan9/amd64
    
    Support for multiple text sections was added in CL 27790.
    However, this change broke the build on plan9/amd64.
    
    In relocsym, the R_ADDROFF relocation was changed to
    use offsets relative to the start of the first text
    section. However, Segtext.Vaddr is the address of
    the text segment, while we expect to start from
    the first section (text.runtime) of the text segment.
    
    Fixes #17411.
    
    Change-Id: I86bbcbda81cea735b0ecf156eab2e6e5d63acce3
    Reviewed-on: https://go-review.googlesource.com/30911
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6c517df4daa0acaa25a16baeef5ea037c9a0194c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Oct 11 21:04:16 2016 -0700

    syscall: unify NsecToTime{spec,val}, fix for times < 1970
    
    All the implementations of NsecToTimespec and NsecToTimeval were the
    same other than types. Write a single version that uses
    GOARCH/GOOS-specific setTimespec and setTimeval functions to handle the
    types.
    
    The logic in NsecToTimespec and NsecToTimeval caused times before 1970
    to have a negative usec/nsec. The Linux kernel requires that usec
    contain a positive number; for consistency, we do this for both
    NsecToTimespec and NsecToTimeval.
    
    Change-Id: I525eaba2e7cdb00cb57fa00182dabf19fec298ae
    Reviewed-on: https://go-review.googlesource.com/30826
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 6ca48f710f6ae163aa87e883a0a4cf8a91dad0a4
Author: Chris McGee <sirnewton_01@yahoo.ca>
Date:   Wed Sep 28 21:29:08 2016 -0400

    net: implement network interface API for Plan 9
    
    The new implementation parses the plan9 interface files
    and builds Interface representations for the net package.
    
    Updates #17218
    
    Change-Id: I3199d18d9e96a17e922186c3abff1d7cd9cbec2e
    Reviewed-on: https://go-review.googlesource.com/29963
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2287296dbe43c5dfa9afebf0e03af42318a6a8f0
Author: Sina Siadat <siadat@gmail.com>
Date:   Mon Aug 8 02:04:52 2016 +0430

    os: add example for IsNotExist
    
    Show usage of os.IsNotExist in an example.
    
    Change-Id: I5306ea06c370099de5b02668dfa02b87b0c2beac
    Reviewed-on: https://go-review.googlesource.com/25571
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f373bf1eb9a21f843dc0094c3702c2855a2e0d3f
Author: Shawn Walker-Salas <shawn.walker@oracle.com>
Date:   Wed Jun 15 13:44:03 2016 -0700

    cmd/link: non-executable stack support for Solaris
    
    Support the tagging of binaries created with the internal linker
    on Solaris as having a non-executable stack by writing a PT_SUNWSTACK
    program header.
    
    Fixes #16074
    
    Change-Id: I3888f2153083385d04a52f341570f93e5738b276
    Reviewed-on: https://go-review.googlesource.com/24142
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 456b7f5a974f229e0ef7ad5a1925fa72fc4182e2
Author: Gyu-Ho Lee <gyuhox@gmail.com>
Date:   Sat Jun 4 23:20:45 2016 -0700

    runtime/pprof: preallocate slice in pprof.go
    
    To prevent slice growth when appending.
    
    Change-Id: I2cdb9b09bc33f63188b19573c8b9a77601e63801
    Reviewed-on: https://go-review.googlesource.com/23783
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 81b9af7cccce8234319551330cb6406469f32bab
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Thu Jul 28 10:33:26 2016 +1000

    os: add new tests for symbolic links and directory junctions
    
    Updates #15978
    Updates #16145
    
    Change-Id: I161f5bc97d41c08bf5e1405ccafa86232d70886d
    Reviewed-on: https://go-review.googlesource.com/25320
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d2ef288c8be22ccc39f33251bb33530105b17cfa
Author: Tristan Ooohry <ooohry@gmail.com>
Date:   Fri Jul 22 04:11:58 2016 +0000

    cmd/go: added verbose error from matchGoImport
    
    The error coming out of matchGoImport does not differentiate between
    having no imports, and having some invalid imports.
    
    This some extra context to the error message to help debug these issues.
    
    Fixes #16467
    
    Change-Id: I3e9a119ed73da1bed5e07365be0221ea6b7f19db
    Reviewed-on: https://go-review.googlesource.com/25121
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 87b1aaa37cefec8deacdf9c3c30d26015bdfb00b
Author: Xuyang Kang <xuyangkang@gmail.com>
Date:   Sun Jul 17 00:23:56 2016 -0700

    encoding/base64: This change modifies Go to take strict option when decoding base64
    
    If strict option is enabled, when decoding, instead of skip the padding
    bits, it will do strict check to enforce they are set to zero.
    
    Fixes #15656
    
    Change-Id: I869fb725a39cc9dde44dbc4ff0046446e7abc642
    Reviewed-on: https://go-review.googlesource.com/24964
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 56b5546b9138f80bb0b20aebcc1fa551096e87df
Author: Gustav Westling <gustav@westling.xyz>
Date:   Fri Aug 5 16:13:23 2016 +0200

    cmd/gofmt: simplify map key literals
    
    Simplify map key literals in "gofmt -s"
    
    Fixes #16461.
    
    Change-Id: Ia61739b34a30ac27f6696f94a98809109a8a7b61
    Reviewed-on: https://go-review.googlesource.com/25530
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit d07345a6334def1a8273107f8bffab33f7a701bc
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 11 13:50:44 2016 -0700

    cmd/compile: update ssa html help text
    
    Update the description of the conditions under which highlighting might
    be misleading.
    
    Fixes #16754
    
    Change-Id: I3078a09e0b9a76d12078352e15a3f26ba3f1bbee
    Reviewed-on: https://go-review.googlesource.com/30818
    Reviewed-by: David Chase <drchase@google.com>

commit 6597bcbe53cad07b0ac4070b4f428f5db3331383
Author: Dmitri Shuralyov <shurcooL@gmail.com>
Date:   Tue Jul 26 13:01:18 2016 -0400

    path/filepath: remove unneeded doc statement for SplitList
    
    This is a followup to CL 24747, where the package doc phrase
    "Functions in this package replace occurrences of slash unless otherwise specified."
    was removed. The phrase was originally added in CL 7310 together
    with this explicit opt out statement for SplitList.
    
    Remove it since it's no longer neccessary. This helps consistency.
    
    Updates #16111.
    Updates #10122.
    
    Change-Id: Iba86de57c24100adecac9cb5892ce180126c0ea6
    Reviewed-on: https://go-review.googlesource.com/25250
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 460d112f6c3716a45e99651ed769e7d8d74aca41
Author: Gleb Stepanov <glebstepanov1992@gmail.com>
Date:   Mon Jul 25 15:53:15 2016 +0300

    runtime: fix typo in comments
    
    Fix typo in word synchronization in comments.
    
    Change-Id: I453b4e799301e758799c93df1e32f5244ca2fb84
    Reviewed-on: https://go-review.googlesource.com/25174
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 8728df645c70e6420eb59e5886bc839022998322
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Apr 24 17:36:41 2016 -0400

    runtime: remove canBackTrace variable from TestGdbPython
    
    The canBackTrace variable is true for all of the architectures
    Go supports and this is likely to remain the case as new
    architectures are added.
    
    Change-Id: I73900c018eb4b2e5c02fccd8d3e89853b2ba9d90
    Reviewed-on: https://go-review.googlesource.com/22423
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0aadaf2ad5fa8cc1c00256840e37f422dda9689f
Author: Michael Pratt <mpratt@google.com>
Date:   Wed Jul 20 22:01:33 2016 -0700

    cmd/pprof: instruction-level granularity in callgrind output
    
    When generating callgrind format output, produce cost lines at
    instruction granularity. This allows visualizers supporting the
    callgrind format to display instruction-level profiling information.
    
    We also need to provide the object file (ob=) in order for tools to find
    the object file to disassemble when displaying assembly.
    
    We opportunistically group cost lines corressponding to the same
    function together, reducing the number of superfluous description lines.
    Subposition compression (relative position numbering) is also used to
    reduce the output size.
    
    Change-Id: Id8e960b81dc7a47ec1dfbae877521f76972431c4
    Reviewed-on: https://go-review.googlesource.com/23781
    Run-TryBot: Michael Pratt <mpratt@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Raul Silvera <rsilvera@google.com>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f64c67018103c200c9e150ac5f1199a3175f54a6
Author: Filippo Valsorda <hi@filippo.io>
Date:   Tue May 24 12:50:38 2016 +0100

    cmd/trace: add option to output pprof files
    
    The trace tool can generate some interesting profiles, but it was only
    exposing them as svg through the web UI.  This adds command line options
    to generate the raw pprof file.
    
    Change-Id: I52e4f909fdca6f65c3616add444e3892783640f4
    Reviewed-on: https://go-review.googlesource.com/23324
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 7f6eadb64fb16e73b15630dd3089edc568d047cb
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Oct 11 14:20:50 2016 -0700

    syscall: unify TimespecToNsec and TimevalToNsec
    
    All implementations of these functions are identical.
    
    Change-Id: I7cbea53c02bb0cee75e30beed19d29ba0a7ef657
    Reviewed-on: https://go-review.googlesource.com/30819
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e1fc292500aa70c265937aebad00ac010031cbaf
Author: James Clarke <jrtc27@jrtc27.com>
Date:   Tue Oct 11 19:08:45 2016 +0100

    debug/elf: add sparc64 relocations
    
    Change-Id: I1a2504ad9ca8607588d2d366598115fe360435b5
    Reviewed-on: https://go-review.googlesource.com/30870
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 35220534d5edbbbcd0eed59133bcfae54d140287
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Oct 10 18:23:56 2016 -0700

    archive/zip: only use Extended Timestamp on non-zero MS-DOS timestamps
    
    We should preserve the fact that a roundtrip read on fields with the zero
    value should remain the zero for those that are reasonable to stay that way.
    If the zero value for a MS-DOS timestamp was used, then it is sensible for
    that zero value to also be read back later.
    
    Fixes #17403
    
    Change-Id: I32c3915eab180e91ddd2499007374f7b85f0bd76
    Reviewed-on: https://go-review.googlesource.com/30811
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 303b69feb7b26b583b53a3a82d824088064bbf2b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 11 11:34:20 2016 -0700

    cmd/compile, runtime: stop padding stackmaps to 4 bytes
    
    Shrinks cmd/go's text segment by 0.9%.
    
       text    data     bss     dec     hex filename
    6447148  231643  146328 6825119  68249f go.before
    6387404  231643  146328 6765375  673b3f go.after
    
    Change-Id: I431e8482dbb11a7c1c77f2196cada43d5dad2981
    Reviewed-on: https://go-review.googlesource.com/30817
    Reviewed-by: Austin Clements <austin@google.com>

commit 943f5afe22c1a07da8954756a3701ac765bbf3c1
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 11 10:23:14 2016 -0700

    cmd/compile: refactor stackmap dumping code
    
    Also, fix a byte-ordering problem with stack maps for assembly
    function signatures on big-endian targets.
    
    Change-Id: I6e8698f5fbb04b31771a65f4a8f3f9c045ff3c98
    Reviewed-on: https://go-review.googlesource.com/30816
    Reviewed-by: Austin Clements <austin@google.com>

commit 15817e409bce6eeaa7ea2ae158db6ce4618f27f2
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Oct 6 15:06:45 2016 -0400

    cmd/compile: make link register allocatable in non-leaf functions
    
    We save and restore the link register in non-leaf functions because
    it is clobbered by CALLs. It is therefore available for general
    purpose use.
    
    Only enabled on s390x currently. The RC4 benchmarks in particular
    benefit from the extra register:
    
    name     old speed     new speed     delta
    RC4_128  243MB/s ± 2%  341MB/s ± 2%  +40.46%  (p=0.008 n=5+5)
    RC4_1K   267MB/s ± 0%  359MB/s ± 1%  +34.32%  (p=0.008 n=5+5)
    RC4_8K   271MB/s ± 0%  362MB/s ± 0%  +33.61%  (p=0.008 n=5+5)
    
    Change-Id: Id23bff95e771da9425353da2f32668b8e34ba09f
    Reviewed-on: https://go-review.googlesource.com/30597
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 809a1de1ac1ccc76f7a4faf630017626f2f68231
Author: Adam Langley <agl@golang.org>
Date:   Mon Oct 10 16:26:51 2016 -0700

    crypto/x509: parse all names in an RDN.
    
    The Subject and Issuer names in a certificate look like they should be a
    list of key-value pairs. However, they're actually a list of lists of
    key-value pairs. Previously we only looked at the first element of each
    sublist and the vast majority of certificates only have one element per
    sublist.
    
    However, it's possible to have multiple elements and some 360
    certificates from the “Pilot” log are so constructed.
    
    This change causes all elements of the sublists to be processed.
    
    Fixes #16836.
    
    Change-Id: Ie0a5159135b08226ec517fcf251aa17aada37857
    Reviewed-on: https://go-review.googlesource.com/30810
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c5368123fedba827967628943bf45ed3d1d369ac
Author: Hajime Hoshi <hajimehoshi@gmail.com>
Date:   Sun Oct 9 01:09:52 2016 +0900

    cmd/compile: remove redundant function idom
    
    Change-Id: Ib14b5421bb5e407bbd4d3cbfc68c92d3dd257cb1
    Reviewed-on: https://go-review.googlesource.com/30732
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit f1eed92fd04cc93db44655a5a1870d361c9c5137
Author: David Chase <drchase@google.com>
Date:   Sat Oct 8 16:45:58 2016 -0400

    cmd/compile: escape analysis needs to run "flood" to fixed point
    
    In some cases the members of the root set from which flood
    runs themselves escape, without their referents being also
    tagged as escaping.  Fix this by reflooding from those roots
    whose escape increases, and also enhance the "leak" test to
    include reachability from a heap-escaped root.
    
    Fixes #17318.
    
    Change-Id: Ied1e75cee17ede8ca72a8b9302ce8201641ec593
    Reviewed-on: https://go-review.googlesource.com/30693
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 88562dc83ecc3e0c5ce85f22356cb7114e4756df
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 10 16:03:13 2016 -0400

    math/big: move ProbablyPrime into its own source file
    
    A later CL will be adding more code here.
    It will help to keep it separate from the other code.
    
    Change-Id: I971ba53de819cd10991b51fdec665984939a5f9b
    Reviewed-on: https://go-review.googlesource.com/30709
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9927f25d711ec7aa0876e33e3bd174e09cc032bd
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 10 16:45:30 2016 -0400

    math/big: test and optimize Exp(2, y, n) for large y, odd n
    
    The Montgomery multiply code is applicable to this case
    but was being bypassed. Don't do that.
    
    The old test len(x) > 1 was really just a bad approximation to x > 1.
    
    name    old time/op  new time/op  delta
    Exp-8   5.56ms ± 4%  5.73ms ± 3%     ~     (p=0.095 n=5+5)
    Exp2-8  7.59ms ± 1%  5.66ms ± 1%  -25.40%  (p=0.008 n=5+5)
    
    This comes up especially when doing Fermat (Miller-Rabin)
    primality tests with base 2.
    
    Change-Id: I4cc02978db6dfa93f7f3c8f32718e25eedb4f5ed
    Reviewed-on: https://go-review.googlesource.com/30708
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9a8832f1422f7fa72e4855757e4a951957cc62ae
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 10 16:44:53 2016 -0400

    math/big: move exhaustive tests behind -long flag
    
    This way you can still run 'go test' or 'go bench -run Foo'
    without wondering why it is taking so very long.
    
    Change-Id: Icfa097a6deb1d6682acb7be9f34729215c29eabb
    Reviewed-on: https://go-review.googlesource.com/30707
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 2756d56c894e5b044907da74b6d5f3c684eab00d
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Oct 6 15:43:47 2016 -0400

    cmd/compile: intrinsify math/big.mulWW, divWW on AMD64
    
    Change-Id: I59f7afa7a5803d19f8b21fe70fc85ef997bb3a85
    Reviewed-on: https://go-review.googlesource.com/30542
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 7c431cb7f9780fcaf58b9ef07028d5129e1e5fe7
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Sep 14 14:47:12 2016 -0400

    cmd/link: insert trampolines for too-far jumps on ARM
    
    ARM direct CALL/JMP instruction has 24 bit offset, which can only
    encodes jumps within +/-32M. When the target is too far, the top
    bits get truncated and the program jumps wild.
    
    This CL detects too-far jumps and automatically insert trampolines,
    currently only internal linking on ARM.
    
    It is necessary to make the following changes to the linker:
    - Resolve direct jump relocs when assigning addresses to functions.
      this allows trampoline insertion without moving all code that
      already laid down.
    - Lay down packages in dependency order, so that when resolving a
      inter-package direct jump reloc, the target address is already
      known. Intra-package jumps are assumed never too far.
    - a linker flag -debugtramp is added for debugging trampolines:
        "-debugtramp=1 -v" prints trampoline debug message
        "-debugtramp=2"    forces all inter-package jump to use
                           trampolines (currently ARM only)
        "-debugtramp=2 -v" does both
    - Some data structures are changed for bookkeeping.
    
    On ARM, pseudo DIV/DIVU/MOD/MODU instructions now clobber R8
    (unfortunate). In the standard library there is no ARM assembly
    code that uses these instructions, and the compiler no longer emits
    them (CL 29390).
    
    all.bash passes with -debugtramp=2, except a disassembly test (this
    is unavoidable as we changed the instruction).
    
    TBD: debug info of trampolines?
    
    Fixes #17028.
    
    Change-Id: Idcce347ea7e0af77c4079041a160b2f6e114b474
    Reviewed-on: https://go-review.googlesource.com/29397
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d03e8b226cd11692ca9505a815af559ce7989700
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Oct 4 07:11:55 2016 -0700

    runtime: record current PC for SIGPROF on non-Go thread
    
    If we get a SIGPROF on a non-Go thread, and the program has not called
    runtime.SetCgoTraceback so we have no way to collect a stack trace, then
    record a profile that is just the PC where the signal occurred. That
    will at least point the user to the right area.
    
    Retrieving the PC from the sigctxt in a signal handler on a non-G thread
    required marking a number of trivial sigctxt methods as nosplit, and,
    for extra safety, nowritebarrierrec.
    
    The test shows that the existing test CgoPprofThread test does not test
    the stack trace, just the profile signal. Leaving that for later.
    
    Change-Id: I8f8f3ff09ac099fc9d9df94b5a9d210ffc20c4ab
    Reviewed-on: https://go-review.googlesource.com/30252
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit c24cc40075d77b96bbf1f217dcdcff651229e89b
Author: Hyang-Ah (Hana) Kim <hyangah@gmail.com>
Date:   Mon Aug 8 17:24:07 2016 -0400

    cmd/trace: fix a runnable goroutine count bug
    
    When starting tracing, EvGoCreate events are added for existing
    goroutines that may have been blocking in syscall. EvGoCreate
    increments the runnable goroutine count. This change makes the
    following EvGoInSyscall event decrement the runnable goroutine count
    because we now know that goroutine is in syscall, and not runnable.
    
    Made generateTrace return an error, at any given time, the number
    of runnable/running/insyscall goroutines becomes non-negative.
    
    Added a basic test that checks the number of runnable/running
    goroutines don't include the goroutines in syscall - the test failed
    before this change.
    
    Change-Id: Ib732c382e7bd17158a437576f9d589ab89097ce6
    Reviewed-on: https://go-review.googlesource.com/25552
    Run-TryBot: Hyang-Ah Hana Kim <hyangah@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit dd307da10c3582c195928d9bf073d1b0b01f2135
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Tue Oct 11 14:24:59 2016 +1100

    runtime/cgo: do not explicitly link msvcrt.dll
    
    CL 14472 solved issue #12030 by explicitly linking msvcrt.dll
    to every cgo executable we build. This CL achieves the same
    by manually loading ntdll.dll during startup.
    
    Updates #12030
    
    Change-Id: I5d9cd925ef65cc34c5d4031c750f0f97794529b2
    Reviewed-on: https://go-review.googlesource.com/30737
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 8f65379f947f77f5caadf283f219b2cc6e9bdb84
Author: John Dethridge <jcd@golang.org>
Date:   Fri Oct 7 15:06:09 2016 +1100

    cmd/link: more efficient encoding of DWARF line number information
    
    The (pc, line) deltas in the line number information are currently encoded
    either with a special opcode, or with a triplet of DW_LNS_advance_pc,
    DW_LNS_advance_line, and DW_LNS_copy instructions.  Instead of DW_LNS_copy,
    this change always uses a special opcode, which can make DW_LNS_advance_pc or
    DW_LNS_advance_line unnecessary, or make their operands take fewer bytes.  It
    chooses the special opcode so that the encoding of the remaining deltas is as
    small as possible.
    
    Use DW_LNS_const_add_pc or DW_LNS_fixed_advance_pc instead of DW_LNS_advance_pc
    for deltas where they save a byte.
    
    Update LINE_BASE and LINE_RANGE constants to optimal values for this strategy.
    
    This reduces line number information by about 35% and total size by about 2%
    for a typical binary.
    
    Change-Id: Ia61d6bf19c95c1d34ba63c67ed32b376beda225f
    Reviewed-on: https://go-review.googlesource.com/30577
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3a9072829e7d315ecda030281b622632c1bbe1b6
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 6 22:42:20 2016 -0400

    math/big: make division faster
    
    - Add new BenchmarkQuoRem.
    - Eliminate allocation in divLarge nat pool
    - Unroll mulAddVWW body 4x
    - Remove some redundant slice loads in divLarge
    
    name      old time/op  new time/op  delta
    QuoRem-8  2.18µs ± 1%  1.93µs ± 1%  -11.38%  (p=0.000 n=19+18)
    
    The starting point in the comparison here is Cherry's
    pending CL to turn mulWW and divWW into intrinsics.
    The optimizations in divLarge work best because all
    the function calls are gone. The effect of this CL is not
    as large if you don't assume Cherry's CL.
    
    Change-Id: Ia6138907489c5b9168497912e43705634e163b35
    Reviewed-on: https://go-review.googlesource.com/30613
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 68331750dac5a38c5158f57ab19e3e99d11a59e3
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Oct 3 23:01:26 2016 -0400

    cmd/compile: remove some write barriers for stack writes
    
    This, along with CL 30140, removes ~50% of stack write barriers
    mentioned in issue #17330. The remaining are most due to Phi and
    FwdRef, which is not resolved when building SSA. We might be
    able to do it at a later stage where Phi and Copy propagations
    are done, but matching an if-(store-store-call)+ sequence seems
    not very pleasant.
    
    Updates #17330.
    
    Change-Id: Iaa36c7b1f4c4fc3dc10a27018a3b0e261094cb21
    Reviewed-on: https://go-review.googlesource.com/30290
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 2f0b8f88df33ca48494a90eea705ad092322a1ca
Author: David Chase <drchase@google.com>
Date:   Wed Oct 5 13:21:09 2016 -0700

    cmd/compile: PPC64, elide unnecessary sign extension
    
    Inputs to store[BHW] and cmpW(U) need not be correct
    in more bits than are used by the instruction.
    
    Added a pattern tailored to what appears to be cgo boilerplate.
    Added a pattern (also seen in cgo boilerplate and hashing)
    to replace {EQ,NE}-CMP-ANDconst with {EQ-NE}-ANDCCconst.
    Added a pattern to clean up ANDconst shift distance inputs
    (this was seen in hashing).
    
    Simplify repeated and,or,xor.
    
    Fixes #17109.
    
    Change-Id: I68eac83e3e614d69ffe473a08953048c8b066d88
    Reviewed-on: https://go-review.googlesource.com/30455
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 672e57944458fc3c5f5ee1dd11d4f32d1aeaebe1
Author: Tal Shprecher <tshprecher@gmail.com>
Date:   Wed Jul 13 12:29:39 2016 -0600

    cmd/compile: avoid leak of dottype expression on double assignment form
    
    This is a followup to issue #13805. That change avoid leaks for types that
    don't have any pointers for the single assignment form of a dottype expression.
    This does the same for the double assignment form.
    
    Fixes #15796
    
    Change-Id: I27474cade0ff1f3025cb6392f47b87b33542bc0f
    Reviewed-on: https://go-review.googlesource.com/24906
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 795289b114e4dd4f69eaa7f74cb9eb7b6f963fff
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Oct 9 21:03:00 2016 -0700

    net/http: fix typo in server commont
    
    Change-Id: I5b04ba7e12eff933fc67eb7a1cbdfde536e4db88
    Reviewed-on: https://go-review.googlesource.com/30722
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 334cbe3bc81e2f3a6c968877b1ae170547989f1e
Author: Anmol Sethi <anmol@aubble.com>
Date:   Sat Oct 8 16:07:40 2016 -0400

    io: simplified a small part of copyBuffer
    
    Change-Id: I0b7052103174f0864ee9714f76f8f78f2a988777
    Reviewed-on: https://go-review.googlesource.com/30719
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5f1a013ea7e755e963518cc6c17a17a270041864
Author: Quentin Renard <contact@asticode.com>
Date:   Thu Oct 6 22:47:53 2016 +0200

    net/http: Add missing tests for parsePostForm
    
    Renamed TestPOSTQuery to TestParseFormQuery and added testing
    for the ";" delimiter, an empty key, an empty value and an
    empty key + value.
    
    Also added TestParseFormQueryMethods to make sure forms sent in
    PATCH and PUT (and no others) request  are parsed correctly in
    ParseForm.
    
    Fixes #17368
    
    Change-Id: I445aad324ffc7b38d179ea41953bffbac0cddffe
    Reviewed-on: https://go-review.googlesource.com/30555
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f13372c9f7df12bfa4fbba5d9802f17fd186a0bc
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sun Oct 9 11:50:21 2016 -0400

    cmd/internal/obj/s390x: remove support for stores of global addresses
    
    This CL removes support for MOVD instructions that store the address
    of a global variable. For example:
    
      MOVD $main·a(SB), (R1)
      MOVD $main·b(SB), main·c(SB)
    
    These instructions are emulated and the new backend doesn't need them
    (the stores now always go through an intermediate register).
    
    Change-Id: I3a1bcb3f19c5096ad0426afd76d35a4d7975733b
    Reviewed-on: https://go-review.googlesource.com/30720
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0ff40a76ad81e2b02c24e83eee8aa93352498f6f
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Mon May 30 00:41:03 2016 -0700

    crypto/x509: check that the issuer name matches the issuer's subject name.
    
    Fixes #14955.
    
    Change-Id: I157432584bb51088bec565f6bb9e64348345cff9
    Reviewed-on: https://go-review.googlesource.com/23571
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>

commit 13c829e5f6c541359c7bb213774ef9bbba9ddb77
Author: Wedson Almeida Filho <wedsonaf@google.com>
Date:   Tue May 3 00:28:23 2016 +0100

    cmd/internal/obj/x86: On amd64, relocation type for and indirect call is pc-relative.
    
    With this change, the code in bug #15609 compiles and runs properly:
    
    0000000000401070 <main.jump>:
      401070:       ff 15 aa 7e 06 00       callq  *0x67eaa(%rip)        # 468f20 <main.pointer>
      401076:       c3                      retq
    
    0000000000468f20 g     O .rodata        0000000000000008 main.pointer
    
    Fixes #15609
    
    Change-Id: Iebb4d5a9f9fff335b693f4efcc97882fe04eefd7
    Reviewed-on: https://go-review.googlesource.com/22950
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit d5a8b9f57157e64b894ef9a1f48418f45ff7984c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Oct 9 10:20:39 2016 -0700

    doc: update go1.8.txt using new tool
    
    With help of a new interactive commit classifier tool (tool location
    TBD, likely x/build/cmd/writenotes), classify all commits from go1.7
    up to 56d35d4.
    
    We can selectively cull this list later. When in doubt, I erred on the
    side of inclusion for now.
    
    Change-Id: I458945004e1b1a148fb2f294b454a390ef4f92c2
    Reviewed-on: https://go-review.googlesource.com/30696
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 56d35d42e188b8767665a368384e084da50ef634
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Fri Oct 7 21:27:32 2016 -0700

    compress/gzip: document Reader.Read
    
    Fixes #17374.
    
    Change-Id: Ic89c35aaa31f35a8a4e3ffa09f49b68f08127625
    Reviewed-on: https://go-review.googlesource.com/30718
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 9b6ced931eb5cbde677877adcf59b0a4b8422300
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Oct 8 07:24:45 2016 +0900

    vendor: update vendored lif
    
    Updates golang_org/x/net/lif to rev 084869a for:
    - lif: rename internal types and constants generated by cgo
    
    Change-Id: Icf478d60f5ef35800966c62dcf046f7fe50204ff
    Reviewed-on: https://go-review.googlesource.com/30731
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b108009d00e55c34486541202dc11ab5cb06b63f
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Oct 8 07:22:47 2016 +0900

    vendor: update vendored route
    
    Updates golang_org/x/net/route to rev f09c466 for:
    - route: fix typo
    - route: test helper code cleanup
    
    Change-Id: If39f0e947dc56f3b0f38190035d2f47c8d847c74
    Reviewed-on: https://go-review.googlesource.com/30730
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 45b26a93f31071deee38b6579da34c2ebe98b978
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Oct 7 14:29:55 2016 -0400

    cmd/{asm,compile}: replace TESTB op with CMPWconst on s390x
    
    TESTB was implemented as AND $0xff, Rx, REGTMP. Unfortunately there
    is no 3-operand AND-with-immediate instruction and so it was emulated
    by the assembler using two instructions.
    
    This CL uses CMPW instead of AND and also optimizes CMPW to use
    the chi instruction where possible.
    
    Overall this CL reduces the size of the .text section of the
    bin/go binary by ~2%.
    
    Change-Id: Ic335c29fc1129378fcbb1265bfb10f5b744a0f3f
    Reviewed-on: https://go-review.googlesource.com/30690
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f4e37c8ec5f54964221fc950c2f0260140f438d8
Author: Keith Randall <khr@golang.org>
Date:   Fri Oct 7 10:08:10 2016 -0700

    cmd/compile: use standard dom tree in nilcheckelim
    
    No need to build a bespoke dom tree here when we might
    have one cached already.  The allocations for the dom tree
    were also more expensive than they needed to be.
    
    Fixes #12021
    
    Change-Id: I6a967880aee03660ad6fc293f8fc783779cae11d
    Reviewed-on: https://go-review.googlesource.com/30671
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 433be563b6246eb132aed6e9e58f46a0d46f7010
Author: Andrew Pogrebnoy <absourd.noise@gmail.com>
Date:   Tue Oct 4 02:39:33 2016 +0300

    cmd/compile: fix choice of phi building algorithm
    
    The algorithm for placing a phi nodes in small functions now
    unreachable. This patch fix that.
    
    Change-Id: I253d745b414fa12ee0719459c28e78a69c6861ae
    Reviewed-on: https://go-review.googlesource.com/30106
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 94589054d3ed88c049fbe468d58b995e0e154f1d
Author: Austin Clements <austin@google.com>
Date:   Thu Sep 29 11:59:56 2016 -0400

    cmd/trace: label mark termination spans as such
    
    Currently these are labeled "MARK", which was accurate in the STW
    collector, but these really indicate mark termination now, since
    marking happens for the full duration of the concurrent GC. Re-label
    them as "MARK TERMINATION" to clarify this.
    
    Change-Id: Ie98bd961195acde49598b4fa3f9e7d90d757c0a6
    Reviewed-on: https://go-review.googlesource.com/30018
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit eed309f5fb223a879630e9dced8c44c2b049cf71
Author: Austin Clements <austin@google.com>
Date:   Thu Sep 29 11:53:42 2016 -0400

    cmd/trace: move process-wide GC events to their own row
    
    Currently, the process-wide GC state is attributed to the P that
    happened to perform the allocation that exceeded the GC trigger. This
    is pretty arbitrary and makes it hard to see when GC is running since
    the GC spans are intermingled with a lot of other trace noise.
    
    The current display is particularly confusing because it creates three
    sub-rows in the P row that can overlap each other. Usually a P has
    just two sub-rows: one showing the current G and another showing that
    G's activity. However, because GC is attributed to a proc, it winds up
    as a third row that neither subsumes nor is subsumed by any other row.
    This in turn screws up the trace's layout and results in overlapping
    events.
    
    Fix these problems by creating a new dedicated row like the existing
    "Network" and "Timer" rows and displaying process-wide GC events in
    this row. Mark termination and sweep events still appear in their
    respective P rows because these are meaningfully attributed.
    
    Change-Id: Ie1a1c6cf8c446e4b043f10f3968f91ff1b546d15
    Reviewed-on: https://go-review.googlesource.com/30017
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit fa9b57bb1d84bf81b49346341ad14297d0195187
Author: Austin Clements <austin@google.com>
Date:   Thu Sep 29 11:46:53 2016 -0400

    runtime: make next_gc ^0 when GC is disabled
    
    When GC is disabled, we set gcpercent to -1. However, we still use
    gcpercent to compute several values, such as next_gc and gc_trigger.
    These calculations are meaningless when gcpercent is -1 and result in
    meaningless values. This is okay in a sense because we also never use
    these values if gcpercent is -1, but they're confusing when exposed to
    the user, for example via MemStats or the execution trace. It's
    particularly unfortunate in the execution trace because it attempts to
    plot the underflowed value of next_gc, which scales all useful
    information in the heap row into oblivion.
    
    Fix this by making next_gc ^0 when gcpercent < 0. This has the
    advantage of being true in a way: next_gc is effectively infinite when
    gcpercent < 0. We can also detect this special value when updating the
    execution trace and report next_gc as 0 so it doesn't blow up the
    display of the heap line.
    
    Change-Id: I4f366e4451f8892a4908da7b2b6086bdc67ca9a9
    Reviewed-on: https://go-review.googlesource.com/30016
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit f8a0c15e902cc6555610a32a6dbf36f4ff2c2682
Author: Keith Randall <khr@golang.org>
Date:   Fri Oct 7 10:10:55 2016 -0700

    test: re-enable live2 test on amd64
    
    Not sure why it was ever disabled (early SSA work?) but it passes now.
    
    Change-Id: I76439cacdbd286ce077f7e08c4d0663396a0cd8f
    Reviewed-on: https://go-review.googlesource.com/30672
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 93d5f43a29dea00a5dffd1fa8faed911a31b55fb
Author: Keith Randall <khr@golang.org>
Date:   Fri Oct 7 09:35:04 2016 -0700

    cmd/compile: do regalloc check only when checkEnabled
    
    No point doing this check all the time.
    
    Fixes #15621
    
    Change-Id: I1966c061986fe98fe9ebe146d6b9738c13cef724
    Reviewed-on: https://go-review.googlesource.com/30670
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0db9518ab30f35c7c185aed337037e8305a98b34
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 6 17:08:44 2016 -0400

    fmt: document and adjust Scanf space handling to eliminate a few paradoxes
    
    This CL makes minor adjustment to the handling of spaces and newlines
    and then documents the result.
    
    The semantic adjustment mainly concerns the handling of a run of
    spaces following a newline in the format, like in "\n ".
    Previously, that run of spaces was ignored entirely, leading to paradoxes
    like the format "1 \n 2" not matching itself as input.
    Now, spaces following a newline in the format match zero or more
    spaces following the corresponding newline in the input.
    
    The changes to the test suite show how minor the semantic adjustments are
    and how they make the behavior more regular than previously.
    
    This CL also updates the documentation to explain the handling of
    spaces more precisely, incorporating the draft from CL 17723 but
    describing the newly introduced behavior.
    
    Fixes #13565.
    
    Change-Id: I129666e9ba42de3c28b67f75cb47488e9a4c1867
    Reviewed-on: https://go-review.googlesource.com/30611
    Reviewed-by: Rob Pike <r@golang.org>

commit 23606c6fc4ed21d563f8e9a49b2ed6e18489e222
Author: Russ Cox <rsc@golang.org>
Date:   Thu Dec 10 21:43:51 2015 -0500

    fmt: add tests showing current Scanf space handling
    
    There are no semantic changes here, just tests to establish
    the status quo. A followup CL will make some semantic changes,
    the (limited) scope of which should be clear from the number of
    tests that change.
    
    For #13565.
    
    Change-Id: I960749cf59d4dfe39c324875bcc575096654f883
    Reviewed-on: https://go-review.googlesource.com/30610
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 78a267e3796e5f0a9939b1152576a072de1a2669
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Oct 6 15:50:47 2016 -0700

    cmd/compile: cache pointer and slice types
    
    Anonymous pointer and slice types are very common and identical
    anyway, so just reuse them rather than allocating new ones everywhere
    they appear.
    
    Turns out to be a small code/stack size win because SSA relies on
    gc.Type identity for reusing temporary stack slots:
    
       text    data     bss     dec     hex filename
    6453005  231643  146328 6830976  683b80 go.old
    6446660  231643  146328 6824631  6822b7 go.new
    
    Saves on memory usage during compile time too, and maybe a small CPU
    time win, but the benchmarks are pretty noisy:
    
    name       old time/op     new time/op     delta
    Template       342ms ± 8%      339ms ± 9%    ~           (p=0.332 n=99+99)
    Unicode        183ms ± 9%      181ms ±11%    ~           (p=0.274 n=95+98)
    GoTypes        1.05s ± 4%      1.04s ± 3%  -1.22%        (p=0.000 n=97+95)
    Compiler       4.49s ± 7%      4.46s ± 6%    ~           (p=0.058 n=96+91)
    
    name       old user-ns/op  new user-ns/op  delta
    Template        520M ±17%       522M ±20%    ~          (p=0.544 n=98+100)
    Unicode         331M ±27%       327M ±30%    ~           (p=0.615 n=98+98)
    GoTypes        1.54G ±10%      1.53G ±12%    ~          (p=0.173 n=99+100)
    Compiler       6.33G ±10%      6.33G ±10%    ~           (p=0.682 n=98+98)
    
    name       old alloc/op    new alloc/op    delta
    Template      44.5MB ± 0%     44.1MB ± 0%  -0.80%        (p=0.000 n=97+99)
    Unicode       37.5MB ± 0%     37.3MB ± 0%  -0.44%       (p=0.000 n=98+100)
    GoTypes        126MB ± 0%      124MB ± 0%  -1.41%        (p=0.000 n=98+99)
    Compiler       518MB ± 0%      508MB ± 0%  -1.90%       (p=0.000 n=98+100)
    
    name       old allocs/op   new allocs/op   delta
    Template        441k ± 0%       434k ± 0%  -1.76%       (p=0.000 n=100+97)
    Unicode         368k ± 0%       365k ± 0%  -0.69%        (p=0.000 n=99+99)
    GoTypes        1.26M ± 0%      1.23M ± 0%  -2.27%       (p=0.000 n=100+99)
    Compiler       4.60M ± 0%      4.46M ± 0%  -2.96%       (p=0.000 n=100+99)
    
    Change-Id: I94abce5c57aed0f9c48f567b3ac24c627d4c7c91
    Reviewed-on: https://go-review.googlesource.com/30632
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 15937ccb8915ef941e08feb2500f5acf61bd5427
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Oct 6 15:14:58 2016 -0700

    runtime: fix sigset type for ppc64 big-endian GNU/Linux
    
    On 64-bit big-endian GNU/Linux machines we need to treat sigset as a
    single uint64, not as a pair of uint32 values. This fix was already made
    for s390x, but not for ppc64 (which is big-endian--the little endian
    version is known as ppc64le). So copy os_linux_390.x to
    os_linux_be64.go, and use build constraints as needed.
    
    Fixes #17361
    
    Change-Id: Ia0eb18221a8f5056bf17675fcfeb010407a13fb0
    Reviewed-on: https://go-review.googlesource.com/30602
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a016ecfdcbc266f45f33350238777fba9a391b8d
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Oct 5 15:59:09 2016 -0700

    spec: clarify acceptable indices in array/slice composite literals
    
    This simply documents the status quo accepted by cmd/compile, gccgo,
    and go/types. The new language matches the language used for indices
    of index expressions for arrays and slices.
    
    Fixes #16679.
    
    Change-Id: I65447889fbda9d222f2a9e6c10334d1b38c555f0
    Reviewed-on: https://go-review.googlesource.com/30474
    Reviewed-by: Rob Pike <r@golang.org>

commit 95a6572b2b84e8cbfd821c4e5f774f20d37c007e
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Oct 5 15:01:15 2016 -0700

    math/big: Rat.SetString to report error if input is not consumed entirely
    
    Also, document behavior explicitly for all SetString implementations.
    
    Fixes #17001.
    
    Change-Id: Iccc882b4bc7f8b61b6092f330e405c146a80dc98
    Reviewed-on: https://go-review.googlesource.com/30472
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 4103fedf199dbc80c11455ffe75e3ecf89c77da5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Oct 6 19:06:49 2016 +0000

    runtime: skip gdb tests on linux/ppc64 for now
    
    Updates #17366
    
    Change-Id: Ia4bd3c74c48b85f186586184a7c2b66d3b80fc9c
    Reviewed-on: https://go-review.googlesource.com/30596
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 7b4a2246670b4ec5a19214f8290fce21173f6b14
Author: Alexander Döring <email@alexd.ch>
Date:   Thu Oct 6 20:46:50 2016 +0200

    math/cmplx: add examples for Abs, Exp, Polar
    
    Updates #16360
    
    Change-Id: I941519981ff5bda3a113e14fa6be718eb4d2bf83
    Reviewed-on: https://go-review.googlesource.com/30554
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1c09b4dde645b63b34673d0b2c93f4371f7f19df
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Oct 6 18:22:19 2016 +0000

    time: document that calendrical calculations are with no leap seconds
    
    Fixes #15247
    
    Change-Id: I942fb2eacd1b54bab66cc147a6b047a3ffce0b84
    Reviewed-on: https://go-review.googlesource.com/30595
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 4c79ed5f4483f1de065ba2b409de58ae2b6907d2
Author: Yasuhiro Matsumoto <mattn.jp@gmail.com>
Date:   Wed Jan 6 21:36:31 2016 +0900

    archive/zip: handle mtime in NTFS/UNIX/ExtendedTS extra fields
    
    Handle NTFS timestamp, UNIX timestamp, Extended extra timestamp.
    Writer supports only Extended extra timestamp field, matching most
    zip creators.
    
    Fixes #10242.
    
    Change-Id: Id665db274e63def98659231391fb77392267ac1e
    Reviewed-on: https://go-review.googlesource.com/18274
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 122abe6b122a885c52a53044eedbd3b6905b6124
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Oct 6 13:49:57 2016 -0400

    cmd/compile: fold extensions into constants on s390x
    
    We insert extensions when lowering comparisons and they were
    blocking constant folding.
    
    Change-Id: I804bbf91c7606612ffe921a90853844a57e55955
    Reviewed-on: https://go-review.googlesource.com/30541
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b4f3c9339e77e70cbd5b81ef7f2a4dec557d40de
Author: Simon Rawet <simon@rawet.se>
Date:   Sat May 28 16:46:45 2016 +0200

    time: fix AddDate with nil location
    
    AddDate now retrieves location from t.Location() to ensure that
    it never calls Date with a nil location.
    
    Added test for this bug on all Time's methods
    
    Fixes #15852
    
    Change-Id: Id2a222af56993f741ad0b802a2c3b89e8e463926
    Reviewed-on: https://go-review.googlesource.com/23561
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>

commit c79ba22ece2cbb86b00325df7712ff0803cfd6e9
Author: David Chase <drchase@google.com>
Date:   Thu Oct 6 11:08:11 2016 -0700

    test: delete sliceopt.go
    
    It tests the behavior of the old deleted compiler.
    
    Fixes #17362.
    
    Change-Id: Ia2fdec734c5cbe724a9de562ed71598f67244ab3
    Reviewed-on: https://go-review.googlesource.com/30593
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fc47ee23322d668b3b023cd8c1d3541b1ad9703e
Author: Hajime Hoshi <hajimehoshi@gmail.com>
Date:   Fri Oct 7 02:06:33 2016 +0900

    cmd/compile/internal/gc: unexport global variable Pc
    
    Change-Id: Id2a9fc1e9e70eaf5f25ddc7476061e06abcf60e4
    Reviewed-on: https://go-review.googlesource.com/30573
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 33faa4ebb9aedbe821b57b9c645d3be72100ebe3
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Oct 5 15:25:28 2016 -0700

    go/importer: better error messages when export data is not found
    
    Fixes #17281.
    
    Change-Id: I4e639998dbe3baa98879f1becc37d7c4d19351e7
    Reviewed-on: https://go-review.googlesource.com/30473
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 8aadcc551e1610d4185c36624c8105f4303fe7ec
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Oct 6 10:16:17 2016 -0400

    cmd/compile: intrinsify math.Sqrt when compiling "math" itself
    
    Fixes #17354.
    
    Change-Id: I0e018c8c3e791fc6cc1925dbbc18c2151ba9a111
    Reviewed-on: https://go-review.googlesource.com/30539
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 4f3a641e6e44fab414f7e384ac55e5b9e8d6fc7e
Author: Russ Cox <rsc@golang.org>
Date:   Thu Oct 6 10:39:50 2016 -0400

    math: fix Gamma(-171.5) on all platforms
    
    Using 387 mode was computing it without underflow to zero,
    apparently due to an 80-bit intermediate. Avoid underflow even
    with 64-bit floats.
    
    This eliminates the TODOs in the test suite.
    
    Fixes linux-386-387 build and fixes #11441.
    
    Change-Id: I8abaa63bfdf040438a95625d1cb61042f0302473
    Reviewed-on: https://go-review.googlesource.com/30540
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 20c48c9557e8d33e19a7e770d4f045ed548f26a2
Author: Richard Gibson <richard.gibson@gmail.com>
Date:   Mon Mar 28 17:15:01 2016 -0400

    encoding/json: explicitly document and test "-" key tag
    
    Struct fields can be suppressed in JSON serialization by "-" tags, but
    that doesn't preclude generation of "-" object keys.
    Document and verify the mechanism for doing so.
    
    Change-Id: I7f60e1759cfee15cb7b2447cd35fab91c5b004e6
    Reviewed-on: https://go-review.googlesource.com/21204
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 91706c04b93e9f14321a038943829e99dc333794
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Oct 5 23:08:25 2016 -0400

    cmd/asm, cmd/internal/obj/s390x: delete unused instructions
    
    Deletes the following s390x instructions:
    
     - ADDME
     - ADDZE
     - SUBME
     - SUBZE
    
    They appear to be emulated PPC instructions left over from the
    porting process and I don't think they will ever be useful.
    
    Change-Id: I9b1ba78019dbd1218d0c8f8ea2903878802d1990
    Reviewed-on: https://go-review.googlesource.com/30538
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d7507e9d1109da424dd375365dc923257ebd0c23
Author: Denis Nagorny <denis.nagorny@intel.com>
Date:   Thu Sep 22 04:05:39 2016 +0300

        runtime: improve memmove for amd64
    
        Use AVX if available on 4th generation of Intel(TM) Core(TM) processors.
    
        (collected on E5 2609v3 @1.9GHz)
        name                        old speed      new speed       delta
        Memmove/1-6                  158MB/s ± 0%    172MB/s ± 0%    +9.09% (p=0.000 n=16+16)
        Memmove/2-6                  316MB/s ± 0%    345MB/s ± 0%    +9.09% (p=0.000 n=18+16)
        Memmove/3-6                  517MB/s ± 0%    517MB/s ± 0%      ~ (p=0.445 n=16+16)
        Memmove/4-6                  687MB/s ± 1%    690MB/s ± 0%    +0.35% (p=0.000 n=20+17)
        Memmove/5-6                  729MB/s ± 0%    729MB/s ± 0%    +0.01% (p=0.000 n=16+18)
        Memmove/6-6                  875MB/s ± 0%    875MB/s ± 0%    +0.01% (p=0.000 n=18+18)
        Memmove/7-6                 1.02GB/s ± 0%   1.02GB/s ± 1%      ~ (p=0.139 n=19+20)
        Memmove/8-6                 1.26GB/s ± 0%   1.26GB/s ± 0%    +0.00% (p=0.000 n=18+18)
        Memmove/9-6                 1.42GB/s ± 0%   1.42GB/s ± 0%    +0.00% (p=0.000 n=17+18)
        Memmove/10-6                1.58GB/s ± 0%   1.58GB/s ± 0%    +0.00% (p=0.000 n=19+19)
        Memmove/11-6                1.74GB/s ± 0%   1.74GB/s ± 0%    +0.00% (p=0.001 n=18+17)
        Memmove/12-6                1.90GB/s ± 0%   1.90GB/s ± 0%    +0.00% (p=0.000 n=19+19)
        Memmove/13-6                2.05GB/s ± 0%   2.05GB/s ± 0%    +0.00% (p=0.000 n=18+19)
        Memmove/14-6                2.21GB/s ± 0%   2.21GB/s ± 0%    +0.00% (p=0.000 n=16+20)
        Memmove/15-6                2.37GB/s ± 0%   2.37GB/s ± 0%    +0.00% (p=0.004 n=19+20)
        Memmove/16-6                2.53GB/s ± 0%   2.53GB/s ± 0%    +0.00% (p=0.000 n=16+16)
        Memmove/32-6                4.67GB/s ± 0%   4.67GB/s ± 0%    +0.00% (p=0.000 n=17+17)
        Memmove/64-6                8.67GB/s ± 0%   8.64GB/s ± 0%    -0.33% (p=0.000 n=18+17)
        Memmove/128-6               12.6GB/s ± 0%   11.6GB/s ± 0%    -8.05% (p=0.000 n=16+19)
        Memmove/256-6               16.3GB/s ± 0%   16.6GB/s ± 0%    +1.66% (p=0.000 n=20+18)
        Memmove/512-6               21.5GB/s ± 0%   24.4GB/s ± 0%   +13.35% (p=0.000 n=18+17)
        Memmove/1024-6              24.7GB/s ± 0%   33.7GB/s ± 0%   +36.12% (p=0.000 n=18+18)
        Memmove/2048-6              27.3GB/s ± 0%   43.3GB/s ± 0%   +58.77% (p=0.000 n=19+17)
        Memmove/4096-6              37.5GB/s ± 0%   50.5GB/s ± 0%   +34.56% (p=0.000 n=19+19)
        MemmoveUnalignedDst/1-6      135MB/s ± 0%    146MB/s ± 0%    +7.69% (p=0.000 n=16+14)
        MemmoveUnalignedDst/2-6      271MB/s ± 0%    292MB/s ± 0%    +7.69% (p=0.000 n=18+18)
        MemmoveUnalignedDst/3-6      438MB/s ± 0%    438MB/s ± 0%      ~ (p=0.352 n=16+19)
        MemmoveUnalignedDst/4-6      584MB/s ± 0%    584MB/s ± 0%      ~ (p=0.876 n=17+17)
        MemmoveUnalignedDst/5-6      631MB/s ± 1%    632MB/s ± 0%    +0.25% (p=0.000 n=20+17)
        MemmoveUnalignedDst/6-6      759MB/s ± 0%    759MB/s ± 0%    +0.00% (p=0.000 n=19+16)
        MemmoveUnalignedDst/7-6      885MB/s ± 0%    883MB/s ± 1%      ~ (p=0.647 n=18+20)
        MemmoveUnalignedDst/8-6     1.08GB/s ± 0%   1.08GB/s ± 0%    +0.00% (p=0.035 n=19+18)
        MemmoveUnalignedDst/9-6     1.22GB/s ± 0%   1.22GB/s ± 0%      ~ (p=0.251 n=18+17)
        MemmoveUnalignedDst/10-6    1.35GB/s ± 0%   1.35GB/s ± 0%      ~ (p=0.327 n=17+18)
        MemmoveUnalignedDst/11-6    1.49GB/s ± 0%   1.49GB/s ± 0%      ~ (p=0.531 n=18+19)
        MemmoveUnalignedDst/12-6    1.63GB/s ± 0%   1.63GB/s ± 0%      ~ (p=0.886 n=19+18)
        MemmoveUnalignedDst/13-6    1.76GB/s ± 0%   1.76GB/s ± 1%    -0.24% (p=0.006 n=18+20)
        MemmoveUnalignedDst/14-6    1.90GB/s ± 0%   1.90GB/s ± 0%      ~ (p=0.818 n=20+19)
        MemmoveUnalignedDst/15-6    2.03GB/s ± 0%   2.03GB/s ± 0%      ~ (p=0.294 n=17+16)
        MemmoveUnalignedDst/16-6    2.17GB/s ± 0%   2.17GB/s ± 0%      ~ (p=0.602 n=16+18)
        MemmoveUnalignedDst/32-6    4.05GB/s ± 0%   4.05GB/s ± 0%    +0.00% (p=0.010 n=18+17)
        MemmoveUnalignedDst/64-6    7.59GB/s ± 0%   7.59GB/s ± 0%    +0.00% (p=0.022 n=18+16)
        MemmoveUnalignedDst/128-6   11.1GB/s ± 0%   11.4GB/s ± 0%    +2.79% (p=0.000 n=18+17)
        MemmoveUnalignedDst/256-6   16.4GB/s ± 0%   16.7GB/s ± 0%    +1.59% (p=0.000 n=20+17)
        MemmoveUnalignedDst/512-6   15.7GB/s ± 0%   21.3GB/s ± 0%   +35.87% (p=0.000 n=18+20)
        MemmoveUnalignedDst/1024-6  16.0GB/s ±20%   31.5GB/s ± 0%   +96.93% (p=0.000 n=20+14)
        MemmoveUnalignedDst/2048-6  19.6GB/s ± 0%   42.1GB/s ± 0%  +115.16% (p=0.000 n=17+18)
        MemmoveUnalignedDst/4096-6  6.41GB/s ± 0%  33.18GB/s ± 0%  +417.56% (p=0.000 n=17+18)
        MemmoveUnalignedSrc/1-6      171MB/s ± 0%    166MB/s ± 0%    -3.33% (p=0.000 n=19+16)
        MemmoveUnalignedSrc/2-6      343MB/s ± 0%    342MB/s ± 1%    -0.41% (p=0.000 n=17+20)
        MemmoveUnalignedSrc/3-6      508MB/s ± 0%    493MB/s ± 1%    -2.90% (p=0.000 n=17+17)
        MemmoveUnalignedSrc/4-6      677MB/s ± 0%    660MB/s ± 2%    -2.55% (p=0.000 n=17+20)
        MemmoveUnalignedSrc/5-6      790MB/s ± 0%    790MB/s ± 0%      ~ (p=0.139 n=17+17)
        MemmoveUnalignedSrc/6-6      948MB/s ± 0%    946MB/s ± 1%      ~ (p=0.330 n=17+19)
        MemmoveUnalignedSrc/7-6     1.11GB/s ± 0%   1.11GB/s ± 0%    -0.05% (p=0.026 n=17+17)
        MemmoveUnalignedSrc/8-6     1.38GB/s ± 0%   1.38GB/s ± 0%      ~ (p=0.091 n=18+16)
        MemmoveUnalignedSrc/9-6     1.42GB/s ± 0%   1.40GB/s ± 1%    -1.04% (p=0.000 n=19+20)
        MemmoveUnalignedSrc/10-6    1.58GB/s ± 0%   1.56GB/s ± 1%    -1.15% (p=0.000 n=18+19)
        MemmoveUnalignedSrc/11-6    1.73GB/s ± 0%   1.71GB/s ± 1%    -1.30% (p=0.000 n=20+20)
        MemmoveUnalignedSrc/12-6    1.89GB/s ± 0%   1.87GB/s ± 1%    -1.18% (p=0.000 n=17+20)
        MemmoveUnalignedSrc/13-6    2.05GB/s ± 0%   2.02GB/s ± 1%    -1.18% (p=0.000 n=17+20)
        MemmoveUnalignedSrc/14-6    2.21GB/s ± 0%   2.18GB/s ± 1%    -1.14% (p=0.000 n=17+20)
        MemmoveUnalignedSrc/15-6    2.36GB/s ± 0%   2.34GB/s ± 1%    -1.04% (p=0.000 n=17+20)
        MemmoveUnalignedSrc/16-6    2.52GB/s ± 0%   2.49GB/s ± 1%    -1.26% (p=0.000 n=19+20)
        MemmoveUnalignedSrc/32-6    4.82GB/s ± 0%   4.61GB/s ± 0%    -4.40% (p=0.000 n=19+20)
        MemmoveUnalignedSrc/64-6    5.03GB/s ± 4%   7.97GB/s ± 0%   +58.55% (p=0.000 n=20+16)
        MemmoveUnalignedSrc/128-6   11.1GB/s ± 0%   11.2GB/s ± 0%    +0.52% (p=0.000 n=17+18)
        MemmoveUnalignedSrc/256-6   16.5GB/s ± 0%   16.4GB/s ± 0%    -0.10% (p=0.000 n=20+18)
        MemmoveUnalignedSrc/512-6   21.0GB/s ± 0%   22.1GB/s ± 0%    +5.48% (p=0.000 n=14+17)
        MemmoveUnalignedSrc/1024-6  24.9GB/s ± 0%   31.9GB/s ± 0%   +28.20% (p=0.000 n=19+20)
        MemmoveUnalignedSrc/2048-6  23.3GB/s ± 0%   33.8GB/s ± 0%   +45.22% (p=0.000 n=17+19)
        MemmoveUnalignedSrc/4096-6  37.3GB/s ± 0%   42.7GB/s ± 0%   +14.30% (p=0.000 n=17+17)
    
    Change-Id: Id66aa3e499ccfb117cb99d623ef326b50d057b64
    Reviewed-on: https://go-review.googlesource.com/29590
    Run-TryBot: Denis Nagorny <denis.nagorny@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit dd1dcf949676a5f091d8f17ad9a64f6336aa371b
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Oct 4 15:35:28 2016 -0400

    cmd/{asm,compile}: add ANDW, ORW and XORW instructions to s390x
    
    Adds the following instructions and uses them in the SSA backend:
    
     - ANDW
     - ORW
     - XORW
    
    The instruction encodings for 32-bit operations are typically shorter,
    particularly when an immediate is used. For example, XORW $-1, R1
    only requires one instruction, whereas XOR requires two.
    
    Also removes some unused instructions (that were emulated):
    
     - ANDN
     - NAND
     - ORN
     - NOR
    
    Change-Id: Iff2a16f52004ba498720034e354be9771b10cac4
    Reviewed-on: https://go-review.googlesource.com/30291
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 1bddd2ee6aed261830131f824fe32e07de326066
Author: Keith Randall <khr@golang.org>
Date:   Wed Oct 5 14:35:47 2016 -0700

    cmd/compile: don't shuffle rematerializeable values around
    
    Better to just rematerialize them when needed instead of
    cross-register spilling or other techniques for keeping them in
    registers.
    
    This helps for amd64 code that does 1 << x. It is better to do
      loop:
        MOVQ $1, AX  // materialize arg to SLLQ
        SLLQ CX, AX
        ...
        goto loop
    than to do
      MOVQ $1, AX    // materialize outsize of loop
      loop:
        MOVQ AX, DX  // save value that's about to be clobbered
        SLLQ CX, AX
        MOVQ DX, AX  // move it back to the correct register
        goto loop
    
    Update #16092
    
    Change-Id: If7ac290208f513061ebb0736e8a79dcb0ba338c0
    Reviewed-on: https://go-review.googlesource.com/30471
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit e5421e21effb5b1db4e565babbddffeb4103d40e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Oct 5 07:31:11 2016 -0700

    runtime: add threadprof tag for test that starts busy thread
    
    The CgoExternalThreadSIGPROF test starts a thread at constructor time
    that does a busy loop. That can throw off some other tests. So only
    build that code if testprogcgo is built with the tag threadprof, and
    adjust the tests that use that code to pass that build tag.
    
    This revealed that the CgoPprofThread test was not testing what it
    should have, as it never actually started the cpuHog thread. It was
    passing because of the busy loop thread. Fix it to start the thread as
    intended.
    
    Change-Id: I087a9e4fc734a86be16a287456441afac5676beb
    Reviewed-on: https://go-review.googlesource.com/30362
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5fd6bb4c14b395bc413f281987225b57ae5fe67c
Author: Larz Conwell <larzconwell@gmail.com>
Date:   Sat Mar 12 02:57:24 2016 -0500

    go/doc: hide methods on locally-declared predeclared types
    
    Currently if you declare a type overwriting a predeclared type
    and export methods on it they will be exposed in godoc, even
    though the type itself is not exported. This corrects that
    by making all methods on these types hidden, since that's
    the expected output.
    
    Fixes #9860
    
    Change-Id: I14037bdcef1b4bbefcf299a143bac8bf363718e0
    Reviewed-on: https://go-review.googlesource.com/20610
    Reviewed-by: Russ Cox <rsc@golang.org>

commit eee727d0855b9e78f9df87e08d57b1d7f264876c
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Tue Sep 13 13:21:23 2016 -0700

    cmd/go: note when some Go files were ignored on no-Go-files errors
    
    It is pretty confusing when there are Go files ignored for mismatching
    build tags and similar and we output "no buildable Go files" without
    giving any other information about some Go files have been ignored.
    
    Fixes #17008.
    
    Change-Id: I1766ee86a9a7a72f6694deae3f73b47bfc9d0be5
    Reviewed-on: https://go-review.googlesource.com/29113
    Run-TryBot: Jaana Burcu Dogan <jbd@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6abc4a7c3eb7b7ed35e7d14e9afb18900367b58a
Author: Dmitriy Dudkin <dudkin.dmitriy@gmail.com>
Date:   Thu Feb 25 04:00:01 2016 +0200

    cmd/go: fix go get -u wildcard corner case
    
    Suppose you have already downloaded "foo.bar/baz", where the repo
    is for all of foo.bar/, and you then "go get -u foo.bar/...".
    The command-line wildcard expands to foo.bar/baz,
    and go get updates the foo.bar/ repo.
    Suppose that the repo update brought in foo.bar/quux,
    though, which depends on other.site/bar.
    Download does not consider foo.bar/quux, since it's
    only looking at foo.bar/baz, so it didn't download other.site/bar.
    After the download, we call importPaths(args) to decide what to install.
    That call was reevaluating the original wildcard with the new repo
    and matching foo.bar/quux, which was missing its dependency
    other.site/bar, causing a build failure.
    
    The fix in this CL is to remember the pre-download expansion
    of the argument list and pass it to the installer. Then only the things
    we tried to download get installed.
    
    The case where foo.bar/ is not even checked out yet continues to work,
    because in that case we leave the wildcard in place, and download
    reevaluates it during the download.
    
    The fix in this CL may not be the right long-term fix, but it is at least a fix.
    It may be that download should be passed all the original wildcards
    so that it can reexpand them as new code is downloaded, ideally reaching
    a fixed point. That can be left for another day.
    
    In short:
    
    - The problem is that the "install" half of "go get" was trying to install
      more than the "download" half was properly downloading.
    - The fix in this CL is to install just what was downloaded (install less).
    - It may be that a future CL should instead download what will be installed (download more).
    
    Fixes #14450.
    
    Change-Id: Ia1984761d24439549b7cff322bc0dbc262c1a653
    Reviewed-on: https://go-review.googlesource.com/19892
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3107c91e2d390771888df6b47fd6f8fc7a364cd3
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Wed Oct 5 15:12:05 2016 -0500

    runtime: memclr perf improvements on ppc64x
    
    This updates runtime/memclr_ppc64x.s to improve performance,
    by unrolling loops for larger clears.
    
    Fixes #17348
    
    benchmark                    old MB/s     new MB/s     speedup
    BenchmarkMemclr/5-80         199.71       406.63       2.04x
    BenchmarkMemclr/16-80        693.66       1817.41      2.62x
    BenchmarkMemclr/64-80        2309.35      5793.34      2.51x
    BenchmarkMemclr/256-80       5428.18      14765.81     2.72x
    BenchmarkMemclr/4096-80      8611.65      27191.94     3.16x
    BenchmarkMemclr/65536-80     8736.69      28604.23     3.27x
    BenchmarkMemclr/1M-80        9304.94      27600.09     2.97x
    BenchmarkMemclr/4M-80        8705.66      27589.64     3.17x
    BenchmarkMemclr/8M-80        8575.74      23631.04     2.76x
    BenchmarkMemclr/16M-80       8443.10      19240.68     2.28x
    BenchmarkMemclr/64M-80       8390.40      9493.04      1.13x
    BenchmarkGoMemclr/5-80       263.05       630.37       2.40x
    BenchmarkGoMemclr/16-80      904.33       1148.49      1.27x
    BenchmarkGoMemclr/64-80      2830.20      8756.70      3.09x
    BenchmarkGoMemclr/256-80     6064.59      20299.46     3.35x
    
    Change-Id: Ic76c9183c8b4129ba3df512ca8b0fe6bd424e088
    Reviewed-on: https://go-review.googlesource.com/30373
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: David Chase <drchase@google.com>

commit ce645534e481368b4ec6141d48eb361422e423b8
Author: Quentin Smith <quentin@golang.org>
Date:   Wed Oct 5 18:04:54 2016 -0400

    crypto/x509: support RHEL 7 cert bundle
    
    RHEL 7 introduces a new tool, update-ca-trust(8), which places the
    certificate bundle in a new location. Add this path to the list of
    locations that are searched for the certificate bundle.
    
    Fixes #15749
    
    Change-Id: Idc97f885ee48ef085f1eb4dacbd1c2cf55f94ff5
    Reviewed-on: https://go-review.googlesource.com/30375
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 936ae27b9c89ffa7ffe6ebb33376bc55b82e5ccd
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Oct 5 13:53:39 2016 -0700

    cmd/compile: untyped arrays bounds representable as integers are valid
    
    Fixes #13485.
    
    Change-Id: I11dd15c7d14fc19d42a3b48427a4cc1208b18e6a
    Reviewed-on: https://go-review.googlesource.com/30456
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit f6b4c88941f88380caf59a050c1e9805664aa2fa
Author: Joe Tsai <joetsai@google.com>
Date:   Wed Oct 5 21:23:56 2016 +0000

    Revert "net/http: improve performance for parsePostForm"
    
    This reverts commit 59320c396e6448132a52cb5a5d96491eee1e0ad8.
    
    Reasons:
    This CL was causing failures on a large regression test that we run
    within Google. The issues arises from two bugs in the CL:
    * The CL dropped support for ';' as a delimiter (see https://golang.org/issue/2210)
    * The handling of an empty string caused an empty record to be added when
    no record was added (see https://golang.org/cl/30454 for my attempted fix)
    
    The logic being added is essentially a variation of url.ParseQuery,
    but altered to accept an io.Reader instead of a string.
    Since it is duplicated (but modified) logic, there needs to be good
    tests to ensure that it's implementation doesn't drift in functionality
    from url.ParseQuery. Fixing the above issues and adding the associated
    regression tests leads to >100 lines of codes.
    For a 4% reduction in CPU time, I think this complexity and duplicated
    logic is not worth the effort.
    
    As such, I am abandoning my efforts to fix the existing issues and
    believe that reverting CL/20301 is the better course of action.
    
    Updates #14655
    
    Change-Id: Ibb5be0a5b48a16c46337e213b79467fcafee69df
    Reviewed-on: https://go-review.googlesource.com/30470
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a9b49537771c05b82923a256a47b73af98c3e87e
Author: Alexander Döring <email@alexd.ch>
Date:   Sun Oct 2 21:07:40 2016 +0200

    os/exec: add example for CommandContext
    
    Updates #16360
    
    Change-Id: I0e0afe7a89f2ebcb3e5bbc345f77a605d3afc398
    Reviewed-on: https://go-review.googlesource.com/30103
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b9fd510cd00b6aa26e2ea7001a07b90ebf97d2ed
Author: Jirka Daněk <dnk@mail.muni.cz>
Date:   Mon Jan 18 16:26:05 2016 +0100

    encoding/json: add struct and field name to UnmarshalTypeError message
    
    The UnmarshalTypeError has two new fields Struct and Field,
    used when constructing the error message.
    
    Fixes #6716.
    
    Change-Id: I67da171480a9491960b3ae81893770644180f848
    Reviewed-on: https://go-review.googlesource.com/18692
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cb986def671cd244e4682a476cff51c4cff2d8f8
Author: Quentin Smith <quentin@golang.org>
Date:   Wed Oct 5 14:37:25 2016 -0400

    syscall: relax TestUnshare
    
    Fixes #17224.
    
    Some systems have more than just "lo" in a fresh network namespace, due
    to IPv6. Instead of testing for exactly 3 lines of output (implying 1
    interface), just test to make sure that the unshare call resulted in
    fewer interfaces than before. This should still verify that unshare did
    something.
    
    Change-Id: Iaf84c2b0e673fc207059d62e2f4dd7583a753419
    Reviewed-on: https://go-review.googlesource.com/30372
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Jessica Frazelle <me@jessfraz.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 92b3e3651dc44f54b458f171f641779f10fbaec0
Author: Russ Cox <rsc@golang.org>
Date:   Wed Oct 5 11:26:04 2016 -0400

    encoding/json: use standard ES6 formatting for numbers during marshal
    
    Change float32/float64 formatting to use non-exponential form
    for a slightly wider range, to more closely match ES6 JSON.stringify
    and other JSON generators.
    
    Most notably:
    
            1e20 now formats as 100000000000000000000 (previously 1e+20)
            1e-6 now formats as 0.000001 (previously 1e-06)
            1e-7 now formats as 1e-7 (previously 1e-07)
    
    This also brings the int64 and float64 formatting in line with each other,
    for all shared representable values. For example both int64(1234567)
    and float64(1234567) now format as "1234567", where before the
    float64 formatted as "1.234567e+06".
    
    The only variation now compared to ES6 JSON.stringify is that
    Go continues to encode negative zero as "-0", not "0", so that
    the value continues to be preserved during JSON round trips.
    
    Fixes #6384.
    Fixes #14135.
    
    Change-Id: Ib0e0e009cd9181d75edc0424a28fe776bcc5bbf8
    Reviewed-on: https://go-review.googlesource.com/30371
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b662e524e4d393f7c99fe281f8c95f7b2f7015a8
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Sep 28 11:20:58 2016 -0400

    cmd/compile: use CBZ/CBNZ instrunctions on ARM64
    
    These are conditional branches that takes a register instead of
    flags as control value.
    
    Reduce binary size by 0.7%, text size by 2.4% (cmd/go as an
    exmaple).
    
    Change-Id: I0020cfde745f9eab680b8b949ad28c87fe183afd
    Reviewed-on: https://go-review.googlesource.com/30030
    Reviewed-by: David Chase <drchase@google.com>

commit 4c9a372946347304094cbf5306cce6336d11e64b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sun Oct 2 17:10:13 2016 -0400

    runtime, cmd/internal/obj: get rid of rewindmorestack
    
    In the function prologue, we emit a jump to the beginning of
    the function immediately after calling morestack. And in the
    runtime stack growing code, it decodes and emulates that jump.
    This emulation was necessary before we had per-PC SP deltas,
    since the traceback code assumed that the frame size was fixed
    for the whole function, except on the first instruction where
    it was 0. Since we now have per-PC SP deltas and PCDATA, we
    can correctly record that the frame size is 0. This makes the
    emulation unnecessary.
    
    This may be helpful for registerized calling convention, where
    there may be unspills of arguments after calling morestack. It
    also simplifies the runtime.
    
    Change-Id: I7ebee31eaee81795445b33f521ab6a79624c4ceb
    Reviewed-on: https://go-review.googlesource.com/30138
    Reviewed-by: David Chase <drchase@google.com>

commit 56b746974cb8dcd44b09c3db384e8aeaae8a9d3e
Author: Yasuhiro Matsumoto <mattn.jp@gmail.com>
Date:   Thu Oct 6 02:19:01 2016 +0900

    cmd/asm: close file before remove
    
    Windows doesn't remove an open file.
    
    Fixes #17345
    
    Change-Id: I283930c7d6eb3bc09ad208191afefe989804ce32
    Reviewed-on: https://go-review.googlesource.com/30430
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6dd38ebae11dc0dfa607723de3c12355e556c6ed
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Tue Oct 4 14:14:48 2016 -0500

    cmd/compile: Improve const shifts in PPC64.rules
    
    This change updates PPC64.rules to recognize constant shift
    counts and generate more efficient code sequences in those cases.
    
    Fixes #17336
    
    Change-Id: I8a7b812408d7a68388df41e42bad045dd214be17
    Reviewed-on: https://go-review.googlesource.com/30310
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit f54c0db859867f415a0702c8ceaa30c1a8976b0b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Feb 21 02:28:37 2016 -0800

    cmd/compile, cmd/cgo: align complex{64,128} like GCC
    
    complex64 and complex128 are treated like [2]float32 and [2]float64,
    so it makes sense to align them the same way.
    
    Change-Id: Ic614bcdcc91b080aeb1ad1fed6fc15ba5a2971f8
    Reviewed-on: https://go-review.googlesource.com/19800
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 30088ac9a391d8505a3e016f36aaa23170109f6f
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 4 14:35:45 2016 -0700

    cmd/compile: make CSE faster
    
    To refine a set of possibly equivalent values, the old CSE algorithm
    picked one value, compared it against all the others, and made two sets
    out of the results (the values that match the picked value and the
    values that didn't).  Unfortunately, this leads to O(n^2) behavior. The
    picked value ends up being equal to no other values, we make size 1 and
    size n-1 sets, and then recurse on the size n-1 set.
    
    Instead, sort the set by the equivalence classes of its arguments.  Then
    we just look for spots in the sorted list where the equivalence classes
    of the arguments change.  This lets us do a multi-way split for O(n lg
    n) time.
    
    This change makes cmpDepth unnecessary.
    
    The refinement portion used to call the type comparator.  That is
    unnecessary as the type was already part of the initial partition.
    
    Lowers time of 16361 from 8 sec to 3 sec.
    Lowers time of 15112 from 282 sec to 20 sec. That's kind of unfair, as
    CL 30257 changed it from 21 sec to 282 sec. But that CL fixed other bad
    compile times (issue #17127) by large factors, so net still a big win.
    
    Fixes #15112
    Fixes #16361
    
    Change-Id: I351ce111bae446608968c6d48710eeb6a3d8e527
    Reviewed-on: https://go-review.googlesource.com/30354
    Reviewed-by: Todd Neal <todd@tneal.org>

commit bd06d4827ae637cd08f85962f996760e76e28efc
Author: Justin Nuß <nuss.justin@gmail.com>
Date:   Sun Jul 3 17:49:29 2016 +0200

    encoding/csv: avoid allocations when reading records
    
    This commit changes parseRecord to allocate a single string per record,
    instead of per field, by using indexes into the raw record.
    
    Benchstat (done with f69991c17)
    
    name                          old time/op    new time/op    delta
    Read-8                          3.17µs ± 0%    2.78µs ± 1%  -12.35%  (p=0.016 n=4+5)
    ReadWithFieldsPerRecord-8       3.18µs ± 1%    2.79µs ± 1%  -12.23%  (p=0.008 n=5+5)
    ReadWithoutFieldsPerRecord-8    4.59µs ± 0%    2.77µs ± 0%  -39.58%  (p=0.016 n=4+5)
    ReadLargeFields-8               57.0µs ± 0%    55.7µs ± 0%   -2.18%  (p=0.008 n=5+5)
    
    name                          old alloc/op   new alloc/op   delta
    Read-8                            660B ± 0%      664B ± 0%   +0.61%  (p=0.008 n=5+5)
    ReadWithFieldsPerRecord-8         660B ± 0%      664B ± 0%   +0.61%  (p=0.008 n=5+5)
    ReadWithoutFieldsPerRecord-8    1.14kB ± 0%    0.66kB ± 0%  -41.75%  (p=0.008 n=5+5)
    ReadLargeFields-8               3.86kB ± 0%    3.94kB ± 0%   +1.86%  (p=0.008 n=5+5)
    
    name                          old allocs/op  new allocs/op  delta
    Read-8                            30.0 ± 0%      18.0 ± 0%  -40.00%  (p=0.008 n=5+5)
    ReadWithFieldsPerRecord-8         30.0 ± 0%      18.0 ± 0%  -40.00%  (p=0.008 n=5+5)
    ReadWithoutFieldsPerRecord-8      50.0 ± 0%      18.0 ± 0%  -64.00%  (p=0.008 n=5+5)
    ReadLargeFields-8                 66.0 ± 0%      24.0 ± 0%  -63.64%  (p=0.008 n=5+5)
    
    For a simple application that I wrote, which reads in a CSV file (via
    ReadAll) and outputs the number of rows read (15857625 rows), this change
    reduces the total time on my notebook from ~58 seconds to ~48 seconds.
    
    This reduces time and allocations (bytes) each by ~6% for a real world
    CSV file at work (~230000 rows, 13 colums).
    
    Updates #16791
    
    Change-Id: Ia07177c94624e55cdd3064a7d2751fb69322d3e4
    Reviewed-on: https://go-review.googlesource.com/24723
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit dce0df29dd9052c0f00ce8217b9a51a84206e892
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 4 15:57:24 2016 -0700

    cmd/compile/internal/gc: change bvfoo functions into bvec methods
    
    plive.go (except for printeffects and livenessprintblock) and
    reflect.go changes were prepared mechanically with gofmt -r.
    
    Passes toolstash.
    
    name       old alloc/op    new alloc/op    delta
    Template      44.3MB ± 0%     44.3MB ± 0%    ~           (p=0.367 n=30+30)
    Unicode       37.4MB ± 0%     37.4MB ± 0%    ~           (p=0.665 n=30+30)
    GoTypes        125MB ± 0%      125MB ± 0%    ~           (p=0.067 n=30+30)
    Compiler       515MB ± 0%      515MB ± 0%    ~           (p=0.542 n=30+28)
    
    name       old allocs/op   new allocs/op   delta
    Template        434k ± 0%       434k ± 0%    ~           (p=0.076 n=30+29)
    Unicode         367k ± 0%       367k ± 0%    ~           (p=0.716 n=29+30)
    GoTypes        1.24M ± 0%      1.24M ± 0%    ~           (p=0.428 n=29+29)
    Compiler       4.47M ± 0%      4.47M ± 0%    ~           (p=0.225 n=28+30)
    
    Change-Id: Ibaf0668567b3f69fba06aa03b7997c8fb152113a
    Reviewed-on: https://go-review.googlesource.com/30356
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7478ea5dba7ed02ddffd91c1d17ec8141f7cf184
Author: Michael Fraenkel <michael.fraenkel@gmail.com>
Date:   Wed Oct 5 11:27:34 2016 -0400

    net/http: multipart ReadForm close file after copy
    
    Always close the file regardless of whether the copy succeeds or fails.
    Pass along the close error if the copy succeeds
    
    Fixes #16296
    
    Change-Id: Ib394655b91d25750f029f17b3846d985f673fb50
    Reviewed-on: https://go-review.googlesource.com/30410
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f69991c17d9dea88e927643e4b7fdc43ad789ac3
Author: Russ Cox <rsc@golang.org>
Date:   Tue Oct 4 23:58:42 2016 -0400

    context: make DeadlineExceeded implement net.Error
    
    It already implemented the Timeout method,
    but implementing the full net.Error is more convenient.
    
    Fixes #14238 (again).
    
    Change-Id: Ia87f897f0f35bcb49865e2355964049227951ca6
    Reviewed-on: https://go-review.googlesource.com/30370
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fb4f4f4e96058165c0e7be32aa9ce493515c22a3
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Sep 30 14:20:42 2016 -0400

    crypto/{aes,cipher}: add optimized implementation of AES-GCM for s390x
    
    Also adds two tests: one to exercise the counter incrementing code
    and one which checks the output of the optimized implementation
    against that of the generic implementation for large/unaligned data
    sizes.
    
    Uses the KIMD instruction for GHASH and the KMCTR instruction for AES
    in counter mode.
    
    AESGCMSeal1K  75.0MB/s ± 2%  1008.7MB/s ± 1%  +1245.71%  (p=0.000 n=10+10)
    AESGCMOpen1K  75.3MB/s ± 1%  1006.0MB/s ± 1%  +1235.59%   (p=0.000 n=10+9)
    AESGCMSeal8K  78.5MB/s ± 1%  1748.4MB/s ± 1%  +2127.34%   (p=0.000 n=9+10)
    AESGCMOpen8K  78.5MB/s ± 0%  1752.7MB/s ± 0%  +2134.07%   (p=0.000 n=10+9)
    
    Change-Id: I88dbcfcb5988104bfd290ae15a60a2721c1338be
    Reviewed-on: https://go-review.googlesource.com/30361
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f15f1ff46f94c70b55903963a32dfccdcbe1efe5
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Oct 5 11:24:07 2016 -0400

    runtime/testdata/testprogcgo: add explicit return value to signalThread
    
    Should fix the clang builder.
    
    Change-Id: I3ee34581b6a7ec902420de72a8a08a2426997782
    Reviewed-on: https://go-review.googlesource.com/30363
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit aad29eba296df2374e5f7d334d33649d01552c01
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Oct 5 04:35:59 2016 +0000

    sort: fix a slice benchmark not using the stable variant, add another
    
    Change-Id: I9783d8023d453a72c4605a308064bef98168bcb8
    Reviewed-on: https://go-review.googlesource.com/30360
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ee8ec42929541055a9e063b50f9ffd5ee9404517
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Sat Sep 10 17:04:41 2016 +0300

    cmd/vet: skip printf check for non-constant format string during failed import
    
    Fixes #17006
    
    Change-Id: I3c2060ca5384a4b9782a7d804305d2cf4388dd5a
    Reviewed-on: https://go-review.googlesource.com/29014
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 6c13a1db2ebe146fec7cc7261146ca0e8420f011
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Oct 3 16:58:34 2016 -0700

    runtime: don't call cgocallback from signal handler
    
    Calling cgocallback from a signal handler can fail when using the race
    detector. Calling cgocallback will lead to a call to newextram which
    will call oneNewExtraM which will call racegostart. The racegostart
    function will set up some race detector data structures, and doing that
    will sometimes call the C memory allocator. If we are running the signal
    handler from a signal that interrupted the C memory allocator, we will
    crash or hang.
    
    Instead, change the signal handler code to call needm and dropm. The
    needm function will grab allocated m and g structures and initialize the
    g to use the current stack--the signal stack. That is all we need to
    safely call code that allocates memory and checks whether it needs to
    split the stack. This may temporarily leave us with no m available to
    run a cgo callback, but that is OK in this case since the code we call
    will quickly either crash or call dropm to return the m.
    
    Implementing this required changing some of the setSignalstackSP
    functions to avoid a write barrier. These functions never need a write
    barrier but in some cases generated one anyhow because on some systems
    the ss_sp field is a pointer.
    
    Change-Id: I3893f47c3a66278f85eab7f94c1ab11d4f3be133
    Reviewed-on: https://go-review.googlesource.com/30218
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 7faf70239670c3c1f8b4b530aba8847a03860f2a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Oct 4 21:15:42 2016 -0700

    runtime: avoid endless loop if printing the panic value panics
    
    Change-Id: I56de359a5ccdc0a10925cd372fa86534353c6ca0
    Reviewed-on: https://go-review.googlesource.com/30358
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit efaa36017e34b87a5731793594b42d483209d808
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Oct 4 23:34:01 2016 +0000

    encoding/csv: update and add CSV reading benchmarks
    
    Benchmarks broken off from https://golang.org/cl/24723 and modified to
    allocate less in the places we're not trying to measure.
    
    Updates #16791
    
    Change-Id: I508e4cfeac60322d56f1d71ff1912f6a6f183a63
    Reviewed-on: https://go-review.googlesource.com/30357
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d1d798dd15e7abbeab335804bd6dfaec6c016018
Author: Jeff R. Allen <jra@nella.org>
Date:   Sat Dec 5 21:06:05 2015 +0600

    image/gif: check handling of truncated GIF files
    
    All the prefixes of the testGIF produce errors today,
    but they differ wildly in which errors: some are io.EOF,
    others are io.ErrUnexpectedEOF, and others are gif-specific.
    Make them all gif-specific to explain context, and make
    any complaining about EOF be sure to mention the EOF
    is unexpected.
    
    Fixes #11390.
    
    Change-Id: I742c39c88591649276268327ea314e68d1de1845
    Reviewed-on: https://go-review.googlesource.com/17493
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a39920fdbbeca653a8b2ac52678378d260e2d396
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 3 22:13:57 2016 -0400

    math: fix Gamma(x) for x < -170.5 and other corner cases
    
    Fixes #11441.
    
    Test tables generated by
    
            package main
    
            import (
                    "bytes"
                    "fmt"
                    "log"
                    "os/exec"
                    "strconv"
                    "strings"
            )
    
            var inputs = []float64{
                    0.5,
                    1.5,
                    2.5,
                    3.5,
                    -0.5,
                    -1.5,
                    -2.5,
                    -3.5,
                    0.1,
                    0.01,
                    1e-8,
                    1e-16,
                    1e-3,
                    1e-16,
                    1e-308,
                    5.6e-309,
                    5.5e-309,
                    1e-309,
                    1e-323,
                    5e-324,
                    -0.1,
                    -0.01,
                    -1e-8,
                    -1e-16,
                    -1e-3,
                    -1e-16,
                    -1e-308,
                    -5.6e-309,
                    -5.5e-309,
                    -1e-300 / 1e9,
                    -1e-300 / 1e23,
                    -5e-300 / 1e24,
                    -0.9999999999999999,
                    -1.0000000000000002,
                    -1.9999999999999998,
                    -2.0000000000000004,
                    -100.00000000000001,
                    -99.999999999999986,
                    17,
                    171,
                    171.6,
                    171.624,
                    171.625,
                    172,
                    2000,
                    -100.5,
                    -160.5,
                    -170.5,
                    -171.5,
                    -176.5,
                    -177.5,
                    -178.5,
                    -179.5,
                    -201.0001,
                    -202.9999,
                    -1000.5,
                    -1000000000.3,
                    -4503599627370495.5,
                    -63.349078729022985,
                    -127.45117632943295,
            }
    
            func main() {
                    var buf bytes.Buffer
                    for _, v := range inputs {
                            fmt.Fprintf(&buf, "gamma(%.1000g)\n", v)
                    }
                    cmd := exec.Command("gp", "-q")
                    cmd.Stdin = &buf
                    out, err := cmd.CombinedOutput()
                    if err != nil {
                            log.Fatalf("gp: %v", err)
                    }
                    f := strings.Split(string(out), "\n")
                    if len(f) > 0 && f[len(f)-1] == "" {
                            f = f[:len(f)-1]
                    }
                    if len(f) != len(inputs) {
                            log.Fatalf("gp: wrong output count\n%s\n", out)
                    }
                    for i, g := range f {
                            gf, err := strconv.ParseFloat(strings.Replace(g, " E", "e", -1), 64)
                            if err != nil {
                                    if strings.Contains(err.Error(), "value out of range") {
                                            if strings.HasPrefix(g, "-") {
                                                    fmt.Printf("\t{%g, Inf(-1)},\n", inputs[i])
                                            } else {
                                                    fmt.Printf("\t{%g, Inf(1)},\n", inputs[i])
                                            }
                                            continue
                                    }
                                    log.Fatal(err)
                            }
                            if gf == 0 && strings.HasPrefix(g, "-") {
                                    fmt.Printf("\t{%g, Copysign(0, -1)},\n", inputs[i])
                                    continue
                            }
                            fmt.Printf("\t{%g, %g},\n", inputs[i], gf)
                    }
            }
    
    Change-Id: Ie98c7751d92b8ffb40e8313f5ea10df0890e2feb
    Reviewed-on: https://go-review.googlesource.com/30146
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit aab849e4297d60918602355a0335cc7b3ca4c5f2
Author: Russ Cox <rsc@golang.org>
Date:   Mon Oct 3 22:33:49 2016 -0400

    math: use portable Exp instead of 387 instructions on 386
    
    The 387 implementation is less accurate and slower.
    
    name     old time/op  new time/op  delta
    Exp-8    29.7ns ± 2%  24.0ns ± 2%  -19.08%  (p=0.000 n=10+10)
    
    This makes Gamma more accurate too.
    
    Change-Id: Iad33b9cce0b087ccbce3e08ba7a6d285c4999d02
    Reviewed-on: https://go-review.googlesource.com/30230
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 84743c348b0a4a7ed1ea3d7122feb757ccc7ebae
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Aug 3 00:31:17 2016 -0700

    cmd/doc: ensure summaries truly are only one line
    
    The documentation for doc says:
    > Doc prints the documentation comments associated with the item identified by its
    > arguments (a package, const, func, type, var, or method) followed by a one-line
    > summary of each of the first-level items "under" that item (package-level
    > declarations for a package, methods for a type, etc.).
    
    Certain variables (and constants, functions, and types) have value specifications
    that are multiple lines long. Prior to this change, doc would print out all of the
    lines necessary to display the value. This is inconsistent with the documented
    behavior, which guarantees a one-line summary for all first-level items.
    We fix this here by writing a general oneLineNode method that always returns
    a one-line summary (guaranteed!) of any input node.
    
    Packages like image/color/palette and unicode now become much
    more readable since large slices are now a single line.
    
    $ go doc image/color/palette
    <<<
    // Before:
    var Plan9 = []color.Color{
            color.RGBA{0x00, 0x00, 0x00, 0xff},
            color.RGBA{0x00, 0x00, 0x44, 0xff},
            color.RGBA{0x00, 0x00, 0x88, 0xff},
            ... // Hundreds of more lines!
    }
    var WebSafe = []color.Color{
            color.RGBA{0x00, 0x00, 0x00, 0xff},
            color.RGBA{0x00, 0x00, 0x33, 0xff},
            color.RGBA{0x00, 0x00, 0x66, 0xff},
            ... // Hundreds of more lines!
    }
    
    // After:
    var Plan9 = []color.Color{ ... }
    var WebSafe = []color.Color{ ... }
    >>>
    
    In order to test this, I ran `go doc` and `go doc -u` on all of the
    standard library packages and diff'd the output with and without the
    change to ensure that all differences were intended.
    
    Fixes #13072
    
    Change-Id: Ida10b7796b7e4e174a929b55c60813a9eb7158fe
    Reviewed-on: https://go-review.googlesource.com/25420
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 44009a24138b6c7b5fd5b4be113db44fdfd1678e
Author: Kevin Burke <kev@inburke.com>
Date:   Tue Oct 4 15:38:46 2016 -0700

    cmd/cover: fix typo
    
    Change-Id: I3f13488605ab62eba5d3c59d5e9df1bcf69dd571
    Reviewed-on: https://go-review.googlesource.com/30355
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 316f93f7164d015ce82f341bd58657cc84f2cc69
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 3 13:32:11 2016 -0700

    go/types: minimal support for alias declarations: don't crash
    
    For #16339
    
    Change-Id: I8927f40e0fd166795f41c784ad92449743f73af5
    Reviewed-on: https://go-review.googlesource.com/30213
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 59c63c711c73f3872c3047c2e80debba5ff1b802
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 3 13:31:07 2016 -0700

    go/printer: support for printing alias declarations
    
    For #16339.
    
    Change-Id: Ie2e3338b87e84f45cda0868213bbcd2dae9ab6e3
    Reviewed-on: https://go-review.googlesource.com/30212
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 57ae83307fc4cb90338b39dcc6fe3c61ee8ce0b7
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 3 13:28:25 2016 -0700

    go/ast, go/parser: parse alias declarations
    
    For now, we also accept "type p = p.T" (using = instead of =>, for
    type aliases only), so we can experiment with an approach that only
    uses type aliases. This concession is implemened in the parser.
    
    For #16339
    
    Change-Id: I88b5522a8b6cfc2e97ca146ede8b32af340220f8
    Reviewed-on: https://go-review.googlesource.com/30211
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 776a90100f1f65fcf54dfd3d082d657341bdc323
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 3 13:24:56 2016 -0700

    go/scanner, go/token: recognize => (ALIAS) token
    
    For #16339.
    
    Change-Id: I0f83e46f13b5c8801aacf48fc8b690049edbbbff
    Reviewed-on: https://go-review.googlesource.com/30210
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c1e267cc734135a66af8a1a5015e572cbb598d44
Author: Carl Mastrangelo <notcarl@google.com>
Date:   Mon Oct 3 12:45:12 2016 -0700

    runtime: make append only clear uncopied memory
    
    Also add a benchmark that shows off the new behavior.  The
    existing benchmarks reuse the same slice, and thus don't ever have
    to clear memory.  Running the Append|Grow benchmarks in runtime:
    
    name                              old time/op  new time/op  delta
    AppendSliceLarge/1024Bytes-12      265ns ± 1%   265ns ± 3%     ~     (p=0.524 n=17+20)
    AppendSliceLarge/4096Bytes-12      807ns ± 3%   772ns ± 1%   -4.38%  (p=0.000 n=20+20)
    AppendSliceLarge/16384Bytes-12    3.20µs ± 4%  2.82µs ± 4%  -11.93%  (p=0.000 n=19+20)
    AppendSliceLarge/65536Bytes-12    13.0µs ± 4%  11.0µs ± 3%  -15.22%  (p=0.000 n=20+20)
    AppendSliceLarge/262144Bytes-12   62.7µs ± 1%  51.6µs ± 1%  -17.67%  (p=0.000 n=19+20)
    AppendSliceLarge/1048576Bytes-12   337µs ± 3%   289µs ± 3%  -14.36%  (p=0.000 n=20+20)
    GrowSliceBytes-12                 31.2ns ± 4%  31.4ns ±11%     ~     (p=0.308 n=19+18)
    GrowSliceInts-12                  53.4ns ±14%  45.0ns ± 6%  -15.74%  (p=0.000 n=20+19)
    GrowSlicePtr-12                   87.0ns ± 3%  83.3ns ± 3%   -4.26%  (p=0.000 n=18+17)
    GrowSliceStruct24Bytes-12         88.9ns ± 5%  77.8ns ± 2%  -12.45%  (p=0.000 n=20+19)
    Append-12                         17.2ns ± 1%  17.3ns ± 2%     ~     (p=0.464 n=18+17)
    AppendGrowByte-12                 2.28ms ± 1%  1.92ms ± 2%  -15.65%  (p=0.000 n=20+18)
    AppendGrowString-12                255ms ± 3%   253ms ± 4%     ~     (p=0.065 n=19+19)
    AppendSlice/1Bytes-12             3.13ns ± 0%  3.11ns ± 1%   -0.65%  (p=0.000 n=17+18)
    AppendSlice/4Bytes-12             3.02ns ± 2%  3.11ns ± 1%   +3.27%  (p=0.000 n=18+17)
    AppendSlice/7Bytes-12             4.14ns ± 3%  4.13ns ± 2%     ~     (p=0.380 n=19+18)
    AppendSlice/8Bytes-12             3.74ns ± 3%  3.68ns ± 1%   -1.76%  (p=0.000 n=19+18)
    AppendSlice/15Bytes-12            4.03ns ± 2%  4.04ns ± 2%     ~     (p=0.261 n=19+20)
    AppendSlice/16Bytes-12            4.03ns ± 2%  4.03ns ± 0%     ~     (p=0.062 n=18+17)
    AppendSlice/32Bytes-12            3.23ns ± 4%  3.43ns ± 1%   +6.10%  (p=0.000 n=17+18)
    AppendStr/1Bytes-12               3.51ns ± 1%  3.52ns ± 1%     ~     (p=0.321 n=18+19)
    AppendStr/4Bytes-12               3.46ns ± 1%  3.46ns ± 1%     ~     (p=0.977 n=18+20)
    AppendStr/8Bytes-12               3.18ns ± 1%  3.19ns ± 1%     ~     (p=0.650 n=16+17)
    AppendStr/16Bytes-12              6.08ns ±27%  5.52ns ± 3%   -9.16%  (p=0.002 n=18+19)
    AppendStr/32Bytes-12              3.71ns ± 1%  3.53ns ± 1%   -4.73%  (p=0.000 n=20+19)
    AppendSpecialCase-12              17.7ns ± 1%  17.8ns ± 3%   +0.86%  (p=0.045 n=17+18)
    AppendInPlace/NoGrow/Byte-12       375ns ± 1%   376ns ± 1%   +0.35%  (p=0.021 n=20+18)
    AppendInPlace/NoGrow/1Ptr-12      1.01µs ± 1%  1.10µs ± 1%   +9.28%  (p=0.000 n=18+20)
    AppendInPlace/NoGrow/2Ptr-12      1.85µs ± 2%  1.71µs ± 1%   -7.51%  (p=0.000 n=19+18)
    AppendInPlace/NoGrow/3Ptr-12      2.57µs ± 2%  2.44µs ± 1%   -5.08%  (p=0.000 n=19+19)
    AppendInPlace/NoGrow/4Ptr-12      3.52µs ± 2%  3.35µs ± 2%   -4.70%  (p=0.000 n=20+19)
    AppendInPlace/Grow/Byte-12         212ns ± 1%   217ns ± 8%   +2.57%  (p=0.000 n=20+20)
    AppendInPlace/Grow/1Ptr-12         214ns ± 2%   217ns ± 3%   +1.23%  (p=0.001 n=18+19)
    AppendInPlace/Grow/2Ptr-12         298ns ± 2%   300ns ± 2%   +0.55%  (p=0.038 n=19+20)
    AppendInPlace/Grow/3Ptr-12         367ns ± 2%   366ns ± 2%     ~     (p=0.452 n=20+18)
    AppendInPlace/Grow/4Ptr-12         416ns ± 2%   411ns ± 2%   -1.18%  (p=0.000 n=20+19)
    StackGrowth-12                    43.4ns ± 1%  43.4ns ± 0%     ~     (p=1.000 n=16+16)
    StackGrowthDeep-12                11.4µs ± 4%  10.3µs ± 4%   -9.65%  (p=0.000 n=20+19)
    
    Change-Id: I69a8afbd942c787c591d95b9d9439bd6db4d1e49
    Reviewed-on: https://go-review.googlesource.com/30192
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3f952b75046548881709086cc20ab3c5fca2f52e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 4 14:40:38 2016 -0700

    cmd/compile/internal/ssa: update BlockKind documentation
    
    BlockCall was removed in golang.org/cl/28950.
    
    Change-Id: Ib8d9f3111bf3dc01956dd776afeb345ede8bc933
    Reviewed-on: https://go-review.googlesource.com/30353
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4caf93c9571ed637cf3876042d263b0d8938a2fe
Author: Oleg Vakheta <helginet@gmail.com>
Date:   Fri Nov 27 17:07:58 2015 +0200

    fmt: add tests for parsenum
    
    Change-Id: Ie7b869892816a171d8c71612998cc32a190aeff9
    Reviewed-on: https://go-review.googlesource.com/17227
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit c28f55c50219f0191e453ea02d57c1f20434b561
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Oct 4 13:00:21 2016 -0700

    cmd/compile/internal/ssa: add Op.UsesScratch method
    
    Passes toolstash/buildall.
    
    Change-Id: I928a2ef39fb10091957f35bb3f1564498f6f1b83
    Reviewed-on: https://go-review.googlesource.com/30312
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 59320c396e6448132a52cb5a5d96491eee1e0ad8
Author: Quentin Renard <contact@asticode.com>
Date:   Sun Mar 6 17:27:50 2016 +0100

    net/http: improve performance for parsePostForm
    
    Remove the use of io.ReadAll in http.parsePostForm to avoid converting
    the whole input from []byte to string and not performing well
    space-allocated-wise.
    
    Instead a new function called parsePostFormURLEncoded is used and is
    fed directly an io.Reader that is parsed using a bufio.Reader.
    
    Benchmark:
    
    name         old time/op    new time/op    delta
    PostQuery-4    2.90µs ± 6%    2.82µs ± 4%     ~       (p=0.094 n=9+9)
    
    name         old alloc/op   new alloc/op   delta
    PostQuery-4    1.05kB ± 0%    0.90kB ± 0%  -14.49%  (p=0.000 n=10+10)
    
    name         old allocs/op  new allocs/op  delta
    PostQuery-4      6.00 ± 0%      7.00 ± 0%  +16.67%  (p=0.000 n=10+10)
    
    Fixes #14655
    
    Change-Id: I112c263d4221d959ed6153cfe88bc57a2aa8ea73
    Reviewed-on: https://go-review.googlesource.com/20301
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e6051de0351bb05d7409ee0d483f932e3530f816
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 4 10:01:48 2016 -0700

    cmd/compile: lower cse comparison depth
    
    Todd originally set cmpDepth to 4.  Quoting:
    
    I picked a depth of 4 by timing tests of `go tool compile arithConst_ssa.go` and `go test -c net/http`.
    
        3.89 / 3.92  CL w/cmpDepth = 1
        3.78 / 3.92  CL w/cmpDepth = 2
        3.44 / 3.96  CL w/cmpDepth = 3
        3.29 / 3.9   CL w/cmpDepth = 4
        3.3  / 3.93  CL w/cmpDepth = 5
        3.29 / 3.92  CL w/cmpDepth = 10
    
    I don't see the same behavior now, differences in those two benchmarks
    are in the noise (between 1 and 4).
    
    In issue 17127, CSE takes a really long time.  Lowering cmpDepth
    from 4 to 1 lowers compile time from 8 minutes to 1 minute.
    
    Fixes #17127
    
    Change-Id: I6dc544bbcf2a9dca73637d0182d3de1a5ae6c944
    Reviewed-on: https://go-review.googlesource.com/30257
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit fa49c3970a43ca77d46363397e7f4f3ae1f5957c
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Tue Oct 4 09:21:30 2016 -0700

    database/sql: fixup remaining driver call to use context
    
    Missed one in the prior CL.
    
    Change-Id: I6f6d84d52fe4d902a985971a402701fb3b1eed86
    Reviewed-on: https://go-review.googlesource.com/30255
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ddb77100a670d491d7553cc1beed630fc994a7f6
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 3 12:13:22 2016 -0700

    reflect: ignore struct tags when converting structs
    
    Implementation of spec change https://golang.org/cl/24190/.
    
    For #16085.
    
    Change-Id: Ib7cb513354269282dfad663c7d2c6e624149f3cd
    Reviewed-on: https://go-review.googlesource.com/30191
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit f5b0012362f0ab801a657ff01d2d55f2391b1792
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 3 12:12:20 2016 -0700

    go/types: ignore struct tags when converting structs
    
    Implementation of spec change https://golang.org/cl/24190/.
    
    For #16085.
    
    Change-Id: I17bbbce38d98a169bc64e84983a7ebfe7142f6e9
    Reviewed-on: https://go-review.googlesource.com/30190
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 39055700b1c69e791405518a914017b8c5551436
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Oct 3 11:40:43 2016 -0700

    cmd/compile: ignore struct tags when converting structs
    
    Implementation of spec change https://golang.org/cl/24190/.
    
    For #16085.
    
    Change-Id: Id71ef29af5031b073e8be163f578d1bb768ff97a
    Reviewed-on: https://go-review.googlesource.com/30169
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 9abaef93c75b8aef007624b66f99a671eb0cc5d6
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Oct 3 16:09:13 2016 -0700

    cmd/compile: cleanup artifacts from previous CL
    
    Does not pass toolstash, but only because it causes ATYPE instructions
    to be emitted in a different order, and it avoids emitting type
    metadata for unused variables.
    
    Change-Id: I3ec8f66a40b5af9213e0d6e852b267a8dd995838
    Reviewed-on: https://go-review.googlesource.com/30217
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5c7a005266f84ecea26859619630a862eccc0d48
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Jun 3 13:21:55 2016 -0700

    spec: ignore struct tags when converting structs
    
    This is a backwards-compatible language change.
    
    Per the proposal (#16085), the rules for conversions are relaxed
    such that struct tags in any of the structs involved in the conversion
    are ignored (recursively).
    
    Because this is loosening the existing rules, code that compiled so
    far will continue to compile.
    
    For #16085.
    Fixes #6858.
    
    Change-Id: I0feef651582db5f23046a2331fc3f179ae577c45
    Reviewed-on: https://go-review.googlesource.com/24190
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 8c24bff52b7d8e789382a8992af2e0adf0b491f2
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Oct 3 12:26:25 2016 -0700

    cmd/compile: layout stack frame during SSA
    
    Identify live stack variables during SSA and compute the stack frame
    layout earlier so that we can emit instructions with the correct
    offsets upfront.
    
    Passes toolstash/buildall.
    
    Change-Id: I191100dba274f1e364a15bdcfdc1d1466cdd1db5
    Reviewed-on: https://go-review.googlesource.com/30216
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit f239196b9e1c0d58ab2067630bd1db7210eb7f6a
Author: Keith Randall <khr@golang.org>
Date:   Tue Oct 4 09:49:33 2016 -0700

    cmd/compile: remove duplicate statement list function
    
    Probably a holdover from linked list vs. slice.
    
    Change-Id: Ib2540b08ef0ae48707d44a5d57bc23f8d65c760d
    Reviewed-on: https://go-review.googlesource.com/30256
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f0636bf6f97478aca313052a9661828d01357d75
Author: Dhananjay Nakrani <dhananjayn@google.com>
Date:   Sat Oct 1 18:01:30 2016 -0700

    cmd/cover: Fix compiler directives handling.
    
    Currently, it separates comments from rest of the AST. This causes problems when
    long counter increment statements are added before compiler directives.
    See Issue #17315.
    
    This change moves comments handling into AST Visitor so that when printer prints
    code from AST, position of compiler directives relative to the associated function
    is preserved.
    
    Tested with https://gist.github.com/dhananjay92/837df6bc1f171b1350f85d7a7d59ca1e
    and unit test.
    
    Fixes #17315
    
    Change-Id: I61a80332fc1923de6fc59ff63b953671598071fa
    Reviewed-on: https://go-review.googlesource.com/30161
    Reviewed-by: Rob Pike <r@golang.org>

commit 6300161d40e50902e16b3144c36aaf9279ab6208
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 30 09:03:38 2016 -0700

    cmd/compile: force folding of MOVDaddr into storezero
    
    Fold MOVDaddr ops into MOVXstorezero ops.
    Also fold ADDconst into MOVDaddr so we're sure there isn't
    (MOVDstorezero (ADDconst (MOVDaddr ..)))
    
    Without this CL, we get:
    
    v1 = MOVDaddr {s}
    v2 = VARDEF {s}
    v3 = MOVDstorezero v1 v2
    
    The liveness pass thinks the MOVDaddr is a read of s, so s is
    incorrectly thought to be live at the start of the function.
    
    Fixes #17194
    
    Change-Id: I2b4a2f13b12aa5b072941ee1c7b89f3793650cdc
    Reviewed-on: https://go-review.googlesource.com/30086
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 7d0642d9d6a7a9c06d422904632ab61668e24a9e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Oct 4 05:21:58 2016 +0000

    regexp: remove dead code
    
    Wasn't convenient enough.
    
    Change-Id: I78270dc22cdb2e264641148e50029a9e4de953cd
    Reviewed-on: https://go-review.googlesource.com/30251
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6b795e77dfbaed05f0607ac14a3db3f62d905e70
Author: Nick Craig-Wood <nick@craig-wood.com>
Date:   Tue Oct 4 14:04:18 2016 +0100

    runtime: correct function name in throw message
    
    Change-Id: I8fd271066925734c3f7196f64db04f27c4ce27cb
    Reviewed-on: https://go-review.googlesource.com/30274
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f28cf8346c4ce7cb74bf97c7c69da21c43a78034
Author: Filippo Valsorda <hi@filippo.io>
Date:   Wed Dec 23 02:03:44 2015 +0000

    crypto/tls: implement countermeasures against CBC padding oracles
    
    The aim is to make the decrypt() timing profile constant, irrespective of
    the CBC padding length or correctness.  The old algorithm, on valid padding,
    would only MAC bytes up to the padding length threshold, making CBC
    ciphersuites vulnerable to plaintext recovery attacks as presented in the
    "Lucky Thirteen" paper.
    
    The new algorithm Write()s to the MAC all supposed payload, performs a
    constant time Sum()---which required implementing a constant time Sum() in
    crypto/sha1, see the "Lucky Microseconds" paper---and then Write()s the rest
    of the data. This is performed whether the padding is good or not.
    
    This should have no explicit secret-dependent timings, but it does NOT
    attempt to normalize memory accesses to prevent cache timing leaks.
    
    Updates #13385
    
    Change-Id: I15d91dc3cc6eefc1d44f317f72ff8feb0a9888f7
    Reviewed-on: https://go-review.googlesource.com/18130
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit ad26bb5e3098cbfd7c0ad9a1dc9d38c92e50f06e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Oct 4 03:01:09 2016 +0000

    all: use sort.Slice where applicable
    
    I avoided anywhere in the compiler or things which might be used by
    the compiler in the future, since they need to build with Go 1.4.
    
    I also avoided anywhere where there was no benefit to changing it.
    
    I probably missed some.
    
    Updates #16721
    
    Change-Id: Ib3c895ff475c6dec2d4322393faaf8cb6a6d4956
    Reviewed-on: https://go-review.googlesource.com/30250
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 2f184c65a5bdd422f88d841bb3a37fa60b3e1d52
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Sep 27 19:54:05 2016 +0900

    net: implement network interface API for Solaris
    
    Fixes #7177.
    
    Change-Id: Iba6063905f4f9c6acef8aba76b55d996f186d835
    Reviewed-on: https://go-review.googlesource.com/29892
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>

commit cb6bb4062f6a36d0e76f6fe15f78e0bbcd4b71c0
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Sep 27 19:51:47 2016 +0900

    vendor: import golang.org/x/net/lif
    
    golang.org/x/net/lif becomes vendor/golang_org/x/net/lif.
    
    At git rev 9f0e377 (golang.org/cl/29893)
    
    Updates #7177.
    
    Change-Id: Id838fcc234e71f735bb2609073f4c2214b48a970
    Reviewed-on: https://go-review.googlesource.com/29891
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 89c4cbd7acc36cf627746f379f0cc002b5b60383
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Oct 1 19:20:32 2016 +0900

    syscall: fix Send{msg,msgN}, Recvmsg and control message handling on solaris
    
    This change switches the use of socket implementation from the
    conventional SUS-based one to the latest POSIX-based one to make
    socket control message work correctly on Solaris.
    
    It looks like those two implementations, Socket over TLI/XTI and
    Socket, have different semantics in details but it wouldn't hurt
    the existing applications because the exposed syscall API doesn't
    support socket properties related to such a protocol independent
    application framework.
    
    Fixes #7402.
    
    Change-Id: I45a4e782d606bfbebe1404086c50a8c69af53461
    Reviewed-on: https://go-review.googlesource.com/30171
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 7e0218cdb204cec082601988324d54ef484a8f5f
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Sep 30 12:04:46 2016 -0400

    cmd/compile: remove unnecessary OpSB checks in S390X.rules
    
    Reversed, indexed and multi-register stores/loads cannot accept SB
    inputs. Therefore if one of these Ops is an input to a rule any
    pointer that is an argument to that Op cannot be OpSB.
    
    Change-Id: Ib8048362d1c6277122afec0d13a1c905290d69cb
    Reviewed-on: https://go-review.googlesource.com/30131
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 7aab88a31e4b689374832ebd1a3927bcef6e3f79
Author: Austin Clements <austin@google.com>
Date:   Mon Sep 26 13:41:39 2016 -0400

    runtime: fix missing space in error message
    
    Change-Id: I422708d50c3c727246e7991039877660ca034dc9
    Reviewed-on: https://go-review.googlesource.com/30144
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit bf776a988bf6fe82cbef5cfc954f33d127c5172c
Author: Austin Clements <austin@google.com>
Date:   Mon Sep 26 13:10:41 2016 -0400

    runtime: document bmap.tophash
    
    In particular, it wasn't obvious that some values are special (unless
    you also found those special values), so document that it isn't
    necessarily a hash value.
    
    Change-Id: Iff292822b44408239e26cd882dc07be6df2c1d38
    Reviewed-on: https://go-review.googlesource.com/30143
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 38f1df66ff231458a81cb07e7b147f30854b45d4
Author: Austin Clements <austin@google.com>
Date:   Fri Sep 9 10:22:10 2016 -0400

    runtime: make gcDumpObject useful on stack frames
    
    gcDumpObject is often used on a stack pointer (for example, when
    checkmark finds an unmarked object on the stack), but since stack
    spans don't have an elemsize, it doesn't print any of the memory from
    the frame. Make it at least slightly more useful by printing
    everything between obj and obj+off (inclusive). While we're here, also
    print out the span state.
    
    Change-Id: I51be064ea8791b4a365865bfdc7afa7b5aaecfbd
    Reviewed-on: https://go-review.googlesource.com/30142
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 6879dbde4e6dceceb272b83fc6682e97b9de2fa1
Author: Austin Clements <austin@google.com>
Date:   Fri Sep 9 10:31:27 2016 -0400

    runtime: introduce a type for span states
    
    Currently span states are untyped constants and the field is just a
    uint8. Make this more type-safe by introducing a type for the span
    state.
    
    Change-Id: I369bf59fe6e8234475f4921611424fceb7d0a6de
    Reviewed-on: https://go-review.googlesource.com/30141
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 5a6e511c614a158cb58150fb62bfbc207a33922d
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 30 10:12:32 2016 -0700

    cmd/compile: Use Sreedhar+Gao phi building algorithm
    
    Should be more asymptotically happy.
    
    We process each variable in turn to find all the
    locations where it needs a phi (the dominance frontier
    of all of its definitions).  Then we add all those phis.
    This takes O(n * #variables), although hopefully much less.
    
    Then we do a single tree walk to match all the
    FwdRefs with the nearest definition or phi.
    This takes O(n) time.
    
    The one remaining inefficiency is that we might end up
    introducing a bunch of dead phis in the first step.
    A TODO is to introduce phis only where they might be
    used by a read.
    
    The old algorithm is still faster on small functions,
    so there's a cutover size (currently 500 blocks).
    
    This algorithm supercedes the David's sparse phi
    placement algorithm for large functions.
    
    Lowers compile time of example from #14934 from
    ~10 sec to ~4 sec.
    Lowers compile time of example from #16361 from
    ~4.5 sec to ~3 sec.
    Lowers #16407 from ~20 min to ~30 sec.
    
    Update #14934
    Update #16361
    Fixes #16407
    
    Change-Id: I1cff6364e1623c143190b6a924d7599e309db58f
    Reviewed-on: https://go-review.googlesource.com/30163
    Reviewed-by: David Chase <drchase@google.com>

commit d0e92f61e5c5c59395d9b1a3b4f5c7b90dec5bc8
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Oct 3 15:21:16 2016 -0400

    cmd/compile: remove unnecessary write barriers for APPEND
    
    Updates #17330.
    
    Change-Id: I83fe80139a2213f3169db884b84a4c3bd15b58b6
    Reviewed-on: https://go-review.googlesource.com/30140
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit fe77c5b36994d907a6c0f4cd8ffb0a2ad6cfde5e
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Oct 3 11:25:25 2016 -0700

    doc: add PKG_CONFIG and GIT_ALLOW_PROTOCOL env vars to go1.8.txt
    
    Change-Id: I592b87f49fc636b89807d911132f69257d718afd
    Reviewed-on: https://go-review.googlesource.com/30168
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 55620a0e910fd9f2a9d7d631f01a6bddfe0f6a0a
Author: Billy Lynch <wlynch@google.com>
Date:   Fri Sep 30 16:24:31 2016 -0400

    cmd/go: add support for GIT_ALLOW_PROTOCOL
    
    Allows users to override the default secure protocol list by setting the
    GIT_ALLOW_PROTOCOL environment variable.
    
    Addresses #17299 for vcs.go.
    
    Change-Id: If575861d2b1b04b59029fed7e5d12b49690af50a
    Reviewed-on: https://go-review.googlesource.com/30135
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5dcb31b2d555be0c7d1c0c4b2001d078e7ac6078
Author: Boris Nagaev <nagaev@google.com>
Date:   Sat Jun 25 13:51:06 2016 +0200

    cmd/dist, cmd/go: add environment variable override for pkg-config
    
    Allow overriding default name of `pkg-config` tool via environment
    variable PKG_CONFIG (same as used by autoconf pkg.m4 macros). This
    facilitates easy cross-compilation of cgo code.
    
    Original patch against Go <= 1.4 was written by
    xnox_canonical <dimitri.ledkov@canonical.com> in 2014.
    Source: https://codereview.appspot.com/104960043/
    
    Fixes #16253
    
    Change-Id: I31c33ffc3ecbff65da31421e6188d092ab4fe7e4
    Reviewed-on: https://go-review.googlesource.com/29991
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6c5e377d23136bd371d205e1c2aae6ddccb4597e
Author: Than McIntosh <thanm@google.com>
Date:   Thu Jul 14 13:23:11 2016 -0400

    cmd/compile: relax liveness restrictions on ambiguously live
    
    Update gc liveness to remove special conservative treatment
    of ambiguously live vars, since there is no longer a need to
    protect against GCDEBUG=gcdead.
    
    Change-Id: Id6e2d03218f7d67911e8436d283005a124e6957f
    Reviewed-on: https://go-review.googlesource.com/24896
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit 5f36e9a3062c1f133169d01d612da9458a7ea884
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sat Oct 1 20:28:09 2016 -0700

    net: clarify that Conn deadlines also affect currently-blocked I/O
    
    All implementations have always implemented this behavior, it's
    tested, and it's depended on by other packages. (notably, by net/http)
    
    The one exception is Plan 9 which doesn't support I/O deadlines at all
    (tracked in #11932). As a result, a bunch of tests fail on plan9
    (#7237). But once Plan 9 adds I/O deadline support, it'll also need
    this behavior.
    
    Change-Id: Idb71767f0c99279c66dce29f7bdc78ef467e47aa
    Reviewed-on: https://go-review.googlesource.com/30164
    Reviewed-by: Sam Whited <sam@samwhited.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 99339dd44537f82c9a1348b8937b68b6c61be005
Author: Austin Clements <austin@google.com>
Date:   Mon Oct 3 11:52:20 2016 -0400

    runtime: weaken claim about SetFinalizer panicking
    
    Currently the SetFinalizer documentation makes a strong claim that
    SetFinalizer will panic if the pointer is not to an object allocated
    by calling new, to a composite literal, or to a local variable. This
    is not true. For example, it doesn't panic when passed the address of
    a package-level variable. Nor can we practically make it true. For
    example, we can't distinguish between passing a pointer to a composite
    literal and passing a pointer to its first field.
    
    Hence, weaken the guarantee to say that it "may" panic.
    
    Updates #17311. (Might fix it, depending on what we want to do with
    package-level variables.)
    
    Change-Id: I1c68ea9d0a5bbd3dd1b7ce329d92b0f05e2e0877
    Reviewed-on: https://go-review.googlesource.com/30137
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 22a2bdfedb95612984cec3141924953b88a607b7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Aug 17 14:29:00 2016 +0000

    sort: add Slice, SliceStable, and SliceIsSorted
    
    Add helpers for sorting slices.
    
    Slice sorts slices:
    
        sort.Slice(s, func(i, j int) bool {
            if s[i].Foo != s[j].Foo {
                return s[i].Foo < s[j].Foo
            }
            return s[i].Bar < s[j].Bar
        })
    
    SliceStable is the same, but does a stable sort.
    
    SliceIsSorted reports whether a slice is already sorted.
    
    Fixes #16721
    
    Change-Id: I346530af1c5dee148ea9be85946fe08f23ae53e7
    Reviewed-on: https://go-review.googlesource.com/27321
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 003a598bf28ae8f77919c3bda2abb9d6d4f449bb
Author: Florian Uekermann <florian@uekermann.me>
Date:   Wed Aug 17 18:45:57 2016 +0200

    math/rand: add Rand.Uint64
    
    This adds Uint64 methods to Rand and rngSource.
    Rand.Uint64 uses Source.Uint64 directly if it is present.
    
    rngSource.Uint64 provides access to all 64 bits generated by the
    underlying ALFG. To ensure high seed quality a 64th bit has been added
    to all elements of the array of "cooked" random numbers that are used
    for seeding. gen_cooked.go generates both the 63 bit and 64 bit array.
    
    Fixes #4254
    
    Change-Id: I22855618ac69abae3d2799b3e7e59996d4c5a4b1
    Reviewed-on: https://go-review.googlesource.com/27253
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 998419575fb34dd5228cfdb353a73184e29db8da
Author: Adam Langley <agl@golang.org>
Date:   Fri Sep 30 14:48:11 2016 -0700

    crypto/ecdsa: correct code comment.
    
    The code comment mixed up max and min. In this case, min is correct
    because this entropy is only used to make the signature scheme
    probabilistic. (I.e. if it were fixed then the scheme would still be
    secure except that key.Sign(foo) would always give the same result for a
    fixed key and foo.)
    
    For this purpose, 256-bits is plenty.
    
    Fixes #16819.
    
    Change-Id: I309bb312b775cf0c4b7463c980ba4b19ad412c36
    Reviewed-on: https://go-review.googlesource.com/30153
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 49aa1d791be26de71ba7ed02d6c6cd1dd0092b71
Author: Adam Langley <agl@golang.org>
Date:   Fri Sep 30 14:16:12 2016 -0700

    crypto/x509: return better error when a certificate contains no names.
    
    Currently, if a certificate contains no names (that we parsed),
    verification will return the confusing error:
        x509: certificate is valid for , not example.com.
    
    This change improves the error for that situation.
    
    Fixes #16834.
    
    Change-Id: I2ed9ed08298d7d50df758e503bdb55277449bf55
    Reviewed-on: https://go-review.googlesource.com/30152
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e4dafa32620e80e4e39937d8e2033fb2ee6085f8
Author: Adam Langley <agl@golang.org>
Date:   Fri Sep 30 16:54:54 2016 -0700

    crypto/x509: fix name constraints handling.
    
    This change brings the behaviour of X.509 name constraints into line
    with NSS[1]. In this area, the behavior specified by the RFC and by NIST
    differs and this code follows the NIST behaviour.
    
    [1] https://github.com/servo/nss/blob/master/lib/certdb/genname.c
    
    Fixes #16347, fixes #14833.
    
    Change-Id: I5acd1970041291c2e3936f5b1fd36f2a0338e613
    Reviewed-on: https://go-review.googlesource.com/30155
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2d573eee8ae532a3720ef4efbff9c8f42b6e8217
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sat Jul 23 15:41:57 2016 -0700

    cmd/compile: improve error message for wrong number of arguments to return
    
    Fixes #4215.
    Fixes #6750.
    
    Improves the error message for wrong number of arguments by comparing
    the signature of the return call site arguments, versus the function's
    expected return arguments.
    
    In this CL, the signature representation of:
    + ideal numbers(TIDEAL) ie float*, complex*, rune, int is
    "number" instead of "untyped number".
    + idealstring is "string" instead of "untyped string".
    + idealbool is "bool" instead of "untyped bool".
    
    However, the representation of other types remains as the compiler
    would produce.
    
    * Example 1(in the error messages, if all lines were printed):
    $ cat main.go && go run main.go
    package main
    
    func foo() (int, int) {
      return 2.3
    }
    
    func foo2() {
      return int(2), 2
    }
    
    func foo3(v int) (a, b, c, d int) {
      if v >= 5 {
        return 1
      }
      return 2, 3
    }
    
    func foo4(name string) (string, int) {
      switch name {
      case "cow":
        return "moo"
      case "dog":
        return "dog", 10, true
      case "fish":
        return ""
      default:
        return "lizard", 10
      }
    }
    
    type S int
    type T string
    type U float64
    
    func foo5() (S, T, U) {
      if false {
        return ""
      } else {
        ptr := new(T)
        return ptr
      }
      return new(S), 12.34, 1 + 0i, 'r', true
    }
    
    func foo6() (T, string) {
      return "T"
    }
    
    ./issue4215.go:4: not enough arguments to return, got (number) want (int, int)
    ./issue4215.go:8: too many arguments to return, got (int, number) want ()
    ./issue4215.go:13: not enough arguments to return, got (number) want (int, int, int, int)
    ./issue4215.go:15: not enough arguments to return, got (number, number) want (int, int, int, int)
    ./issue4215.go:21: not enough arguments to return, got (string) want (string, int)
    ./issue4215.go:23: too many arguments to return, got (string, number, bool) want (string, int)
    ./issue4215.go:25: not enough arguments to return, got (string) want (string, int)
    ./issue4215.go:37: not enough arguments to return, got (string) want (S, T, U)
    ./issue4215.go:40: not enough arguments to return, got (*T) want (S, T, U)
    ./issue4215.go:42: too many arguments to return, got (*S, number, number, number, bool) want (S, T, U)
    ./issue4215.go:46: not enough arguments to return, got (string) want (T, string)
    ./issue4215.go:46: too many errors
    
    * Example 2:
    $ cat 6750.go && go run 6750.go
    package main
    
    import "fmt"
    
    func printmany(nums ...int) {
      for i, n := range nums {
        fmt.Printf("%d: %d\n", i, n)
      }
      fmt.Printf("\n")
    }
    
    func main() {
      printmany(1, 2, 3)
      printmany([]int{1, 2, 3}...)
      printmany(1, "abc", []int{2, 3}...)
    }
    ./issue6750.go:15: too many arguments in call to printmany, got (number, string, []int) want (...int)
    
    Change-Id: I6fdce78553ae81770840070e2c975d3e3c83d5d8
    Reviewed-on: https://go-review.googlesource.com/25156
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2878cf14f3bb4c097771e50a481fec43962d7401
Author: Adam Langley <agl@golang.org>
Date:   Fri Sep 30 12:55:25 2016 -0700

    crypto/tls: simplify keylog tests.
    
    Since there's no aspect of key logging that OpenSSL can check for us,
    the tests for it might as well just connect to another goroutine as this
    is lower-maintainance.
    
    Change-Id: I746d1dbad1b4bbfc8ef6ccf136ee4824dbda021e
    Reviewed-on: https://go-review.googlesource.com/30089
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joonas Kuorilehto <joneskoo@derbian.fi>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7b40b0c3a332cbfaa1eb17bdafd2ddf12119ec45
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Wed Sep 28 01:54:38 2016 -0700

    strings, bytes: panic if Repeat overflows or if given a negative count
    
    Panic if Repeat is given a negative count or
    if the value of (len(*) * count) is detected
    to overflow.
    We panic because we cannot change the
    signature of Repeat to return an error.
    
    Fixes #16237
    
    Change-Id: I9f5ba031a5b8533db0582d7a672ffb715143f3fb
    Reviewed-on: https://go-review.googlesource.com/29954
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d166a369a89ef2d81efdc5d49fa782ee1c0186c4
Author: Matt Layher <mdlayher@gmail.com>
Date:   Sat Oct 1 10:13:52 2016 -0400

    bufio: remove redundant Writer.flush method
    
    Fixes #17232
    
    Change-Id: I34df86f79b643dce9f054c6df6782e6037c06910
    Reviewed-on: https://go-review.googlesource.com/30158
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 05f599594ac4f8db63d6a2d628b6ba5781273cad
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Sat Oct 1 15:41:03 2016 +0900

    syscall: re-enable TestPassFD on dragonfly
    
    At least it works well on DragonFly BSD 4.6.
    
    Change-Id: I3b210745246c6d8d42e32ba65ee3b9a17d171ff7
    Reviewed-on: https://go-review.googlesource.com/30170
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 09fb7956fa277912d1af9dbebbbfba7502e3a051
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 30 20:31:26 2016 +0000

    net/http: don't sniff Request.Body on 100-continue requests in Transport
    
    Also, update bundled http2 to x/net git rev 0d8126f to include
    https://golang.org/cl/30150, the HTTP/2 version of this fix.
    
    Fixes #16002
    
    Change-Id: I8da1ca98250357aec012e3e85c8b13acfa2f3fec
    Reviewed-on: https://go-review.googlesource.com/30151
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 360f2e43b78a3ea119ea8dce9649f7c1227d793b
Author: Mike Appleby <mike@app.leby.org>
Date:   Wed Sep 28 16:01:27 2016 -0500

    runtime: sleep on CLOCK_MONOTONIC in futexsleep1 on freebsd
    
    In FreeBSD 10.0, the _umtx_op syscall was changed to allow sleeping on
    any supported clock, but the default clock was switched from a monotonic
    clock to CLOCK_REALTIME.
    
    Prior to 10.0, the __umtx_op_wait* functions ignored the fourth argument
    to _umtx_op (uaddr1), expected the fifth argument (uaddr2) to be a
    struct timespec pointer, and used a monotonic clock (nanouptime(9)) for
    timeout calculations.
    
    Since 10.0, if callers want a clock other than CLOCK_REALTIME, they must
    call _umtx_op with uaddr1 set to a value greater than sizeof(struct
    timespec), and with uaddr2 as pointer to a struct _umtx_time, rather
    than a timespec. Callers can set the _clockid field of the struct
    _umtx_time to request the clock they want.
    
    The relevant FreeBSD commit:
        https://svnweb.freebsd.org/base?view=revision&revision=232144
    
    Fixes #17168
    
    Change-Id: I3dd7b32b683622b8d7b4a6a8f9eb56401bed6bdf
    Reviewed-on: https://go-review.googlesource.com/30154
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d1f4e0413fd2b5cb78a7b645e802565f202d1926
Author: Mike Appleby <mike@app.leby.org>
Date:   Fri Sep 30 19:43:42 2016 -0500

    time: update comment to reflect correct file path.
    
    Update cross-reference in the comment for runtimeTimer to point to the
    new go file instead of the old .h file.
    
    Change-Id: Iddb3614c41e1989096d6caf77d6c0d5781005181
    Reviewed-on: https://go-review.googlesource.com/30157
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit eca4e446115be5653a3963c37459a263569390c5
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Aug 2 18:42:58 2016 -0700

    cmd/doc: perform type grouping for constants and variables
    
    In golang.org/cl/22354, we added functionality to group functions under the
    type that they construct to. In this CL, we extend the same concept to
    constants and variables. This makes the doc tool more consistent with what
    the godoc website does.
    
    $ go doc reflect | egrep "ChanDir|Kind|SelectDir"
    <<<
    // Before:
    const RecvDir ChanDir = 1 << iota ...
    const Invalid Kind = iota ...
    type ChanDir int
    type Kind uint
    type SelectDir int
        func ChanOf(dir ChanDir, t Type) Type
    
    // After:
    type ChanDir int
        const RecvDir ChanDir = 1 << iota ...
    type Kind uint
        const Invalid Kind = iota ...
    type SelectDir int
        const SelectSend SelectDir ...
        func ChanOf(dir ChanDir, t Type) Type
    >>>
    
    Furthermore, a fix was made to ensure that the type was printed in constant
    blocks when the iota was applied on an unexported field.
    
    $ go doc reflect SelectSend
    <<<
    // Before:
    const (
            SelectSend    // case Chan <- Send
            SelectRecv    // case <-Chan:
            SelectDefault // default
    )
    
    // After:
    const (
            SelectSend    SelectDir // case Chan <- Send
            SelectRecv              // case <-Chan:
            SelectDefault           // default
    )
    >>>
    
    Fixes #16569
    
    Change-Id: I26124c3d19e50caf9742bb936803a665e0fa6512
    Reviewed-on: https://go-review.googlesource.com/25419
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c5f064ee49e98c00c7959fdf095e2c61ff0747b8
Author: Matt Layher <mdlayher@gmail.com>
Date:   Fri Sep 30 17:23:24 2016 -0400

    context: discourage use of basic types as keys in WithValue
    
    Fixes #17302
    
    Change-Id: I375d5d4f2714ff415542f4fe56a548e53c5e8ba6
    Reviewed-on: https://go-review.googlesource.com/30134
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca04091f5be4134291142cc4e7e577d0f627e788
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 30 18:12:37 2016 +0000

    reflect: add Swapper func
    
    Swapper returns a func that swaps two elements in a slice.
    
    Updates #16721
    
    Change-Id: I7f2287a675c10a05019e02b7d62fb870af31216f
    Reviewed-on: https://go-review.googlesource.com/30088
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit 9491e7d65e09644eb7db4e2ed5ff0139571cedf3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 30 10:40:58 2016 -0700

    net/http: refactor testing of Request.Body on 0 ContentLength
    
    Code movement only, to look more like the equivalent http2 code, and
    to make an upcoming fix look more obvious.
    
    Updates #16002 (to be fixed once this code is in)
    
    Change-Id: Iaa4f965be14e98f9996e7c4624afe6e19bed1a80
    Reviewed-on: https://go-review.googlesource.com/30087
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit ab6ba99484b637bad0c5a5fa2c590834c14746c7
Author: David Benjamin <davidben@google.com>
Date:   Fri Jul 1 16:41:09 2016 -0400

    crypto/tls: Fix c.in.decrypt error handling.
    
    readRecord was not returning early if c.in.decrypt failed and ran
    through the rest of the function. It does set c.in.err, so the various
    checks in the callers do ultimately notice before acting on the result,
    but we should avoid running the rest of the function at all.
    
    Also rename 'err' to 'alertValue' since it isn't actually an error.
    
    Change-Id: I6660924716a85af704bd3fe81521b34766238695
    Reviewed-on: https://go-review.googlesource.com/24709
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>

commit 01661612e433deadec99229c6075baa4174ac743
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Fri Sep 30 11:27:52 2016 +0200

    cmd/compile: update error messages in Mpint, Mpflt methods
    
    CL 20909 gave Mpint methods nice go-like names, but it
    didn't update the names in the error strings. Fix them.
    
    Same for a couple of Mpflt methods.
    
    Change-Id: I9c99653d4b922e32fd5ba18aba768a589a4c7869
    Reviewed-on: https://go-review.googlesource.com/30091
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 962dc4b44d5260e72dad8d636cb09bcf7f4aa6bb
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Sep 27 20:30:01 2016 -0400

    cmd/compile: improve load/store merging on s390x
    
    This commit makes the process of load/store merging more incremental
    for both big and little endian operations. It also adds support for
    32-bit shifts (needed to merge 16- and 32-bit loads/stores).
    
    In addition, the merging of little endian stores is now supported.
    Little endian stores are now up to 30 times faster.
    
    Change-Id: Iefdd81eda4a65b335f23c3ff222146540083ad9c
    Reviewed-on: https://go-review.googlesource.com/29956
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 41fa42b4475fda8b0c4205827ce0e2388608cb72
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Fri Sep 30 10:35:03 2016 +0200

    cmd/compile: delete unused Convconst function
    
    Convconst is not used in the new backend, and all its callers
    were deleted in CL 29168 (cmd/compile: delete lots of the legacy
    backend). iconv was an helper function for Convconst.
    
    Updates #16357
    
    Change-Id: I65c7345586d7af81cdc2fb09c68f744ffb161a17
    Reviewed-on: https://go-review.googlesource.com/30090
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 893d6866213ca539195076f0e3338da99f321c9c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Sep 29 18:05:06 2016 -0700

    net/http: update bundled http2, add h2 Transport.IdleConnTimeout tests
    
    Updates bundled http2 to x/net git rev a333c53 for:
    
       http2: add Transport support for IdleConnTimeout
       https://golang.org/cl/30075
    
    And add tests.
    
    The bundled http2 also includes a change adding a Ping method to
    http2.ClientConn, but that type isn't exposed in the standard
    library. Nevertheless, the code gets compiled and adds a dependency on
    "crypto/rand", requiring an update to go/build's dependency
    test. Because net/http already depends on crypto/tls, which uses
    crypto/rand, it's not really a new dependency.
    
    Fixes #16808
    
    Change-Id: I1ec8666ea74762f27c70a6f30a366a6647f923f7
    Reviewed-on: https://go-review.googlesource.com/30078
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 441502154fa5f78e93c9c7985fbea78a02c21f4f
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Sep 29 20:21:52 2016 -0400

    runtime: remove defer from standard cgo call
    
    The endcgo function call is currently deferred in case a cgo
    callback into Go panics and unwinds through cgocall. Typical cgo
    calls do not have callbacks into Go, and even fewer panic, so we
    pay the cost of this defer for no typical benefit.
    
    Amazingly, there is another defer on the cgocallback path also used
    to cleanup in case the Go code called by cgo panics. This CL folds
    the first defer into the second, to reduce the cost of typical cgo
    calls.
    
    This reduces the overhead for a no-op cgo call significantly:
    
            name       old time/op  new time/op  delta
            CgoNoop-8  93.5ns ± 0%  51.1ns ± 1%  -45.34%  (p=0.016 n=4+5)
    
    The total effect between Go 1.7 and 1.8 is even greater, as CL 29656
    reduced the cost of defer recently. Hopefully a future Go release
    will drop the cost of defer to nothing, making this optimization
    unnecessary. But until then, this is nice.
    
    Change-Id: Id1a5648f687a87001d95bec6842e4054bd20ee4f
    Reviewed-on: https://go-review.googlesource.com/30080
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9828b7c468029d54e90846e5e2fc23fd6d39782a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 29 21:34:44 2016 -0700

    runtime, syscall: use FP instead of SP for parameters
    
    Consistently access function parameters using the FP pseudo-register
    instead of SP (e.g., x+0(FP) instead of x+4(SP) or x+8(SP), depending
    on register size). Two reasons: 1) doc/asm says the SP pseudo-register
    should use negative offsets in the range [-framesize, 0), and 2)
    cmd/vet only validates parameter offsets when indexed from the FP
    pseudo-register.
    
    No binary changes to the compiled object files for any of the affected
    package/OS/arch combinations.
    
    Change-Id: I0efc6079bc7519fcea588c114ec6a39b245d68b0
    Reviewed-on: https://go-review.googlesource.com/30085
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 79db1625b929b8dad46c1537175b9412fd020851
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 29 19:09:36 2016 -0700

    cmd/compile: eliminate stkdelta
    
    At this point in the compiler we haven't assigned Xoffset values for
    PAUTO variables anyway, so just immediately store the stack offsets
    into Xoffset rather than into a global map.
    
    Change-Id: I61eb471c857c8b145fd0895cbd98fd4e8d3c3365
    Reviewed-on: https://go-review.googlesource.com/30081
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit bb2bbfa08630c65b8751159515f3a22ec5f933ee
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 29 16:22:43 2016 -0700

    cmd/compile: split Addrconst out of Naddr
    
    There are only three Prog types that we were creating with an OLITERAL
    Node: ATEXT, ATYPE, and AFUNCDATA. ATEXT's value we later overwrite in
    defframe, and ATYPE's we don't even need. AFUNCDATA only needs integer
    constants, so get rid of all the non-int constant logic and skip
    creating a Node representation for the constant.
    
    While here, there are a few other Naddr code paths that are no longer
    needed, so turn those into Fatalfs.
    
    Passes toolstash/buildall.
    
    Change-Id: I4cc9b92c3011890afd4f31ebeba8b1b42b753cab
    Reviewed-on: https://go-review.googlesource.com/30074
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 214bf6809791170b88b41249850f2f01534725c4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Sep 29 19:35:43 2016 -0700

    net/http: remove TODO about the Server's base context
    
    I decided not to expand the API for this per discusion on #16220.
    
    Fixes #16220
    
    Change-Id: I65cb2eacd4ec28c79438a8f7c30024524a484ce6
    Reviewed-on: https://go-review.googlesource.com/30082
    Reviewed-by: Daniel Theophanes <kardianos@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit dd748cf3141d45eeeedcb9b88aa11e47b16a0008
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 29 15:43:10 2016 -0700

    cmd/compile: make Afunclit the default/only behavior for Naddr
    
    Naddr used to translate PFUNC Nodes into references to the function
    literal wrapper, and then Afunclit could be used to rewrite it to
    reference the function text itself. But now everywhere we use Naddr on
    PFUNC Nodes, we immediately call Afunclit anyway. So just merge
    Afunclit's behavior into Naddr.
    
    Passes toolstash/buildall.
    
    Change-Id: If2ca6d7f314c1a0711df9b8209aace16ba4b8bc0
    Reviewed-on: https://go-review.googlesource.com/30073
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d2df8498f366669acbae24f38e3683b3acdab102
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Wed Sep 28 12:51:39 2016 -0700

    database/sql: close Rows when context is cancelled
    
    To prevent leaking connections, close any open Rows when the
    context is cancelled. Also enforce context cancel while reading
    rows off of the wire.
    
    Change-Id: I62237ecdb7d250d6734f6ce3d2b0bcb16dc6fda7
    Reviewed-on: https://go-review.googlesource.com/29957
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6dc356a76a405ff12c884ab0a4acb2296d1618b7
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 29 15:08:37 2016 -0700

    cmd/compile/internal/ssa: erase register copies deterministically
    
    Fixes #17288.
    
    Change-Id: I2ddd01d14667d5c6a2e19bd70489da8d9869d308
    Reviewed-on: https://go-review.googlesource.com/30072
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c1e06dcb611822ba3c881b170f278d18237372c9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Sep 29 08:51:29 2016 -0700

    net/http: use atomic.Value for Transport's alternate protocol map
    
    Fix an old TODO and use atomic.Value for holding the Transport's
    alternate protocol map. It is very frequently accessed and almost
    never set or updated.
    
    Change-Id: Ic5a71c504bdac76678114c6390d1fc0673e07aa9
    Reviewed-on: https://go-review.googlesource.com/29967
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8e69d43b32be578cd36eebe491b6e1205dbf32a4
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 27 20:50:57 2016 +0000

    net: add Buffers type, do writev on unix
    
    No fast path currently for solaris, windows, nacl, plan9.
    
    Fixes #13451
    
    Change-Id: I24b3233a2e3a57fc6445e276a5c0d7b097884007
    Reviewed-on: https://go-review.googlesource.com/29951
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ffd1c781b77aab542713b66ef387fa9307e4060b
Author: Nodir Turakulov <nodir@google.com>
Date:   Sat Sep 5 06:38:13 2015 -0700

    html/template: check "type" attribute in <script>
    
    Currently any script tag is treated as a javascript container, although
    <script type="text/template"> must not be. Check "type" attribute of
    "script" tag. If it is present and it is not a JS MIME type, do not
    transition to elementScript state.
    
    Fixes #12149, where // inside text template was treated as regexp.
    Fixes #6701
    
    Change-Id: I8fc9e504f7280bdd800f40383c061853665ac8a2
    Reviewed-on: https://go-review.googlesource.com/14336
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Russ Cox <rsc@golang.org>

commit f5516559e65175887f2fadb73cd8e5fdfc44bcd6
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 29 11:38:47 2016 -0700

    cmd/compile/internal/x86: fix zero-range merging logic
    
    All other architectures merge stack-zeroing ranges if there are at
    most two pointers/registers of memory between them, but x86 is
    erroneously coded to require *exactly* two.
    
    Shaves a tiny amount of text size off cmd/go when building for
    GOARCH=386 and eliminates an unnecessary inconsistency between x86's
    defframe and the other GOARCHes'.
    
       text    data     bss     dec     hex filename
    5241015  191051   93336 5525402  544f9a go.before
    5240224  191051   93336 5524611  544c83 go.after
    
    Change-Id: Ib15ec8c07bca11e824640f0ab32abfc4bb160496
    Reviewed-on: https://go-review.googlesource.com/30050
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2b49d129c48b0036ee595fbf7b91a0e9292f87ee
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Thu Sep 29 19:49:36 2016 +0200

    cmd/compile: delete unused (*Node) SetInt, SetBigInt, Bool
    
    Introduced in CL 9263 (prepare to unexport gc.Mp*) and CL 9267
    (prepare Node.Val to be unexported), their only callers were in
    the old backend and all got deleted in CL 29168 (cmd/compile:
    delete lots of the legacy backend).
    
    Update #16357
    
    Change-Id: I0a5d76b98b418e8ec0984c033c3bc0ac3fc5f38a
    Reviewed-on: https://go-review.googlesource.com/29997
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6fea452e38012e167e8a8f08f571e0240b248c97
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Sep 2 20:15:12 2016 -0700

    archive/tar: move parse/format functionality into strconv.go
    
    Move all parse/format related functionality into strconv.go
    and thoroughly test them. This also reduces the amount of noise
    inside reader.go and writer.go.
    
    There was zero functionality change other than moving code around.
    
    Change-Id: I3bc288d10c20ebb3814b30b75d8acd7be62b85d7
    Reviewed-on: https://go-review.googlesource.com/28470
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a09e1de0ea7fdc30f3761d12fe52248946c08205
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Sep 16 16:46:19 2016 -0700

    net/http: document how Request.Cookie deals with duplicate cookies
    
    RFC 6265, section 4.2.2 says:
    <<<
    Although cookies are serialized linearly in the Cookie header,
    servers SHOULD NOT rely upon the serialization order.  In particular,
    if the Cookie header contains two cookies with the same name (e.g.,
    that were set with different Path or Domain attributes), servers
    SHOULD NOT rely upon the order in which these cookies appear in the
    header.
    >>>
    
    This statement seems to indicate that cookies should conceptually
    be thought of as a map of keys to sets of values (map[key][]value).
    However, in practice, everyone pretty much treats cookies as a
    map[key]value and the API for Request.Cookie seems to indicate that.
    
    We should update the documentation for Request.Cookie to warn the
    user what happens when there is are multiple cookies with the same
    key. I deliberately did not want to say *which* cookie is returned.
    
    Change-Id: Id3e0e24b2b14ca2d9ea8b13f82ba739edaa71cf0
    Reviewed-on: https://go-review.googlesource.com/29364
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 518cc7f3079bbd5ad141efb1e16c5a6eae52b831
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 29 11:00:47 2016 -0700

    cmd/internal/obj/arm: cleanup some unnecessary temps and conversions
    
    Change-Id: I573278c9aee80e62463b2542774dabeec7c3b098
    Reviewed-on: https://go-review.googlesource.com/29969
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 985d3d307c3669094f77b52caffef60157b7d648
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Sep 29 09:09:14 2016 -0700

    net: make proto and port lookups fall back to baked-in maps on Windows
    
    In https://golang.org/cl/28951 I cleaned up the lookupProtocol and
    lookupPort paths to be consistently case-insensitive across operating
    systems and to share the same baked-in maps of port & proto values
    that can be relied on to exist on any platform.
    
    I missed the fallback to the baked-in maps on Windows, though, which
    broke Windows XP. This should fix it.
    
    Fixes #17175
    
    Change-Id: Iecd434fb684304137ee27f5521cfaa8c351a1bde
    Reviewed-on: https://go-review.googlesource.com/29968
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d58219e50ba1fd9bf577be7332bdcabe0ef8b7d5
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Thu Sep 29 18:46:24 2016 +0200

    cmd/compile: delete unused IntLiteral function
    
    IntLiteral was only called by the gins functions in
    cmd/compile/internal/{arm64,mips64,ppc64}/gsubr.go
    but CL 29220 (cmd/compile: remove gins) deleted them,
    so IntLiteral is now unused.
    
    Change-Id: I2652b6d2ace6fdadc1982f65e749f3982513371e
    Reviewed-on: https://go-review.googlesource.com/29996
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c5434f2973a87acff76bac359236e690d632ce95
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Thu Sep 29 13:59:10 2016 +0200

    time: update test for tzdata-2016g
    
    Fixes #17276
    
    Change-Id: I0188cf9bc5fdb48c71ad929cc54206d03e0b96e4
    Reviewed-on: https://go-review.googlesource.com/29995
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 731b3ed18dcb854912cb06b3486bb633917e4cb7
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Wed Sep 14 15:23:41 2016 +0300

    math: make sqrt smaller on AMD64
    
    This makes function fit in 16 bytes, saving 16 bytes.
    
    Change-Id: Iac5d2add42f6dae985b2a5cbe19ad4bd4bcc92ec
    Reviewed-on: https://go-review.googlesource.com/29151
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit fedb0b30188952dc082672cbd45b39a49136d29c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Sep 29 09:22:01 2016 -0400

    cmd/internal/obj/arm: optimize MOVW $-off(R), R
    
    When offset < 0 and -offset fits in instruction, generate SUB
    instruction, instead of ADD with constant from the pool.
    
    Fixes #13280.
    
    Change-Id: I57d97fe9300fe1f6554365e2262393ef50acbdd3
    Reviewed-on: https://go-review.googlesource.com/30014
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 26531b3846694b311aec87fc4f5de65b4cc48a44
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Wed Sep 14 16:56:24 2016 +0300

    cmd/internal/obj/x86: cleanup
    
    Remove duplicate vars, commented out code  and duplicate lines.
    When choosing between 2 aliases, on with more uses was chosen.
    
    Change-Id: I7bc15f1693de3f6d378cef9c09469970a659db40
    Reviewed-on: https://go-review.googlesource.com/29152
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 03a1dc3522f99bf5045fc41730e6682c1cc7402a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Sep 28 15:04:00 2016 -0700

    cmd/compile: don't crash on (unsafe.Sizeof)(0)
    
    Fixes #17270.
    
    Change-Id: I4affa57e10baf1a758bc0977265d160f220b2945
    Reviewed-on: https://go-review.googlesource.com/29960
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4d07d3e29c467484801b84dfeb762d2ee00979a9
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Sep 28 10:20:24 2016 -0400

    cmd/compile: re-enable nilcheck removal for newobject
    
    Also add compiler debug ouput and add a test.
    
    Fixes #15390.
    
    Change-Id: Iceba1414c29bcc213b87837387bf8ded1f3157f1
    Reviewed-on: https://go-review.googlesource.com/30011
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 456a01ac47c1473d6b241c56eb8db0cb832d9be2
Author: Blixt <me@blixt.nyc>
Date:   Wed Aug 24 12:59:01 2016 -0400

    encoding/binary: add bool support
    
    This change adds support for decoding and encoding the bool type. The
    encoding is a single byte, with a zero value for false and a non-zero
    value for true.
    
    Closes #16856.
    
    Change-Id: I1d1114b320263691473bb100cad0f380e0204186
    Reviewed-on: https://go-review.googlesource.com/28514
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 5e7bae5082dcc2cd241b40c2bf50db6b28943827
Author: Andrew Gerrand <adg@golang.org>
Date:   Wed Sep 28 20:15:57 2016 +1000

    doc: add testing Name method to go1.8.txt
    
    Change-Id: I6d413f747e6a6c30c5e0e9afdffd5ec18dce7e08
    Reviewed-on: https://go-review.googlesource.com/29974
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a0d330f1ddeaa55cbd35191814546fd98e09a117
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Sep 28 17:26:12 2016 +0900

    runtime, runtime/cgo: revert CL 18814; don't drop signal stack in new thread on dragonfly
    
    This change reverts CL 18814 which is a workaroud for older DragonFly
    BSD kernels, and fixes #13945 and #13947 in a more general way the
    same as other platforms except NetBSD.
    
    This is a followup to CL 29491.
    
    Updates #16329.
    
    Change-Id: I771670bc672c827f2b3dbc7fd7417c49897cb991
    Reviewed-on: https://go-review.googlesource.com/29971
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit eb268cb321edf6e2bbaa832acb2e61db6b081f98
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Sep 27 22:24:51 2016 -0700

    runtime: minor simplifications to signal code
    
    Change setsig, setsigstack, getsig, raise, raiseproc to take uint32 for
    signal number parameter, as that is the type mostly used for signal
    numbers.  Same for dieFromSignal, sigInstallGoHandler, raisebadsignal.
    
    Remove setsig restart parameter, as it is always either true or
    irrelevant.
    
    Don't check the handler in setsigstack, as the only caller does that
    anyhow.
    
    Don't bother to convert the handler from sigtramp to sighandler in
    getsig, as it will never be called when the handler is sigtramp or
    sighandler.
    
    Don't check the return value from rt_sigaction in the GNU/Linux version
    of setsigstack; no other setsigstack checks it, and it never fails.
    
    Change-Id: I6bbd677e048a77eddf974dd3d017bc3c560fbd48
    Reviewed-on: https://go-review.googlesource.com/29953
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 594cddd62598dcfc1fe6ee1c3e5978063f498dc1
Author: Andrew Gerrand <adg@golang.org>
Date:   Wed Sep 28 13:31:33 2016 +1000

    testing: add Name method to *T and *B
    
    Fixes #17231
    
    Change-Id: I0d6007ab504f2277cb6affc9e2050157a6ad4d5e
    Reviewed-on: https://go-review.googlesource.com/29970
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit db82cf4e506938a36a57a64dbe1f79eb0365ea89
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Mon Sep 26 16:44:35 2016 +1000

    runtime: use RtlGenRandom instead of CryptGenRandom
    
    This change replaces the use of CryptGenRandom with RtlGenRandom in
    Windows to generate cryptographically random numbers during process
    startup. RtlGenRandom uses the same RNG as CryptGenRandom, but it has many
    fewer DLL dependencies and so does not affect process startup time as
    much.
    
    This makes running simple Go program on my computers faster.
    
    Windows XP:
    benchmark                      old ns/op     new ns/op     delta
    BenchmarkRunningGoProgram-2     47408573      10784148      -77.25%
    
    Windows 7 (VM):
    benchmark                    old ns/op     new ns/op     delta
    BenchmarkRunningGoProgram     16260390      12792150      -21.33%
    
    Windows 7:
    benchmark                      old ns/op     new ns/op     delta
    BenchmarkRunningGoProgram-2     13600778      10050574      -26.10%
    
    Fixes #15589
    
    Change-Id: I2816239a2056e3d4a6dcd86a6fa2bb619c6008fe
    Reviewed-on: https://go-review.googlesource.com/29700
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 98938189a16a764007bce7fcd4bfeb2386043208
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 27 14:39:27 2016 -0700

    cmd/compile: remove duplicate nilchecks
    
    Mark nil check operations as faulting if their arg is zero.
    This lets the late nilcheck pass remove duplicates.
    
    Fixes #17242.
    
    Change-Id: I4c9938d8a5a1e43edd85b4a66f0b34004860bcd9
    Reviewed-on: https://go-review.googlesource.com/29952
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit ba94dd34385af3352660fb4bfa2a2d97fb937088
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Sep 26 13:21:21 2016 -0400

    math: add some assembly implementations on ARM64
    
    Also add GP<->FP move addressing mode to FMOVS, FMOVD
    instructions.
    
    Ceil-8                 37.1ns ± 0%   7.9ns ± 0%  -78.64%          (p=0.000 n=4+5)
    Dim-8                  20.9ns ± 1%  11.3ns ± 0%  -45.93%          (p=0.008 n=5+5)
    Floor-8                22.9ns ± 0%   7.9ns ± 0%  -65.41%          (p=0.029 n=4+4)
    Gamma-8                 117ns ± 0%    94ns ± 1%  -19.50%          (p=0.016 n=4+5)
    PowInt-8                121ns ± 0%   108ns ± 1%  -11.07%          (p=0.008 n=5+5)
    PowFrac-8               331ns ± 0%   318ns ± 0%   -3.93%          (p=0.000 n=5+4)
    Trunc-8                18.8ns ± 0%   7.9ns ± 0%  -57.83%          (p=0.016 n=4+5)
    
    Change-Id: I709b7f1a914b28adc27414522db551e2630cfb92
    Reviewed-on: https://go-review.googlesource.com/29734
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit a73020f847b3cf8575250569ebefb02573d19224
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 27 18:27:02 2016 +0000

    net/http: add more IDNA2008 tests and fix some omissions
    
    It wasn't lowercasing the string, folding widths, and putting strings
    into NFC form. Do those.
    
    Fixes #13835
    
    Change-Id: Ia3de6159417cacec203b48e206e51d79f945df58
    Reviewed-on: https://go-review.googlesource.com/29860
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>

commit 36c164ec9c8597ec3507bb4aa9390603e9d29f7a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 27 18:28:29 2016 +0000

    vendor: add golang.org/x/text/unicode/norm + x/test/width for IDNA support
    
    Add golang.org/x/text/unicode/norm from x/text git rev a7c02369.
    
    Needed by net/http for IDNA normalization.
    
    Updates #13835
    
    Change-Id: I8b024e179d573f2b093c209a4b9e4f71f7d4a1f2
    Reviewed-on: https://go-review.googlesource.com/29859
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>

commit 15b4d187b8dceb3384dd3bf8ea9f368c517f082d
Author: mike andrews <mra@xoba.com>
Date:   Tue Sep 27 16:22:29 2016 -0400

        encoding/json: fix a bug in the documentation
    
        Documentation made reference to an unknown entity "DisableHTMLEscaping,"
        but I think it actually meant the method "Encoder.SetEscapeHTML."
    
        Fixes #17255
    
    Change-Id: I18fda76f8066110caef85fd33698de83d632e646
    Reviewed-on: https://go-review.googlesource.com/29931
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit fdc167164ecde259bd356cc8e7ae5ccb0903469c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Sep 27 13:42:28 2016 -0700

    runtime: remove sigmask type, use sigset instead
    
    The OS-independent sigmask type was not pulling its weight. Replace it
    with the OS-dependent sigset type. This requires adding an OS-specific
    sigaddset function, but permits removing the OS-specific sigmaskToSigset
    function.
    
    Change-Id: I43307b512b0264ec291baadaea902f05ce212305
    Reviewed-on: https://go-review.googlesource.com/29950
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e13df02e5fbf2c0cd8811b826a8c8567efa882dd
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Mon Sep 19 11:19:32 2016 -0700

    database/sql: add context methods
    
    Add context methods to sql and sql/driver methods. If
    the driver doesn't implement context methods the connection
    pool will still handle timeouts when a query fails to return
    in time or when a connection is not available from the pool
    in time.
    
    There will be a follow-up CL that will add support for
    context values that specify transaction levels and modes
    that a driver can use.
    
    Fixes #15123
    
    Change-Id: Ia99f3957aa3f177b23044dd99d4ec217491a30a7
    Reviewed-on: https://go-review.googlesource.com/29381
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 54a72d90f62030034f03cacbac1d1ec02c0444c6
Author: Luigi Riefolo <luigi.riefolo@gmail.com>
Date:   Tue Sep 27 03:02:40 2016 +0200

    go/doc: add IsPredeclared function
    
    IsPredeclared allows simplifying src/golang.org/x/tools/godoc/linkify.go
    
    Change-Id: I56b3223896f844630bc2e940255572d1682f0d06
    Reviewed-on: https://go-review.googlesource.com/29870
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 097a581dc0d97efac1dfbe5d79819bbf6bf681a7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Sep 27 07:20:10 2016 -0700

    runtime: simplify signalstack by dropping nil as argument
    
    Change the two calls to signalstack(nil) to inline the code
    instead (it's two lines).
    
    Change-Id: Ie92a05494f924f279e40ac159f1b677fda18f281
    Reviewed-on: https://go-review.googlesource.com/29854
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 60482d8a8b11a3dfdf9b582b9f666694d84bb9c4
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu Sep 22 09:37:28 2016 +0200

    runtime: relax SetFinalizer documentation to allow &local
    
    The SetFinalizer documentation states that
    
    "The argument obj must be a pointer to an object allocated by calling
    new or by taking the address of a composite literal."
    
    which precludes pointers to local variables. According to a comment
    on #6591, this case is expected to work. This CL updates the documentation
    for SetFinalizer accordingly.
    
    Fixes #6591
    
    Change-Id: Id861b3436bc1c9521361ea2d51c1ce74a121c1af
    Reviewed-on: https://go-review.googlesource.com/29592
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 413f1ef4de98f2e98853c3753f785871bfc32e5d
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Sep 27 10:29:43 2016 -0400

    cmd/asm: fix parsing of the s390x VLE{G,F,H,B} instructions
    
    This commit makes the assembler frontend reorder the operands so that
    they are in the order the backend expects. The index should be first
    for consistency with the other vector instructions.
    
    Before this commit no operand order would have been accepted so this
    isn't a breaking change.
    
    Change-Id: I188d57eeb338d27fa1fa6845de0d6d1521b7a6c3
    Reviewed-on: https://go-review.googlesource.com/29855
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a30b5a3d1916deb6e366aa4557d6c21eb835d737
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Sep 27 10:45:05 2016 -0400

    cmd/asm: add s390x instructions BLTU and BLEU
    
    These instructions are the same as BLT and BLE except that they
    also branch if the 'unordered' bit is set in the condition code.
    
    They are already used by the SSA backend. This change allows them
    to be used in hand-written assembly code.
    
    Change-Id: Ie9b5985a5e87ea22e8043567a286e09dce16a2db
    Reviewed-on: https://go-review.googlesource.com/29930
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 17a8ec2c4f702039652a4bc9630d233b454cfae8
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Sep 26 00:45:01 2016 -0400

    cmd/asm, cmd/internal/obj/s390x: improve add/multiply-immediate codegen
    
    Use the A{,G}HI instructions where possible (4 bytes instead of 6 bytes
    for A{,G}FI). Also, use 32-bit operations where appropriate for
    multiplication.
    
    Change-Id: I4041781cda26be52b54e4804a9e71552310762d0
    Reviewed-on: https://go-review.googlesource.com/29733
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3436f0776f4f373b5ba1aacf9f66689c833168b0
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Aug 30 15:25:28 2016 -0400

    reflect, runtime: optimize Value.Call on s390x and add benchmark
    
    Use an MVC loop to copy arguments in runtime.call* rather than copying
    bytes individually.
    
    I've added the benchmark CallArgCopy to test the speed of Value.Call
    for various argument sizes.
    
    name                    old speed      new speed       delta
    CallArgCopy/size=128     439MB/s ± 1%    582MB/s ± 1%   +32.41%  (p=0.000 n=10+10)
    CallArgCopy/size=256     695MB/s ± 1%   1172MB/s ± 1%   +68.67%  (p=0.000 n=10+10)
    CallArgCopy/size=1024    573MB/s ± 8%   4175MB/s ± 2%  +628.11%  (p=0.000 n=10+10)
    CallArgCopy/size=4096   1.46GB/s ± 2%  10.19GB/s ± 1%  +600.52%  (p=0.000 n=10+10)
    CallArgCopy/size=65536  1.51GB/s ± 0%  12.30GB/s ± 1%  +716.30%   (p=0.000 n=9+10)
    
    Change-Id: I87dae4809330e7964f6cb4a9e40e5b3254dd519d
    Reviewed-on: https://go-review.googlesource.com/28096
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bill O'Farrell <billotosyr@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6c43c0c2fdc866bf6d85a4689ad42c42b9c527dd
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Tue Sep 27 17:23:08 2016 +0200

    cmd/compile: remove commented-out old c code
    
    Change-Id: I9b2e6c45f7e83543a06d0aafd08a911f7b6485fd
    Reviewed-on: https://go-review.googlesource.com/29874
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f876fb9baeef1798b2f6c30fde8f695b127fdad2
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Sep 23 09:15:51 2016 -0400

    cmd/compile: move value around before kick it out of register
    
    When allocating registers, before kicking out the existing value,
    copy it to a spare register if there is one. So later use of this
    value can be found in register instead of reload from spill. This
    is very helpful for instructions of which the input and/or output
    can only be in specific registers, e.g. DIV on x86, MUL/DIV on
    MIPS. May also be helpful in general.
    
    For "go build -a cmd/go" on AMD64, reduce "spilled value remains"
    by 1% (not including args, which almost certainly remain).
    
    For the code in issue #16061 on AMD64:
    MaxRem-12   111µs ± 1%    94µs ± 0%  -15.38%  (p=0.008 n=5+5)
    
    Go1 benchmark on AMD64:
    BinaryTree17-12              2.32s ± 2%     2.30s ± 1%    ~     (p=0.421 n=5+5)
    Fannkuch11-12                2.52s ± 0%     2.44s ± 0%  -3.44%  (p=0.008 n=5+5)
    FmtFprintfEmpty-12          39.9ns ± 3%    39.8ns ± 0%    ~     (p=0.635 n=5+4)
    FmtFprintfString-12          114ns ± 1%     113ns ± 1%    ~     (p=0.905 n=5+5)
    FmtFprintfInt-12             102ns ± 6%      98ns ± 1%    ~     (p=0.087 n=5+5)
    FmtFprintfIntInt-12          146ns ± 5%     147ns ± 1%    ~     (p=0.238 n=5+5)
    FmtFprintfPrefixedInt-12     155ns ± 2%     151ns ± 1%  -2.58%  (p=0.008 n=5+5)
    FmtFprintfFloat-12           231ns ± 1%     232ns ± 1%    ~     (p=0.286 n=5+5)
    FmtManyArgs-12               657ns ± 1%     649ns ± 0%  -1.31%  (p=0.008 n=5+5)
    GobDecode-12                6.35ms ± 0%    6.29ms ± 1%    ~     (p=0.056 n=5+5)
    GobEncode-12                5.38ms ± 1%    5.45ms ± 1%    ~     (p=0.056 n=5+5)
    Gzip-12                      209ms ± 0%     209ms ± 1%    ~     (p=0.690 n=5+5)
    Gunzip-12                   31.2ms ± 1%    31.1ms ± 1%    ~     (p=0.548 n=5+5)
    HTTPClientServer-12          123µs ± 4%     130µs ± 8%    ~     (p=0.151 n=5+5)
    JSONEncode-12               14.0ms ± 1%    14.0ms ± 1%    ~     (p=0.421 n=5+5)
    JSONDecode-12               41.2ms ± 1%    41.1ms ± 2%    ~     (p=0.421 n=5+5)
    Mandelbrot200-12            3.96ms ± 1%    3.98ms ± 0%    ~     (p=0.421 n=5+5)
    GoParse-12                  2.88ms ± 1%    2.88ms ± 1%    ~     (p=0.841 n=5+5)
    RegexpMatchEasy0_32-12      68.0ns ± 3%    66.6ns ± 1%  -2.00%  (p=0.024 n=5+5)
    RegexpMatchEasy0_1K-12       728ns ± 8%     682ns ± 1%  -6.26%  (p=0.008 n=5+5)
    RegexpMatchEasy1_32-12      66.8ns ± 2%    66.0ns ± 1%    ~     (p=0.302 n=5+5)
    RegexpMatchEasy1_1K-12       291ns ± 2%     288ns ± 1%    ~     (p=0.111 n=5+5)
    RegexpMatchMedium_32-12      103ns ± 2%     100ns ± 0%  -2.53%  (p=0.016 n=5+4)
    RegexpMatchMedium_1K-12     31.9µs ± 1%    31.3µs ± 0%  -1.75%  (p=0.008 n=5+5)
    RegexpMatchHard_32-12       1.59µs ± 2%    1.59µs ± 1%    ~     (p=0.548 n=5+5)
    RegexpMatchHard_1K-12       48.3µs ± 2%    47.7µs ± 1%    ~     (p=0.222 n=5+5)
    Revcomp-12                   340ms ± 1%     338ms ± 1%    ~     (p=0.421 n=5+5)
    Template-12                 46.3ms ± 1%    46.5ms ± 1%    ~     (p=0.690 n=5+5)
    TimeParse-12                 252ns ± 1%     247ns ± 0%  -1.91%  (p=0.000 n=5+4)
    TimeFormat-12                277ns ± 1%     267ns ± 0%  -3.82%  (p=0.008 n=5+5)
    [Geo mean]                  48.8µs         48.3µs       -0.93%
    
    It has very little effect on binary size and compiler speed.
    compilebench:
    Template       230ms ±10%      231ms ± 8%    ~             (p=0.546 n=9+9)
    Unicode        123ms ± 6%      124ms ± 9%    ~           (p=0.481 n=10+10)
    GoTypes        742ms ± 6%      755ms ± 3%    ~           (p=0.123 n=10+10)
    Compiler       3.10s ± 3%      3.08s ± 1%    ~           (p=0.631 n=10+10)
    
    Fixes #16061.
    
    Change-Id: Id99cdc7a182ee10a704fa0f04e8e0d0809b2ac56
    Reviewed-on: https://go-review.googlesource.com/29732
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 9d4b40f55d2298fcb69e049b031e2e3ce8a1de8c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Sep 27 08:57:02 2016 -0400

    runtime, cmd/compile: implement and use DUFFCOPY on ARM64
    
    Change-Id: I8984eac30e5df78d4b94f19412135d3cc36969f8
    Reviewed-on: https://go-review.googlesource.com/29910
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 7de7d20e9f14c3a8fb9a3bcf6a36a299c74e9ddd
Author: Oliver Tonnhofer <olt@bogosoft.com>
Date:   Tue Sep 27 15:24:00 2016 +0200

    image/png: improve compression by skipping filter for paletted images
    
    Compression of paletted images is more efficient if they are not filtered.
    This patch skips filtering for cbP8 images.
    The improvements are demonstrated at https://github.com/olt/compressbench
    
    Fixes #16196
    
    Change-Id: Ie973aad287cacf9057e394bb01cf0e4448a77618
    Reviewed-on: https://go-review.googlesource.com/29872
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 590f3f0c9dffdadeeec4d9e79af6e0974a574a1b
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sat Sep 24 21:38:58 2016 +0200

    cmd/compile: fix misaligned comments
    
    Realign multi-line comments that got misaligned by the c->go
    conversion.
    
    Change-Id: I584b902e95cf588aa14febf1e0b6dfa499c303c2
    Reviewed-on: https://go-review.googlesource.com/29871
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8f9e2ab55786d37158a3aaf27d054944e0742717
Author: Sam Whited <sam@samwhited.com>
Date:   Mon Sep 26 20:23:36 2016 -0500

    database/sql: add doc comment for ErrTxDone
    
    Change-Id: Idffb82cdcba4985954d061bdb021217f47ff4985
    Reviewed-on: https://go-review.googlesource.com/29850
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9ed0715bb66dbbd0f597f93d0bc70a3d769b1b10
Author: Michal Bohuslávek <mbohuslavek@gmail.com>
Date:   Tue Sep 20 22:56:57 2016 +0100

    math/big: support negative numbers in ModInverse
    
    Fixes #16984
    
    Change-Id: I3a330e82941a068ca6097985af4ab221275fd336
    Reviewed-on: https://go-review.googlesource.com/29299
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>

commit f8b2314c563be4366f645536e8031a132cfdf3dd
Author: Austin Clements <austin@google.com>
Date:   Thu Sep 22 17:08:37 2016 -0400

    runtime: optimize defer code
    
    This optimizes deferproc and deferreturn in various ways.
    
    The most important optimization is that it more carefully arranges to
    prevent preemption or stack growth. Currently we do this by switching
    to the system stack on every deferproc and every deferreturn. While we
    need to be on the system stack for the slow path of allocating and
    freeing defers, in the common case we can fit in the nosplit stack.
    Hence, this change pushes the system stack switch down into the slow
    paths and makes everything now exposed to the user stack nosplit. This
    also eliminates the need for various acquirem/releasem pairs, since we
    are now preventing preemption by preventing stack split checks.
    
    As another smaller optimization, we special case the common cases of
    zero-sized and pointer-sized defer frames to respectively skip the
    copy and perform the copy in line instead of calling memmove.
    
    This speeds up the runtime defer benchmark by 42%:
    
    name           old time/op  new time/op  delta
    Defer-4        75.1ns ± 1%  43.3ns ± 1%  -42.31%   (p=0.000 n=8+10)
    
    In reality, this speeds up defer by about 2.2X. The two benchmarks
    below compare a Lock/defer Unlock pair (DeferLock) with a Lock/Unlock
    pair (NoDeferLock). NoDeferLock establishes a baseline cost, so these
    two benchmarks together show that this change reduces the overhead of
    defer from 61.4ns to 27.9ns.
    
    name           old time/op  new time/op  delta
    DeferLock-4    77.4ns ± 1%  43.9ns ± 1%  -43.31%  (p=0.000 n=10+10)
    NoDeferLock-4  16.0ns ± 0%  15.9ns ± 0%   -0.39%    (p=0.000 n=9+8)
    
    This also shaves 34ns off cgo calls:
    
    name       old time/op  new time/op  delta
    CgoNoop-4   122ns ± 1%  88.3ns ± 1%  -27.72%  (p=0.000 n=8+9)
    
    Updates #14939, #16051.
    
    Change-Id: I2baa0dea378b7e4efebbee8fca919a97d5e15f38
    Reviewed-on: https://go-review.googlesource.com/29656
    Reviewed-by: Keith Randall <khr@golang.org>

commit d211c2d3774d78173e004f0ffb1e2eae9ae19706
Author: Austin Clements <austin@google.com>
Date:   Thu Sep 22 17:02:22 2016 -0400

    runtime: implement getcallersp in Go
    
    This makes it possible to inline getcallersp. getcallersp is on the
    hot path of defers, so this slightly speeds up defer:
    
    name           old time/op  new time/op  delta
    Defer-4        78.3ns ± 2%  75.1ns ± 1%  -4.00%   (p=0.000 n=9+8)
    
    Updates #14939.
    
    Change-Id: Icc1cc4cd2f0a81fc4c8344432d0b2e783accacdd
    Reviewed-on: https://go-review.googlesource.com/29655
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit aaf4099a5cabfee52b1c481f2a30ee0dd02ef247
Author: Austin Clements <austin@google.com>
Date:   Fri Sep 23 11:47:24 2016 -0400

    runtime: update malloc.go documentation
    
    The big documentation comment at the top of malloc.go has gotten
    woefully out of date. Update it.
    
    Change-Id: Ibdb1bdcfdd707a6dc9db79d0633a36a28882301b
    Reviewed-on: https://go-review.googlesource.com/29731
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit f67c9de65621a46905a2f923b35634f74fa8635b
Author: Austin Clements <austin@google.com>
Date:   Fri Sep 9 21:43:50 2016 -0400

    runtime: document MemStats
    
    This documents all fields in MemStats and more clearly documents where
    mstats differs from MemStats.
    
    Fixes #15849.
    
    Change-Id: Ie09374bcdb3a5fdd2d25fe4bba836aaae92cb1dd
    Reviewed-on: https://go-review.googlesource.com/28972
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>

commit 2098e5d39afc3e6f687fcabd7704e8013f9c0dbd
Author: Austin Clements <austin@google.com>
Date:   Thu Sep 15 14:30:31 2016 -0400

    runtime: eliminate memstats.heap_reachable
    
    We used to compute an estimate of the reachable heap size that was
    different from the marked heap size. This ultimately caused more
    problems than it solved, so we pulled it out, but memstats still has
    both heap_reachable and heap_marked, and there are some leftover TODOs
    about the problems with this estimate.
    
    Clean this up by eliminating heap_reachable in favor of heap_marked
    and deleting the stale TODOs.
    
    Change-Id: I713bc20a7c90683d2b43ff63c0b21a440269cc4d
    Reviewed-on: https://go-review.googlesource.com/29271
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit ec9c84c8840124b4cf883ab08f6c2dc6baf20732
Author: Austin Clements <austin@google.com>
Date:   Thu Sep 15 14:08:04 2016 -0400

    runtime: disentangle next_gc from GC trigger
    
    Back in Go 1.4, memstats.next_gc was both the heap size at which GC
    would trigger, and the size GC kept the heap under. When we switched
    to concurrent GC in Go 1.5, we got somewhat confused and made this
    variable the trigger heap size, while gcController.heapGoal became the
    goal heap size.
    
    memstats.next_gc is exposed to the user via MemStats.NextGC, while
    gcController.heapGoal is not. This is unfortunate because 1) the heap
    goal is far more useful for diagnostics, and 2) the trigger heap size
    is just part of the GC trigger heuristic, which means it wouldn't be
    useful to an application even if it tried to use it.
    
    We never noticed this mess because MemStats.NextGC is practically
    undocumented. Now that we're trying to document MemStats, it became
    clear that this field had diverged from its original usefulness.
    
    Clean up this mess by shuffling things back around so that next_gc is
    the goal heap size and the new (unexposed) memstats.gc_trigger field
    is the trigger heap size. This eliminates gcController.heapGoal.
    
    Updates #15849.
    
    Change-Id: I2cbbd43b1d78bdf613cb43f53488bd63913189b7
    Reviewed-on: https://go-review.googlesource.com/29270
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 196df6f0c9ddd7043984cdf5d7becfb647ec1a31
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Sep 26 13:22:08 2016 -0700

    go/ast: better documentation for CallExpr node
    
    Fixes #17222.
    
    Change-Id: Iffffc8cbb8627d06afa9066246b68fa2da4600e3
    Reviewed-on: https://go-review.googlesource.com/29810
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 0a185610321ddbc68142ed8ed2ca3dc2b08578b4
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Sep 26 12:43:21 2016 -0700

    cmd/printer: document that Fprint doesn't match gofmt output
    
    Fixes #16963.
    
    Change-Id: Iaadf0da4ee9cc97146c5e6ac2d93de9ae6893880
    Reviewed-on: https://go-review.googlesource.com/29790
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e2e11f02a4627e4090083d433e6c66602b514ab7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Sep 26 11:35:55 2016 -0700

    runtime: unify Unix implementations of unminit
    
    Change-Id: I2cbb13eb85876ad05a52cbd498a9b86e7a28899c
    Reviewed-on: https://go-review.googlesource.com/29772
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6bcd258095da307dc60ffe1b45b014c0be849dc9
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sat Sep 24 15:53:09 2016 +0200

    math/big: better SetFloat64 example in doc
    
    Fixes #17221
    
    Change-Id: Idaa2af6b8646651ea72195671d1a4b5c370a5a22
    Reviewed-on: https://go-review.googlesource.com/29711
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit ac24388e5e5bdc129451c074a349a982e1d55ffa
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Sep 26 11:14:41 2016 -0700

    runtime: merge setting new signal mask in minit
    
    All the variants that sets the new signal mask in minit do the same
    thing, so merge them. This requires an OS-specific sigdelset function;
    the function already exists for linux, and is now added for other OS's.
    
    Change-Id: Ie96f6f02e2cf09c43005085985a078bd9581f670
    Reviewed-on: https://go-review.googlesource.com/29771
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3390294308462d5ddab95feaf42acc8fde767c98
Author: David Chase <drchase@google.com>
Date:   Mon Sep 26 10:06:10 2016 -0700

    cmd/compile: PPC64, find compare-with-immediate
    
    Added rules for compare double and word immediate,
    including those that use invertflags to cope with
    flipped operands.
    
    Change-Id: I594430a210e076e52299a2cc6ab074dbb04a02bd
    Reviewed-on: https://go-review.googlesource.com/29763
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>

commit 7f1bc53379f548845a23275c2f83d75071cf8e13
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sat Sep 10 13:24:35 2016 +0200

    cmd/compile: only allow integer expressions as keys in array literals
    
    Fixes #16439
    Updates #16679
    
    Change-Id: Idff4b313f29351866b1a649786501adee85fd580
    Reviewed-on: https://go-review.googlesource.com/29011
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit c2735039f3ea4e44a3c1df6ef6715e83bc5257b1
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Sep 25 21:33:27 2016 -0700

    runtime: unify sigtrampgo
    
    Combine the various versions of sigtrampgo into a single function in
    signal_unix.go. This requires defining a fixsigcode method on sigctxt
    for all operating systems; it only does something on Darwin. This also
    requires changing the darwin/amd64 signal handler to call sigreturn
    itself, rather than relying on sigtrampgo to call sigreturn for it. We
    can then drop the Darwin sigreturn function, as it is no longer used.
    
    Change-Id: I5a0b9d2d2c141957e151b41e694efeb20e4b4b9a
    Reviewed-on: https://go-review.googlesource.com/29761
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1906d93bfda1c7b4af51457bc0a137b8418500b7
Author: David Chase <drchase@google.com>
Date:   Mon Sep 26 08:32:49 2016 -0700

    cmd/compile: On PPC, nilcheck load should be MOVBZ
    
    There's no load-signed-byte on PPC, so MOVB
    causes the assembler to macro-expand in a
    useless sign extension.
    
    Fixes #17211.
    
    Change-Id: Ibcd73aea4c94ba6df0a998b0091e45508113be2a
    Reviewed-on: https://go-review.googlesource.com/29762
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 375092bdcbc5b095e1591558952ce537b9fa5fa3
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Sat May 7 21:34:04 2016 +0200

    cmd/compile: fix bogus "fallthrough statement out of place"
    
    When processing a fallthrough, the casebody function in swt.go
    checks that the last statement has indeed Op == OXFALL (not-processed
    fallthrough) before setting it to OFALL (processed fallthrough).
    
    Unfortunately, sometimes the fallthrough statement won't be in the
    last node. For example, in
    
    case 0:
             return func() int {return 1}()
             fallthrough
    
    the compiler generates
    
    autotmp_0 = (func literal)(); return autotmp_0; fallthrough; <node VARKILL>
    
    with an OVARKILL node in the last position. casebody will find that
    last.Op != OXFALL, won't mark the fallthrough as processed, and the
    fallthrough line will cause a "fallthrough statement out of place" error.
    
    To fix this, we change casebody so that it searches for the fallthrough
    statement backwards in the statements list, without assuming that it'll
    be in the last position.
    
    Fixes #13262
    
    Change-Id: I366c6caa7fd7442d365bd7a08cc66a552212d9b2
    Reviewed-on: https://go-review.googlesource.com/22921
    Run-TryBot: Quentin Smith <quentin@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit d15295c6790b70eba0e4a3aa7ddead251aa440da
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Sep 25 13:38:54 2016 -0700

    runtime: unify handling of alternate signal stack
    
    Change all Unix systems to use stackt for the alternate signal
    stack (some were using sigaltstackt). Add OS-specific setSignalstackSP
    function to handle different types for ss_sp field, and unify all
    OS-specific signalstack functions into one. Unify handling of alternate
    signal stack in OS-specific minit and sigtrampgo functions via new
    functions minitSignalstack and setGsignalStack.
    
    Change-Id: Idc316dc69b1dd725717acdf61a1cd8b9f33ed174
    Reviewed-on: https://go-review.googlesource.com/29757
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e6143e17d3e0c3ab8a7bd8357001217eb01dc6c6
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Sep 25 18:31:05 2016 -0700

    net/http: add Client tests for various 3xx redirect codes
    
    Updates #13994
    Updates #16840
    
    Change-Id: Ia3cad5c211e0c688a945ed6b6277c2552592774c
    Reviewed-on: https://go-review.googlesource.com/29760
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5bbb854cee2df329e031e50181ccc022c9d93a85
Author: Gyu-Ho Lee <gyuhox@gmail.com>
Date:   Sat Jun 4 23:26:12 2016 -0700

    net/http/httputil: preallocate trailerKeys slice
    
    To prevent slice growths with append operations.
    
    Change-Id: Icdb745b23cc44dfaf3e16746b94c06997f814e15
    Reviewed-on: https://go-review.googlesource.com/23784
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4383e4387b30ffbd8f85f053e399d53d7eef9330
Author: Antonio Murdaca <runcom@redhat.com>
Date:   Sun Jun 26 12:14:41 2016 +0200

    net/url: avoid if statement
    
    Change-Id: I894a8f49d29dbb6f9265e4b3df5767318b225460
    Signed-off-by: Antonio Murdaca <runcom@redhat.com>
    Reviewed-on: https://go-review.googlesource.com/24492
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5df7f5220f42cb283147ab271cd965720e233759
Author: Sam Whited <sam@samwhited.com>
Date:   Thu Sep 1 09:19:32 2016 -0500

    net/rpc: Add documentation for client.Close
    
    Fixes #16678
    
    Change-Id: I48c2825d4fef55a75d2f99640a7079c56fce39db
    Reviewed-on: https://go-review.googlesource.com/28370
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6ba5b32922c438a608a11561100a8a80abf0fd3a
Author: Anders Pearson <anders@columbia.edu>
Date:   Sun Jul 3 14:22:06 2016 +0100

    expvar: export http.Handler
    
    Add a method to expose the handler to allow it to be installed at a
    non-standard location or used with a different ServeMux.
    
    fixes #15030
    
    Change-Id: If778ad6fcc200f124a05c0a493511e364fca6078
    Reviewed-on: https://go-review.googlesource.com/24722
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f05cd4cde5f7023b1db23b7499cf9b1a6f3ffdec
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Sep 25 12:37:00 2016 -0700

    runtime: simplify conditions testing g.paniconfault
    
    Implement a comment by Ralph Corderoy on CL 29754.
    
    Change-Id: I22bbede211ddcb8a057f16b4f47d335a156cc8d2
    Reviewed-on: https://go-review.googlesource.com/29756
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 343bec53c7317e1c780b3faf04aa124f19849b61
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sat Sep 24 21:17:34 2016 -0700

    runtime: merge sigpanic_unix.go into signal_unix.go
    
    Change-Id: Iba541045b4878405834c637095627631b6559a35
    Reviewed-on: https://go-review.googlesource.com/29754
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 38765eba739461e5c5dc463860c62daee2eef4ee
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Sat Sep 24 17:07:35 2016 +0200

    runtime/race: don't crash on invalid PCs
    
    Currently raceSymbolizeCode uses funcline, which is internal runtime
    function which crashes on incorrect PCs. Use FileLine instead,
    it is public and does not crash on invalid data.
    
    Note: FileLine returns "?" file on failure. That string is not NUL-terminated,
    so we need to additionally check what FileLine returns.
    
    Fixes #17190
    
    Change-Id: Ic6fbd4f0e68ddd52e9b2dd25e625b50adcb69a98
    Reviewed-on: https://go-review.googlesource.com/29714
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9f1c78781b320b6d7cf83378b857c1168cb7fd0f
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Sat Sep 24 17:03:30 2016 +0200

    cmd/cgo: fix line info in _cgo_gotypes.go
    
    Don't write line info for types, we don't have it.
    Otherwise types look like:
    
    type _Ctype_struct_cb struct {
    //line :1
          on_test *[0]byte
    //line :1
    }
    
    Which is not useful. Moreover we never override source info,
    so subsequent source code uses the same source info.
    Moreover, empty file name makes compile emit no source debug info at all.
    
    Update #17190
    
    Change-Id: I7ae6fa4964520d7665743d340419b787df0b51e8
    Reviewed-on: https://go-review.googlesource.com/29713
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c14050646f621db5f54c1a300b80c65f99fbd03b
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Sat Sep 24 16:59:23 2016 +0200

    runtime: fix newextram PC passed to race detector
    
    PC passed to racegostart is expected to be a return PC
    of the go statement. Race runtime will subtract 1 from the PC
    before symbolization. Passing start PC of a function is wrong.
    Add sys.PCQuantum to the function start PC.
    
    Update #17190
    
    Change-Id: Ia504c49e79af84ed4ea360c2aea472b370ea8bf5
    Reviewed-on: https://go-review.googlesource.com/29712
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 893edc9b3fceead9c31151ce46fb871ea8c225b1
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Sat Sep 24 22:06:39 2016 -0700

    net/http/httptrace: remove the mention of http client
    
    This sentence is partially guilty why httptrace is considered as an
    http.Client tracing package. Removing the mention.
    
    Updates #17152.
    
    Change-Id: I69f78a6e10817db933f44e464a949ae896e44ec6
    Reviewed-on: https://go-review.googlesource.com/29755
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 159a90b93a962cb942688f099b42d00d164e436f
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Sep 23 22:05:51 2016 -0700

    runtime: merge Unix sighandler functions
    
    Replace all the Unix sighandler functions with a single instance.
    Push the relatively small amount of processor-specific code into five
    methods on sigctxt: sigpc, sigsp, siglr, fault, preparePanic.
    (Some processors already had a fault method.)
    
    Change-Id: Ib459412ff8f7e0f5ad06bfd43eb827c8b196fc32
    Reviewed-on: https://go-review.googlesource.com/29752
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 890c09efb72f11b3e6fd95d859260bfee7de7f31
Author: Kale Blankenship <kale@lemnisys.com>
Date:   Sat Sep 24 16:39:36 2016 -0700

    os: make IsExist report true on ERROR_DIR_NOT_EMPTY on Windows
    
    Fixes #17164
    
    Change-Id: I3e626d92293c1379e2922276f033fdee6f48dda3
    Reviewed-on: https://go-review.googlesource.com/29753
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 60074b0fd35e438b06ba8e42c0e90b1a8a2945b7
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 23 19:57:16 2016 -0700

    runtime: remove TestCollisions from -short
    
    Takes a bit too long to run it all the time.
    
    Fixes #17217
    Update #17104
    
    Change-Id: I4802190ea16ee0f436a7f95b093ea0f995f5b11d
    Reviewed-on: https://go-review.googlesource.com/29751
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ab552aa3b69deb208b38677880e86aa41c3a9e47
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Sep 23 17:54:51 2016 -0700

    runtime: unify some signal handling functions
    
    Unify the OS-specific versions of msigsave, msigrestore, sigblock,
    updatesigmask, and unblocksig into single versions in signal_unix.go.
    To do this, make sigprocmask work the same way on all systems, which
    required adding a definition of sigprocmask for linux and openbsd.
    Also add a single OS-specific function sigmaskToSigset.
    
    Change-Id: I7cbf75131dddb57eeefe648ef845b0791404f785
    Reviewed-on: https://go-review.googlesource.com/29689
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit fd296282e0a5058351954f1a7ea2dac5ef87f052
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 19 14:14:58 2016 -0400

    cmd/dist: enable plugin test on darwin/amd64
    
    Change-Id: I6071881a5f7b9638bca0bfef76d6f4f45c9202a6
    Reviewed-on: https://go-review.googlesource.com/29396
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 96acfaaefae3378dcde009a184d3f4e5795ee5cc
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 19 14:14:45 2016 -0400

    cmd/go: enable -buildmode=plugin on darwin/amd64
    
    Change-Id: I8e594e059448879a9f451801064729186ac7c11b
    Reviewed-on: https://go-review.googlesource.com/29395
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 73e7a569b4b2917e76f9e1ad95f638127b7638ad
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 19 14:13:07 2016 -0400

    cmd/link: plugin support on darwin/amd64
    
    This CL turns some special section marker symbols into real symbols
    laid out in the sections they mark. This is to deal with the fact
    that dyld on OS X resolves the section marker symbols in any dlopen-ed
    Go program to the original section marker symbols in the host program.
    
    More details in a comment in cmd/link/internal/ld/data.go.
    
    Change-Id: Ie9451cfbf06d0bdcccb9959219c791b829f3f771
    Reviewed-on: https://go-review.googlesource.com/29394
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 26a6131bacb5dbc491f77329557580df0a310858
Author: Keith Randall <khr@golang.org>
Date:   Mon Sep 19 14:35:41 2016 -0700

    cmd/compile: fix 4-byte unaligned load rules
    
    The 2-byte rule was firing before the 4-byte rule, preventing
    the 4-byte rule from firing.  Update the 4-byte rule to use
    the results of the 2-byte rule instead.
    
    Add some tests to make sure we don't regress again.
    
    Fixes #17147
    
    Change-Id: Icfeccd9f2b96450981086a52edd76afb3191410a
    Reviewed-on: https://go-review.googlesource.com/29382
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 120e9ff34f577376f8d1c25a8966c88e0e92fee5
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Sep 23 10:38:50 2016 -0400

    cmd/compile: recognize OpS390XLoweredNilCheck as a nil check in the scheduler
    
    Before this change a nil check on s390x could be scheduled after the
    target pointer has been dereferenced.
    
    Change-Id: I7ea40a4b52f975739f6db183a2794be4981c4e3d
    Reviewed-on: https://go-review.googlesource.com/29730
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3311275ce8eef87a64b78589e0da0bf115f9be07
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Thu Sep 22 14:54:45 2016 -0500

    math, cmd/internal/obj/ppc64: improve floor, ceil, trunc with asm
    
    This adds the instructions frim, frip, and friz to the ppc64x
    assembler for use in implementing the math.Floor, math.Ceil, and
    math.Trunc functions to improve performance.
    
    Fixes #17185
    
    BenchmarkCeil-128                    21.4          6.99          -67.34%
    BenchmarkFloor-128                   13.9          6.37          -54.17%
    BenchmarkTrunc-128                   12.7          6.33          -50.16%
    
    Change-Id: I96131bd4e8c9c8dbafb25bfeb544cf9d2dbb4282
    Reviewed-on: https://go-review.googlesource.com/29654
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit ed915ad421e61c3158ccae4bfbbcfbc796514ee2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 23 00:02:38 2016 -0400

    runtime: use sched_yield instead of pthread_yield
    
    Attempt to fix the linux-amd64-clang builder, which broke
    with CL 29472.
    
    Turns out pthread_yield is a non-portable Linux function, and
    should have #define _GNU_SOURCE before #include <pthread.h>.
    GCC doesn't complain about this, but Clang does:
    
            ./raceprof.go:44:3: warning: implicit declaration of function 'pthread_yield' is invalid in C99 [-Wimplicit-function-declaration]
    
    (Though the error, while explicable, certainly could be clearer.)
    
    There is a portable POSIX equivalent, sched_yield, so this
    CL uses it instead.
    
    Change-Id: I58ca7a3f73a2b3697712fdb02e72a8027c391169
    Reviewed-on: https://go-review.googlesource.com/29675
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b444d438c061fa934130fed17d34c23e77174851
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 19 14:09:07 2016 -0400

    plugin: darwin support
    
    Change-Id: I76981d1d83da401178226634d076371a04f5ccb7
    Reviewed-on: https://go-review.googlesource.com/29392
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b4c9829c2299772eb0aaffcd437085f9f43e7166
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 19 14:08:21 2016 -0400

    runtime: check plugin-loaded moduledata addresses
    
    Inspired by difficulties with plugin support on darwin.
    
    Change-Id: I2cef8410837946454e75d00e94e46791f03f2267
    Reviewed-on: https://go-review.googlesource.com/29391
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9d8522fdc72ecc8eaa2d318a2cc04abde9beeb42
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Sep 21 09:44:40 2016 -0700

    cmd/compile: don't instrument copy and append in runtime
    
    Instrumenting copy and append for the race detector changes them to call
    different functions. In the runtime package the alternate functions are
    not marked as nosplit. This caused a crash in the SIGPROF handler when
    invoked on a non-Go thread in a program built with the race detector. In
    some cases the handler can call copy, the race detector changed that to
    a call to a non-nosplit function, the function tried to check the stack
    guard, and crashed because it was running on a non-Go thread. The
    SIGPROF handler is written carefully to avoid such problems, but hidden
    function calls are difficult to avoid.
    
    Fix this by changing the compiler to not instrument copy and append when
    compiling the runtime package. Change the runtime package to add
    explicit race checks for the only code I could find where copy is used
    to write to user data (append is never used).
    
    Change-Id: I11078a66c0aaa459a7d2b827b49f4147922050af
    Reviewed-on: https://go-review.googlesource.com/29472
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit 88d2f9112a0a8afd3a29ac1479d4f17847f16803
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 20 16:34:30 2016 -0700

    cmd/compile: fix type of static closure pointer
    
      var x *X = ...
      defer x.foo()
    
    As part of the defer, we need to calculate &(*X).foo·f.  This expression
    is the address of the static closure that will call (*X).foo when a
    pointer to that closure is used in a call/defer/go.  This pointer is not
    currently properly typed in SSA.  It is a pointer type, but the base
    type is nil, not a proper type.
    
    This turns out not to be a problem currently because we never use the
    type of these SSA values.  But I'm trying to change that (to be able to
    spill them) in CL 28391.  To fix, use uint8 as the fake type of the
    closure.
    
    Change-Id: Ieee388089c9af398ed772ee8c815122c347cb633
    Reviewed-on: https://go-review.googlesource.com/29444
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d586aae1f44ebdf0e8f92137856b4b62c41cac6a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Sep 22 13:50:16 2016 -0400

    test: errorcheck auto-generated functions
    
    Add an "errorcheckwithauto" action which performs error check
    including lines with auto-generated functions (excluded by
    default). Comment "// ERRORAUTO" matches these lines.
    
    Add testcase for CL 29570 (as an example).
    
    Updates #16016, #17186.
    
    Change-Id: Iaba3727336cd602f3dda6b9e5f97dafe0848e632
    Reviewed-on: https://go-review.googlesource.com/29652
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3dfb92f254ed4f94e3c98a789c171a1cd9c2563d
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Sep 21 18:53:31 2016 -0400

    cmd/compile: ensure args are live in tail calls for LR machines
    
    On link-register machines we uses RET (sym), instead of JMP (sym),
    for tail call (so the assembler knows and may rewrite it to
    restore link register if necessary). Add RET to the analysis.
    
    Fixes #17186.
    Fixes #16016 on link-register machines.
    
    Change-Id: I8690ac57dd9d49beeea76a5f291988e9a1d3afe5
    Reviewed-on: https://go-review.googlesource.com/29570
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 254169d7bb6f96409ba4b405c80d28deefdb000b
Author: Adam Langley <agl@golang.org>
Date:   Wed Sep 14 11:50:36 2016 -0700

    crypto/tls: fix deadlock when racing to complete handshake.
    
    After renegotiation support was added (af125a5193c) it's possible for a
    Write to block on a Read when racing to complete the handshake:
       1. The Write determines that a handshake is needed and tries to
          take the neccesary locks in the correct order.
       2. The Read also determines that a handshake is needed and wins
          the race to take the locks.
       3. The Read goroutine completes the handshake and wins a race
          to unlock and relock c.in, which it'll hold when waiting for
          more network data.
    
    If the application-level protocol requires the Write to complete before
    data can be read then the system as a whole will deadlock.
    
    Unfortunately it doesn't appear possible to reverse the locking order of
    c.in and handshakeMutex because we might read a renegotiation request at
    any point and need to be able to do a handshake without unlocking.
    
    So this change adds a sync.Cond that indicates that a goroutine has
    committed to doing a handshake. Other interested goroutines can wait on
    that Cond when needed.
    
    The test for this isn't great. I was able to reproduce the deadlock with
    it only when building with -race. (Because -race happened to alter the
    timing just enough.)
    
    Fixes #17101.
    
    Change-Id: I4e8757f7b82a84e46c9963a977d089f0fb675495
    Reviewed-on: https://go-review.googlesource.com/29164
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ad5d91c17a3c0bc4acf9e4036b050517972432f0
Author: Kale Blankenship <kale@lemnisys.com>
Date:   Wed Sep 21 19:03:06 2016 -0700

    net/url: prefix relative paths containing ":" in the first segment with "./"
    
    This change modifies URL.String to prepend "./" to a relative URL which
    contains a colon in the first path segment.
    
    Per RFC 3986 §4.2:
    
    > A path segment that contains a colon character (e.g., "this:that")
    > cannot be used as the first segment of a relative-path reference, as
    > it would be mistaken for a scheme name.  Such a segment must be
    > preceded by a dot-segment (e.g., "./this:that") to make a relative-
    > path reference.
    
    https://go-review.googlesource.com/27440 corrects the behavior for http.FileServer,
    but URL.String will still return an invalid URL. This CL reverts the changes to
    http.FileServer as they are unnecessary with this fix.
    
    Fixes #17184
    
    Change-Id: I9211ae20f82c91b785d1b079b2cd766487d94225
    Reviewed-on: https://go-review.googlesource.com/29610
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cddddbc6231177c87b72f95209ab51abb74bcbc5
Author: David Chase <drchase@google.com>
Date:   Fri Sep 16 15:02:47 2016 -0700

    cmd/compile: use ISEL, cleanup use of zero & extensions
    
    Abandoned earlier efforts to expose zero register,
    but left it in numbering to decrease squirrelyness of
    register allocator.
    
    ISELrelOp used in code generation of bool := x relOp y.
    Some patterns added to better elide zero case and
    some sign extension.
    
    Updates: #17109
    
    Change-Id: Ida7839f0023ca8f0ffddc0545f0ac269e65b05d9
    Reviewed-on: https://go-review.googlesource.com/29380
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit dcbbd319e9cdd44d50314818ec05672b60e8f8e7
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Thu Sep 15 07:39:19 2016 -0700

    compress/gzip: add examples
    
    Updates #16360.
    
    Adds examples uing:
    + Writer, Reader
    + Reader.Multistream to concatenate and then
    individually retrieve multiple gzipped files
    + Reset
    
    Change-Id: I9ad9b92729a5cd58f7368eaf2db05f1cdf21063d
    Reviewed-on: https://go-review.googlesource.com/29218
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a7dc821d6447f9bdfb54e2fad2ab76f6d40873ca
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu Sep 22 10:58:43 2016 +1000

    crypto/rsa: clarify comment on maximum message length.
    
    See https://groups.google.com/d/topic/golang-nuts/stbum5gZbAc/discussion
    
    Change-Id: I2e78e8d0dadd78c8b0389514cad3c45d061b663b
    Reviewed-on: https://go-review.googlesource.com/29496
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9e028b70ea3c1a81220a63c2ed3a2c1cd216c733
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Sep 21 14:21:11 2016 -0700

    runtime: merge signal[12]_unix.go into signal_unix.go
    
    Requires adding a sigfwd function for Solaris, as previously
    signal2_unix.go was not built for Solaris.
    
    Change-Id: Iea3ff0ddfa15af573813eb075bead532b324a3fc
    Reviewed-on: https://go-review.googlesource.com/29550
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 5db80c30e6b360ef18159332b3ff19234f911f36
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Sep 21 12:53:25 2016 +0900

    runtime: revert CL 18835; don't install new signal stack unconditionally on dragonfly
    
    This change reverts CL 18835 which is a workaroud for older DragonFly
    BSD kernels, and fixes #14051, #14052 and #14067 in a more general way
    the same as other platforms except NetBSD.
    
    This change also bumps the minimum required version of DragonFly BSD
    kernel to 4.4.4.
    
    Fixes #16329.
    
    Change-Id: I0b44b6afa675f5ed9523914226bd9ec4809ba5ae
    Reviewed-on: https://go-review.googlesource.com/29491
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e6134702bb63603a3a26b7167dab73d145886c0f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 01:42:58 2016 -0700

    cmd/compile: simplify obj.ProgInfo and extract from obj.Prog
    
    Updates #16357.
    
    Change-Id: Ia837dd44bad76931baa9469e64371bc253d6694b
    Reviewed-on: https://go-review.googlesource.com/29219
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 404ae84aa220943c85fe04e9d7499087aedb0677
Author: Russ Cox <rsc@golang.org>
Date:   Wed Sep 21 15:03:52 2016 -0400

    cmd/link: add time stamp to hostlink print in -v mode
    
    Change-Id: I128b142aee5e1b917e7ba63b48512972f053ea0b
    Reviewed-on: https://go-review.googlesource.com/29531
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b4efd09d1880793e33fbb191ccfe1657bfeba0c9
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Thu Aug 25 11:07:33 2016 -0500

    cmd/link: split large elf text sections on ppc64x
    
    Some applications built with Go on ppc64x with external linking
    can fail to link with relocation truncation errors if the elf
    text section that is generated is larger than 2^26 bytes and that
    section contains a call instruction (bl) which calls a function
    beyond the limit addressable by the 24 bit field in the
    instruction.
    
    This solution consists of generating multiple text sections where
    each is small enough to allow the GNU linker to resolve the calls
    by generating long branch code where needed.  Other changes were added
    to handle differences in processing when multiple text sections exist.
    
    Some adjustments were required to the computation of a method's address
    when using the method offset table when there are multiple text sections.
    
    The number of possible section headers was increased to allow for up
    to 128 text sections.  A test case was also added.
    
    Fixes #15823.
    
    Change-Id: If8117b0e0afb058cbc072258425a35aef2363c92
    Reviewed-on: https://go-review.googlesource.com/27790
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 445f51fb119789e08889abcb8ae54b4eb5029fad
Author: Suyash <dextrous93@gmail.com>
Date:   Sun Sep 11 12:47:47 2016 +0530

    image/png: add Encode and Decode examples
    
    partially addresses #16360
    
    Change-Id: I8274825b9ca6aec46294c8513b4795b0eb3062a2
    Reviewed-on: https://go-review.googlesource.com/28992
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2bc5f1258e049e1d59711046e5c865500eefa159
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 20 19:45:37 2016 +0000

    net: add Resolver type, Dialer.Resolver, and DefaultResolver
    
    The new Resolver type (a struct) has 9 Lookup methods, all taking a
    context.Context.
    
    There's now a new DefaultResolver global, like http's
    DefaultTransport and DefaultClient.
    
    net.Dialer now has an optional Resolver field to set the Resolver.
    
    This also does finishes some resolver cleanup internally, deleting
    lookupIPMerge and renaming lookupIPContext into Resolver.LookupIPAddr.
    
    The Resolver currently doesn't let you tweak much, but it's a struct
    specifically so we can add knobs in the future. Currently I just added
    a bool to force the pure Go resolver. In the future we could let
    people provide an interface to implement the methods, or add a Timeout
    time.Duration, which would wrap all provided contexts in a
    context.WithTimeout.
    
    Fixes #16672
    
    Change-Id: I7ba1f886704f06def7b6b5c4da9809db51bc1495
    Reviewed-on: https://go-review.googlesource.com/29440
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit ea143c299040f8a270fb782c5efd3a3a5e6057a4
Author: Thomas de Zeeuw <thomasdezeeuw@gmail.com>
Date:   Thu Sep 1 14:54:08 2016 +0200

    net/http/httptest: fill ContentLength in recorded Response
    
    This change fills the ContentLength field in the http.Response returned by
    ResponseRecorder.Result.
    
    Fixes #16952.
    
    Change-Id: I9c49b1bf83e3719b5275b03a43aff5033156637d
    Reviewed-on: https://go-review.googlesource.com/28302
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e69d63e807b7322e3a7d6c8ad83c251c9f46c9ca
Author: Michal Bohuslávek <mbohuslavek@gmail.com>
Date:   Wed Sep 21 14:49:51 2016 +0100

    net/http/cookiejar: fix typo
    
    Change-Id: I6ea8650927e7946c6fd4659f400fd91ddaae68af
    Reviewed-on: https://go-review.googlesource.com/29510
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c03925edd37b504346c11656a6de5f5e4b791061
Author: Austin Clements <austin@google.com>
Date:   Mon May 9 15:12:07 2016 -0400

    runtime: remove unnecessary atomics from heapBitSetType
    
    These used to be necessary when racing with updates to the mark bit,
    but since the mark bit is no longer in the bitmap and the checkmark is
    only updated with the world stopped, we can now always use regular
    writes to update the type information in the heap bitmap.
    
    Somewhat surprisingly, this has basically no overall performance
    effect beyond the usual noise, but it does clean up the code.
    
    Change-Id: I3933d0b4c0bc1c9bcf6313613515c0b496212105
    Reviewed-on: https://go-review.googlesource.com/29277
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 43d9c29abb57e797075d9cc15f6e21362d4be136
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Sep 21 13:04:38 2016 +0900

    doc: add note about CL 29491 to go1.8.txt
    
    Change-Id: I808fab97076493a95b0b5eb0ad15645099f54aee
    Reviewed-on: https://go-review.googlesource.com/29492
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6072e4d710dc28fe5907d43e59074d5b55de8981
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Sep 21 12:53:25 2016 +0900

    syscall: fix build on dragonfly
    
    This change fixes the broken build caused by CL 23780.
    
    Change-Id: I142cf8a1af033d036d57ac56e9e21ea925d922d4
    Reviewed-on: https://go-review.googlesource.com/29490
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 35d22afb4b8e4f2c0ce06150727dc91a5c54378e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Sep 20 18:12:27 2016 -0700

    cmd/internal/obj: remove unused GOROOT-related fields
    
    Change-Id: I6634f70d6bd1a4eced47eda69a2d9b207d222a1b
    Reviewed-on: https://go-review.googlesource.com/29470
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit e6158b3c469dc4ec5d6571f10fbd739acd493472
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Sep 20 18:02:27 2016 -0700

    cmd/internal/obj: remove unused Textp and Etextp fields
    
    Change-Id: Idcb5a8d6676aa38b4ebd0975edd2068386f5ca83
    Reviewed-on: https://go-review.googlesource.com/29449
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b851ded09a300033849b60ab47a468087ce557a1
Author: Yasuhiro Matsumoto <mattn.jp@gmail.com>
Date:   Wed Aug 24 10:34:16 2016 +0900

    os: use GetConsoleCP() instead of GetACP()
    
    It is possible (and common) for Windows systems to use a different codepage
    for console applications from that used on normal windowed application
    (called ANSI codepage); for instance, most of the western Europe uses
    CP850 for console (for backward compatibility with MS-DOS), while
    windowed applications use a different codepage depending on the country
    (eg: CP1252 aka Latin-1). The usage being changed with this commit is
    specifically related to decoding input coming from the console, so the
    previous usage of the ANSI codepage was wrong.
    
    Also fixes an issue that previous did convert bytes as NFD. Go is
    designed to handle single Unicode code point. This fix change behaivor
    to NFC.
    
    Fixes #16857.
    
    Change-Id: I4f41ae83ece47321b6e9a79a2087ecbb8ac066dd
    Reviewed-on: https://go-review.googlesource.com/27575
    Reviewed-by: Hiroshi Ioka <hirochachacha@gmail.com>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 16f81b617eadc739b9097ce4b7d67e9a00a91c7c
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 20 23:43:15 2016 +0000

    image/draw: add FloydSteinberg Drawer example
    
    Updates #16360
    
    Change-Id: I80b981aa291a8e16d2986d4a2dfd84d3819bf488
    Reviewed-on: https://go-review.googlesource.com/29443
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit e7191479ec57e89aa1967e75a87f9da4d1d8b734
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 20 21:52:11 2016 +0000

    doc: add some missing HTML tags in the FAQ
    
    Fixes #17170
    
    Change-Id: I939f087df133710495fdf6f09040051cb9b176d7
    Reviewed-on: https://go-review.googlesource.com/29442
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit dd24b1098ae8923b98a13560c89ae59fc0c49258
Author: Keith Randall <khr@golang.org>
Date:   Wed Sep 7 14:04:31 2016 -0700

    cmd/compile: improve tighten pass
    
    Move a value to the block which is the lowest common ancestor in the
    dominator tree of all of its uses.  Make sure not to move a value into a
    loop.
    
    Makes the tighten pass on average (across go1 benchmarks) 40% slower.
    Still not a big contributor to overall compile time.
    
    Binary size is just a tad smaller.
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.77s ± 9%     2.76s ± 9%     ~     (p=0.878 n=8+8)
    Fannkuch11-12                2.75s ± 1%     2.74s ± 1%     ~     (p=0.232 n=8+7)
    FmtFprintfEmpty-12          48.9ns ± 9%    47.7ns ± 0%     ~     (p=0.431 n=8+8)
    FmtFprintfString-12          143ns ± 8%     142ns ± 1%     ~     (p=0.257 n=8+7)
    FmtFprintfInt-12             123ns ± 1%     122ns ± 1%   -1.04%  (p=0.026 n=7+8)
    FmtFprintfIntInt-12          195ns ± 7%     185ns ± 0%   -5.32%  (p=0.000 n=8+8)
    FmtFprintfPrefixedInt-12     194ns ± 4%     195ns ± 0%   +0.81%  (p=0.015 n=7+7)
    FmtFprintfFloat-12           267ns ± 0%     268ns ± 0%   +0.37%  (p=0.001 n=7+6)
    FmtManyArgs-12               800ns ± 0%     762ns ± 1%   -4.78%  (p=0.000 n=8+8)
    GobDecode-12                7.67ms ± 2%    7.60ms ± 2%     ~     (p=0.234 n=8+8)
    GobEncode-12                6.55ms ± 0%    6.57ms ± 1%     ~     (p=0.336 n=7+8)
    Gzip-12                      237ms ± 0%     238ms ± 0%   +0.40%  (p=0.017 n=7+7)
    Gunzip-12                   40.8ms ± 0%    40.2ms ± 0%   -1.52%  (p=0.000 n=7+8)
    HTTPClientServer-12          208µs ± 3%     209µs ± 3%     ~     (p=0.955 n=8+7)
    JSONEncode-12               16.2ms ± 1%    17.2ms ±11%   +5.80%  (p=0.001 n=7+8)
    JSONDecode-12               57.3ms ±12%    55.5ms ± 3%     ~     (p=0.867 n=8+7)
    Mandelbrot200-12            4.68ms ± 6%    4.46ms ± 1%     ~     (p=0.442 n=8+8)
    GoParse-12                  4.27ms ±44%    3.42ms ± 1%  -19.95%  (p=0.005 n=8+8)
    RegexpMatchEasy0_32-12      75.1ns ± 0%    75.8ns ± 1%   +0.99%  (p=0.002 n=7+7)
    RegexpMatchEasy0_1K-12       963ns ± 0%    1021ns ± 6%   +5.98%  (p=0.001 n=7+7)
    RegexpMatchEasy1_32-12      72.4ns ±11%    70.8ns ± 1%     ~     (p=0.368 n=8+8)
    RegexpMatchEasy1_1K-12       394ns ± 1%     399ns ± 0%   +1.23%  (p=0.000 n=8+7)
    RegexpMatchMedium_32-12      114ns ± 0%     115ns ± 1%   +0.63%  (p=0.021 n=7+7)
    RegexpMatchMedium_1K-12     35.9µs ± 0%    37.6µs ± 1%   +4.72%  (p=0.000 n=7+8)
    RegexpMatchHard_32-12       1.93µs ± 2%    1.91µs ± 0%   -0.91%  (p=0.001 n=7+7)
    RegexpMatchHard_1K-12       60.2µs ± 3%    61.2µs ±10%     ~     (p=0.442 n=8+8)
    Revcomp-12                   404ms ± 1%     406ms ± 1%     ~     (p=0.054 n=8+7)
    Template-12                 64.6ms ± 1%    63.5ms ± 1%   -1.66%  (p=0.000 n=8+8)
    TimeParse-12                 347ns ± 8%     309ns ± 0%  -11.13%  (p=0.000 n=8+7)
    TimeFormat-12                343ns ± 4%     331ns ± 0%   -3.34%  (p=0.000 n=8+7)
    
    Change-Id: Id6da1239ddd4d0cb074ff29cffb06302d1c6d08f
    Reviewed-on: https://go-review.googlesource.com/28712
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit b7426089e597d20bade4b4bbfea1188844a07af8
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 20 13:59:40 2016 -0700

    cmd/compile: simple cleanups
    
    Change-Id: If2cf3c5a29afc6cf74c3b08b9745e950231ead37
    Reviewed-on: https://go-review.googlesource.com/29441
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f5f7d6e32d5384a3638325ff8393bf94ec8d6971
Author: Damien Neil <dneil@google.com>
Date:   Fri Jun 3 15:04:53 2016 -0700

    syscall: validate ParseDirent inputs
    
    Don't panic, crash, or return references to uninitialized memory when
    ParseDirent is passed invalid input.
    
    Move common dirent parsing to syscall.go with minimal platform-specific
    functions in syscall_$GOOS.go.
    
    Fixes #15653
    
    Change-Id: I5602475e02321fe381064488401c14b33bec6886
    Reviewed-on: https://go-review.googlesource.com/23780
    Run-TryBot: Damien Neil <dneil@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ab5923572984651af05a47755109642bfc529cb5
Author: Austin Clements <austin@google.com>
Date:   Thu Aug 25 11:50:50 2016 -0400

    runtime: consistency check for G rescan position
    
    Issue #17099 shows a failure that indicates we rescanned a stack twice
    concurrently during mark termination, which suggests that the rescan
    list became inconsistent. Add a simple check when we dequeue something
    from the rescan list that it claims to be at the index where we found
    it.
    
    Change-Id: I6a267da4154a2e7b7d430cb4056e6bae978eaf62
    Reviewed-on: https://go-review.googlesource.com/29280
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 39ce6eb9ec53e53e361824feb96cbbc6d236df5a
Author: Austin Clements <austin@google.com>
Date:   Thu Aug 25 11:52:24 2016 -0400

    runtime: report GCSys and OtherSys in heap profile
    
    The comment block at the end of the heap profile includes *almost*
    everything from MemStats. Add the missing fields. These are useful for
    debugging RSS that has gone to GC-internal data structures.
    
    Change-Id: I0ee8a918d49629e28fd8fd2bf6861c4529461c24
    Reviewed-on: https://go-review.googlesource.com/29276
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 38cd79889ece342643b56ad6d496ef8931ca9272
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Sep 19 07:45:08 2016 -0400

    cmd/compile: simplify div/mod on ARM
    
    On ARM, DIV, DIVU, MOD, MODU are pseudo instructions that makes
    runtime calls _div/_udiv/_mod/_umod, which themselves are wrappers
    of udiv. The udiv function does the real thing.
    
    Instead of generating these pseudo instructions, call to udiv
    directly. This removes one layer of wrappers (which has an awkward
    way of passing argument), and also allows combining DIV and MOD
    if both results are needed.
    
    Change-Id: I118afc3986db3a1daabb5c1e6e57430888c91817
    Reviewed-on: https://go-review.googlesource.com/29390
    Reviewed-by: David Chase <drchase@google.com>

commit f964810025ae58b623798a1944c39c06266fb45d
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Mon Sep 19 20:36:45 2016 -0700

    net/http/httptrace: fix bad tracing example
    
    Tracing happens at the http.Trace level. Fix the example to demostrate
    tracing in the lifecycle of a RoundTrip.
    
    Updates #17152.
    
    Change-Id: Ic7d7bcc550176189206185482e8962dbf1504ff1
    Reviewed-on: https://go-review.googlesource.com/29431
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 836a3ae6639c310e1a13834c1f8f84bb982d920d
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Sep 20 15:57:53 2016 +1200

    cmd/link: remove more unused ctxt parameters
    
    This time in elf.go.
    
    Change-Id: Ifaf71742ebbc9aadc8606c39ea2d417ae5cc7e0d
    Reviewed-on: https://go-review.googlesource.com/29450
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b6324ef5ff212bea011d4d60ff8aeaa0ef7a5bba
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Sep 20 15:46:37 2016 +1200

    cmd/link: kill off Symbols.Version
    
    Change-Id: Iee8f773355870f2333637a093e51c5fd36e5a6e5
    Reviewed-on: https://go-review.googlesource.com/29349
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 63837092726fa01806ee945dc7b3a2c8c707cd76
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Sep 20 15:31:26 2016 +1200

    cmd/link: remove now-unused ctxt arguments from a few functions
    
    Specifically Addstring, Addbytes and Symgrow.
    
    Change-Id: Ia74093bfcf9f360bf223accbc8feef54a7f059c9
    Reviewed-on: https://go-review.googlesource.com/29348
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 25d094034bd5d0e4317180a70d41bf774dae1598
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Sep 19 12:12:04 2016 +1200

    cmd/link: remove Linklookup & Linkrlookup
    
    Change-Id: I25d9f74cb52e6fd4f2ad4b1c8b7102efadbc7481
    Reviewed-on: https://go-review.googlesource.com/29344
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 324f6ab48c9558a417876b62fd2f633943ed3bb8
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Sep 20 15:06:08 2016 +1200

    cmd/link: use ctxt.{Lookup,ROLookup} in favour of function versions of same
    
    Done with two eg templates:
    
    package p
    
    import (
            "cmd/link/internal/ld"
    )
    
    func before(ctxt *ld.Link, name string, v int) *ld.Symbol {
            return ld.Linklookup(ctxt, name, v)
    }
    func after(ctxt *ld.Link, name string, v int) *ld.Symbol {
            return ctxt.Syms.Lookup(name, v)
    }
    
    package p
    
    import (
            "cmd/link/internal/ld"
    )
    
    func before(ctxt *ld.Link, name string, v int) *ld.Symbol {
            return ld.Linkrlookup(ctxt, name, v)
    }
    func after(ctxt *ld.Link, name string, v int) *ld.Symbol {
            return ctxt.Syms.ROLookup(name, v)
    }
    
    Change-Id: I00647dbf62294557bd24c29ad1f108fc786335f1
    Reviewed-on: https://go-review.googlesource.com/29343
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d41a7f77c5ed5114fe81b65ee28013227d20d637
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Sep 20 14:59:39 2016 +1200

    cmd/link: do not directly embed Symbols in Link
    
    Mostly done with sed.
    
    Change-Id: Ic8c534a3fdd332b5420d062ee85bb77a30ad1efb
    Reviewed-on: https://go-review.googlesource.com/29346
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d284d4ff9204e42c3cfc5424880d74063ed08b23
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Sep 19 12:02:58 2016 +1200

    cmd/link: split "bag of Symbols" functionality out of Link
    
    Mechanical refactorings to follow.
    
    Change-Id: I9b98e69a58c3cba7c7d1d3e3f600d4ed99d4fce2
    Reviewed-on: https://go-review.googlesource.com/29342
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit e9fddf8f863c17e7112e8dd0a52490ecf165ef13
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 19 14:11:20 2016 -0400

    cmd/internal/obj, cmd/link: darwin dynlink support
    
    This makes it possible for cmd/compile, when run with -dynlink on
    darwin/amd64, to generate TLS_LE relocations which the linker then
    turns into the appropriate PC-relative GOT load.
    
    Change-Id: I1a71da432608bdb108ff66c22de600100209c873
    Reviewed-on: https://go-review.googlesource.com/29393
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1d3fae461c6302d2d91085e03d50712177af74c0
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Sep 17 10:01:17 2016 -0400

    cmd/link: remove Cursym
    
    Change-Id: I58253a6cd2d77a9319c0783afb0d92cd5a88a7f7
    Reviewed-on: https://go-review.googlesource.com/29370
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 5a597e2d2995309c4cc02a4c367157908ad4add2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Sat Sep 17 09:39:33 2016 -0400

    cmd/link: replace ld.Link.Diag with ld.Errorf
    
    Instead of using ctxt.Cursym, Errorf takes an explicit *Symbol
    parameter. This removes most uses of Cursym and means the *Link
    context object is needed in fewer parts of the linker.
    
    All transformations done manually, as wiring Cursym is tricky.
    
    Change-Id: Ief88b00b73904224675c0035684c3a84c19249d7
    Reviewed-on: https://go-review.googlesource.com/29369
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bd3d00e3109335bd66ec6dbede411c19f37df20f
Author: Keith Randall <khr@golang.org>
Date:   Mon Sep 19 15:26:48 2016 -0700

    doc: mention KeepAlive & input args change
    
    Change-Id: Icfb38f492ae71432858b7104fcba18a9ba835192
    Reviewed-on: https://go-review.googlesource.com/29410
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 50644f2e67e846c3641d5a907733ccc4ca5e60d2
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Sep 19 07:13:27 2016 +1200

    cmd/link: move comment somewhere more appropriate
    
    At least, I assume it's meant to be here. It makes no sense at all where it
    currently is.
    
    Change-Id: Ic6a6c112c3dcf1318256d7d602168c3446b55412
    Reviewed-on: https://go-review.googlesource.com/29339
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b625810d28adde8c24da4838525694e74e131520
Author: Tormod Erevik Lea <tormodlea@gmail.com>
Date:   Sat Sep 17 19:04:46 2016 +0200

    cmd/vet: hard-code program name in usage message
    
    Example on linux_amd64 for 'go tool vet -h':
    
    Before:
            Usage of /usr/local/go/pkg/tool/linux_amd64/vet:
    After:
            Usage of vet:
    
    Change-Id: I11cb16b656bd097062d57a8c7441fbe66caaef78
    Reviewed-on: https://go-review.googlesource.com/29294
    Reviewed-by: Rob Pike <r@golang.org>

commit 3cca069220af044c1a36da3f588ffe3abbeab9c5
Author: Rob Pike <r@golang.org>
Date:   Sun Sep 18 14:35:42 2016 +1000

    time: allow long fractions in ParseDuration
    
    The code scanned for an integer after a decimal point, which
    meant things could overflow if the number was very precise
    (0.1234123412341234123412342134s). This fix changes the
    parser to stop adding precision once we run out of bits, rather
    than trigger an erroneous overflow.
    
    We could parse durations using floating-point arithmetic,
    but since the type is int64 and float64 has only has 53 bits
    of precision, that would be imprecise.
    
    Fixes #15011.
    
    Change-Id: If85e22b8f6cef12475e221169bb8f493bb9eb590
    Reviewed-on: https://go-review.googlesource.com/29338
    Reviewed-by: Costin Chirvasuta <costinc@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e94c52933b9c414d3f8fa94ead0d9cc5b7d7d717
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Sep 16 21:42:18 2016 -0400

    cmd/compile: intrinsify Ctz{32,64} and Bswap{32,64} on s390x
    
    Also adds the 'find leftmost one' instruction (FLOGR) and replaces the
    WORD-encoded use of FLOGR in math/big with it.
    
    Change-Id: I18e7cd19e75b8501a6ae8bd925471f7e37ded206
    Reviewed-on: https://go-review.googlesource.com/29372
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f1973fca717f2c3f3f10bcc2bc3512a4c549710b
Author: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
Date:   Tue Apr 12 18:38:00 2016 -0300

    cmd/asm, cmd/internal/obj/ppc64: add ppc64 vector registers and instructions
    
    The current implementation for Power architecture does not include the vector
    (Altivec) registers.  This adds the 32 VMX registers and the most commonly used
    instructions: X-form loads/stores; VX-form logical operations, add/sub,
    rotate/shift, count, splat, SHA Sigma and AES cipher; VC-form compare; and
    VA-form permute, shift, add/sub and select.
    
    Fixes #15619
    
    Change-Id: I544b990631726e8fdfcce8ecca0aeeb72faae9aa
    Reviewed-on: https://go-review.googlesource.com/25600
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 31ba855014c62ed8ea2a19208d43318d99948e5b
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Sep 18 16:51:02 2016 -0700

    crypto/md5, crypto/sha1, crypto/sha256: add examples for checksumming a file
    
    Updates #16360.
    
    Change-Id: I75714d2b5f095fe39fd81edfa6dd9e44d7c44da1
    Reviewed-on: https://go-review.googlesource.com/29375
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca4089ad62b806db7d3f32335d3f20865a75edcd
Author: Keith Randall <khr@golang.org>
Date:   Wed Aug 31 15:17:02 2016 -0700

    cmd/compile: args no longer live until end-of-function
    
    We're dropping this behavior in favor of runtime.KeepAlive.
    Implement runtime.KeepAlive as an intrinsic.
    
    Update #15843
    
    Change-Id: Ib60225bd30d6770ece1c3c7d1339a06aa25b1cbc
    Reviewed-on: https://go-review.googlesource.com/28310
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit faf611a07a7630a075fba3a555db7831e002122a
Author: Brady Sullivan <brady@bsull.com>
Date:   Fri Sep 16 15:25:07 2016 -0700

    net/http: rename Post's parameter from bodyType to contentType
    
    Change-Id: Ie1b08215c02ce3ec72a4752f4b800f23345ff99d
    Reviewed-on: https://go-review.googlesource.com/29362
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 75ce89c20dab10857ab0b5102001b34767c45b6e
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 16 13:50:18 2016 -0700

    cmd/compile: cache CFG-dependent computations
    
    We compute a lot of stuff based off the CFG: postorder traversal,
    dominators, dominator tree, loop nest.  Multiple phases use this
    information and we end up recomputing some of it.  Add a cache
    for this information so if the CFG hasn't changed, we can reuse
    the previous computation.
    
    Change-Id: I9b5b58af06830bd120afbee9cfab395a0a2f74b2
    Reviewed-on: https://go-review.googlesource.com/29356
    Reviewed-by: David Chase <drchase@google.com>

commit 2679282da4e437ee086ec791ab73181c39ae3463
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 16 12:08:05 2016 -0700

    cmd/compile: fold ADDconsts together for PPC
    
    Change-Id: I571f03af6f791e78e7e18addcc310eb25747cdcf
    Reviewed-on: https://go-review.googlesource.com/29351
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6129f37367686edf7c2732fbb5300d5f28203743
Author: Keith Randall <khr@golang.org>
Date:   Sat Sep 17 15:04:36 2016 -0700

    cmd/compile: inline convT2{I,E} when result doesn't escape
    
    No point in calling a function when we can build the interface
    using a known type (or itab) and the address of a local.
    
    Get rid of third arg (preallocated stack space) to convT2{I,E}.
    
    Makes go binary smaller by 0.2%
    
    benchmark                   old ns/op     new ns/op     delta
    BenchmarkEfaceInteger-8     16.7          10.1          -39.52%
    
    Update #17118
    Update #15375
    
    Change-Id: I9724a1f802bfa1e3957bf1856b55558278e198a2
    Reviewed-on: https://go-review.googlesource.com/29373
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 892d146a7aae17e5fe22e04b16ba4da7e3d8c767
Author: Rob Pike <r@golang.org>
Date:   Mon Sep 19 11:22:52 2016 +1000

    cmd/vet: fix documentation for -structtags
    
    Was missing a title in the documentation, so it formatted wrong.
    
    Fixes #17124
    
    Change-Id: Ie8a9c36fbc54eed7d8a761f89a088e582b8c062d
    Reviewed-on: https://go-review.googlesource.com/29340
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit dcb954c3f7ab6d463882dbc3f88e075e8e096f74
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Sep 16 16:47:28 2016 +1200

    cmd/link: remove size and version from genasmsym's argument
    
    They are trivially available in the few places they are needed.
    
    Change-Id: I6544692e9027076ec9e6e9a295c66457039e55e1
    Reviewed-on: https://go-review.googlesource.com/29332
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2266047556e7bc32e828dbfc4accdd1d4669f137
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Sep 16 16:22:08 2016 +1200

    cmd/link: give names and a type to the symbol types used by genasmsym
    
    Doing this revealed some dead code.
    
    Change-Id: I5202fcc3f73e3dfddfea3ec7b772e16da51195da
    Reviewed-on: https://go-review.googlesource.com/29331
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c1bee49cac710af467f6450e104f920eafe344f7
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sun Sep 18 15:28:41 2016 -0400

    cmd/dist: fix internal linking check for mips64le
    
    Fix mips64le build.
    
    Change-Id: Icf1b4901655463f582b49054a88edfb06ad6c676
    Reviewed-on: https://go-review.googlesource.com/29281
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 964639cc338db650ccadeafb7424bc8ebb2c0f6c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Sep 15 19:50:59 2016 -0400

    cmd/compile: intrinsify runtime/internal/atomic.Xaddint64
    
    This aliases to Xadd64.
    
    Change-Id: I95d49e1d03eecc242e9e6fd4b2742b1c1a1d5ade
    Reviewed-on: https://go-review.googlesource.com/29274
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5c0fbf052b8ab98c0a1dd74365912d33572be4f3
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 16 15:08:17 2016 -0400

    plugin: cast dlerror return value for android
    
    Until a few weeks ago, bionic, the Andoid libc, incorrectly
    returned const char* (instead of char*) from dlerror(3).
    
    https://android.googlesource.com/platform/bionic/+/5e071a18ce88d93fcffaebb9e0f62524ae504908
    
    Change-Id: I30d33240c63a9f35b6c20ca7e3928ad33bc5e33f
    Reviewed-on: https://go-review.googlesource.com/29352
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2e2db7a1704773082db547cbde70d8c0ce36a10c
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 16 16:56:29 2016 -0700

    cmd/compile: fix format verbs in ssa package
    
    %s is no longer valid.  Use %v instead.
    
    Change-Id: I5ec4fa6a9280082c1a0c75fd1cf94b4bb8096f5c
    Reviewed-on: https://go-review.googlesource.com/29365
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 246074d043f686c532cac88dccd68e01048a23bc
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Sep 16 19:19:42 2016 -0700

    cmd/internal/obj: remove ACHECKNIL
    
    Updates #16357.
    
    Change-Id: I35f938d675ca5c31f65c4419ee0732bbc593b5cb
    Reviewed-on: https://go-review.googlesource.com/29368
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e518962a27ce0333d42833456e09557ba37a95a0
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Sep 16 18:31:25 2016 -0700

    cmd/internal/obj: simplify Plists
    
    Keep Plists in a slice instead of a linked list.
    Eliminate unnecessary fields.
    Also, while here remove gc's unused breakpc and continpc vars.
    
    Change-Id: Ia04264036c0442843869965d247ccf68a5295115
    Reviewed-on: https://go-review.googlesource.com/29367
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit fc5df089da6c02397897f11a875a593353dc0590
Author: Trey Lawrence <lawrence.trey@gmail.com>
Date:   Tue Aug 23 16:43:43 2016 -0400

    cmd/compile: fix compiler bug for constant equality comparison
    
    The compiler incorrectly will error when comparing a nil pointer
    interface to a nil pointer of any other type. Example:
    (*int)(nil) == interface{}(nil)
    Will error with "gc: illegal constant expression: *int == interface {}"
    
    Fixes #16702
    
    Change-Id: I1a15d651df2cfca6762b1783a28b377b2e6ff8c6
    Reviewed-on: https://go-review.googlesource.com/27591
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 6fe1febc867237fdf9ae40483044ed377144627f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Sep 16 15:31:04 2016 -0700

    cmd/internal/obj: replace AGLOBL with (*Link).Globl
    
    Replace the AGLOBL pseudo-op with a method to directly register an
    LSym as a global. Similar to how we previously already replaced the
    ADATA pseudo-op with directly writing out data bytes.
    
    Passes toolstash -cmp.
    
    Change-Id: I3631af0a2ab5798152d0c26b833dc309dbec5772
    Reviewed-on: https://go-review.googlesource.com/29366
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a1bf203b57ab854f2c1b7668ae96bc34e60e02fc
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Thu Sep 15 17:24:42 2016 -0300

    net: respect resolv.conf rotate option
    
    Instead of ranging over servers in the config, grab an offset
    from the config that is used to determine indices.
    
    When the rotate option is enabled, the offset increases which
    rotates queries through servers. Otherwise, it is always 0
    which uses servers in config order.
    
    Fixes #17126
    
    Change-Id: If233f6de7bfa42f88570055b9ab631be08a76b3e
    Reviewed-on: https://go-review.googlesource.com/29233
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit f7e49f6644bde3f17b4a795218a35876347455a1
Author: Suyash <dextrous93@gmail.com>
Date:   Fri Sep 16 19:54:44 2016 +0530

    sort: fix search descending order example
    
    Change-Id: I27b82d8c63a06ddf7e148b15853aba24a22a6282
    Reviewed-on: https://go-review.googlesource.com/29336
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 569340ebafcd20c01227ed9cbeb5ccd29c52f2bc
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 16 18:53:46 2016 -0400

    cmd/dist: disable plugin test on arm64
    
    Mysterious error and no time or easy machine access to investigate
    now, so disabling the -buildmode=plugin test on arm64. (The arm
    version is working as expected.)
    
    Updates #17138
    
    Change-Id: I4cc56ddf47e7597213462e48d4934a765168bd07
    Reviewed-on: https://go-review.googlesource.com/29363
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 192548a5470d013f8782c7f1c8553338f7234fc7
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 16 18:25:52 2016 -0400

    cmd/dist: unify internal linking checks
    
    I missed one in CL 29360.
    
    Change-Id: I29fc6dcd920829a918c70734d646119133a0a9df
    Reviewed-on: https://go-review.googlesource.com/29361
    Reviewed-by: Keith Randall <khr@golang.org>

commit f4748f1e218c3584348f2f5c297e73f494182e54
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 16 17:15:12 2016 -0400

    cmd/dist: skip libgcc test on arm64 and mips64
    
    This test was always being run with external linking on these
    platforms because the linker was silently forcing external linking
    until CL 28971. Now it produces an error instead.
    
    Change-Id: I794e0812711e05b150daf805dc3451507bb4cae8
    Reviewed-on: https://go-review.googlesource.com/29360
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fb4e49059c28fc2de64f0c1b83b178f4bede4a75
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 16 17:10:44 2016 -0400

    cmd/dist: disable plugin test on ppc64le and s390x
    
    These are close to working, but untested and failing on
    build.golang.org. So disable for now.
    
    Change-Id: I330b8d1a91f0bf5139c894913868f01ec87e986d
    Reviewed-on: https://go-review.googlesource.com/29359
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 08feadbd6e724fd0377f37fbe88a3114dd7b45bb
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Sep 16 14:08:10 2016 -0700

    cmd/compile: remove Arch.REGCTXT
    
    Update #16357.
    
    Change-Id: I507676212d7137a62c76de7bfa0ba8dbd68e840f
    Reviewed-on: https://go-review.googlesource.com/29358
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit f323a7c6d28cb536e1924ccd2566617e4c0dec34
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 16 15:24:56 2016 -0400

    cmd/link: remove never-set Windows variable
    
    Change-Id: I3d64549b85b71bb63bcc815ce2276af6ca2eb215
    Reviewed-on: https://go-review.googlesource.com/29354
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d6194c1fd1bc7ba2c89f2e0eaa9c08228088f4fc
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Sep 16 13:56:39 2016 -0700

    cmd/compile: change goarch.Main into goarch.Init
    
    Similar idea to golang.org/cl/28970.
    
    Change-Id: I9d2feb1a669d71ffda1d612cf39ee0d3c08d22d2
    Reviewed-on: https://go-review.googlesource.com/29357
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 32db3f2756324616b7c856ac9501deccc2491239
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Sep 15 17:40:26 2016 -0700

    cmd/compile/internal/syntax: support for alias declarations
    
    Permits parsing of alias declarations with -newparser
    
            const/type/var/func T => p.T
    
    but the compiler will reject it with an error. For now this
    also accepts
    
            type T = p.T
    
    so we can experiment with a type-alias only scenario.
    
    - renamed _Arrow token to _Larrow (<-)
    - introduced _Rarrow token (=>)
    - introduced AliasDecl node
    - extended scanner to accept _Rarrow
    - extended parser and printer to handle alias declarations
    
    Change-Id: I0170d10a87df8255db9186d466b6fd405228c38e
    Reviewed-on: https://go-review.googlesource.com/29355
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 28ed2b0cd9ad6e2015f073931c05c08e8bf7b247
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 9 12:04:22 2016 -0400

    cmd/link: skip arch-specific main function
    
    Add some notes to main.go on what happens where.
    
    Change-Id: I4fb0b6c280e5f990ddc5d749267372b86870af6d
    Reviewed-on: https://go-review.googlesource.com/28970
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c199c76cb47f065f9f513bc6f74f58be0484765d
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 16 12:11:33 2016 -0700

    cmd/compile: turn live variable test off for ppc
    
    ppc64 has an extraneous variable live in some situations.
    We need a better tighten pass to get rid of this extra variable.
    I'm working on it, but fix the test in the meantime.
    
    Fixes build for ppc64.
    
    Change-Id: I1efb9ccb234a64f2a1c228abd2b3195f67fbeb41
    Reviewed-on: https://go-review.googlesource.com/29353
    Reviewed-by: David Chase <drchase@google.com>

commit 9f447c20efeaab1e60e1da03feee2fa0935cf95c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Sep 16 11:26:41 2016 -0700

    cmd/compile: remove unused Label fields
    
    Updates #16357.
    
    Change-Id: I37f04d83134b5e1e7f6ba44eb9a566758ef594d3
    Reviewed-on: https://go-review.googlesource.com/29350
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 833ed7c4315d58f26875f512b5b5ef3b042ce7ed
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 16 09:36:00 2016 -0700

    cmd/compile: reorganize SSA register numbering
    
    Teach SSA about the cmd/internal/obj/$ARCH register numbering.
    It can then return that numbering when requested.  Each architecture
    now does not need to know anything about the internal SSA numbering
    of registers.
    
    Change-Id: I34472a2736227c15482e60994eebcdd2723fa52d
    Reviewed-on: https://go-review.googlesource.com/29249
    Reviewed-by: David Chase <drchase@google.com>

commit b87d7a5cf6da24b8dbe2f43cb69f61bd4dbc93f5
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 16 11:35:53 2016 -0400

    cmd/link: give RelocVariant a type, document Reloc
    
    Change-Id: Ib20263405a08674b5e160295fc965da4c8b54b34
    Reviewed-on: https://go-review.googlesource.com/29248
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6007c8c76beb6e9d8bccc966f0a1cc0f7518c539
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 9 17:34:07 2016 -0400

    cmd/link: attempt to rationalize linkmode init
    
    This CL gives Linkmode a type, switches it to the standard flag
    handling mechanism, and deduplicates some logic.
    
    There is a semantic change in this CL. Previously if a link was
    invoked explicitly with -linkmode=internal, any condition that forced
    external linking would silently override this and use external
    linking. Instead it now fails with a reason why. I believe this is an
    improvement, but will change it back if there's disagreement.
    
    Fixes #12848
    
    Change-Id: Ic80e341fff65ecfdd2b6fdd6079674cc7210fc5f
    Reviewed-on: https://go-review.googlesource.com/28971
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1df438f79c440ddf9bdd342f089a55567254bc9a
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Aug 26 09:04:27 2016 -0400

    misc/cgo/testplugin: add test of -buildmode=plugin
    
    Change-Id: Ie9fea9814c850b084562ab2349b54d9ad9fa1f4a
    Reviewed-on: https://go-review.googlesource.com/27825
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c19382319abd444592a02e819db87fe77d9a888c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Aug 26 08:51:58 2016 -0400

    cmd/go: support -buildmode=plugin on linux
    
    Change-Id: I0c8a04457db28c55c35c9a186b63c40f40730e39
    Reviewed-on: https://go-review.googlesource.com/27824
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 0cbb12f0bbaeb3893b3d011fdb1a270291747ab0
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Aug 26 08:50:50 2016 -0400

    plugin: new package for loading plugins
    
    Includes a linux implementation.
    
    Change-Id: Iacc2ed7da760ae9deebc928adf2b334b043b07ec
    Reviewed-on: https://go-review.googlesource.com/27823
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit c87528d7761e3f133fe238937019a18bf7cf0d3c
Author: David Chase <drchase@google.com>
Date:   Thu Sep 15 15:14:32 2016 -0700

    cmd/compile: elide unnecessary sign/zeroExt, PPC64
    
    Bias {Eq,Neq}{8,16} to prefer the extension likely to match
    their operand's load (if loaded), and elide sign and zero
    extending MOV{B,W}, MOV{B,W}Z when their operands are already
    appropriately extended.
    
    Change-Id: Ic01b9cab55e170f68fc2369688b50ce78a818608
    Reviewed-on: https://go-review.googlesource.com/29236
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 46ba59025f527b2cfc5ef0d5ec47be45971ba672
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jul 20 10:09:40 2016 -0400

    cmd/compile: label LoadReg with line number of the use
    
    A tentative fix of #16380. It adds "line" everywhere...
    
    This also reduces binary size slightly (cmd/go on ARM as an example):
    
                            before          after
    total binary size       8068097         8018945 (-0.6%)
    .gopclntab              1195341         1179929 (-1.3%)
    .debug_line              689692          652017 (-5.5%)
    
    Change-Id: Ibda657c6999783c5bac180cbbba487006dbf0ed7
    Reviewed-on: https://go-review.googlesource.com/25082
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 882dd1c3baff19cfe8d59bc1f69d766b38540fa5
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Sep 16 09:27:06 2016 -0400

    cmd/compile: enable rewritings that are blocked by old backends
    
    Old backends did not implement them, but SSA do.
    
    Change-Id: I543b2281dcf4bab0da37c9b1f26a5ef55a0ea11b
    Reviewed-on: https://go-review.googlesource.com/29278
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 8607bed7445100993938ee96a028627461fce9d3
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Aug 25 22:04:04 2016 -0400

    runtime: avoid dependence on main symbol
    
    For -buildmode=plugin, this lets the linker drop the main.main symbol
    out of the binary while including most of the runtime.
    
    (In the future it should be possible to drop the entire runtime
    package from plugins.)
    
    Change-Id: I3e7a024ddf5cc945e3d8b84bf37a0b7cb2a00eb6
    Reviewed-on: https://go-review.googlesource.com/27821
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit eced6754c2f2ce98cb5bacbdbfcbbaa4a6a69d53
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Aug 25 21:58:45 2016 -0400

    cmd/link: -buildmode=plugin support for linux
    
    This CL contains several linker changes to support creating plugins.
    
    It collects the exported plugin symbols provided by the compiler and
    includes them in the moduledata.
    
    It treats a binary as being dynamically linked if it imports the plugin
    package. This lets the dynamic linker de-duplicate symbols.
    
    Change-Id: I099b6f38dda26306eba5c41dbe7862f5a5918d95
    Reviewed-on: https://go-review.googlesource.com/27820
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 79167bbd9c71017e18836a3e5e40261b57012358
Author: Suyash <dextrous93@gmail.com>
Date:   Wed Sep 14 22:36:58 2016 +0530

    sort: add examples for sort.Search
    
    This adds examples showing the different ways of using sort.Search.
    
    Change-Id: Iaa08b4501691f37908317fdcf2e618fbe9f99ade
    Reviewed-on: https://go-review.googlesource.com/29131
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9658de32c6141ca036a741006da5b83b4b2c6af5
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 19:48:53 2016 -0700

    cmd/compile: remove unused cases in Naddr
    
    Gins, and in turn Naddr, is only used with ONAME and OLITERAL Nodes,
    so we can drastically simplify Naddr.
    
    Passes toolstash/buildall.
    
    Change-Id: I2deb7eb771fd55e7c7f00040a9aee54588fcac11
    Reviewed-on: https://go-review.googlesource.com/29247
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c55c33af52c5ed97c93ec67bf7373d095bcb957d
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Wed Sep 14 02:11:02 2016 -0700

    os/exec: add examples for CombinedOutput, StdinPipe, StderrPipe
    
    Updates #16360.
    
    Adds examples for:
    + CombinedOutput
    + StdinPipe
    + StderrPipe
    
    Change-Id: I19293e64b34ed9268da00e0519173a73bfbc2c10
    Reviewed-on: https://go-review.googlesource.com/29150
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 1bd91d4ccc57d3dbb2e5452c16ff6281d53e9763
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 19:00:05 2016 -0700

    cmd/internal/obj: remove Addr.Etype and Addr.Width
    
    Since the legacy backends were removed, these fields are write-only.
    
    Change-Id: I4816c39267b7c10a4da2a6d22cd367dc475e564d
    Reviewed-on: https://go-review.googlesource.com/29246
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 073d248bf50b1b1029b2a09c575111f38f6bf5eb
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Sep 16 11:00:54 2016 +1000

    cmd/compile/internal/gc: make Nod private
    
    Follow up to CL 29134. Generated with gofmt -r 'Nod -> nod', plus
    three manual adjustments to the comments in syntax/parser.go
    
    Change-Id: I02920f7ab10c70b6e850457b42d5fe35f1f3821a
    Reviewed-on: https://go-review.googlesource.com/29136
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit bb12894d2b51f8a50c0783db6043247758706466
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Sep 15 19:52:40 2016 -0400

    cmd/link: fix number-of-files entry in gopclntab
    
    According to golang.org/s/go12symtab, for N files, it should put N+1
    there.
    
    Fixes #17132.
    
    Change-Id: I0c84136855c6436be72b9d3c407bf10d4c81a099
    Reviewed-on: https://go-review.googlesource.com/29275
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 544010a05a90e45763ec9a8c149fc5137e1ec461
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 16:37:17 2016 -0700

    cmd/compile: remove Betypeinit
    
    Change-Id: I5c2fd0ff1b49f3826f2b9869b0b11329804b0e2a
    Reviewed-on: https://go-review.googlesource.com/29244
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 1f2930cb5cf78cab648e39b9a0cee2f7a1e98d99
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 16:33:11 2016 -0700

    cmd/compile: remove traces of old register allocator
    
    Only added lines are moving amd64 and x86's ginsnop functions from
    gsubr.go to ggen.go to match other architectures, so all of the
    gsubr.go files can go away.
    
    Change-Id: Ib2292460c155ae6d9dcf5c9801f178031d8eea7a
    Reviewed-on: https://go-review.googlesource.com/29240
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit ae7e0ad7b8cdc16b6a7d5043375bb92a9cf6190a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 16:21:56 2016 -0700

    cmd/compile: remove more dead code
    
    Change-Id: I0131b0d7421ff1397f16a08eff758250abbdf8e2
    Reviewed-on: https://go-review.googlesource.com/29239
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit e888b81a11df98d352580358e1ba524d05904d69
Author: Vitor De Mario <vitordemario@gmail.com>
Date:   Thu Sep 15 20:46:20 2016 -0300

    doc: change variable name in Effective Go
    
    Effective Go has references to a function call f(c, req) made by ServeHTTP mixed with f(w,
    req). c is dropped in favor of w to maintain consistency
    
    Fixes #17128
    
    Change-Id: I6746fd115ed5a58971fd24e54024d29d18ead1fa
    Reviewed-on: https://go-review.googlesource.com/29311
    Reviewed-by: Rob Pike <r@golang.org>

commit e727e37090de987f2fafd48a02cd39455dff2ca5
Author: Alberto Bertogli <albertito@blitiri.com.ar>
Date:   Thu Sep 15 02:32:44 2016 +0100

    net: document dummy byte in ReadMsgUnix and WriteMsgUnix
    
    ReadMsgUnix and WriteMsgUnix both will read/write 1 byte from/to the
    socket if they were given no buffer to read/write, to avoid a common
    pitfall in out of band operations (they will usually block
    indefinitely if there's no actual data to read).
    
    This patch adds a note about this behaviour in their documentation, so
    users can be aware of it.
    
    Change-Id: I751f0e12bb4d80311e94ea8de023595c5d40ec3e
    Reviewed-on: https://go-review.googlesource.com/29180
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 897c0ebf61daaaf9c02be577f1afcb2c67ff3ed5
Author: David Chase <drchase@google.com>
Date:   Thu Sep 15 16:51:35 2016 -0400

    cmd/compile: adapt GOSSAHASH to set a DebugTest flag in ssa.Config
    
    Binary search remains our friend.
    Suppose you add an ought-to-be-benign pattern to PPC64.rules,
    and make.bash starts crashing.  You can guard the pattern(s)
    with config.DebugTest:
    
    (Eq8 x y) && config.DebugTest && isSigned(x.Type) &&
       isSigned(y.Type) ->
       (Equal (CMPW (SignExt8to32 x) (SignExt8to32 y)))
    
    and then
    
      gossahash -s ./make.bash
      ...
      (go drink beer while silicon minions toil)
      ...
      Trying ./make.bash args=[], env=[GOSSAHASH=100110010111110]
      ./make.bash failed (1 distinct triggers): exit status 1
      Trigger string is 'GOSSAHASH triggered (*importReader).readByte',
        repeated 1 times
      Review GSHS_LAST_FAIL.0.log for failing run
      Finished with GOSSAHASH=100110010111110
    
    Change-Id: I4eff46ebaf496baa2acedd32e217005cb3ac1c62
    Reviewed-on: https://go-review.googlesource.com/29273
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit b265d51789ea7ccf68787ebb30a2cdf03cc9d4fe
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 15 13:29:17 2016 -0700

    test,cmd/compile: remove _ssa file suffix
    
    Everything is SSA now.
    
    Update #16357
    
    Change-Id: I436dbe367b863ee81a3695a7d653ba4bfc5b0f6c
    Reviewed-on: https://go-review.googlesource.com/29232
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f13701bf2f32fe48f6dcf9149b35b9ce3effe022
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 15 13:04:50 2016 -0700

    test: make SSA tests unconditional
    
    Delete legacy backend tests, make SSA tests unconditional.
    
    Next CL will remove _ssa from the file names.
    
    Update #16357
    
    Change-Id: I2a7f5dcbc69455f63b5e6e6b2725df26ab86c8dd
    Reviewed-on: https://go-review.googlesource.com/29231
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 22d3bf1da49a6fa168cf16a619d3591100dba426
Author: Sam Whited <sam@samwhited.com>
Date:   Fri Sep 9 09:49:47 2016 -0500

    cmd/fix: add golang.org/x/net/context fix
    
    Fixes #17040
    
    Change-Id: I3682cc0367b919084c280d7dc64746495c1d4aaa
    Reviewed-on: https://go-review.googlesource.com/28872
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4466298df47fee61c31933e6fd5dde474dcfd2ad
Author: Mohit Agarwal <mohit@sdf.org>
Date:   Wed Sep 7 09:36:58 2016 +0530

    cmd/go: add distribution-specific info for Linux to bug command
    
    Also remove the hard-coded path for getting glibc information.
    
    As an example, the following is the diff for `go bug` on Ubuntu before
    and after the change:
    
    >>>
    --- /tmp/01     2016-09-13 15:08:53.202758043 +0530
    +++ /tmp/02     2016-09-13 21:38:17.485039867 +0530
    @@ -1,7 +1,7 @@
     Please check whether the issue also reproduces on the latest release, go1.7.1.
    
     ```
    -go version devel +bdb3b79 Wed Sep 7 03:23:44 2016 +0000 linux/amd64
    +go version devel +cb13150 Wed Sep 7 09:46:58 2016 +0530 linux/amd64
     GOARCH="amd64"
     GOBIN=""
     GOEXE=""
    @@ -18,5 +18,23 @@
     CXX="g++"
     CGO_ENABLED="1"
     uname -sr: Linux 4.4.0-36-generic
    +Distributor ID:        Ubuntu
    +Description:   Ubuntu 16.04.1 LTS
    +Release:       16.04
    +Codename:      xenial
    +/lib/x86_64-linux-gnu/libc.so.6: GNU C Library (Ubuntu GLIBC 2.23-0ubuntu3) stable release version 2.23, by Roland McGrath et al.
     gdb --version: GNU gdb (Ubuntu 7.11.1-0ubuntu1~16.04) 7.11.1
     ```
    <<<
    
    Change-Id: I7e3730a797af0f94d6e43fe4743ab48bc0f11f1b
    Reviewed-on: https://go-review.googlesource.com/28581
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3eb16c059d301bc7242461ac8480d95e433e0374
Author: David Chase <drchase@google.com>
Date:   Thu Sep 15 12:43:29 2016 -0400

    cmd/compile: repair GOSSAFUNC functionality
    
    GOSSAFUNC=foo had previously only done printing for the
    single function foo, and didn't quite clean up after itself
    properly. Changes ensures that Config.HTML != nil iff
    GOSSAFUNC==name-of-current-function.
    
    Change-Id: I255e2902dfc64f715d93225f0d29d9525c06f764
    Reviewed-on: https://go-review.googlesource.com/29250
    Run-TryBot: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ad7732a9acf6447e4b70845085263772ea788a6c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Sep 15 08:07:54 2016 -0700

    cmd/compile: remove gins
    
    The only remaining consumers of gins were
    ginsnop and arch-independent opcodes like GVARDEF.
    Rewrite ginsnop to create and populate progs directly.
    Move arch-independent opcodes to package gc
    and simplify.
    Delete some now unused code.
    There is more.
    Step one towards eliminating gc.Node.Reg.
    
    Change-Id: I7c34cd8a848f6fc3b030705ab8e293838e0b6c20
    Reviewed-on: https://go-review.googlesource.com/29220
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a06e931abec6082e8f2db65f29dd6c63be5c0de6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Sep 15 08:46:08 2016 -0700

    cmd/compile: nodintconst is the new Nodintconst
    
    Fixes the build.
    
    Change-Id: Ib9aca6cf86d595d20f22dbf730afa8dea4b44672
    Reviewed-on: https://go-review.googlesource.com/29221
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit c9fd997524ce7d531579500218f11b528bab4c88
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jun 25 13:40:43 2016 -0700

    cmd/compile: unroll comparisons to short constant strings
    
    Unroll s == "ab" to
    
    len(s) == 2 && s[0] == 'a' && s[1] == 'b'
    
    This generates faster and shorter code
    by avoiding a runtime call.
    Do something similar for !=.
    
    The cutoff length is 6. This was chosen empirically
    by examining binary sizes on arm, arm64, 386, and amd64
    using the SSA backend.
    
    For all architectures examined, 4, 5, and 6 were
    the ideal cutoff, with identical binary sizes.
    
    The distribution of constant string equality sizes
    during 'go build -a std' is:
    
     40.81%   622 len 0
     14.11%   215 len 4
      9.45%   144 len 1
      7.81%   119 len 3
      7.48%   114 len 5
      5.12%    78 len 7
      4.13%    63 len 2
      3.54%    54 len 8
      2.69%    41 len 6
      1.18%    18 len 10
      0.85%    13 len 9
      0.66%    10 len 14
      0.59%     9 len 17
      0.46%     7 len 11
      0.26%     4 len 12
      0.20%     3 len 19
      0.13%     2 len 13
      0.13%     2 len 15
      0.13%     2 len 16
      0.07%     1 len 20
      0.07%     1 len 23
      0.07%     1 len 33
      0.07%     1 len 36
    
    A cutoff of length 6 covers most of the cases.
    
    Benchmarks on amd64 comparing a string to a constant of length 3:
    
    Cmp/1same-8           4.78ns ± 6%  0.94ns ± 9%  -80.26%  (p=0.000 n=20+20)
    Cmp/1diffbytes-8      6.43ns ± 6%  0.96ns ±11%  -85.13%  (p=0.000 n=20+20)
    Cmp/3same-8           4.71ns ± 5%  1.28ns ± 5%  -72.90%  (p=0.000 n=20+20)
    Cmp/3difffirstbyte-8  6.33ns ± 7%  1.27ns ± 7%  -79.90%  (p=0.000 n=20+20)
    Cmp/3difflastbyte-8   6.34ns ± 8%  1.26ns ± 9%  -80.13%  (p=0.000 n=20+20)
    
    The change to the prove test preserves the
    existing intent of the test. When the string was
    short, there was a new "proved in bounds" report
    that referred to individual byte comparisons.
    
    Change-Id: I593ac303b0d11f275672090c5c786ea0c6b8da13
    Reviewed-on: https://go-review.googlesource.com/26758
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 584978f4b5a6abc6d3950114994e7281b525a232
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Sep 16 00:33:29 2016 +1000

    cmd/compile/internal/gc: unexport private variables
    
    Change-Id: I14a7c08105e6bdcee04a5cc21d7932e9ca753384
    Reviewed-on: https://go-review.googlesource.com/29138
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8e922759b381061cc4709c3e52d522d983521c5a
Author: Dave Cheney <dave@cheney.net>
Date:   Fri Sep 16 00:17:33 2016 +1000

    cmd/compile/internal/gc: fix build
    
    Fix conflict between CL 29213 and 29134.
    
    Change-Id: Ie58bd7195893d7e634f1b257ee0bdd3250cd23c2
    Reviewed-on: https://go-review.googlesource.com/29137
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit df2b63f09be280544e58c8d17fe34c863521ed10
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Sep 14 20:07:13 2016 -0700

    cmd/compile: unwrap fewer CONVNOPs in staticassign
    
    staticassign unwraps all CONVNOPs.
    However, in the included test, we need the
    CONVNOP for everything to typecheck.
    Stop unwrapping unnecessarily.
    
    The code we generate for this example is
    suboptimal, but that's not new; see #17113.
    
    Fixes #17111.
    
    Change-Id: I29532787a074a6fe19a5cc53271eb9c84bf1b576
    Reviewed-on: https://go-review.googlesource.com/29213
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d7012ca282092e876c3f12b758e12d6eabc8cc3c
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Sep 15 15:45:10 2016 +1000

    cmd/compile/internal/gc: unexport more helper functions
    
    After the removal of the old backend many types are no longer referenced
    outside internal/gc. Make these functions private so that tools like
    honnef.co/go/unused can spot when they become dead code. In doing so
    this CL identified several previously public helpers which are no longer
    used, so removes them.
    
    This should be the last of the public functions.
    
    Change-Id: I7e9c4e72f86f391b428b9dddb6f0d516529706c3
    Reviewed-on: https://go-review.googlesource.com/29134
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 896ac677b5e3e80278cc1ce179d8a077ac3a6d2f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Sep 14 14:51:41 2016 -0700

    cmd/go: make bug subcommand open the browser
    
    Instead of dumping information for the use
    to copy/paste into the issue tracker,
    open the issue tracker directly with a pre-filled
    template.
    
    Change-Id: I370d0063b609200497014ccda35244fa4314a662
    Reviewed-on: https://go-review.googlesource.com/29210
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 27eebbabc23366552508f4b13375f8729b90aacb
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 00:52:36 2016 -0700

    cmd/compile, runtime: remove throwreturn
    
    Change-Id: If8d27cf1cd8d650ed0ba332448d3174d80b6b0ca
    Reviewed-on: https://go-review.googlesource.com/29217
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 78c46581f4da82473f3efcbbe1f3b48625f88471
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 00:34:35 2016 -0700

    cmd/compile: deduplicate appendpp functions
    
    Change-Id: Ifa7a882b020f7b0c9602c28c3e5567e5d4c39e73
    Reviewed-on: https://go-review.googlesource.com/29216
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 8a0bd5dc01f21888525e58d42efdc9dd246748d6
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Sep 15 00:21:28 2016 -0700

    cmd/compile: eliminate differences in appendpp functions
    
    Consistently use int16 for [ft]reg and int64 for [ft]offset.
    
    Change-Id: I7d279bb6e4fb735105429234a949074bf1cefb29
    Reviewed-on: https://go-review.googlesource.com/29215
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 838eaa738f2bc07c3706b96f9e702cb80877dfe1
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Sep 14 23:57:50 2016 -0700

    cmd/compile: remove more dead code
    
    Change-Id: Ib05a8e149db8accdb1474703cd7b7004243d91d4
    Reviewed-on: https://go-review.googlesource.com/29214
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit f03855f40ef131de6c0881ec12996a747be05a83
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Sep 14 16:49:44 2016 -0700

    cmd/compile: remove ginscon2 functions
    
    These are no longer reachable as gins dispatches to ginscon for all
    arch-specific instructions anyway.
    
    Change-Id: I7f34883c16058308d8afa0f960dcf554af31bfe4
    Reviewed-on: https://go-review.googlesource.com/29211
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 82703f84e4e2ab5b68d43825e0f046a5ad990612
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Sep 15 14:34:20 2016 +1000

    cmd/compile/internal/gc: unexport helper functions
    
    After the removal of the old backend many types are no longer referenced
    outside internal/gc. Make these functions private so that tools like
    honnef.co/go/unused can spot when they become dead code. In doing so
    this CL identified several previously public helpers which are no longer
    used, so removes them.
    
    Change-Id: Idc2d485f493206de9d661bd3cb0ecb4684177b32
    Reviewed-on: https://go-review.googlesource.com/29133
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 24965bc96ce2fd1483b6b8d5759b0ea129688758
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Sep 15 14:20:55 2016 +1000

    cmd/compile/internal/gc: remove dead code
    
    Remove unused functions spotted by honnef.co/go/unused.
    
    Change-Id: Iabf3b201215ce21e420a60f4ef2679b36231eda7
    Reviewed-on: https://go-review.googlesource.com/29132
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e7cc9c4f4dee2d6f8a77ce177172ef4ae4ff0c90
Author: Keith Randall <khr@golang.org>
Date:   Wed Sep 14 14:02:50 2016 -0700

    cmd/compile: delete lots of the legacy backend
    
    It's not everything, but it is a good start.
    
    I tried to make the CL delete only.  goimports forced
    a few exceptions to that rule.
    
    Update #16357
    
    Change-Id: I041925cb2fe68bb7ae1617af862b22c48da649c1
    Reviewed-on: https://go-review.googlesource.com/29168
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Martin Möhrmann <martisch@uos.de>

commit 3134ab3c2d58d2c9f93471c85405cb26ccdf0f4d
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 13 17:01:01 2016 -0700

    cmd/compile: redo nil checks
    
    Get rid of BlockCheck. Josh goaded me into it, and I went
    down a rabbithole making it happen.
    
    NilCheck now panics if the pointer is nil and returns void, as before.
    BlockCheck is gone, and NilCheck is no longer a Control value for
    any block. It just exists (and deadcode knows not to throw it away).
    
    I rewrote the nilcheckelim pass to handle this case.  In particular,
    there can now be multiple NilCheck ops per block.
    
    I moved all of the arch-dependent nil check elimination done as
    part of ssaGenValue into its own proper pass, so we don't have to
    duplicate that code for every architecture.
    
    Making the arch-dependent nil check its own pass means I needed
    to add a bunch of flags to the opcode table so I could write
    the code without arch-dependent ops everywhere.
    
    Change-Id: I419f891ac9b0de313033ff09115c374163416a9f
    Reviewed-on: https://go-review.googlesource.com/29120
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit f9e9412ce26ca208c1d25a6b854259c94aa54030
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 10 18:53:30 2016 -0700

    cmd/dist: run vet/all on dedicated builders
    
    We will soon add dedicated builders for running vet/all.
    Their name will end with "-vetall".
    On those builders, run vet/all and nothing else.
    On all other builders, including local all.bash,
    don't run vet/all at all, because it is slow.
    
    This will probably be refined more over time.
    
    Change-Id: Ib1d0337adda84353931a325515c132068d4320cd
    Reviewed-on: https://go-review.googlesource.com/28962
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fb273fc3a3438f7a24b0901e2fcfd099eac4860d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Aug 26 10:50:12 2016 -0700

    cmd/compile: fix comma-ok assignments for non-boolean ok
    
    Passes toolstash -cmp.
    
    Fixes #16870.
    
    Change-Id: I70dc3bbb3cd3031826e5a54b96ba1ea603c282d1
    Reviewed-on: https://go-review.googlesource.com/27910
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 150de948eeceac0ace02a0f93a9a7a1f7421d744
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Sep 10 22:44:00 2016 +0200

    cmd/compile: intrinsify slicebytetostringtmp when not instrumenting
    
    when not instrumenting:
    - Intrinsify uses of slicebytetostringtmp within the runtime package
      in the ssa backend.
    - Pass OARRAYBYTESTRTMP nodes to the compiler backends for lowering
      instead of generating calls to slicebytetostringtmp.
    
    name                    old time/op  new time/op  delta
    ConcatStringAndBytes-4  27.9ns ± 2%  24.7ns ± 2%  -11.52%  (p=0.000 n=43+43)
    
    Fixes #17044
    
    Change-Id: I51ce9c3b93284ce526edd0234f094e98580faf2d
    Reviewed-on: https://go-review.googlesource.com/29017
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 1c5ac0827d2d0d2f5fb3b7f2b34b37e170beff1d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Sep 14 14:10:14 2016 -0700

    cmd/vet/all: check platforms concurrently
    
    Change-Id: I63e7fd7f62aa80e1252b0c5b6c472439aa66da73
    Reviewed-on: https://go-review.googlesource.com/29169
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b78108d5dc198a1bb8ed294b8b974f0c0d51b55c
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Sep 3 18:16:52 2016 -0700

    time: document in UnixNano when the value is valid
    
    It is unlikely that the value of UnixNano overflow in most
    use cases. However, the max date of 2262 is also within the range
    where it may be of concern to some users. Rather than have each
    person recompute when this overflows to validate if its okay for
    their use case, we just document it as within the years 1678 and
    2262, for user's convenience.
    
    Fixes #16977
    
    Change-Id: I4988738c147f4a6d30f8b8735c3941b75113bb16
    Reviewed-on: https://go-review.googlesource.com/28478
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 4b8a1611b5d37fd41d2d11ef1bb3455c77b34e07
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Sep 14 13:19:20 2016 -0700

    cmd/compile: add Nodes.Prepend helper method
    
    Prepared with gofmt -r.
    
    Change-Id: Ib9f224cc20353acd9c5850dead1a2d32ca5427d3
    Reviewed-on: https://go-review.googlesource.com/29165
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6f135bfd922cafd000497467c73cc03cfa788fa6
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Sep 14 18:44:59 2016 +0000

    math/big: cut 2 minutes off race tests
    
    No need to test so many sizes in race mode, especially for a package
    which doesn't use goroutines.
    
    Reduces test time from 2.5 minutes to 25 seconds.
    
    Updates #17104
    
    Change-Id: I7065b39273f82edece385c0d67b3f2d83d4934b8
    Reviewed-on: https://go-review.googlesource.com/29163
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 983e2fd4e6fecd78789384069c476eead4806d1b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Sep 14 18:14:34 2016 +0000

    sort: cut 140 seconds off race build tests
    
    No coverage is gained by running the 1e6 versions of the test over the
    1e4 versions. It just adds 140 seconds of race overhead time.
    
    Updates #17104
    
    Change-Id: I41408aedae34a8b1a148eebdda20269cdefffba3
    Reviewed-on: https://go-review.googlesource.com/29159
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 83676b93fb9591fb452612b55237ffdeb2a59119
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Sep 14 11:35:29 2016 -0700

    cmd/compile, cmd/link: fix printf verbs
    
    Found by vet.
    
    Change-Id: I9dbc6208ddbb5b407f4ddd20efbc166aac852cf7
    Reviewed-on: https://go-review.googlesource.com/29162
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d72c2846f1fac679d6def717b4e9c83fbafdf908
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Sep 14 11:35:11 2016 -0700

    cmd/vet/all: update whitelist
    
    CL 29110 brought the fix into the main tree.
    
    Change-Id: I7bf02670d40f22d35c63e05173419fdee9f93462
    Reviewed-on: https://go-review.googlesource.com/29161
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b92d39ef6924fd5174449f95505d782f3f75db16
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 7 16:50:46 2016 -0700

    cmd/compile/internal/obj/x86: eliminate some function prologues
    
    The standard sort swap method
    
    func (t T) Swap(i, j int) {
      t[i], t[j] = t[j], t[i]
    }
    
    uses no stack space on architectures for which
    FixedFrameSize == 0, currently 386 and amd64.
    
    Nevertheless, we insert a stack check prologue.
    This is because it contains a call to
    runtime.panicindex.
    
    However, for a few common runtime functions,
    we know at compile time that they require
    no arguments. Allow them to pass unnoticed.
    
    Triggers for 380 functions during make.bash.
    Cuts 4k off cmd/go.
    
    encoding/binary benchmarks:
    
    ReadSlice1000Int32s-8     9.49µs ± 3%    9.41µs ± 5%    ~     (p=0.075 n=29+27)
    ReadStruct-8              1.50µs ± 3%    1.48µs ± 2%  -1.49%  (p=0.000 n=30+28)
    ReadInts-8                 599ns ± 3%     600ns ± 3%    ~     (p=0.471 n=30+29)
    WriteInts-8                836ns ± 4%     841ns ± 3%    ~     (p=0.371 n=30+29)
    WriteSlice1000Int32s-8    8.84µs ± 3%    8.69µs ± 5%  -1.71%  (p=0.001 n=30+30)
    PutUvarint32-8            29.6ns ± 1%    28.1ns ± 3%  -5.21%  (p=0.000 n=28+28)
    PutUvarint64-8            82.6ns ± 5%    82.3ns ±10%  -0.43%  (p=0.014 n=27+30)
    
    Swap assembly before:
    
    "".T.Swap t=1 size=74 args=0x28 locals=0x0
            0x0000 00000 (swap.go:5)        TEXT    "".T.Swap(SB), $0-40
            0x0000 00000 (swap.go:5)        MOVQ    (TLS), CX
            0x0009 00009 (swap.go:5)        CMPQ    SP, 16(CX)
            0x000d 00013 (swap.go:5)        JLS     67
            0x000f 00015 (swap.go:5)        FUNCDATA        $0, gclocals·3cadd97b66f25a3a642be35e9362338f(SB)
            0x000f 00015 (swap.go:5)        FUNCDATA        $1, gclocals·69c1753bd5f81501d95132d08af04464(SB)
            0x000f 00015 (swap.go:5)        MOVQ    "".i+32(FP), AX
            0x0014 00020 (swap.go:5)        MOVQ    "".t+16(FP), CX
            0x0019 00025 (swap.go:5)        CMPQ    AX, CX
            0x001c 00028 (swap.go:5)        JCC     $0, 60
            0x001e 00030 (swap.go:5)        MOVQ    "".t+8(FP), DX
            0x0023 00035 (swap.go:5)        MOVBLZX (DX)(AX*1), BX
            0x0027 00039 (swap.go:5)        MOVQ    "".j+40(FP), SI
            0x002c 00044 (swap.go:5)        CMPQ    SI, CX
            0x002f 00047 (swap.go:5)        JCC     $0, 60
            0x0031 00049 (swap.go:5)        MOVBLZX (DX)(SI*1), CX
            0x0035 00053 (swap.go:5)        MOVB    CL, (DX)(AX*1)
            0x0038 00056 (swap.go:5)        MOVB    BL, (DX)(SI*1)
            0x003b 00059 (swap.go:5)        RET
            0x003c 00060 (swap.go:5)        PCDATA  $0, $1
            0x003c 00060 (swap.go:5)        CALL    runtime.panicindex(SB)
            0x0041 00065 (swap.go:5)        UNDEF
            0x0043 00067 (swap.go:5)        NOP
            0x0043 00067 (swap.go:5)        CALL    runtime.morestack_noctxt(SB)
            0x0048 00072 (swap.go:5)        JMP     0
    
    Swap assembly after:
    
    "".T.Swap t=1 size=52 args=0x28 locals=0x0
            0x0000 00000 (swap.go:5)        TEXT    "".T.Swap(SB), $0-40
            0x0000 00000 (swap.go:5)        FUNCDATA        $0, gclocals·3cadd97b66f25a3a642be35e9362338f(SB)
            0x0000 00000 (swap.go:5)        FUNCDATA        $1, gclocals·69c1753bd5f81501d95132d08af04464(SB)
            0x0000 00000 (swap.go:5)        MOVQ    "".i+32(FP), AX
            0x0005 00005 (swap.go:5)        MOVQ    "".t+16(FP), CX
            0x000a 00010 (swap.go:5)        CMPQ    AX, CX
            0x000d 00013 (swap.go:5)        JCC     $0, 45
            0x000f 00015 (swap.go:5)        MOVQ    "".t+8(FP), DX
            0x0014 00020 (swap.go:5)        MOVBLZX (DX)(AX*1), BX
            0x0018 00024 (swap.go:5)        MOVQ    "".j+40(FP), SI
            0x001d 00029 (swap.go:5)        CMPQ    SI, CX
            0x0020 00032 (swap.go:5)        JCC     $0, 45
            0x0022 00034 (swap.go:5)        MOVBLZX (DX)(SI*1), CX
            0x0026 00038 (swap.go:5)        MOVB    CL, (DX)(AX*1)
            0x0029 00041 (swap.go:5)        MOVB    BL, (DX)(SI*1)
            0x002c 00044 (swap.go:5)        RET
            0x002d 00045 (swap.go:5)        PCDATA  $0, $1
            0x002d 00045 (swap.go:5)        CALL    runtime.panicindex(SB)
            0x0032 00050 (swap.go:5)        UNDEF
    
    Change-Id: I57dad14af8aaa5e6112deac407cfadc2bfaf1f54
    Reviewed-on: https://go-review.googlesource.com/24814
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 33ed35647520f2162c2fed1b0e5f19cec2c65de3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Sep 14 11:16:50 2016 -0700

    cmd: add internal/browser package
    
    cmd/cover, cmd/trace, and cmd/pprof all open browsers.
    'go bug' will soon also open a browser.
    It is time to unify the browser-handling code.
    
    Change-Id: Iee6b443e21e938aeaaac366a1aefb1afbc7d9b2c
    Reviewed-on: https://go-review.googlesource.com/29160
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 9a7ce41d6c74ef30af361677d2077ad8dd0e92b7
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Sep 14 18:03:26 2016 +0000

    bytes: cut 10 seconds off the race builder's benchmark test
    
    Don't benchmark so many sizes during the race builder's benchmark run.
    
    This package doesn't even use goroutines.
    
    Cuts off 10 seconds.
    
    Updates #17104
    
    Change-Id: Ibb2c7272c18b9014a775949c656a5b930f197cd4
    Reviewed-on: https://go-review.googlesource.com/29158
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit f09d0458d32a965602a346843354f7778b12a375
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Sep 14 17:48:33 2016 +0000

    regexp: don't run slow benchmarks on race builders
    
    Shave 6.5 minutes off the *-race build time.
    
    The *-race builders run:
    
        go test -short -race -run=^$ -benchtime=.1s -cpu=4 $PKG
    
    ... for each package with benchmarks.
    
    The point isn't to measure the speed of the packages, but rather to
    see if there are any races. (which is why a benchtime of 0.1 seconds
    is used)
    
    But running in race mode makes things slower and our benchmarks aren't
    all very fast to begin with.
    
    The regexp benchmarks in race were taking over 6.5 minutes. With this
    CL, it's now 8 seconds.
    
    Updates #17104
    
    Change-Id: I054528d09b1568d37aac9f9b515d6ed90a5cf5b0
    Reviewed-on: https://go-review.googlesource.com/29156
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 167e381f405d36f71ef152e45bb845b866592c80
Author: Keith Randall <khr@golang.org>
Date:   Wed Sep 14 10:01:05 2016 -0700

    cmd/compile: make ssa compilation unconditional
    
    Rip out the code that allows SSA to be used conditionally.
    
    No longer exists:
     ssa=0 flag
     GOSSAHASH
     GOSSAPKG
     SSATEST
    
    GOSSAFUNC now only controls the printing of the IR/html.
    
    Still need to rip out all of the old backend.  It should no longer be
    callable after this CL.
    
    Update #16357
    
    Change-Id: Ib30cc18fba6ca52232c41689ba610b0a94aa74f5
    Reviewed-on: https://go-review.googlesource.com/29155
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit eed061f89cad583c3dfa6b4e13c9a79f897920bf
Author: David Chase <drchase@google.com>
Date:   Tue Sep 13 16:51:42 2016 -0400

    cmd/compile: enable SSA for PowerPC 64 Big-endian
    
    It passed tests once, if anything's wrong, better to fail
    sooner than later.
    
    Change-Id: Ibb1c5db3f4c5535a4ff4681fd157db77082c5041
    Reviewed-on: https://go-review.googlesource.com/28982
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3ead49989ed037bda6009b96b0008ed83fb7d184
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Sep 14 16:34:27 2016 +0000

    cmd/dist: skip compiling 100 packages without benchmarks in race mode
    
    The go_test_bench:* tests run:
    
        go test -short -race -run=^$ -benchtime=.1s -cpu=4 $PKG
    
    ... on each discovered package with any tests. (The same set used for
    the "go_test:*" tests)
    
    That set was 168 packages:
    
    $ go tool dist test -list | grep go_test: | wc -l
    168
    
    But only 76 of those have a "func Benchmark", and running each
    "go_test_bench:" test and compiling it in race mode, just to do
    nothing took 1-2 seconds each.
    
    So stop doing that and filter out the useless packages earlier. Now:
    
    $ go tool dist test -list -race | grep go_test_bench:  | wc -l
    76
    
    Should save 90-180 seconds. (or maybe 45 seconds for trybots, since
    they're sharded)
    
    Updates #17104
    
    Change-Id: I08ccb072a0dc0454ea425540ee8e74b59f83b773
    Reviewed-on: https://go-review.googlesource.com/29153
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 059ada596ca5d510d1e1755b3b6dafa036195fb0
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Sep 12 11:36:02 2016 -0700

    cmd/dist: skip broken cgo race tests on darwin
    
    CL 26668 exposed #17065.
    Skip the cgo race tests on darwin for now.
    
    Updates #17065
    
    Change-Id: I0ad0ce2ff1af6d515b8ce6184ddeabc49806950f
    Reviewed-on: https://go-review.googlesource.com/29077
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2e675142dd269348da992c1862a28e56e0a87eb6
Author: Jan Mercl <0xjnml@gmail.com>
Date:   Wed Sep 14 13:17:37 2016 +0200

    test/float_lit2: fix expressions in comment
    
    The change corrects the values of the largest float32 value (f1) and the
    value of the halfway point between f1 and the next, overflow value (f2).
    
    Fixes #17012
    
    Change-Id: Idaf9997b69d61fafbffdb980d751c9857732e14d
    Reviewed-on: https://go-review.googlesource.com/29171
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 7f583a4d721c94967fe3ce098b3eff902cba043b
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 13 19:19:36 2016 -0400

    cmd/dist: re-enable internal PIE test
    
    For #17068
    
    Change-Id: I4e3ab166f08100292b779b651a9acfbfb44a55cd
    Reviewed-on: https://go-review.googlesource.com/29119
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5940a007c14af11fe35f48d8f7daa3cd9036aaa3
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 13 08:24:07 2016 -0400

    cmd/link: R_ADDR dynamic relocs for internal PIE
    
    This gets -buildmode=pie -ldflags=-linkmode=internal working on
    Ubuntu 16.04.
    
    Fixes #17068
    
    Change-Id: Ice5036199005fb528cc58279a7f057170dc6b73d
    Reviewed-on: https://go-review.googlesource.com/29118
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6fd8c006adf792e523232a026823a5444893f28f
Author: David Stainton <dstainton415@gmail.com>
Date:   Fri Aug 12 22:15:21 2016 +0000

    syscall: add bounds checking and error returns to ParseNetlinkMessage
    
    Fixes #16681
    
    Change-Id: I6ff7ec81fe48ab06be3aae5b7ff92e9dc70960c3
    Reviewed-on: https://go-review.googlesource.com/26990
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>

commit 33e63ebc20e38d20077c1f184f05a4a0656e189a
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Sep 11 05:06:29 2016 -0700

    os: add more examples
    
    Updates #16360.
    
    Adds examples for:
    + Chmod
    + Chtimes
    + FileMode
    
    Change-Id: I1b61ee0392fa3774593a7f36aaf0fa1e484c778b
    Reviewed-on: https://go-review.googlesource.com/28963
    Run-TryBot: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit a562351e512682046623ecbd106f4973f3525be9
Author: Aaron Jacobs <jacobsa@google.com>
Date:   Wed Sep 14 12:57:15 2016 +1000

    net/http: clarify Request.ContentLength behavior on the client.
    
    While you could argue the previous wording technically said that -1 is
    an acceptable way to indicate "unknown" on the client, it could be read
    as ambiguous. Now it's clear that both 0 and -1 mean unknown.
    
    Change-Id: I3bc5a3fd5afd1999e487296ec121eb548415e6b0
    Reviewed-on: https://go-review.googlesource.com/29130
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6488201b9b980277b41de540a88f4289aee64e1c
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 13 19:04:25 2016 -0400

    cmd/internal/obj: regenerate stringer values
    
    Created by running 'go generate'.
    
    That made debugging fun today.
    
    Change-Id: I9ffe00877851f2b198275220ad6058b9005daa72
    Reviewed-on: https://go-review.googlesource.com/29117
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 567aefd99ddc66d596fffd442b6c014d83ac5eb9
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 6 07:46:59 2016 -0400

    cmd/link: address comments from CL 28540
    
    Change-Id: I11899096c71ee0e24e902c87914601fcd7ffd7a9
    Reviewed-on: https://go-review.googlesource.com/28967
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 429eb3c6960a0b919a150aaa570e6a3f6f8758e9
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Sep 13 15:33:55 2016 -0700

    cmd/compile: remove two unnecessary Pkg fields
    
    Exported is no longer used since removing the text-format exporter,
    and Safe is only used within importfile so it can be made into a local
    variable.
    
    Change-Id: I92986f704d7952759c79d9243620a22c24602333
    Reviewed-on: https://go-review.googlesource.com/29115
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2b5c18c99e1be7c779706e23f99717a84d7d882b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Sep 13 14:05:14 2016 -0700

    cmd/compile/internal/gc: eliminate bstdout
    
    Just use Ctxt.Bso instead.
    
    Change-Id: I68f1639f0b4c238ae5499ef49e78a5d734417979
    Reviewed-on: https://go-review.googlesource.com/29114
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ae4aac00bba5d1d616408a1c07bd4ef5691e3a00
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Tue Aug 2 14:41:53 2016 +0900

    encoding/asn1: reduce allocations in Marshal
    
    Current code uses trees of bytes.Buffer as data representation.
    Each bytes.Buffer takes 4k bytes at least, so it's waste of memory.
    The change introduces trees of lazy-encoder as
    alternative one which reduce allocations.
    
    name       old time/op    new time/op    delta
    Marshal-4    64.7µs ± 2%    42.0µs ± 1%  -35.07%   (p=0.000 n=9+10)
    
    name       old alloc/op   new alloc/op   delta
    Marshal-4    35.1kB ± 0%     7.6kB ± 0%  -78.27%  (p=0.000 n=10+10)
    
    name       old allocs/op  new allocs/op  delta
    Marshal-4       503 ± 0%       293 ± 0%  -41.75%  (p=0.000 n=10+10)
    
    Change-Id: I32b96c20b8df00414b282d69743d71a598a11336
    Reviewed-on: https://go-review.googlesource.com/27030
    Reviewed-by: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ee3f3a60070ee9edeb3f10fa2e4b90404068cb3a
Author: Adam Langley <agl@golang.org>
Date:   Sun Sep 11 17:14:51 2016 -0700

    crypto/rsa: ensure that generating toy RSA keys doesn't loop.
    
    If there are too few primes of the given length then it can be
    impossible to generate an RSA key with n distinct primes.
    
    This change approximates the expected number of candidate primes and
    causes key generation to return an error if it's unlikely to succeed.
    
    Fixes #16596.
    
    Change-Id: I53b60d0cb90e2d0e6f0662befa64d13f24af51a7
    Reviewed-on: https://go-review.googlesource.com/28969
    Reviewed-by: Minux Ma <minux@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7e2b5a102e1c7fcc314b5e58151043530ea1ffe9
Author: Michael Munday <munday@ca.ibm.com>
Date:   Tue Sep 13 15:57:52 2016 -0400

    test: re-enable phi optimization test
    
    CL 28978 (6ec993a) accidentally disabled the test (it would only
    run if amd64 AND s390x, whereas it should be amd64 OR s390x).
    
    Change-Id: I23c1ad71724ff55f5808d5896b19b62c8ec5af76
    Reviewed-on: https://go-review.googlesource.com/28981
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6ec993adc3373d31392b301ebe0c376b02d68051
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Sep 12 14:50:10 2016 -0400

    cmd/compile: add SSA backend for s390x and enable by default
    
    The new SSA backend modifies the ABI slightly: R0 is now a usable
    general purpose register.
    
    Fixes #16677.
    
    Change-Id: I367435ce921e0c7e79e021c80cf8ef5d1d1466cf
    Reviewed-on: https://go-review.googlesource.com/28978
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit b7e53038b8abb4d82cf25cb844395af602150a29
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Sep 11 02:00:38 2016 +0000

    net/http: make Transport support international domain names
    
    This CL makes code like this work:
    
         res, err := http.Get("https://фу.бар/баз")
    
    So far, IDNA support is limited to the http1 and http2 Transports.
    The http package is currently responsible for converting domain names
    into Punycode before calling the net layer. The http package also has
    to Punycode-ify the hostname for the Host & :authority headers for
    HTTP/1 and HTTP/2, respectively.
    
    No automatic translation from Punycode back to Unicode is performed,
    per Go's historical behavior. Docs are updated where relevant.  No
    changes needed to the Server package. Things are already in ASCII
    at that point.
    
    No changes to the net package, at least yet.
    
    Updates x/net/http2 to git rev 57c7820 for https://golang.org/cl/29071
    
    Updates #13835
    
    Change-Id: I1e9a74c60d00a197ea951a9505da5c3c3187099b
    Reviewed-on: https://go-review.googlesource.com/29072
    Reviewed-by: Chris Broadfoot <cbro@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 802cb5927f1e163749331c9f6cfb414cb0c753b9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 13 18:51:16 2016 +0000

    net/http: update bundled x/net/http2
    
    Updates x/net/http2 (and x/net/lex/httplex) to git rev 749a502 for:
    
       http2: don't sniff first Request.Body byte in Transport until we have a conn
       https://golang.org/cl/29074
       Fixes #17071
    
       http2: add Transport support for unicode domain names
       https://golang.org/cl/29071
       Updates #13835
    
       http2: don't send bogus :path pseudo headers if Request.URL.Opaque is set
       https://golang.org/cl/27632
         +
       http2: fix bug where '*' as a valid :path value in Transport
       https://golang.org/cl/29070
       Updates #16847
    
       http2: fix all vet warnings
       https://golang.org/cl/28344
       Updates #16228
       Updates #11041
    
    Also uses the new -underscore flag to x/tools/cmd/bundle from
    https://golang.org/cl/29086
    
    Change-Id: Ica0f6bf6e33266237e37527a166a783d78c059c4
    Reviewed-on: https://go-review.googlesource.com/29110
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 9980b70cb460f27907a003674ab1b9bea24a847c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 19 11:47:53 2016 -0700

    runtime: limit the number of map overflow buckets
    
    Consider repeatedly adding many items to a map
    and then deleting them all, as in #16070. The map
    itself doesn't need to grow above the high water
    mark of number of items. However, due to random
    collisions, the map can accumulate overflow
    buckets.
    
    Prior to this CL, those overflow buckets were
    never removed, which led to a slow memory leak.
    
    The problem with removing overflow buckets is
    iterators. The obvious approach is to repack
    keys and values and eliminate unused overflow
    buckets. However, keys, values, and overflow
    buckets cannot be manipulated without disrupting
    iterators.
    
    This CL takes a different approach, which is to
    reuse the existing map growth mechanism,
    which is well established, well tested, and
    safe in the presence of iterators.
    When a map has accumulated enough overflow buckets
    we trigger map growth, but grow into a map of the
    same size as before. The old overflow buckets will
    be left behind for garbage collection.
    
    For the code in #16070, instead of climbing
    (very slowly) forever, memory usage now cycles
    between 264mb and 483mb every 15 minutes or so.
    
    To avoid increasing the size of maps,
    the overflow bucket counter is only 16 bits.
    For large maps, the counter is incremented
    stochastically.
    
    Fixes #16070
    
    Change-Id: If551d77613ec6836907efca58bda3deee304297e
    Reviewed-on: https://go-review.googlesource.com/25049
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0cd3ecb016e0c3f0656877a20ca37eabe4fd0f8f
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Sep 12 17:30:35 2016 -0700

    cmd/compile: reduce allocs some more
    
    Also: update fmt_test.go.
    
    Together with the previous commits, we are now at or below c85b77c
    levels in terms of allocation for the benchmark described in #16897
    (old = c85b77c, new = this commit):
    
    name       old time/op     new time/op     delta
    Template       297ms ± 5%      284ms ± 3%  -4.53%  (p=0.000 n=27+29)
    Unicode        159ms ± 5%      151ms ± 5%  -4.91%  (p=0.000 n=28+30)
    GoTypes        985ms ± 5%      935ms ± 2%  -5.13%  (p=0.000 n=28+29)
    
    name       old alloc/op    new alloc/op    delta
    Template      46.8MB ± 0%     45.7MB ± 0%  -2.37%  (p=0.000 n=30+30)
    Unicode       37.8MB ± 0%     37.9MB ± 0%  +0.29%  (p=0.000 n=29+30)
    GoTypes        143MB ± 0%      138MB ± 0%  -3.64%  (p=0.000 n=29+30)
    
    name       old allocs/op   new allocs/op   delta
    Template        444k ± 0%       440k ± 0%  -0.94%  (p=0.000 n=30+30)
    Unicode         369k ± 0%       369k ± 0%  +0.19%  (p=0.000 n=29+30)
    GoTypes        1.35M ± 0%      1.34M ± 0%  -1.24%  (p=0.000 n=30+30)
    
    For #16897.
    
    Change-Id: Iedbeb408e2f1e68dd4a3201bf8813c8066ebf7ed
    Reviewed-on: https://go-review.googlesource.com/29089
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit b6946fb120ed0c176162e4f632fb8cd062144af3
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Wed Sep 7 14:42:43 2016 -0500

    cmd/asm: ppc64le support for ISEL for use by SSA
    
    This adds the support for the ppc64le isel instruction so
    it can be used by SSA.
    
    Fixed #16771
    
    Change-Id: Ia2517f0834ff5e7ad927e218b84493e0106ab4a7
    Reviewed-on: https://go-review.googlesource.com/28611
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 07b8011393dc3d3a78b3cd0857a31da339985994
Author: Paul Borman <borman@google.com>
Date:   Tue Jul 12 08:54:09 2016 -0700

    text/template: improve lexer performance in finding left delimiters.
    
    The existing implementation calls l.next for each run up to the next
    instance of the left delimiter ({{).  For ascii text, this is multiple
    function calls per byte.  Change to use strings.Index to find the left
    delimiter.  The performace improvement ranges from 1:1 (no text outside
    of {{}}'s) to multiple times faster (9:1 was seen on 8K of text with no
    {{ }}'s).
    
    Change-Id: I2f82bea63b78b6714f09a725f7b2bbb00a3448a3
    Reviewed-on: https://go-review.googlesource.com/24863
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Rob Pike <r@golang.org>

commit 8f9671d11a219d8fc9a6176ddf9939e743982ffc
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Sep 13 13:29:13 2016 +1200

    cmd/link: fix -buildmode=pie / -linkshared combination
    
    main.main and main.init were not being marked as reachable.
    
    Fixes #17076
    
    Change-Id: Ib3e29bd35ba6252962e6ba89173ca321ed6849b9
    Reviewed-on: https://go-review.googlesource.com/28996
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 38d35e714a55f2e4bb67caadac7e61f8c1967d88
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Sep 12 15:24:11 2016 -0400

    cmd/compile, runtime/internal/atomic: intrinsify And8, Or8 on ARM64
    
    Also add assembly implementation, in case intrinsics is disabled.
    
    Change-Id: Iff0a8a8ce326651bd29f6c403f5ec08dd3629993
    Reviewed-on: https://go-review.googlesource.com/28979
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 09686a58734382ace059f1dbd882dadbb39b2268
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Sep 12 17:08:21 2016 -0700

    cmd/compile: remove another bytes.Buffer use in fmt.go
    
    Missed in prior commit.
    
    Change-Id: Ib3a41fb4e4d41feeb28c316fe70a329c73e72379
    Reviewed-on: https://go-review.googlesource.com/29088
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 37d452c3e9c1fe354375ad41ae0b952b563dfbe4
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Sep 12 13:44:43 2016 -0700

    cmd/compile: reduce allocs to c85b77c (pre-fmt.go change) levels
    
    Linker and reflect info generation (reflect.go) relies on formatting
    of types (tconv). The fmt.Format based approach introduces extra
    allocations, which matter in those cases. Resurrected sconv and tconv
    code from commit c85b77c (fmt.go only); and adjusted it slightly.
    The formatter-based approach is still used throughout the rest of the
    compiler, but reflect.go now uses the tconv method that simply returns
    the desired string.
    
    (The timing data below may not be accurate; I've included it only for
    comparison with the numbers in issue #16897).
    
    name       old time/op     new time/op     delta
    Template       297ms ± 2%      288ms ± 3%  -3.12%        (p=0.000 n=27+29)
    Unicode        155ms ± 5%      150ms ± 5%  -3.26%        (p=0.000 n=30+30)
    GoTypes        1.00s ± 3%      0.95s ± 3%  -4.51%        (p=0.000 n=28+29)
    
    name       old alloc/op    new alloc/op    delta
    Template      46.8MB ± 0%     46.5MB ± 0%  -0.65%        (p=0.000 n=28+30)
    Unicode       37.9MB ± 0%     37.8MB ± 0%  -0.24%        (p=0.000 n=29+30)
    GoTypes        144MB ± 0%      143MB ± 0%  -0.68%        (p=0.000 n=30+30)
    
    name       old allocs/op   new allocs/op   delta
    Template        469k ± 0%       446k ± 0%  -5.01%        (p=0.000 n=29+30)
    Unicode         375k ± 0%       369k ± 0%  -1.62%        (p=0.000 n=30+28)
    GoTypes        1.47M ± 0%      1.37M ± 0%  -6.29%        (p=0.000 n=30+30)
    
    The code for sconv/tconv in fmt.go now closely match the code from c85b77c
    again; except that the functions are now methods. Removing the use of
    the bytes.Buffer in tconv and special-caseing interface{} has helped a
    small amount as well:
    
    name       old time/op     new time/op     delta
    Template       299ms ± 3%      288ms ± 3%  -3.83%        (p=0.000 n=29+29)
    Unicode        156ms ± 5%      150ms ± 5%  -3.56%        (p=0.000 n=30+30)
    GoTypes        960ms ± 2%      954ms ± 3%  -0.58%        (p=0.037 n=26+29)
    
    name       old alloc/op    new alloc/op    delta
    Template      46.6MB ± 0%     46.5MB ± 0%  -0.22%        (p=0.000 n=30+30)
    Unicode       37.8MB ± 0%     37.8MB ± 0%    ~           (p=0.075 n=30+30)
    GoTypes        143MB ± 0%      143MB ± 0%  -0.31%        (p=0.000 n=30+30)
    
    name       old allocs/op   new allocs/op   delta
    Template        447k ± 0%       446k ± 0%  -0.28%        (p=0.000 n=30+30)
    Unicode         369k ± 0%       369k ± 0%  -0.03%        (p=0.032 n=30+28)
    GoTypes        1.38M ± 0%      1.37M ± 0%  -0.35%        (p=0.000 n=29+30)
    
    Comparison between c85b77c and now (see issue #16897):
    
    name       old time/op     new time/op     delta
    Template       307ms ± 4%      288ms ± 3%  -6.24%  (p=0.000 n=29+29)
    Unicode        164ms ± 4%      150ms ± 5%  -8.20%  (p=0.000 n=30+30)
    GoTypes        1.01s ± 3%      0.95s ± 3%  -5.72%  (p=0.000 n=30+29)
    
    name       old alloc/op    new alloc/op    delta
    Template      46.8MB ± 0%     46.5MB ± 0%  -0.66%  (p=0.000 n=29+30)
    Unicode       37.8MB ± 0%     37.8MB ± 0%  -0.13%  (p=0.000 n=30+30)
    GoTypes        143MB ± 0%      143MB ± 0%  -0.11%  (p=0.000 n=30+30)
    
    name       old allocs/op   new allocs/op   delta
    Template        444k ± 0%       446k ± 0%  +0.48%  (p=0.000 n=30+30)
    Unicode         369k ± 0%       369k ± 0%  +0.09%  (p=0.000 n=30+28)
    GoTypes        1.35M ± 0%      1.37M ± 0%  +1.47%  (p=0.000 n=30+30)
    
    There's still a small increase (< 1.5%) for GoTypes but pending a complete
    rewrite of fmt.go, this seems ok again.
    
    Fixes #16897.
    
    Change-Id: I7e0e56cd1b9f981252eded917f5752259d402354
    Reviewed-on: https://go-review.googlesource.com/29087
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c345a3913f54ab88720654b3dc9b2c34779fca0c
Author: Keith Randall <khr@golang.org>
Date:   Fri Sep 9 13:11:07 2016 -0700

    cmd/compile: get rid of BlockCall
    
    No need for it, we can treat calls as (mostly) normal values
    that take a memory and return a memory.
    
    Lowers the number of basic blocks needed to represent a function.
    "go test -c net/http" uses 27% fewer basic blocks.
    Probably doesn't affect generated code much, but should help
    various passes whose running time and/or space depends on
    the number of basic blocks.
    
    Fixes #15631
    
    Change-Id: I0bf21e123f835e2cfa382753955a4f8bce03dfa6
    Reviewed-on: https://go-review.googlesource.com/28950
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit d00a3cead8423c8af6c5781aa2a3efe0a9a442ae
Author: Keith Randall <khr@golang.org>
Date:   Mon Sep 12 15:19:36 2016 -0700

    runtime: make gdb test resilient to line numbering
    
    Don't break on line number, instead break on the actual call.
    This makes the test more robust to line numbering changes in the backend.
    
    A CL (28950) changed the generated code line numbering slightly.  A MOVW
    $0, R0 instruction at the start of the function changed to line
    10 (because several constant zero instructions got CSEd, and one gets
    picked arbitrarily).  That's too fragile for a test.
    
    Change-Id: I5d6a8ef0603de7d727585004142780a527e70496
    Reviewed-on: https://go-review.googlesource.com/29085
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6ca7c2055bd114c08426d3dbdee444b280b569b6
Author: Keith Randall <khr@golang.org>
Date:   Mon Sep 12 13:47:55 2016 -0700

    cmd/compile: fix tuple-generating flag ops as clobbering flags
    
    If an op generates a tuple, and part of that tuple is of flags type,
    then treat the op as clobbering flags.
    
    Normally this doesn't matter because we do:
    
    v1 = ADDS        <int32, flags>
    v2 = Select0 v1  <int32>
    v3 = Select1 v1  <flags>
    
    And v3 will do the right clobbering of flags.  But in the rare
    cases where we issue a tuple-with-flag op and the flag portion
    is dead, then we never issue a Select1.  But v1 still clobbers flags,
    so we need to respect that.
    
    Fixes builder failure in CL 28950.
    
    Change-Id: I589089fd81aaeaaa9750bb8d85e7b10199aaa002
    Reviewed-on: https://go-review.googlesource.com/29083
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit e42ae65a85079a9f39d0fb4837a78172ad898d84
Author: Quentin Smith <quentin@golang.org>
Date:   Wed Sep 7 18:07:45 2016 -0400

    time: improve Truncate and Round documentation
    
    Truncate and Round operate on absolute time, which means that
    Truncate(Hour) may return a time with non-zero Minute(). Document that
    more clearly, and remove the misleading example which suggests it is
    safe.
    
    Updates #16647
    
    Change-Id: I930584ca030dd12849195d45e49ed2fb74e0c9ac
    Reviewed-on: https://go-review.googlesource.com/28730
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1ee544641450236e8c78d8d408e6cb8ab69cee60
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Sep 12 13:39:54 2016 -0700

    cmd/compile: remove incannedimport
    
    This used to be used to give special semantics to the builtin
    definitions of package runtime and unsafe, but none of those are
    relevant anymore:
    
    - The builtin runtime and unsafe packages do not risk triggering false
      import cycles since they no longer contain `import "runtime"`.
    
    - bimport.go never creates ODCLTYPE, so no need to special case them.
    
    - "incannedimport != 0" is only true when "importpkg != nil" anyway,
      so "incannedimport == 0 && importpkg == nil" is equivalent to just
      "importpkg == nil".
    
    Change-Id: I076f15dd705d4962e7a4c33972e304ef67e7effb
    Reviewed-on: https://go-review.googlesource.com/29084
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4c83d2914467e670d680b967ec689f8434136188
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 12 15:10:04 2016 -0400

    cmd/dist: disable test of internal PIE linking
    
    Updates #17068
    
    Change-Id: I61b75ec07ca8705a678677d262e11b16848cddf3
    Reviewed-on: https://go-review.googlesource.com/29079
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 6758eedf898c48d6ca4abd42f44622abf7c005c2
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Sep 12 13:27:36 2016 -0700

    cmd/compile: remove Pointer from builtin/unsafe.go
    
    We already explicitly construct the "unsafe.Pointer" type in typeinit
    because we need it for Types[TUNSAFEPTR]. No point in also having it
    in builtin/unsafe.go if it just means (*importer).importtype needs to
    fix it.
    
    Change-Id: Ife8a5a73cbbe2bfcabe8b25ee4f7e0f5fd0570b4
    Reviewed-on: https://go-review.googlesource.com/29082
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b11c79fd07c80e6902fa26045ac566ddc2f1250d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Sep 12 11:43:55 2016 -0700

    cmd/compile: deduplicate importtype and (*importer).importtype
    
    Change-Id: I7bfb0e5e71fc26448b0d5d3801cd6e50c8b48f5d
    Reviewed-on: https://go-review.googlesource.com/29078
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 36b32911bdfa3c5323f9afa63047844cb5b0d0be
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Sep 9 22:24:44 2016 -0700

    cmd/compile: update fmt.go internal documentation
    
    No code changes.
    
    Change-Id: I7a22b3fbd6d727b276c7559f064cb0fdf385c02b
    Reviewed-on: https://go-review.googlesource.com/28955
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 6537e18f02448bba92d5ea9c2f224b8c2c7ef888
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Sep 9 21:08:46 2016 -0700

    cmd/compile: rewrite %1v and %2v formats to %S and %L (short and long)
    
    - also consistently use %v instead of %s when we have a (gc) Formatter
    - rewrite done automatically using Formats test in -u (update) mode
    - manual update of format strings that were not single string constants
    - updated fmt.go, fmt_test.go accordingly
    - fmt_test: permit "%T" always
    
    Change-Id: I8f0704286aba5704600ad0c4a4484005b79b905d
    Reviewed-on: https://go-review.googlesource.com/28954
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit af8ca3387a62f83f9ee740d62c0007273e5fe1af
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Sep 9 19:54:09 2016 -0700

    cmd/compile: improved format string handling, faster operation
    
    - only accept a-z, A-Z as format verbs
    - blacklist vendored math package (no need to include it)
    
    Change-Id: Ica0fcbfe712369f79dd1d3472dfd4759b8bc3752
    Reviewed-on: https://go-review.googlesource.com/28953
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8458a387e3a0aa29449767f633514747a1ee7e72
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Sep 8 21:39:33 2016 -0700

    cmd/compile: make fmt_test work on entire compiler
    
    - process all directories recursively
    
    Change-Id: I27a737013d17fd3c2cc8ae9de4722dcbe989e6e5
    Reviewed-on: https://go-review.googlesource.com/28789
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8ff4260777aabe4ec7a92cba8c7dcce24f7fbf2b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Aug 30 09:12:22 2016 -0400

    cmd/compile: intrinsify Ctz, Bswap on ARM
    
    Atomic ops on ARM are implemented with kernel calls, so they are
    not intrinsified.
    
    Change-Id: I0e7cc2e5526ae1a3d24b4b89be1bd13db071f8ef
    Reviewed-on: https://go-review.googlesource.com/28977
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit cfea26026bc49be1710ed742465514e84bd31ab5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 9 05:26:20 2016 +0000

    doc: document minimum OS X version as 10.8
    
    The download page says "OS X 10.8 or later", but other pages said 10.7.
    Say 10.8 everywhere.
    
    Turns out Go doesn't even compile on OS X 10.7 (details in bug) and we
    only run builders for OS X 10.8+, which is likely why 10.7
    regressed. Until recently we only had OS X 10.10 builders, even.
    
    We could run 10.7 builders, but there's basically no reason to do so,
    especially with 10.12 coming out imminently.
    
    Fixes #16625
    
    Change-Id: Ida6e20fb6c54aea0a3757235b708ac1c053b8c04
    Reviewed-on: https://go-review.googlesource.com/28870
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit e4691d92dac9c46ea9ae380d5110dbceff45fad3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Sep 8 23:58:17 2016 +0000

    net/http: skip test needing good DNS in short mode, except on builders
    
    Fixes #16732
    
    Change-Id: If0a7f9425cf75b9e31b3091c43cb23d6e039f568
    Reviewed-on: https://go-review.googlesource.com/28782
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit d185cc3b643abbd88efcc1d9b92c87422a25d955
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 12 13:27:31 2016 -0400

    cmd/link: disable internal PIE for now
    
    There's more work to do.
    
    Updates #17068
    
    Change-Id: I4e16c0e8e9ac739e1fe266224c3769f6c5b2e070
    Reviewed-on: https://go-review.googlesource.com/29076
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f1515a01fd5d77b964194d3830d36ae006823ea3
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Sep 12 13:33:00 2016 -0400

    runtime, math/big: allow R0 on s390x to contain values other than 0
    
    The new SSA backend for s390x can use R0 as a general purpose register.
    This change modifies assembly code to either avoid using R0 entirely
    or explicitly set R0 to 0.
    
    R0 can still be safely used as 0 in address calculations.
    
    Change-Id: I3efa723e9ef322a91a408bd8c31768d7858526c8
    Reviewed-on: https://go-review.googlesource.com/28976
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 43bdfa9337c136f4e19122914c082f34045d9509
Author: Michael Munday <munday@ca.ibm.com>
Date:   Mon Sep 12 12:13:34 2016 -0400

    cmd/asm, cmd/internal/obj/s390x: add new s390x instructions for SSA
    
    This commit adds the following instructions to support the new SSA
    backend for s390x:
    
    32-bit operations:
    ADDW
    SUBW
    NEGW
    FNEGS
    
    Conditional moves:
    MOVDEQ
    MOVDGE
    MOVDGT
    MOVDLE
    MOVDLT
    MOVDNE
    
    Unordered branches (for floating point comparisons):
    BLEU
    BLTU
    
    Modulo operations:
    MODW
    MODWU
    MODD
    MODDU
    
    The modulo operations might be removed in a future commit because
    I'd like to change DIV to produce a tuple once the old backend is
    removed.
    
    This commit also removes uses of REGZERO from the assembler. They
    aren't necessary and R0 will be used as a GPR by SSA.
    
    Change-Id: I05756c1cbb74bf4a35fc492f8f0cd34b50763dc9
    Reviewed-on: https://go-review.googlesource.com/29075
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit dfc56a4cd313c9c5de37f4fadb14912286edc42f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu May 12 17:22:47 2016 -0700

    cmd/compile: statically initialize some interface values
    
    When possible, emit static data rather than
    init functions for interface values.
    
    This:
    
    * cuts 32k off cmd/go
    * removes several error values from runtime init
    * cuts the size of the image/color/palette compiled package from 103k to 34k
    * reduces the time to build the package in #15520 from 8s to 1.5s
    
    Fixes #6289
    Fixes #15528
    
    Change-Id: I317112da17aadb180c958ea328ab380f83e640b4
    Reviewed-on: https://go-review.googlesource.com/26668
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit b8eb5b53eadd10ed8c84b94a46301a3fc3715282
Author: David du Colombier <0intro@gmail.com>
Date:   Sun Sep 11 23:29:25 2016 +0200

    net: make lookupPort case-insensitive on Plan 9
    
    The CL 28951 added TestLookupPort_Minimal, which was failing
    on Plan 9, because lookupPort was not case-insensitive.
    
    Change-Id: Ic80dd29dad4ffd1c84c2590e3d5d0e588ab2e6c2
    Reviewed-on: https://go-review.googlesource.com/29051
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: David du Colombier <0intro@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 62ba15a492a5a26fce70aab5f44cac4a841b956e
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 11 08:29:04 2016 -0700

    cmd/compile: add more non-returning runtime calls
    
    This list now matches the one in popt.go.
    
    Change-Id: Ib24de531cc35252f0ef276e5c6d247654b021533
    Reviewed-on: https://go-review.googlesource.com/28965
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 8086e7c6ab85646cd53d5cb6d6183750a76e6214
Author: Rob Pike <r@golang.org>
Date:   Mon Sep 12 13:17:02 2016 +1000

    testing: improve the documentation for the -run flag
    
    It's not intuitive, especially in the presence of subtests, so improve the
    explanation and extend and explain the examples.
    
    Change-Id: I6c4d3f8944b60b12311d0c0f0a8e952e7c35a9ed
    Reviewed-on: https://go-review.googlesource.com/28995
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 9e876861017991fe1478421b85a83964ea7abc6d
Author: Dave Day <djd@golang.org>
Date:   Fri Sep 9 17:59:43 2016 +1000

    net/url: modernise parse and unit tests
    
    Remove the naked returns and goto statements from parse.
    
    Make tests more consistent in the got/want ordering, and clean up some
    unnecessary helper functions.
    
    Change-Id: Iaa244cb8c00dd6b42836d95448bf02caa72bfabd
    Reviewed-on: https://go-review.googlesource.com/28890
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 4ba2a4913c4e29754ade9d7329ff324a8f5de59a
Author: Michal Bohuslávek <mbohuslavek@gmail.com>
Date:   Tue Sep 6 10:49:26 2016 +0100

    crypto/rsa: remove unused variable y
    
    Change-Id: I70beb844cd6928dbfbfd8de365e0cb708e54f71e
    Reviewed-on: https://go-review.googlesource.com/28496
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>

commit 5a59b66f23bc2eb11cc8445aea1dcf7a71bf2954
Author: Filippo Valsorda <hi@filippo.io>
Date:   Fri Sep 9 14:07:30 2016 +0100

    crypto/tls: flush the buffer on handshake errors
    
    Since 2a8c81ff handshake messages are not written directly to wire but
    buffered.  If an error happens at the wrong time the alert will be
    written to the buffer but never flushed, causing an EOF on the client
    instead of a more descriptive alert.
    
    Thanks to Brendan McMillion for reporting this.
    
    Fixes #17037
    
    Change-Id: Ie093648aa3f754f4bc61c2e98c79962005dd6aa2
    Reviewed-on: https://go-review.googlesource.com/28818
    Reviewed-by: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2e4dc86bfb19b1eb2a69ac36c87ada22bacc98c9
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 11 14:43:37 2016 -0700

    cmd/compile: add Node.IsMethod helper
    
    Changes generated with eg:
    
    func before(n *gc.Node) bool { return n.Type.Recv() != nil }
    func after(n *gc.Node) bool  { return n.IsMethod() }
    
    func before(n *gc.Node) bool { return n.Type.Recv() == nil }
    func after(n *gc.Node) bool  { return !n.IsMethod() }
    
    Change-Id: I28e544490d17bbdc06ab11ed32464af5802ab206
    Reviewed-on: https://go-review.googlesource.com/28968
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3bf141955be1d1f791f643700fbde60c258546d3
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 6 09:16:48 2016 -0400

    cmd/dist: test PIE internal linking on linux/amd64
    
    Change-Id: I88dd0811db3a9864106def47b89848f5c8de94d4
    Reviewed-on: https://go-review.googlesource.com/28545
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 675ba53c7671d5506887eec2a65fabb4cbda0d59
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 6 09:14:26 2016 -0400

    cmd/go: internal PIE does not need runtime/cgo
    
    Part of adding PIE internal linking on linux/amd64.
    
    Change-Id: I57f0596cb254cbe6569e4d4e39fe4f48437733f2
    Reviewed-on: https://go-review.googlesource.com/28544
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 1a42d8fbd6fdce1ef9122c2c4c60833eee9cefa0
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 6 08:08:47 2016 -0400

    cmd/link: allow internal PIE linking
    
    Part of adding PIE internal linking on linux/amd64.
    
    Change-Id: I5ce01d1974e5d4b1a8cbcc8b08157477631d8d24
    Reviewed-on: https://go-review.googlesource.com/28543
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 04b4dbe1f0ec58efe8a1bf8e05a1042b17176c3b
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 6 08:05:19 2016 -0400

    cmd/link: mark PIE binaries as ET_DYN
    
    Part of adding PIE internal linking on linux/amd64.
    
    Change-Id: I586e7c2afba349281168df5e20d2fdcb697f6e37
    Reviewed-on: https://go-review.googlesource.com/28542
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d9d1399eeac037f4e2057d32831e574c0f1e6fc8
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 6 08:02:30 2016 -0400

    cmd/link: mark rel.ro segment as PT_GNU_RELRO
    
    Details: http://www.airs.com/blog/archives/189
    
    Part of adding PIE internal linking on linux/amd64.
    
    Change-Id: I8843a97f22f6f120346cccd694c7fff32f09f60b
    Reviewed-on: https://go-review.googlesource.com/28541
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 44ee2b00db9ae21c4304dbfbd19b4bc70f9ff4c9
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 6 07:46:59 2016 -0400

    cmd/link: optimize TLS IE to LE in build mode PIE
    
    When cmd/compile generates position-independent code on linux
    (the -shared flag), it refers to runtime.tlsg as a TLS IE variable.
    
    When cmd/link is linking a PIE executable internally, all TLS IE
    relocations are generated by cmd/compile, and the variable they
    refer to, runtime.tlsg, is local to the binary. This means we can
    optimize this particular IE case to LE, and thus implement IE
    support when internally linking.
    
    To do this optimization in the linker, we need to rewrite the
    PC-relative MOVD to a constant load. This may seem like an
    unconscionable act born of enthusiasm, but it turns out this is
    standard operating procedure for linkers. GNU gold does exactly
    the same optimization. I spent some time reading it and documented
    at least one missing feature from this version.
    
    Part of adding PIE internal linking on linux/amd64.
    
    Change-Id: I1eb068d0ec774724944c6b308aa5084582ecde0b
    Reviewed-on: https://go-review.googlesource.com/28540
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1fe4c81282f22b5ac9ba25e7972109255e173b04
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 11 12:16:11 2016 -0700

    cmd/compile: don't crash on complex(0())
    
    Fixes #17038.
    
    Change-Id: Iaf6294361050040830af1d60cd48f263223d9356
    Reviewed-on: https://go-review.googlesource.com/28966
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit aada57f39b60c2aef88dbafc7b406df9c2680f12
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 11 12:34:58 2016 -0700

    misc/cgo/test: add skipped test for issue 17065
    
    Updates #17065
    
    Change-Id: I113caced6de666a9b032ab2684ece79482aa7357
    Reviewed-on: https://go-review.googlesource.com/28964
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 81ee93679dad4138d1c3431aa66237a31a99f1b2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 5 23:49:53 2016 -0400

    cmd/link: generate dynamic relocs for internal PIE
    
    This reuses the machinery built for dynamic loading of shared
    libraries. The significant difference with PIE is we generate
    dynamic relocations for known internal symbols, not just
    dynamic external symbols.
    
    Part of adding PIE internal linking on linux/amd64.
    
    Change-Id: I4afa24070bfb61f94f8d3648f2433d5343bac3fe
    Reviewed-on: https://go-review.googlesource.com/28539
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 276803d6111b46c66956c99d982d70f23820ba5d
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 5 23:29:16 2016 -0400

    cmd/link: introduce a rel.ro segment
    
    When internally linking with using rel.ro sections, this segment covers
    the sections. To do this, move to other read-only sections, SELFROSECT
    and SMACHOPLT, out of the way.
    
    Part of adding PIE internal linking on linux/amd64.
    
    Change-Id: I4fb3d180e92f7e801789ab89864010faf5a2cb6d
    Reviewed-on: https://go-review.googlesource.com/28538
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 13dc4d378bb40261fb2e7f9e1f0eb2f840250040
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Sep 11 01:32:22 2016 +0000

    vendor: add golang.org/x/net/idna to the vendor directory for Punycode
    
    Adds golang.org/x/net/idna to the Go repo from the
    golang.org/x/net repo's git rev 7db922ba (Dec 2012).
    
    Punycode is needed for http.Get("привет.рф") etc., which will
    come in separate commits.
    
    Updates #13835
    
    Change-Id: I313ed82d292737579a3ec5dcf8a9e766f2f75138
    Reviewed-on: https://go-review.googlesource.com/28961
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 74190735be5e722a0a977d056204307c2468cf21
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 9 22:51:11 2016 +0000

    net: make LookupPort and lookupProtocol work on nacl
    
    Also, flesh out the baked-in /etc/services table for LookupPort a bit.
    
    This services map moves from a unix-specific file to a portable file
    where nacl can use it.
    
    Also, remove the duplicated entries in the protocol map in different
    cases, and just canonicalize the input before looking in the map. Now
    it handles any case, including MiXeD cAse.
    
    In the process, add a test that service names for LookupPort are case
    insensitive. They were on Windows, but not cgo. Now there's a test and
    they're case insensitive in all 3+ paths. Maybe it breaks plan9. We'll
    see.
    
    Fixes #17045
    
    Change-Id: Idce7d68703f371727c7505cda03a32bd842298cd
    Reviewed-on: https://go-review.googlesource.com/28951
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit f7fce1e2088ed888c5ced3f2649af84bc0a672b9
Author: Shenghou Ma <minux@golang.org>
Date:   Mon Aug 22 17:20:57 2016 -0400

    mime/quotedprintable: accept trailing soft line-break at the end of message
    
    Fixes #15486.
    
    Change-Id: Id879dc9acef9232003df9a0f6f54312191374a60
    Reviewed-on: https://go-review.googlesource.com/27530
    Run-TryBot: Minux Ma <minux@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fca3dd3718080563f4bc6c4c8b6fbe681a1602fa
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Sat Sep 10 14:04:46 2016 +1000

    syscall: avoid convT2I allocs for ERROR_IO_PENDING instead of WSAEINPROGRESS
    
    CL 28484 mistakenly assumed that WSARecv returns WSAEINPROGRESS
    when there is nothing to read. But the error is ERROR_IO_PENDING.
    Fix that mistake.
    
    I was about to write a test for it. But I have found
    TestTCPReadWriteAllocs in net package that does nearly what I need,
    but was conveniently disabled. So enable and extend the test.
    
    Fixes #16988
    
    Change-Id: I55e5cf8998a9cf29e92b398d702280bdf7d6fc85
    Reviewed-on: https://go-review.googlesource.com/28990
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f15915af4effbbe6895ae69be02d22ac016927d5
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 10 15:21:12 2016 -0700

    cmd/vet: ignore printf failures in cmd
    
    This is a temporary measure to work around #17057.
    It will be reverted when #17057 is fixed.
    
    Change-Id: I21c02f63f3530774c91065cfed5d9c566839ed9f
    Reviewed-on: https://go-review.googlesource.com/28959
    Reviewed-by: Rob Pike <r@golang.org>

commit 8e84a5dd47d5c27e83f40439a4240a7504134039
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 10 15:24:28 2016 -0700

    cmd/vet/all/whitelist: add readme.txt
    
    This was written for CL 27811,
    but it got lost in the sea of new files.
    
    Change-Id: I5c52cb23dda499b21a6bb32ed5c586779ccbc2f1
    Reviewed-on: https://go-review.googlesource.com/28960
    Reviewed-by: Rob Pike <r@golang.org>

commit 5de2e5b73e79aea02463d661ec87cee4e944990b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jul 9 15:29:32 2016 -0700

    cmd/vet: add vet runner script for core
    
    This CL adds a script to run vet on std and cmd.
    
    There are a considerable number of false positives,
    mostly from legitimate but unusual assembly in
    the runtime and reflect packages.
    
    There are also a few false positives that need fixes.
    They are noted as such in the whitelists;
    they're not worth holding this CL for.
    
    The unsafe pointer check is disabled.
    The false positive rate is just too high to be worth it.
    
    There is no cmd/dist/test integration yet.
    The tentative plan is that we'll check the local platform
    during all.bash, and that there'll be a fast builder that
    checks all platforms (to cover platforms that can't exec).
    
    Fixes #11041
    
    Change-Id: Iee4ed32b05447888368ed86088e3ed3771f84442
    Reviewed-on: https://go-review.googlesource.com/27811
    Reviewed-by: Rob Pike <r@golang.org>

commit 4cf95fda64d76ca044319fd0a292ad3a77c1da0b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 10 14:05:51 2016 -0700

    encoding/hex: fix example function name
    
    Found by vet.
    
    Change-Id: I556d87f853a734002f779b04ba5a3588a3117106
    Reviewed-on: https://go-review.googlesource.com/28958
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0e435347b1ed888f51706d5467fabb829292a5ff
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 10 14:05:31 2016 -0700

    cmd: fix format strings used with obj.Headtype
    
    Found by vet. Introduced by CL 28853.
    
    Change-Id: I3199e0cbdb1c512ba29eb7e4d5c1c98963f5a954
    Reviewed-on: https://go-review.googlesource.com/28957
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f30598dd71b5bb7109eda56b02ea10d2b6cc1362
Author: Joonas Kuorilehto <joneskoo@derbian.fi>
Date:   Sat Sep 10 22:07:33 2016 +0300

    crypto/tls: Add mutex to protect KeyLogWriter
    
    Concurrent use of tls.Config is allowed, and may lead to
    KeyLogWriter being written to concurrently. Without a mutex
    to protect it, corrupted output may occur. A mutex is added
    for correctness.
    
    The mutex is made global to save size of the config struct as
    KeyLogWriter is rarely enabled.
    
    Related to #13057.
    
    Change-Id: I5ee55b6d8b43a191ec21f06e2aaae5002a71daef
    Reviewed-on: https://go-review.googlesource.com/29016
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c564aebce99fb92b8dc26b203f4f32e4977c0aed
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Sep 8 18:50:59 2016 -0700

    internal/testenv: add GoTool
    
    GoToolPath requires a *testing.T to handle errors.
    GoTool provides a variant that returns errors
    for clients without a *testing.T,
    such as that found in CL 27811.
    
    Change-Id: I7ac8b7ec9d472894c37223c5f7b121ec823e7f61
    Reviewed-on: https://go-review.googlesource.com/28787
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3d562de8e38317a06fbf860e60f71c5e4f0ceab6
Author: bogem <albertnigma@gmail.com>
Date:   Sat Sep 10 18:34:07 2016 +0500

    os: delete code duplications in error files
    
    Change-Id: I1ec2fcf81a7a9e45a2fae8c02c8adabc7841b4fa
    Reviewed-on: https://go-review.googlesource.com/29013
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ca993d679729dbf312530d15f0489a45d1b61eaa
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Sep 8 09:12:50 2016 -0700

    builtin: clarify that make(map[K]V, n) allocates space for n elements
    
    Change-Id: Id6265b6093edaa4be2c59e4799351082f7228b5d
    Reviewed-on: https://go-review.googlesource.com/28815
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit e273a2794639692a216c46a0043e5e6929e0a959
Author: bogem <albertnigma@gmail.com>
Date:   Fri Sep 9 23:23:32 2016 +0500

    flag: use strconv instead of fmt in values' String funcs
    
    The existing implementation of flag values with fmt package uses
    more memory and works slower than the implementation with strconv
    package.
    
    Change-Id: I9e749179f66d5c50cafe98186641bcdbc546d2db
    Reviewed-on: https://go-review.googlesource.com/28914
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7b269195d30195f29080e17114aeec7821851870
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Thu Sep 8 11:21:20 2016 -0700

    cmd/go: organize test profiling flags into their own sub-section
    
    Fixes #17020.
    
    Change-Id: Ice21bd8eb4dbc208f244b275c3be604bc8e3efe7
    Reviewed-on: https://go-review.googlesource.com/28783
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Jaana Burcu Dogan <jbd@google.com>

commit 81dfcba331f43bd14c8933eca83c433e53cb7b55
Author: Edward Muller <edwardam@interlix.com>
Date:   Wed Sep 7 11:39:31 2016 -0700

    go/build: add help info for unset $GOPATH
    
    We relay this info in a few places, in a few different ways, but not
    consistently everywhere.  This led one of our users to start googling
    and not find https://golang.org/doc/code.html#Workspaces, of which `go
    help gopath` is the most equivalent.
    
    Change-Id: I28a94375739f3aa4f200e145293ca2a5f65101e1
    Reviewed-on: https://go-review.googlesource.com/28690
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 1ff19201fd898c3e1a0ed5d3458c81c1f062570b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 9 19:29:25 2016 +0000

    net/url: add URL.Hostname and URL.Port accessors
    
    Fixes #16142
    
    Change-Id: I7609faaf00c69646b0bd44a60a63a22d9265feb0
    Reviewed-on: https://go-review.googlesource.com/28933
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Francesc Campoy Flores <campoy@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6e87082d41f0267b39e6a1854d655b1d1c2f7541
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 9 18:06:56 2016 +0000

    net/http: make Client copy headers on redirect
    
    Copy all of the original request's headers on redirect, unless they're
    sensitive. Only send sensitive ones to the same origin, or subdomains
    thereof.
    
    Fixes #4800
    
    Change-Id: Ie9fa75265c9d5e4c1012c028d31fd1fd74465712
    Reviewed-on: https://go-review.googlesource.com/28930
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Francesc Campoy Flores <campoy@golang.org>
    Reviewed-by: Ross Light <light@google.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1161a19c1ef536f8db2ca7eddf0e424e138e37db
Author: Carlos C <uldericofilho@gmail.com>
Date:   Fri Aug 12 12:45:14 2016 +0200

    context: add examples
    
    Add function level examples to the package.
    
    Partially addresses #16360
    
    Change-Id: I7162aed4e4a969743c19b79c9ffaf9217d2c1c08
    Reviewed-on: https://go-review.googlesource.com/26930
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d817c4ec6d458777537aae3a04201b7182a5f78a
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Sep 9 11:29:33 2016 -0700

    cmd/compile: use regular rather than indexed format string
    
    This enables the format test to process this file (the format
    test doesn't handle indexed formats, and this is the only place
    in the compiler where they occur).
    
    Change-Id: I99743f20c463f181a589b210365f70162227d4e0
    Reviewed-on: https://go-review.googlesource.com/28932
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit cfc0d6d8847eb959da2b6bd1c0fe1c0c7a19873e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Sep 9 11:28:07 2016 -0700

    cmd/compile/internal/syntax: remove strbyteseql
    
    cmd/compile already optimizes "string(b) == s" to avoid allocating a
    temporary string.
    
    Change-Id: I4244fbeae8d350261494135c357f9a6e2ab7ace3
    Reviewed-on: https://go-review.googlesource.com/28931
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3877f820a61886b74bb596bdb128a8d705a44628
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Sep 7 14:45:27 2016 -0400

    cmd/link, etc: introduce SymKind type
    
    Moves the grouping of symbol kinds (sections) into cmd/internal/obj
    to keep it near the definition. Groundwork for CL 28538.
    
    Change-Id: I99112981e69b028f366e1333f31cd7defd4ff82c
    Reviewed-on: https://go-review.googlesource.com/28691
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 791f71d1921a5d4d775167486eab20c1e8f97248
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 9 08:13:16 2016 -0400

    cmd: use obj.GOOS, obj.GOARCH, etc
    
    As cmd/internal/obj is coordinating the definition of GOOS, GOARCH,
    etc across the compiler and linker, turn its functions into globals
    and use them everywhere.
    
    Change-Id: I5db5addda3c6b6435c37fd5581c7c3d9a561f492
    Reviewed-on: https://go-review.googlesource.com/28854
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit f2f374d125312cd6f9c91581e85a80ee1f143cc1
Author: Tormod Erevik Lea <tormodlea@gmail.com>
Date:   Fri Sep 9 16:41:30 2016 +0200

    reflect: update location of vet tool in comment
    
    Change-Id: Ic5160edbbca4a8ffc7c7e6246e34fae1978470fd
    Reviewed-on: https://go-review.googlesource.com/28912
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 428c349552759dc1e11965d1d483a4749818ec11
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Sep 9 06:20:44 2016 -0400

    cmd/link, cmd/internal/obj: give Headtype a type
    
    Separate out windows/windowsgui properly so we are not encoding some
    of the Headtype value in a separate headstring global.
    
    Remove one of the two copies of the variable from cmd/link.
    
    Remove duplicate string to headtype list.
    
    Change-Id: Ifa20fb9652a1dc95161e154aac11f15ad0f709d0
    Reviewed-on: https://go-review.googlesource.com/28853
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 361d2738d5d750bd249661e725d3d9070fc3f2f5
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Sep 8 22:25:50 2016 -0400

    cmd/link: remove the -shared flag
    
    The -shared flag has been superseded by the -buildmode flag.
    
    Change-Id: I3682cc0367b919084c280d7dc64746485c1d4ddd
    Reviewed-on: https://go-review.googlesource.com/28852
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 57d4e5763559634733452f62aba562a5df345192
Author: Dhaivat Pandit <dhaivatpandit@gmail.com>
Date:   Fri Aug 26 20:13:44 2016 -0700

    net/http/cookiejar: added simple example test
    
    Fixes #16884
    Updates #16360
    
    Change-Id: I01563031a1c105e54499134eed4789f6219f41ec
    Reviewed-on: https://go-review.googlesource.com/27993
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 39382793d3a9e7a0720e6dbf8be4b19e8519af19
Author: Jack Lindamood <jlindamo@justin.tv>
Date:   Tue Jul 26 14:20:36 2016 -0700

    context: reduce memory usage of context tree
    
    Modifies context package to use map[]struct{} rather than map[]bool,
    since the map is intended as a set object.  Also adds Benchmarks to
    the context package switching between different types of root nodes
    and a tree with different depths.
    
    Included below are bytes deltas between the old and new code, using
    these benchmarks.
    
    benchmark                                                       old bytes     new bytes     delta
    BenchmarkContextCancelTree/depth=1/Root=Background-8            176           176           +0.00%
    BenchmarkContextCancelTree/depth=1/Root=OpenCanceler-8          560           544           -2.86%
    BenchmarkContextCancelTree/depth=1/Root=ClosedCanceler-8        352           352           +0.00%
    BenchmarkContextCancelTree/depth=10/Root=Background-8           3632          3488          -3.96%
    BenchmarkContextCancelTree/depth=10/Root=OpenCanceler-8         4016          3856          -3.98%
    BenchmarkContextCancelTree/depth=10/Root=ClosedCanceler-8       1936          1936          +0.00%
    BenchmarkContextCancelTree/depth=100/Root=Background-8          38192         36608         -4.15%
    BenchmarkContextCancelTree/depth=100/Root=OpenCanceler-8        38576         36976         -4.15%
    BenchmarkContextCancelTree/depth=100/Root=ClosedCanceler-8      17776         17776         +0.00%
    BenchmarkContextCancelTree/depth=1000/Root=Background-8         383792        367808        -4.16%
    BenchmarkContextCancelTree/depth=1000/Root=OpenCanceler-8       384176        368176        -4.16%
    BenchmarkContextCancelTree/depth=1000/Root=ClosedCanceler-8     176176        176176        +0.00%
    
    Change-Id: I699ad704d9f7b461214e1651d24941927315b525
    Reviewed-on: https://go-review.googlesource.com/25270
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 0ab6bb42e197c4c766769bfc4a8807f93cc630b9
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 9 01:30:49 2016 +0000

    doc: clarify that any C compiler works for cgo
    
    Currently the footnote says "gcc is required only if you plan to use cgo",
    but the footnote was referenced from the text:
    
       "use the clang or gcc† that comes with Xcode‡ for cgo support"
    
    That seems to imply that clang doesn't get you cgo support on OS X,
    which isn't true. The update text matches what the install-source.html
    page says.
    
    Change-Id: Ib88464a0d138227d357033123f6675a77d5d777f
    Reviewed-on: https://go-review.googlesource.com/28786
    Reviewed-by: Minux Ma <minux@golang.org>

commit f782a7e075d049979c67cdc72b6fb38fac36fdad
Author: Nigel Tao <nigeltao@golang.org>
Date:   Thu Jul 14 10:51:30 2016 +1000

    image/draw: optimize drawFillOver as drawFillSrc for opaque fills.
    
    Benchmarks are much better for opaque fills and slightly worse on non
    opaque fills. I think that on balance, this is still a win.
    
    When the source is uniform(color.RGBA{0x11, 0x22, 0x33, 0xff}):
    name        old time/op  new time/op  delta
    FillOver-8   966µs ± 1%    32µs ± 1%  -96.67%  (p=0.000 n=10+10)
    FillSrc-8   32.4µs ± 1%  32.2µs ± 1%     ~      (p=0.053 n=9+10)
    
    When the source is uniform(color.RGBA{0x11, 0x22, 0x33, 0x44}):
    name        old time/op  new time/op  delta
    FillOver-8   962µs ± 0%  1018µs ± 0%  +5.85%   (p=0.000 n=9+10)
    FillSrc-8   32.2µs ± 1%  32.1µs ± 0%    ~     (p=0.148 n=10+10)
    
    Change-Id: I52ec6d5fcd0fbc6710cef0e973a21ee7827c0dd9
    Reviewed-on: https://go-review.googlesource.com/28790
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 06eeea210b0fd764cda8d86b555343fcfac6e194
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Sep 8 16:51:26 2016 -0700

    cmd/compile: permit use of %S (short) and %L (long) instead of %1v and %2v
    
    First step towards cleaning up format use. Not yet enabled.
    
    Change-Id: Ia8d76bf02fe05882fffb9d17c9a30dc38d28bf81
    Reviewed-on: https://go-review.googlesource.com/28784
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d38d59ffb5d56c838b1ed7cc346b8d63398b5452
Author: Michael Munday <munday@ca.ibm.com>
Date:   Thu Sep 8 19:27:24 2016 -0400

    runtime: fix SIGILL in checkvectorfacility on s390x
    
    STFLE does not necessarily write to all the double-words that are
    requested. It is therefore necessary to clear the target memory
    before calling STFLE in order to ensure that the facility list does
    not contain false positives.
    
    Fixes #17032.
    
    Change-Id: I7bec9ade7103e747b72f08562fe57e6f091bd89f
    Reviewed-on: https://go-review.googlesource.com/28850
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 14ff7cc94c4e167dbd80c96996b43f96bb9c17fb
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Sep 8 08:33:19 2016 -0400

    runtime/cgo: fix callback on big-endian MIPS64
    
    Use MOVW, instead of MOVV, to pass an int32 arg. Also no need to
    restore arg registers.
    
    Fix big-endian MIPS64 build.
    
    Change-Id: Ib43c71075c988153e5e5c5c6e7297b3fee28652a
    Reviewed-on: https://go-review.googlesource.com/28830
    Reviewed-by: Minux Ma <minux@golang.org>

commit 2a36f78e8795c939630e494319c5790bc519ba72
Author: Jim Kingdon <jim@bolt.me>
Date:   Thu Sep 8 11:27:04 2016 -0700

    doc: avoid mentioning non-existence of u flag to fmt.Printf.
    
    It is better to document what golang does, rather than how it differs
    from languages which readers may or may not know.
    
    That the output format is based on the type is basically self-evident
    if you consider this just in go terms.
    
    Change-Id: I0223e9b4cb67cc83a9ebe4d424e6c151d7ed600f
    Reviewed-on: https://go-review.googlesource.com/28393
    Reviewed-by: Rob Pike <r@golang.org>

commit f27c1bda5165f94115458908b5222d992010cbee
Author: Dave Day <djd@golang.org>
Date:   Thu Sep 1 13:13:37 2016 +1000

    net/url: handle escaped paths in ResolveReference
    
    Currently, path resolution is done using the un-escaped version of
    paths. This means that path elements like one%2ftwo%2fthree are
    handled incorrectly, and optional encodings (%2d vs. -) are dropped.
    
    This function makes escaped handling consistent with Parse: provided
    escapings are honoured, and RawPath is only set if necessary.
    
    A helper method setPath is introduced to handle the correct setting of
    Path and RawPath given the encoded path.
    
    Fixes #16947
    
    Change-Id: I40b1215e9066e88ec868b41635066eee220fde37
    Reviewed-on: https://go-review.googlesource.com/28343
    Run-TryBot: Dave Day <djd@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 29f18d7983d9ae3752a36cf22f4c83601f6da9ea
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Sep 8 14:50:24 2016 -0700

    cmd/compile: fix bug in oconv
    
    Introduced by https://go-review.googlesource.com/#/c/28331/ .
    
    Change-Id: Id75aed6410f06b302d5347f6ca6a2e19c61f6fb6
    Reviewed-on: https://go-review.googlesource.com/28779
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 9d6677ca7bd5de65b94046dbe90b4ef8418502b0
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Sep 8 14:39:38 2016 -0700

    cmd/compile: update and reenable Formats test
    
    Change-Id: I9c0da13d21551dbf766156472224370ab9badfe9
    Reviewed-on: https://go-review.googlesource.com/28778
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 58de26810ccfd20d3c430a20483b171938337aed
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 17:49:49 2016 -0700

    cmd/compile: remove superfluous returns in fmt.go
    
    Change-Id: Ie73fb460a3838c6d1b9348965a8b69c1bfa6a882
    Reviewed-on: https://go-review.googlesource.com/28341
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 0ca5f269d4cb04cccd0012cc6fc0cb52b0002728
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 16:28:18 2016 -0700

    cmd/compile: remove fmt.go printer again, now that it's unused
    
    Change-Id: I9a6e5b9cbcfc264c61fd39ed65330ca737707e1f
    Reviewed-on: https://go-review.googlesource.com/28340
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 266c6223df73c5f90d2da6e271c8a415392e066c
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 16:19:50 2016 -0700

    cmd/compile: implement fmt.Formatter for Nodes formats %s, %v
    
    Change-Id: Iac3a72cb6c5394f3c1a49f39125b0256d570e006
    Reviewed-on: https://go-review.googlesource.com/28339
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit daf61797330a340c1341bd5428df8f623135b81b
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 16:07:49 2016 -0700

    cmd/compile: use fmt.State in nodedump
    
    Change-Id: Icd83e88fc879b30b34f8697d540619efeb25c25b
    Reviewed-on: https://go-review.googlesource.com/28338
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 0510f0dfe72ff9488c9c9aa23dbbc700837acfba
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 16:02:36 2016 -0700

    cmd/compile: use fmt.State in exprfmt
    
    Change-Id: If6c2d469c66a7aa8471bf54310354efdac3e0235
    Reviewed-on: https://go-review.googlesource.com/28337
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ebdc8faf0411d04fa4e2e47d1c7861682141f866
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 15:32:35 2016 -0700

    cmd/compile: use fmt.State in nodefmt and stmtfmt
    
    Change-Id: Iac87007af4ee268b45f11ec05bf4757f2e7eedd8
    Reviewed-on: https://go-review.googlesource.com/28336
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ff046d2e28791a5db4802306a3d1324a9e58e383
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 15:22:36 2016 -0700

    cmd/compile: implement fmt.Formatter for *Node formats %s, %v
    
    Change-Id: I80ed668cdeab0c4342b734d34b429927e0213e5a
    Reviewed-on: https://go-review.googlesource.com/28335
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a0d2010208199d2cfca0581348efde4e04d0ab06
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 14:12:35 2016 -0700

    cmd/compile: implement fmt.Formatter for *Sym formats %s, %v
    
    Change-Id: I0c362edba66c763e84990e3c5508013021f3e6fe
    Reviewed-on: https://go-review.googlesource.com/28334
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8d0bbe2b48fae8c41b990c5605d614e8f4b5e6d4
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 31 10:32:40 2016 -0700

    cmd/compile: implement fmt.Formatter for *Type formats %s, %v
    
    Change-Id: I878ac549430abc7859c30d176d52d52ce02c5827
    Reviewed-on: https://go-review.googlesource.com/28333
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 97ba3c824265bd6917c13c1ebc59be3085324b4c
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 30 15:01:48 2016 -0700

    cmd/compile: implement fmt.Formatter for Val formats %s, %v
    
    Change-Id: Id56e886793161b48b445439e9a12109142064d3f
    Reviewed-on: https://go-review.googlesource.com/28332
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 9e1f6a326e4fe9081975d73da03d115c01173552
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 30 14:21:33 2016 -0700

    cmd/compile: implement fmt.Formatter for Op formats %s, %v
    
    Change-Id: I59e18fab37fd688fc1e578e2192e32e29fdf37f0
    Reviewed-on: https://go-review.googlesource.com/28331
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit adcd34c732d01d60ca336627fc0fd7647d46a0c1
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 30 14:13:41 2016 -0700

    cmd/compile: implement fmt.Formatter for *Node formats %s, %v, %j
    
    Change-Id: I44ee5843bb9dfd65b9a18091f365355e84888f21
    Reviewed-on: https://go-review.googlesource.com/28330
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit b6948ce7c2ee7ab7bbb2377a8b76d1473075753c
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Sep 8 14:12:28 2016 -0700

    cmd/compile: temporarily disable Formats test
    
    So we can submit a sequence of older changes that don't yet
    update the formats in this file. We will then re-enable the
    test with the updated formats.
    
    Change-Id: I6ed559b83adc891bbf4b3d855a7dc1e428366f7f
    Reviewed-on: https://go-review.googlesource.com/28776
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 141f1a0e24836abbc85933787025edef260fe1f0
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Sep 4 03:49:02 2016 -0700

    encoding/hex: implement examples using all exported functions
    
    Fixes #11254.
    Updates #16360.
    
    Implements examples using all exported functions.
    
    This CL also updates Decode documentation to
    state that only hexadecimal characters are accepted
    in the source slice src, but also that the length
    of src must be even.
    
    Change-Id: Id016a4ba814f940cd300f26581fb4b9d2aded306
    Reviewed-on: https://go-review.googlesource.com/28482
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 4354ffd38b7ebdf7b4ee9ff614939ed77f872acd
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Aug 29 16:26:57 2016 -0400

    cmd/compile: intrinsify Ctz, Bswap, and some atomics on ARM64
    
    Change-Id: Ia5bf72b70e6f6522d6fb8cd050e78f862d37b5ae
    Reviewed-on: https://go-review.googlesource.com/27936
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit daa7c607d269e4779b74174032639b552174868f
Author: Sina Siadat <siadat@gmail.com>
Date:   Thu Sep 8 11:39:12 2016 +0430

    net/http/httputil: remove custom hop-by-hop headers from response in ReverseProxy
    
    Hop-by-hop headers (explicitly mentioned in RFC 2616) were already
    removed from the response. This removes the custom hop-by-hop
    headers listed in the "Connection" header of the response.
    
    Updates #16875
    
    Change-Id: I6b8f261d38b8d72040722f3ded29755ef0303427
    Reviewed-on: https://go-review.googlesource.com/28810
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ed8f207940c8787d344664a43071b235e2ce5c68
Author: Kevin Burke <kev@inburke.com>
Date:   Sun Jun 26 09:47:43 2016 -0700

    encoding/json: Use a lookup table for safe characters
    
    The previous check for characters inside of a JSON string that needed
    to be escaped performed seven different boolean comparisons before
    determining that a ASCII character did not need to be escaped. Most
    characters do not need to be escaped, so this check can be done in a
    more performant way.
    
    Use the same strategy as the unicode package for precomputing a range
    of characters that need to be escaped, then do a single lookup into a
    character array to determine whether the character needs escaping.
    
    On an AWS c4.large node:
    
    $ benchstat benchmarks/master-bench benchmarks/json-table-bench
    name                   old time/op    new time/op     delta
    CodeEncoder-2            19.0ms ± 0%     15.5ms ± 1%  -18.16%        (p=0.000 n=19+20)
    CodeMarshal-2            20.1ms ± 1%     16.8ms ± 2%  -16.35%        (p=0.000 n=20+21)
    CodeDecoder-2            49.3ms ± 1%     49.5ms ± 2%     ~           (p=0.498 n=16+20)
    DecoderStream-2           416ns ± 0%      416ns ± 1%     ~           (p=0.978 n=19+19)
    CodeUnmarshal-2          51.0ms ± 1%     50.9ms ± 1%     ~           (p=0.490 n=19+17)
    CodeUnmarshalReuse-2     48.5ms ± 2%     48.5ms ± 2%     ~           (p=0.989 n=20+19)
    UnmarshalString-2         541ns ± 1%      532ns ± 1%   -1.75%        (p=0.000 n=20+21)
    UnmarshalFloat64-2        485ns ± 1%      481ns ± 1%   -0.92%        (p=0.000 n=20+21)
    UnmarshalInt64-2          429ns ± 1%      427ns ± 1%   -0.49%        (p=0.000 n=19+20)
    Issue10335-2              631ns ± 1%      619ns ± 1%   -1.84%        (p=0.000 n=20+20)
    NumberIsValid-2          19.1ns ± 0%     19.1ns ± 0%     ~     (all samples are equal)
    NumberIsValidRegexp-2     689ns ± 1%      690ns ± 0%     ~           (p=0.150 n=20+20)
    SkipValue-2              14.0ms ± 0%     14.0ms ± 0%   -0.05%        (p=0.000 n=18+18)
    EncoderEncode-2           525ns ± 2%      512ns ± 1%   -2.33%        (p=0.000 n=20+18)
    
    name                   old speed      new speed       delta
    CodeEncoder-2           102MB/s ± 0%    125MB/s ± 1%  +22.20%        (p=0.000 n=19+20)
    CodeMarshal-2          96.6MB/s ± 1%  115.6MB/s ± 2%  +19.56%        (p=0.000 n=20+21)
    CodeDecoder-2          39.3MB/s ± 1%   39.2MB/s ± 2%     ~           (p=0.464 n=16+20)
    CodeUnmarshal-2        38.1MB/s ± 1%   38.1MB/s ± 1%     ~           (p=0.525 n=19+17)
    SkipValue-2             143MB/s ± 0%    143MB/s ± 0%   +0.05%        (p=0.000 n=18+18)
    
    I also took the data set reported in #5683 (browser
    telemetry data from Mozilla), added named structs for
    the data set, and turned it into a proper benchmark:
    https://github.com/kevinburke/jsonbench/blob/master/go/bench_test.go
    
    The results from that test are similarly encouraging. On a 64-bit
    Mac:
    
    $ benchstat benchmarks/master-benchmark benchmarks/json-table-benchmark
    name              old time/op    new time/op    delta
    CodeMarshal-4       1.19ms ± 2%    1.08ms ± 2%   -9.33%  (p=0.000 n=21+17)
    Unmarshal-4         3.09ms ± 3%    3.06ms ± 1%   -0.83%  (p=0.027 n=22+17)
    UnmarshalReuse-4    3.04ms ± 1%    3.04ms ± 1%     ~     (p=0.169 n=20+15)
    
    name              old speed      new speed      delta
    CodeMarshal-4     80.3MB/s ± 1%  88.5MB/s ± 1%  +10.29%  (p=0.000 n=21+17)
    Unmarshal-4       31.0MB/s ± 2%  31.2MB/s ± 1%   +0.83%  (p=0.025 n=22+17)
    
    On the c4.large:
    
    $ benchstat benchmarks/master-bench benchmarks/json-table-bench
    name              old time/op    new time/op    delta
    CodeMarshal-2       1.10ms ± 1%    0.98ms ± 1%  -10.12%  (p=0.000 n=20+54)
    Unmarshal-2         2.82ms ± 1%    2.79ms ± 0%   -1.09%  (p=0.000 n=20+51)
    UnmarshalReuse-2    2.80ms ± 0%    2.77ms ± 0%   -1.03%  (p=0.000 n=20+52)
    
    name              old speed      new speed      delta
    CodeMarshal-2     87.3MB/s ± 1%  97.1MB/s ± 1%  +11.27%  (p=0.000 n=20+54)
    Unmarshal-2       33.9MB/s ± 1%  34.2MB/s ± 0%   +1.10%  (p=0.000 n=20+51)
    
    For what it's worth, I tried other heuristics - short circuiting the
    conditional for common ASCII characters, for example:
    
    if (b >= 63 && b != 92) || (b >= 39 && b <= 59) || (rest of the conditional)
    
    This offered a speedup around 7-9%, not as large as the submitted
    change.
    
    Change-Id: Idcf88f7b93bfcd1164cdd6a585160b7e407a0d9b
    Reviewed-on: https://go-review.googlesource.com/24466
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2321895fe2a2def7b511453329f4cd8662230256
Author: Martin Möhrmann <martisch@uos.de>
Date:   Wed Sep 7 08:59:00 2016 +0200

    bytes: improve WriteRune performance
    
    Remove the runeBytes buffer and write the utf8 encoding directly
    to the internal buf byte slice.
    
    name         old time/op   new time/op   delta
    WriteRune-4   80.5µs ± 2%   57.1µs ± 2%  -29.06%  (p=0.000 n=20+20)
    
    name         old speed     new speed     delta
    WriteRune-4  153MB/s ± 2%  215MB/s ± 2%  +40.96%  (p=0.000 n=20+20)
    
    Change-Id: Ic15f6e2d6e56a3d15c74f56159e2eae020ba73ba
    Reviewed-on: https://go-review.googlesource.com/28816
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 07bcc165475f3c34433ebf48b05f704fd40e5639
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Sep 8 09:49:31 2016 -0700

    runtime: simplify getargp
    
    Change-Id: I9ed62e8a6d8b9204c18748efd7845adabf3460b9
    Reviewed-on: https://go-review.googlesource.com/28775
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 70fd814f53ba57e6523363d865a6ba49063bfa15
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Sep 7 12:06:43 2016 -0400

    cmd/compile/internal/ssa/gen: fix error message for wrong arg length
    
    When arg length is wrong, op is not set, so it always prints
    "should have 0 args".
    
    Change-Id: If7bcb41d993919d0038d2a09e16188c79dfbd858
    Reviewed-on: https://go-review.googlesource.com/28831
    Reviewed-by: Keith Randall <khr@golang.org>

commit bec84c728a3ef14a15740f856d0fbcf6c7a70b01
Author: Michal Bohuslávek <mbohuslavek@gmail.com>
Date:   Thu Sep 8 09:52:36 2016 +0100

    doc: fix typo in the release notes
    
    Change-Id: I003795d8dc2176532ee133740bf35e23a3aa3878
    Reviewed-on: https://go-review.googlesource.com/28811
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 252093f1203da13e1face4f71141ac75482ccf11
Author: Martin Möhrmann <martisch@uos.de>
Date:   Tue Sep 6 10:38:16 2016 +0200

    runtime: remove maxstring
    
    Before this CL the runtime prevented printing of overlong strings with the print
    function when the length of the string was determined to be corrupted.
    Corruption was checked by comparing the string size against the limit
    which was stored in maxstring.
    
    However maxstring was not updated everywhere were go strings were created
    e.g. for string constants during compile time. Thereby the check for maximum
    string length prevented the printing of some valid strings.
    
    The protection maxstring provided did not warrant the bookkeeping
    and global synchronization needed to keep maxstring updated to the
    correct limit everywhere.
    
    Fixes #16999
    
    Change-Id: I62cc2f4362f333f75b77f199ce1a71aac0ff7aeb
    Reviewed-on: https://go-review.googlesource.com/28813
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fd975c6aa535f2aa066653235be992731d691cfb
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Sep 8 04:51:21 2016 +0000

    io/ioutil: return better error when TempDir called with non-extant dir
    
    Fixes #14196
    
    Change-Id: Ife7950289ac6adbcfc4d0f2fce31f20bc2657858
    Reviewed-on: https://go-review.googlesource.com/28772
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3a59b5626da498de0e74a5c02298f04a330f2911
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Sep 6 14:26:56 2016 -0700

    cmd/compile: remove unnecessary FuncType cloning
    
    Since FuncTypes are represented as structs rather than linking the
    parameter lists together, we no longer need to worry about duplicating
    the parameter lists.
    
    Change-Id: I3767aa3cd1cbeddfb80a6eef6b42290dc2ac14ae
    Reviewed-on: https://go-review.googlesource.com/28574
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 24d8f3fa4b02784af2419eec8a28aee303aae0c5
Author: Sina Siadat <siadat@gmail.com>
Date:   Sun Sep 4 12:20:14 2016 +0430

    net/http/httputil: copy header map if necessary in ReverseProxy
    
    We were already making a copy of the map before removing
    hop-by-hop headers. This commit does the same for proxied
    headers mentioned in the "Connection" header.
    
    A test is added to ensure request headers are not modified.
    
    Updates #16875
    
    Change-Id: I85329d212787958d5ad818915eb0538580a4653a
    Reviewed-on: https://go-review.googlesource.com/28493
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit b6f44923c0f88eb36816d90fb8fff2fd78422df5
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Wed Aug 10 19:01:06 2016 +0200

    go/format: add format.Node example
    
    Updates #16360
    
    Change-Id: I5927cffa961cd85539a3ba9606b116c5996d1096
    Reviewed-on: https://go-review.googlesource.com/26696
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 614dfe9b02d69f96f4b222d818ec5ff47f26cb31
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Sep 5 21:13:24 2016 +0000

    io: add test that MultiReader zeros exhausted Readers
    
    Updates #16983
    Updates #16996
    
    Change-Id: I76390766385b2668632c95e172b2d243d7f66651
    Reviewed-on: https://go-review.googlesource.com/28771
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 9e040979bd07acfcd93d59667b5f51c6aa183047
Author: Chris Broadfoot <cbro@golang.org>
Date:   Wed Sep 7 11:59:58 2016 -0700

    doc: document go1.7.1
    
    Change-Id: I4dc1ff7bfc67351a046f199dee8b7a9eadb1e524
    Reviewed-on: https://go-review.googlesource.com/28693
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3ef0e8f8235fe938ad5d1c99859cc63470877ec7
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Sep 2 01:14:57 2016 -0700

    net: remove parsing of negative decimals in IPv4 literal
    
    https://golang.org/cl/27206 fixed the dtoi function such that
    it now properly parses negative number. Ironically, this causes
    several other functions that depended on dtoi to now (incorrectly)
    parse negative numbers.
    
    For example, ParseCIDR("-1.0.0.0/32") used to be rejected prior to the
    above CL, but is now accepted even though it is an invalid CIDR notation.
    This CL fixes that regression.
    
    We fix this by removing the signed parsing logic entirely from dtoi.
    It was introduced relatively recently in https://golang.org/cl/12447
    to fix a bug where an invalid port was improperly being parsed as OK.
    It seems to me that the fix in that CL to the port handling logic was
    sufficient such that a change to dtoi was unnecessary.
    
    Updates #16350
    
    Change-Id: I414bb1aa27d0a226ebd4b05a09cb40d784691b43
    Reviewed-on: https://go-review.googlesource.com/28414
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Mikio Hara <mikioh.mikioh@gmail.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>

commit 42433e27b0467c862b97f3515185f8053807c648
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Sep 2 15:12:49 2016 -0700

    cmd/compile: add format verification test
    
    TestFormats finds potential (Printf, etc.) format strings.
    If they are used in a call, the format verbs are verified
    based on the matching argument type against a precomputed
    table of valid formats (formatMapping, below). The table
    can be used to automatically rewrite format strings with
    the -u flag.
    
    Run as: go test -run Formats [-u]
    
    A formatMapping based on the existing formats is printed
    when the test is run in verbose mode (-v flag). The table
    needs to be updated whenever a new (type, format) combination
    is found and the format verb is not 'v' (as in "%v").
    
    Known bugs:
    - indexed format strings ("%[2]s", etc.) are not suported
      (the test will fail)
    - format strings that are not simple string literals cannot
      be updated automatically
      (the test will fail with respective warnings)
    
    Change-Id: I1ca5bb6421d57ac78a00f1a80b9547a72837adc9
    Reviewed-on: https://go-review.googlesource.com/28419
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 0cff219c1279cb76f042004bffcefba0a169cb67
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Thu Apr 28 17:39:55 2016 +0300

    strings: use AVX2 for Index if available
    
    IndexHard4-4      1.50ms ± 2%  0.71ms ± 0%  -52.36%  (p=0.000 n=20+19)
    
    This also fixes a bug, that caused a string of length 16 to use
    two 8-byte comparisons instead of one 16-byte. And adds a test for
    cases when partial_match fails.
    
    Change-Id: I1ee8fc4e068bb36c95c45de78f067c822c0d9df0
    Reviewed-on: https://go-review.googlesource.com/22551
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 83c73a85db84a04c8e60e52cfa348fc6b675fbf7
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 6 21:08:21 2016 -0700

    cmd/compile: ignore contentEscapes for marking nodes as escaping
    
    Redo of CL 28575 with fixed test.
    We're in a pre-KeepAlive world for a bit yet, the old tests
    were in a client which was in a post-KeepAlive world.
    
    Change-Id: I114fd630339d761ab3306d1d99718d3cb973678d
    Reviewed-on: https://go-review.googlesource.com/28582
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ca264cdc6247141a1e042f38c83fff4783f03324
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Sun Sep 4 19:07:22 2016 +0000

    syscall: avoid convT2I allocs for common Windows error values
    
    This is was already done for Unix in https://golang.org/cl/6701 +
    https://golang.org/cl/8192. Do it for Windows also.
    
    Fixes #16988
    
    Change-Id: Ia7832b0d0d48566b0cd205652b85130df529592e
    Reviewed-on: https://go-review.googlesource.com/28484
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 238274df4eee1752f51b288a11eddaf5365123bf
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Sep 6 17:26:15 2016 -0700

    go/constant: document that Value.String and ExactString return quoted strings
    
    This has always been the case but it was not obvious from the documentation.
    The reason for the quoting is that String() may return an abbreviated string,
    starting with double-quote (") but ending in ... (w/o a quote). The missing
    quote indicates the abbreviation (in contrast to a string ending in ...").
    
    constant.StringVal can be used to obtain the unquoted string of a String Value.
    
    Change-Id: Id0ba45b6ff62b3e024386ba8d907d6b3a4fcb6d7
    Reviewed-on: https://go-review.googlesource.com/28576
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit bdb3b790c66444c388529fa1d9b3f4d6aaa4c13f
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Sep 7 03:23:20 2016 +0000

    Revert of cmd/compile: ignore contentEscapes for marking nodes as escaping
    
    Reason for revert: broke the build due to cherrypick;
    relies on an unsubmitted parent CL.
    
    Original issue's description:
    > cmd/compile: ignore contentEscapes for marking nodes as escaping
    >
    > We can still stack allocate and VarKill nodes which don't
    > escape but their content does.
    >
    > Fixes #16996
    >
    > Change-Id: If8aa0fcf2c327b4cb880a3d5af8d213289e6f6bf
    > Reviewed-on: https://go-review.googlesource.com/28575
    > Run-TryBot: Keith Randall <khr@golang.org>
    > TryBot-Result: Gobot Gobot <gobot@golang.org>
    > Reviewed-by: David Chase <drchase@google.com>
    >
    
    Change-Id: Ie1a325209de14d70af6acb2d78269b7a0450da7a
    Reviewed-on: https://go-review.googlesource.com/28578
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 923a74ce7710c1e3b24b4cc3220e2ba38d7673af
Author: Keith Randall <khr@golang.org>
Date:   Tue Sep 6 14:48:47 2016 -0700

    cmd/compile: ignore contentEscapes for marking nodes as escaping
    
    We can still stack allocate and VarKill nodes which don't
    escape but their content does.
    
    Fixes #16996
    
    Change-Id: If8aa0fcf2c327b4cb880a3d5af8d213289e6f6bf
    Reviewed-on: https://go-review.googlesource.com/28575
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit a6edffb28696b739136172995ed3ec000e8e6fdb
Author: David Chase <drchase@google.com>
Date:   Tue Sep 6 13:39:22 2016 -0700

    cmd/compile: add BVC/BVS to branch ops in ppc64/prog.go
    
    Includes test case shown to fail with unpatched compiler.
    
    Fixes #17005.
    
    Change-Id: I49b7b1a3f02736d85846a2588018b73f68d50320
    Reviewed-on: https://go-review.googlesource.com/28573
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 8737dac1f27db2596f1d24aab8e5c942734c3bb4
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Tue Sep 6 20:23:40 2016 +0900

    strings: make IndexRune faster
    
    re-implement IndexRune by Index which is well optimized to get
    performance gain.
    
    name                   old time/op  new time/op  delta
    IndexRune-4            30.2ns ± 1%  28.3ns ± 1%   -6.22%  (p=0.000 n=20+19)
    IndexRuneLongString-4   156ns ± 1%    49ns ± 1%  -68.72%  (p=0.000 n=19+19)
    IndexRuneFastPath-4    10.6ns ± 2%  10.0ns ± 1%   -6.30%  (p=0.000 n=18+18)
    
    Change-Id: Ie663b8f7860ca51892dd4be182fca3caa5f8ae61
    Reviewed-on: https://go-review.googlesource.com/28546
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a4bdd645550608fdb39bfea0bb83eb39b95c6c0b
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 6 17:02:19 2016 +0000

    syscall: use MNT_NOWAIT in TestGetfsstat
    
    Fixes test failure when VMWare's shared folder filesystem is present.
    
    MNT_NOWAIT is what the mount(8) command does.
    
    Fixes #16937
    
    Change-Id: Id436185f544b7069db46c8716d6a0bf580b31da0
    Reviewed-on: https://go-review.googlesource.com/28550
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9a243303b86a0c5aaf25875a7d07dabd629b0662
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 4 16:59:46 2016 -0700

    cmd/compile: omit some temp panicdivide calls
    
    When the divisor is known to be a constant
    non-zero, don't insert panicdivide calls
    that will just be eliminated later.
    
    The main benefit here is readability of the SSA
    form for compiler developers.
    
    Change-Id: Icb7d07fc996941fbaff84524ac3e4b53d8e75fda
    Reviewed-on: https://go-review.googlesource.com/28530
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit e10286aeda6b1412f8f64734412bff74836637f9
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Tue Sep 6 08:09:27 2016 +0900

    bytes: make IndexRune faster
    
    re-implement IndexRune by IndexByte and Index which are well optimized
    to get performance gain.
    
    name                  old time/op   new time/op     delta
    IndexRune/10-4         53.2ns ± 1%     29.1ns ± 1%    -45.32%  (p=0.008 n=5+5)
    IndexRune/32-4          191ns ± 1%       27ns ± 1%    -85.75%  (p=0.008 n=5+5)
    IndexRune/4K-4         23.5µs ± 1%      1.0µs ± 1%    -95.77%  (p=0.008 n=5+5)
    IndexRune/4M-4         23.8ms ± 0%      1.0ms ± 2%    -95.90%  (p=0.008 n=5+5)
    IndexRune/64M-4         384ms ± 1%       15ms ± 1%    -95.98%  (p=0.008 n=5+5)
    IndexRuneASCII/10-4    61.5ns ± 0%     10.3ns ± 4%    -83.17%  (p=0.008 n=5+5)
    IndexRuneASCII/32-4     203ns ± 0%       11ns ± 5%    -94.68%  (p=0.008 n=5+5)
    IndexRuneASCII/4K-4    23.4µs ± 0%      0.3µs ± 2%    -98.60%  (p=0.008 n=5+5)
    IndexRuneASCII/4M-4    24.0ms ± 1%      0.3ms ± 1%    -98.60%  (p=0.008 n=5+5)
    IndexRuneASCII/64M-4    386ms ± 2%        6ms ± 1%    -98.57%  (p=0.008 n=5+5)
    
    name                  old speed     new speed       delta
    IndexRune/10-4        188MB/s ± 1%    344MB/s ± 1%    +82.91%  (p=0.008 n=5+5)
    IndexRune/32-4        167MB/s ± 0%   1175MB/s ± 1%   +603.52%  (p=0.008 n=5+5)
    IndexRune/4K-4        174MB/s ± 1%   4117MB/s ± 1%  +2262.71%  (p=0.008 n=5+5)
    IndexRune/4M-4        176MB/s ± 0%   4299MB/s ± 2%  +2340.46%  (p=0.008 n=5+5)
    IndexRune/64M-4       175MB/s ± 1%   4354MB/s ± 1%  +2388.57%  (p=0.008 n=5+5)
    IndexRuneASCII/10-4   163MB/s ± 0%    968MB/s ± 4%   +494.66%  (p=0.008 n=5+5)
    IndexRuneASCII/32-4   157MB/s ± 0%   2974MB/s ± 4%  +1788.59%  (p=0.008 n=5+5)
    IndexRuneASCII/4K-4   175MB/s ± 0%  12481MB/s ± 2%  +7027.71%  (p=0.008 n=5+5)
    IndexRuneASCII/4M-4   175MB/s ± 1%  12510MB/s ± 1%  +7061.15%  (p=0.008 n=5+5)
    IndexRuneASCII/64M-4  174MB/s ± 2%  12143MB/s ± 1%  +6881.70%  (p=0.008 n=5+5)
    
    Change-Id: I0632eadb83937c2a9daa7f0ce79df1dee64f992e
    Reviewed-on: https://go-review.googlesource.com/28537
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8259cf3c72e149ccdec2070d7f885119d92d94c6
Author: Austin Clements <austin@google.com>
Date:   Fri Aug 19 15:51:00 2016 -0400

    runtime/debug: enable TestFreeOSMemory on all arches
    
    TestFreeOSMemory was disabled on many arches because of issue #9993.
    Since that's been fixed, enable the test everywhere.
    
    Change-Id: I298c38c3e04128d9c8a1f558980939d5699bea03
    Reviewed-on: https://go-review.googlesource.com/27403
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 1b9499b06989d2831e5b156161d6c07642926ee1
Author: Austin Clements <austin@google.com>
Date:   Mon Jul 18 22:00:45 2016 -0400

    syscall: make Getpagesize return page size from runtime
    
    syscall.Getpagesize currently returns hard-coded page sizes on all
    architectures (some of which are probably always wrong, and some of
    which are definitely not always right). The runtime now has this
    information, queried from the OS during runtime init, so make
    syscall.Getpagesize return the page size that the runtime knows.
    
    Updates #10180.
    
    Change-Id: I4daa6fbc61a2193eb8fa9e7878960971205ac346
    Reviewed-on: https://go-review.googlesource.com/25051
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6dda7b2f5fb675a2747fea5ae020248245b8903f
Author: Austin Clements <austin@google.com>
Date:   Mon Jul 18 12:24:02 2016 -0400

    runtime: don't hard-code physical page size
    
    Now that the runtime fetches the true physical page size from the OS,
    make the physical page size used by heap growth a variable instead of
    a constant. This isn't used in any performance-critical paths, so it
    shouldn't be an issue.
    
    sys.PhysPageSize is also renamed to sys.DefaultPhysPageSize to make it
    clear that it's not necessarily the true page size. There are no uses
    of this constant any more, but we'll keep it around for now.
    
    Updates #12480 and #10180.
    
    Change-Id: I6c23b9df860db309c38c8287a703c53817754f03
    Reviewed-on: https://go-review.googlesource.com/25022
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 276a52de55fb48c4e56a778f1f7cac9292d8fad7
Author: Austin Clements <austin@google.com>
Date:   Mon Jul 18 21:40:02 2016 -0400

    runtime: fetch physical page size from the OS
    
    Currently the physical page size assumed by the runtime is hard-coded.
    On Linux the runtime at least fetches the OS page size during init and
    sanity checks against the hard-coded value, but they may still differ.
    On other OSes we wouldn't even notice.
    
    Add support on all OSes to fetch the actual OS physical page size
    during runtime init and lift the sanity check of PhysPageSize from the
    Linux init code to general malloc init. Currently this is the only use
    of the retrieved page size, but we'll add more shortly.
    
    Updates #12480 and #10180.
    
    Change-Id: I065f2834bc97c71d3208edc17fd990ec9058b6da
    Reviewed-on: https://go-review.googlesource.com/25050
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit d7de8b6d231289b7a6b205508c6f02a5a475cc84
Author: Austin Clements <austin@google.com>
Date:   Mon Jul 18 12:32:29 2016 -0400

    runtime: assume 64kB physical pages on ARM
    
    Currently we assume the physical page size on ARM is 4kB. While this
    is usually true, the architecture also supports 16kB and 64kB physical
    pages, and Linux (and possibly other OSes) can be configured to use
    these larger page sizes.
    
    With Go 1.6, such a configuration could potentially run, but generally
    resulted in memory corruption or random panics. With current master,
    this configuration will cause the runtime to panic during init on
    Linux when it checks the true physical page size (and will still cause
    corruption or panics on other OSes).
    
    However, the assumed physical page size only has to be a multiple of
    the true physical page size, the scavenger can now deal with large
    physical page sizes, and the rest of the runtime can deal with a
    larger assumed physical page size than the true size. Hence, there's
    little disadvantage to conservatively setting the assumed physical
    page size to 64kB on ARM.
    
    This may result in some extra memory use, since we can only return
    memory at multiples of the assumed physical page size. However, it is
    a simple change that should make Go run on systems configured for
    larger page sizes. The following commits will make the runtime query
    the actual physical page size from the OS, but this is a simple step
    there.
    
    Updates #12480.
    
    Change-Id: I851829595bc9e0c76235c847a7b5f62ad82b5302
    Reviewed-on: https://go-review.googlesource.com/25021
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit cf4f1d07a189125a8774a923a3259126599e942b
Author: Austin Clements <austin@google.com>
Date:   Fri May 27 21:04:40 2016 -0400

    runtime: bound scanobject to ~100 µs
    
    Currently the time spent in scanobject is proportional to the size of
    the object being scanned. Since scanobject is non-preemptible, large
    objects can cause significant goroutine (and even whole application)
    delays through several means:
    
    1. If a GC assist picks up a large object, the allocating goroutine is
       blocked for the whole scan, even if that scan well exceeds that
       goroutine's debt.
    
    2. Since the scheduler does not run on the P performing a large object
       scan, goroutines in that P's run queue do not run unless they are
       stolen by another P (which can take some time). If there are a few
       large objects, all of the Ps may get tied up so the scheduler
       doesn't run anywhere.
    
    3. Even if a large object is scanned by a background worker and other
       Ps are still running the scheduler, the large object scan doesn't
       flush background credit until the whole scan is done. This can
       easily cause all allocations to block in assists, waiting for
       credit, causing an effective STW.
    
    Fix this by splitting large objects into 128 KB "oblets" and scanning
    at most one oblet at a time. Since we can scan 1–2 MB/ms, this equates
    to bounding scanobject at roughly 100 µs. This improves assist
    behavior both because assists can no longer get "unlucky" and be stuck
    scanning a large object, and because it causes the background worker
    to flush credit and unblock assists more frequently when scanning
    large objects. This also improves GC parallelism if the heap consists
    primarily of a small number of very large objects by letting multiple
    workers scan a large objects in parallel.
    
    Fixes #10345. Fixes #16293.
    
    This substantially improves goroutine latency in the benchmark from
    issue #16293, which exercises several forms of very large objects:
    
    name                 old max-latency    new max-latency    delta
    SliceNoPointer-12           154µs ± 1%        155µs ±  2%     ~     (p=0.087 n=13+12)
    SlicePointer-12             314ms ± 1%       5.94ms ±138%  -98.11%  (p=0.000 n=19+20)
    SliceLivePointer-12        1148ms ± 0%       4.72ms ±167%  -99.59%  (p=0.000 n=19+20)
    MapNoPointer-12           72509µs ± 1%        408µs ±325%  -99.44%  (p=0.000 n=19+18)
    ChanPointer-12              313ms ± 0%       4.74ms ±140%  -98.49%  (p=0.000 n=18+20)
    ChanLivePointer-12         1147ms ± 0%       3.30ms ±149%  -99.71%  (p=0.000 n=19+20)
    
    name                 old P99.9-latency  new P99.9-latency  delta
    SliceNoPointer-12           113µs ±25%         107µs ±12%     ~     (p=0.153 n=20+18)
    SlicePointer-12          309450µs ± 0%         133µs ±23%  -99.96%  (p=0.000 n=20+20)
    SliceLivePointer-12         961ms ± 0%        1.35ms ±27%  -99.86%  (p=0.000 n=20+20)
    MapNoPointer-12            448µs ±288%         119µs ±18%  -73.34%  (p=0.000 n=18+20)
    ChanPointer-12           309450µs ± 0%         134µs ±23%  -99.96%  (p=0.000 n=20+19)
    ChanLivePointer-12          961ms ± 0%        1.35ms ±27%  -99.86%  (p=0.000 n=20+20)
    
    This has negligible effect on all metrics from the garbage, JSON, and
    HTTP x/benchmarks.
    
    It shows slight improvement on some of the go1 benchmarks,
    particularly Revcomp, which uses some multi-megabyte buffers:
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.46s ± 1%     2.47s ± 1%  +0.32%  (p=0.012 n=20+20)
    Fannkuch11-12                2.82s ± 0%     2.81s ± 0%  -0.61%  (p=0.000 n=17+20)
    FmtFprintfEmpty-12          50.8ns ± 5%    50.5ns ± 2%    ~     (p=0.197 n=17+19)
    FmtFprintfString-12          131ns ± 1%     132ns ± 0%  +0.57%  (p=0.000 n=20+16)
    FmtFprintfInt-12             117ns ± 0%     116ns ± 0%  -0.47%  (p=0.000 n=15+20)
    FmtFprintfIntInt-12          180ns ± 0%     179ns ± 1%  -0.78%  (p=0.000 n=16+20)
    FmtFprintfPrefixedInt-12     186ns ± 1%     185ns ± 1%  -0.55%  (p=0.000 n=19+20)
    FmtFprintfFloat-12           263ns ± 1%     271ns ± 0%  +2.84%  (p=0.000 n=18+20)
    FmtManyArgs-12               741ns ± 1%     742ns ± 1%    ~     (p=0.190 n=19+19)
    GobDecode-12                7.44ms ± 0%    7.35ms ± 1%  -1.21%  (p=0.000 n=20+20)
    GobEncode-12                6.22ms ± 1%    6.21ms ± 1%    ~     (p=0.336 n=20+19)
    Gzip-12                      220ms ± 1%     219ms ± 1%    ~     (p=0.130 n=19+19)
    Gunzip-12                   37.9ms ± 0%    37.9ms ± 1%    ~     (p=1.000 n=20+19)
    HTTPClientServer-12         82.5µs ± 3%    82.6µs ± 3%    ~     (p=0.776 n=20+19)
    JSONEncode-12               16.4ms ± 1%    16.5ms ± 2%  +0.49%  (p=0.003 n=18+19)
    JSONDecode-12               53.7ms ± 1%    54.1ms ± 1%  +0.71%  (p=0.000 n=19+18)
    Mandelbrot200-12            4.19ms ± 1%    4.20ms ± 1%    ~     (p=0.452 n=19+19)
    GoParse-12                  3.38ms ± 1%    3.37ms ± 1%    ~     (p=0.123 n=19+19)
    RegexpMatchEasy0_32-12      72.1ns ± 1%    71.8ns ± 1%    ~     (p=0.397 n=19+17)
    RegexpMatchEasy0_1K-12       242ns ± 0%     242ns ± 0%    ~     (p=0.168 n=17+20)
    RegexpMatchEasy1_32-12      72.1ns ± 1%    72.1ns ± 1%    ~     (p=0.538 n=18+19)
    RegexpMatchEasy1_1K-12       385ns ± 1%     384ns ± 1%    ~     (p=0.388 n=20+20)
    RegexpMatchMedium_32-12      112ns ± 1%     112ns ± 3%    ~     (p=0.539 n=20+20)
    RegexpMatchMedium_1K-12     34.4µs ± 2%    34.4µs ± 2%    ~     (p=0.628 n=18+18)
    RegexpMatchHard_32-12       1.80µs ± 1%    1.80µs ± 1%    ~     (p=0.522 n=18+19)
    RegexpMatchHard_1K-12       54.0µs ± 1%    54.1µs ± 1%    ~     (p=0.647 n=20+19)
    Revcomp-12                   387ms ± 1%     369ms ± 5%  -4.89%  (p=0.000 n=17+19)
    Template-12                 62.3ms ± 1%    62.0ms ± 0%  -0.48%  (p=0.002 n=20+17)
    TimeParse-12                 314ns ± 1%     314ns ± 0%    ~     (p=1.011 n=20+13)
    TimeFormat-12                358ns ± 0%     354ns ± 0%  -1.12%  (p=0.000 n=17+20)
    [Geo mean]                  53.5µs         53.3µs       -0.23%
    
    Change-Id: I2a0a179d1d6bf7875dd054b7693dd12d2a340132
    Reviewed-on: https://go-review.googlesource.com/23540
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit b275e55d86c78b8fdcfc70ea835ab3e00c7d6eeb
Author: Austin Clements <austin@google.com>
Date:   Fri Sep 2 13:56:52 2016 -0400

    runtime: clean up more traces of the old mark bit
    
    Commit 59877bf renamed bitMarked to bitScan, since the bitmap is no
    longer used for marking. However, there were several other references
    to this strewn about comments and in some other constant names. Fix
    these up, too.
    
    Change-Id: I4183d28c6b01977f1d75a99ad55b150f2211772d
    Reviewed-on: https://go-review.googlesource.com/28450
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 4d5bb76279a7b0043bef97156a39ae1bef923e6d
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Sep 6 13:56:48 2016 -0400

    cmd/compile: remove nil check if followed by storezero on ARM64, MIPS64
    
    Change-Id: Ib90c92056fa70b27feb734837794ef53e842c41a
    Reviewed-on: https://go-review.googlesource.com/28513
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 0e0ab20334358ab009cbcd9d570ef6e884750733
Author: David Chase <drchase@google.com>
Date:   Tue Sep 6 09:05:02 2016 -0700

    cmd/compile: remove ld/st-followed nil checks for PPC64
    
    Enabled checks (except for DUFF-ops which aren't implemented yet).
    Added ppc64le to relevant test.
    
    Also updated register list to reflect no-longer-reserved-
    for-constants status (file was missed in that change).
    
    Updates #16010.
    
    Change-Id: I31b1aac19e14994f760f2ecd02edbeb1f78362e7
    Reviewed-on: https://go-review.googlesource.com/28548
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit b926bf83b0d58d7cb177dae46c011847442498c2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Sep 6 12:33:36 2016 -0400

    cmd/link: remove outdated cast and comment
    
    This program is written in Go now.
    
    Change-Id: Ieec21a1bcac7c7a59e88cd1e1359977659de1757
    Reviewed-on: https://go-review.googlesource.com/28549
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bea39e63ecf0e29323a93b3353a40eacbd815dc9
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Wed May 11 14:57:24 2016 +0300

    regexp: reduce mallocs in Regexp.Find* and Regexp.ReplaceAll*.
    
    This improves Regexp.Find* and Regexp.ReplaceAll* speed:
    
    name                  old time/op    new time/op    delta
    Find-4                   345ns ± 1%     314ns ± 1%    -8.94%    (p=0.000 n=9+8)
    FindString-4             341ns ± 1%     308ns ± 0%    -9.85%   (p=0.000 n=10+9)
    FindSubmatch-4           440ns ± 1%     404ns ± 0%    -8.27%   (p=0.000 n=10+8)
    FindStringSubmatch-4     426ns ± 0%     387ns ± 0%    -9.07%   (p=0.000 n=10+9)
    ReplaceAll-4            1.75µs ± 1%    1.67µs ± 0%    -4.45%   (p=0.000 n=9+10)
    
    name                  old alloc/op   new alloc/op   delta
    Find-4                   16.0B ± 0%     0.0B ±NaN%  -100.00%  (p=0.000 n=10+10)
    FindString-4             16.0B ± 0%     0.0B ±NaN%  -100.00%  (p=0.000 n=10+10)
    FindSubmatch-4           80.0B ± 0%     48.0B ± 0%   -40.00%  (p=0.000 n=10+10)
    FindStringSubmatch-4     64.0B ± 0%     32.0B ± 0%   -50.00%  (p=0.000 n=10+10)
    ReplaceAll-4              152B ± 0%      104B ± 0%   -31.58%  (p=0.000 n=10+10)
    
    name                  old allocs/op  new allocs/op  delta
    Find-4                    1.00 ± 0%     0.00 ±NaN%  -100.00%  (p=0.000 n=10+10)
    FindString-4              1.00 ± 0%     0.00 ±NaN%  -100.00%  (p=0.000 n=10+10)
    FindSubmatch-4            2.00 ± 0%      1.00 ± 0%   -50.00%  (p=0.000 n=10+10)
    FindStringSubmatch-4      2.00 ± 0%      1.00 ± 0%   -50.00%  (p=0.000 n=10+10)
    ReplaceAll-4              8.00 ± 0%      5.00 ± 0%   -37.50%  (p=0.000 n=10+10)
    
    Fixes #15643
    
    Change-Id: I594fe51172373e2adb98d1d25c76ca2cde54ff48
    Reviewed-on: https://go-review.googlesource.com/23030
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5923df1af9f058a4f1bf095dfb1d2722cd4120a1
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Aug 25 20:29:15 2016 -0400

    cmd/compile: generate table of main symbol types
    
    For each exported symbol in package main, add its name and type to
    go.plugin.tabs symbol. This is used by the runtime when loading a
    plugin to return a typed interface{} value.
    
    Change-Id: I23c39583e57180acb8f7a74d218dae4368614f46
    Reviewed-on: https://go-review.googlesource.com/27818
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6e703ae7093b8921ce8e64a08e600d94ea1f9f28
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Thu Sep 1 21:04:08 2016 +0300

    math: fix sqrt regression on AMD64
    
    1.7 introduced a significant regression compared to 1.6:
    
    SqrtIndirect-4  2.32ns ± 0%  7.86ns ± 0%  +238.79%        (p=0.000 n=20+18)
    
    This is caused by sqrtsd preserving upper part of destination register.
    Which introduces dependency on previous  value of X0.
    In 1.6 benchmark loop didn't use X0 immediately after call:
    
    callq  *%rbx
    movsd  0x8(%rsp),%xmm2
    movsd  0x20(%rsp),%xmm1
    addsd  %xmm2,%xmm1
    mov    0x18(%rsp),%rax
    inc    %rax
    jmp    loop
    
    In 1.7 however xmm0 is used just after call:
    
    callq  *%rbx
    mov    0x10(%rsp),%rcx
    lea    0x1(%rcx),%rax
    movsd  0x8(%rsp),%xmm0
    movsd  0x18(%rsp),%xmm1
    
    I've  verified that this is caused by dependency, by inserting
    XORPS X0,X0 in the beginning of math.Sqrt, which puts performance back on 1.6 level.
    
    Splitting SQRTSD mem,reg into:
    MOVSD mem,reg
    SQRTSD reg,reg
    
    Removes dependency, because MOVSD (load version)
    doesn't need to preserve upper part of a register.
    And reg,reg operation is solved by renamer in CPU.
    
    As a result of this change regression is gone:
    SqrtIndirect-4  7.86ns ± 0%  2.33ns ± 0%  -70.36%  (p=0.000 n=18+17)
    
    This also removes old Sqrt benchmarks, in favor of benchmarks measuring latency.
    Only SqrtIndirect is kept, to show impact of this patch.
    
    Change-Id: Ic7eebe8866445adff5bc38192fa8d64c9a6b8872
    Reviewed-on: https://go-review.googlesource.com/28392
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6bcca5e91836cae42fc9a88c4ac9a6a5ffed67f6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Sep 6 07:43:15 2016 -0700

    cmd/go: run mkalldocs.sh
    
    This should have happened as part of CL 28485.
    
    Change-Id: I63cd31303e542ceaec3f4002c5573f186a1e9a52
    Reviewed-on: https://go-review.googlesource.com/28547
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 644c16c76cc11034b124763a039a7164cb3e1abc
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Sep 6 08:48:14 2016 -0400

    cmd/compile: fix intrinsifying sync/atomic.Swap* on AMD64
    
    It should alias to Xchg instead of Swap. Found when testing #16985.
    
    Change-Id: If9fd734a1f89b8b2656f421eb31b9d1b0d95a49f
    Reviewed-on: https://go-review.googlesource.com/28512
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit f1ef5a06d296fd0ba604a62ebb30531cef7ae74a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sun Sep 4 23:51:22 2016 -0400

    cmd/compile: mark some AMD64 atomic ops as clobberFlags
    
    Fixes #16985.
    
    Change-Id: I5954db28f7b70dd3ac7768e471d5df871a5b20f9
    Reviewed-on: https://go-review.googlesource.com/28510
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 6db13e071b8b35b9efc8aeae6434217733ee8e94
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Sep 6 04:11:59 2016 +0000

    syscall: add yet more TestGetfsstat debugging
    
    Updates #16937
    
    Change-Id: I98aa203176f8f2ca2fcca6e334a65bc60d6f824d
    Reviewed-on: https://go-review.googlesource.com/28535
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 66121ce8a95f587be8641f79c66c8536660a16d5
Author: Erik Staab <estaab@google.com>
Date:   Sat Sep 3 15:57:48 2016 -0700

    runtime: remove redundant expression from SetFinalizer
    
    The previous if condition already checks the same expression and doesn't
    have side effects.
    
    Change-Id: Ieaf30a786572b608d0a883052b45fd3f04bc6147
    Reviewed-on: https://go-review.googlesource.com/28475
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5514332ed9e770bfb37011f6500a27be53f905c4
Author: Shenghou Ma <minux@golang.org>
Date:   Mon Sep 5 05:19:30 2016 -0400

    os: deduplicate File definition
    
    Fixes #16993.
    
    Change-Id: Ibe406f97d2a49acae94531d969c56dbac8ce53b2
    Reviewed-on: https://go-review.googlesource.com/28511
    Run-TryBot: Minux Ma <minux@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 269ff8e6030cacd3a8ef5804f39c50566ce6f57e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Sep 5 20:16:16 2016 +0000

    io: make MultiReader nil exhausted Readers for earlier GC
    
    No test because the language spec makes no promises in this area.
    
    Fixes #16983
    
    Change-Id: I1a6aa7ff87dd14aa27e8400040a6f6fc908aa1fd
    Reviewed-on: https://go-review.googlesource.com/28533
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 29272b1e611bf20b706e26757e5d0d872e61adff
Author: Caio Marcelo de Oliveira Filho <caio.oliveira@intel.com>
Date:   Mon Sep 5 15:14:55 2016 -0300

    cmd/go: use httpGET helper in bug command
    
    Use existing helper function instead of importing "net/http". This
    allows the go_bootstrap build to not depend on "net/http" package.
    See cmd/go/http.go for details.
    
    Fixes build bootstrap build with all.bash.
    
    Change-Id: I2fd0fb01af7774f1690a353af22137680ec78170
    Reviewed-on: https://go-review.googlesource.com/28531
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2939f395e0ab9cd70fb1af51f65af711d2f5f222
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 28 10:38:41 2016 -0700

    cmd/go: add bug command
    
    This is a slightly rough, skeletal implementation.
    We will polish and add to it through use.
    
    .github/ISSUE_TEMPLATE will be updated in a
    separate CL.
    
    Fixes #16635
    
    Change-Id: Icf284170d87e61b5b643366c85cffc48f149f730
    Reviewed-on: https://go-review.googlesource.com/28485
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d58886409398abfa1a3aed1864e9ee14d516c089
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Sep 5 01:20:50 2016 +0000

    syscall: add more TestGetfsstat debugging
    
    Updates #16937
    
    Change-Id: I6d1b210c741269b58040bd68bf3b51644f891737
    Reviewed-on: https://go-review.googlesource.com/28487
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 460b76aef98490b3cf8d374c589db631eab85957
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 4 09:34:03 2016 -0700

    cmd/compile: clean up ctxt params in sinit
    
    The ctxt parameter is always set to 0 on entry into anylit so make this
    parameter a literal constant, and where possibly remove ctxt as a parameter
    where it is known to be a constant zero.
    
    Passes toolstash -cmp.
    
    This is a re-creation of CL 28221 by Dave Cheney.
    That CL was graciously reverted in CL 28480
    to make merging other CLs easier.
    
    Change-Id: If7a57bf0e27774d9890adbc30af9fabb4aff1058
    Reviewed-on: https://go-review.googlesource.com/28483
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 199b17cca8daf5bac6210e5719b1e85a51bd311d
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Fri Aug 26 13:50:34 2016 +0900

    path/filepath: handle "C:." correctly in EvalSymlinks on Windows
    
    Fixes #16886
    
    Change-Id: Idfacb0cf44d9994559c8e09032b4595887e76433
    Reviewed-on: https://go-review.googlesource.com/28214
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1a04b4abe78a152da5ccd801bf13a1df7ddfa8aa
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Sep 4 14:52:59 2016 -0700

    net/http/httputil: t.Error -> t.Errorf
    
    Found by vet.
    
    Change-Id: I09b79d68c7a5fc97e0edda4700a82bfbb00a4f45
    Reviewed-on: https://go-review.googlesource.com/28486
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit db9796dac50c65d300d2b262f2f107d86bf1703f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jun 20 08:18:22 2016 -0700

    cmd/compile: simplify staticname
    
    Add docs.
    Give it a more natural signature.
    
    Passes toolstash -cmp.
    
    Change-Id: Iab368dd10e8f16e41b725c2980020bbead2cdefb
    Reviewed-on: https://go-review.googlesource.com/26756
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7b5df0c195330d9c776139ffc8caaab2c66bbf2a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Jun 19 14:12:59 2016 -0700

    cmd/compile: document sinit ctxt and pass/kind arguments
    
    No functional changes. Passes toolstash -cmp.
    
    Change-Id: I1ad467e574fd2ea80ab1459c0c943d9ff66c23ec
    Reviewed-on: https://go-review.googlesource.com/26755
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit cd2d5ee0485fd0fa5a102c9de372c70b7a31d154
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Jun 19 12:11:47 2016 -0700

    cmd/compile: unify arraylit and structlit
    
    They were almost identical.
    Merge them and some of their calling code.
    
    Passes toolstash -cmp.
    
    Change-Id: I9e92a864a6c09c9e18ed52dc247a678467e344ba
    Reviewed-on: https://go-review.googlesource.com/26754
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 49cce1a62e452c1f2e2acbed37038837edef937d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Jun 19 07:20:28 2016 -0700

    cmd/compile: add OSLICELIT
    
    Does not pass toolstash -cmp due to changed export data,
    but the cmd/go binary (which doesn't contain export data)
    is bit-for-bit identical.
    
    Change-Id: I6b12f9de18cf7da528e9207dccbf8f08c969f142
    Reviewed-on: https://go-review.googlesource.com/26753
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 41e1c420280b04431ae3a757ba9ec9e51963b64d
Author: Michael Pratt <mpratt@google.com>
Date:   Sat Sep 3 18:48:30 2016 -0700

    cmd/compile: refactor out KeepAlive
    
    Reduce the duplication in every arch by moving the code into package gc.
    
    Change-Id: Ia111add8316492571825431ecd4f0154c8792ae1
    Reviewed-on: https://go-review.googlesource.com/28481
    Run-TryBot: Michael Pratt <mpratt@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 960016eca27f2e727886c51ed98dd5ae47c150dc
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Sep 3 18:29:43 2016 -0700

    compress/flate: clarify the behavior of Writer.Flush
    
    Fixes #16068
    
    Change-Id: I04e80a181c0b7356996f7a1158ea4895ff9e1e39
    Reviewed-on: https://go-review.googlesource.com/28477
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f1ebe8a03c397fd5a14dde71994f170c303bbf26
Author: Dave Cheney <dave@cheney.net>
Date:   Sun Sep 4 01:39:16 2016 +0000

    Revert "cmd/compile/internal/gc: clean up sinit.go"
    
    Revert to make josharians branch land cleanly
    
    This reverts commit 38abd43b6a4d215375901d137a3eac9d0d3393a5.
    
    Change-Id: Idde1df953baf6e5742c87c4edd4bee0b6b418aca
    Reviewed-on: https://go-review.googlesource.com/28480
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4c8baa0ad0f709b857710d34e662f168c16c533f
Author: Michael Pratt <mpratt@google.com>
Date:   Sat Sep 3 18:32:51 2016 -0700

    cmd/compile: use CheckLoweredPhi on PPC64
    
    This custom version is identical to CheckLoweredPhi. The addition of
    CheckLoweredPhi likely raced with adding PPC64.
    
    Change-Id: I294dcb758d312e93fb8842f4d1e12bf0f63a1e06
    Reviewed-on: https://go-review.googlesource.com/28479
    Run-TryBot: Michael Pratt <mpratt@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3a67d595f50ff7d589d4a097e162707342f1bbc4
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Sep 3 12:01:27 2016 -0700

    strconv: fix function name in errors for Atoi
    
    Fixes #16980
    
    Change-Id: I902a02b157c2c7d1772f5122b850dc48b1d7a224
    Reviewed-on: https://go-review.googlesource.com/28474
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit be8a1c61392c97328db0026c7c80cd7d69c0aa36
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Sep 3 16:31:56 2016 -0700

    test: add test for issue 15895
    
    It was fixed earlier in the Go 1.8 cycle.
    Add a test.
    
    Fixes #15895
    
    Change-Id: I5834831235d99b9fcf21b435932cdd7ac6dc2c6e
    Reviewed-on: https://go-review.googlesource.com/28476
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fd41951c2b243a80e7b2b5d28a90839c928cfd2e
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sat Sep 3 18:39:25 2016 +0200

    unicode/utf8: reduce bounds checks in EncodeRune
    
    Provide bounds elim hints in EncodeRune.
    
    name                  old time/op  new time/op  delta
    EncodeASCIIRune-4     2.69ns ± 2%  2.69ns ± 2%    ~     (p=0.193 n=47+46)
    EncodeJapaneseRune-4  5.97ns ± 2%  5.38ns ± 2%  -9.93%  (p=0.000 n=49+50)
    
    Change-Id: I1a6dcffff3bdd64ab93c2130021e3b00981de4c8
    Reviewed-on: https://go-review.googlesource.com/28492
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 38abd43b6a4d215375901d137a3eac9d0d3393a5
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Aug 31 14:39:41 2016 +1000

    cmd/compile/internal/gc: clean up sinit.go
    
    The ctxt parameter is always set to 0 on entry into anylit so make this
    parameter a literal constant, and where possibly remove ctxt as a parameter
    where it is known to be a constant zero.
    
    Change-Id: I3e76e06456d7b1a1ea875ffeb2efefa4a1ff5a7e
    Reviewed-on: https://go-review.googlesource.com/28221
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7cbc1058ea9240d9df92a339932d5c6dce694e7a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Sep 2 05:00:05 2016 +0000

    net/http/httputil: make ReverseProxy send nil Body requests when possible
    
    The http.Transport's retry can't retry requests with non-nil
    bodies. When cloning an incoming server request into an outgoing
    client request, nil out the Body field if the ContentLength is 0. (For
    server requests, Body is always non-nil, even for GET, HEAD, etc.)
    
    Also, don't use the deprecated CancelRequest and use Context instead.
    
    And don't set Proto, ProtoMajor, ProtoMinor. Those are ignored in
    client requests, which was probably a later documentation
    clarification.
    
    Fixes #16036
    Updates #16696 (remove useless Proto lines)
    
    Change-Id: I70a869e9bd4bf240c5838e82fb5aa695a539b343
    Reviewed-on: https://go-review.googlesource.com/28412
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 0b84a64da173d811d01a8a59545c22a7e1fd986a
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Fri Sep 2 14:37:35 2016 -0700

    archive/tar: reapply Header.Size to regFileReader after merging
    
    The use of PAX headers can modify the overall file size, thus the
    formerly created regFileReader may be stale.
    
    The relevant PAX specification for this behavior is:
    <<<
    Any fields in the preceding optional extended header shall override
    the associated fields in this header block for this file.
    >>>
    Where "optional extended header" refers to the preceding PAX header.
    Where "this header block" refers to the subsequent USTAR header.
    
    Fixes #15573
    Fixes #15564
    
    Change-Id: I83b1c3f05a9ca2d3be38647425ad21a9fe450ee2
    Reviewed-on: https://go-review.googlesource.com/28418
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 549ca046ffeb1f76833c15059d3a5da301cf1eb3
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Sep 2 14:21:57 2016 -0700

    cmd/compile: fix argument for given format verb
    
    Follow-up to https://go-review.googlesource.com/28394.
    
    Change-Id: Ic4147e9ae786a4de0a3454131fac03e940ae2e76
    Reviewed-on: https://go-review.googlesource.com/28417
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 0318d80e51ff148f3a94008b59b36d601846152e
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Thu Sep 1 23:28:26 2016 -0700

    path/filepath: use new style deprecation message
    
    Change-Id: I242a8960583e333f372929aad4adb8efbe441cd4
    Reviewed-on: https://go-review.googlesource.com/28413
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Jaana Burcu Dogan <jbd@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0e7e43688d2ad8b6c78bb865591eec96b6ce0e60
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun May 1 18:02:41 2016 -0700

    runtime: remove a load and shift from scanobject
    
    hbits.morePointers and hbits.isPointer both
    do a load and a shift. Do it only once.
    
    Benchmarks using compilebench (because it is
    the benchmark I have the most tooling around),
    on a quiet machine.
    
    name       old time/op      new time/op      delta
    Template        291ms ±14%       290ms ±15%    ~          (p=0.702 n=100+99)
    Unicode         143ms ± 9%       142ms ± 9%    ~           (p=0.126 n=99+98)
    GoTypes         934ms ± 4%       933ms ± 4%    ~         (p=0.937 n=100+100)
    Compiler        4.92s ± 2%       4.90s ± 1%  -0.28%        (p=0.003 n=98+98)
    
    name       old user-ns/op   new user-ns/op   delta
    Template   360user-ms ± 5%  355user-ms ± 4%  -1.37%        (p=0.000 n=97+96)
    Unicode    178user-ms ± 6%  176user-ms ± 6%  -1.24%        (p=0.001 n=96+99)
    GoTypes    1.22user-s ± 5%  1.21user-s ± 5%  -0.94%      (p=0.000 n=100+100)
    Compiler   6.50user-s ± 2%  6.44user-s ± 3%  -0.94%        (p=0.000 n=96+98)
    
    On amd64, before:
    
    "".scanobject t=1 size=581 args=0x10 locals=0x78
    
    After:
    
    "".scanobject t=1 size=540 args=0x10 locals=0x78
    
    
    Change-Id: I420ac3704549d484a5d85e19fea82c85da389514
    Reviewed-on: https://go-review.googlesource.com/22712
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit cd285f1c6fc613fa0f097443ae1d21d6c4491386
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Mon Aug 8 16:17:14 2016 +0200

    runtime: fix global buffer reset in StopTrace
    
    We reset global buffer only if its pos != 0.
    We ought to do it always, but queue it only if pos != 0.
    This is a latent bug. Currently it does not fire because
    whenever we create a global buffer, we increment pos.
    
    Change-Id: I01e28ae88ce9a5412497c524391b8b7cb443ffd9
    Reviewed-on: https://go-review.googlesource.com/25574
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 59877bfaaf0778d4cc2cbaf06cf5030144271349
Author: Gleb Stepanov <glebstepanov1992@gmail.com>
Date:   Mon Jul 25 16:25:44 2016 +0300

    runtime: rename variable
    
    Rename variable to bitScan according to
    TODO comment.
    
    Change-Id: I81dd8cc1ca28c0dc9308a654ad65cdf5b2fd2ce3
    Reviewed-on: https://go-review.googlesource.com/25175
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit 3df926d52addd638e23e5b29e692bb670e484966
Author: Austin Clements <austin@google.com>
Date:   Fri Sep 2 12:14:38 2016 -0400

    runtime: improve message when a bad pointer is found on the stack
    
    Currently this message says "invalid stack pointer", which could be
    interpreted as the value of SP being invalid. Change it to "invalid
    pointer found on stack" to emphasize that it's a pointer on the stack
    that's invalid.
    
    Updates #16948.
    
    Change-Id: I753624f8cc7e08cf13d3ea5d9c790cc4af9fa372
    Reviewed-on: https://go-review.googlesource.com/28430
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 210ac4d5e0fea2bfd4287b0865104bdaaeaffe05
Author: Adam Langley <agl@golang.org>
Date:   Thu Sep 1 16:00:25 2016 -0700

    crypto/cipher: enforce message size limits for GCM.
    
    The maximum input plaintext for GCM is 64GiB - 64. Since the GCM
    interface is one-shot, it's very hard to hit this in Go (one would need
    a 64GiB buffer in memory), but we should still enforce this limit.
    
    Thanks to Quan Nguyen for pointing it out.
    
    Change-Id: Icced47bf8d4d5dfbefa165cf13e893205c9577b8
    Reviewed-on: https://go-review.googlesource.com/28410
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 03cff2e115277951108d3e00298ae1cb0b0b7fb6
Author: Sina Siadat <siadat@gmail.com>
Date:   Sat Aug 27 20:46:25 2016 +0430

    net/http/httputil: remove proxied headers mentioned in connection-tokens
    
    RFC 2616, section 14.10 says:
    
    >>>
    HTTP/1.1 proxies MUST parse the Connection header field before a message
    is forwarded and, for each connection-token in this field, remove any
    header field(s) from the message with the same name as the
    connection-token. Connection options are signaled by the presence of a
    connection-token in the Connection header field, not by any
    corresponding additional header field(s), since the additional header
    field may not be sent if there are no parameters associated with that
    connection option.
    <<<
    
    The same requirement was included in RFC 7230, section 6.1.
    
    Fixes #16875
    
    Change-Id: I57ad4a4a17775537c8810d0edd7de1604317b5fa
    Reviewed-on: https://go-review.googlesource.com/27970
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 82bc0d4e80870f25805029ef0e1e844ace7bf068
Author: David Glasser <glasser@meteor.com>
Date:   Thu Aug 4 16:49:05 2016 -0700

    math/rand: document that NewSource sources race
    
    While it was previously explicitly documented that "the default Source"
    is safe for concurrent use, a careless reader can interpret that as
    meaning "the implementation of the Source interface created by functions
    in this package" rather than "the default shared Source used by
    top-level functions". Be explicit that the Source returned by NewSource
    is not safe for use by multiple goroutines.
    
    Fixes #3611.
    
    Change-Id: Iae4bc04c3887ad6e2491e36e38feda40324022c5
    Reviewed-on: https://go-review.googlesource.com/25501
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 98def53f5610247b3d635ff85bf47fd19e848c01
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 30 18:11:10 2016 -0700

    cmd/dist: make test names consistent
    
    Current banners are:
    
    ##### Building Go bootstrap tool.
    ##### Building Go toolchain using /Users/josh/go/1.4.
    ##### Building go_bootstrap for host, darwin/amd64.
    ##### Building packages and commands for darwin/amd64.
    ##### Testing packages.
    ##### GOMAXPROCS=2 runtime -cpu=1,2,4
    ##### Testing without libgcc.
    ##### sync -cpu=10
    ##### ../misc/cgo/stdio
    ##### ../misc/cgo/life
    ##### ../misc/cgo/fortran
    ##### ../misc/cgo/test
    ##### Testing race detector
    ##### ../misc/cgo/testso
    ##### ../misc/cgo/testsovar
    ##### misc/cgo/testcarchive
    ##### ../misc/cgo/testcshared
    ##### ../misc/cgo/errors
    ##### ../test/bench/go1
    ##### ../test
    ##### API check
    
    One of these things is not like the others.
    Fix that.
    
    Change-Id: If0bd8ea9293d73b5d1b70d6bf676bd9192991505
    Reviewed-on: https://go-review.googlesource.com/26759
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7eddaf5f0b275cd2ff37b260246d276748ac6cd4
Author: Matt Layher <mdlayher@gmail.com>
Date:   Mon Aug 1 12:50:11 2016 -0400

    go/doc: allow ToHTML to properly handle URLs containing semicolons
    
    Fixes #16565
    
    Change-Id: I3edfd2576a7ca5270644a4e7f126854f821f2c9a
    Reviewed-on: https://go-review.googlesource.com/25385
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 88ccb3c945daeba7c08dfe9b39be18ec78941a45
Author: Matt Layher <mdlayher@gmail.com>
Date:   Thu Sep 1 16:30:15 2016 -0400

    net/http: omit Content-Length in Response.Write for 1xx or 204 status
    
    Per RFC 7230, Section 3.3.2: "A server MUST NOT send a Content-Length
    header field in any response with a status code of 1xx (Informational)
    or 204 (No Content).".
    
    Fixes #16942
    
    Change-Id: I8006c76c126304e13618966e6eafb08a3885d3cd
    Reviewed-on: https://go-review.googlesource.com/28351
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8895a99c9ff522cf41f3a1bee365bd0c7e0c7900
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Sep 1 08:31:37 2016 +0200

    cmd/compile: disallow typed non-integer constant len and cap make arguments
    
    make(T, n, m) returns a slice of type T with length n and capacity m
    where "The size arguments n and m must be of integer type or untyped."
    https://tip.golang.org/ref/spec#Making_slices_maps_and_channels
    
    The failure to reject typed non-integer size arguments in make
    during compile time was uncovered after https://golang.org/cl/27851
    changed the generation of makeslice calls.
    
    Fixes   #16940
    Updates #16949
    
    Change-Id: Ib1e3576f0e6ad199c9b16b7a50c2db81290c63b4
    Reviewed-on: https://go-review.googlesource.com/28301
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 809bb3a71c2cdceb93c349888b186787589d5ec7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Sep 1 12:23:43 2016 -0700

    cmd/compile: fix missing format verb
    
    Found by vet.
    
    Change-Id: I50420771678b1a3695348ce1a81f410479ed09a1
    Reviewed-on: https://go-review.googlesource.com/28394
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fe5619b479859f199a244929770a11cc4cbd1911
Author: Keith Randall <khr@golang.org>
Date:   Thu Sep 1 10:13:11 2016 -0700

    cmd/compile: be more aggressive in tighten pass for booleans
    
    Fixes #15509
    
    Change-Id: I44073533f02d38795f9ba9b255db4d1ee426d70e
    Reviewed-on: https://go-review.googlesource.com/28390
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit c53879512f38982b1e773fd2aeecee4ebf382006
Author: Keith Randall <khr@golang.org>
Date:   Wed Aug 31 13:36:10 2016 -0700

    cmd/compile: missing float indexed loads/stores on amd64
    
    Update #16141
    
    Change-Id: I7d32c5cdc197d86491a67ea579fa16cb3d675b51
    Reviewed-on: https://go-review.googlesource.com/28273
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 0f1a8d3c2ddce2d96d2b2bb81094ac3401aff03d
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Thu Sep 1 02:49:27 2016 -0700

    doc: fix stale gofrontend/gccgo contribution link
    
    Change-Id: I63af8f0a19ec91f4a2001aa7a2eadcd2232a47df
    Reviewed-on: https://go-review.googlesource.com/28348
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 44f1854c9dc82d8dba415ef102e93896d57c2c0d
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Thu Apr 28 17:34:24 2016 +0300

    bytes: Use the same algorithm as strings for Index
    
    name                     old time/op    new time/op      delta
    IndexByte32-48             9.05ns ± 7%      9.59ns ±11%     +5.93%  (p=0.001 n=19+20)
    IndexByte4K-48              118ns ± 4%       122ns ± 8%     +3.52%  (p=0.002 n=19+19)
    IndexByte4M-48              172µs ±13%       188µs ±12%     +9.49%  (p=0.000 n=20+20)
    IndexByte64M-48            8.00ms ±14%      8.05ms ±23%       ~     (p=0.799 n=20+20)
    IndexBytePortable32-48     41.7ns ±15%      42.5ns ±12%       ~     (p=0.372 n=20+20)
    IndexBytePortable4K-48     3.08µs ±16%      3.26µs ±10%     +5.77%  (p=0.018 n=20+20)
    IndexBytePortable4M-48     3.12ms ±17%      3.20ms ±10%       ~     (p=0.157 n=20+20)
    IndexBytePortable64M-48    54.0ms ±14%      55.3ms ±14%       ~     (p=0.640 n=20+20)
    Index32-48                  230ns ±12%        46ns ± 6%    -79.87%  (p=0.000 n=20+19)
    Index4K-48                 43.2µs ± 9%       3.2µs ±12%    -92.58%  (p=0.000 n=19+20)
    Index4M-48                 44.4ms ± 7%       3.3ms ±13%    -92.59%  (p=0.000 n=19+20)
    Index64M-48                 714ms ±10%        56ms ± 8%    -92.22%  (p=0.000 n=19+19)
    IndexEasy32-48             52.7ns ±10%      31.0ns ±11%    -41.21%  (p=0.000 n=20+20)
    IndexEasy4K-48              139ns ± 5%      1598ns ± 6%  +1046.37%  (p=0.000 n=19+19)
    IndexEasy4M-48              179µs ± 8%      1674µs ±10%   +834.31%  (p=0.000 n=19+20)
    IndexEasy64M-48            8.56ms ±10%     27.82ms ±16%   +225.14%  (p=0.000 n=19+20)
    
    name                     old speed      new speed        delta
    IndexByte32-48           3.52GB/s ± 7%    3.35GB/s ±11%     -4.99%  (p=0.001 n=20+20)
    IndexByte4K-48           34.5GB/s ± 7%    33.2GB/s ±10%     -3.67%  (p=0.002 n=20+20)
    IndexByte4M-48           24.6GB/s ±14%    22.4GB/s ±14%     -8.73%  (p=0.000 n=20+20)
    IndexByte64M-48          8.42GB/s ±16%    8.42GB/s ±19%       ~     (p=0.799 n=20+20)
    IndexBytePortable32-48    770MB/s ±13%     756MB/s ±11%       ~     (p=0.383 n=20+20)
    IndexBytePortable4K-48   1.34GB/s ±14%    1.26GB/s ±10%     -5.76%  (p=0.018 n=20+20)
    IndexBytePortable4M-48   1.35GB/s ±15%    1.31GB/s ±11%       ~     (p=0.157 n=20+20)
    IndexBytePortable64M-48  1.25GB/s ±16%    1.22GB/s ±13%       ~     (p=0.640 n=20+20)
    Index32-48                138MB/s ± 8%     687MB/s ± 8%   +398.57%  (p=0.000 n=19+20)
    Index4K-48               94.9MB/s ± 9%  1280.5MB/s ±11%  +1249.11%  (p=0.000 n=19+20)
    Index4M-48               94.6MB/s ± 7%  1278.5MB/s ±12%  +1250.99%  (p=0.000 n=19+20)
    Index64M-48              94.2MB/s ±10%  1210.9MB/s ± 8%  +1185.04%  (p=0.000 n=19+19)
    IndexEasy32-48            608MB/s ±10%    1035MB/s ±10%    +70.15%  (p=0.000 n=20+20)
    IndexEasy4K-48           29.3GB/s ± 6%     2.6GB/s ± 6%    -91.24%  (p=0.000 n=19+19)
    IndexEasy4M-48           23.3GB/s ±10%     2.5GB/s ± 9%    -89.23%  (p=0.000 n=20+20)
    IndexEasy64M-48          7.86GB/s ±11%    2.42GB/s ±14%    -69.18%  (p=0.000 n=19+20)
    
    Change-Id: Ia191f0a6ca80e113397d9ed98d25f195768b65bc
    Reviewed-on: https://go-review.googlesource.com/22550
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 1c53a1b1975adf69c594fbbd5b1ca13d783f9817
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Sep 1 07:22:23 2016 -0400

    cmd/compile: fix scheduling of memory-producing tuple ops
    
    Intrinsified atomic op produces <value,memory>. Make sure this
    memory is considered in the store chain calculation.
    
    Fixes #16948.
    
    Change-Id: I029f164b123a7e830214297f8373f06ea0bf1e26
    Reviewed-on: https://go-review.googlesource.com/28350
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit f8555ea6fdbbfc32e26f351ac16138fad31a2d62
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Aug 18 13:14:30 2016 -0700

    spec: update language on type switches to match implementations
    
    See the issue below for details.
    
    Fixes #16794.
    
    Change-Id: I7e338089fd80ddcb634fa80bfc658dee2772361c
    Reviewed-on: https://go-review.googlesource.com/27356
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d24f446a90ea94b87591bf16228d7d871fec3d92
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Aug 30 03:19:01 2016 +0000

    crypto/tls: add Config.Clone
    
    In Go 1.0, the Config struct consisted only of exported fields.
    
    In Go 1.1, it started to grow private, uncopyable fields (sync.Once,
    sync.Mutex, etc).
    
    Ever since, people have been writing their own private Config.Clone
    methods, or risking it and doing a language-level shallow copy and
    copying the unexported sync variables.
    
    Clean this up and export the Config.clone method as Config.Clone.
    This matches the convention of Template.Clone from text/template and
    html/template at least.
    
    Fixes #15771
    Updates #16228 (needs update in x/net/http2 before fixed)
    Updates #16492 (not sure whether @agl wants to do more)
    
    Change-Id: I48c2825d4fef55a75d2f99640a7079c56fce39ca
    Reviewed-on: https://go-review.googlesource.com/28075
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit cd0ba4c169b591cc22f51cb61463eb45af7b930d
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Mon Aug 29 16:10:32 2016 -0700

    archive/tar: make Reader error handling consistent
    
    The tar.Reader guarantees stickiness of errors. Ensuring this property means
    that the methods of Reader need to be consistent about whose responsibility it
    is to actually ensure that errors are sticky.
    
    In this CL, we make it only the responsibility of the exported methods
    (Next and Read) to store tr.err. All other methods just return the error as is.
    
    As part of this change, we also check the error value of mergePAX (and test
    that it properly detects invalid PAX files). Since the value of mergePAX was
    never used before, we change it such that it always returns ErrHeader instead
    of strconv.SyntaxError. This keeps it consistent with other usages of strconv
    in the same tar package.
    
    Change-Id: Ia1c31da71f1de4c175da89a385dec665d3edd167
    Reviewed-on: https://go-review.googlesource.com/28215
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d1a19235212d62843c17dc4f7c61d46bb1bf56ff
Author: Rob Pike <r@golang.org>
Date:   Sat Aug 27 12:09:38 2016 +1000

    doc/faq: explain the meaning of "runtime"
    
    This truly is a common point of confusion that deserves
    explanation in the FAQ.
    
    Change-Id: Ie624e31a2042ca99626fe7570d9c8c075aae6a84
    Reviewed-on: https://go-review.googlesource.com/28275
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 6fb4b15f98bba7ef3966c5edc6b8fe2cc99c6beb
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Wed Aug 31 20:44:42 2016 +0000

    Revert "runtime: improve memmove for amd64"
    
    This reverts commit 3607c5f4f18ad4d423e40996ebf7f46b2f79ce02.
    
    This was causing failures on amd64 machines without AVX.
    
    Fixes #16939
    
    Change-Id: I70080fbb4e7ae791857334f2bffd847d08cb25fa
    Reviewed-on: https://go-review.googlesource.com/28274
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit cc0248aea53b252ec5c0e1c57e32edb102bc36fe
Author: Keith Randall <khr@golang.org>
Date:   Wed Aug 31 12:35:32 2016 -0700

    cmd/compile: don't reserve X15 for float sub/div any more
    
    We used to reserve X15 to implement the 3-operand floating-point
    sub/div ops with the 2-operand sub/div that 386/amd64 gives us.
    
    Now that resultInArg0 is implemented, we no longer need to
    reserve X15 (X7 on 386).
    
    Fixes #15584
    
    Change-Id: I978e6c0a35236e89641bfc027538cede66004e82
    Reviewed-on: https://go-review.googlesource.com/28272
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 33bb597d859e6d98b4abb27592cb925753764136
Author: Keith Randall <khr@golang.org>
Date:   Wed Aug 31 12:30:46 2016 -0700

    cmd/compile: print SizeAndAlign AuxInt values correctly
    
    Makes the AuxInt arg to Move/Zero print in a readable format.
    
    Change-Id: I12295959b00ff7c1638d35836cc6d64d112c11ca
    Reviewed-on: https://go-review.googlesource.com/28271
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 00459f05e099d92b9ae4d50980b11767aca5e102
Author: Martin Möhrmann <martisch@uos.de>
Date:   Wed Aug 31 12:37:19 2016 +0200

    cmd/compile: fold negation into comparison operators
    
    This allows for example AMD64 ssa to generate
    (SETNE x) instead of (XORLconst [1] SETE).
    
    make.bash trigger count on AMD64:
    691 generic.rules:225
      1 generic.rules:226
      4 generic.rules:228
      1 generic.rules:229
      8 generic.rules:231
      6 generic.rules:238
      2 generic.rules:257
    
    Change-Id: I5b9827b2df63c8532675079e5a6026aa47bfd8dc
    Reviewed-on: https://go-review.googlesource.com/28232
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit ee161e859166b8b8b077998c0101f56c18b18329
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 30 16:31:53 2016 -0700

    cmd/compile: handle pragmas immediately with -newparser=1
    
    Instead of saving all pragmas and processing them after parsing is
    finished, process them immediately during scanning like the current
    lexer does.
    
    This is a bit unfortunate because it means we can't use
    syntax.ParseFile to concurrently parse files yet, but it fixes how we
    report syntax errors in the presence of //line pragmas.
    
    While here, add a bunch more gcCompat entries to syntax/parser.go to
    get "go build -toolexec='toolstash -cmp' std cmd" passing. There are
    still a few remaining cases only triggered building unit tests, but
    this seems like a nice checkpoint.
    
    Change-Id: Iaf3bbcf2849857a460496f31eea228e0c585ce13
    Reviewed-on: https://go-review.googlesource.com/28226
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 69e7e8a696825fa818b70587563ac68e52f8b1a1
Author: Edward Muller <edwardam@interlix.com>
Date:   Tue Aug 30 19:14:46 2016 -0700

    doc: update go tour installation instructions
    
    Fixes #16933
    
    Change-Id: I2054abd28bc555b018309934774fc4ecc44826b3
    Reviewed-on: https://go-review.googlesource.com/28217
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit ffa2bd27a47ef16e4d6a404dd15781ed5ba21e5d
Author: Kevin Burke <kev@inburke.com>
Date:   Wed Aug 31 09:09:01 2016 -0700

    runtime: fix typo
    
    Change-Id: I47e3cfa8b49e3d0b55c91387df31488b37038a8f
    Reviewed-on: https://go-review.googlesource.com/28225
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3607c5f4f18ad4d423e40996ebf7f46b2f79ce02
Author: Denis Nagorny <denis.nagorny@intel.com>
Date:   Thu Apr 28 12:25:46 2016 +0300

    runtime: improve memmove for amd64
    
    Use AVX if available on 4th generation of Intel(TM) Core(TM) processors.
    
    (collected on E5 2609v3 @1.9GHz)
    name                        old speed      new speed       delta
    Memmove/1-6                  158MB/s ± 0%    172MB/s ± 0%    +9.09% (p=0.000 n=16+16)
    Memmove/2-6                  316MB/s ± 0%    345MB/s ± 0%    +9.09% (p=0.000 n=18+16)
    Memmove/3-6                  517MB/s ± 0%    517MB/s ± 0%      ~ (p=0.445 n=16+16)
    Memmove/4-6                  687MB/s ± 1%    690MB/s ± 0%    +0.35% (p=0.000 n=20+17)
    Memmove/5-6                  729MB/s ± 0%    729MB/s ± 0%    +0.01% (p=0.000 n=16+18)
    Memmove/6-6                  875MB/s ± 0%    875MB/s ± 0%    +0.01% (p=0.000 n=18+18)
    Memmove/7-6                 1.02GB/s ± 0%   1.02GB/s ± 1%      ~ (p=0.139 n=19+20)
    Memmove/8-6                 1.26GB/s ± 0%   1.26GB/s ± 0%    +0.00% (p=0.000 n=18+18)
    Memmove/9-6                 1.42GB/s ± 0%   1.42GB/s ± 0%    +0.00% (p=0.000 n=17+18)
    Memmove/10-6                1.58GB/s ± 0%   1.58GB/s ± 0%    +0.00% (p=0.000 n=19+19)
    Memmove/11-6                1.74GB/s ± 0%   1.74GB/s ± 0%    +0.00% (p=0.001 n=18+17)
    Memmove/12-6                1.90GB/s ± 0%   1.90GB/s ± 0%    +0.00% (p=0.000 n=19+19)
    Memmove/13-6                2.05GB/s ± 0%   2.05GB/s ± 0%    +0.00% (p=0.000 n=18+19)
    Memmove/14-6                2.21GB/s ± 0%   2.21GB/s ± 0%    +0.00% (p=0.000 n=16+20)
    Memmove/15-6                2.37GB/s ± 0%   2.37GB/s ± 0%    +0.00% (p=0.004 n=19+20)
    Memmove/16-6                2.53GB/s ± 0%   2.53GB/s ± 0%    +0.00% (p=0.000 n=16+16)
    Memmove/32-6                4.67GB/s ± 0%   4.67GB/s ± 0%    +0.00% (p=0.000 n=17+17)
    Memmove/64-6                8.67GB/s ± 0%   8.64GB/s ± 0%    -0.33% (p=0.000 n=18+17)
    Memmove/128-6               12.6GB/s ± 0%   11.6GB/s ± 0%    -8.05% (p=0.000 n=16+19)
    Memmove/256-6               16.3GB/s ± 0%   16.6GB/s ± 0%    +1.66% (p=0.000 n=20+18)
    Memmove/512-6               21.5GB/s ± 0%   24.4GB/s ± 0%   +13.35% (p=0.000 n=18+17)
    Memmove/1024-6              24.7GB/s ± 0%   33.7GB/s ± 0%   +36.12% (p=0.000 n=18+18)
    Memmove/2048-6              27.3GB/s ± 0%   43.3GB/s ± 0%   +58.77% (p=0.000 n=19+17)
    Memmove/4096-6              37.5GB/s ± 0%   50.5GB/s ± 0%   +34.56% (p=0.000 n=19+19)
    MemmoveUnalignedDst/1-6      135MB/s ± 0%    146MB/s ± 0%    +7.69% (p=0.000 n=16+14)
    MemmoveUnalignedDst/2-6      271MB/s ± 0%    292MB/s ± 0%    +7.69% (p=0.000 n=18+18)
    MemmoveUnalignedDst/3-6      438MB/s ± 0%    438MB/s ± 0%      ~ (p=0.352 n=16+19)
    MemmoveUnalignedDst/4-6      584MB/s ± 0%    584MB/s ± 0%      ~ (p=0.876 n=17+17)
    MemmoveUnalignedDst/5-6      631MB/s ± 1%    632MB/s ± 0%    +0.25% (p=0.000 n=20+17)
    MemmoveUnalignedDst/6-6      759MB/s ± 0%    759MB/s ± 0%    +0.00% (p=0.000 n=19+16)
    MemmoveUnalignedDst/7-6      885MB/s ± 0%    883MB/s ± 1%      ~ (p=0.647 n=18+20)
    MemmoveUnalignedDst/8-6     1.08GB/s ± 0%   1.08GB/s ± 0%    +0.00% (p=0.035 n=19+18)
    MemmoveUnalignedDst/9-6     1.22GB/s ± 0%   1.22GB/s ± 0%      ~ (p=0.251 n=18+17)
    MemmoveUnalignedDst/10-6    1.35GB/s ± 0%   1.35GB/s ± 0%      ~ (p=0.327 n=17+18)
    MemmoveUnalignedDst/11-6    1.49GB/s ± 0%   1.49GB/s ± 0%      ~ (p=0.531 n=18+19)
    MemmoveUnalignedDst/12-6    1.63GB/s ± 0%   1.63GB/s ± 0%      ~ (p=0.886 n=19+18)
    MemmoveUnalignedDst/13-6    1.76GB/s ± 0%   1.76GB/s ± 1%    -0.24% (p=0.006 n=18+20)
    MemmoveUnalignedDst/14-6    1.90GB/s ± 0%   1.90GB/s ± 0%      ~ (p=0.818 n=20+19)
    MemmoveUnalignedDst/15-6    2.03GB/s ± 0%   2.03GB/s ± 0%      ~ (p=0.294 n=17+16)
    MemmoveUnalignedDst/16-6    2.17GB/s ± 0%   2.17GB/s ± 0%      ~ (p=0.602 n=16+18)
    MemmoveUnalignedDst/32-6    4.05GB/s ± 0%   4.05GB/s ± 0%    +0.00% (p=0.010 n=18+17)
    MemmoveUnalignedDst/64-6    7.59GB/s ± 0%   7.59GB/s ± 0%    +0.00% (p=0.022 n=18+16)
    MemmoveUnalignedDst/128-6   11.1GB/s ± 0%   11.4GB/s ± 0%    +2.79% (p=0.000 n=18+17)
    MemmoveUnalignedDst/256-6   16.4GB/s ± 0%   16.7GB/s ± 0%    +1.59% (p=0.000 n=20+17)
    MemmoveUnalignedDst/512-6   15.7GB/s ± 0%   21.3GB/s ± 0%   +35.87% (p=0.000 n=18+20)
    MemmoveUnalignedDst/1024-6  16.0GB/s ±20%   31.5GB/s ± 0%   +96.93% (p=0.000 n=20+14)
    MemmoveUnalignedDst/2048-6  19.6GB/s ± 0%   42.1GB/s ± 0%  +115.16% (p=0.000 n=17+18)
    MemmoveUnalignedDst/4096-6  6.41GB/s ± 0%  33.18GB/s ± 0%  +417.56% (p=0.000 n=17+18)
    MemmoveUnalignedSrc/1-6      171MB/s ± 0%    166MB/s ± 0%    -3.33% (p=0.000 n=19+16)
    MemmoveUnalignedSrc/2-6      343MB/s ± 0%    342MB/s ± 1%    -0.41% (p=0.000 n=17+20)
    MemmoveUnalignedSrc/3-6      508MB/s ± 0%    493MB/s ± 1%    -2.90% (p=0.000 n=17+17)
    MemmoveUnalignedSrc/4-6      677MB/s ± 0%    660MB/s ± 2%    -2.55% (p=0.000 n=17+20)
    MemmoveUnalignedSrc/5-6      790MB/s ± 0%    790MB/s ± 0%      ~ (p=0.139 n=17+17)
    MemmoveUnalignedSrc/6-6      948MB/s ± 0%    946MB/s ± 1%      ~ (p=0.330 n=17+19)
    MemmoveUnalignedSrc/7-6     1.11GB/s ± 0%   1.11GB/s ± 0%    -0.05% (p=0.026 n=17+17)
    MemmoveUnalignedSrc/8-6     1.38GB/s ± 0%   1.38GB/s ± 0%      ~ (p=0.091 n=18+16)
    MemmoveUnalignedSrc/9-6     1.42GB/s ± 0%   1.40GB/s ± 1%    -1.04% (p=0.000 n=19+20)
    MemmoveUnalignedSrc/10-6    1.58GB/s ± 0%   1.56GB/s ± 1%    -1.15% (p=0.000 n=18+19)
    MemmoveUnalignedSrc/11-6    1.73GB/s ± 0%   1.71GB/s ± 1%    -1.30% (p=0.000 n=20+20)
    MemmoveUnalignedSrc/12-6    1.89GB/s ± 0%   1.87GB/s ± 1%    -1.18% (p=0.000 n=17+20)
    MemmoveUnalignedSrc/13-6    2.05GB/s ± 0%   2.02GB/s ± 1%    -1.18% (p=0.000 n=17+20)
    MemmoveUnalignedSrc/14-6    2.21GB/s ± 0%   2.18GB/s ± 1%    -1.14% (p=0.000 n=17+20)
    MemmoveUnalignedSrc/15-6    2.36GB/s ± 0%   2.34GB/s ± 1%    -1.04% (p=0.000 n=17+20)
    MemmoveUnalignedSrc/16-6    2.52GB/s ± 0%   2.49GB/s ± 1%    -1.26% (p=0.000 n=19+20)
    MemmoveUnalignedSrc/32-6    4.82GB/s ± 0%   4.61GB/s ± 0%    -4.40% (p=0.000 n=19+20)
    MemmoveUnalignedSrc/64-6    5.03GB/s ± 4%   7.97GB/s ± 0%   +58.55% (p=0.000 n=20+16)
    MemmoveUnalignedSrc/128-6   11.1GB/s ± 0%   11.2GB/s ± 0%    +0.52% (p=0.000 n=17+18)
    MemmoveUnalignedSrc/256-6   16.5GB/s ± 0%   16.4GB/s ± 0%    -0.10% (p=0.000 n=20+18)
    MemmoveUnalignedSrc/512-6   21.0GB/s ± 0%   22.1GB/s ± 0%    +5.48% (p=0.000 n=14+17)
    MemmoveUnalignedSrc/1024-6  24.9GB/s ± 0%   31.9GB/s ± 0%   +28.20% (p=0.000 n=19+20)
    MemmoveUnalignedSrc/2048-6  23.3GB/s ± 0%   33.8GB/s ± 0%   +45.22% (p=0.000 n=17+19)
    MemmoveUnalignedSrc/4096-6  37.3GB/s ± 0%   42.7GB/s ± 0%   +14.30% (p=0.000 n=17+17)
    
    Change-Id: Iab488d93a293cdf573ab5cd89b95a818bbb5d531
    Reviewed-on: https://go-review.googlesource.com/22515
    Run-TryBot: Denis Nagorny <denis.nagorny@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 04ade8e428fdd302ab8666d3fc5d8953caa4abcb
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Thu Aug 25 16:39:07 2016 +0300

    cmd/internal/obj/x86: Make VPSHUFD accept negative constant
    
    This partially reverts commit 4e24e1d9996b0b0155c8349e49244d9694c89708.
    Since in release 1.7 VPSHUFD support negative constant as an argument,
    removing it as part of 4e24e1d9996b0b0155c8349e49244d9694c89708 was wrong.
    Add it back.
    
    Change-Id: Id1a3e062fe8fb4cf538edb3f9970f0664f3f545f
    Reviewed-on: https://go-review.googlesource.com/27712
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bdde10137b3e67383f38329b02b329a906b78d5d
Author: Radu Berinde <radu@cockroachlabs.com>
Date:   Sun Aug 28 14:36:06 2016 -0400

    hash/crc32: cleanup code and improve tests
    
    Major reorganization of the crc32 code:
    
     - The arch-specific files now implement a well-defined interface
       (documented in crc32.go). They no longer have the responsibility of
       initializing and falling back to a non-accelerated implementation;
       instead, that happens in the higher level code.
    
     - The non-accelerated algorithms are moved to a separate file with no
       dependencies on other code.
    
     - The "cutoff" optimization for slicing-by-8 is moved inside the
       algorithm itself (as opposed to every callsite).
    
    Tests are significantly improved:
     - direct tests for the non-accelerated algorithms.
     - "cross-check" tests for arch-specific implementations (all archs).
     - tests for misaligned buffers for both IEEE and Castagnoli.
    
    Fixes #16909.
    
    Change-Id: I9b6dd83b7a57cd615eae901c0a6d61c6b8091c74
    Reviewed-on: https://go-review.googlesource.com/27935
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2a2cab2911083f1ed2ea5c6bf24a12e2c5f6bcfc
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Tue Aug 30 18:07:39 2016 +0300

    math: speed up bessel functions on AMD64
    
    J0-4            71.9ns ± 1%  54.6ns ± 0%  -24.08%  (p=0.000 n=20+18)
    J1-4            71.6ns ± 0%  55.4ns ± 0%  -22.60%  (p=0.000 n=19+20)
    Jn-4             153ns ± 0%   118ns ± 1%  -22.71%  (p=0.000 n=20+20)
    Y0-4            70.8ns ± 0%  53.9ns ± 0%  -23.87%  (p=0.000 n=19+19)
    Y1-4            70.8ns ± 0%  54.1ns ± 0%  -23.54%  (p=0.000 n=20+20)
    Yn-4             149ns ± 0%   116ns ± 0%  -22.15%  (p=0.000 n=19+20)
    
    Fixes #16889
    
    Change-Id: Ie88496407b42f6acb918ffae1226b1b4c0500cb9
    Reviewed-on: https://go-review.googlesource.com/28086
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit dfbbe06a205e7048a8541c4c97b250c24c40db96
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed Aug 10 11:06:46 2016 +1000

    cmd/link, cmd/go: delay linking of mingwex and mingw32 until very end
    
    cmd/go links mingwex and mingw32 libraries to every package it builds.
    This breaks when 2 different packages call same gcc standard library
    function pow. gcc linker appends pow implementation to the compiled
    package, and names that function "pow". But when these 2 compiled
    packages are linked together into the final executable, linker
    complains, because it finds two "pow" functions with the same name.
    
    This CL stops linking of mingwex and mingw32 during package build -
    that leaves pow function reference unresolved. pow reference gets
    resolved as final executable is built, by having both internal and
    external linker use mingwex and mingw32 libraries.
    
    Fixes #8756
    
    Change-Id: I50ddc79529ea5463c67118d668488345ecf069bc
    Reviewed-on: https://go-review.googlesource.com/26670
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit b040bc9c062e4c5593792b6754d001509989a9df
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Aug 31 04:30:03 2016 +0000

    syscall: add some debugging to TestGetfsstat
    
    TestGetfsstat is failing on OS X 10.8.
    
    Not sure why. Add more debug info.
    
    Change-Id: I7dabb70dd7aeffda7e8959103db9e4886b84741e
    Reviewed-on: https://go-review.googlesource.com/28220
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 448d3952af2e60eab7fddd0d8a7b8e0ea6905073
Author: Kevin Burke <kev@inburke.com>
Date:   Tue Jul 12 16:54:36 2016 -0700

    crypto/sha256: add examples for New, Sum256
    
    The goal for these examples is to show how to mirror the
    functionality of the sha256sum Unix utility, a common checksumming
    tool, using the Go standard library.
    
    Add a newline at the end of the input, so users will get the same
    output if they type `echo 'hello world' | sha256sum`, since the
    builtin shell echo appends a newline by default. Also use hex output
    (instead of the shorter base64) since this is the default output
    encoding for shasum/sha256sum.
    
    Change-Id: I0036874b3cc5ba85432bfcb86f81b51c4e0238fd
    Reviewed-on: https://go-review.googlesource.com/24868
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3968ac2caf4b7bbabcad6504ab5e3589fc525b1e
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Aug 31 09:54:00 2016 +1000

    cmd/compile/internal/gc: clean up closure.go
    
    Change-Id: I01bfab595c50582c5adf958dcecbd58524dbc28f
    Reviewed-on: https://go-review.googlesource.com/28212
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d3092464624f1f0ad29fa0ac4c4069fdd0697155
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Aug 30 16:08:06 2016 -0700

    compress/flate: always return uncompressed data in the event of error
    
    In the event of an unexpected error, we should always flush available
    decompressed data to the user.
    
    Fixes #16924
    
    Change-Id: I0bc0824c3201f3149e84e6a26e3dbcba72a1aae5
    Reviewed-on: https://go-review.googlesource.com/28216
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 6ebacf18a5769d071f467fae455a142a964a43da
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 30 17:09:30 2016 -0700

    doc: more tweaks to the FAQ
    
    Change-Id: I0a3726f841122643bd1680ef6bd450c2039f362b
    Reviewed-on: https://go-review.googlesource.com/28213
    Reviewed-by: Rob Pike <r@golang.org>

commit 859cab099c5a9a9b4939960b630b78e468c8c39e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Aug 30 03:40:51 2016 +0000

    net/http: make DefaultTransport's Dialer enable DualStack ("Happy Eyeballs")
    
    As @pmarks-net said in the bug, this is something of a prisoner's
    dilemma, but it does help people who occasionally report problems.
    
    This is temporary. IPv6 is happening regardless of our decision here,
    so we'll do this for now.
    
    Fixes #15324
    
    Change-Id: I8cc29c6efa56222970996c71182fc9ee89d78539
    Reviewed-on: https://go-review.googlesource.com/28077
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 8e6948fe88f8300c8a939f062b9c58d688bbab62
Author: Bryan Alexander <Kozical@msn.com>
Date:   Sun Aug 28 14:11:31 2016 -0500

    crypto/x509: Fix bug in UnknownAuthorityError.Error
    
    Fix bug in UnknownAuthorityError.Error that would never allow Org
    Name to be inserted into error message if the Common Name was empty.
    Create tests for all three paths in UnknownAuthorityError.Error
    
    Change-Id: Id8afc444e897ef549df682d93a8563fd9de22a2b
    Reviewed-on: https://go-review.googlesource.com/27992
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2b74de3ed91c495d63868acef0471b0286e7b432
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jun 28 09:22:46 2016 -0700

    runtime: rename fastrand1 to fastrand
    
    Change-Id: I37706ff0a3486827c5b072c95ad890ea87ede847
    Reviewed-on: https://go-review.googlesource.com/28210
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f9dafc742d7c0e892b6e4ff17cb9ec7165887e44
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Aug 30 14:46:25 2016 -0400

    cmd/compile, runtime, etc: get rid of constant FP registers
    
    On ARM64, MIPS64, and PPC64, some floating point registers were
    reserved for constants 0, 1, 2, 0.5, etc. This CL removes them.
    
    On ARM64, they are never used. On MIPS64 and PPC64, the only use
    case is a multiplication-by-2 in the old backend of the compiler,
    which is replaced with an addition.
    
    Change-Id: I737cbf43283756e3408964fc88c567a938c57036
    Reviewed-on: https://go-review.googlesource.com/28095
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b2e0e9688a512970ea8d270238c8ff3bbf85cbe1
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Aug 26 15:41:51 2016 -0400

    cmd/compile: remove Zero and NilCheck for newobject
    
    Recognize runtime.newobject and don't Zero or NilCheck it.
    
    Fixes #15914 (?)
    Updates #15390.
    
    TBD: add test
    
    Change-Id: Ia3bfa5c2ddbe2c27c92d9f68534a713b5ce95934
    Reviewed-on: https://go-review.googlesource.com/27930
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 842b05832fb5088a212e30962f58c95a38296d32
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 30 11:08:47 2016 -0700

    all: use testing.GoToolPath instead of "go"
    
    This change makes sure that tests are run with the correct
    version of the go tool.  The correct version is the one that
    we invoked with "go test", not the one that is first in our path.
    
    Fixes #16577
    
    Change-Id: If22c8f8c3ec9e7c35d094362873819f2fbb8559b
    Reviewed-on: https://go-review.googlesource.com/28089
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit be23e98e06b1e1c65de19d460537c4df21ebf555
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Aug 29 13:29:46 2016 -0700

    reflect: cleanup wording for type identity/equality
    
    Use terms like "equal" and "identical types" to match the Go spec,
    rather than inventing a new explanation. See also discussion on
    golang.org/cl/27170.
    
    Updates #16348.
    
    Change-Id: I0fe0bd01c0d1da3c8937a579c2ba44cf1eb16b71
    Reviewed-on: https://go-review.googlesource.com/28054
    Reviewed-by: Rob Pike <r@golang.org>

commit 55875977eb7e4f5b926127ec76217f37c7fd3713
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 30 14:48:01 2016 -0700

    cmd/compile: dedup Pragma switch
    
    Change-Id: I2d01f692ae30a166079976b86bf0b7a439f05d5c
    Reviewed-on: https://go-review.googlesource.com/28178
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d1383b5b8f94f7d94cf703b27f58e329979568d3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 30 14:18:39 2016 -0700

    misc/cgo/testsigfwd: add missing return statement
    
    Fixes C compiler warning:
    
    ./main.go:54:1: warning: control reaches end of non-void function [-Wreturn-type]
    
    Should help fix the linux builders
    that broke due to CL 23005.
    
    Change-Id: Ib0630798125e35a12f99d666b7ffe7b3196f0ecc
    Reviewed-on: https://go-review.googlesource.com/28176
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d57a4a656a8579b0ea3570c24329252ed536f98c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 30 14:21:06 2016 -0700

    cmd/compile: eliminate addmethod tpkg parameter
    
    It's only needed for a check that can be pushed up into bimport.go,
    where it makes more sense anyway.
    
    Change-Id: I6ef381ff4f29627b0f390ce27fef08902932bea6
    Reviewed-on: https://go-review.googlesource.com/28177
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4710e16d34354a555cc6ebe54c6855bf5502fcbf
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 30 13:50:03 2016 -0700

    cmd/compile: cleanup addmethod
    
    Change-Id: Icb1671187d70edd962e2bda2cc45771b17a8e770
    Reviewed-on: https://go-review.googlesource.com/28175
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4eb2fa17659fb6a2337c72841b8695317813ad8f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 30 13:43:37 2016 -0700

    cmd/compile: eliminate methtype's mustname parameter
    
    Change-Id: Idd3e677dec00eb36a2cf7baa34e772335e1f2bc8
    Reviewed-on: https://go-review.googlesource.com/28173
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8c85e23087d90e831a70ccd199cac49a38d91027
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jun 17 16:27:23 2016 -0700

    cmd/compile: recognize integer ranges in switch statements
    
    Consider a switch statement like:
    
    switch x {
    case 1:
      // ...
    case 2, 3, 4, 5, 6:
      // ...
    case 5:
      // ...
    }
    
    Prior to this CL, the generated code treated
    2, 3, 4, 5, and 6 independently in a binary search.
    With this CL, the generated code checks whether
    2 <= x && x <= 6.
    walkinrange then optimizes that range check
    into a single unsigned comparison.
    
    Experiments suggest that the best min range size
    is 2, using binary size as a proxy for optimization.
    
    Binary sizes before/after this CL:
    
    cmd/compile: 14209728 / 14165360
    cmd/go:       9543100 /  9539004
    
    Change-Id: If2f7fb97ca80468fa70351ef540866200c4c996c
    Reviewed-on: https://go-review.googlesource.com/26770
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 5c3edc46a6014f9ff74a5e46a69a8891cad3190d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 30 09:57:48 2016 -0700

    cmd/compile: add Trunc-of-Ext simplifications
    
    This is a follow-up to the discussion
    in CL 27853.
    
    During make.bash, trigger count:
    
    24 rewrite generic.rules:57
    22 rewrite generic.rules:69
    10 rewrite generic.rules:54
    10 rewrite generic.rules:58
    10 rewrite generic.rules:67
     7 rewrite generic.rules:66
     4 rewrite generic.rules:59
     3 rewrite generic.rules:50
     3 rewrite generic.rules:51
     3 rewrite generic.rules:52
     1 rewrite generic.rules:64
    
    Change-Id: Id96cb6a707a4a564831f763c2d4d0e180c94bbef
    Reviewed-on: https://go-review.googlesource.com/28088
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Martin Möhrmann <martisch@uos.de>

commit 74a00b249b049459b6f8b3c3999969f2beef3d31
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 30 11:15:38 2016 -0700

    cmd/compile: get rid of ugly {Recvs,Params,Results}P methods
    
    These were a hack abstraction for before FuncType existed.
    
    The result value from calling FuncType() could be saved, but this
    maintains the current idiom of consistently using t.FuncType().foo
    everywhere in case we choose to evolve the API further.
    
    Change-Id: I81f19aaeab6fb7caa2d4da8bf0bbbc358ab970d0
    Reviewed-on: https://go-review.googlesource.com/28150
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 7722d0f90383750784377bb395a8c799868bbab8
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Fri Aug 19 09:37:19 2016 +0900

    path/filepath: handle ".." in normalizing a path on Windows
    
    Current code assumes there are not ".." in the Clean(path).
    That's not true. Clean doesn't handle leading "..", so we need to stop
    normalization if we see "..".
    
    Fixes #16793
    
    Change-Id: I0a7901bedac17f1210b134d593ebd9f5e8483775
    Reviewed-on: https://go-review.googlesource.com/27410
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1319a0ffc79e6a3f278ce39bee90bf6823c647be
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 30 12:46:36 2016 -0700

    cmd/compile: remove unused FmtWidth flag
    
    Change-Id: I6c48683b620b0f119d7f0ae4a88502773202756b
    Reviewed-on: https://go-review.googlesource.com/28170
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 6a982c390138fb2af49f85c4aeea2bce3222eb20
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 30 11:33:18 2016 -0700

    cmd/compile: remove unused Type.Printed field
    
    Change-Id: Iff2b1507dce08ef7c27085c8e0f45d0e3e88c476
    Reviewed-on: https://go-review.googlesource.com/28152
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2340f4713dff4ecd4ed082f80b1d38150e0b5348
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 30 11:19:07 2016 -0700

    cmd/compile: remove unused FmtBody flag and associated code
    
    For #15323.
    
    Change-Id: I23192a05ce57012aa2f96909d90d6a33b913766b
    Reviewed-on: https://go-review.googlesource.com/28151
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit f42f20ad391c510ef394bc66cf3cf5bedef48e1e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Aug 30 04:08:10 2016 +0000

    net/http: fix ordering & data race in TestTransportEventTrace_h2
    
    Ordering fix: this CL swaps the order of the log write and the channel close
    in WroteRequest. I could reproduce the bug by putting a sleep between the two
    when the channel close was first. It needs to happen after the log.
    
    Data race: use the log buffer's mutex when reading too. Not really
    important once the ordering fix above is fixed (since nobody is
    concurrently writing anymore), but for consistency.
    
    Fixes #16414
    
    Change-Id: If6657884e67be90b4455c8f5a6f7bc6981999ee4
    Reviewed-on: https://go-review.googlesource.com/28078
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 0dae9dfb08a30983cce1114742c974077bdf5e18
Author: Martin Möhrmann <martisch@uos.de>
Date:   Fri Aug 26 15:00:46 2016 +0200

    cmd/compile: improve string iteration performance
    
    Generate a for loop for ranging over strings that only needs to call
    the runtime function charntorune for non ASCII characters.
    
    This provides faster iteration over ASCII characters and slightly
    faster iteration for other characters.
    
    The runtime function charntorune is changed to take an index from where
    to start decoding and returns the index after the last byte belonging
    to the decoded rune.
    
    All call sites of charntorune in the runtime are replaced by a for loop
    that will be transformed by the compiler instead of calling the charntorune
    function directly.
    
    go binary size decreases by 80 bytes.
    godoc binary size increases by around 4 kilobytes.
    
    runtime:
    
    name                           old time/op  new time/op  delta
    RuneIterate/range/ASCII-4      43.7ns ± 3%  10.3ns ± 4%  -76.33%  (p=0.000 n=44+45)
    RuneIterate/range/Japanese-4   72.5ns ± 2%  62.8ns ± 2%  -13.41%  (p=0.000 n=49+50)
    RuneIterate/range1/ASCII-4     43.5ns ± 2%  10.4ns ± 3%  -76.18%  (p=0.000 n=50+50)
    RuneIterate/range1/Japanese-4  72.5ns ± 2%  62.9ns ± 2%  -13.26%  (p=0.000 n=50+49)
    RuneIterate/range2/ASCII-4     43.5ns ± 3%  10.3ns ± 2%  -76.22%  (p=0.000 n=48+47)
    RuneIterate/range2/Japanese-4  72.4ns ± 2%  62.7ns ± 2%  -13.47%  (p=0.000 n=50+50)
    
    strings:
    
    name                 old time/op    new time/op    delta
    IndexRune-4            64.7ns ± 5%    22.4ns ± 3%  -65.43%  (p=0.000 n=25+21)
    MapNoChanges-4          269ns ± 2%     157ns ± 2%  -41.46%  (p=0.000 n=23+24)
    Fields-4               23.0ms ± 2%    19.7ms ± 2%  -14.35%  (p=0.000 n=25+25)
    FieldsFunc-4           23.1ms ± 2%    19.6ms ± 2%  -14.94%  (p=0.000 n=25+24)
    
    name                 old speed      new speed      delta
    Fields-4             45.6MB/s ± 2%  53.2MB/s ± 2%  +16.87%  (p=0.000 n=24+25)
    FieldsFunc-4         45.5MB/s ± 2%  53.5MB/s ± 2%  +17.57%  (p=0.000 n=25+24)
    
    Updates #13162
    
    Change-Id: I79ffaf828d82bf9887592f08e5cad883e9f39701
    Reviewed-on: https://go-review.googlesource.com/27853
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Martin Möhrmann <martisch@uos.de>

commit 0d7a2241cb684236f2728bb08514e7f256ac4a43
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 30 09:29:16 2016 -0700

    runtime: update a few comments
    
    noescape is now 0 instructions with the SSA backend.
    fast atomics are no longer a TODO (at least for amd64).
    
    Change-Id: Ib6e06f7471bef282a47ba236d8ce95404bb60a42
    Reviewed-on: https://go-review.googlesource.com/28087
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit f7ac5da4956fb2db129848be331345ece8e7faa6
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Aug 29 17:56:15 2016 -0700

    cmd/compile: make internal objects directly print to printer
    
    Internal objects that satisfy the Printable interface can print
    directly to a printer w/o going through the conversion to a string
    first.
    
    Made printer.f understand and special-case %v so that Printable
    objects use the printer directly.
    
    This is work in progress and we may end up doing something else
    eventually (perhaps using fmt.Formatter) - or even undo these
    changes if this exploration doesn't get us to a significantly
    better place.
    
    Allocations numbers relative to commit c85b77c (still up, but
    reduced from most recent change):
    
    name       old time/op     new time/op     delta
    Template       307ms ± 4%      315ms ± 4%   +2.55%        (p=0.000 n=29+29)
    Unicode        164ms ± 4%      165ms ± 4%     ~           (p=0.057 n=30+30)
    GoTypes        1.01s ± 3%      1.03s ± 3%   +1.72%        (p=0.000 n=30+30)
    Compiler       5.49s ± 1%      5.62s ± 2%   +2.31%        (p=0.000 n=30+28)
    
    name       old user-ns/op  new user-ns/op  delta
    Template        397M ± 3%       406M ± 6%   +2.21%        (p=0.000 n=28+30)
    Unicode         225M ± 4%       226M ± 3%     ~           (p=0.230 n=29+30)
    GoTypes        1.31G ± 3%      1.34G ± 5%   +2.79%        (p=0.000 n=30+30)
    Compiler       7.39G ± 2%      7.50G ± 2%   +1.43%        (p=0.000 n=30+29)
    
    name       old alloc/op    new alloc/op    delta
    Template      46.8MB ± 0%     47.5MB ± 0%   +1.48%        (p=0.000 n=29+28)
    Unicode       37.8MB ± 0%     38.1MB ± 0%   +0.64%        (p=0.000 n=30+28)
    GoTypes        143MB ± 0%      145MB ± 0%   +1.72%        (p=0.000 n=30+30)
    Compiler       683MB ± 0%      706MB ± 0%   +3.31%        (p=0.000 n=30+29)
    
    name       old allocs/op   new allocs/op   delta
    Template        444k ± 0%       481k ± 0%   +8.38%        (p=0.000 n=30+30)
    Unicode         369k ± 0%       379k ± 0%   +2.74%        (p=0.000 n=30+30)
    GoTypes        1.35M ± 0%      1.50M ± 0%  +10.78%        (p=0.000 n=30+30)
    Compiler       5.66M ± 0%      6.25M ± 0%  +10.31%        (p=0.000 n=29+29)
    
    For #16897.
    
    Change-Id: I37f95ab60508018ee6d29a98d238482b60e3e4b5
    Reviewed-on: https://go-review.googlesource.com/28072
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit fcb45e7ceff09548eb0308909256296086eedf9c
Author: Terrel Shumway <gopher@shumway.us>
Date:   Tue Aug 30 07:58:52 2016 -0600

    doc: clarify FAQ wording for float sizes
    
    I was confused by the current wording. This wording
    answers the question more clearly.
    
    Thanks to Robert Griesemer for suggestions.
    
    Fixes #16916
    
    Change-Id: I50187c8df2db661b9581f4b3c5d5c279d2f9af41
    Reviewed-on: https://go-review.googlesource.com/28052
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit d6098e4277bab633c2df752ed90e1e826918ca67
Author: Keith Randall <khr@golang.org>
Date:   Mon Aug 29 20:28:20 2016 -0700

    cmd/compile: intrinsify sync/atomic for amd64
    
    Uses the same implementation as runtime/internal/atomic.
    
    Reorganize the intrinsic detector to make it more table-driven.
    
    Also works on amd64p32.
    
    Change-Id: I7a5238951d6018d7d5d1bc01f339f6ee9282b2d0
    Reviewed-on: https://go-review.googlesource.com/28076
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit adb1e67f02fa58b13d1baf60c84556f375f6ceeb
Author: Dave Cheney <dave@cheney.net>
Date:   Mon Aug 29 09:44:50 2016 +1000

    reflect: avoid zeroing memory that will be overwritten
    
    Avoid new'ing memory that will be overwritten by assignment.
    
    name              old time/op    new time/op    delta
    Call-4               160ns ± 4%     155ns ± 2%  -3.19%        (p=0.003 n=10+10)
    FieldByName1-4      94.5ns ± 2%    95.2ns ± 1%  +0.65%          (p=0.026 n=9+9)
    FieldByName2-4      3.09µs ± 4%    3.13µs ± 2%    ~           (p=0.165 n=10+10)
    FieldByName3-4      19.8µs ± 1%    19.9µs ± 1%    ~            (p=0.395 n=10+8)
    InterfaceBig-4      11.6ns ± 0%    11.7ns ± 0%  +0.86%          (p=0.000 n=8+9)
    InterfaceSmall-4    11.7ns ± 0%    11.7ns ± 0%    ~     (all samples are equal)
    New-4               26.6ns ± 0%    26.4ns ± 0%  -0.64%         (p=0.000 n=10+9)
    
    name              old alloc/op   new alloc/op   delta
    Call-4              0.00B ±NaN%    0.00B ±NaN%    ~     (all samples are equal)
    
    name              old allocs/op  new allocs/op  delta
    Call-4               0.00 ±NaN%     0.00 ±NaN%    ~     (all samples are equal)
    
    Change-Id: I12c85d4e65245598669dd6f66beb0744ec9b9d6d
    Reviewed-on: https://go-review.googlesource.com/28011
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b6e3a98cf3a7acb3d5c1431eb04e9c3edad6c6ed
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue May 10 13:03:42 2016 -0700

    cmd/go: make C compiler warnings fatal on builders
    
    Fixes #14698
    
    Change-Id: I82fa781bf136c30e900d8e910ff576ba8b218acb
    Reviewed-on: https://go-review.googlesource.com/23005
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 2af00eb63cde716b59c0d64f4c3855b83a9d5a63
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Aug 30 01:09:32 2016 +0000

    net/http: stop timeout timer if user cancels a request
    
    Change-Id: I84faeae69f294b9a70e545faac6a070feba67770
    Reviewed-on: https://go-review.googlesource.com/28074
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 6f43a989b0701ef2f87827dc72ee93378e09bb9b
Author: Jonathan Boulle <jonathanboulle@gmail.com>
Date:   Tue Aug 30 02:09:19 2016 +0200

    os: fix typo in comment (Readir -> Readdir)
    
    Change-Id: I8434925661dc11396380af65c192c9f0dc191287
    Reviewed-on: https://go-review.googlesource.com/27973
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 298791a94af8b787c38fb95c51cb2dbc94668dad
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Aug 30 01:05:18 2016 +0000

    all: use time.Until where applicable
    
    Updates #14595
    
    Change-Id: Idf60b3004c7a0ebb59dd48389ab62c854069e09f
    Reviewed-on: https://go-review.googlesource.com/28073
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6c6ad08eb920d02947410919889229bbfa8c9915
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Aug 29 16:19:23 2016 -0700

    go/types: fix bad variable shadowing in offsetsof
    
    Introduced in CL 26995.
    
    Fixes #16902
    
    Change-Id: I8e749f598167e1f8b82cd5e735a7eb5291362e5e
    Reviewed-on: https://go-review.googlesource.com/28070
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 67ea710792eabdae1182e2bf4845f512136cccce
Author: Sam Whited <sam@samwhited.com>
Date:   Wed Mar 2 00:00:23 2016 -0600

    time: Add Until helper function
    
    Adds an Until() function that returns the duration until the given time.
    This compliments the existing Since() function and makes writing
    expressions that have expiration times more readable; for example:
    
        <-After(time.Until(connExpires)):
    
    Fixes #14595
    
    Change-Id: I87998a924b11d4dad5512e010b29d2da6b123456
    Reviewed-on: https://go-review.googlesource.com/20118
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit 9f8335b7e72bdb2b95055c69f2d4b453b73646df
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Aug 29 21:27:40 2016 +0000

    os: don't let File.Readdir return an empty slice and nil error
    
    In the case of a file being deleted while Readdir was running, it was
    possible for File.Readdir to return an empty slice and a nil error,
    counter to its documentation.
    
    Fixes #16919
    
    Change-Id: If0e42882eea52fbf5530317a1895f3829ea8e67b
    Reviewed-on: https://go-review.googlesource.com/28056
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 11e3955e10ccd9105b78e07f4785402a5c8ceaf7
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Aug 29 13:53:32 2016 -0700

    net: restore per-query timeout logic
    
    The handling of "options timeout:n" is supposed to be per individual
    DNS server exchange, not per Lookup call.
    
    Fixes #16865.
    
    Change-Id: I2304579b9169c1515292f142cb372af9d37ff7c1
    Reviewed-on: https://go-review.googlesource.com/28057
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit aaa6b5352420aaaf9d46848facb5854927b3130e
Author: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
Date:   Fri Jul 29 14:02:26 2016 -0300

    runtime: insufficient padding in the `p` structure
    
    The current padding in the 'p' struct is hardcoded at 64 bytes. It should be the
    cache line size. On ppc64x, the current value is only okay because sys.CacheLineSize
    is wrong at 64 bytes. This change fixes that by making the padding equal to the
    cache line size. It also fixes the cache line size for ppc64/ppc64le to 128 bytes.
    
    Fixes #16477
    
    Change-Id: Ib7ec5195685116eb11ba312a064f41920373d4a3
    Reviewed-on: https://go-review.googlesource.com/25370
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: Minux Ma <minux@golang.org>
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit db1fef7b2afd12625e3edd90f879e5d05511d1d6
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Jul 10 17:51:27 2016 -0700

    cmd/go: for -msan build runtime/cgo with -fsanitize=memory
    
    The go tool used to avoid passing -fsanitize=memory when building
    runtime/cgo. That was originally to avoid an msan error, but that error
    was fixed anyhow for issue #13815. And building runtime/cgo with
    -fsanitize=memory corrects the handling of the context traceback
    function when the traceback function itself is built with
    -fsanitize=memory.
    
    Change-Id: I4bf5c3d21de6b2eb540600435ae47f5820d17464
    Reviewed-on: https://go-review.googlesource.com/24855
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit bd9aa9811d63c121a84ef92bc9b6a4101af46235
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Wed Jun 22 20:16:41 2016 +0300

    cmd/vet: check for copying of array of locks
    
    Updates #14664
    
    Change-Id: I1f7b1116cfe91466816c760f136ce566da3e80a9
    Reviewed-on: https://go-review.googlesource.com/24340
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit c9fbe0f29321602ce791834f600dcc453580c22b
Author: Aliaksandr Valialkin <valyala@gmail.com>
Date:   Thu Jun 23 14:59:26 2016 +0300

    cmd/vet: properly handle indexed arguments in printf
    
    Fixes #15884
    
    Change-Id: I33d98db861d74e3c37a546efaf83ce6f2f76d335
    Reviewed-on: https://go-review.googlesource.com/24391
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 4955147291812fd78049d47ef985095e6442264a
Author: Ethan Miller <eamiller@us.ibm.com>
Date:   Fri Aug 12 13:45:50 2016 -0500

    math/big: add assembly implementation of arith for ppc64{le}
    
    The existing implementation used a pure go implementation, leading to slow
    cryptographic performance.
    
    Implemented mulWW, subVV, mulAddVWW, addMulVVW, and bitLen for
    ppc64{le}.
    Implemented divWW for ppc64le only, as the DIVDEU instruction is only
    available on Power8 or newer.
    
    benchcmp output:
    
    benchmark                         old ns/op     new ns/op     delta
    BenchmarkSignP384                 28934360      10877330      -62.41%
    BenchmarkRSA2048Decrypt           41261033      5139930       -87.54%
    BenchmarkRSA2048Sign              45231300      7610985       -83.17%
    Benchmark3PrimeRSA2048Decrypt     20487300      2481408       -87.89%
    
    Fixes #16621
    
    Change-Id: If8b68963bb49909bde832f2bda08a3791c4f5b7a
    Reviewed-on: https://go-review.googlesource.com/26951
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>

commit 0a7c73b5db9c78c4ecf8a5e8274ddf352b41562c
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Aug 29 13:53:43 2016 -0700

    cmd/compile: use printer in typefmt, Tconv
    
    Change-Id: Ib3ac0177761af1edea6b7951ffbbea042fb836d2
    Reviewed-on: https://go-review.googlesource.com/28055
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit d3134b6450d08bba13e904f572a34d411614533e
Author: Kevin Burke <kev@inburke.com>
Date:   Thu Aug 18 09:14:22 2016 -0700

    cmd/compile: document more Node fields
    
    Change-Id: Ic8d37e5612b68bc73c4b50b59db54d8966b69838
    Reviewed-on: https://go-review.googlesource.com/27326
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e6f9f39ce52e880b54e4cb08bf0cde73cf6c7dc2
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Aug 25 14:17:52 2016 +0200

    cmd/compile: generate makeslice calls with int arguments
    
    Where possible generate calls to runtime makeslice with int arguments
    during compile time instead of makeslice with int64 arguments.
    
    This eliminates converting arguments for calls to makeslice with
    int64 arguments for platforms where int64 values do not fit into
    arguments of type int.
    
    godoc 386 binary shrinks by approximately 12 kilobyte.
    
    amd64:
    name         old time/op  new time/op  delta
    MakeSlice-2  29.8ns ± 1%  29.8ns ± 1%   ~     (p=1.000 n=24+24)
    
    386:
    name         old time/op  new time/op  delta
    MakeSlice-2  52.3ns ± 0%  45.9ns ± 0%  -12.17%  (p=0.000 n=25+22)
    
    Fixes  #15357
    
    Change-Id: Icb8701bb63c5a83877d26c8a4b78e782ba76de7c
    Reviewed-on: https://go-review.googlesource.com/27851
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 595cebb055d327e52bd447985b53dcca869cea1d
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Aug 29 10:37:13 2016 -0700

    cmd/compile: remove ignored bool from exported ODCL nodes
    
    This shortens the export format by 1 byte for each exported ODCL
    node in inlined function bodies.
    
    Maintain backward compatibility by updating format version and
    continue to accept older format.
    
    Change-Id: I549bb3ade90bc0f146decf8016d5c9c3f14eb293
    Reviewed-on: https://go-review.googlesource.com/27999
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 428d79bd38db30405fe2b5d264d856e52030c338
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Sun Aug 28 23:11:00 2016 -0700

    os: add example for OpenFile
    
    New beginners are not familiar with open(2)-style masking of the
    flags. Add an example demonstrates the flag or'ing.
    
    Change-Id: Ifa8009c55173ba0dc6642c1d3b3124c766b1ebbb
    Reviewed-on: https://go-review.googlesource.com/27996
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 650c2c173dc8d929d1955045df4fe77c85d4037b
Author: Carlos C <uldericofilho@gmail.com>
Date:   Tue Aug 9 01:24:22 2016 +0200

    mime/quotedprintable: add examples
    
    Partially addresses #16360
    
    Change-Id: Ic098d2c465742fb50aee325a3fd0e1d50b7b3c99
    Reviewed-on: https://go-review.googlesource.com/25575
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 967fa427fde2f7a22adc04399d0de3090d34f883
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue May 31 06:58:33 2016 -0700

    database/sql: don't hang if the driver Exec method panics
    
    Fixes #13677.
    Fixes #15901.
    
    Change-Id: Idffb82cdcba4985954d061bdb021217f47ff4984
    Reviewed-on: https://go-review.googlesource.com/23576
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e6a96a6277da312d71c76ecb6f4a9a99ba88c389
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 28 09:05:33 2016 -0700

    doc: add cmd/go pkgdir changes to go1.8.txt
    
    Change-Id: I451ca386781b50ab47b313e07a610867fa14aeaf
    Reviewed-on: https://go-review.googlesource.com/27990
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 26124030a051b6b05a29349fdc4b92880e18c8a8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 28 09:03:08 2016 -0700

    androidtest.bash: use go list to get pkg dir
    
    This will be more robust in the faces of
    future changes to the pkg dir layout.
    
    Change-Id: Iaf078093f02ef3a10884a19c25e2068cbbf5f36a
    Reviewed-on: https://go-review.googlesource.com/27929
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 6dd0b2d70292fc57e5664e2806f1d46cd621f531
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 28 08:56:06 2016 -0700

    androidtest.bash: fix pkg dir
    
    CL 24930 altered the default InstallSuffix
    for mobile platforms.
    Update androidtest.bash to reflect this.
    This reverts CL 16151.
    
    A subsequent CL will make this more robust,
    but it will take more discussion and review.
    In the meantime, this fixes the build.
    
    Change-Id: Ia19ca2c9bab7b79c9cf24beeca64ecddaa60289c
    Reviewed-on: https://go-review.googlesource.com/27927
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Elias Naur <elias.naur@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 8dd069b52a87d482e219e16e92390b1d415db486
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 28 08:53:20 2016 -0700

    androidtest.bash: require GOARCH
    
    When finding the pkg dir, androidtest.bash assumes
    that GOARCH is set. Require it up front.
    
    Change-Id: I143f7b59ad9d98b9c3cfb53c1d65c2d33a6acc12
    Reviewed-on: https://go-review.googlesource.com/27926
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Elias Naur <elias.naur@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 7c04633e0c4babc8da4c8a582aee4f1754c9db12
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Aug 28 17:04:46 2016 -0700

    all: fix obsolete inferno-os links
    
    Fixes #16911.
    
    Fix obsolete inferno-os links, since code.google.com shutdown.
    This CL points to the right files by replacing
    http://code.google.com/p/inferno-os/source/browse
    with
    https://bitbucket.org/inferno-os/inferno-os/src/default
    
    To implement the change I wrote and ran this script in the root:
    $ grep -Rn 'http://code.google.com/p/inferno-os/source/browse' * \
    | cut -d":" -f1 | while read F;do perl -pi -e \
    's/http:\/\/code.google.com\/p\/inferno-os\/source\/browse/https:\/\/bitbucket.org\/inferno-os\/inferno-os\/src\/default/g'
    $F;done
    
    I excluded any cmd/vendor changes from the commit.
    
    Change-Id: Iaaf828ac8f6fc949019fd01832989d00b29b6749
    Reviewed-on: https://go-review.googlesource.com/27994
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9ac67f56f776ccf1708d25ce3f4f02ac771551de
Author: Giovanni Bajo <rasky@develer.com>
Date:   Wed Aug 17 17:31:12 2016 +0200

    doc: improve issue template
    
    The previous template used an ordered list, but the formatting always
    breaks when users paste quoted snippets of code or command outputs.
    It is also harder to visually parse because items in ordered lists
    are only indented but not highlighted in any way.
    
    Change-Id: I73c89e9f0465aef41093f5c54d11bb0d12ff8c8d
    Reviewed-on: https://go-review.googlesource.com/27252
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f679d74e638ac7514a6b6b32f5d28a9980c22c3
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sat Aug 27 19:08:14 2016 -0400

    cmd/compile: fix load int32 to FP register on big-endian MIPS64
    
    Fixes #16903.
    
    Change-Id: I1f6fcd57e14b2b62e208b7bb3adccd5fd7f8bdbc
    Reviewed-on: https://go-review.googlesource.com/27933
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 8c15a1725147692e1106f2e32fae657e1b7f27aa
Author: Radu Berinde <radu@cockroachlabs.com>
Date:   Sun Aug 28 11:47:14 2016 -0400

    hash/crc32: fix nil Castagnoli table problem
    
    When SSE is available, we don't need the Table. However, it is
    returned as a handle by MakeTable. Fix this to always generate
    the table.
    
    Further cleanup is discussed in #16909.
    
    Change-Id: Ic05400d68c6b5d25073ebd962000451746137afc
    Reviewed-on: https://go-review.googlesource.com/27934
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0c6c3d1de7bfe40d3589109bf2adb1726d6caca8
Author: Keith Randall <khr@golang.org>
Date:   Sun Aug 28 11:17:37 2016 -0700

    cmd/compile: fix noopt build
    
    Atomic add rules were depending on CSE to combine duplicate atomic ops.
    With -N, CSE doesn't run.
    
    Redo the rules for atomic add so there's only one atomic op.
    Introduce an add-to-first-part-of-tuple pseudo-ops to make the atomic add result correct.
    
    Change-Id: Ib132247051abe5f80fefad6c197db8df8ee06427
    Reviewed-on: https://go-review.googlesource.com/27991
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 84aac622a40d4707513b02cf056977d852b38e18
Author: Keith Randall <khr@golang.org>
Date:   Thu Aug 25 16:02:57 2016 -0700

    cmd/compile: intrinsify the rest of runtime/internal/atomic for amd64
    
    Atomic swap, add/and/or, compare and swap.
    
    Also works on amd64p32.
    
    Change-Id: Idf2d8f3e1255f71deba759e6e75e293afe4ab2ba
    Reviewed-on: https://go-review.googlesource.com/27813
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit e2e2d10b9afe0cf4845aede06c6dd083a1d281c9
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri Aug 26 16:57:00 2016 +1000

    time: always use $GOROOT/lib/time/zoneinfo.zip with genzabbrs.go
    
    genzabbrs.go uses whatever zoneinfo database available on the system.
    This makes genzabbrs.go output change from system to system. Adjust
    go:generate line to always use $GOROOT/lib/time/zoneinfo.zip, so it
    does not matter who runs the command.
    
    Also move go:generate line into zoneinfo.go, so it can be run
    on Unix (see #16368 for details).
    
    Fixes #15802.
    
    Change-Id: I8ae4818aaf40795364e180d7bb4326ad7c07c370
    Reviewed-on: https://go-review.googlesource.com/27832
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 90c3cf4b52cc9373a96009da0d013019c1f5bcd8
Author: Radu Berinde <radu@cockroachlabs.com>
Date:   Sat Aug 27 13:17:30 2016 -0400

    hash/crc32: improve the AMD64 implementation using SSE4.2
    
    The algorithm is explained in the comments. The improvement in
    throughput is about 1.4x for buffers between 500b-4Kb and 2.5x-2.6x
    for larger buffers.
    
    Additionally, we no longer initialize the software tables if SSE4.2 is
    available.
    
    Adding a test for the SSE implementation (restricted to amd64 and
    amd64p32).
    
    Benchmarks on a Haswell i5-4670 @ 3.4 GHz:
    
    name                           old time/op    new time/op     delta
    CastagnoliCrc15B-4               21.9ns ± 1%     22.9ns ± 0%    +4.45%
    CastagnoliCrc15BMisaligned-4     22.6ns ± 0%     23.4ns ± 0%    +3.43%
    CastagnoliCrc40B-4               23.3ns ± 0%     23.9ns ± 0%    +2.58%
    CastagnoliCrc40BMisaligned-4     25.4ns ± 0%     26.1ns ± 0%    +2.86%
    CastagnoliCrc512-4               72.6ns ± 0%     52.8ns ± 0%   -27.33%
    CastagnoliCrc512Misaligned-4     76.3ns ± 1%     56.3ns ± 0%   -26.18%
    CastagnoliCrc1KB-4                128ns ± 1%       89ns ± 0%   -30.04%
    CastagnoliCrc1KBMisaligned-4      130ns ± 0%       88ns ± 0%   -32.65%
    CastagnoliCrc4KB-4                461ns ± 0%      187ns ± 0%   -59.40%
    CastagnoliCrc4KBMisaligned-4      463ns ± 0%      191ns ± 0%   -58.77%
    CastagnoliCrc32KB-4              3.58µs ± 0%     1.35µs ± 0%   -62.22%
    CastagnoliCrc32KBMisaligned-4    3.58µs ± 0%     1.36µs ± 0%   -61.84%
    
    name                           old speed      new speed       delta
    CastagnoliCrc15B-4              684MB/s ± 1%    655MB/s ± 0%    -4.32%
    CastagnoliCrc15BMisaligned-4    663MB/s ± 0%    641MB/s ± 0%    -3.32%
    CastagnoliCrc40B-4             1.72GB/s ± 0%   1.67GB/s ± 0%    -2.69%
    CastagnoliCrc40BMisaligned-4   1.58GB/s ± 0%   1.53GB/s ± 0%    -2.82%
    CastagnoliCrc512-4             7.05GB/s ± 0%   9.70GB/s ± 0%   +37.59%
    CastagnoliCrc512Misaligned-4   6.71GB/s ± 1%   9.09GB/s ± 0%   +35.43%
    CastagnoliCrc1KB-4             7.98GB/s ± 1%  11.46GB/s ± 0%   +43.55%
    CastagnoliCrc1KBMisaligned-4   7.86GB/s ± 0%  11.70GB/s ± 0%   +48.75%
    CastagnoliCrc4KB-4             8.87GB/s ± 0%  21.80GB/s ± 0%  +145.69%
    CastagnoliCrc4KBMisaligned-4   8.83GB/s ± 0%  21.39GB/s ± 0%  +142.25%
    CastagnoliCrc32KB-4            9.15GB/s ± 0%  24.22GB/s ± 0%  +164.62%
    CastagnoliCrc32KBMisaligned-4  9.16GB/s ± 0%  24.00GB/s ± 0%  +161.94%
    
    Fixes #16107.
    
    Change-Id: Ibe50ea76574674ce0571ef31c31015e0ed66b907
    Reviewed-on: https://go-review.googlesource.com/27931
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 320bd562cbb24a01beb02706c42d06a290160645
Author: Joonas Kuorilehto <joneskoo@derbian.fi>
Date:   Sat Aug 20 14:41:42 2016 +0300

    crypto/tls: add KeyLogWriter for debugging
    
    Add support for writing TLS client random and master secret
    in NSS key log format.
    
    https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/Key_Log_Format
    
    Normally this is enabled by a developer debugging TLS based
    applications, especially HTTP/2, by setting the KeyLogWriter
    to an open file. The keys negotiated in handshake are then
    logged and can be used to decrypt TLS sessions e.g. in Wireshark.
    
    Applications may choose to add support similar to NSS where this
    is enabled by environment variable, but no such mechanism is
    built in to Go. Instead each application must explicitly enable.
    
    Fixes #13057.
    
    Change-Id: If6edd2d58999903e8390b1674ba4257ecc747ae1
    Reviewed-on: https://go-review.googlesource.com/27434
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3427f16642a1c207db4a4c3cce912dfdce2ac9f5
Author: Keith Randall <khr@golang.org>
Date:   Sat Aug 27 16:48:22 2016 +0000

    Revert "hash/crc32: improve the AMD64 implementation using SSE4.2"
    
    This reverts commit 54d7de7dd62bab764125c48fd159bb938da078e1.
    
    It was breaking non-amd64 builds.
    
    Change-Id: I22650e922498eeeba3d4fa08bb4ea40a210c8f97
    Reviewed-on: https://go-review.googlesource.com/27925
    Reviewed-by: Keith Randall <khr@golang.org>

commit 54d7de7dd62bab764125c48fd159bb938da078e1
Author: Radu Berinde <radu@cockroachlabs.com>
Date:   Tue Aug 23 17:33:21 2016 -0400

    hash/crc32: improve the AMD64 implementation using SSE4.2
    
    The algorithm is explained in the comments. The improvement in
    throughput is about 1.4x for buffers between 500b-4Kb and 2.5x-2.6x
    for larger buffers.
    
    Additionally, we no longer initialize the software tables if SSE4.2 is
    available.
    
    Benchmarks on a Haswell i5-4670 @ 3.4 GHz:
    
    name                           old time/op    new time/op     delta
    CastagnoliCrc15B-4               21.9ns ± 1%     22.9ns ± 0%    +4.45%
    CastagnoliCrc15BMisaligned-4     22.6ns ± 0%     23.4ns ± 0%    +3.43%
    CastagnoliCrc40B-4               23.3ns ± 0%     23.9ns ± 0%    +2.58%
    CastagnoliCrc40BMisaligned-4     25.4ns ± 0%     26.1ns ± 0%    +2.86%
    CastagnoliCrc512-4               72.6ns ± 0%     52.8ns ± 0%   -27.33%
    CastagnoliCrc512Misaligned-4     76.3ns ± 1%     56.3ns ± 0%   -26.18%
    CastagnoliCrc1KB-4                128ns ± 1%       89ns ± 0%   -30.04%
    CastagnoliCrc1KBMisaligned-4      130ns ± 0%       88ns ± 0%   -32.65%
    CastagnoliCrc4KB-4                461ns ± 0%      187ns ± 0%   -59.40%
    CastagnoliCrc4KBMisaligned-4      463ns ± 0%      191ns ± 0%   -58.77%
    CastagnoliCrc32KB-4              3.58µs ± 0%     1.35µs ± 0%   -62.22%
    CastagnoliCrc32KBMisaligned-4    3.58µs ± 0%     1.36µs ± 0%   -61.84%
    
    name                           old speed      new speed       delta
    CastagnoliCrc15B-4              684MB/s ± 1%    655MB/s ± 0%    -4.32%
    CastagnoliCrc15BMisaligned-4    663MB/s ± 0%    641MB/s ± 0%    -3.32%
    CastagnoliCrc40B-4             1.72GB/s ± 0%   1.67GB/s ± 0%    -2.69%
    CastagnoliCrc40BMisaligned-4   1.58GB/s ± 0%   1.53GB/s ± 0%    -2.82%
    CastagnoliCrc512-4             7.05GB/s ± 0%   9.70GB/s ± 0%   +37.59%
    CastagnoliCrc512Misaligned-4   6.71GB/s ± 1%   9.09GB/s ± 0%   +35.43%
    CastagnoliCrc1KB-4             7.98GB/s ± 1%  11.46GB/s ± 0%   +43.55%
    CastagnoliCrc1KBMisaligned-4   7.86GB/s ± 0%  11.70GB/s ± 0%   +48.75%
    CastagnoliCrc4KB-4             8.87GB/s ± 0%  21.80GB/s ± 0%  +145.69%
    CastagnoliCrc4KBMisaligned-4   8.83GB/s ± 0%  21.39GB/s ± 0%  +142.25%
    CastagnoliCrc32KB-4            9.15GB/s ± 0%  24.22GB/s ± 0%  +164.62%
    CastagnoliCrc32KBMisaligned-4  9.16GB/s ± 0%  24.00GB/s ± 0%  +161.94%
    
    Fixes #16107.
    
    Change-Id: I8fa827ec03f708ba27ee71c833f7544ad9dc5bc3
    Reviewed-on: https://go-review.googlesource.com/24471
    Reviewed-by: Keith Randall <khr@golang.org>

commit 0d23c28526223f5239581e845e0682f704724525
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Aug 26 16:38:06 2016 -0700

    cmd/compile: make dumpdepth a global again
    
    Fixes indenting in debug output like -W.
    
    Change-Id: Ia16b0bad47428cee71fe036c297731e841ec9ca0
    Reviewed-on: https://go-review.googlesource.com/27924
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 57331b79da3920ba579a07a20827ee4499cf1c7e
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Aug 26 23:39:50 2016 +0000

    Revert "cmd/compile: use printer in typefmt, Tconv"
    
    This reverts commit 8fb0893307b0d4ab4a115a6151ee8d344d3c1d74.
    
    Broke go/ast tests.
    
    Change-Id: I5c314cb29731d4bc3a0873af8ebfe376f5faba8a
    Reviewed-on: https://go-review.googlesource.com/27923
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8fb0893307b0d4ab4a115a6151ee8d344d3c1d74
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 24 23:53:16 2016 -0700

    cmd/compile: use printer in typefmt, Tconv
    
    Change-Id: I9e99289070d63a2509aec1e91b9dd7437a08af5e
    Reviewed-on: https://go-review.googlesource.com/27921
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 71d2b42bf6c7ccd6a92ad10e8d0ac9272e312d1a
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 24 23:44:55 2016 -0700

    cmd/compile: use printer in exprfmt
    
    Change-Id: I7376c3bb55529a575e74985c2d7f0cf07c8996e7
    Reviewed-on: https://go-review.googlesource.com/27920
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a46ea907053d6ad116e49f76f58b69633c6039d3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 14 14:07:18 2016 -0700

    go/build: don't alter InstallSuffix for default compile options
    
    Fixes #16378.
    
    Change-Id: I99a064f1afec78fb63cb3719061d20be0f21d45d
    Reviewed-on: https://go-review.googlesource.com/24930
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 87061054e709f5408db4bc1b9ac8e5685883d9fa
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 24 23:26:07 2016 -0700

    cmd/compile: use printer in stmtfmt, hconv
    
    Change-Id: If11d328101a82de5ead04159d3085e3d59869283
    Reviewed-on: https://go-review.googlesource.com/27919
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 62a296cd5482312cc656a4ead421acef00538cc1
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 24 23:02:08 2016 -0700

    cmd/compile: use printer in sconv, symfmt
    
    Change-Id: Iec33775ff5a786f6c52024d592f634231acf91c0
    Reviewed-on: https://go-review.googlesource.com/27918
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 73be5d82d443def1f721474bff9819155eb5bdf0
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 24 22:15:07 2016 -0700

    cmd/compile: use printer in vconv
    
    Change-Id: Ib30ed686448c4c0a5777cdf1d505ea06eb8b2a47
    Reviewed-on: https://go-review.googlesource.com/27917
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit dc2a0d59a2b9b5dd87065e6227ca112839cd389b
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 24 21:47:58 2016 -0700

    cmd/compile: introduce printer for internal formatting; use in jconv
    
    Starting point for uniform use of printer in fmt.go.
    It provides a hook to store additional state (and
    remove global variables) and should also be more
    efficient and cleaner than the mix of string concatenation
    and bytes.Buffer use we have now.
    
    Change-Id: I72de14b01850cca32d407a1cb16c894179ea8848
    Reviewed-on: https://go-review.googlesource.com/27916
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit c85b77c22b78c801d18a456a8f242c007a520217
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Aug 26 13:06:59 2016 -0700

    cmd/compile: reintroduce support for version 0 export format
    
    The Go1.7 export format didn't encode the field package for
    blank struct fields (#15514). Re-introduce support for that
    format so we can read it w/o error.
    
    For #16881.
    
    Change-Id: Ib131d41aac56dbf970aab15ae7e75ef3944b412d
    Reviewed-on: https://go-review.googlesource.com/27912
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit fba8f4deba81b8c5d903ec2f52dcb151f13a147b
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Aug 25 17:17:50 2016 -0700

    go/internal/gcimporter: fail gracefully on export format skew
    
    Port of changes made to compiler in
    https://go-review.googlesource.com/27814.
    
    Correctly handle export format version 0 (we only do this
    in x/tools/gcimporter15 at the moment - this is a backport
    of that code for struct fields).
    
    Added tests for version handling and detection of corrupted
    export data.
    
    Fixes #16881.
    
    Change-Id: I246553c689c89ef5c7fedd1e43717504c2838804
    Reviewed-on: https://go-review.googlesource.com/27816
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit bee42067649390557c772c561e02d46b3f066fe3
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Aug 25 22:19:16 2016 -0400

    runtime: have typelinksinit work forwards
    
    For reasons I have forgotten typelinksinit processed modules backwards.
    (I suspect this was an attempt to process types in the executing
    binary first.)
    
    It does not appear to be necessary, and it is not the order we want
    when a module can be loaded at an arbitrary point during a program's
    execution as a plugin. So reverse the order.
    
    While here, make it safe to call typelinksinit multiple times.
    
    Change-Id: Ie10587c55c8e5efa0542981efb6eb3c12dd59e8c
    Reviewed-on: https://go-review.googlesource.com/27822
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8f3c8a33fad917abb45ef98b3a1cd34fe9715370
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Aug 25 21:06:10 2016 -0400

    cmd/link: make DynlinkingGo a method
    
    This will allow it to depend on whether plugin.Open is a symbol to be
    linked in.
    
    Change-Id: Ie9aa4216f2510fe8b10bc4665c8b19622b7122ea
    Reviewed-on: https://go-review.googlesource.com/27819
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7f27f1dfdd81c978d4868917d7622e09b288ecb0
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Aug 25 15:52:45 2016 -0400

    cmd/compile: add MIPS64 optimizations, SSA on by default
    
    Add the following optimizations:
    - fold constants
    - fold address into load/store
    - simplify extensions and conditional branches
    - remove nil checks
    
    Turn on SSA on MIPS64 by default, and toggle the tests.
    
    Fixes #16359.
    
    Change-Id: I7f1e38c2509e22e42cd024e712990ebbe47176bd
    Reviewed-on: https://go-review.googlesource.com/27870
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9f7ea616742f8d58ecc140afcb0fa53bcb84fe9b
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Aug 26 11:39:47 2016 -0400

    math: optimize Ceil, Floor and Trunc on s390x
    
    Use the FIDBR instruction to round floating-point numbers to integers.
    
    name   old time/op  new time/op  delta
    Ceil   14.1ns ± 0%   3.0ns ± 0%  -78.89%  (p=0.000 n=10+10)
    Floor  6.42ns ± 0%  3.03ns ± 0%  -52.80%  (p=0.000 n=10+10)
    Trunc  6.67ns ± 0%  3.03ns ± 0%  -54.57%   (p=0.000 n=10+9)
    
    Change-Id: I3b416f6d0bccaaa9b547de86356471365862399c
    Reviewed-on: https://go-review.googlesource.com/27827
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d2dd0dfda813deb27415962656e7a6496170cef3
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Aug 26 11:28:41 2016 -0400

    cmd/internal/obj/s390x: add FIDBR and FIEBR instructions
    
    FIDBR and FIEBR can be used for floating-point to integer rounding.
    The relevant functions (Ceil, Floor and Trunc) will be updated
    in a future CL.
    
    Change-Id: I5952d67ab29d5ef8923ff1143e17a8d30169d692
    Reviewed-on: https://go-review.googlesource.com/27826
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 266b349b2d28bf69f778320adb7e8ecc6bf848cd
Author: Michael Munday <munday@ca.ibm.com>
Date:   Fri Aug 26 10:33:34 2016 -0400

    cmd/internal/obj/s390x: add atomic operation instructions
    
    Adds the following s390x instructions from the interlocked access
    facility:
    
     * LAA(G)  - load and add
     * LAAL(G) - load and add logical
     * LAN(G)  - load and and
     * LAX(G)  - load and exclusive or
     * LAO(G)  - load and or
    
    These instructions can be used for atomic arithmetic/logical
    operations. The atomic packages will be updated in future CLs.
    
    Change-Id: Idc850ac6749b3e778fda3da66bcd864f6b1df375
    Reviewed-on: https://go-review.googlesource.com/27871
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 14efaa0dc3d3ff5a3919c27297297ef0cd5bb625
Author: David Crawshaw <crawshaw@golang.org>
Date:   Thu Aug 25 14:31:50 2016 -0400

    cmd/compile: qualify unexported fields of unnamed types
    
    The compiler was canonicalizing unnamed types of the form
    
            struct { i int }
    
    across packages, even though an unexported field i should not be
    accessible from other packages.
    
    The fix requires both qualifying the field name in the string used by
    the compiler to distinguish the type, and ensuring the struct's pkgpath
    is set in the rtype version of the data when the type being written is
    not part of the localpkg.
    
    Fixes #16616
    
    Change-Id: Ibab160b8b5936dfa47b17dbfd48964a65586785b
    Reviewed-on: https://go-review.googlesource.com/27791
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 3e59b20d41c6dc4ed1e528279da3017555df2ceb
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Fri Aug 26 17:44:30 2016 +0900

    os: fix build error on plan9
    
    https://go-review.googlesource.com/#/c/27580 added the test.
    However the test use syscall.ELOOP which is not defined on plan9.
    Move test code from "os_test.go" to "os_windows_test.go" to prevent
    build error.
    
    Change-Id: Ie7f05bfb9ab229e06a8e82a4b3b8a7ca82d4663b
    Reviewed-on: https://go-review.googlesource.com/27833
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David du Colombier <0intro@gmail.com>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit a656390b6986c3d559873b64683aa3454a151115
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Aug 25 21:01:17 2016 -0700

    spec: clarify text on init functions
    
    For #16874.
    
    Change-Id: I2e13f582297606e506d805755a6cfc1f3d4306a2
    Reviewed-on: https://go-review.googlesource.com/27817
    Reviewed-by: Rob Pike <r@golang.org>

commit 2eb46e8c57c4dab0197ca82d9899fa1356500fc0
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Thu Aug 18 16:10:28 2016 +0900

    os: prevent infinite symlink loop of Stat on Windows
    
    The Windows version of Stat calls Readlink iteratively until
    reaching a non-symlink file.
    If the given file is a circular symlink, It never stops.
    This CL defines the maximum number of symlink loop count.
    If the loop count will exceed that number, Stat will return error.
    
    Fixes #16538
    
    Change-Id: Ia9f3f2259a8d32801461c5041cc24a34f9f81009
    Reviewed-on: https://go-review.googlesource.com/27580
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 5a6f973565ccb54c77e03cbb4844fd0ea392d3fe
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Aug 25 16:53:10 2016 -0700

    cmd/compile: fail gracefully on export format skew
    
    Import errors due to unexpected format are virtually
    always due to version skew. Don't panic but report a
    good error message (incl. hint that the imported package
    needs to be reinstalled) if not in debugFormat mode.
    
    Recognize export data format version and store it so
    it can be used to automatically handle minor version
    differences. We did this before, but not very well.
    
    No export data format changes.
    
    Manually tested with corrupted export data.
    
    For #16881.
    
    Change-Id: I53ba98ef747b1c81033a914bb61ee52991f35a90
    Reviewed-on: https://go-review.googlesource.com/27814
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 7c3fc4b8e48f061e242e8d04803c7bb249ba6995
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Aug 26 12:15:00 2016 +1200

    cmd/link: hide funcsym symbols
    
    As far as I can tell, this check has been
    non-functional since it was introduced.
    
    This cuts 57k off cmd/go and 70k off cmd/compile.
    
    Based on golang.org/cl/24710 by Josh Bleecher Snyder.
    
    Change-Id: I1162a066971df1a067b50afa1cfa0819a6913574
    Reviewed-on: https://go-review.googlesource.com/27830
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit e022dcd35f3047134c661ef27cafdf1d845df447
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Aug 25 17:19:28 2016 -0700

    syscall: fix plan9/386 RawSyscall6
    
    Fixes the build.
    
    Change-Id: I34bcae08cfb43257aeb9086336966ef85f15fe1d
    Reviewed-on: https://go-review.googlesource.com/27815
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit f9acd3918e5eb8819f8f5e9697af55f395a1074d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Aug 25 13:42:49 2016 -0700

    net/http, cmd/compile: minor vet fixes
    
    Updates #11041
    
    Change-Id: Ia0151723e3bc0d163cc687a02bfc5e0285d95ffa
    Reviewed-on: https://go-review.googlesource.com/27810
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 320ddcf8344beb1c322f3a7f0a251eea5e442a10
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 23 16:49:28 2016 -0700

    cmd/compile: inline atomics from runtime/internal/atomic on amd64
    
    Inline atomic reads and writes on amd64.  There's no reason
    to pay the overhead of a call for these.
    
    To keep atomic loads from being reordered, we make them
    return a <value,memory> tuple.
    
    Change the meaning of resultInArg0 for tuple-generating ops
    to mean the first part of the result tuple, not the second.
    This means we can always put the store part of the tuple last,
    matching how arguments are laid out.  This requires reordering
    the outputs of add32carry and sub32carry and their descendents
    in various architectures.
    
    benchmark                    old ns/op     new ns/op     delta
    BenchmarkAtomicLoad64-8      2.09          0.26          -87.56%
    BenchmarkAtomicStore64-8     7.54          5.72          -24.14%
    
    TBD (in a different CL): Cas, Or8, ...
    
    Change-Id: I713ea88e7da3026c44ea5bdb56ed094b20bc5207
    Reviewed-on: https://go-review.googlesource.com/27641
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 71ab9fa312f8266379dbb358b9ee9303cde7bd6b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 11 16:05:57 2016 -0700

    all: fix assembly vet issues
    
    Add missing function prototypes.
    Fix function prototypes.
    Use FP references instead of SP references.
    Fix variable names.
    Update comments.
    Clean up whitespace. (Not for vet.)
    
    All fairly minor fixes to make vet happy.
    
    Updates #11041
    
    Change-Id: Ifab2cdf235ff61cdc226ab1d84b8467b5ac9446c
    Reviewed-on: https://go-review.googlesource.com/27713
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6af7639ae147689cbabd06287bf4ff15a4dfd896
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Sat Aug 20 01:46:32 2016 -0700

    archive/tar: isolate regular and sparse file handling as methods
    
    Factor out the regular file handling logic into handleRegularFile
    from nextHeader. We will need to reuse this logic when fixing #15573
    in a future CL.
    
    Factor out the sparse file handling logic into handleSparseFile.
    Currently this logic is split between nextHeader (for GNU sparse
    files) and Next (for PAX sparse files). Instead, we move this
    related code into a single method.
    
    There is no overall logic change. Thus, no unit tests.
    
    Updates #15573 #15564
    
    Change-Id: I3b8270d8b4e080e77d6c0df6a123d677c82cc466
    Reviewed-on: https://go-review.googlesource.com/27454
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit aa9b3d70142afb75a510c2c92b8c387fce10b2c9
Author: Sina Siadat <siadat@gmail.com>
Date:   Fri Jun 17 21:02:59 2016 +0430

    net/http: send Content-Range if no byte range overlaps
    
    RFC 7233, section 4.4 says:
    >>>
    For byte ranges, failing to overlap the current extent means that the
    first-byte-pos of all of the byte-range-spec values were greater than the
    current length of the selected representation.  When this status code is
    generated in response to a byte-range request, the sender SHOULD generate a
    Content-Range header field specifying the current length of the selected
    representation
    <<<
    
    Thus, we should send the Content-Range only if none of the ranges
    overlap.
    
    Fixes #15798.
    
    Change-Id: Ic9a3e1b3a8730398b4bdff877a8f2fd2e30149e3
    Reviewed-on: https://go-review.googlesource.com/24212
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0bc94a8864f0cb8392c094f58dd84d28a06f35d5
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Apr 15 15:49:00 2016 -0700

    cmd/compile: when inlining ==, don’t take the address of the values
    
    This CL reworks walkcompare for clarity and concision.
    It also makes one significant functional change.
    (The functional change is hard to separate cleanly
    from the cleanup, so I just did them together.)
    When inlining and unrolling an equality comparison
    for a small struct or array, compare the elements like:
    
    a[0] == b[0] && a[1] == b[1]
    
    rather than
    
    pa := &a
    pb := &b
    pa[0] == pb[0] && pa[1] == pb[1]
    
    The result is the same, but taking the address
    and working through the indirect
    forces the backends to generate less efficient code.
    
    This is only an improvement with the SSA backend.
    However, every port but s390x now has a working
    SSA backend, and switching to the SSA backend
    by default everywhere is a priority for Go 1.8.
    It thus seems reasonable to start to prioritize
    SSA performance over the old backend.
    
    Updates #15303
    
    
    Sample code:
    
    type T struct {
            a, b int8
    }
    
    func g(a T) bool {
            return a == T{1, 2}
    }
    
    
    SSA before:
    
    "".g t=1 size=80 args=0x10 locals=0x8
            0x0000 00000 (badeq.go:7)       TEXT    "".g(SB), $8-16
            0x0000 00000 (badeq.go:7)       SUBQ    $8, SP
            0x0004 00004 (badeq.go:7)       FUNCDATA        $0, gclocals·23e8278e2b69a3a75fa59b23c49ed6ad(SB)
            0x0004 00004 (badeq.go:7)       FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0004 00004 (badeq.go:8)       MOVBLZX "".a+16(FP), AX
            0x0009 00009 (badeq.go:8)       MOVB    AL, "".autotmp_0+6(SP)
            0x000d 00013 (badeq.go:8)       MOVBLZX "".a+17(FP), AX
            0x0012 00018 (badeq.go:8)       MOVB    AL, "".autotmp_0+7(SP)
            0x0016 00022 (badeq.go:8)       MOVB    $0, "".autotmp_1+4(SP)
            0x001b 00027 (badeq.go:8)       MOVB    $1, "".autotmp_1+4(SP)
            0x0020 00032 (badeq.go:8)       MOVB    $2, "".autotmp_1+5(SP)
            0x0025 00037 (badeq.go:8)       MOVBLZX "".autotmp_0+6(SP), AX
            0x002a 00042 (badeq.go:8)       MOVBLZX "".autotmp_1+4(SP), CX
            0x002f 00047 (badeq.go:8)       CMPB    AL, CL
            0x0031 00049 (badeq.go:8)       JNE     70
            0x0033 00051 (badeq.go:8)       MOVBLZX "".autotmp_0+7(SP), AX
            0x0038 00056 (badeq.go:8)       CMPB    AL, $2
            0x003a 00058 (badeq.go:8)       SETEQ   AL
            0x003d 00061 (badeq.go:8)       MOVB    AL, "".~r1+24(FP)
            0x0041 00065 (badeq.go:8)       ADDQ    $8, SP
            0x0045 00069 (badeq.go:8)       RET
            0x0046 00070 (badeq.go:8)       MOVB    $0, AL
            0x0048 00072 (badeq.go:8)       JMP     61
    
    SSA after:
    
    "".g t=1 size=32 args=0x10 locals=0x0
            0x0000 00000 (badeq.go:7)       TEXT    "".g(SB), $0-16
            0x0000 00000 (badeq.go:7)       NOP
            0x0000 00000 (badeq.go:7)       NOP
            0x0000 00000 (badeq.go:7)       FUNCDATA        $0, gclocals·23e8278e2b69a3a75fa59b23c49ed6ad(SB)
            0x0000 00000 (badeq.go:7)       FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0000 00000 (badeq.go:8)       MOVBLZX "".a+8(FP), AX
            0x0005 00005 (badeq.go:8)       CMPB    AL, $1
            0x0007 00007 (badeq.go:8)       JNE     25
            0x0009 00009 (badeq.go:8)       MOVBLZX "".a+9(FP), CX
            0x000e 00014 (badeq.go:8)       CMPB    CL, $2
            0x0011 00017 (badeq.go:8)       SETEQ   AL
            0x0014 00020 (badeq.go:8)       MOVB    AL, "".~r1+16(FP)
            0x0018 00024 (badeq.go:8)       RET
            0x0019 00025 (badeq.go:8)       MOVB    $0, AL
            0x001b 00027 (badeq.go:8)       JMP     20
    
    
    Change-Id: I120185d58012b7bbcdb1ec01225b5b08d0855d86
    Reviewed-on: https://go-review.googlesource.com/22277
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 157fc454eccb850a0a74029a49f8d947ff1a3762
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jul 6 17:11:29 2016 -0700

    path/filepath: don't return SkipDir at top
    
    If the walker function called on a top-level file returns SkipDir,
    then (before this change) Walk would return SkipDir, which the
    documentation implies will not happen.
    
    Fixes #16280.
    
    Change-Id: I37d63bdcef7af4b56e342b624cf0d4b42e65c297
    Reviewed-on: https://go-review.googlesource.com/24780
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 307de6540a5e6e5c2353c410240bb0f98bab1624
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 7 16:21:53 2016 -0700

    cmd/compile/internal/obj/x86: clean up "is leaf?" check
    
    Minor code cleanup. No functional changes.
    
    Change-Id: I2e631b43b122174302a182a1a286c0f873851ce6
    Reviewed-on: https://go-review.googlesource.com/24813
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 64e152910e5b8ef3cad5aa4d02070fdda645c378
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jun 16 10:49:32 2016 -0700

    cmd/internal/obj/x86: remove pointless NOPs
    
    They are no longer needed by stkcheck.
    
    Fixes #16057
    
    Change-Id: I57cb55de5b7a7a1d31a3da200a3a2d51576b68f5
    Reviewed-on: https://go-review.googlesource.com/26667
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ef694a01104168ef4e48579ebdd0d840445d7fd7
Author: Egon Elbre <egonelbre@gmail.com>
Date:   Thu Aug 11 09:05:54 2016 +0300

    website: recreate 16px and 32px favicon
    
    Recreated original favicon with svg. Note, the rasterizations are hand
    tweaked for crispness and straight export will not give the same results.
    
    Fixes #6938
    
    Change-Id: I9bf7b59028711361c29365b145932d90af419b69
    Reviewed-on: https://go-review.googlesource.com/26850
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit e71e1fe87e144ec10287a10b6a41a543762dabff
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Aug 22 12:25:23 2016 -0400

    cmd/compile: get MIPS64 SSA working
    
    - implement *, /, %, shifts, Zero, Move.
    - fix mistakes in comparison.
    - fix floating point rounding.
    - handle RetJmp in assembler (which was not handled, as a consequence
      Duff's device was disabled in the old backend.)
    
    all.bash now passes with SSA on.
    
    Updates #16359.
    
    Change-Id: Ia14eed0ed1176b5d800592080c8f53dded7fe73f
    Reviewed-on: https://go-review.googlesource.com/27592
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e90ae90b7a7de4079413b956472044a021bee7c6
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Aug 25 16:40:50 2016 +1000

    cmd/{asm,compile/internal}: delete dead code
    
    Delete unused fields, methods, vars, and funcs. Spotted by
    honnef.co/go/unused.
    
    Change-Id: I0e65484bbd916e59369c4018be46f120b469d610
    Reviewed-on: https://go-review.googlesource.com/27731
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit f29ec7d74a17249b3dfa721fc6ee1dcf3c77b5d5
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Aug 24 16:06:10 2016 -0700

    runtime: remove unused type sigtabtt
    
    The type sigtabtt was introduced by an automated tool in
    https://golang.org/cl/167550043. It was the Go version of the C type
    SigTab. However, when the C code using SigTab was converted to Go in
    https://golang.org/cl/168500044 it was rewritten to use a different Go
    type, sigTabT, rather than sigtabtt (the difference being that sigTabT
    uses string where sigtabtt uses *int8 from the C type char*). So this is
    just a dreg from the conversion that was never actually used.
    
    Change-Id: I2ec6eb4b25613bf5e5ad1dbba1f4b5ff20f80f55
    Reviewed-on: https://go-review.googlesource.com/27691
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 62861889863d3d61f546d01aa7bd9824df1b33df
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu May 26 18:08:24 2016 -0700

    cmd/compile: optimize integer "in range" expressions
    
    Use unsigned comparisons to reduce from
    two comparisons to one for integer "in range"
    checks, such as a <= b && b < c.
    We already do this for bounds checks.
    Extend it to user code.
    
    This is much easier to do in the front end than SSA.
    A back end optimization would be more powerful,
    but this is a good start.
    
    This reduces the power of some of SSA prove
    inferences (#16653), but those regressions appear
    to be rare and not worth holding this CL for.
    
    Fixes #15844.
    Fixes #16697.
    
    strconv benchmarks:
    
    name                          old time/op  new time/op   delta
    Atof64Decimal-8               41.4ns ± 3%   38.9ns ± 2%   -5.89%  (p=0.000 n=24+25)
    Atof64Float-8                 48.5ns ± 0%   46.8ns ± 3%   -3.64%  (p=0.000 n=20+23)
    Atof64FloatExp-8              97.7ns ± 4%   93.5ns ± 1%   -4.25%  (p=0.000 n=25+20)
    Atof64Big-8                    187ns ± 8%    162ns ± 2%  -13.54%  (p=0.000 n=24+22)
    Atof64RandomBits-8             250ns ± 6%    233ns ± 5%   -6.76%  (p=0.000 n=25+25)
    Atof64RandomFloats-8           160ns ± 0%    152ns ± 0%   -5.00%  (p=0.000 n=21+22)
    Atof32Decimal-8               41.1ns ± 1%   38.7ns ± 2%   -5.86%  (p=0.000 n=24+24)
    Atof32Float-8                 46.1ns ± 1%   43.5ns ± 3%   -5.63%  (p=0.000 n=21+24)
    Atof32FloatExp-8               101ns ± 4%    100ns ± 2%   -1.59%  (p=0.000 n=24+23)
    Atof32Random-8                 136ns ± 3%    133ns ± 3%   -2.83%  (p=0.000 n=22+22)
    Atoi-8                        33.8ns ± 3%   30.6ns ± 3%   -9.51%  (p=0.000 n=24+25)
    AtoiNeg-8                     31.6ns ± 3%   29.1ns ± 2%   -8.05%  (p=0.000 n=23+24)
    Atoi64-8                      48.6ns ± 1%   43.8ns ± 1%   -9.81%  (p=0.000 n=20+23)
    Atoi64Neg-8                   47.1ns ± 4%   42.0ns ± 2%  -10.83%  (p=0.000 n=25+25)
    FormatFloatDecimal-8           177ns ± 9%    178ns ± 6%     ~     (p=0.460 n=25+25)
    FormatFloat-8                  282ns ± 6%    282ns ± 3%     ~     (p=0.954 n=25+22)
    FormatFloatExp-8               259ns ± 7%    255ns ± 6%     ~     (p=0.089 n=25+24)
    FormatFloatNegExp-8            253ns ± 6%    254ns ± 6%     ~     (p=0.941 n=25+24)
    FormatFloatBig-8               340ns ± 6%    341ns ± 8%     ~     (p=0.600 n=22+25)
    AppendFloatDecimal-8          79.4ns ± 0%   80.6ns ± 6%     ~     (p=0.861 n=20+25)
    AppendFloat-8                  175ns ± 3%    174ns ± 0%     ~     (p=0.722 n=25+20)
    AppendFloatExp-8               142ns ± 4%    142ns ± 2%     ~     (p=0.948 n=25+24)
    AppendFloatNegExp-8            137ns ± 2%    138ns ± 2%   +0.70%  (p=0.001 n=24+25)
    AppendFloatBig-8               218ns ± 3%    218ns ± 4%     ~     (p=0.596 n=25+25)
    AppendFloatBinaryExp-8        80.0ns ± 4%   78.0ns ± 1%   -2.43%  (p=0.000 n=24+21)
    AppendFloat32Integer-8        82.3ns ± 3%   79.3ns ± 4%   -3.69%  (p=0.000 n=24+25)
    AppendFloat32ExactFraction-8   143ns ± 2%    143ns ± 0%     ~     (p=0.177 n=23+19)
    AppendFloat32Point-8           175ns ± 3%    175ns ± 3%     ~     (p=0.062 n=24+25)
    AppendFloat32Exp-8             139ns ± 2%    137ns ± 4%   -1.05%  (p=0.001 n=24+24)
    AppendFloat32NegExp-8          134ns ± 0%    137ns ± 4%   +2.06%  (p=0.000 n=22+25)
    AppendFloat64Fixed1-8         97.8ns ± 0%   98.6ns ± 3%     ~     (p=0.711 n=20+25)
    AppendFloat64Fixed2-8          110ns ± 3%    110ns ± 5%   -0.45%  (p=0.037 n=24+24)
    AppendFloat64Fixed3-8          102ns ± 3%    102ns ± 3%     ~     (p=0.684 n=24+24)
    AppendFloat64Fixed4-8          112ns ± 3%    110ns ± 0%   -1.43%  (p=0.000 n=25+18)
    FormatInt-8                   3.18µs ± 4%   3.10µs ± 6%   -2.54%  (p=0.001 n=24+25)
    AppendInt-8                   1.81µs ± 5%   1.80µs ± 5%     ~     (p=0.648 n=25+25)
    FormatUint-8                   812ns ± 6%    816ns ± 6%     ~     (p=0.777 n=25+25)
    AppendUint-8                   536ns ± 4%    538ns ± 3%     ~     (p=0.798 n=20+22)
    Quote-8                        605ns ± 6%    602ns ± 9%     ~     (p=0.573 n=25+25)
    QuoteRune-8                   99.5ns ± 8%  100.2ns ± 7%     ~     (p=0.432 n=25+25)
    AppendQuote-8                  361ns ± 3%    363ns ± 4%     ~     (p=0.085 n=25+25)
    AppendQuoteRune-8             23.3ns ± 3%   22.4ns ± 2%   -3.79%  (p=0.000 n=25+24)
    UnquoteEasy-8                  146ns ± 4%    145ns ± 5%     ~     (p=0.112 n=24+24)
    UnquoteHard-8                  804ns ± 6%    771ns ± 6%   -4.10%  (p=0.000 n=25+24)
    
    Change-Id: Ibd384e46e90f1cfa40503c8c6352a54c65b72980
    Reviewed-on: https://go-review.googlesource.com/27652
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d61c07ffd81b804cbd746ed1dc1e0d9c8b7fca49
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Aug 25 12:32:42 2016 +1000

    cmd/link/internal, cmd/internal/obj: introduce ctxt.Logf
    
    Replace the various calls to Fprintf(ctxt.Bso, ...) with a helper,
    ctxt.Logf. This also addresses the various inconsistent flushing of
    ctxt.Bso.
    
    Because we have two Link structures, add Link.Logf in both places.
    
    Change-Id: I23093f9b9b3bf33089a0ffd7f815f92dcd1a1fa1
    Reviewed-on: https://go-review.googlesource.com/27730
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 5f94ff4c8702e05bdee32b4a5dc6f8c736adab38
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Aug 24 20:27:38 2016 +1000

    cmd/link/internal/ld: move ld.Cpos to coutbuf.Offset
    
    This change moves the ld.Cpos function to a method on coutbuf. This is
    part of a larger change that makes ld.outbuf look more like a bio.Buf in
    an effort to eventually replace the former with the latter.
    
    Change-Id: I506f7131935a2aa903fa302a0fab0c5be50220fd
    Reviewed-on: https://go-review.googlesource.com/27578
    Run-TryBot: Dave Cheney <dave@cheney.net>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 61d5daea0aca4fcb14f0090685327132a8e1a7f2
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Aug 24 17:44:27 2016 -0400

    runtime: use clock_gettime for time.now() on s390x
    
    This should improve the precision of time.now() from microseconds
    to nanoseconds.
    
    Also, modify runtime.nanotime to keep it consistent with cleanup
    done to time.now.
    
    Updates #11222 for s390x.
    
    Change-Id: I27864115ea1fee7299360d9003cd3a8355f624d3
    Reviewed-on: https://go-review.googlesource.com/27710
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 3167ff7ca91b56f3d06c5cda371b2a7c2741cd35
Author: Dave Cheney <dave@cheney.net>
Date:   Wed Aug 24 20:44:09 2016 +1000

    cmd/internal/*: only call ctx.Bso.Flush when something has been written
    
    In many places where ctx.Bso.Flush is used as the target for some debug
    logging, ctx.Bso.Flush is called unconditionally. In the majority of
    cases where debug logging is not enabled, this means Flush is called
    many times when there is nothing to be flushed (it will be called anyway
    when ctx.Bso is eventually closed), sometimes in a loop.
    
    Avoid this by moving the ctx.Bso.Flush call into the same condition
    block as the debug print. This pattern was previously applied
    sporadically.
    
    Change-Id: I0444cb235cc8b9bac51a59b2e44e59872db2be06
    Reviewed-on: https://go-review.googlesource.com/27579
    Run-TryBot: Dave Cheney <dave@cheney.net>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 1472221a774c2a763dbe545b1686f4e8dc23613f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Aug 17 10:16:55 2016 -0700

    cmd/go: refactor cgo logic
    
    Extract "cgo -dynimport" and "ld -r" logic into separate helper
    methods to make (*builder).cgo somewhat more manageable.
    
    Fixes #16650.
    
    Change-Id: I3e4d77ff3791528b1233467060d3ea83cb854acb
    Reviewed-on: https://go-review.googlesource.com/27270
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 9741d83ceaf046e55077d68719cc2781cd96d5f1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed May 18 13:27:11 2016 -0700

    cmd/asm, go/build: invoke cmd/asm only once per package
    
    Prior to this CL, cmd/go invoked cmd/asm once
    for every assembly file.
    The exec and cmd/asm startup overhead dwarfed
    the actual time spent assembling.
    This CL adds support to cmd/asm to process
    multiple input files and uses it in cmd/go.
    
    This cuts 10% off the wall time for 'go build -a math'.
    
    Fixes #15680
    
    Change-Id: I12d2ee2c817207954961dc8f37b8f2b09f835550
    Reviewed-on: https://go-review.googlesource.com/27636
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 9d4623fe43f121bd98cdb78f207aa12bfc68dbc2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 1 11:07:05 2016 -0700

    cmd/compile: handle OCONV[NOP] in samesafeexpr
    
    This increases the effectiveness of the
    "integer-in-range" CL that follows.
    
    Change-Id: I23b7b6809f0b2c25ed1d59dd2d5429c30f1db89c
    Reviewed-on: https://go-review.googlesource.com/27651
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 507051d6940c297bd93f5fac5cf786b0e3642d06
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 24 11:33:55 2016 -0700

    spec: complete list of special comma-ok forms
    
    The enumerations didn't include the syntactic form where the lhs is
    full variable declaration with type specification, as in:
    
    var x, ok T = ...
    
    Fixes #15782.
    
    Change-Id: I0f7bafc37dc9dcf62cdb0894a0d157074ccd4b3e
    Reviewed-on: https://go-review.googlesource.com/27670
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 78bc418f1d7f9346e3214ac40506624ab7f5f649
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 24 13:12:34 2016 -0700

    cmd/compile: remove unused importimport function
    
    Functionality is present in bimport.go in slightly modified form.
    
    Change-Id: I6be79d91588873e6ba70d6ab07ba2caa12346dfc
    Reviewed-on: https://go-review.googlesource.com/27672
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a99f812cba4c5a5207fed9be5488312a44a5df34
Author: Keith Randall <khr@golang.org>
Date:   Sat Jul 2 17:19:25 2016 -0700

    cmd/objdump: implement objdump of .o files
    
    Update goobj reader so it can provide all the information
    necessary to disassemble .o (and .a) files.
    
    Grab architecture of .o files from header.
    
    .o files have relocations in them.  This CL also contains a simple
    mechanism to disassemble relocations and add relocation info as an extra
    column in the output.
    
    Fixes #13862
    
    Change-Id: I608fd253ff1522ea47f18be650b38d528dae9054
    Reviewed-on: https://go-review.googlesource.com/24818
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 873dca4c17437d07ae97ef4f9e9a8e8c93d88bd7
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Aug 23 17:47:11 2016 -0700

    net: use runtime.Keepalive for *netFD values
    
    The net package sets a finalizer on *netFD. I looked through all the
    uses of *netFD in the package, looking for each case where a *netFD
    was passed as an argument and the final reference to the argument was
    not a function or method call. I added a call to runtime.KeepAlive after
    each such final reference (there were only three).
    
    The code is safe today without the KeepAlive calls because the compiler
    keeps arguments alive for the duration of the function. However, that is
    not a language requirement, so adding the KeepAlive calls ensures that
    this code remains safe even if the compiler changes in the future.
    
    Change-Id: I4e2bd7c5a946035dc509ccefb4828f72335a9ee3
    Reviewed-on: https://go-review.googlesource.com/27650
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e69912e6f44b09d8bafde32f11642579272ab4af
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Aug 23 15:56:43 2016 -0700

    os: use runtime.Keepalive for *Process values
    
    The os package sets a finalizer on *Process. I looked through all the
    uses of *Process in the package, looking for each case where a *Process
    was passed as an argument and the final reference to the argument was
    not a function or method call. I added a call to runtime.KeepAlive after
    each such final reference (there were only three).
    
    The code is safe today without the KeepAlive calls because the compiler
    keeps arguments alive for the duration of the function. However, that is
    not a language requirement, so adding the KeepAlive calls ensures that
    this code remains safe even if the compiler changes in the future.
    
    I also removed an existing unnecessry call to runtime.KeepAlive. The
    syscall.Syscall function is handled specially by the compiler to keep
    its arguments alive.
    
    Change-Id: Ibd2ff20b31ed3de4f6a59dd1633c1b44001d91d9
    Reviewed-on: https://go-review.googlesource.com/27637
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9be2a279ee12d0e17646c0b0b12d8dff9b157a59
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Wed Aug 24 13:22:54 2016 +0900

    internal/testenv: make MustHaveSymlink message friendly
    
    Change-Id: If6e12ebc41152bc0534d3d383df80e960efe97f0
    Reviewed-on: https://go-review.googlesource.com/27577
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5bddca64a84edae33a8ffaa74abcd3a8c966ea0c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jun 20 08:34:39 2016 -0700

    cmd/compile: minor cleanup in mapinit
    
    Change-Id: I7d58d200f7e8b2c0a6e35371da0dafd9b44e9057
    Reviewed-on: https://go-review.googlesource.com/26757
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 41943d96390353695225da6ef44dacdca84d92df
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 16 14:28:44 2016 -0700

    cmd/compile: convert getdyn int arg to bool
    
    Passes toolstash -cmp.
    
    Change-Id: I5b893b8b82b358534fd85542f05e3aa7e666bcd3
    Reviewed-on: https://go-review.googlesource.com/26752
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 67bcee8d985697678ced806569c17cbbab067478
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 16 14:23:12 2016 -0700

    cmd/compile: convert Dodata to a bool, rename to IsStatic
    
    Passes toolstash -cmp.
    
    Change-Id: I2c204ec14b0a72b592fb336acdd4dff55650f7f6
    Reviewed-on: https://go-review.googlesource.com/26751
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a301b329e5c99693cf5a35ad93e9db5198f0b284
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 16 14:14:16 2016 -0700

    cmd/compile: simplify isglobal
    
    Passes toolstash -cmp.
    
    Change-Id: I16ec0c11096bf4c020cf41392effeb67436f32ba
    Reviewed-on: https://go-review.googlesource.com/26750
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit af9342ca10ea661ca34d6d6950edc553fdd27856
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Fri Aug 19 15:00:29 2016 +1000

    syscall, internal/syscall/windows, internal/syscall/windows/registry: make go generate work on every os
    
    Fixes #16368
    
    Change-Id: I2ef7a2deb5798e11cc1d3f8ca29a6e1655155422
    Reviewed-on: https://go-review.googlesource.com/27411
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e9267ca8259dd56ae01db3c6a6350f007c1b84f2
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Wed Aug 24 00:44:03 2016 +0900

    vendor: update vendored route
    
    Updates golang_org/x/net/route to rev 4d38db7 for:
    - route: don't crash or hang up with corrupted messages
    
    Change-Id: I22492f56a5e211b5a0479f1e07ad8f42f7b9ea03
    Reviewed-on: https://go-review.googlesource.com/27574
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c6e0c49b4152ade7f8cc7368c82703a2d1c58f48
Author: Jess Frazelle <me@jessfraz.com>
Date:   Fri May 20 16:17:27 2016 -0700

    cmd/go: updates go get to return exit status 0 for test file only pkgs
    
    Updates the behavior of `go get` to return exit status 0 when a
    requested package only contains test files.
    
    Fixes #15093
    
    Change-Id: I76b80517d58748090f5e8c6f41178361e2d7ca54
    Reviewed-on: https://go-review.googlesource.com/23314
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3e270ab80bbbc259402f0ae22b5eb36f4daec426
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 23 10:43:47 2016 -0700

    cmd/compile: clean up ctz ops
    
    Now that we have ops that can return 2 results, have BSF return a result
    and flags.  We can then get rid of the redundant comparison and use CMOV
    instead of CMOVconst ops.
    
    Get rid of a bunch of the ops we don't use.  Ctz{8,16}, plus all the Clzs,
    and CMOVNEs.  I don't think we'll ever use them, and they would be easy
    to add back if needed.
    
    Change-Id: I8858a1d017903474ea7e4002fc76a6a86e7bd487
    Reviewed-on: https://go-review.googlesource.com/27630
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 6394eb378eb6b2c0e691c519b2a6664f930b427e
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 23 16:02:19 2016 -0700

    cmd/compile: export package for _ (blank) struct fields
    
    Blank struct fields are regular unexported fields. Two
    blank fields are different if they are from different
    packages. In order to correctly differentiate them, the
    compiler needs the package information. Add it to the
    export data.
    
    Fixes #15514.
    
    Change-Id: I421aaca22b542fcd0d66b2d2db777249cad78df6
    Reviewed-on: https://go-review.googlesource.com/27639
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit a8eb6d51bbd668b9e6fefa9f0cf39fccde3a305e
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 23 15:18:09 2016 -0700

    cmd/compile: simplify field/method export (internal cleanup)
    
    Towards a fix for #15514.
    
    Change-Id: I62073e9fdcfe5ddda9b0a47fe8554b524191a77c
    Reviewed-on: https://go-review.googlesource.com/27638
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit ec75230b55281a84cd1a9aa52d33d5e552c82dd4
Author: Ross Light <light@google.com>
Date:   Tue Aug 16 11:10:36 2016 -0700

    reflect: document equality guarantee for Type
    
    The only previous mention of this property was in the String() method.
    Since this is the only way to uniquely identify a type and we can't
    change this property without breaking the Go 1 guarantee, it seems
    better to document this property than hiding it on a method.
    
    Fixes #16348
    
    Change-Id: I3d25f7d6e6007e3c15c2e13010869888d0181fc2
    Reviewed-on: https://go-review.googlesource.com/27170
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 8050782cba45c739bfb2cd735766879098c48d99
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Aug 23 13:54:01 2016 -0700

    flag: improve comment for calling String with zero value
    
    Update #16694.
    
    Change-Id: Id6be1535d8a146b3dac3bee429ce407a51272032
    Reviewed-on: https://go-review.googlesource.com/27634
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 78fac02cfd6bca33e3b8a13a875c593bbbc353cc
Author: Than McIntosh <thanm@google.com>
Date:   Mon Jul 11 14:26:18 2016 -0400

    test: add test for gccgo issue #15722
    
    Change-Id: I4faf9a55414e217f0c48528efb13ab8fdcd9bb16
    Reviewed-on: https://go-review.googlesource.com/24845
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>

commit e14e67fff63b364f531667c1a2390feb4b3c1c64
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri May 6 09:24:16 2016 -0700

    cmd/compile: clean up one Node.Etype usage
    
    Whoever Marvin is, we're one step closer to realizing his dream.
    
    Change-Id: I8dece4417d0f9ec234be158d0ee7bc6735342d93
    Reviewed-on: https://go-review.googlesource.com/27465
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 874ea6a4c7fc402ff05a8e63dea5d1b41d55930e
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 23 11:20:34 2016 -0700

    cmd/compile: add comment
    
    Minor update on https://go-review.googlesource.com/27441 .
    
    Change-Id: I605a8bfbe67e259020aa53f1d2357808197d02b6
    Reviewed-on: https://go-review.googlesource.com/27631
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 9aea69d6dc20420c726782dc17d9760ab7b68890
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Aug 21 17:08:04 2016 +0200

    cmd/compile: fix binary import of unsafe.Pointer literals
    
    Add a type conversion to uintptr for untyped constants
    before the conversion to unsafe.Pointer.
    
    Fixes #16317
    
    Change-Id: Ib85feccad1019e687e7eb6135890b64b82fb87fb
    Reviewed-on: https://go-review.googlesource.com/27441
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ee333b4b7482873e24d39c5c0b3ea1f7ea4ebdcc
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Aug 22 15:56:27 2016 -0700

    cmd/compile: don't Fatal when printing -m debug information
    
    Some FmtSharp export formatting flag support was removed with
    commit b4e9f70. Don't panic if FmtSharp is set, just ignore it.
    
    Fixes #16820.
    
    Change-Id: Ie0c3d3774bd55002f6d2781b1212d070f083e6b2
    Reviewed-on: https://go-review.googlesource.com/27556
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 8e24a98abe464161bc8937a84f78189684aa738d
Author: Kevin Burke <kev@inburke.com>
Date:   Sat Aug 20 22:05:47 2016 -0700

    cmd/compile: precompute constant square roots
    
    If a program wants to evaluate math.Sqrt for any constant value
    (for example, math.Sqrt(3)), we can replace that expression with
    its evaluation (1.7320508075688772) at compile time, instead of
    generating a SQRT assembly command or equivalent.
    
    Adds tests that math.Sqrt generates the correct values. I also
    compiled a short program and verified that the Sqrt expression was
    replaced by a constant value in the "after opt" step.
    
    Adds a short doc to the top of generic.rules explaining what the file
    does and how other files interact with it.
    
    Fixes #15543.
    
    Change-Id: I6b6e63ac61cec50763a09ba581024adeee03d4fa
    Reviewed-on: https://go-review.googlesource.com/27457
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit d00890b5f3e7846a7b4ab084fe39d279f21aad04
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Jul 10 18:44:09 2016 -0700

    runtime: add msan calls before calling traceback functions
    
    Tell msan that the arguments to the traceback functions are initialized,
    in case the traceback functions are compiled with -fsanitize=memory.
    
    Change-Id: I3ab0816604906c6cd7086245e6ae2e7fa62fe354
    Reviewed-on: https://go-review.googlesource.com/24856
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 24158644dddc414243fc3c033f85f0565b7ebd3e
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Aug 22 10:33:13 2016 -0400

    cmd/link/internal/ld: camelCase a buch of snake_case names
    
    I've also unexported a few symbols that weren't used outside the
    package.
    
    Updates #16818
    
    Change-Id: I39d9d87b3eec30b88b4a17c1333cfbbfa6b3518f
    Reviewed-on: https://go-review.googlesource.com/27468
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 5e66ac9ac61efb045f8ae28ff0fc019a4a98b473
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Aug 14 20:39:30 2016 -0700

    flag: document that Value.String must work on the zero value
    
    Otherwise flag.PrintDefaults will fail when it tries to determine
    whether the default is the zero value.
    
    Fixes #16694.
    
    Change-Id: I253fbf11ffc0a9069fd48c2c3cf3074df53e3a03
    Reviewed-on: https://go-review.googlesource.com/27003
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit eb29ac7a7cf97cd364c9d343377b104bc3e90927
Author: Gabriel Russell <gabriel.russell@gmail.com>
Date:   Tue Aug 23 08:31:26 2016 -0400

    time: fix optional fractional seconds range err
    
    The optional fractional seconds overrides any range error
    from the second parsing. Instead don't look for optional fractional
    seconds if a range error has occured.
    
    Change-Id: I27e0a2432740f6753668bd8833e48b9495bc4036
    Reviewed-on: https://go-review.googlesource.com/27590
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 03723c909ee7b75c0c88ddb3f547642b9f48b009
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Tue Aug 23 22:59:27 2016 +0900

    path/filepath: use testenv.MustHaveSymlink to simplify symlink tests
    
    Cleanup test code for symbolic links.
    
    Change-Id: I25f561cd34dc4d120a4143f933619d233a6cffc5
    Reviewed-on: https://go-review.googlesource.com/27573
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e893c72f2a5ec41bbf14f23b95ae10caf609260a
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Tue Aug 23 22:21:49 2016 +0900

    os: use testenv.MustHaveSymlink to simplify symlink tests
    
    Cleanup test code for symbolic links.
    
    Change-Id: I7a116e4d5c0e955578eca53c1af559e9092f60cd
    Reviewed-on: https://go-review.googlesource.com/27572
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 25d18954f68f0f90e337addfe1970b4f960d0418
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jul 21 15:31:56 2016 -0700

    test: add test case that gccgo miscompiled
    
    Change-Id: I384eac632a4a87c12977e56a7d7bad7614305c51
    Reviewed-on: https://go-review.googlesource.com/25143
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a7ed9ff754dd66a75070a376382ca0fa520deefd
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Aug 22 05:52:15 2016 +0900

    net: document unimplemented methods and functions
    
    Fixes #16802.
    
    Change-Id: I41be7bb4e21e3beaa2136ee69771b0f455b2a7c6
    Reviewed-on: https://go-review.googlesource.com/27417
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4333d3823dd78f755f90e5f63b7de180d4a90025
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Jul 26 12:22:45 2016 +0900

    net: fix typo in error message of TCPConn.ReadFrom
    
    On some error when using io.Copy with TCPConn, it displays an error
    correlation like the following:
    
    read tcp 192.0.2.1:1111->192.0.2.2:2222: read tcp [2001:db8::2]:2222->[2001:db8::3]:3333 read: connection reset by peer
    
    the correlation "some error on reading after reading operation" looks a
    bit confusing because the operation on the ReadFrom method of TCPConn is
    actually "writing after reading." To clarify and avoid confusion, this
    change sets "readfrom" to the Op field of outer-most OpError instead of
    "read."
    
    Change-Id: I6bf4e2e7247143fa54bbcf9cef7a8ae1ede1b35c
    Reviewed-on: https://go-review.googlesource.com/25220
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fe251d2581420811891741b49f38737c9fa4e1cc
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jul 7 21:01:21 2016 -0700

    runtime: remove unused function in test
    
    Change-Id: I43f14cdd9eb4a1d5471fc88c1b4759ceb2c674cf
    Reviewed-on: https://go-review.googlesource.com/24817
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2d85e87f08c325f8be869718c4ac0d7c069161c0
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Aug 2 11:42:53 2016 -0700

    runtime/cgo: add tsan acquire/release around setenv/unsetenv
    
    Change-Id: Iabb25e97714d070c31c657559a97a3bfc979da18
    Reviewed-on: https://go-review.googlesource.com/25403
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0889d2d04a0ab8c4a0d6c437c857f3f721818577
Author: Michael Matloob <matloob@golang.org>
Date:   Tue Aug 23 08:17:58 2016 -0400

    debug/macho: fix comment on Section64
    
    Change-Id: I7c809ec385b56ebb2ec784a1479d466df6ab4d1a
    Reviewed-on: https://go-review.googlesource.com/27565
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d98de0c3d027815bc05f049a528687b436ce984c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 16 13:56:15 2016 -0700

    cmd/compile: use two tables for table-driven map inserts
    
    This enables better packing when key and value
    types have different alignments.
    
    Cuts 57k off cmd/go.
    
    Change-Id: Ifdd125264caccd7852d622382c94e4689e757978
    Reviewed-on: https://go-review.googlesource.com/26669
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit c8941bb85ce434eccf5066f22dd3c161e6afc4e2
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Aug 23 06:14:31 2016 -0700

    doc: add note about CL 24180 to go1.8.txt
    
    Change-Id: Ie2bef1c181a49d7a02ed8068894d2bd81fc5bafa
    Reviewed-on: https://go-review.googlesource.com/27566
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit d92a3606f57d3a400eea6e98ddc8db7a09625f44
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Jun 16 12:59:09 2016 -0700

    cmd/go, cmd/link: build c-archive as position independent on ELF
    
    This permits people to use -buildmode=c-archive to produce an archive
    file that can be included in a PIE or shared library.
    
    Change-Id: Ie340ee2f08bcff4f6fd1415f7d96d51ee3a7c9a1
    Reviewed-on: https://go-review.googlesource.com/24180
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit dc9755c2a2b561af6c990399938980ab044406ba
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Jul 6 15:30:33 2016 -0700

    runtime: add missing race and msan checks to reflect functions
    
    Add missing race and msan checks to reflect.typedmmemove and
    reflect.typedslicecopy. Missing these checks caused the race detector
    to miss races and caused msan to issue false positive errors.
    
    Fixes #16281.
    
    Change-Id: I500b5f92bd68dc99dd5d6f297827fd5d2609e88b
    Reviewed-on: https://go-review.googlesource.com/24760
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

commit d9504d4623556467f023da5c33236ec0cf4520cb
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Aug 22 22:29:24 2016 -0700

    cmd/link: don't record interpreter in flagInterpreter
    
    Keep flagInterpreter unchanged after flag parsing. This lets us replace
    flagInterpreterSet with flagInterpreter != "".
    
    Change-Id: Ifd2edbb2ce0011e97276ca18281b8ffbabde1c50
    Reviewed-on: https://go-review.googlesource.com/27563
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e3cecfdcaec55c4dd62c7d4fef3d03fed6d03e38
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Mon Aug 22 15:02:59 2016 +0900

    net: fix a typo
    
    Change-Id: I29fadde646095fa8507f239a339857bf53172c14
    Reviewed-on: https://go-review.googlesource.com/27418
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 80b31c05e6ae37c09162406590b9e3b99f0fff9b
Author: Elias Naur <elias.naur@gmail.com>
Date:   Mon Jun 27 21:38:04 2016 +0200

    time: load time zones from the system tzdata file on Android
    
    Android timezones are in a packed format, different from the separate
    files of a regular Unix system. This CL contain the necessary code to
    parse the packed tzdata file and extract time zones from it. It also
    adds a basic test to ensure the new parser works.
    
    Fixes #13581
    
    Change-Id: Idebe73726c3d4c2de89dd6ae1d7d19f975207500
    Reviewed-on: https://go-review.googlesource.com/24494
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0df5ab7e6569a8bf6bc87975e539706163bf664a
Author: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>
Date:   Wed Aug 10 15:02:02 2016 -0300

    runtime: Use clock_gettime to get current time on ppc64x
    
    Fetch the current time in nanoseconds, not microseconds, by using
    clock_gettime rather than gettimeofday.
    
    Updates #11222
    
    Change-Id: I1c2c1b88f80ae82002518359436e19099061c6fb
    Reviewed-on: https://go-review.googlesource.com/26790
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: Minux Ma <minux@golang.org>

commit 8a9b96ace4c0064d3c06cd483368bd655ad43d87
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Thu Aug 18 19:07:59 2016 +0900

    internal/testenv: add HasSymlink/MustHaveSymlink
    
    os package and path/filepath package have duplicated code for
    checking symlink supports in test code.
    This CL tries to simplify such test code.
    
    Change-Id: I0371488337f5e951eca699852daab9ccb16ddd62
    Reviewed-on: https://go-review.googlesource.com/27331
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0b5f2f0d1149bcff3c6b08458d7ffdd96970235c
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jul 15 15:30:53 2016 -0700

    net/http: if context is canceled, return its error
    
    This permits the error message to distinguish between a context that was
    canceled and a context that timed out.
    
    Updates #16381.
    
    Change-Id: I3994b98e32952abcd7ddb5fee08fa1535999be6d
    Reviewed-on: https://go-review.googlesource.com/24978
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 643b9ec07c3a0e440a2b1669896d7a4b4d4dd64b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed May 25 14:10:01 2016 -0700

    cmd/compile: tidy up switch case expansion
    
    No functional changes.
    
    Change-Id: I0961227e8a7be2d7c611452896843b6955303fa6
    Reviewed-on: https://go-review.googlesource.com/26768
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit a9266eef9384090d748acf723351a282b71982a8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jun 17 14:50:39 2016 -0700

    cmd/compile: simplify constant switch case sorting
    
    This sort is now only reachable for constant clauses
    for a non-interface switch expression value.
    
    Refactor a bit so that the few tests that remain
    are concise and easy to read.
    
    Add a test that string length takes priority
    over built-in string order.
    
    Change-Id: Iedaa11ff77049d5ad1bf14f54cbb8c3411d589a7
    Reviewed-on: https://go-review.googlesource.com/26767
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e26499153e938b21850a7b6b33f27bb3d98e01cd
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Jun 5 17:28:28 2016 -0700

    cmd/compile: use a map to track const switch cases
    
    This is simpler than the sorting technique.
    It also allows us to simplify or eliminate
    some of the sorting decisions.
    
    Most important, sorting will not work when case clauses
    represent ranges of integers: There is no correct
    sort order that allows overlap detection by comparing
    neighbors. Using a map allows of a cheap, simple
    approach to ranges, namely to insert every int
    in the map. The equivalent approach for sorting
    means juggling temporary Nodes for every int,
    which is a lot more expensive.
    
    Change-Id: I84df3cb805992a1b04d14e0e4b2334f943e0ce05
    Reviewed-on: https://go-review.googlesource.com/26766
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit b7ac426ee31cfe4464345754745e38bc0af02a66
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jun 3 12:05:32 2016 -0700

    cmd/compile: split genCaseClauses by switch type
    
    The implementations are going to start diverging more.
    Instead of more if clauses and empty parameters,
    specialize.
    
    Change-Id: I44584450592e8c9f72a10d8ada859c07e9d9aa19
    Reviewed-on: https://go-review.googlesource.com/26764
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit b046786528d6c802ae007f001a60341fd0d9c9d4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 1 15:21:56 2016 -0700

    cmd/compile: eliminate switch case kinds
    
    We used to have separate kinds for the default
    case and the nil type case. Now that those are
    gone, we can use a simple bool instead.
    
    Change-Id: I65488e945df68178e893cddd2e091ebb6e32ef4d
    Reviewed-on: https://go-review.googlesource.com/26763
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 4739dcf7fbe5f5bbe885c4349d36c3e23658c0c6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed May 25 14:08:13 2016 -0700

    cmd/compile: fix printing of OCASE nodes
    
    Switch lowering splits each case expression out
    into its own OCASE node.
    
    Change-Id: Ifcb72b99975ed36da8540f6e43343e9aa2058572
    Reviewed-on: https://go-review.googlesource.com/26769
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit bd2838be77caf367cd6aede50c48279ee6b3a6c4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 1 11:34:28 2016 -0700

    cmd/compile: use a map to detect duplicate type switch cases
    
    This is a bit simpler than playing sorting games,
    and it is clearer that it generates errors
    in the correct (source) order.
    
    It also allows us to simplify sorting.
    
    It also prevents quadratic error messages for
    (pathological) inputs with many duplicate type cases.
    
    While we’re here, refactoring deduping into separate functions.
    
    Negligible compilebench impact.
    
    Fixes #15912.
    
    Change-Id: I6cc19edd38875389a70ccbdbdf0d9b7d5ac5946f
    Reviewed-on: https://go-review.googlesource.com/26762
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 1a3006b03564936326e591f191a5af0630afca85
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jun 16 13:39:16 2016 -0700

    test: expand switch dead code test to include a range
    
    Change-Id: If443ffb50b140c466dcf4cc5340f44948bfa46a9
    Reviewed-on: https://go-review.googlesource.com/26765
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit cd5ab9798612a08fd39e29ccd6bc10112d1bef0a
Author: Dhaivat Pandit <dhaivatpandit@gmail.com>
Date:   Mon Aug 22 10:29:02 2016 -0700

    net/http/httptest: updated example to use Result()
    
    example for httptest.Recorder was inspecting Recoder directly.
    Using Result() to convert Recorder into a http.Response yields a much
    better user experience.
    
    Closes #16837
    
    Change-Id: Id0e636c12cd6adb1ba11f89953ff2b0f43758cf3
    Reviewed-on: https://go-review.googlesource.com/27495
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit 93b753f525b62a2a860fc2ba2d4ea3f788c275f9
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Aug 22 21:49:32 2016 -0700

    cmd/link: fix handling of cgo_dynamic_interpreter
    
    CL 27473 accidentally changed `!Debug['I']` to `*flagInterpreter != ""`.
    Since the old `Debug['I']` was set when the new *flagInterpreter was
    set, this inverted the sense of the condition. The effect was to always
    ignore the cgo_dynamic_interpreter setting from runtime/cgo. This worked
    OK when the default interpreter was the correct one, but failed when it
    was not, as is currently the case on, at least, PPC64 and ARM.
    
    This CL restores the old behavior by using a separate variable to track
    whether the -I flag was used, just as we used to.
    
    Change-Id: Icf9b65fa41349ed2e4de477fec0a557ef1eb8189
    Reviewed-on: https://go-review.googlesource.com/27562
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 550caa1c87ea11aa54c6482ff66f98b4036c474f
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Aug 22 18:53:01 2016 -0400

    cmd/link/internal/mips64: fix use of -s flags
    
    My flags change reversed the meaning of -s within mips64's
    linker code. This should fix that.
    
    Change-Id: Ia24002469e557fb29badfd830134e61c1dd7e16e
    Reviewed-on: https://go-review.googlesource.com/27555
    Reviewed-by: Minux Ma <minux@golang.org>

commit c043e90e559a18691be722f96272846808292fe0
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Aug 19 18:10:00 2016 -0700

    cmd/compile: clean up encoding of export version info
    
    Replace ad-hoc encoding of export version info with a
    more systematic approach.
    
    Continue to read (but not write) the Go1.7 format for backward-
    compatibility. This will avoid spurious errors with old installed
    packages.
    
    Fixes #16244.
    
    Change-Id: I945e79ffd5e22b883250f6f9fac218370c2505a2
    Reviewed-on: https://go-review.googlesource.com/27452
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e8ba80fbf681430d7c5872b7c228f31c6ec6e37e
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Aug 22 22:22:44 2016 +0000

    io: fix comment in test
    
    Updates #16795
    
    Change-Id: I0bcc34bb5a92a2c480aebfb0eb6ba57bcc7f7cfd
    Reviewed-on: https://go-review.googlesource.com/27551
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a1dc9465a1db83912a54927d13367404bfbef363
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Thu Aug 18 13:49:10 2016 -0500

    cmd/compile: PPC64.rules for load/store address folding
    
    This adds some additional rules to improve loads and
    stores for ppc64x.
    
    Change-Id: I96b99c3a0019e6ac5393910c086f58330a04fc5a
    Reviewed-on: https://go-review.googlesource.com/27354
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 726190daf3cd66d020369c6ac7df586d53a58a1a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue May 31 13:11:15 2016 -0700

    cmd/compile: explicitly manage default and nil switch cases
    
    Rather than juggle default and nil cases as part
    of a slice, handle them explicitly.
    
    Change-Id: I97b200c9d3f23fe1a438acdbf3d13b0cf7e0851e
    Reviewed-on: https://go-review.googlesource.com/26761
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit cf20525bf414c8268d8fe111460767d52f03df44
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue May 31 15:02:40 2016 -0700

    cmd/compile: set correct line number for multiple defaults in switch error
    
    Fixes #15911.
    
    Change-Id: I500533484de61aa09abe4cecb010445e3176324e
    Reviewed-on: https://go-review.googlesource.com/26760
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 410974497365b2e6e23811dbc58475b00c69d0db
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 21 15:25:22 2016 -0700

    syscall: delete unreachable code
    
    Change-Id: Iacedb792c73591b7fd75e836aab8e0e117c8e738
    Reviewed-on: https://go-review.googlesource.com/27494
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e2103adb6cf4e7d7d0905e513852407355967638
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 7 14:14:47 2016 -0700

    crypto/*, runtime: nacl asm fixes
    
    Found by vet.
    
    Updates #11041
    
    Change-Id: I5217b3e20c6af435d7500d6bb487b9895efe6605
    Reviewed-on: https://go-review.googlesource.com/27493
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 5abfc97e84eef1fe5c5782eb8047cb911560ddb7
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Aug 9 20:05:41 2016 -0700

    runtime: use correct MOV for plan9 brk_ ret value
    
    Updates #11041
    
    Change-Id: I78f8d48f00cfbb451e37c868cc472ef06ea0fd95
    Reviewed-on: https://go-review.googlesource.com/27491
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e80376ca6b1f3c4cbc11639d998c0c83787f9247
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Aug 8 16:46:48 2016 -0700

    runtime: ignore closeonexec ret val on openbsd/arm
    
    Fixes #16641
    Updates #11041
    
    Change-Id: I087208a486f535d74135591b2c9a73168cf80e1a
    Reviewed-on: https://go-review.googlesource.com/27490
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 355d7fa8a8c362ee148d3394ce834d0b742c6872
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Aug 22 18:59:20 2016 +0000

    net/http: make Transport.CancelRequest doc recommend Request.WithContext
    
    The old deprecation docs were referencing another deprecated field.
    
    Fixes #16752
    
    Change-Id: I44a690048e00ddc790a80214ecb7f5bb0a5b7b34
    Reviewed-on: https://go-review.googlesource.com/27510
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 4187e1f49f45b1cfa66e7cdf8c118ee926285019
Author: Billy Lynch <wlynch@google.com>
Date:   Fri Aug 19 01:40:08 2016 -0400

    net/http/httptrace: add simple example and fix copyright header
    
    Partially addresses #16360
    
    Change-Id: I67a328302d7d91231f348d934e4232fcb844830a
    Reviewed-on: https://go-review.googlesource.com/27398
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2c58cb36f971aed484e880769eb2b0a21654459a
Author: Eric Lagergren <ericscottlagergren@gmail.com>
Date:   Sat Aug 20 15:46:06 2016 -0700

    encoding/xml: do not ignore error return from copyValue
    
    The error return from copyValue was ignored causing some XML attribute
    parsing to swallow an error.
    
    Additionally, type MyMarshalerAttrTest had no UnmarshalXMLAttr method
    causing marshalTests not to be symmetrical and the test suite to fail
    for test case 101.
    
    Fixes #16158
    
    Change-Id: Icebc505295a2c656ca4b42ba37bb0957dd7260c6
    Reviewed-on: https://go-review.googlesource.com/27455
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 747a158ef314bb458b90da95f3e3d67aa4140622
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Mon Aug 8 16:02:09 2016 +0200

    runtime: speed up StartTrace with lots of blocked goroutines
    
    In StartTrace we emit EvGoCreate for all existing goroutines.
    This includes stack unwind to obtain current stack.
    Real Go programs can contain hundreds of thousands of blocked goroutines.
    For such programs StartTrace can take up to a second (few ms per goroutine).
    
    Obtain current stack ID once and use it for all EvGoCreate events.
    
    This speeds up StartTrace with 10K blocked goroutines from 20ms to 4 ms
    (win for StartTrace called from net/http/pprof hander will be bigger
    as stack is deeper).
    
    Change-Id: I9e5ff9468331a840f8fdcdd56c5018c2cfde61fc
    Reviewed-on: https://go-review.googlesource.com/25573
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>

commit 7c5f33b173d7bde6b3ae33bab940b76b4c991556
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 11 16:05:41 2016 -0700

    runtime: cull dead code
    
    They are unused, and vet wants them to have
    a function prototype.
    
    Updates #11041
    
    Change-Id: Idedc96ddd3c3cf1b1d2ab6d98796367eab29f032
    Reviewed-on: https://go-review.googlesource.com/27492
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 310a40b4f2d602786becb3a5ed28394311c41ffa
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Aug 19 16:35:36 2016 -0400

    cmd/compile: start MIPS64 port of SSA backend
    
    Fib with all int and float types run correctly.
    *, /, shifts, Zero, Move not implemented yet. No optimization yet.
    
    Updates #16359.
    
    Change-Id: I4b0412954d5fd4c13a5fcddd8689ed8ac701d345
    Reviewed-on: https://go-review.googlesource.com/27404
    Reviewed-by: David Chase <drchase@google.com>

commit e4cae432d6185b75d45fcf0c3f9c6d49591c128a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue May 3 17:21:32 2016 -0700

    cmd/compile: add inline explainer
    
    When compiling with -m -m, this adds output
    for every non-inlined function explaining why
    it was not inlined.
    
    Change-Id: Icb59ae912a835c996e6b3475b163ee5125113001
    Reviewed-on: https://go-review.googlesource.com/22782
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ef6fde26e5cac06c0dbd4ffe628a3ecd2ef7c450
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 21 11:40:01 2016 -0700

    cmd/vet: handle multiple arches in asm build directives
    
    If a build directive contains multiple arches,
    try to match the build context.
    
    Updates #11041
    
    Change-Id: I03b5d7bfb29d1ff6c7d36a9d7c7fabfcc1d871c1
    Reviewed-on: https://go-review.googlesource.com/27158
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 863ca99415915b19218a36e7c4bf836c135ca00c
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 21 11:59:40 2016 -0700

    cmd/vet: fix mips64le arch name in asmdecl check
    
    Updates #11041
    
    Change-Id: Ic6df8ef25b7cf280db523950cd3640b060ad1a9b
    Reviewed-on: https://go-review.googlesource.com/27157
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit f410a668ee3f0a5c71e4d9d0bda83b826246ab5d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 11 15:20:43 2016 -0700

    cmd/vet: improve error message for cross-package assembly
    
    bytes.Compare has its go prototype in package bytes,
    but its implementation in package runtime.
    vet used to complain that the prototype was missing.
    Now instead:
    
    runtime/asm_amd64.s:1483: [amd64] cannot check cross-package assembly function: Compare is in package bytes
    
    Updates #11041
    
    Change-Id: Ied44fac10d0916d7a34e552c02d052e16fca0c8c
    Reviewed-on: https://go-review.googlesource.com/27153
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 0952a15cd17755c655910e4b2601d0f255d71c42
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 11 12:30:45 2016 -0700

    cmd/vet: clean up printing errors with no position
    
    Before:
    
    : runtime/asm_amd64.s:345: [amd64] morestack: use of 8(SP) points beyond argument frame
    
    After:
    
    runtime/asm_amd64.s:345: [amd64] morestack: use of 8(SP) points beyond argument frame
    
    Updates #11041
    
    Change-Id: Ic87a6d1a2a7b2a8bf737407bc981b159825c84f2
    Reviewed-on: https://go-review.googlesource.com/27152
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 4af1148079f00b461c9ae79df22aa647aa7ff5ef
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jul 9 17:10:57 2016 -0700

    cmd/vet: improve asmdecl parameter handling
    
    The asmdecl check had hand-rolled code that
    calculated the size and offset of parameters
    based only on the AST.
    It included a list of known named types.
    
    This CL changes asmdecl to use go/types instead.
    This allows us to easily handle named types.
    It also adds support for structs, arrays,
    and complex parameters.
    
    It improves the default names given to unnamed
    parameters. Previously, all anonymous arguments were
    called "unnamed", and the first anonymous return
    argument was called "ret".
    Anonymous arguments are now called arg, arg1, arg2,
    etc., depending on the index in the argument list.
    Return arguments are ret, ret1, ret2.
    
    This CL also fixes a bug in the printing of
    composite data type sizes.
    
    Updates #11041
    
    Change-Id: I1085116a26fe6199480b680eff659eb9ab31769b
    Reviewed-on: https://go-review.googlesource.com/27150
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 880c967ccd71013253a751452a83e6c6a0cf86df
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Aug 13 18:12:21 2016 -0700

    runtime: minor string/rune optimizations
    
    Eliminate a spill in concatstrings.
    Provide bounds elim hints in runetochar.
    No significant benchmark movement.
    
    Before:
    "".runetochar t=1 size=412 args=0x28 locals=0x0
    "".concatstrings t=1 size=736 args=0x30 locals=0x98
    
    After:
    "".runetochar t=1 size=337 args=0x28 locals=0x0
    "".concatstrings t=1 size=711 args=0x30 locals=0x90
    
    Change-Id: Icce646976cb20a223163b7e72a54761193ac17e3
    Reviewed-on: https://go-review.googlesource.com/27460
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fa8a28d55940adbf797e54a9ca6fa68f1e341a93
Author: Michael Matloob <matloob@golang.org>
Date:   Sun Aug 21 18:34:24 2016 -0400

    cmd/link: turn some globals into flag pointer variables
    
    This moves many of the flag globals into main and assigns them
    to their flag.String/Int64/... directly.
    
    Updates #16818
    
    Change-Id: Ibbff44a273bbc5cb7228e43f147900ee8848517f
    Reviewed-on: https://go-review.googlesource.com/27473
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 236901384dc9fc3d7810ae96b43c8404f0fea6c1
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Aug 19 23:13:29 2016 +0000

    net/http: fix unwanted HTTP/2 conn Transport crash after IdleConnTimeout
    
    Go 1.7 crashed after Transport.IdleConnTimeout if an HTTP/2 connection
    was established but but its caller no longer wanted it. (Assuming the
    connection cache was enabled, which it is by default)
    
    Fixes #16208
    
    Change-Id: I9628757f7669e344f416927c77f00ed3864839e3
    Reviewed-on: https://go-review.googlesource.com/27450
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 82c1e22e13aeb60866031a8dc23bd78c60c1e782
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Aug 22 10:53:05 2016 +1200

    cmd/link: make listsort less generic
    
    It's always called with the same arguments now.
    
    Maybe the real fix is to make Symbol.Sub a slice but that requires a bit more
    brain.
    
    Change-Id: I1326d34a0a327554be6d54f9bd402ea328224766
    Reviewed-on: https://go-review.googlesource.com/27416
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit ec8d49c139d2052f200b6867122c678adbbfc142
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Fri Aug 19 23:27:45 2016 +0000

    net/http: update bundled http2 for Transport double STREAM_ENDED error
    
    Updates bundled http2 to x/net/http2 git rev 7394c11 for:
    
    http2: fix protocol violation regression when writing certain request bodies
    https://golang.org/cl/27406
    
    Fixes #16788
    
    Change-Id: I0efcd36e2b4b34a1df79f763d35bf7a3a1858506
    Reviewed-on: https://go-review.googlesource.com/27451
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

commit a3765723c60b4cbbec3c8e62e3b2ee9e4080eb0b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun May 8 22:05:21 2016 -0700

    cmd/compile: remove inl escape analysis hack
    
    Relevant issues: #5056, #9537, and #11053.
    Their tests all pass.
    
    Change-Id: Ibbe05982ed5f332149ffd2cb6a232b8d677c4454
    Reviewed-on: https://go-review.googlesource.com/27464
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3c55ee642005db840f8d84bbdfaafa66f713559d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri May 6 09:06:05 2016 -0700

    cmd/compile: refactor out method-called-as-function check
    
    Change-Id: I417aae8622d7d363863704594680bd2502a09049
    Reviewed-on: https://go-review.googlesource.com/27463
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 376d9665a80e96f0b550c24be7ffedf0b467e40d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu May 5 11:45:27 2016 -0700

    cmd/compile: don’t consider recursive calls for inlining
    
    We will never inline recursive calls.
    Rather than simulate the recursion until we hit
    the complexity ceiling, just bail early.
    
    Also, remove a pointless n.Op check.
    visitBottomUp guarantees that n will be an
    ODCLFUNC, and caninl double-checks it.
    
    Change-Id: Ifa48331686b24289d34e68cf5bef385f464b6b92
    Reviewed-on: https://go-review.googlesource.com/27462
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d1faf3879ede9efc9f1907dfad04bac8ec08d598
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri May 27 15:33:11 2016 -0700

    cmd/compile: don’t generate pointless gotos during inlining
    
    Their only purpose in life was to suppress an error.
    Suppress that error explicitly instead by reusing
    an existing, aptly named Node field.
    
    This generates fewer blocks during ssa construction.
    
    name       old alloc/op     new alloc/op     delta
    Template       47.5MB ± 0%      47.2MB ± 0%  -0.72%        (p=0.000 n=15+15)
    Unicode        36.8MB ± 0%      36.8MB ± 0%    ~           (p=0.775 n=15+15)
    GoTypes         143MB ± 0%       142MB ± 0%  -1.03%        (p=0.000 n=15+14)
    Compiler        686MB ± 0%       674MB ± 0%  -1.75%        (p=0.000 n=15+15)
    
    name       old allocs/op    new allocs/op    delta
    Template         446k ± 0%        445k ± 0%  -0.20%        (p=0.000 n=15+15)
    Unicode          355k ± 0%        355k ± 0%    ~           (p=0.235 n=13+15)
    GoTypes         1.36M ± 0%       1.36M ± 0%  -0.41%        (p=0.000 n=13+15)
    Compiler        5.77M ± 0%       5.70M ± 0%  -1.16%        (p=0.000 n=15+15)
    
    
    Change-Id: I5f14afb833c9d355688d9a229eb820e95c7657bf
    Reviewed-on: https://go-review.googlesource.com/27461
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 16e3ce278591069c4f49c29f28d222768f026747
Author: Michael Matloob <matloob@golang.org>
Date:   Sun Aug 21 18:34:24 2016 -0400

    cmd/link/internal/ld: rename pobj.go to main.go
    
    The only thing pobj contains is the Ldmain function.
    
    Updates #16818
    
    Change-Id: Id114bdb264cb5ea2f372eb2166201f1f8eb99445
    Reviewed-on: https://go-review.googlesource.com/27472
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 0a15d95091f4d7db396da018e49653fbb3b19a53
Author: Michael Matloob <matloob@golang.org>
Date:   Sun Aug 21 18:25:28 2016 -0400

    cmd/link: use standard library flag package where possible
    
    The obj library's flag functions are (mostly) light wrappers
    around the standard library flag package. Use the flag package
    directly where possible.
    
    Most uses of the 'count'-type flags (except for -v) only check
    against 0, so they can safely be replaced by bools. Only -v
    and the flagfns haven't been replaced.
    
    Debug has been turned into a slice of bools rather than ints.
    There was a copy of the -v verbosity in ctxt.Debugvlog, so don't use
    Debug['v'] and just use ctxt.Debugvlog.
    
    Updates #16818
    
    Change-Id: Icf6473a4823c9d35513bbd0c34ea02d5676d782a
    Reviewed-on: https://go-review.googlesource.com/27471
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 65c5d62420a539f2f0d06b3ea2ba837f0fbdd6cf
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 8 07:52:02 2016 -0700

    cmd/vet: re-quote struct tags when printing errors
    
    cmd/link/link_test.go contains several multi-line
    struct tags. Going through an unquote/quote cycle
    converts `a
    b
    c` to "a\nb\nc\n".
    
    This keeps all vet error messages for the standard
    library on a single line.
    
    Updates #11041
    
    Change-Id: Ifba1e87297a5174294d1fbf73463fd3db357464f
    Reviewed-on: https://go-review.googlesource.com/27129
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 6ad76718cfdd59977b0008c1e774150a7e39fbd8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 7 17:40:37 2016 -0700

    cmd/vet: don't treat trailing % as possible formatting directive
    
    Eliminates the following false positive:
    
    cmd/go/go_test.go:1916: possible formatting directive in Error call
    
    The line in question:
    
    tg.t.Error("some coverage results are 0.0%")
    
    Updates #11041
    
    Change-Id: I3b7611fa3e0245714a19bd5388f21e39944f5296
    Reviewed-on: https://go-review.googlesource.com/27128
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 8e90b9026b64a47d68c80a079564b8c17611db0d
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Mon Aug 22 10:27:20 2016 +1200

    cmd/link: remove references to LSym (now Symbol)
    
    Mostly comments but some derived names too.
    
    Change-Id: I1e01dccca98de6688e1426c7a9309f6fd6a1e368
    Reviewed-on: https://go-review.googlesource.com/27415
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    Reviewed-by: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 85072d5f752903298fa52b8d92a6d052061ee5b8
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Apr 22 10:31:14 2016 +1200

    cmd/link: remove Symbol.Next
    
    Bye bye one more class of linked list manipulation!
    
    Change-Id: I2412b224c847dd640f9253125d30cd5f911ce00c
    Reviewed-on: https://go-review.googlesource.com/27414
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>

commit 64f5023e6f4d1bcb7f293d29cdaf259a80864920
Author: Michael Matloob <matloob@golang.org>
Date:   Sun Aug 21 13:52:23 2016 -0400

    cmd/link: remove global Bso variable
    
    Bso is already a member on ld.Link. Use that instead of
    the global.
    
    Updates #16818
    
    Change-Id: Icfc0f6cb1ff551e8129253fb6b5e0d6a94479f51
    Reviewed-on: https://go-review.googlesource.com/27470
    Run-TryBot: Michael Matloob <matloob@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1756b665980613cf655d6ecde709a032568963b0
Author: LE Manh Cuong <cuong.manhle.vn@gmail.com>
Date:   Sun Jul 31 23:10:35 2016 +0700

    os: make ExpandEnv recognize '-' as a special shell parameter
    
    '-' is one of shell special parameters.
    
    The existing implementation of isShellSpecialVar missed '-'
    from the list, causing "$-" and "${-}" expand differently.
    
    Fixes #16554
    
    Change-Id: Iafc7984692cc83cff58f7c1e01267bf78b3a20a9
    Reviewed-on: https://go-review.googlesource.com/25352
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4338e5a8914be2216de09363288177c806ef845e
Author: Michael Matloob <matloob@golang.org>
Date:   Sun Aug 21 13:52:23 2016 -0400

    cmd/link/internal: remove global Ctxt variable
    
    This change threads the *ld.Link Ctxt variable through
    code in arch-specific packages. This removes all remaining
    uses of Ctxt, so remove the global variable too.
    
    This CL continues the work in golang.org/cl/27408
    
    Updates #16818
    
    Change-Id: I5f4536847a1825fd0b944824e8ae4e122ec0fb78
    Reviewed-on: https://go-review.googlesource.com/27459
    Run-TryBot: Michael Matloob <matloob@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e2b30e900064373bce2f4ba4d3917df3de99ac69
Author: Salman Aljammaz <s@0x65.net>
Date:   Sun Aug 21 16:59:56 2016 +0100

    net/http: prepend ./ to directory list hrefs in FileServer
    
    Certain browsers (Chrome 53, Safari 9.1.2, Firefox 46) won't correctly
    follow a directory listing's links if the file name begins with a run
    of characters then a colon, e.g. "foo:bar". Probably mistaking it for
    a URI. However, they are happy to follow "./foo:bar", so this change
    prepends "./" to all link hrefs in the directory listing of
    FileServer.
    
    Change-Id: I60ee8e1ebac73cbd3a3ac0f23e80fdf52e3dc352
    Reviewed-on: https://go-review.googlesource.com/27440
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6a393dc64fb06ba17f737432a45c63233aa4bd3d
Author: Martin Möhrmann <martisch@uos.de>
Date:   Sun Aug 21 09:57:01 2016 +0200

    cmd/compile: fix compilation of math.Sqrt when used as a statement
    
    Fixes #16804
    
    Change-Id: I669c2c24d3135cd35e15a464894ac66945847d0c
    Reviewed-on: https://go-review.googlesource.com/27437
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2f783c3458744a95a01286eed5f4c0af0978cd46
Author: Michael Matloob <matloob@golang.org>
Date:   Fri Aug 19 22:40:38 2016 -0400

    cmd/link/internal: thread *ld.Link through calls
    
    Ctxt is a global defined in cmd/link/internal/ld of type *ld.Link.
    Start threading a *ld.Link through function calls instead of
    relying on the global variable.
    
    Ctxt is still used as a global by the architecture-specific packages,
    but I plan to fix that in a subsequent CL.
    
    Change-Id: I77a3a58bd396fafd959fa1d8b1c83008a9f5a7fb
    Reviewed-on: https://go-review.googlesource.com/27408
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit 4b17b152a3a3d238669c93b31de34e87c2855f6e
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sat Aug 20 21:09:53 2016 -0400

    hash/crc32: fix optimized s390x implementation
    
    The code wasn't checking to see if the data was still >= 64 bytes
    long after aligning it.
    
    Aligning the data is an optimization and we don't actually need
    to do it. In fact for smaller sizes it slows things down due to
    the overhead of calling the generic function. Therefore for now
    I have simply removed the alignment stage. I have also added a
    check into the assembly to deliberately trigger a segmentation
    fault if the data is too short.
    
    Fixes #16779.
    
    Change-Id: Ic01636d775efc5ec97689f050991cee04ce8fe73
    Reviewed-on: https://go-review.googlesource.com/27409
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 94d9cc7741a13206e139efeab84fcc589dc390e5
Author: Konstantin Shaposhnikov <k.shaposhnikov@gmail.com>
Date:   Sat Aug 20 19:29:01 2016 +0800

    index/suffixarray: add Lookup example
    
    Updates #16360
    
    Change-Id: Idd8523b5a9a496ebd9c6e3b89c30df539842a139
    Reviewed-on: https://go-review.googlesource.com/27433
    Reviewed-by: C Cirello <uldericofilho@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7995cb86e54345cb2e3911bce4da00fbb68c2dce
Author: Ian Gudger <igudger@google.com>
Date:   Fri Jul 22 16:38:27 2016 -0700

    syscall: validate ParseUnixCredentials inputs
    
    Don't panic, crash, or return references to uninitialized memory when
    ParseUnixCredentials is passed invalid input.
    
    Fixes #16475
    
    Change-Id: I140d41612e8cd8caaa94be829a415159659c217b
    Reviewed-on: https://go-review.googlesource.com/25154
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit fa897643a18d71a62bade50f80171f5e58449f5a
Author: Michael Munday <munday@ca.ibm.com>
Date:   Sat Aug 20 18:36:27 2016 +0100

    runtime: remove unnecessary calls to memclr
    
    Go will have already cleared the structs (the original C wouldn't
    have).
    
    Change-Id: I4a5a0cfd73953181affc158d188aae2ce281bb33
    Reviewed-on: https://go-review.googlesource.com/27435
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8cd04da7627576197b4fb1ef28985ac9243d13a3
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Aug 16 16:03:00 2016 -0700

    compress/flate: make huffmanBitWriter errors persistent
    
    For persistent error handling, the methods of huffmanBitWriter have to be
    consistent about how they check errors. It must either consistently
    check error *before* every operation OR immediately *after* every
    operation. Since most of the current logic uses the previous approach,
    we apply the same style of error checking to writeBits and all calls
    to Write such that they only operate if w.err is already nil going
    into them.
    
    The error handling approach is brittle and easily broken by future commits to
    the code. In the near future, we should switch the logic to use panic at the
    lowest levels and a recover at the edge of the public API to ensure
    that errors are always persistent.
    
    Fixes #16749
    
    Change-Id: Ie1d83e4ed8842f6911a31e23311cd3cbf38abe8c
    Reviewed-on: https://go-review.googlesource.com/27200
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c10f8700e065338dcacda0f4659339e86c402358
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Fri Aug 19 10:46:49 2016 -0700

    net/http/httptrace: test the order of hooks when ctx has multi ClientTraces
    
    Change-Id: I95cae14bb5561947ada9577fb05053f93321a4a8
    Reviewed-on: https://go-review.googlesource.com/27400
    Run-TryBot: Jaana Burcu Dogan <jbd@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a072fc2e6714c20699ee627f88c5a5d5b948340f
Author: Michael Matloob <matloob@golang.org>
Date:   Fri Aug 19 11:35:54 2016 -0400

    cmd/link/internal: rename LSym to Symbol, and add a doc comment.
    
    I'd also like to document some of its fields, but I don't know
    what they are.
    
    Change-Id: I87d341e255f785d351a8a73e645be668e02b2689
    Reviewed-on: https://go-review.googlesource.com/27399
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0a2a64d85d52ad51de34d39bc5685c39c0e1e32a
Author: Emmanuel Odeke <emm.odeke@gmail.com>
Date:   Sun Jul 17 14:22:15 2016 -0700

    encoding/gob: error out instead of panicking on nil dereference
    
    Do not panic when we encounter nil interface values which are
    invalid values for gob. Previously this wasn't caught yet
    we were calling reflect.*.Type() on reflect.Invalid values
    thereby causing panic:
      `panic: reflect: call of reflect.Value.Type on zero Value.`
    which is a panic not enforced by encoding/gob itself.
    We can catch this and send back an error to the caller.
    
    Fixes #16204
    
    Change-Id: Ie646796db297759a74a02eee5267713adbe0c3a0
    Reviewed-on: https://go-review.googlesource.com/24989
    Reviewed-by: Rob Pike <r@golang.org>
    Run-TryBot: Rob Pike <r@golang.org>

commit 14e59511661303ab1406f7c21ee27e58bcd0750e
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Mon Jun 27 12:23:39 2016 +0200

    runtime: increase malloc size classes
    
    When we calculate class sizes, in some cases we discard considerable
    amounts of memory without an apparent reason. For example, we choose
    size 8448 with 6 objects in 7 pages. But we can well use object
    size 9472, which is also 6 objects in 7 pages but +1024 bytes (+12.12%).
    
    Increase class sizes to the max value that leads to the same
    page count/number of objects. Full list of affected size classes:
    
    class 36: pages: 2 size: 1664->1792 +128 (7.69%)
    class 39: pages: 1 size: 2560->2688 +128 (5.0%)
    class 40: pages: 3 size: 2816->3072 +256 (9.9%)
    class 41: pages: 2 size: 3072->3200 +128 (4.16%)
    class 42: pages: 3 size: 3328->3456 +128 (3.84%)
    class 44: pages: 3 size: 4608->4864 +256 (5.55%)
    class 47: pages: 4 size: 6400->6528 +128 (2.0%)
    class 48: pages: 5 size: 6656->6784 +128 (1.92%)
    class 51: pages: 7 size: 8448->9472 +1024 (12.12%)
    class 52: pages: 6 size: 8704->9728 +1024 (11.76%)
    class 53: pages: 5 size: 9472->10240 +768 (8.10%)
    class 54: pages: 4 size: 10496->10880 +384 (3.65%)
    class 57: pages: 7 size: 14080->14336 +256 (1.81%)
    class 59: pages: 9 size: 16640->18432 +1792 (10.76%)
    class 60: pages: 7 size: 17664->19072 +1408 (7.97%)
    class 62: pages: 8 size: 21248->21760 +512 (2.40%)
    class 64: pages: 10 size: 24832->27264 +2432 (9.79%)
    class 65: pages: 7 size: 28416->28672 +256 (0.90%)
    
    name                      old time/op    new time/op    delta
    BinaryTree17-12              2.59s ± 5%     2.52s ± 4%    ~     (p=0.132 n=6+6)
    Fannkuch11-12                2.13s ± 3%     2.17s ± 3%    ~     (p=0.180 n=6+6)
    FmtFprintfEmpty-12          47.0ns ± 3%    46.6ns ± 1%    ~     (p=0.355 n=6+5)
    FmtFprintfString-12          131ns ± 0%     131ns ± 1%    ~     (p=0.476 n=4+6)
    FmtFprintfInt-12             121ns ± 6%     122ns ± 2%    ~     (p=0.511 n=6+6)
    FmtFprintfIntInt-12          182ns ± 2%     186ns ± 1%  +2.20%  (p=0.015 n=6+6)
    FmtFprintfPrefixedInt-12     184ns ± 5%     181ns ± 2%    ~     (p=0.645 n=6+6)
    FmtFprintfFloat-12           272ns ± 7%     265ns ± 1%    ~     (p=1.000 n=6+5)
    FmtManyArgs-12               783ns ± 2%     802ns ± 2%  +2.38%  (p=0.017 n=6+6)
    GobDecode-12                7.04ms ± 4%    7.00ms ± 2%    ~     (p=1.000 n=6+6)
    GobEncode-12                6.36ms ± 6%    6.17ms ± 6%    ~     (p=0.240 n=6+6)
    Gzip-12                      242ms ±14%     233ms ± 7%    ~     (p=0.310 n=6+6)
    Gunzip-12                   36.6ms ±22%    36.0ms ± 9%    ~     (p=0.841 n=5+5)
    HTTPClientServer-12         93.1µs ±29%    88.0µs ±32%    ~     (p=0.240 n=6+6)
    JSONEncode-12               27.1ms ±39%    26.2ms ±35%    ~     (p=0.589 n=6+6)
    JSONDecode-12               71.7ms ±36%    71.5ms ±36%    ~     (p=0.937 n=6+6)
    Mandelbrot200-12            4.78ms ±10%    4.70ms ±16%    ~     (p=0.394 n=6+6)
    GoParse-12                  4.86ms ±34%    4.95ms ±36%    ~     (p=1.000 n=6+6)
    RegexpMatchEasy0_32-12       110ns ±37%     110ns ±36%    ~     (p=0.660 n=6+6)
    RegexpMatchEasy0_1K-12       240ns ±38%     234ns ±47%    ~     (p=0.554 n=6+6)
    RegexpMatchEasy1_32-12      77.2ns ± 2%    77.2ns ±10%    ~     (p=0.699 n=6+6)
    RegexpMatchEasy1_1K-12       337ns ± 5%     331ns ± 4%    ~     (p=0.552 n=6+6)
    RegexpMatchMedium_32-12      125ns ±13%     132ns ±26%    ~     (p=0.561 n=6+6)
    RegexpMatchMedium_1K-12     35.9µs ± 3%    36.1µs ± 5%    ~     (p=0.818 n=6+6)
    RegexpMatchHard_32-12       1.81µs ± 4%    1.82µs ± 5%    ~     (p=0.452 n=5+5)
    RegexpMatchHard_1K-12       52.4µs ± 2%    54.4µs ± 3%  +3.84%  (p=0.002 n=6+6)
    Revcomp-12                   401ms ± 2%     390ms ± 1%  -2.82%  (p=0.002 n=6+6)
    Template-12                 54.5ms ± 3%    54.6ms ± 1%    ~     (p=0.589 n=6+6)
    TimeParse-12                 294ns ± 1%     298ns ± 2%    ~     (p=0.160 n=6+6)
    TimeFormat-12                323ns ± 4%     318ns ± 5%    ~     (p=0.297 n=6+6)
    
    name                      old speed      new speed      delta
    GobDecode-12               109MB/s ± 4%   110MB/s ± 2%    ~     (p=1.000 n=6+6)
    GobEncode-12               121MB/s ± 6%   125MB/s ± 6%    ~     (p=0.240 n=6+6)
    Gzip-12                   80.4MB/s ±12%  83.3MB/s ± 7%    ~     (p=0.310 n=6+6)
    Gunzip-12                  495MB/s ±41%   541MB/s ± 9%    ~     (p=0.931 n=6+5)
    JSONEncode-12             80.7MB/s ±39%  82.8MB/s ±34%    ~     (p=0.589 n=6+6)
    JSONDecode-12             30.4MB/s ±40%  31.0MB/s ±37%    ~     (p=0.937 n=6+6)
    GoParse-12                13.2MB/s ±33%  13.2MB/s ±35%    ~     (p=1.000 n=6+6)
    RegexpMatchEasy0_32-12     321MB/s ±34%   326MB/s ±34%    ~     (p=0.699 n=6+6)
    RegexpMatchEasy0_1K-12    4.49GB/s ±31%  4.74GB/s ±37%    ~     (p=0.589 n=6+6)
    RegexpMatchEasy1_32-12     414MB/s ± 2%   415MB/s ± 9%    ~     (p=0.699 n=6+6)
    RegexpMatchEasy1_1K-12    3.03GB/s ± 5%  3.09GB/s ± 4%    ~     (p=0.699 n=6+6)
    RegexpMatchMedium_32-12   7.99MB/s ±12%  7.68MB/s ±22%    ~     (p=0.589 n=6+6)
    RegexpMatchMedium_1K-12   28.5MB/s ± 3%  28.4MB/s ± 5%    ~     (p=0.818 n=6+6)
    RegexpMatchHard_32-12     17.7MB/s ± 4%  17.0MB/s ±15%    ~     (p=0.351 n=5+6)
    RegexpMatchHard_1K-12     19.6MB/s ± 2%  18.8MB/s ± 3%  -3.67%  (p=0.002 n=6+6)
    Revcomp-12                 634MB/s ± 2%   653MB/s ± 1%  +2.89%  (p=0.002 n=6+6)
    Template-12               35.6MB/s ± 3%  35.5MB/s ± 1%    ~     (p=0.615 n=6+6)
    
    Change-Id: I465a47f74227f316e3abea231444f48c7a30ef85
    Reviewed-on: https://go-review.googlesource.com/24493
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

commit ab9137dd24e10a9f884475413437cc31e48dbdf7
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Fri Aug 19 11:13:11 2016 -0700

    context: test WithCancel with canceled parent
    
    Change-Id: I32079cc12cfffb8520f0073a8b5119705dc0cd1b
    Reviewed-on: https://go-review.googlesource.com/27401
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3de7dbb19145dcc6b7db8da7aef695961dbb5ece
Author: Austin Clements <austin@google.com>
Date:   Fri Aug 19 16:03:14 2016 -0400

    runtime: fix check for vacuous page boundary rounding again
    
    The previous fix for this, commit 336dad2a, had everything right in
    the commit message, but reversed the test in the code. Fix the test in
    the code.
    
    This reversal effectively disabled the scavenger on large page systems
    *except* in the rare cases where this code was originally wrong, which
    is why it didn't obviously show up in testing.
    
    Fixes #16644. Again. :(
    
    Change-Id: I27cce4aea13de217197db4b628f17860f27ce83e
    Reviewed-on: https://go-review.googlesource.com/27402
    Run-TryBot: Austin Clements <austin@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a50f9859bd15784d047875624c9fa91ce69bd85b
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Mon Aug 8 15:41:18 2016 +0200

    internal/trace: fix analysis of EvGoWaiting/EvGoInSyscall events
    
    When tracing is started in the middle of program execution,
    we already have a number of runnable goroutines and a number
    of blocked/in syscall goroutines. In order to reflect these
    goroutines in the trace, we emit EvGoCreate for all existing
    goroutines. Then for blocked/in syscall goroutines we additionally
    emit EvGoWaiting/EvGoInSyscall events. These events don't reset g.ev
    during trace analysis. So next EvGoStart finds g.ev set to the
    previous EvGoCreate. As the result time between EvGoCreate and
    EvGoStart is accounted as scheduler latency. While in reality
    it is blocking/syscall time.
    
    Properly reset g.ev for EvGoWaiting/EvGoInSyscall events.
    
    Change-Id: I0615ba31ed7567600a0667ebb27458481da73adb
    Reviewed-on: https://go-review.googlesource.com/25572
    Reviewed-by: Hyang-Ah Hana Kim <hyangah@gmail.com>

commit 93372673ce51b9462d7ae0f87ac28ffe0c2ad37d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Aug 18 19:21:26 2016 -0700

    io: fix infinite loop bug in MultiReader
    
    If an io.Reader returned (non-zero, EOF), MultiReader would yield
    bytes forever.
    
    This bug has existed before Go 1 (!!), introduced in the original
    MultiReader implementation in https://golang.org/cl/1764043 and also
    survived basically the only update to this code since then
    (https://golang.org/cl/17873, git rev ccdca832c), which was added in
    Go 1.7.
    
    This just bit me when writing a test for some unrelated code.
    
    Fixes #16795
    
    Change-Id: I36e6a701269793935d19a47ac12f67b07179fbff
    Reviewed-on: https://go-review.googlesource.com/27397
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>

commit 244efebe7faa30c087a19a09eb2c72ef4c1824d9
Author: Austin Clements <austin@google.com>
Date:   Sun Jul 17 22:22:32 2016 -0400

    runtime: fix out of date comments
    
    The transition from mark 1 to mark 2 no longer enqueues new root
    marking jobs, but some of the comments still refer to this. Fix these
    comments.
    
    Change-Id: I3f98628dba32c5afe30495ab495da42b32291e9e
    Reviewed-on: https://go-review.googlesource.com/24965
    Reviewed-by: Rick Hudson <rlh@golang.org>

commit 8ad70a549364c216c386afcead4dccfdcd39748b
Author: Adam Langley <agl@golang.org>
Date:   Thu Aug 18 16:44:08 2016 -0700

    crypto/x509: allow a leaf certificate to be specified directly as root.
    
    In other systems, putting a leaf certificate in the root store works to
    express that exactly that certificate is acceptable. This change makes
    that work in Go too.
    
    Fixes #16763.
    
    Change-Id: I5c0a8dbc47aa631b23dd49061fb217ed8b0c719c
    Reviewed-on: https://go-review.googlesource.com/27393
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit bcd54f6ca514ae0e347c780b45d743f2c4145bf3
Author: Adam Langley <agl@golang.org>
Date:   Thu Aug 18 17:14:43 2016 -0700

    crypto/x509: recognise ISO OID for RSA+SHA1
    
    For some reason, ISO decided to duplicate the OID for RSA+SHA1. Most
    pertinantly, the makecert.exe utility on Windows is known to have used
    this OID.
    
    This change makes the ISO OID an alias for the normal one.
    
    Change-Id: I60b76265bf1721282bdb0d5c99c98d227c18a878
    Reviewed-on: https://go-review.googlesource.com/27394
    Run-TryBot: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 0da545d1280af9895bacff587316b68f50799f16
Author: Adam Langley <agl@golang.org>
Date:   Thu Aug 18 16:20:44 2016 -0700

    encoding/pem: be stricter about the ending line.
    
    Previously the code didn't check the type and final five dashes of the
    ending line of a PEM block.
    
    Fixes #16335.
    
    Change-Id: Ia544e8739ea738d767cfe56c8d46204214ec0b5a
    Reviewed-on: https://go-review.googlesource.com/27391
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit a25a7ad70323e8edea4b607aad7c9d2bb96fcc82
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Aug 18 18:24:21 2016 -0700

    cmd/internal/obj: update Bool2int to the form optimized by the compiler
    
    As of https://golang.org/cl/22711 the compiler optimizes this form.
    
    Updates #6011
    
    Change-Id: Ibc6c529dfa24d42f4aab78ebd6722e1d72cb6038
    Reviewed-on: https://go-review.googlesource.com/27395
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 70544c91ffac19f5ffa66c59e3097f3f1fe900f8
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Jun 6 17:59:05 2016 -0700

    cmd/compile/internal/syntax: match old parser errors and line numbers
    
    This makes a bunch of changes to package syntax to tweak line numbers
    for AST nodes. For example, short variable declaration statements are
    now associated with the location of the ":=" token, and function calls
    are associated with the location of the final ")" token. These help
    satisfy many unit tests that assume the old parser's behavior.
    
    Because many of these changes are questionable, they're guarded behind
    a new "gcCompat" const to make them easy to identify and revisit in
    the future.
    
    A handful of remaining tests are too difficult to make behave
    identically. These have been updated to execute with -newparser=0 and
    comments explaining why they need to be fixed.
    
    all.bash now passes with both the old and new parsers.
    
    Change-Id: Iab834b71ca8698d39269f261eb5c92a0d55a3bf4
    Reviewed-on: https://go-review.googlesource.com/27199
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 2ff463948c92e71651a31c621826281035a7071a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri May 6 23:17:29 2016 -0700

    cmd/compile/internal/gc: use new AST parser
    
    Introduce a new noder type to transform package syntax's AST into gc's
    Node tree. Hidden behind a new -newparser flag.
    
    Change-Id: Id0e862ef6196c41533876afc4ec289e21d422d18
    Reviewed-on: https://go-review.googlesource.com/27198
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 117793624b630b0ee63abb16dcb019301adc6472
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Aug 16 13:33:29 2016 -0700

    cmd/compile/internal/syntax: expose additional information for gc
    
    gc needs access to line offsets for Nodes. It also needs access to the
    end line offset for function bodies so it knows what line number to
    use for things like implicit returns and defer executions.
    
    Lastly, include an extra bool to distinguish between simple and full
    slice expressions. This is redundant in valid parse trees, but needed
    by gc for producing complete warnings in invalid inputs.
    
    Change-Id: I64baf334a35c72336d26fa6755c67eb9d6f4e93c
    Reviewed-on: https://go-review.googlesource.com/27196
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4e8c11379345f08ccf47239f7e0ea192917f602a
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Aug 17 14:32:49 2016 +0000

    log/syslog: document that Dial uses net.Dial parameters, add example
    
    Fixes #16761
    
    Change-Id: I709daa87926a31e5f8fd46a4c5ef69718ae349b1
    Reviewed-on: https://go-review.googlesource.com/27209
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit 55ea153b785249cfa9b15550d78eeb3df7d825d8
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Aug 18 05:26:51 2016 +0000

    os: reference LookupEnv from the Getenv docs
    
    Fixes #16782
    
    Change-Id: If54917bf5ca1588d8a6d443c3aa6e1d4ada6b620
    Reviewed-on: https://go-review.googlesource.com/27322
    Reviewed-by: anatoly techtonik <techtonik@gmail.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 794442375d87e57d012bab2d7424575f6cdff018
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 18 17:05:54 2016 -0700

    cmd/vet: allow large shifts of constants
    
    Large shifts of constants are frequently
    used for fancy 32/64 bit detection.
    
    This removes 14 false positives from the
    standard library.
    
    Updates #11041
    
    Change-Id: Ib39346e5c161da04c38a6a3067932ef43bf74f2d
    Reviewed-on: https://go-review.googlesource.com/27155
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 4e79c152b1625857f9b8cdcde59fcf44dc11e95a
Author: Adam Langley <agl@golang.org>
Date:   Wed Aug 17 17:38:06 2016 -0700

    crypto/tls: don't generate random ticket keys if already set.
    
    If SetSessionTicketKeys was called on a fresh tls.Config, the configured
    keys would be overridden with a random key by serverInit.
    
    Fixes #15421.
    
    Change-Id: I5d6cc81fc3e5de4dfa15eb614d102fb886150d1b
    Reviewed-on: https://go-review.googlesource.com/27317
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 89d085de9fbc177ed53f09851b87f920c0322f67
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Aug 18 15:22:32 2016 -0700

    go/types: better doc string for Object.Parent and test
    
    Fixes #14647.
    
    Change-Id: Ib9012a9141e815f5b95f8ca2307e65ffc4587a5b
    Reviewed-on: https://go-review.googlesource.com/27370
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit da2a938910f0401ccd0396891c17b8f8974263de
Author: Adam Langley <agl@golang.org>
Date:   Thu Aug 18 14:49:01 2016 -0700

    crypto/tls: fix comment typo.
    
    This was pointed out in https://go-review.googlesource.com/#/c/27315/1
    but I changed and uploaded the wrong branch. This actually makes the
    fix.
    
    Change-Id: Ib615b06c9141b914648b6abbeeb688c5ffa0d2e3
    Reviewed-on: https://go-review.googlesource.com/27360
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 35bddbba278fe0528b1399ab317b5e8128f02201
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Aug 18 21:50:58 2016 +0000

    doc: upate go1.8.txt
    
    Change-Id: I42597785be6121d8180520b3f7d8e936464f0048
    Reviewed-on: https://go-review.googlesource.com/27361
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 8741504888b8ca77736716926e472e90c0e1f765
Author: Adam Langley <agl@golang.org>
Date:   Wed Aug 17 16:45:47 2016 -0700

    crypto/tls: support AES-128-CBC cipher suites with SHA-256.
    
    These were new with TLS 1.2 and, reportedly, some servers require it.
    Since it's easy, this change adds suport for three flavours of
    AES-128-CBC with SHA-256 MACs.
    
    Other testdata/ files have to be updated because this changes the list
    of cipher suites offered by default by the client.
    
    Fixes #15487.
    
    Change-Id: I1b14330c31eeda20185409a37072343552c3464f
    Reviewed-on: https://go-review.googlesource.com/27315
    Run-TryBot: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Jonathan Rudenberg <jonathan@titanous.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ab0bd26da520db67add7e8cfd07b89ffe89df46d
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Aug 18 21:39:16 2016 +0000

    doc: update go1.8.txt
    
    Change-Id: I9a7654a6d623add8542a1c34ccc76ea136a9a7e3
    Reviewed-on: https://go-review.googlesource.com/27359
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 36f61ed7ed962a25f41ecd6ab57cbaa5ce938bf1
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri May 6 23:16:15 2016 -0700

    cmd/dist: build cmd/compile/internal/syntax
    
    Change-Id: Ie6dd2318e031be445c0b1ae65d4c78723d5a1167
    Reviewed-on: https://go-review.googlesource.com/27197
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit c8683ff7977c526fb48ae007971fed16ef32ff62
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Mar 4 17:09:08 2016 -0800

    cmd/compile/internal/syntax: fast Go syntax trees, initial commit.
    
    Syntax tree nodes, scanner, parser, basic printers.
    
    Builds syntax trees for entire Go std lib at a rate of ~1.8M lines/s
    in warmed up state (MacMini, 2.3 GHz Intel Core i7, 8GB RAM):
    
    $ go test -run StdLib -fast
    parsed 1074617 lines (2832 files) in 579.66364ms (1853863 lines/s)
    allocated 282.212Mb (486.854Mb/s)
    PASS
    
    Change-Id: Ie26d9a7bf4e5ff07457aedfcc9b89f0eba72ae3f
    Reviewed-on: https://go-review.googlesource.com/27195
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 3b967be4219c789ef9c47aa5e9607cab3005e1cd
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Aug 18 13:22:22 2016 -0700

    spec: undo spec date change introduced by prior commit
    
    I accidentally included a modified spec in
    https://go-review.googlesource.com/27290 .
    Remove that change.
    
    Change-Id: Icb62fe829072860e9eb74865d21e06f30efcfd26
    Reviewed-on: https://go-review.googlesource.com/27357
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit fd8028dec92166545d080de99021c9c51f05c670
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 17 15:35:15 2016 -0700

    go/types: fix scope extents for range and type switch variables
    
    The changes match the existing compilers, and assume an adjusted
    spec (per issue #16794).
    
    Fixes #15686.
    
    Change-Id: I72677ce75888c41a8f3c2963117a2f2d5501c42b
    Reviewed-on: https://go-review.googlesource.com/27290
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 604efe128195c1fbb1d14cbd36bf681fcff723a3
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 17 16:22:24 2016 -0700

    runtime: disable TestCgoCallbackGC on FreeBSD
    
    The trybot flakes are a nuisance.
    
    Updates #16396
    
    Change-Id: I8202adb554391676ba82bca44d784c6a81bf2085
    Reviewed-on: https://go-review.googlesource.com/27313
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 021f2432131d9bdaa4e89592129a540324f9f22d
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 17 17:05:31 2016 -0700

    go/types: set Info.Types.Type for array composite literals of the form [...]T
    
    Fixes #14092.
    
    Change-Id: I00692f60a416348e38cab256b94fda07e334d258
    Reviewed-on: https://go-review.googlesource.com/27316
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 29df4c8f0004aa259093bf8dbf0bf966a392d44d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Aug 17 16:23:40 2016 -0700

    unsafe: document use of &^ to round/align pointers
    
    Follow-up to CL 27156
    
    Change-Id: I4f1cfced2dced9c9fc8a05bbc00ec4229e85c5c9
    Reviewed-on: https://go-review.googlesource.com/27314
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit a7277e5494c696a4798b99e1e55d55acf61211de
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Aug 17 21:23:36 2016 -0400

    cmd/compile: compare size in dead store elimination
    
    Only remove stores that is shadowed by another store with same or
    larger size. Normally we don't need this check because we did check
    the types, but unsafe pointer casting can get around it.
    
    Fixes #16769.
    
    Change-Id: I3f7c6c57807b590a2f735007dec6c65a4fa01a34
    Reviewed-on: https://go-review.googlesource.com/27320
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5b9ff11c3d50368c44ae7aa9cb4b58c67494e7bb
Author: David Chase <drchase@google.com>
Date:   Mon Aug 15 13:51:00 2016 -0700

    cmd/compile: ppc64le working, not optimized enough
    
    This time with the cherry-pick from the proper patch of
    the old CL.
    
    Stack size increased.
    Corrected NaN-comparison glitches.
    Marked g register as clobbered by calls.
    Fixed shared libraries.
    
    live_ssa.go still disabled because of differences.
    Presumably turning on more optimization will fix
    both the stack size and the live_ssa.go glitches.
    
    Enhanced debugging output for shared libs test.
    
    Rebased onto master.
    
    Updates #16010.
    
    Change-Id: I40864faf1ef32c118fb141b7ef8e854498e6b2c4
    Reviewed-on: https://go-review.googlesource.com/27159
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit dea6dab40c589b486ee6643db3e1204c3379aaee
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Aug 18 15:50:30 2016 +0000

    cmd/yacc: remove go tool yacc
    
    It is no longer used by Go.
    
    It's now moved to golang.org/x/tools/cmd/goyacc for anybody who needs it.
    
    Fixes #11229
    
    Change-Id: Ia431d5a380c7ff784a2050dee2f5bc8acee015da
    Reviewed-on: https://go-review.googlesource.com/27325
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 795ad07b3be3cb51e07d502409f815f7d1f97305
Author: Michael Matloob <matloob@golang.org>
Date:   Thu Jul 28 13:04:41 2016 -0400

    cmd: generate DWARF for functions in compile instead of link.
    
    This is a copy of golang.org/cl/22092 by Ryan Brown.
    
    Here's his original comment:
    On my machine this increases the average time for 'go build cmd/go' from
    2.25s to 2.36s. I tried to measure compile and link separately but saw
    no significant change.
    
    Change-Id: If0d2b756d52a0d30d4eda526929c82794d89dd7b
    Reviewed-on: https://go-review.googlesource.com/25311
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 11e93aa24a61e0c4b25600bf2a681b8779371fe8
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 7 16:09:08 2016 -0700

    cmd/vet: allow any printf verb with any interface
    
    fmt treats interfaces as being transparent.
    As a result, we cannot say with confidence
    that any particular verb is wrong.
    
    This fixes the following vet false positives
    in the standard library:
    
    database/sql/sql_test.go:210: arg dep for printf verb %p of wrong type: sql.finalCloser
    fmt/fmt_test.go:1663: arg nil for printf verb %s of wrong type: untyped nil
    go/ast/commentmap.go:328: arg node for printf verb %p of wrong type: ast.Node
    net/http/transport_test.go:120: arg c for printf verb %p of wrong type: net.Conn
    net/http/httptest/server.go:198: arg c for printf verb %p of wrong type: net.Conn
    net/http/httputil/dump_test.go:258: arg body for printf verb %p of wrong type: io.Reader
    reflect/set_test.go:81: arg x for printf verb %p of wrong type: io.Writer
    reflect/set_test.go:141: arg bb for printf verb %p of wrong type: io.Reader
    
    Updates #11041
    Updates #16314
    
    Change-Id: I76df01abb3c34a97b6960f551bed9c1c91377cfc
    Reviewed-on: https://go-review.googlesource.com/27127
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 0ece9c4b592502647699c2b15d9f0b7332b26de6
Author: Alex Brainman <alex.brainman@gmail.com>
Date:   Wed Aug 17 14:57:07 2016 +1000

    debug/pe: revert CL 22720
    
    CL 22720 hid all recently added functionality for go1.7.
    Make everything exported again, so we could use it now.
    
    Updates #15345
    
    Change-Id: Id8ccba7199422b554407ec14c343d2c28fbb8f72
    Reviewed-on: https://go-review.googlesource.com/27212
    Run-TryBot: Alex Brainman <alex.brainman@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit e41b0e2bcb2667425b7eb223baa2b9945466651b
Author: Adam Langley <agl@golang.org>
Date:   Tue Jul 5 13:50:18 2016 -0700

    crypto/x509: support PSS signatures.
    
    Although the term “RSA” is almost synonymous with PKCS#1 v1.5, that
    standard is quite flawed, cryptographically speaking. Bellare and
    Rogaway fixed PKCS#1 v1.5 with OAEP (for encryption) and PSS (for
    signatures) but they only see a fraction of the use of v1.5.
    
    This change adds support for creating and verifying X.509 certificates
    that use PSS signatures. Sadly, every possible dimension of flexibility
    seems to have been reflected in the integration of X.509 and PSS
    resulting in a huge amount of excess complexity. This change only
    supports one “sane” configuration for each of SHA-{256, 384, 512}.
    Hopefully this is sufficient because it saves a lot of complexity in the
    code.
    
    Although X.509 certificates with PSS signatures are rare, I'm inclined
    to look favourably on them because they are sufficiently superior.
    
    Fixes #15958.
    
    Change-Id: I7282e0b68ad0177209f8b2add473b94aa5224c07
    Reviewed-on: https://go-review.googlesource.com/24743
    Run-TryBot: Adam Langley <agl@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 59aeac20c0412442848982a9287b4bab66c25682
Author: Adam Langley <agl@golang.org>
Date:   Wed Aug 17 15:55:15 2016 -0700

    crypto/x509: require a NULL parameters for RSA public keys.
    
    The RFC is clear that the Parameters in an AlgorithmIdentifer for an RSA
    public key must be NULL. BoringSSL enforces this so we have strong
    evidence that this is a widely compatible change.
    
    Embarrassingly enough, the major source of violations of this is us. Go
    used to get this correct in only one of two places. This was only fixed
    in 2013 (with 4874bc9b). That's why lots of test certificates are
    updated in this change.
    
    Fixes #16166.
    
    Change-Id: Ib9a4551349354c66e730d44eb8cee4ec402ea8ab
    Reviewed-on: https://go-review.googlesource.com/27312
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 57370a87d80be0ab588eb8bb9a5e2a31f4613355
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Wed Aug 17 20:34:09 2016 +0200

    encoding/hex: change lookup table from string to array
    
    name            old time/op  new time/op  delta
    Encode/256-4     431ns ± 2%   391ns ± 2%   -9.36%  (p=0.000 n=8+8)
    Encode/1024-4   1.68µs ± 0%  1.51µs ± 0%   -9.91%  (p=0.001 n=7+7)
    Encode/4096-4   6.68µs ± 0%  6.03µs ± 1%   -9.69%  (p=0.000 n=8+8)
    Encode/16384-4  27.0µs ± 1%  24.0µs ± 0%  -11.03%  (p=0.000 n=8+7)
    
    Change-Id: I6994e02f77797349c4e188377d84f97dffe98399
    Reviewed-on: https://go-review.googlesource.com/27254
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 17eee31020b982c10a2bf21f446743137968240b
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 17 15:56:29 2016 -0700

    go/types: enable disabled test for comma-ok expressions
    
    This was fixed long ago but the test was not enabled.
    
    For #8189.
    
    Change-Id: Ia44ef752b6bf076f3e243d2d0db326a392a20193
    Reviewed-on: https://go-review.googlesource.com/27310
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 69371671c722d3fcc4f2e1c57dd6a40fc4973ebc
Author: Adam Langley <agl@golang.org>
Date:   Wed Aug 17 13:18:43 2016 -0700

    crypto/hmac: don't test for length equality in Equal.
    
    subtle.ConstantTimeCompare now tests the length of the inputs (although
    it didn't when this code was written) so this test in crypto/hmac is now
    superfluous.
    
    Fixes #16336.
    
    Change-Id: Ic02d8537e776fa1dd5694d3af07a28c4d840d14b
    Reviewed-on: https://go-review.googlesource.com/27239
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b23b9a762c4f876a9f7575fa512074a386e3c6e1
Author: Adam Langley <agl@golang.org>
Date:   Wed Aug 17 13:15:28 2016 -0700

    crypto/x509: return error for missing SerialNumber.
    
    If the SerialNumber is nil in the template then the resulting panic is
    rather deep in encoding/asn1 and it's not obvious what went wrong.
    
    This change tests and returns a more helpful error in this case.
    
    Fixes #16603.
    
    Change-Id: Ib30d652555191eb78f705dff8d909e4b5808f9ca
    Reviewed-on: https://go-review.googlesource.com/27238
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c2322b7ea60f85b4fd3d566b17ab3f7dcb865c1a
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Wed Aug 17 16:08:10 2016 -0700

    runtime: fix the absolute URL to pprof tools
    
    Change-Id: I82eaf5c14a5b8b9ec088409f946adf7b5fd5dbe3
    Reviewed-on: https://go-review.googlesource.com/27311
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c3f05d95932c0d3d2b8461099ce82fa917c7b8a3
Author: Jess Frazelle <me@jessfraz.com>
Date:   Wed Aug 17 13:27:17 2016 -0700

    text/template: remove unused Tree.parse return value
    
    Fixes #13993
    
    Change-Id: Ic61b2bcd9f4f71457d3a8581574633d505d5750e
    Reviewed-on: https://go-review.googlesource.com/27240
    Run-TryBot: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit d1272a8b5c429ed1f43f2935adcb6366abc80c05
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Aug 17 14:05:47 2016 -0700

    go/types: better error message for invalid fallthrough case
    
    Now matches the gc compiler.
    
    Fixes #15594.
    
    Change-Id: I9f3942367bc0acf883c6216b8ca44820832f5fe3
    Reviewed-on: https://go-review.googlesource.com/27241
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 0c819b654f0e2b24f418aeac5c5627516905eda9
Author: Radu Berinde <radu@cockroachlabs.com>
Date:   Tue Aug 16 08:05:39 2016 -0400

    hash/crc32: improve the processing of the last bytes in the SSE4.2 code for AMD64
    
    This commit improves the processing of the final few bytes in
    castagnoliSSE42: instead of processing one byte at a time, we use all
    versions of the CRC32 instruction to process 4 bytes, then 2, then 1.
    The difference is only noticeable for small "odd" sized buffers.
    
    We do the similar improvement for processing the first few bytes in
    the case of unaligned buffer.
    
    Fixing the test which was not actually verifying the results for
    misaligned buffers (WriteString was creating an internal copy which
    was aligned).
    
    Adding benchmarks for length 15 (aligned and misaligned), results
    below.
    
    name                          old time/op    new time/op    delta
    CastagnoliCrc15B-4              25.1ns ± 0%    22.1ns ± 1%  -12.14%
    CastagnoliCrc15BMisaligned-4    25.2ns ± 0%    22.9ns ± 1%   -9.03%
    CastagnoliCrc40B-4              23.1ns ± 0%    23.4ns ± 0%   +1.08%
    CastagnoliCrc1KB-4               127ns ± 0%     128ns ± 0%   +1.18%
    CastagnoliCrc4KB-4               462ns ± 0%     464ns ± 0%     ~
    CastagnoliCrc32KB-4             3.58µs ± 0%    3.60µs ± 0%   +0.58%
    
    name                          old speed      new speed      delta
    CastagnoliCrc15B-4             597MB/s ± 0%   679MB/s ± 1%  +13.77%
    CastagnoliCrc15BMisaligned-4   596MB/s ± 0%   655MB/s ± 1%   +9.94%
    CastagnoliCrc40B-4            1.73GB/s ± 0%  1.71GB/s ± 0%   -1.14%
    CastagnoliCrc1KB-4            8.01GB/s ± 0%  7.93GB/s ± 1%   -1.06%
    CastagnoliCrc4KB-4            8.86GB/s ± 0%  8.83GB/s ± 0%     ~
    CastagnoliCrc32KB-4           9.14GB/s ± 0%  9.09GB/s ± 0%   -0.58%
    
    Change-Id: I499e37af2241d28e3e5d522bbab836c1a718430a
    Reviewed-on: https://go-review.googlesource.com/24470
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3d5cf72ca9beaedc5dcc8b094945de95fa35a670
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Aug 17 13:29:19 2016 -0400

    cmd/compile: CSE copied tuple selectors
    
    In CSE if a tuple generator is CSE'd to a different block, its
    selectors are copied to the same block. In this case, also CES
    the copied selectors.
    
    Test copied from Keith's CL 27202.
    
    Fixes #16741.
    
    Change-Id: I2fc8b9513d430f10d6104275cfff5fb75d3ef3d9
    Reviewed-on: https://go-review.googlesource.com/27236
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2b8e143dc302d2f3817cb3df1c1cc0b2cde3bbc1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 11 12:19:51 2016 -0700

    cmd/vet: infer asm arch from build context
    
    If we cannot infer the asm arch from the filename
    or the build tags, assume that it is the
    current build arch. Assembly files with no
    restrictions ought to be usable on all arches.
    
    Updates #11041
    
    Change-Id: I0ae807dbbd5fb67ca21d0157fe180237a074113a
    Reviewed-on: https://go-review.googlesource.com/27151
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit 752e16158751165c53538a564ca0a8bd7ba84f1f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 18 17:33:05 2016 -0700

    cmd/vet: allow ^& uintptr arithmetic
    
    The unsafe.Pointer check allows adding to
    and subtracting from uintptrs in order to do
    arithmetic.
    
    Some code needs to round uintptrs.
    Allow &^ for that purpose.
    
    Updates #11041
    
    Change-Id: Ib90dd2954bb6c78427058271e13f2ce4c4af38fb
    Reviewed-on: https://go-review.googlesource.com/27156
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>

commit ebcd17979326b44f445cdfe7640dc53cf14c19ca
Author: Atin M <amalaviy@akamai.com>
Date:   Fri May 6 12:20:12 2016 -0400

    crypto/tls: set Conn.ConnectionState.ServerName unconditionally
    
    Moves the state.ServerName assignment to outside the if
    statement that checks for handshakeComplete.
    
    Fixes #15571
    
    Change-Id: I6c4131ddb16389aed1c410a975f9aa3b52816965
    Reviewed-on: https://go-review.googlesource.com/22862
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>

commit 659dd4f1d7ed4e040d32346fa18c4ae3311ed81a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Aug 16 14:17:33 2016 -0400

    cmd/compile: add more ARM64 optimizations
    
    - Use machine instructions for uint64<->float conversions
    - Do not enforce alignment on Zero/Move
            ARM64 supports unaligned load/stores, but only aligned offset
            or small offset can be encoded into instructions.
    - Do combined loads
    
    Change-Id: Iffca7dd0f13070b17b784861ce5a30af584680eb
    Reviewed-on: https://go-review.googlesource.com/27086
    Reviewed-by: David Chase <drchase@google.com>

commit cda633b39b1353d23965337fb3118a3fc532a0c1
Author: Alberto Donizetti <alb.donizetti@gmail.com>
Date:   Wed May 11 20:55:53 2016 +0200

    math/big: avoid allocation in float.{Add, Sub} when there's no aliasing
    
    name               old time/op    new time/op    delta
    FloatAdd/10-4         116ns ± 1%      82ns ± 0%   -28.74%  (p=0.008 n=5+5)
    FloatAdd/100-4        124ns ± 0%      86ns ± 1%   -30.34%  (p=0.016 n=4+5)
    FloatAdd/1000-4       192ns ± 1%     123ns ± 0%   -35.94%  (p=0.008 n=5+5)
    FloatAdd/10000-4      826ns ± 0%     438ns ± 0%   -46.99%  (p=0.000 n=4+5)
    FloatAdd/100000-4    6.82µs ± 1%    3.36µs ± 0%   -50.74%  (p=0.008 n=5+5)
    FloatSub/10-4         108ns ± 1%      77ns ± 1%   -29.06%  (p=0.008 n=5+5)
    FloatSub/100-4        115ns ± 0%      79ns ± 0%   -31.48%  (p=0.029 n=4+4)
    FloatSub/1000-4       168ns ± 0%      99ns ± 0%   -41.09%  (p=0.029 n=4+4)
    FloatSub/10000-4      690ns ± 2%     288ns ± 1%   -58.24%  (p=0.008 n=5+5)
    FloatSub/100000-4    5.37µs ± 1%    2.10µs ± 1%   -60.89%  (p=0.008 n=5+5)
    
    name               old alloc/op   new alloc/op   delta
    FloatAdd/10-4         48.0B ± 0%     0.0B ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatAdd/100-4        64.0B ± 0%     0.0B ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatAdd/1000-4        176B ± 0%       0B ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatAdd/10000-4     1.41kB ± 0%   0.00kB ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatAdd/100000-4    13.6kB ± 0%    0.0kB ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatSub/10-4         48.0B ± 0%     0.0B ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatSub/100-4        64.0B ± 0%     0.0B ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatSub/1000-4        176B ± 0%       0B ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatSub/10000-4     1.41kB ± 0%   0.00kB ±NaN%  -100.00%  (p=0.008 n=5+5)
    FloatSub/100000-4    13.6kB ± 0%    0.0kB ±NaN%  -100.00%  (p=0.008 n=5+5)
    
    Fixes #14868
    
    Change-Id: Ia2b8b1a8ef0868288ecb25f812b17bd03ff40d1c
    Reviewed-on: https://go-review.googlesource.com/23568
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit f542576b9e576758b7e0a8ec7f8d07b5d0c1f29a
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Jun 24 15:03:04 2016 -0700

    cmd/compile: add compiler phase timing
    
    Timings is a simple data structure that collects times of labeled
    Start/Stop events describing timed phases, which later can be written
    to a file.
    
    Adjacent phases with common label prefix are automatically collected
    in a group together with the accumulated phase time.
    
    Timing data can be appended to a file in benchmark data format
    using the new -bench flag:
    
    $ go build -gcflags="-bench=/dev/stdout" -o /dev/null go/types
    commit: devel +8847c6b Mon Aug 15 17:51:53 2016 -0700
    goos: darwin
    goarch: amd64
    BenchmarkCompile:go/types:fe:init              1       663292 ns/op      0.07 %
    BenchmarkCompile:go/types:fe:loadsys           1      1337371 ns/op      0.14 %
    BenchmarkCompile:go/types:fe:parse             1     47008869 ns/op      4.91 %    10824 lines    230254 lines/s
    BenchmarkCompile:go/types:fe:typecheck:top1    1      2843343 ns/op      0.30 %
    BenchmarkCompile:go/types:fe:typecheck:top2    1       447457 ns/op      0.05 %
    BenchmarkCompile:go/types:fe:typecheck:func    1     15119595 ns/op      1.58 %      427 funcs     28241 funcs/s
    BenchmarkCompile:go/types:fe:capturevars       1        56314 ns/op      0.01 %
    BenchmarkCompile:go/types:fe:inlining          1      9805767 ns/op      1.02 %
    BenchmarkCompile:go/types:fe:escapes           1     53598646 ns/op      5.60 %
    BenchmarkCompile:go/types:fe:xclosures         1       199302 ns/op      0.02 %
    BenchmarkCompile:go/types:fe:subtotal          1    131079956 ns/op     13.70 %
    BenchmarkCompile:go/types:be:compilefuncs      1    692009428 ns/op     72.33 %      427 funcs       617 funcs/s
    BenchmarkCompile:go/types:be:externaldcls      1        54591 ns/op      0.01 %
    BenchmarkCompile:go/types:be:dumpobj           1    133478173 ns/op     13.95 %
    BenchmarkCompile:go/types:be:subtotal          1    825542192 ns/op     86.29 %
    BenchmarkCompile:go/types:unaccounted          1       106101 ns/op      0.01 %
    BenchmarkCompile:go/types:total                1    956728249 ns/op    100.00 %
    
    For #16169.
    
    Change-Id: I93265fe0cb08e47cd413608d0824c5dd35ba7899
    Reviewed-on: https://go-review.googlesource.com/24462
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 289df4e6e65466716aaf1cf65fcfdedada2a5599
Author: Tom Wilkie <tom@weave.works>
Date:   Wed Aug 17 10:13:03 2016 +0100

    net: don't avoid resolving .local addresses
    
    .local addresses are used by things like Kubernetes and Weave DNS; Go
    should not avoid resolving them.
    
    This is a partial revert of https://golang.org/cl/21328 which was too
    strict of an interpretation of RFC 6762.
    
    Fixes #16739
    
    Change-Id: I349415b4eab5d61240dd18217bd95dc7d2105cd5
    Reviewed-on: https://go-review.googlesource.com/27250
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 73fdba2601f1aeaa6565cfb03e4c5c8c98489b7a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Aug 17 08:57:15 2016 -0700

    cmd/compile/internal/s390x: cleanup betypeinit
    
    The Width{int,ptr,reg} assignments are no longer necessary since
    golang.org/cl/21623. The other arch's betypeinit functions were
    cleaned up, but apparently this one was missed.
    
    Change-Id: I1c7f074d7864a561659c1f98aef604f57f285fd0
    Reviewed-on: https://go-review.googlesource.com/27272
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e772c723665c098fb6a90b5e03a61d172e348703
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Aug 17 08:30:31 2016 -0700

    doc/go1.8: support "option ndots:0" in resolv.conf
    
    Updates #15419.
    
    Change-Id: If7c80adcb38b5731e337b2ae2d9d76fcf8513d8e
    Reviewed-on: https://go-review.googlesource.com/27271
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2f73fe7a0db269dcbe51e372809032fa52b8c68c
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Wed Jul 13 10:35:35 2016 -0600

    net: use libresolv rules for ndots range and validation
    
    BIND libresolv allows values from 0 to 15.
    
    For invalid values and negative numbers, 0 is used.
    For numbers greater than 15, 15 is used.
    
    Fixes #15419
    
    Change-Id: I1009bc119c3e87919bcb55a80a35532e9fc3ba52
    Reviewed-on: https://go-review.googlesource.com/24901
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 04e76f295f434bf1bd5ef3b01eed42b638a8b321
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Aug 17 10:32:39 2016 -0400

    test: add test for CL 26831
    
    Test nil check removal for access of PAUTOHEAP.
    
    Change-Id: Id739a9cda7cd3ff173bdcccfedcad93ee90711ef
    Reviewed-on: https://go-review.googlesource.com/27232
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 507144c011c64fd6f18cee6592e79461817e3791
Author: Florian Uekermann <florian@uekermann.me>
Date:   Tue Apr 19 16:06:37 2016 +0200

    math/rand: Document origin of cooked pseudo-random numbers
    
    The Source provided by math/rand relies on an array of cooked
    pseudo-random 63bit integers for seeding. The origin of these
    numbers is undocumented.
    
    Add a standalone program in math/rand folder that generates
    the 63bit integer array as well as a 64bit version supporting
    extension of the Source to 64bit pseudo-random number
    generation while maintaining the current sequence in the
    lower 63bit.
    
    The code is largely based on the initial implementation of the
    random number generator in the go repository by Ken Thompson
    (revision 399).
    
    Change-Id: Ib4192aea8127595027116a0f5a7be53f11dc110b
    Reviewed-on: https://go-review.googlesource.com/22230
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 336dad2a07b17e46e5e81eab8a3209dffbbb928d
Author: Austin Clements <austin@google.com>
Date:   Tue Aug 16 22:05:57 2016 -0400

    runtime: fix check for vacuous page boundary rounding
    
    sysUnused (e.g., madvise MADV_FREE) is only sensible to call on
    physical page boundaries, so scavengelist rounds in the bounds of the
    region being released to the nearest physical page boundaries.
    However, if the region is smaller than a physical page and neither the
    start nor end fall on a boundary, then rounding the start up to a page
    boundary and the end down to a page boundary will result in end < start.
    Currently, we only give up on the region if start == end, so if we
    encounter end < start, we'll call madvise with a negative length and
    the madvise will fail.
    
    Issue #16644 gives a concrete example of this:
    
        start = 0x1285ac000
        end   = 0x1285ae000 (1 8K page)
    
    This leads to the rounded values
    
        start = 0x1285b0000
        end   = 0x1285a0000
    
    which leads to len = -65536.
    
    Fix this by giving up on the region if end <= start, not just if
    end == start.
    
    Fixes #16644.
    
    Change-Id: I8300db492dbadc82ac1ad878318b36bcb7c39524
    Reviewed-on: https://go-review.googlesource.com/27230
    Reviewed-by: Keith Randall <khr@golang.org>

commit 5dc7525b3e04dc7384e11b986ed13ac130afa748
Author: Yasuhiro Matsumoto <mattn.jp@gmail.com>
Date:   Tue Jul 26 04:13:15 2016 +0900

    syscall: mksyscall_windows.go: put path separator in suffix for matching GOROOT
    
    fixes #16493
    
    Change-Id: I86bec2f9bd7965449c43e94733791f7cb18c5c4c
    Reviewed-on: https://go-review.googlesource.com/25165
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>

commit 00b779aeed9e0345e4bdbb38c85df63a6352b954
Author: Dan Peterson <dpiddy@gmail.com>
Date:   Tue Aug 16 13:33:27 2016 -0300

    net: simplify internal dtoi and xtoi funcs
    
    Callers pass strings sliced as necessary instead of giving
    an offset.
    
    Fixes #16350
    
    Change-Id: I7ba896f6ff09e0fd0094ca6c5af5d9a81622f15e
    Reviewed-on: https://go-review.googlesource.com/27206
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 9c13eb3729988af8be1fd00175bacdd20c7d4206
Author: Joe Tsai <joetsai@digital-static.net>
Date:   Tue Aug 16 15:06:01 2016 -0700

    go/build: introduce go1.8 build tag
    
    Change-Id: Ib8855f8125970fc7ffb271635c28d31d310fcb5b
    Reviewed-on: https://go-review.googlesource.com/27192
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1a7fc7b3a783031ec91844460a44ebffe34a6af1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jun 6 13:01:48 2016 -0700

    cmd/compile: handle e == T comparison more efficiently
    
    Instead of making a runtime call, compare types and values.
    
    Change-Id: Id302083d5a6a5f18e04f36f304f3d290c46976ad
    Reviewed-on: https://go-review.googlesource.com/26660
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 615a52b95b5eedb94297f8de6e7838b16445bd16
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jun 6 12:38:19 2016 -0700

    cmd/compile: inline x, ok := y.(T) where T is a scalar
    
    When T is a scalar, there are no runtime calls
    required, which makes this a clear win.
    
    encoding/binary:
    WriteInts-8                958ns ± 3%     864ns ± 2%   -9.80%  (p=0.000 n=15+15)
    
    This also considerably shrinks a core fmt
    routine:
    
    Before: "".(*pp).printArg t=1 size=3952 args=0x20 locals=0xf0
    After:  "".(*pp).printArg t=1 size=2624 args=0x20 locals=0x98
    
    Unfortunately, I find it very hard to get stable
    numbers out of the fmt benchmarks due to thermal scaling.
    
    Change-Id: I1278006b030253bf8e48dc7631d18985cdaa143d
    Reviewed-on: https://go-review.googlesource.com/26659
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 074d6a649c57a3731e273c8f9dcb36f1663e504a
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 16 17:32:54 2016 -0700

    cmd/compile: remove conditional code dealing with two export formats
    
    This removes some scaffolding introduced pre-1.7, introduced to
    fix an export format bug, and to minimize conflicts with older
    formats. The currently deployed and recognized format is "v1",
    so don't worry about other versions. This is a step towards a
    better scheme for internal export format versioning.
    
    For #16244.
    
    Change-Id: Ic7cf99dd2a24ad5484cc54aed44fa09332c2cf72
    Reviewed-on: https://go-review.googlesource.com/27205
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Robert Griesemer <gri@golang.org>

commit f50ced6d734038b7231bef3c674d541f95b2f23b
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 16 16:43:34 2016 -0700

    cmd/compile: remove encoding of safemode bit from export data
    
    Removes the encoding of this bit which was ignored but left behind
    for 1.7 to minimize pre-1.7 export format changes. See the issue
    for more details.
    
    Fixes #15772.
    
    Change-Id: I46cd7a66ad4c6003b78c64295cf3bda503ebf2dd
    Reviewed-on: https://go-review.googlesource.com/27201
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit 2b583a190eb14c69bffe5d488d2d6d3862fe76ea
Author: Jess Frazelle <me@jessfraz.com>
Date:   Wed Jun 22 21:57:52 2016 -0700

    text/template: fix Parse when called twice with empty text
    
    Fixes #16156
    
    Change-Id: I6989db4fd392583a2d490339cefc525b07c11b90
    Reviewed-on: https://go-review.googlesource.com/24380
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Andrew Gerrand <adg@golang.org>

commit 9b88fac00cdbb4025a24fd20e87be121785da579
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jun 17 12:30:27 2016 -0700

    cmd/internal/obj: reduce per-architecture opcode space
    
    s390x took up the last available chunk of int16 opcodes.
    There are RISC-V and sparc64 ports in progress out of tree,
    and there will likely be other architectures.
    Reduce the opcode space to allow more architectures to
    fit without increasing to int32.
    
    This is the smallest power of two that accomodates all
    existing architectures. All else being equal, smaller is
    better--smaller numbers are easier to generate immediates
    for and easier on the eyes when debugging.
    
    Change-Id: I4d0824b28913892fbd0579d3f90bea34e44c8946
    Reviewed-on: https://go-review.googlesource.com/24223
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

commit b4e9f70412671c7ac06b4852c38a0ab82d94ddf5
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Aug 16 12:55:17 2016 -0700

    cmd/compile: remove support for textual export format
    
    Fixes #15323.
    
    Change-Id: I50e996e6fde6b24327cb45dd84da31deef4dcc56
    Reviewed-on: https://go-review.googlesource.com/27171
    Run-TryBot: Robert Griesemer <gri@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e492d9f01890cf61cb009b3b3617238a8947ebbe
Author: Keith Randall <khr@golang.org>
Date:   Wed Jul 6 15:02:49 2016 -0700

    runtime: fix map iterator concurrent map check
    
    We should check whether there is a concurrent writer at the
    start of every mapiternext, not just in mapaccessK (which is
    only called during certain map growth situations).
    
    Tests turned off by default because they are inherently flaky.
    
    Fixes #16278
    
    Change-Id: I8b72cab1b8c59d1923bec6fa3eabc932e4e91542
    Reviewed-on: https://go-review.googlesource.com/24749
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit a16a189fb96f824d1eaa53db9c0047c7ce334bd1
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 16 13:52:51 2016 -0700

    test: remove unused variable
    
    ssaMain is no longer needed.
    
    Change-Id: I0b77f0bcd482329d73018bd80a6e068e622e191b
    Reviewed-on: https://go-review.googlesource.com/27190
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5ae82307696458269b373d82c072347d87a2a554
Author: Keith Randall <khr@golang.org>
Date:   Thu Jun 2 12:41:42 2016 -0700

    cmd/compile: use shorter versions of zero-extend ops
    
    Only need to zero-extend to 32 bits and we get the top
    32 bits zeroed for free.
    
    Only the WQ change actually generates different code.
    The assembler did this optimization for us in the other two cases.
    But we might as well do it during SSA so -S output more closely
    matches the actual generated instructions.
    
    Change-Id: I3e4ac50dc4da124014d4e31c86e9fc539d94f7fd
    Reviewed-on: https://go-review.googlesource.com/23711
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 0cd8faf74494f400d278b9b0071908951bea6f40
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jun 17 12:28:31 2016 -0700

    cmd/internal/obj: add opcode space safety check
    
    This CL adds a safety mechanism
    for changing the number of opcodes
    available per architecture.
    
    A subsequent CL will actually make the change.
    
    Change-Id: I6332ed5514f2f153c54d11b7da0cc8a6be1c8066
    Reviewed-on: https://go-review.googlesource.com/24222
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 496174e32e8983f46c6178cab250ea08f4d89dd2
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Aug 16 07:36:13 2016 -0700

    doc/go1.7.html: fix name of tls.Config.NextProtos
    
    Updates #16737
    
    Change-Id: Ia51fc9b06df43b7c6f7136e90b40362263c20081
    Reviewed-on: https://go-review.googlesource.com/27126
    Reviewed-by: Chris Broadfoot <cbro@golang.org>

commit f88a88402cbf93b37f701a8ca0c70b7d2558a057
Author: Tamir Duberstein <tamird@gmail.com>
Date:   Sun Jul 31 12:55:06 2016 -0400

    regexp: add some tests that were fixed in #12980
    
    Also includes a minor golint cleanup in the tests.
    
    Change-Id: I8c0fc81479e635e7cca18d5c48c28b654afa59d8
    Reviewed-on: https://go-review.googlesource.com/25380
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8c9a7978942296085628bc33eefcb9bab561f4ee
Author: Jaana Burcu Dogan <jbd@google.com>
Date:   Mon Aug 15 23:24:31 2016 -0700

    cmd/go: document -v flag for get
    
    Fixes #16719.
    
    Change-Id: I20550628814e3454f17d6f8ae8b66cce17f09859
    Reviewed-on: https://go-review.googlesource.com/27118
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 64214792e214bbacb8c00ffea92a7131e30fa59e
Author: Keith Randall <khr@golang.org>
Date:   Fri Jul 8 15:59:00 2016 -0700

    cmd/compile: allow unsafe.Pointer(nil) as static data
    
    Fixes #16306
    
    Change-Id: If8e2f411fe9a5a5c198f10765fee7261ba8feaf2
    Reviewed-on: https://go-review.googlesource.com/24836
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 9d2b988e4aeb59424411a314748aa8ffd1e71033
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 1 10:58:30 2016 -0700

    cmd/compile: accept literals in samesafeexpr
    
    This only triggers a few places in the stdlib,
    but it helps a lot when it does.
    
    Before:
    
    runtime.mapassign1 t=1 size=2400 args=0x20 locals=0xe0
    
    After:
    
    runtime.mapassign1 t=1 size=2352 args=0x20 locals=0xd8
    
    name           old time/op  new time/op  delta
    MapPop100-8    19.8µs ±11%  18.4µs ± 9%  -7.16%  (p=0.000 n=20+19)
    MapPop1000-8    367µs ±17%   335µs ±11%  -8.63%  (p=0.000 n=19+19)
    MapPop10000-8  7.29ms ±15%  6.86ms ±12%  -5.84%  (p=0.020 n=20+20)
    
    Change-Id: I9faf32f95a6ba6a6d5d0818eab32cc271e01d10a
    Reviewed-on: https://go-review.googlesource.com/26666
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

commit e6f1a886bc49e920533b3e95e96f4965000b9821
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Aug 16 12:14:54 2016 -0400

    cmd/compile: fix uint<->float conversion on 386
    
    The frontend rewriting lowers them to runtime calls on 386. It
    matches explicitly uint32, but missed uint.
    
    Fixes #16738.
    
    Change-Id: Iece7a45edf74615baca052a53273c208f057636d
    Reviewed-on: https://go-review.googlesource.com/27085
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1faea596e4f94e0a4170eda3d1a217b4936d8aa6
Author: Keith Randall <khr@golang.org>
Date:   Sun May 29 11:16:13 2016 -0700

    cmd/compile: add size hint to map literal allocations
    
    Might as well tell the runtime how large the map is going to be.
    This avoids grow work and allocations while the map is being built.
    
    Will wait for 1.8.
    
    Fixes #15880
    Fixes #16279
    
    Change-Id: I377e3e5ec1e2e76ea2a50cc00810adda20ad0e79
    Reviewed-on: https://go-review.googlesource.com/23558
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 35e25ef62efc5917481e11ff6e7a5cc12468b0e2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jul 20 10:18:23 2016 -0700

    cmd/internal/obj/x86: minor code cleanup
    
    Update #16415
    
    Change-Id: I83e0966931ada2f1ed02304685bb45effdd71268
    Reviewed-on: https://go-review.googlesource.com/26665
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit e85265e8c2a41e4a0e703e5fb6fe762cc382d0af
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon May 2 16:16:46 2016 -0700

    cmd/compile: optimize bool to int conversion
    
    This CL teaches SSA to recognize code of the form
    
    // b is a boolean value, i is an int of some flavor
    if b {
            i = 1
    } else {
            i = 0
    }
    
    and use b's underlying 0/1 representation for i
    instead of generating jumps.
    
    Unfortunately, it does not work on the obvious code:
    
    func bool2int(b bool) int {
            if b {
                    return 1
            }
            return 0
    }
    
    This is left for future work.
    Note that the existing phiopt optimizations also don't work for:
    
    func neg(b bool) bool {
            if b {
                    return false
            }
            return true
    }
    
    In the meantime, runtime authors and the like can use:
    
    func bool2int(b bool) int {
            var i int
            if b {
                    i = 1
            } else {
                    i = 0
            }
            return i
    }
    
    This compiles to:
    
    "".bool2int t=1 size=16 args=0x10 locals=0x0
            0x0000 00000 (x.go:25)  TEXT    "".bool2int(SB), $0-16
            0x0000 00000 (x.go:25)  FUNCDATA        $0, gclocals·23e8278e2b69a3a75fa59b23c49ed6ad(SB)
            0x0000 00000 (x.go:25)  FUNCDATA        $1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)
            0x0000 00000 (x.go:32)  MOVBLZX "".b+8(FP), AX
            0x0005 00005 (x.go:32)  MOVBQZX AL, AX
            0x0008 00008 (x.go:32)  MOVQ    AX, "".~r1+16(FP)
            0x000d 00013 (x.go:32)  RET
    
    The extraneous MOVBQZX is #15300.
    
    This optimization also helps range and slice.
    The compiler must protect against pointers pointing
    to the end of a slice/string. It does this by increasing
    a pointer by either 0 or 1 * elemsize, based on a condition.
    This CL optimizes away a jump in that code.
    
    This CL triggers 382 times while compiling the standard library.
    
    Updating code to utilize this optimization is left for future CLs.
    
    Updates #6011
    
    Change-Id: Ia7c1185f8aa223c543f91a3cd6d4a2a09c691c70
    Reviewed-on: https://go-review.googlesource.com/22711
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit c7b9bd745642677c8d4b3b76803a39b4e50b4d81
Author: Robert Griesemer <gri@golang.org>
Date:   Fri Jul 15 16:46:50 2016 -0700

    cmd/compile: don't crash when exporting self-recursive interfaces
    
    For #16369.
    
    Change-Id: I4c9f5a66b95558adcc1bcface164b9b2b4382d2f
    Reviewed-on: https://go-review.googlesource.com/24979
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 56752eb2b8cc52311c346f986a0f6e2a9577bfe4
Author: David Crawshaw <crawshaw@golang.org>
Date:   Tue Aug 16 07:44:57 2016 -0400

    reflect: clear tflag on new types
    
    Fixes #16722
    
    Change-Id: I50a0e69d3e79d13bc1860cd983267c3db087a4b8
    Reviewed-on: https://go-review.googlesource.com/27119
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit d251030fa6feac46e5686a78b9681625447a5871
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 16 09:19:05 2016 -0700

    cmd/compile: don't fold >32bit constants into a MULQ
    
    Don't fold constant factors into a multiply
    beyond the capacity of a MULQ instruction (32 bits).
    
    Fixes #16733
    
    Change-Id: Idc213c6cb06f7c94008a8cf9e60a9e77d085fd89
    Reviewed-on: https://go-review.googlesource.com/27160
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 562d06fc23261b21d12fbcbd407aadee9cb428cb
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jun 6 08:29:52 2016 -0700

    cmd/compile: inline _, ok = i.(T)
    
    We already inlined
    
    _, ok = e.(T)
    _, ok = i.(E)
    _, ok = e.(E)
    
    The only ok-only variants not inlined are now
    
    _, ok = i.(I)
    _, ok = e.(I)
    
    These call getitab, so are non-trivial.
    
    Change-Id: Ie45fd8933ee179a679b92ce925079b94cff0ee12
    Reviewed-on: https://go-review.googlesource.com/26658
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit e6e26eeb299f9829ac70bd400d011bfdd266f1c1
Author: Michael Pratt <mpratt@google.com>
Date:   Mon Jul 18 21:59:14 2016 -0700

    cmd/internal/obj: convert Aconv to a stringer
    
    Now that assembler opcodes have their own type, they can have a true
    stringer, rather than explicit calls to Aconv, which makes for nicer
    format strings.
    
    Change-Id: Ic77f5f8ac38b4e519dcaa08c93e7b732226f7bfe
    Reviewed-on: https://go-review.googlesource.com/25045
    Run-TryBot: Michael Pratt <mpratt@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 5693bee0f1f245ffc58c58a41bfd9a431a416957
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 7 15:29:48 2016 -0700

    cmd/compile/internal/big: re-vendor
    
    Pick up a bunch of changes and fixes.
    
    Change-Id: If4101f7185d433a4c89096bc786ee5de8eeabac0
    Reviewed-on: https://go-review.googlesource.com/27123
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 6f74c0774cf4fd906292bf0a733cb596f0849780
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Jul 11 11:18:17 2016 -0700

    runtime: move printing of extra newline
    
    No functional changes, makes vet happy.
    
    Updates #11041
    
    Change-Id: I59f3aba46d19b86d605508978652d76a1fe7ac7b
    Reviewed-on: https://go-review.googlesource.com/27125
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 297d1d736e3e6db6fa390dd54b1e3de9ea8f1fba
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jul 9 17:09:35 2016 -0700

    net/http: use keyed composite literal
    
    Makes vet happy.
    
    Updates #11041
    
    Change-Id: I23ca413c03ff387359440af8114786cd7880a048
    Reviewed-on: https://go-review.googlesource.com/27124
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 302dd7b71eb565c5460966292e434fc903362cb6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jul 9 14:51:00 2016 -0700

    crypto/cipher, math/big: fix example names
    
    Fixes (legit) vet warnings.
    Fix some verb tenses while we're here.
    
    Updates #11041
    
    Change-Id: I27e995f55b38f4cf584e97a67b8545e8247e83d6
    Reviewed-on: https://go-review.googlesource.com/27122
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 6d2db0986faef807e8538db6f3d32adb0dfd78c5
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jul 9 13:59:36 2016 -0700

    crypto/tls: fix WriteTo method signature
    
    Give *recordingConn the correct WriteTo signature
    to be an io.WriterTo. This makes vet happy.
    It also means that it'll report errors,
    which were previously being ignored.
    
    Updates #11041
    
    Change-Id: I13f171407d63f4b62427679bff362eb74faddca5
    Reviewed-on: https://go-review.googlesource.com/27121
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 12292754d3c46a4172373971b1ba945ecc4c5cbc
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 7 17:41:25 2016 -0700

    net: change t.Error to t.Errorf
    
    Caught by vet.
    
    Updates #11041
    
    Change-Id: I4dbb2eeaf633eea5976074840064edc2349e01d8
    Reviewed-on: https://go-review.googlesource.com/27120
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 88858fa58f892ef19c6dbae2af15af41ecae4937
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jun 30 10:48:54 2016 -0700

    container/list: silence vet warnings
    
    container/list/list_test.go:274: self-assignment of e1 to e1
    container/list/list_test.go:274: self-assignment of e4 to e4
    container/list/list_test.go:282: self-assignment of e1 to e1
    container/list/list_test.go:286: self-assignment of e1 to e1
    container/list/list_test.go:286: self-assignment of e4 to e4
    
    Updates #11041
    
    Change-Id: Ibd90cf6a924e93497908f437b814c3fc82937f4a
    Reviewed-on: https://go-review.googlesource.com/27114
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 4c4ca8312064cc47bc3b3cd5efc43ff5b89f4dff
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Aug 11 09:54:04 2016 -0400

    cmd/compile: remove nil check in accessing PAUTOHEAP variable
    
    CL 23393 introduces PAUTOHEAP, and access of PAUTOHEAP variable is
    rewritten to indirection of a PAUTO variable. Mark this variable
    non-nil, so this indirection does not introduce extra nil checks.
    
    Change-Id: I31853eed5e60238b6c5bc0546e2e9ab340dcddd9
    Reviewed-on: https://go-review.googlesource.com/26831
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 40cf4ad0ef2232d65a85d35897ea11aab95e9ef4
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 7 15:32:49 2016 -0700

    all: fix "result not used" vet warnings
    
    For tests, assign to _.
    For benchmarks, assign to a sink.
    
    Updates #11041
    
    Change-Id: I87c5543245c7bc74dceb38902f4551768dd37948
    Reviewed-on: https://go-review.googlesource.com/27116
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit c70bdd378811be6d56a3483fe6b9c5ed7b40cb2d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jun 30 10:53:47 2016 -0700

    cmd/compile: fix bad generated format strings in test
    
    We were generating format strings containing
    a lone %. Vet legitimately complains:
    
    cmd/compile/internal/gc/constFold_test.go:339: unrecognized printf verb ' '
    
    The fix doesn't make for very readable code,
    but it is simple and obviously correct.
    
    Updates #11041
    
    Change-Id: I90bd2d1d140887f5229752a279f7e46921472fbb
    Reviewed-on: https://go-review.googlesource.com/27115
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 2cbe735366a16dcd2595c5f1b1ca38b5b2b5e5b2
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 21 09:02:13 2016 -0700

    syscall: unify unix/amd64 asm implementations
    
    Updates #11041
    
    Change-Id: I77e5ca0b61ffc530ee46848721a177867c81d548
    Reviewed-on: https://go-review.googlesource.com/25116
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a5464af55469e2810452fd62e189404f3b8406ea
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 21 08:57:50 2016 -0700

    syscall: split out unix Syscall9 asm support
    
    This is preliminary work to unifying them.
    Aside from Syscall9, all are identical.
    Syscall9 has a netbsd/openbsd variant
    and a dragonfly/freebsd variant.
    
    Updates #11041
    
    Change-Id: Ia5ce95d5e9115d4c0492d5e53aa7a4316deafd1f
    Reviewed-on: https://go-review.googlesource.com/25115
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 33f95ec4ecf96c795d69c643f80e4bd7f6a8f1bb
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 21 08:49:07 2016 -0700

    syscall: superficial cleanup of amd64 unix assembly
    
    This is preliminary work to unifying them.
    
    Updates #11041
    
    Change-Id: Ibe83da3d626f1da9e8888e26cedd3af2152b42e6
    Reviewed-on: https://go-review.googlesource.com/25114
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 856342d844a66cb15e13d73b60b2d2de3ea56090
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 21 08:37:45 2016 -0700

    syscall: fix dragonfly/amd64 assembly argument sizes
    
    This is preliminary work to unifying the
    unix amd64 assembly implementations,
    which is preliminary work to making the
    assembly vet-friendly.
    
    Updates #11041
    
    Change-Id: Ic64985124f8fb86cc08898be2ec7fca972ced4ca
    Reviewed-on: https://go-review.googlesource.com/25113
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit b173298c896ebec8e4f898bfae986fce7557c1ec
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 21 08:30:41 2016 -0700

    syscall: unify unix 386 implementations
    
    They were identical.
    
    This will allow us to do the TODO at the top
    of the file only once.
    
    Updates #11041
    
    Change-Id: I07aaca27ae46b66b65780082988bdc7546ed534b
    Reviewed-on: https://go-review.googlesource.com/25112
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 1e94d79f9dbe032d9c8c0f461ca6fb96e20c0b85
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Aug 16 05:57:38 2016 -0400

    cmd/compile: disable Duff's device on darwin/arm64
    
    Darwin linker does not support BR26 reloc with non-zero addend.
    
    Fixes #16724.
    
    Change-Id: I1b5b4dc7159141bde3e273490f435c08c583afaf
    Reviewed-on: https://go-review.googlesource.com/27081
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dave Cheney <dave@cheney.net>

commit 6fd2d2cf161ec933f206ef57b8ca6062815545d3
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Tue Aug 16 05:05:00 2016 +0000

    net/http: make Transport retry non-idempotent requests if no bytes written
    
    If the server failed on us before we even tried to write any bytes,
    it's safe to retry the request on a new connection, regardless of the
    HTTP method/idempotence.
    
    Fixes #15723
    
    Change-Id: I25360f82aac530d12d2b3eef02c43ced86e62906
    Reviewed-on: https://go-review.googlesource.com/27117
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit fe27291c0039d4de0748ebd512cb236ca3c24ff6
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Aug 15 21:09:39 2016 -0700

    cmd/compile: reduce garbage from autolabel
    
    Follow-up to CL 26661
    
    Change-Id: I67c58d17313094675cf0f30ce50d486818ae0dcb
    Reviewed-on: https://go-review.googlesource.com/27113
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 77e68ea78abc08f827041384e0198576da44db9f
Author: Gyu-Ho Lee <gyuhox@gmail.com>
Date:   Sat Jun 4 23:08:19 2016 -0700

    archive/tar: preallocate slice from paxHeaders
    
    Preallocate keys slice with the length of paxHeaders map
    to prevent slice growth with append operations.
    
    Change-Id: Ic9a927c4eaa775690a4ef912d61dd06f38e11510
    Reviewed-on: https://go-review.googlesource.com/23782
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Joe Tsai <thebrokentoaster@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 2cb471e40dfe3d3ae1b0c777e67f3737a823ae79
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Jun 28 08:41:37 2016 +0900

    crypto/tls: gofmt -w -s
    
    Change-Id: Iedf9000e3bb1fa73b4c3669eae846e85f1f5fdfe
    Reviewed-on: https://go-review.googlesource.com/24489
    Run-TryBot: Mikio Hara <mikioh.mikioh@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 5a59516dd75e32cfa22441ffe313103ff72fe796
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Aug 15 17:20:21 2016 +0000

    net/http: deflake BenchmarkClient and its use of a fixed port for testing
    
    Let the kernel pick a port for testing, and have the server in the
    child process tell the parent (benchmarking) process the port that
    was selected.
    
    Fixes flakes like seen in https://golang.org/cl/27050 (and previously)
    
    Change-Id: Ia2b705dc4152f70e0a5725015bdae09984d09d53
    Reviewed-on: https://go-review.googlesource.com/27051
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

commit 52fcff3ec147ea8ae48c023f3d5000a8bf42fe8c
Author: Jan Mercl <0xjnml@gmail.com>
Date:   Tue Aug 2 13:00:46 2016 +0200

    go/token: Fix race in FileSet.PositionFor.
    
    Methods of FileSet are documented to be safe for concurrent use by
    multiple goroutines, so FileSet is protected by a mutex and all its
    methods use it to prevent concurrent mutations. All methods of File that
    mutate the respective FileSet, including AddLine, do also lock its
    mutex, but that does not help when PositionFor is invoked concurrently
    and reads without synchronization what AddLine mutates.
    
    The change adds acquiring a RLock around the racy call of File.position
    and the respective test.
    
    Fixes #16548
    
    Change-Id: Iecaaa02630b2532cb29ab555376633ee862315dd
    Reviewed-on: https://go-review.googlesource.com/25345
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 14e446d909784fba7b349b76ec0a234c2a86a491
Author: Carlos C <uldericofilho@gmail.com>
Date:   Wed Jul 20 00:58:55 2016 +0200

    bytes: add examples
    
    `bytes` and `strings` are pretty similar to each other, this commit
    brings `strings` examples to its counter-part.
    
    Partially addresses #16360
    
    Change-Id: I551320eaa78be9df69012035f1c3333f500e04c9
    Reviewed-on: https://go-review.googlesource.com/25062
    Reviewed-by: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 35f5517ce9f43abb4bbe5601bb2697b15a440783
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 15 17:28:00 2016 -0700

    doc: add 1.7 to golang.org/project
    
    Change-Id: Ib17f6643efd49e2bca188c4faa505f79832d18b1
    Reviewed-on: https://go-review.googlesource.com/27110
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 7c31043ccad67e193cd1d88cb1a62b97cd2ba294
Author: Mikio Hara <mikioh.mikioh@gmail.com>
Date:   Tue Aug 16 09:38:26 2016 +0900

    os/exec: fix nit found by vet
    
    Change-Id: I8085ed43d63215237a4871cc1e44257132a7f5de
    Reviewed-on: https://go-review.googlesource.com/27130
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit b98d8cd5ce0c279674472af247d86f8c0b73828a
Author: Sina Siadat <siadat@gmail.com>
Date:   Tue Jun 21 00:54:52 2016 +0430

    container/heap: remove one unnecessary comparison in Fix
    
    The heap.Fix function calls both down and up.  If the element is moved
    down, we don't need to call up and we could save a comparison.
    
    (per suggestion by Radu Berinde)
    
    Fixes #16098.
    
    Change-Id: I83a74710e66cf0d274d8c0743338c26f89f31afe
    Reviewed-on: https://go-review.googlesource.com/24273
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit b5e43e669a5e1591c9a6c7157b4dd0d2796d3037
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Fri Aug 12 10:31:17 2016 +1200

    cmd/link: when dynlinking, do not mangle short symbol names
    
    When dynamically linking, a type symbol's name is replaced with a name based on
    the SHA1 of the name as type symbol's names can be very long.  However, this
    can make a type's symbol name longer in some cases. So skip it in that case.
    One of the symbols this changes the treatment of is 'type.string' and that fixes a
    bug where -X doesn't work when dynamically linking.
    
    Fixes #16671
    
    Change-Id: If5269038261b76fb0ec52e25a9c1d64129631e3c
    Reviewed-on: https://go-review.googlesource.com/26890
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

commit 3ddc9ad9161c6d5ae07ce2304aa838d4b853cc78
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jul 18 17:27:21 2016 +0000

    strings: add special cases for Join of 2 and 3 strings
    
    We already had special cases for 0 and 1. Add 2 and 3 for now too.
    To be removed if the compiler is improved later (#6714).
    
    This halves the number of allocations and total bytes allocated via
    common filepath.Join calls, improving filepath.Walk performance.
    
    Noticed as part of investigating filepath.Walk in #16399.
    
    Change-Id: If7b1bb85606d4720f3ebdf8de7b1e12ad165079d
    Reviewed-on: https://go-review.googlesource.com/25005
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>

commit c88e868030f5f0bc68c11cb65af625e77acc43ba
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jun 7 12:26:06 2016 -0700

    cmd/internal/obj: add generated String method for AddrType
    
    Generated with:
    
    stringer -type AddrType cmd/internal/obj
    
    Change-Id: I74509cffab774035c5ca2ac0634638d73dbd33f3
    Reviewed-on: https://go-review.googlesource.com/26657
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a9ed47735f2948d7391c8a663ededeb495f7753f
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 1 10:15:02 2016 -0700

    cmd/compile: move auto label gen variables to local function
    
    This still depends on Curfn, but it's progress.
    
    Updates #15756
    
    Change-Id: Ic32fe56f44fcfbc023e7668d4dee07f8b47bf3a4
    Reviewed-on: https://go-review.googlesource.com/26661
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit d94409d65186a5fcee2955e374e1d5c0f457eb2b
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jul 7 17:20:00 2016 -0700

    go/types: fix bad printf verbs
    
    This fixes the following vet warnings:
    
    go/types/builtins.go:437: arg call for printf verb %s of wrong type: *go/ast.CallExpr
    go/types/builtins.go:598: arg call for printf verb %s of wrong type: *go/ast.CallExpr
    
    Updates #11041
    
    Change-Id: I746d054e8e49b330fbdf961912a98f55dd5f3ff9
    Reviewed-on: https://go-review.googlesource.com/26997
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit e0d8064ed4b53436f678960022c7092b2078094d
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 7 09:11:00 2016 -0700

    go/types: fix multiword data structure alignment on nacl
    
    Fixes #16464
    
    Change-Id: Ibf5625c1b5fa3abd18623023f18664e8f81fa45a
    Reviewed-on: https://go-review.googlesource.com/26996
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 7a974a4c602252ca7db5b35c1236b45ead4c1d54
Author: Carlos C <uldericofilho@gmail.com>
Date:   Wed Aug 10 16:24:11 2016 +0200

    encoding/json: add example for RawMessage marshalling
    
    Fixes #16648
    
    Change-Id: I3ab21ab33ca3f41219de9518ac6a39f49131e5e5
    Reviewed-on: https://go-review.googlesource.com/26692
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 3357a02b74fea42c3348de83af81900c6623f584
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 5 10:33:50 2016 -0700

    math/big: use array instead of slice for deBruijn lookups
    
    This allows the compiler to remove a bounds check.
    
    math/big/nat.go:681: index bounds check elided
    math/big/nat.go:683: index bounds check elided
    
    Change-Id: Ieecb89ec5e988761b06764bd671672015cd58e9d
    Reviewed-on: https://go-review.googlesource.com/26663
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 4e24e1d9996b0b0155c8349e49244d9694c89708
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Mon Aug 1 17:43:24 2016 +0300

    cmd/internal/obj/x86: VPSHUFD takes an unsigned byte.
    
    VPSHUFD should take an unsigned argument to be consistent with
    PSHUFD. Also fix all usage.
    
    Fixes #16499
    
    Change-Id: Ie699c102afed0379445914a251710365b14d89b6
    Reviewed-on: https://go-review.googlesource.com/25383
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit df9eeb192227257e8399c629372cd8cc79513406
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Aug 7 09:25:15 2016 -0700

    go/types: remove struct Sizeof cache
    
    It was not responsive to the sizes param.
    Remove it, and unwind the extra layers.
    
    Fixes #16316
    
    Change-Id: I940a57184a1601f52348d4bff8638f3f7462f5cd
    Reviewed-on: https://go-review.googlesource.com/26995
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

commit 133d231a89c2d9f8bbceeb42cf47d8cd68fde357
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Aug 10 10:36:42 2016 -0700

    cmd/compile/internal/gc: get rid of useless autopkg variable
    
    autopkg == localpkg, so it appears to be a remnant of earlier code.
    
    Change-Id: I65b6c074535e877317cbf9f1f35e94890f0ebf14
    Reviewed-on: https://go-review.googlesource.com/26662
    Reviewed-by: Keith Randall <khr@golang.org>

commit 3dc082f8fea3ee2710f1d1929169fb49ddf2622a
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Jun 15 15:22:35 2016 -0700

    go/types: minor cleanups
    
    1) Removed mark field from declInfo struct. Instead use a visited map
       in ordering.go which was the only use place for the mark field.
    
    2) Introduced objSet type for the common map[Object]bool type.
    
    3) Improved comments.
    
    Change-Id: I7544e7458d844b0ca08193f11de6238d317eaf2d
    Reviewed-on: https://go-review.googlesource.com/24153
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 5c84441d888655ebcc57c2ba2db834f97fa6d102
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Jun 14 17:35:36 2016 -0700

    go/types: fix computation of initialization order
    
    The old algorithm operated on a dependency graph that included
    all objects (including functions) for simplicity: it was based
    directly on the dependencies collected for each object during
    type checking an object's initialization expression. It also
    used that graph to compute the objects involved in an erroneous
    initialization cycle.
    
    Cycles that consist only of (mutually recursive) functions are
    permitted in initialization code; so those cycles were silently
    ignored if encountered. However, such cycles still inflated the
    number of dependencies a variable might have (due to the cycle),
    which in some cases lead to the wrong variable being scheduled
    for initialization before the one with the inflated dependency
    count.
    
    Correcting for the cycle when it is found is too late since at
    that point another variable may have already been scheduled.
    
    The new algorithm computes the initialization dependency graph as
    before but adds an extra pass during which functions are eliminated
    from the graph (and their dependencies are "back-propagated").
    This eliminates the problem of cycles only involving functions
    (there are no functions).
    
    When a cycle is found, the new code computes the cycle path from
    the original object dependencies so it can still include functions
    on the path as before, for the same detailed error message.
    
    The new code also more clearly distinguishes between objects that
    can be in the dependency graph (constants, variables, functions),
    and objects that cannot, by introducing the dependency type, a new
    subtype of Object. As a consequence, the dependency graph is smaller.
    
    Fixes #10709.
    
    Change-Id: Ib58d6ea65cfb279041a0286a2c8e865f11d244eb
    Reviewed-on: https://go-review.googlesource.com/24131
    Reviewed-by: Alan Donovan <adonovan@google.com>

commit 66da885594b6dbf61d93b627f5f2d5cd34cf9023
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Aug 10 19:46:48 2016 +0000

    syscall: test Gettimeofday everywhere, not just on Darwin
    
    The Darwin-only restriction was because we were late in the Go 1.7
    cycle when the test was added.
    
    In the process, I noticed Gettimeofday wasn't in the "unimplemented
    midden heap" section of syscall_nacl.go, despite this line in the
    original go1.txt:
    
    pkg syscall, func Gettimeofday(*Timeval) error
    
    So, add it, returning ENOSYS like the others.
    
    Change-Id: Id7e02e857b753f8d079bee335c22368734e92254
    Reviewed-on: https://go-review.googlesource.com/26772
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Quentin Smith <quentin@golang.org>

commit 664c4a1f87fb48d7af6880fd9e4b504049c37b9b
Author: Hiroshi Ioka <hirochachacha@gmail.com>
Date:   Mon Aug 15 01:39:00 2016 +0900

    os: consolidate files
    
    Code movement only.
    
    If someone finds function 'foo' in "foo_linux.go",
    they will expect that the Window version of 'foo' exists in "foo_windows.go".
    
    Current code doesn't follow this manner.
    
    For example, 'sameFile' exists in "file_unix.go",
    "stat_plan9.go" and "types_windows.go".
    
    The CL address that problem by following rules:
    
    * readdir family => dir.go, dir_$GOOS.go
    * stat family => stat.go, stat_$GOOS.go
    * path-functions => path_$GOOS.go
    * sameFile => types.go, types_$GOOS.go
    * process-functions => exec.go, exec_$GOOS.go
    * hostname => sys.go, sys_$GOOS.go
    
    Change-Id: Ic3c64663ce0b2a364d7a414351cd3c772e70187b
    Reviewed-on: https://go-review.googlesource.com/27035
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c307e1628c1569fcd589d7e1a9b3adbe367b98e6
Merge: d47bcd157c 88c8b7c7f9
Author: Gerrit Code Review <noreply-gerritcodereview@google.com>
Date:   Tue Aug 16 00:10:35 2016 +0000

    Merge "Merge remote-tracking branch 'origin/dev.ssa' into merge"

commit 88c8b7c7f98f9df718fa9cdf45f4a46726753add
Merge: 31ad583ab2 d08010f94e
Author: Keith Randall <khr@golang.org>
Date:   Mon Aug 15 09:31:59 2016 -0700

    Merge remote-tracking branch 'origin/dev.ssa' into merge
    
    Merging from dev.ssa back into master.
    
    Contains complete SSA backends for arm, arm64, 386, amd64p32.
    Work in progress for PPC64.
    
    Change-Id: Ifd7075e3ec6f88f776e29f8c7fd55830328897fd

commit d47bcd157cdf0e937dbca01939d0c287e7c49acd
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 15 12:57:13 2016 -0700

    doc: document go1.7
    
    Change-Id: Ieae5831b35768a625bf735a38f3d938f23f0b77b
    Reviewed-on: https://go-review.googlesource.com/27057
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit 1003b3e1f06935070a0000a41011898325b100ce
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 15 12:01:23 2016 -0700

    doc: update version tag in source install instructions
    
    Change-Id: Id83e0371b7232b01be83640ef1e47f9026cf2a23
    Reviewed-on: https://go-review.googlesource.com/27055
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit c6f19fe1ea5292f75618e3dcb2e2c4a9d1684aa6
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 8 17:44:33 2016 -0700

    doc/go1.7.html: remove DRAFT
    
    Fixes #15820.
    
    Change-Id: Ia5d5237754e77774a3a6049765eea163911f41c9
    Reviewed-on: https://go-review.googlesource.com/25592
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit d08010f94e06e5d5b6d01c248ba2a976b75d95a2
Author: David Chase <drchase@google.com>
Date:   Wed Aug 10 11:44:57 2016 -0700

    [dev.ssa] cmd/compile: PPC64, FP to/from int conversions.
    
    Passes ssa_test.
    
    Requires a few new instructions and some scratchpad
    memory to move data between G and F registers.
    
    Also fixed comparisons to be correct in case of NaN.
    Added missing instructions for run.bash.
    Removed some FP registers that are apparently "reserved"
    (but that are also apparently also unused except for a
    gratuitous multiplication by two when y = x+x would work
    just as well).
    
    Currently failing stack splits.
    
    Updates #16010.
    
    Change-Id: I73b161bfff54445d72bd7b813b1479f89fc72602
    Reviewed-on: https://go-review.googlesource.com/26813
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit d99cee79b98dfb6c1cd8e64c96845ee29aa28b4c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Aug 10 13:24:03 2016 -0400

    [dev.ssa] cmd/compile, etc.: more ARM64 optimizations, and enable SSA by default
    
    Add more ARM64 optimizations:
    - use hardware zero register when it is possible.
    - use shifted ops.
      The assembler supports shifted ops but not documented, nor knows
      how to print it. This CL adds them.
    - enable fast division.
      This was disabled because it makes the old backend generate slower
      code. But with SSA it generates faster code.
    
    Turn on SSA by default, also adjust tests.
    
    Change-Id: I7794479954c83bb65008dcb457bc1e21d7496da6
    Reviewed-on: https://go-review.googlesource.com/26950
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 94c8e59ae11d374cd8dd46afec4710ad10500ad9
Author: Keith Randall <khr@golang.org>
Date:   Thu Aug 11 12:56:36 2016 -0700

    [dev.ssa] cmd/compile: simplify 386+PIC+globals a bit
    
    We shouldn't issue instructions like MOVL foo(SB), AX directly from the
    SSA backend.  Instead we should do LEAL foo(SB), AX; MOVL (AX), AX.
    
    This simplifies obj logic because now only LEAL needs to be treated
    specially.  The register allocator uses the LEAL to in effect allocate
    the temporary register required for the shared library thunk calls.
    
    Also, the LEALs can now be CSEd.  So code like
        var g int
        func f() { g += 5 }
    Requires only one thunk call instead of 2.
    
    Change-Id: Ib87d465f617f73af437445871d0ea91a630b2355
    Reviewed-on: https://go-review.googlesource.com/26814
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 8f955d3664813c831b35cb02c6e7b48dd0341ece
Author: Keith Randall <khr@golang.org>
Date:   Thu Aug 11 09:49:48 2016 -0700

    [dev.ssa] cmd/compile: fix fp constant loads for 386+PIC
    
    In position-independent 386 code, loading floating-point constants from
    the constant pool requires two steps: materializing the address of
    the constant pool entry (requires calling a thunk) and then loading
    from that address.
    
    Before this CL, the materializing happened implicitly in CX, which
    clobbered that register.
    
    Change-Id: Id094e0fb2d3be211089f299e8f7c89c315de0a87
    Reviewed-on: https://go-review.googlesource.com/26811
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ed1ad8f56cc51cc55a8c12514e1c2b3098c1218b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Aug 3 09:56:36 2016 -0400

    [dev.ssa] cmd/compile: add some ARM64 optimizations
    
    Mostly mirrors ARM, includes:
    - constant folding
    - simplification of load, store, extension, and arithmetics
    - nilcheck removal
    
    Change-Id: Iffaa5fcdce100fe327429ecab316cb395e543469
    Reviewed-on: https://go-review.googlesource.com/26710
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 748aa84424418fb71c2528e7340df0ad6075b265
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Aug 3 11:47:40 2016 -0400

    [dev.ssa] cmd/internal/obj/arm64: fix encoding constant into some instructions
    
    When a constant can be encoded in a logical instruction (BITCON), do
    it this way instead of using the constant pool. The BITCON testing
    code runs faster than table lookup (using map):
    
    (on AMD64 machine, with pseudo random input)
    BenchmarkIsBitcon-4     300000000                4.04 ns/op
    BenchmarkTable-4        50000000                27.3 ns/op
    
    The equivalent C code of BITCON testing is formally verified with
    model checker CBMC against linear search of the lookup table.
    
    Also handle cases when a constant can be encoded in a MOV instruction.
    In this case, materializa the constant into REGTMP without using the
    constant pool.
    
    When constants need to be added to the constant pool, make sure to
    check whether it fits in 32-bit. If not, store 64-bit.
    
    Both legacy and SSA compiler backends are happy with this.
    
    Fixes #16226.
    
    Change-Id: I883e3069dee093a1cdc40853c42221a198a152b0
    Reviewed-on: https://go-review.googlesource.com/26631
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 31ad583ab24263f9dbcb5cbcce849eed64e74040
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jun 25 15:11:25 2016 -0700

    testing: respect benchtime on very fast benchmarks
    
    When ns/op dropped below 1, the old code
    ignored benchtime and reverted to 1s.
    
    Change-Id: I59752cef88d8d73bfd5b085f5400ae657f78504e
    Reviewed-on: https://go-review.googlesource.com/26664
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Marcel van Lohuizen <mpvl@golang.org>

commit c069bc49963bd5c2c152fe600fdcb9a2b7b58f76
Author: Keith Randall <khr@golang.org>
Date:   Tue Jul 26 11:51:33 2016 -0700

    [dev.ssa] cmd/compile: implement GO386=387
    
    Last part of the 386 SSA port.
    
    Modify the x86 backend to simulate SSE registers and
    instructions with 387 registers and instructions.
    The simulation isn't terribly performant, but it works,
    and the old implementation wasn't very performant either.
    Leaving to people who care about 387 to optimize if they want.
    
    Turn on SSA backend for 386 by default.
    
    Fixes #16358
    
    Change-Id: I678fb59132620b2c47e993c1c10c4c21135f70c0
    Reviewed-on: https://go-review.googlesource.com/25271
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 77ef597f38e11e03522d1ccac34cfd39a1ca8d8e
Author: Keith Randall <khr@golang.org>
Date:   Tue Aug 9 13:58:06 2016 -0700

    [dev.ssa] cmd/compile: more fixes for 386 shared libraries
    
    Use the destination register for materializing the pc
    for GOT references also. See https://go-review.googlesource.com/c/25442/
    The SSA backend assumes CX does not get clobbered for these instructions.
    
    Mark duffzero as clobbering CX. The linker needs to clobber CX
    to materialize the address to call. (This affects the non-shared-library
    duffzero also, but hopefully forbidding one register across duffzero
    won't be a big deal.)
    
    Hopefully this is all the cases where the linker is clobbering CX
    under the hood and SSA assumes it isn't.
    
    Change-Id: I080c938170193df57cd5ce1f2a956b68a34cc886
    Reviewed-on: https://go-review.googlesource.com/26611
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Hudson-Doyle <michael.hudson@canonical.com>

commit ff37d0e681a8b35c0ebff34bc1e73105f8845928
Author: David Chase <drchase@google.com>
Date:   Mon Aug 8 14:19:56 2016 -0700

    [dev.ssa] cmd/compile: PPC: FP load/store/const/cmp/neg; div/mod
    
    FP<->int conversions remain.
    
    Updates #16010.
    
    Change-Id: I38d7a4923e34d0a489935fffc4c96c020cafdba2
    Reviewed-on: https://go-review.googlesource.com/25589
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit 2cbdd55d640314e37e43d7dd8e60c457846a2876
Author: Keith Randall <khr@golang.org>
Date:   Wed Aug 3 13:00:49 2016 -0700

    [dev.ssa] cmd/compile: fix PIC for SSA-generated code
    
    Access to globals requires a 2-instruction sequence on PIC 386.
    
        MOVL foo(SB), AX
    
    is translated by the obj package into:
    
        CALL getPCofNextInstructionInTempRegister(SB)
        MOVL (&foo-&thisInstruction)(tmpReg), AX
    
    The call returns the PC of the next instruction in a register.
    The next instruction then offsets from that register to get the
    address required.  The tricky part is the allocation of the
    temp register.  The legacy compiler always used CX, and forbid
    the register allocator from allocating CX when in PIC mode.
    We can't easily do that in SSA because CX is actually a required
    register for shift instructions. (I think the old backend got away
    with this because the register allocator never uses CX, only
    codegen knows that shifts must use CX.)
    
    Instead, we allow the temp register to be anything.  When the
    destination of the MOV (or LEA) is an integer register, we can
    use that register.  Otherwise, we make sure to compile the
    operation using an LEA to reference the global.  So
    
        MOVL AX, foo(SB)
    
    is never generated directly.  Instead, SSA generates:
    
        LEAL foo(SB), DX
        MOVL AX, (DX)
    
    which is then rewritten by the obj package to:
    
        CALL getPcInDX(SB)
        LEAL (&foo-&thisInstruction)(DX), AX
        MOVL AX, (DX)
    
    So this CL modifies the obj package to use different thunks
    to materialize the pc into different registers.  We use the
    registers that regalloc chose so that SSA can still allocate
    the full set of registers.
    
    Change-Id: Ie095644f7164a026c62e95baf9d18a8bcaed0bba
    Reviewed-on: https://go-review.googlesource.com/25442
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 69a755b6020e20b7c424628e9c1ba4e28d311373
Author: Keith Randall <khr@golang.org>
Date:   Mon Aug 8 11:26:25 2016 -0700

    [dev.ssa] cmd/compile: port SSA backend to amd64p32
    
    It's not a new backend, just a PtrSize==4 modification
    of the existing AMD64 backend.
    
    Change-Id: Icc63521a5cf4ebb379f7430ef3f070894c09afda
    Reviewed-on: https://go-review.googlesource.com/25586
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 392bf3a9cfee297ec106d5a67c37d8edb4c8c183
Author: Chris Broadfoot <cbro@golang.org>
Date:   Mon Aug 8 16:56:22 2016 -0700

    doc/go1.7.html: update compress/flate section
    
    Updates #15810.
    
    Change-Id: Ifa7d2fd7fbfe58dff8541b18a11f007a5ff5818a
    Reviewed-on: https://go-review.googlesource.com/25591
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

commit f3b4e785164d6047947931724f54139a42b5293e
Merge: 0484052358 01dbfb81a0
Author: Gerrit Code Review <noreply-gerritcodereview@google.com>
Date:   Mon Aug 8 18:21:58 2016 +0000

    Merge "[dev.ssa] Merge commit 'f135c326402aaa757aa96aad283a91873d4ae124' into mergebranch" into dev.ssa

commit 0484052358ffdfb64cd533b3ea55f7c2b9d0b7bd
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Aug 4 06:57:34 2016 -0400

    [dev.ssa] cmd/compile: remove flags from regMask
    
    Reg allocator skips flag-typed values. Flag allocator uses the type
    and whether the op has "clobberFlags" set.
    
    Tested on AMD64, ARM, ARM64, 386. Passed 'toolstash -cmp' on AMD64.
    PPC64 is coded blindly.
    
    Change-Id: Ib1cc27efecef6a1bb27f7d7ed035a582660d244f
    Reviewed-on: https://go-review.googlesource.com/25480
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 01ae4b1da4fd38c0cc5f370c958aa67735fdcd40
Author: David Chase <drchase@google.com>
Date:   Thu Aug 4 11:34:43 2016 -0700

    [dev.ssa] cmd/compile: PPC64, load/store by type, shifts, divisions, bools
    
    Updates #16010.
    
    Change-Id: Ie520d64fd1c4f881f45623303ed0b7cbdf0e4764
    Reviewed-on: https://go-review.googlesource.com/25493
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit dd1d9b36c65ac71610cf69fbc425519990af7ada
Author: David Chase <drchase@google.com>
Date:   Tue Aug 2 13:17:09 2016 -0700

    [dev.ssa] cmd/compile: PPC64, add cmp->bool, some shifts, hmul
    
    Includes hmul (all widths)
    compare for boolean result and simplifications
    shift operations plus changes/additions for implementation
    (ORN, ADDME, ADDC)
    
    Also fixed a backwards-operand CMP.
    
    Change-Id: Id723c4e25125c38e0d9ab9ec9448176b75f4cdb4
    Reviewed-on: https://go-review.googlesource.com/25410
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 01dbfb81a0d444cdaa867c30c6306b756c91dea6
Merge: d2286ea284 f135c32640
Author: Keith Randall <khr@golang.org>
Date:   Thu Aug 4 10:51:10 2016 -0700

    [dev.ssa] Merge commit 'f135c326402aaa757aa96aad283a91873d4ae124' into mergebranch
    
    Pick up shared library fix in dev.ssa.
    
    Change-Id: I5bdd0e9e0f1d6f7c14b518343ee323ed9a894b9c

commit d2286ea2843569c7d277587f3d3ef06ae4092b78
Merge: 6a1153acb4 50edddb738
Author: Keith Randall <khr@golang.org>
Date:   Thu Aug 4 10:08:20 2016 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge from tip into dev.ssa.
    
    Change-Id: Iadb60e594ef65a99c0e1404b14205fa67c32a9e9

commit 6a1153acb4aff2d481be1611862be0f9f5203e62
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 1 11:05:29 2016 -0700

    [dev.ssa] cmd/compile: refactor out rulegen value parsing
    
    Previously, genMatch0 and genResult0 contained
    lots of duplication: locating the op, parsing
    the value, validation, etc.
    Parsing and validation was mixed in with code gen.
    
    Extract a helper, parseValue. It is responsible
    for parsing the value, locating the op, and doing
    shared validation.
    
    As a bonus (and possibly as my original motivation),
    make op selection pay attention to the number
    of args present.
    This allows arch-specific ops to share a name
    with generic ops as long as there is no ambiguity.
    It also detects and reports unresolved ambiguity,
    unlike before, where it would simply always
    pick the generic op, with no warning.
    
    Also use parseValue when generating the top-level
    op dispatch, to ensure its opinion about ops
    matches genMatch0 and genResult0.
    
    The order of statements in the generated code used
    to depend on the exact rule. It is now somewhat
    independent of the rule. That is the source
    of some of the generated code changes in this CL.
    See rewritedec64 and rewritegeneric for examples.
    It is a one-time change.
    
    The op dispatch switch and functions used to be
    sorted by opname without architecture. The sort
    now includes the architecture, leading to further
    generated code changes.
    See rewriteARM and rewriteAMD64 for examples.
    Again, it is a one-time change.
    
    There are no functional changes.
    
    Change-Id: I22c989183ad5651741ebdc0566349c5fd6c6b23c
    Reviewed-on: https://go-review.googlesource.com/24649
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

commit dede2061f3c7d593df471eb8b22b349dd310c71f
Author: David Chase <drchase@google.com>
Date:   Wed Jul 27 13:54:07 2016 -0700

    [dev.ssa] cmd/compile: PPC64, add more zeroing and moves
    
    Passes light testing.
    Modified to avoid possible exposure of "exterior" pointers
    to GC.
    
    Updates #16010.
    
    Change-Id: I41fced4fa83cefb9542dff8c8dee1a0c48056b3c
    Reviewed-on: https://go-review.googlesource.com/25310
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 00692402162ecc3df33af2b3ce48142b0ff9429c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jul 27 16:46:51 2016 -0400

    [dev.ssa] cmd/compile: fix build for old backend on ARM64
    
    Apparently the old backend needs NEG instruction having RegRead set,
    even this instruction does not take a Reg field... I don't think SSA
    uses this flag, so just leave it as it was. SSA is still happy.
    
    Fix ARM64 build on https://build.golang.org/?branch=dev.ssa
    
    Change-Id: Ia7e7f2ca217ddae9af314d346af5406bbafb68e8
    Reviewed-on: https://go-review.googlesource.com/25302
    Reviewed-by: David Chase <drchase@google.com>

commit 114c05962cd5a9924cd23f1263d08f0fd757bdb7
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jul 27 12:33:08 2016 -0400

    [dev.ssa] cmd/compile: fix possible invalid pointer spill in large Zero/Move on ARM
    
    Instead of comparing the address of the end of the memory to zero/copy,
    comparing the address of the last element, which is a valid pointer.
    Also unify large and unaligned Zero/Move, by passing alignment as AuxInt.
    
    Fixes #16515 for ARM.
    
    Change-Id: I19a62b31c5acf5c55c16a89bea1039c926dc91e5
    Reviewed-on: https://go-review.googlesource.com/25300
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 83208504fe2bbe91dae99111593de54cca1cdca0
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Jul 22 06:41:14 2016 -0400

    [dev.ssa] cmd/compile: add more on ARM64 SSA
    
    Support the following:
    - Shifts. ARM64 machine instructions only use lowest 6 bits of the
      shift (i.e. mod 64). Use conditional selection instruction to
      ensure Go semantics.
    - Zero/Move. Alignment is ensured.
    - Hmul, Avg64u, Sqrt.
    - reserve R18 (platform register in ARM64 ABI) and R29 (frame pointer
      in ARM64 ABI).
    
    Everything compiles, all.bash passed (with non-SSA test disabled).
    
    Change-Id: Ia8ed58dae5cbc001946f0b889357b258655078b1
    Reviewed-on: https://go-review.googlesource.com/25290
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 2d16e43158bb3f85eeaa983c7f12c7c81c6bc187
Author: David Chase <drchase@google.com>
Date:   Tue Jul 26 09:24:18 2016 -0700

    [dev.ssa] cmd/compile: PPC64, basic support for all calls and "miscellaneous"
    
    Added support for ClosureCall, DeferCall, InterCall
    (GoCall not yet tested).
    
    Added support for GetClosurePtr, IsNonNil, IsInBounds, IsSliceInBounds, NilCheck
    (Convert and GetG not yet tested)
    
    Still need to implement NilCheck optimizations.
    Fixed move boolean constant, order of operands to subtract.
    
    Updates #16010.
    
    Change-Id: Ibe0f6a6e688df4396cd77de0e9095997e4ca8ed2
    Reviewed-on: https://go-review.googlesource.com/25241
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 806cacc7c664ad46f3bec10a3a4e0274678eaeef
Author: David Chase <drchase@google.com>
Date:   Fri Jul 22 10:47:16 2016 -0700

    [dev.ssa] cmd/compile: replace storeconst w/ storezero, fold addressing
    
    Because PPC lacks store-immediate, remove the instruction
    that implies that it exists.  Replace it with storezero for
    the special case of storing zero, because R0 is reserved zero
    for Go (though the assembler knows this, do it in SSA).
    
    Also added address folding for storezero.
    (Now corrected to use right-sized stores in bulk-zero code.)
    
    Hello.go now compiles to
    genssa main
        00000 (...hello.go:7) TEXT "".main(SB), $0
        00001 (...hello.go:7) FUNCDATA $0, "".gcargs·0(SB)
        00002 (...hello.go:7) FUNCDATA $1, "".gclocals·1(SB)
    v23 00003 (...hello.go:8) MOVD $go.string."Hello, World!\n"(SB), R3
    v11 00004 (...hello.go:8) MOVD R3, 32(R1)
    v22 00005 (...hello.go:8) MOVD $14, R3
    v6  00006 (...hello.go:8) MOVD R3, 40(R1)
    v20 00007 (...hello.go:8) MOVD R0, 48(R1)
    v18 00008 (...hello.go:8) MOVD R0, 56(R1)
    v9  00009 (...hello.go:8) MOVD R0, 64(R1)
    v10 00010 (...hello.go:8) CALL fmt.Printf(SB)
    b2  00011 (...hello.go:9) RET
        00012 (<unknown line number>) END
    
    Updates #16010
    
    Change-Id: I33cfd98c21a1617502260ac753fa8cad68c8d85a
    Reviewed-on: https://go-review.googlesource.com/25151
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit ae9570a5b95b0b321f91f504661e9c36dc1caa0e
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Jul 21 12:42:49 2016 -0400

    [dev.ssa] cmd/compile: initial ARM64 SSA port
    
    Mostly copied from ARM port, with instruction names and Prog fields
    adjusted, and 64-bit int ops added. Not complete.
    
    Fib compiles and runs correctly.
    
    Change-Id: Id3ecb0d4b571200a035344b3e8e4408769f76221
    Reviewed-on: https://go-review.googlesource.com/25130
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 7bca2c599d593544d449bafc2fe1978c93b94a2f
Author: David Chase <drchase@google.com>
Date:   Wed Jul 6 13:32:52 2016 -0700

    [dev.ssa] cmd/compile: some improvements to PPC codegen
    
    Runs fibonacci for all integer types.
    Fold addressing arithmetic into stores.
    
    Updates #16010.
    
    Change-Id: I257982c82c00c80b00679757c3da345045968022
    Reviewed-on: https://go-review.googlesource.com/25103
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit df2f813bd230105e8afd6f58a3e12c3109481a3e
Author: Keith Randall <khr@golang.org>
Date:   Thu Jul 21 10:37:59 2016 -0700

    [dev.ssa] cmd/compile: 386 port now works
    
    GOARCH=386 SSATEST=1 ./all.bash passes
    
    Caveat: still needs changes to test/ files to use *_ssa.go versions.  I
    won't check those changes in with this CL because the builders will
    complain as they don't have SSATEST=1.
    
    Mostly minor fixes.
    
    Implement float <-> uint32 in assembly.  It seems the simplest option
    for now.
    
    GO386=387 does not work.  That's why I can't make SSA the default for
    386 yet.
    
    Change-Id: Ic4d4402104d32bcfb1fd612f5bb6539f9acb8ae0
    Reviewed-on: https://go-review.googlesource.com/25119
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit d8181d5d75821ad5b78ea7f4163dd86ac29f740a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Jul 15 14:07:15 2016 -0400

    [dev.ssa] cmd/compile: simplify MOVWreg on ARM
    
    For register-register move, if there is only one use, allocate it in
    the same register so we don't need to emit an instruction.
    
    Updates #15365.
    
    Change-Id: Iad41843854a506c521d577ad93fcbe73e8de8065
    Reviewed-on: https://go-review.googlesource.com/25059
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 7b9873b9b9daba332be582cf8a9249b7430311f8
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jun 29 15:20:48 2016 -0400

    [dev.ssa] cmd/internal/obj, etc.: add and use NEGF, NEGD instructions on ARM
    
    Updates #15365.
    
    Change-Id: I372a5617c2c7d91de545cac0464809b96711b63a
    Reviewed-on: https://go-review.googlesource.com/24646
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 4a33af6bb63eaa69a4a2cc0d4f222d37d7531b9c
Author: Keith Randall <khr@golang.org>
Date:   Mon Jul 18 15:52:59 2016 -0700

    [dev.ssa] cmd/compile: more 386 port changes
    
    Fix up zero/move code, including duff calls and rep movs.
    
    Handle the new ops generated by dec64.rules.
    
    Fix constant shifts.
    
    Change-Id: I7d89194b29b04311bfafa0fd93b9f5644af04df9
    Reviewed-on: https://go-review.googlesource.com/25033
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 1b0404c4cab18bae9c9e11d0699a1aeb32f08908
Author: Keith Randall <khr@golang.org>
Date:   Mon Jul 18 14:00:25 2016 -0700

    [dev.ssa] cmd/compile: fix verbose typing of DIV
    
    Use Cherry's awesome pair type constructor.
    
    Change-Id: I282156a570ee4dd3548bd82fbf15b8d8eb5bedf6
    Reviewed-on: https://go-review.googlesource.com/25009
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit aee8d8b9dd633f43754cdc310e5264026dc3bc42
Author: Keith Randall <khr@golang.org>
Date:   Mon Jul 18 11:51:48 2016 -0700

    [dev.ssa] cmd/compile: implement more 64-bit ops on 386
    
    add/sub/mul, plus constant input variants.
    
    Change-Id: I1c8006727c4fdf73558da0e646e7d1fa130ed773
    Reviewed-on: https://go-review.googlesource.com/25006
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit cf92e3845f2a7355d8270d419b7bcab4daf220fc
Author: Keith Randall <khr@golang.org>
Date:   Mon Jul 18 10:18:12 2016 -0700

    [dev.ssa] cmd/compile: use 2-result divide op
    
    We now allow Values to have 2 outputs.  Use that ability for amd64.
    This allows x,y := a/b,a%b to use just a single divide instruction.
    
    Update #6815
    
    Change-Id: Id70bcd20188a2dd8445e631a11d11f60991921e4
    Reviewed-on: https://go-review.googlesource.com/25004
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 25e0a367da6254d89b497f392ea9d1679455d000
Author: Keith Randall <khr@golang.org>
Date:   Wed Jul 13 16:15:54 2016 -0700

    [dev.ssa] cmd/compile: clean up tuple types and selects
    
    Make tuple types and their SelectX ops fully generic.
    These ops no longer need to be lowered.
    Regalloc understands them and their tuple-generating arguments.
    We can now have opcodes returning arbitrary pairs of results.
    (And it would be easy to move to >2 results if needed.)
    
    Update arm implementation to the new standard.
    Implement just enough in 386 port to do 64-bit add.
    
    Change-Id: I370ed5aacce219c82e1954c61d1f63af76c16f79
    Reviewed-on: https://go-review.googlesource.com/24976
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 6b6de15d327142a19c978c8b9811310b174fd60b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Jul 7 10:49:43 2016 -0400

    [dev.ssa] cmd/compile: support NaCl in SSA for ARM
    
    NaCl code runs in sandbox and there are restrictions for its
    instruction uses
    (https://developer.chrome.com/native-client/reference/sandbox_internals/arm-32-bit-sandbox).
    
    Like the legacy backend, on NaCl,
    - don't use R9, which is used as NaCl's "thread pointer".
    - don't use Duff's device.
    - don't use indexed load/stores.
    - the assembler rewrites DIV/MOD to runtime calls, which on NaCl
      clobbers R12, so R12 is marked as clobbered for DIV/MOD.
    - other restrictions are satisfied by the assembler.
    
    Enable SSA specific tests on nacl/arm, and disable non-SSA ones.
    
    Updates #15365.
    
    Change-Id: I9262693ec6756b89ca29d3ae4e52a96fe5403b02
    Reviewed-on: https://go-review.googlesource.com/24859
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

commit 7d70f84f547a1b60279985fa91c407ddfde9bd64
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jul 6 10:04:45 2016 -0400

    [dev.ssa] cmd/compile: add floating point optimizations in SSA for ARM
    
    Add some simplification rules for floating point ops.
    
    cmd/internal/obj/arm supports instructions that compare FP register
    to 0, but runtime softfloat simulator does not. This CL adds these
    instructions to softfloat simulator as well.
    
    Updates #15365.
    
    Change-Id: I29405b2bfcb4c8cf106cb7a1a811409fec91b170
    Reviewed-on: https://go-review.googlesource.com/24790
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 6adb97bde72b97310f9a75a4e286cd2ef236b271
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jul 13 09:22:48 2016 -0600

    [dev.ssa] cmd/compile: fix argument size of runtime call in SSA for ARM
    
    The argument size for runtime call was incorrectly includes the size
    of LR (FixedFrameSize in general). This makes the stack frame
    sometimes unnecessarily 4 bytes larger on ARM.
    For example,
            func f(b []byte) byte { return b[0] }
    compiles to
            0x0000 00000 (h.go:6)   TEXT    "".f(SB), $4-16 // <-- framesize = 4
            0x0000 00000 (h.go:6)   MOVW    8(g), R1
            0x0004 00004 (h.go:6)   CMP     R1, R13
            0x0008 00008 (h.go:6)   BLS     52
            0x000c 00012 (h.go:6)   MOVW.W  R14, -8(R13)
            0x0010 00016 (h.go:6)   FUNCDATA        $0, gclocals·8355ad952265fec823c17fcf739bd009(SB)
            0x0010 00016 (h.go:6)   FUNCDATA        $1, gclocals·69c1753bd5f81501d95132d08af04464(SB)
            0x0010 00016 (h.go:6)   MOVW    "".b+4(FP), R0
            0x0014 00020 (h.go:6)   CMP     $0, R0
            0x0018 00024 (h.go:6)   BLS     44
            0x001c 00028 (h.go:6)   MOVW    "".b(FP), R0
            0x0020 00032 (h.go:6)   MOVBU   (R0), R0
            0x0024 00036 (h.go:6)   MOVB    R0, "".~r1+12(FP)
            0x0028 00040 (h.go:6)   MOVW.P  8(R13), R15
            0x002c 00044 (h.go:6)   PCDATA  $0, $1
            0x002c 00044 (h.go:6)   CALL    runtime.panicindex(SB)
            0x0030 00048 (h.go:6)   UNDEF
            0x0034 00052 (h.go:6)   NOP
            0x0034 00052 (h.go:6)   MOVW    R14, R3
            0x0038 00056 (h.go:6)   CALL    runtime.morestack_noctxt(SB)
            0x003c 00060 (h.go:6)   JMP     0
    
    Note that the frame size is 4, but there is actually no local. It
    incorrectly thinks call to runtime.panicindex needs 4 bytes space
    for argument.
    
    This CL fixes it.
    
    Updates #15365.
    
    Change-Id: Ic65d55283a6aa8a7861d7a3fbc7b63c35785eeec
    Reviewed-on: https://go-review.googlesource.com/24909
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 7bd88a651d0d9f8b314989475b337a0edf225bd1
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sun Jul 10 23:34:46 2016 -0600

    [dev.ssa] cmd/compile: don't sink spills that satisfy merge edges in SSA
    
    If a spill is used to satisfy a merge edge (in shuffle), don't sink
    it out of loop.
    
    This is found in the following code (on ARM) where there is a stack
    Phi (v268) inside a loop (b36 -> ... -> b47 -> b38 -> b36).
    
    (before shuffle)
      b36: <- b34 b38
        ...
        v268 = Phi <int> v410 v360 : autotmp_198[int]
        ...
        ... -> b47
      b47: <- b44
        ...
        v360 = ... : R6
        v230 = StoreReg <int> v360 : autotmp_198[int]
        v261 = CMPconst <flags> [0] v360
        EQ v261 -> b49 b38 (unlikely)
      b38: <- b47
        ...
        Plain -> b36
    
    During shuffle, v230 (as spill of v360) is found to satisfy v268, but
    it didn't record its use in shuffle, and v230 is sunk out of the loop
    (to b49), which leads to bad value in v268.
    
    This seems never happened on AMD64 (in make.bash), until 4 registers
    are removed.
    
    Change-Id: I01dfc28ae461e853b36977c58bcfc0669e556660
    Reviewed-on: https://go-review.googlesource.com/24858
    Reviewed-by: David Chase <drchase@google.com>

commit 8cc3f4a17e2f4d63e090fd7bd39bee697521fddf
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Jun 17 10:34:06 2016 -0400

    [dev.ssa] cmd/compile: use shifted and indexed ops in SSA for ARM
    
    This CL implements the following optimizations for ARM:
    - use shifted ops (e.g. ADD R1<<2, R2) and indexed load/stores
    - break up shift ops. Shifts used to be one SSA op that generates
      multiple instructions. We break them up to multiple ops, which
      allows constant folding and CSE for comparisons. Conditional moves
      are introduced for this.
    - simplify zero/sign-extension ops.
    
    Updates #15365.
    
    Change-Id: I55e262a776a7ef2a1505d75e04d1208913c35d39
    Reviewed-on: https://go-review.googlesource.com/24512
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 14cf6e20832dd64d79c345e0fd59169c5bd0eb35
Author: Keith Randall <khr@golang.org>
Date:   Wed Jul 13 13:43:08 2016 -0700

    [dev.ssa] cmd/compile: initial 386 SSA port
    
    Basically just copied all the amd64 files, removed all the *Q ops,
    and rebuilt.
    
    Compiles fib successfully.
    
    Still need to do:
     - all the 64->32 bit op translations.
     - audit for instructions that aren't available on 386.
     - GO386=387?
    
    Update #16358
    
    Change-Id: Ib8c684586416a554a527a5eefa0cff71424e36f5
    Reviewed-on: https://go-review.googlesource.com/24912
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit efefd11725885c850be617389faa4d9f56137641
Merge: f0bab31660 76da6491e8
Author: Keith Randall <khr@golang.org>
Date:   Wed Jul 13 11:03:12 2016 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Semi-regular merge of tip into dev.ssa.
    
    Change-Id: I855817c4746237792a2dab6eaf471087a3646be4

commit f0bab3166012ec914571cb9b7a2c780b107f1225
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Tue Jul 5 10:03:02 2016 -0700

    [dev.ssa] cmd/compile: add some constant folding optimizations
    
    These were helpful for some autogenerated code
    I'm working with.
    
    Change-Id: I7b89c69552ca99bf560a14bfbcd6bd238595ddf6
    Reviewed-on: https://go-review.googlesource.com/24742
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 8599fdd9b66a384ac1e82f301a9ff4adfe448b08
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Jun 13 16:49:09 2016 -0400

    [dev.ssa] cmd/compile: add some ARM optimization rewriting rules
    
    Mostly constant folding rules, analogous to AMD64 ones. Along with
    some simplifications.
    
    Updates #15365.
    
    Change-Id: If83bc1188bb05acb982ef3a1c21704c187e3eb24
    Reviewed-on: https://go-review.googlesource.com/24210
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 42181ad852700b790906b4c7ab24c4c23dd874e2
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Jun 7 14:18:04 2016 -0400

    [dev.ssa] cmd/compile: enable SSA on ARM by default
    
    As Josh mentioned in CL 24716, there has been requests for using SSA
    for ARM. SSA can still be disabled by setting -ssa=0 for cmd/compile,
    or partially enabled with GOSSAFUNC, GOSSAPKG, and GOSSAHASH.
    
    Not enable SSA by default on NaCl, which is not supported yet.
    
    Enable SSA-specific tests on ARM: live_ssa.go and nilptr3_ssa.go;
    disable non-SSA tests: live.go, nilptr3.go, and slicepot.go.
    
    Updates #15365.
    
    Change-Id: Ic2ca8d166aeca8517b9d262a55e92f2130683a16
    Reviewed-on: https://go-review.googlesource.com/23953
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Chase <drchase@google.com>

commit 41a7dca2722b7defafb05b0919fb8dde38819efb
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Jul 3 13:40:03 2016 -0700

    [dev.ssa] cmd/compile: unify and check LoweredGetClosurePtr
    
    The comments were mostly duplicated; unify them.
    Add a check that the required invariant holds.
    
    Change-Id: I42fe09dcd1fac76d3c4e191f7a58c591c5ce429b
    Reviewed-on: https://go-review.googlesource.com/24719
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: David Chase <drchase@google.com>

commit ad8b8f644ea6cf99c81afc62ce4a5cc301df0ecc
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sun Jul 3 12:56:29 2016 -0700

    [dev.ssa] cmd/compile: remove dead amd64 ITab lowering rule
    
    ITab is handled by decomposition.
    The rule is vestigial. Remove it.
    
    Change-Id: I6fdf3d14d466761c7665c7ea14f34ca0e1e3e646
    Reviewed-on: https://go-review.googlesource.com/24718
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit f55317828b65dc35bec511e9225d9a5761a12cac
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Jun 27 16:54:57 2016 -0400

    [dev.ssa] cmd/compile: ensure alignment for Zero and Move in SSA for ARM
    
    Encode the size and the alignment into AuxInt of Zero and Move ops.
    On AMD64, we simply don't look at the alignment. On ARM and PPC64, we
    only generate aligned stores.
    
    Updates #15365.
    
    Change-Id: Ifdcc205c364f67c4516b9adebfe7d50d223b6863
    Reviewed-on: https://go-review.googlesource.com/24511
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 95427d2549a613fd1fb925ed118194488d6ec6bb
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Thu Jun 30 11:13:24 2016 -0700

    [dev.ssa] cmd/compile: improve stability of generated code
    
    If the files in cmd/compile/internal/ssa/gen
    are passed to go run in a different order,
    e.g. due to shell differences or manual entry,
    then the order of constants in opGen churns.
    
    Sort archs by name to enforce stability.
    The movement of the PPC constants is a one time cost.
    
    Change-Id: Iebcfdb9e612d7dd8cde575f920f1292891f2f24a
    Reviewed-on: https://go-review.googlesource.com/24680
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit 03d152f36fd3b64e0c0c86e93c50f5bafeb8e9b3
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Fri Jun 24 14:37:17 2016 -0500

    [dev.ssa] cmd/compile: Add initial SSA configuration for PPC64
    
    This adds the initial SSA implementation for PPC64.
    Builds golang and all.bash runs correctly.  Simple hello.go
    builds but does not run.
    
    Change-Id: I7cec211b934cd7a2dd75a6cdfaf9f71867063466
    Reviewed-on: https://go-review.googlesource.com/24453
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit 68dc102ed1e2263c0c7469d6e48046eb35954a55
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Sat Jun 25 16:07:56 2016 -0700

    [dev.ssa] cmd/compile: provide default types for all extension ops
    
    Change-Id: I655327818297cc6792c81912f2cebdc321381561
    Reviewed-on: https://go-review.googlesource.com/24465
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

commit df43cf033f41d784a9f263b932eb8c859132eec4
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Jun 24 15:06:17 2016 -0400

    [dev.ssa] cmd/compile: optimize NilCheck in SSA for ARM
    
    Like AMD64, don't issue NilCheck instruction if the subsequent block
    has a load or store at the same address.
    
    Pass test/nilptr3_ssa.go.
    
    Updates #15365.
    
    Change-Id: Ic88780dab8c4893c57d1c95f663760cc185fe51e
    Reviewed-on: https://go-review.googlesource.com/24451
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: David Chase <drchase@google.com>

commit 8eadb89266a5a785e568f936b176d746a6d7de7c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Jun 14 11:18:39 2016 -0400

    [dev.ssa] cmd/compile: move tuple selectors to generator's block in CSE
    
    CSE may substitute a tuple generator with another one in a different
    block. In this case, since we want tuple selectors to stay together
    with the tuple generator, copy the selector to the new generator's
    block and rewrite its use.
    
    Op.isTupleGenerator and Op.isTupleSelector are introduced to assert
    tuple ops. Use it in tighten as well.
    
    Updates #15365.
    
    Change-Id: Ia9e8c734b9cc3bc9fca4a2750041eef9cdfac5a5
    Reviewed-on: https://go-review.googlesource.com/24137
    Reviewed-by: David Chase <drchase@google.com>

commit 8086ce44c4ddaba03fe0edb62aed8ca723cf0cfe
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 15 15:56:52 2016 -0700

    [dev.ssa] cmd/compile: unify OpARMMOVWaddr cases
    
    Minor code cleanup. Done as part of understanding
    OpARMMOVWaddr, since other architectures will
    need to do something similar.
    
    Change-Id: Iea2ecf3defb4f884e63902c369cd55e4647bce7a
    Reviewed-on: https://go-review.googlesource.com/24157
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 22d1318e7b6e9eba747bd90939703fff7660add1
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 15 15:26:47 2016 -0700

    [dev.ssa] cmd/compile: refactor out CheckLoweredPhi
    
    This will be used verbatim in other architectures.
    
    Change-Id: I307891ae597d797fd45f296b6a38ffe9fac6b975
    Reviewed-on: https://go-review.googlesource.com/24155
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit a2beee000b8e175489284abda4b82453d08af758
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 15 10:07:16 2016 -0700

    [dev.ssa] cmd/compile: improve special register error checking
    
    Provide better diagnostic messages.
    
    Use an int for numRegs comparisons,
    to avoid asking whether a uint8 is > 255.
    
    Change-Id: I33ae193ce292b24b369865abda3902c3207d7d3f
    Reviewed-on: https://go-review.googlesource.com/24135
    Reviewed-by: Keith Randall <khr@golang.org>

commit d0fa6c2f9ed213db9010d9b188fabdd14f342d6a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Wed Jun 15 15:17:45 2016 -0700

    [dev.ssa] cmd/compile: add and use SSAReg
    
    This will be needed by other architectures as well.
    Put a cleaner encapsulation around it.
    
    Change-Id: I0ac25d600378042b2233301678e9d037e20701d8
    Reviewed-on: https://go-review.googlesource.com/24154
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

commit 93b8aab5c992faa447893872df4f69c81444f37d
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue May 31 14:01:34 2016 -0400

    [dev.ssa] cmd/compile: handle GetG on ARM
    
    Use hardware g register (R10) for GetG, allow g to appear at LHS of
    some ops.
    
    Progress on SSA backend for ARM. Now everything compiles and runs.
    
    Updates #15365.
    
    Change-Id: Icdf93585579faa86cc29b1e17ab7c90f0119fc4e
    Reviewed-on: https://go-review.googlesource.com/23952
    Reviewed-by: David Chase <drchase@google.com>

commit 0393ed8201751d58ac71288e6ef902ec4e03efde
Merge: c40dcff2f2 53242e49b1
Author: Keith Randall <khr@golang.org>
Date:   Tue Jun 14 07:33:48 2016 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Change-Id: Idd150294aaeced0176b53d6b95852f5d21ff4fdc

commit c40dcff2f23c75e15785687eee7d56b524c54634
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Jun 6 22:36:45 2016 -0400

    [dev.ssa] cmd/compile: use MOVWaddr for address on ARM
    
    Introduce an op MOVWaddr for addresses on ARM, instead of overuse
    ADDconst.
    
    Mark MOVWaddr as rematerializable. This fixes a liveness problem: if
    it were not rematerializable, the address of a variable may be spilled
    and later use of the address may just load the spilled value without
    mentioning the variable, and the liveness code may think it is dead
    prematurely.
    
    Update #15365.
    
    Change-Id: Ib0b0fa826bdb75c9e6bb362b95c6cf132cc6b1c0
    Reviewed-on: https://go-review.googlesource.com/23942
    Reviewed-by: David Chase <drchase@google.com>

commit e3a6d00876488c70b6ecc641954ed5cecb918cac
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jun 8 10:12:30 2016 -0400

    [dev.ssa] cmd/compile: ensure OffPtr has pointer type
    
    SSA treats SP as constant throughout a function, so as OffPtr [off] SP.
    When the stack moves, spilled OffPtr values become invalid, if they are
    not pointer-typed.
    
    (Currently it is fine because of the optimization rules that folds OffPtr
    into Load/Store. But it'd better be "optimization", not requirement.)
    
    Updates #15365.
    
    Change-Id: I76cf4008dfdc169e1cb5a55a2605b6678efc915d
    Reviewed-on: https://go-review.googlesource.com/23941
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

commit fa54bf16e0080296487407c8cc883a1e039c31c8
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Jun 3 18:03:29 2016 -0400

    [dev.ssa] cmd/compile: fix a few bugs for SSA for ARM
    
    - 64x signed right shift was wrong for shift larger than 0x80000000.
    - for Lsh-followed-by-Rsh, the intermediate value should be full int
      width, so when it is spilled MOVW should be used.
    - use RET for RetJmp, so the assembler can take case of restoring LR
      for non-leaf case.
    - reserve R9 in dynlink mode. R9 is used for GOT by the assembler.
    
    Progress on SSA backend for ARM. Still not complete.
    
    Updates #15365.
    
    Change-Id: I3caca256b92ff7cf96469da2feaf4868a592efc5
    Reviewed-on: https://go-review.googlesource.com/23793
    Reviewed-by: David Chase <drchase@google.com>

commit 225ef76c250fc9ab9794fd723952209e2ff440aa
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Jun 1 06:41:08 2016 -0400

    [dev.ssa] cmd/compile: fix scheduling of tuple ops
    
    We want tuple-reading ops immediately follow tuple-generating op, so
    that tuple values will not be spilled/copied.
    
    The mechanism introduced in the previous CL cannot really avoid tuples
    interleaving. In this CL we always emit tuple and their selectors together.
    Maybe remove the tuple scores if it does not help on performance (todo).
    
    Also let tighten not move tuple-reading ops across blocks.
    
    In the previous CL a special case of regenerating flags with tuple-reading
    pseudo-op is added, but it did not cover end-of-block case. This is fixed
    in this CL and the condition is generalized.
    
    Progress on SSA backend for ARM. Still not complete.
    
    Updates #15365.
    
    Change-Id: I8980b34e7a64eb98153540e9e19a3782e20406ff
    Reviewed-on: https://go-review.googlesource.com/23792
    Reviewed-by: David Chase <drchase@google.com>

commit 59e11d782717407fcdf288664a48beb52336d42a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue May 31 11:27:16 2016 -0400

    [dev.ssa] cmd/compile: handle floating point on ARM
    
    Machine supports (or the runtime simulates in soft float mode)
    (u)int32<->float conversions. The frontend rewrites int64<->float
    conversions to call to runtime function.
    
    For int64->float32 conversion, the frontend generates
    
    .   .   AS u(100) l(10) tc(1)
    .   .   .   NAME-main.~r1 u(1) a(true) g(1) l(9) x(8+0) class(PPARAMOUT) f(1) float32
    .   .   .   CALLFUNC u(100) l(10) tc(1) float32
    .   .   .   .   NAME-runtime.int64tofloat64 u(1) a(true) x(0+0) class(PFUNC) tc(1) used(true) FUNC-func(int64) float64
    
    The CALLFUNC node has type float32, whereas runtime.int64tofloat64
    returns float64. The legacy backend implicitly makes a float64->float32
    conversion. The SSA backend does not do implicit conversion, so we
    insert an explicit CONV here.
    
    All cmd/compile/internal/gc/testdata/*_ssa.go tests passed.
    
    Progress on SSA for ARM. Still not complete.
    
    Update #15365.
    
    Change-Id: I30937c8ff977271246b068f48224693776804339
    Reviewed-on: https://go-review.googlesource.com/23652
    Reviewed-by: Keith Randall <khr@golang.org>

commit e78d90beebbb6fde602ceb3999535ac4b49da295
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed May 25 09:49:28 2016 -0400

    [dev.ssa] cmd/compile: handle Div, Convert, GetClosurePtr etc. on ARM
    
    This CL adds support of Div, Mod, Convert, GetClosurePtr and 64-bit indexing
    support to SSA backend for ARM.
    
    Add tests for 64-bit indexing to cmd/compile/internal/gc/testdata/string_ssa.go.
    
    Tests cmd/compile/internal/gc/testdata/*_ssa.go passed, except compound_ssa.go
    and fp_ssa.go.
    
    Progress on SSA for ARM. Still not complete. Essentially the only unsupported
    part is floating point.
    
    Updates #15365.
    
    Change-Id: I269e88b67f641c25e7a813d910c96d356d236bff
    Reviewed-on: https://go-review.googlesource.com/23542
    Reviewed-by: David Chase <drchase@google.com>

commit 4636d02244e683a0d9c078a49b4c614bed401d6b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed May 25 23:17:42 2016 -0400

    [dev.ssa] cmd/compile: handle 64-bit shifts on ARM
    
    Also fix a mistake in previous CL about x8 and x16 shifts:
    the shift needs ZeroExt.
    
    Progress on SSA for ARM. Still not complete.
    
    Updates #15365.
    
    Change-Id: Ibc352760023d38bc6b9c5251e929fe26e016637a
    Reviewed-on: https://go-review.googlesource.com/23486
    Reviewed-by: David Chase <drchase@google.com>

commit 90883091ff5f7170c83f847d6748cf36713e8c9b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu May 19 12:33:30 2016 -0400

    [dev.ssa] cmd/compile: clean up hardcoded regmasks in ssa/regalloc.go
    
    Auto-generate register masks and load them through Config.
    
    Passed toolstash -cmp on AMD64.
    
    Tests phi_ssa.go and regalloc_ssa.go in cmd/compile/internal/gc/testdata
    passed on ARM.
    
    Updates #15365.
    
    Change-Id: I393924d68067f2dbb13dab82e569fb452c986593
    Reviewed-on: https://go-review.googlesource.com/23292
    Reviewed-by: David Chase <drchase@google.com>

commit 8756d9253f56f28167543fbd41c15e5695e654b2
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed May 18 18:14:36 2016 -0400

    [dev.ssa] cmd/compile: decompose 64-bit integer on ARM
    
    Introduce dec64 rules to (generically) decompose 64-bit integer on
    32-bit architectures. 64-bit integer is composed/decomposed with
    Int64Make/Hi/Lo ops, as for complex types.
    
    The idea of dealing with Add64 is the following:
    
    (Add64 (Int64Make xh xl) (Int64Make yh yl))
    ->
    (Int64Make
            (Add32withcarry xh yh (Select0 (Add32carry xl yl)))
            (Select1 (Add32carry xl yl)))
    
    where Add32carry returns a tuple (flags,uint32). Select0 and Select1
    read the first and the second component of the tuple, respectively.
    The two Add32carry will be CSE'd.
    
    Similarly for multiplication, Mul32uhilo returns a tuple (hi, lo).
    
    Also add support of KeepAlive, to fix build after merge.
    
    Tests addressed_ssa.go, array_ssa.go, break_ssa.go, chan_ssa.go,
    cmp_ssa.go, ctl_ssa.go, map_ssa.go, and string_ssa.go in
    cmd/compile/internal/gc/testdata passed.
    
    Progress on SSA for ARM. Still not complete.
    
    Updates #15365.
    
    Change-Id: I7867c76785a456312de5d8398a6b3f7ca5a4f7ec
    Reviewed-on: https://go-review.googlesource.com/23213
    Reviewed-by: Keith Randall <khr@golang.org>

commit 31e13c83c26c5addad6c9a15a8f06a11edc7c519
Merge: d108bc0e73 496cf215cf
Author: David Chase <drchase@google.com>
Date:   Fri May 27 15:18:49 2016 -0400

    [dev.ssa] Merge branch 'master' into dev.ssa
    
    Change-Id: Iabc80b6e0734efbd234d998271e110d2eaad41dd

commit d108bc0e73046826b27a3a3f6cfc1b33b40ae11d
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sun May 15 00:12:56 2016 -0400

    [dev.ssa] cmd/compile: implement Defer, RetJmp on SSA for ARM
    
    Also fix argument offset for runtime calls.
    
    Also fix LoadReg/StoreReg by generating instructions by type.
    
    Progress on SSA backend for ARM. Still not complete.
    Tests append_ssa.go, assert_ssa.go, loadstore_ssa.go, short_ssa.go, and
    deferNoReturn.go in cmd/compile/internal/gc/testdata passed.
    
    Updates #15365.
    
    Change-Id: I0f0a2398cab8bbb461772a55241a16a7da2ecedf
    Reviewed-on: https://go-review.googlesource.com/23212
    Reviewed-by: David Chase <drchase@google.com>

commit 8357ec37ae6a7580e928dbabbb99dd6cf1958017
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri May 13 15:31:14 2016 -0400

    [dev.ssa] cmd/compile: implement Zero, Move, Copy for SSA on ARM
    
    Generate load/stores for small zeroing/move, DUFFZERO/DUFFCOPY for
    medium zeroing/move, and loops for large zeroing/move.
    
    cmd/compile/internal/gc/testdata/{copy_ssa.go,zero_ssa.go} tests
    passed.
    
    Progress on SSA backend for ARM. Still not complete. A few packages
    in the standard library compile and tests passed, including
    container/list, hash/crc32, unicode/utf8, etc.
    
    Updates #15365.
    
    Change-Id: Ieb4b68b44ee7de66bf7b68f5f33a605349fcc6fa
    Reviewed-on: https://go-review.googlesource.com/23097
    Reviewed-by: Keith Randall <khr@golang.org>

commit 8f726907113e6be6dd886d6a790619b2535330fa
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri May 13 15:22:56 2016 -0400

    [dev.ssa] cmd/compile: implement shifts & multiplications for SSA on ARM
    
    Implement shifts and multiplications for up to 32-bit values.
    
    Also handle Exit block.
    
    Progress on SSA backend for ARM. Still not complete.
    container/heap, crypto/subtle, hash/adler32 packages compile and
    tests passed.
    
    Updates #15365.
    
    Change-Id: I6bee4d5b0051e51d5de97e8a1938c4b87a36cbf8
    Reviewed-on: https://go-review.googlesource.com/23096
    Reviewed-by: Keith Randall <khr@golang.org>

commit ccaed50c7bf6381275d49adcf54974441752fd11
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri May 13 11:25:07 2016 -0400

    [dev.ssa] cmd/compile: handle boolean values for SSA on ARM
    
    Fix hardcoded flag register mask in ssa/flagalloc.go by auto-generating
    the mask.
    
    Also fix a mistake (in previous CL) about conditional branches.
    
    Progress on SSA backend for ARM. Still not complete. Now "container/ring"
    package compiles and tests passed.
    
    Updates #15365.
    
    Change-Id: Id7c8805c30dbb8107baedb485ed0f71f59ed6ea8
    Reviewed-on: https://go-review.googlesource.com/23093
    Reviewed-by: Keith Randall <khr@golang.org>

commit e2848de9efc599e1af54079ab1f8e79e0e26764c
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri May 6 10:13:31 2016 -0700

    [dev.ssa] cmd/compile: implement the following for SSA on ARM
    
    - generic Ops: Phi, CALL variants, NilCheck
    - generic Blocks: Plain, Check
    - 32-bit arithmetics
    - CMP and conditional branches
    - load/store
    - zero/sign-extensions (8 to 16, 8 to 32, 16 to 32)
    
    Progress on SSA backend for ARM. Still not complete. Now "errors"
    package compiles and tests passed.
    
    Updates #15365.
    
    Change-Id: If126fd17f8695cbf55d64085bb3f1a4a53205701
    Reviewed-on: https://go-review.googlesource.com/22856
    Reviewed-by: Keith Randall <khr@golang.org>

commit fdc4a964d24f0c975e2db2cf16a53327ad36b24d
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri May 6 10:12:57 2016 -0700

    [dev.ssa] cmd/compile/internal/gc, runtime: use 32-bit load for writeBarrier check
    
    Use 32-bit load for writeBarrier check on all architectures.
    Padding added to runtime structure.
    
    Updates #15365, #15492.
    
    Change-Id: I5d3dadf8609923fe0fe4fcb384a418b7b9624998
    Reviewed-on: https://go-review.googlesource.com/22855
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

commit e1a2ea88d02280e0661d66dc7483c95b39e18646
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri May 6 10:11:41 2016 -0700

    [dev.ssa] cmd/compile: handle symbolic constant for SSA on ARM
    
    Progress on SSA backend for ARM. Still not complete. Now "helloworld"
    function compiles and runs.
    
    Updates #15365.
    
    Change-Id: I02f66983cefdf07a6aed262fb4af8add464d8e9a
    Reviewed-on: https://go-review.googlesource.com/22854
    Reviewed-by: Keith Randall <khr@golang.org>

commit 802966f7b3827d0e462742293c259a2c1408595d
Merge: ab150e1ac9 9b05ae612a
Author: Keith Randall <khr@golang.org>
Date:   Thu May 5 14:24:16 2016 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Merge from tip into ssa.
    
    Change-Id: Icbc1c46d9f4721e4a0f99a24dd708044407ee9f7

commit ab150e1ac93b720b4591d618e4fe35988044ee54
Author: Keith Randall <khr@golang.org>
Date:   Thu May 5 13:05:16 2016 -0700

    [dev.ssa] all: merge from tip to get dev.ssa current
    
    So we can start working on other architectures here.
    
    Change is a dummy to keep git happy.
    
    Change-Id: I1caa62a242790601810a1ff72af7ea9773d4da76
    Reviewed-on: https://go-review.googlesource.com/22822
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
```
